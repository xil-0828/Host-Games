const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-DwiGIqh8.js","assets/webworkerAll-psOtDE_0.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function ZE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cae(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var IC={exports:{}},Xb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U8;function hae(){if(U8)return Xb;U8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(n,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:t,type:n,key:a,ref:r!==void 0?r:null,props:s}}return Xb.Fragment=e,Xb.jsx=i,Xb.jsxs=i,Xb}var G8;function e9(){return G8||(G8=1,IC.exports=hae()),IC.exports}var un=e9(),t9=Object.defineProperty,i9=t=>{throw TypeError(t)},dae=(t,e,i)=>e in t?t9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,fae=(t,e)=>{for(var i in e)t9(t,i,{get:e[i],enumerable:!0})},Kd=(t,e,i)=>dae(t,typeof e!="symbol"?e+"":e,i),n9=(t,e,i)=>e.has(t)||i9("Cannot "+i),pae=(t,e,i)=>(n9(t,e,"read from private field"),i?i.call(t):e.get(t)),mae=(t,e,i)=>e.has(t)?i9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),H8=(t,e,i,n)=>(n9(t,e,"write to private field"),e.set(t,i),i),gae=Object.create,_B=Object.defineProperty,bae=Object.getOwnPropertyDescriptor,yae=Object.getOwnPropertyNames,xae=Object.getPrototypeOf,_ae=Object.prototype.hasOwnProperty,r9=t=>{throw TypeError(t)},vae=(t,e,i)=>e in t?_B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,z8=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,i)=>(typeof require<"u"?require:e)[i]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),JE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Tae=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of yae(e))!_ae.call(t,r)&&r!==i&&_B(t,r,{get:()=>e[r],enumerable:!(n=bae(e,r))||n.enumerable});return t},vB=(t,e,i)=>(i=t!=null?gae(xae(t)):{},Tae(_B(i,"default",{value:t,enumerable:!0}),t)),Ne=(t,e,i)=>vae(t,typeof e!="symbol"?e+"":e,i),TB=(t,e,i)=>e.has(t)||r9("Cannot "+i),ue=(t,e,i)=>(TB(t,e,"read from private field"),i?i.call(t):e.get(t)),Ai=(t,e,i)=>e.has(t)?r9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Dt=(t,e,i,n)=>(TB(t,e,"write to private field"),e.set(t,i),i),mt=(t,e,i)=>(TB(t,e,"access private method"),i),o3=(t,e,i,n)=>({set _(r){Dt(t,e,r)},get _(){return ue(t,e,n)}}),ke;(t=>(t.log=(e,...i)=>console.log(`[Pixi’VN] ${e}`,...i),t.warn=(e,...i)=>console.warn(`[Pixi’VN] ${e}`,...i),t.error=(e,...i)=>console.error(`[Pixi’VN] ${e}`,...i),t.info=(e,...i)=>console.info(`[Pixi’VN] ${e}`,...i)))(ke||(ke={}));function Hi(t){try{if(typeof t>"u")return t;let e=JSON.stringify(t);return JSON.parse(e)}catch(e){throw ke.error("Error creating exportable element",t,e),new Error("[Pixi’VN] Error creating exportable element")}}var Eae=JE((t,e)=>{(function(i,n){typeof t=="object"?e.exports=t=n():typeof define=="function"&&define.amd?define([],n):i.CryptoJS=n()})(t,function(){var i=i||(function(n,r){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof global<"u"&&global.crypto&&(s=global.crypto),!s&&typeof z8=="function")try{s=z8("crypto")}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||(function(){function D(){}return function(R){var B;return D.prototype=R,B=new D,D.prototype=null,B}})(),l={},h=l.lib={},d=h.Base=(function(){return{extend:function(D){var R=o(this);return D&&R.mixIn(D),(!R.hasOwnProperty("init")||this.init===R.init)&&(R.init=function(){R.$super.init.apply(this,arguments)}),R.init.prototype=R,R.$super=this,R},create:function(){var D=this.extend();return D.init.apply(D,arguments),D},init:function(){},mixIn:function(D){for(var R in D)D.hasOwnProperty(R)&&(this[R]=D[R]);D.hasOwnProperty("toString")&&(this.toString=D.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),p=h.WordArray=d.extend({init:function(D,R){D=this.words=D||[],R!=r?this.sigBytes=R:this.sigBytes=D.length*4},toString:function(D){return(D||y).stringify(this)},concat:function(D){var R=this.words,B=D.words,z=this.sigBytes,L=D.sigBytes;if(this.clamp(),z%4)for(var H=0;H<L;H++){var te=B[H>>>2]>>>24-H%4*8&255;R[z+H>>>2]|=te<<24-(z+H)%4*8}else for(var j=0;j<L;j+=4)R[z+j>>>2]=B[j>>>2];return this.sigBytes+=L,this},clamp:function(){var D=this.words,R=this.sigBytes;D[R>>>2]&=4294967295<<32-R%4*8,D.length=n.ceil(R/4)},clone:function(){var D=d.clone.call(this);return D.words=this.words.slice(0),D},random:function(D){for(var R=[],B=0;B<D;B+=4)R.push(a());return new p.init(R,D)}}),g=l.enc={},y=g.Hex={stringify:function(D){for(var R=D.words,B=D.sigBytes,z=[],L=0;L<B;L++){var H=R[L>>>2]>>>24-L%4*8&255;z.push((H>>>4).toString(16)),z.push((H&15).toString(16))}return z.join("")},parse:function(D){for(var R=D.length,B=[],z=0;z<R;z+=2)B[z>>>3]|=parseInt(D.substr(z,2),16)<<24-z%8*4;return new p.init(B,R/2)}},v=g.Latin1={stringify:function(D){for(var R=D.words,B=D.sigBytes,z=[],L=0;L<B;L++){var H=R[L>>>2]>>>24-L%4*8&255;z.push(String.fromCharCode(H))}return z.join("")},parse:function(D){for(var R=D.length,B=[],z=0;z<R;z++)B[z>>>2]|=(D.charCodeAt(z)&255)<<24-z%4*8;return new p.init(B,R)}},S=g.Utf8={stringify:function(D){try{return decodeURIComponent(escape(v.stringify(D)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(D){return v.parse(unescape(encodeURIComponent(D)))}},T=h.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(D){typeof D=="string"&&(D=S.parse(D)),this._data.concat(D),this._nDataBytes+=D.sigBytes},_process:function(D){var R,B=this._data,z=B.words,L=B.sigBytes,H=this.blockSize,te=H*4,j=L/te;D?j=n.ceil(j):j=n.max((j|0)-this._minBufferSize,0);var O=j*H,q=n.min(O*4,L);if(O){for(var re=0;re<O;re+=H)this._doProcessBlock(z,re);R=z.splice(0,O),B.sigBytes-=q}return new p.init(R,q)},clone:function(){var D=d.clone.call(this);return D._data=this._data.clone(),D},_minBufferSize:0});h.Hasher=T.extend({cfg:d.extend(),init:function(D){this.cfg=this.cfg.extend(D),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(D){return this._append(D),this._process(),this},finalize:function(D){D&&this._append(D);var R=this._doFinalize();return R},blockSize:16,_createHelper:function(D){return function(R,B){return new D.init(B).finalize(R)}},_createHmacHelper:function(D){return function(R,B){return new A.HMAC.init(D,B).finalize(R)}}});var A=l.algo={};return l})(Math);return i})}),s9=JE((t,e)=>{(function(i,n){typeof t=="object"?e.exports=t=n(Eae()):typeof define=="function"&&define.amd?define(["./core"],n):n(i.CryptoJS)})(t,function(i){return(function(){var n=i,r=n.lib,s=r.WordArray,a=r.Hasher,o=n.algo,l=[],h=o.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,p){for(var g=this._hash.words,y=g[0],v=g[1],S=g[2],T=g[3],A=g[4],D=0;D<80;D++){if(D<16)l[D]=d[p+D]|0;else{var R=l[D-3]^l[D-8]^l[D-14]^l[D-16];l[D]=R<<1|R>>>31}var B=(y<<5|y>>>27)+A+l[D];D<20?B+=(v&S|~v&T)+1518500249:D<40?B+=(v^S^T)+1859775393:D<60?B+=(v&S|v&T|S&T)-1894007588:B+=(v^S^T)-899497514,A=T,T=S,S=v<<30|v>>>2,v=y,y=B}g[0]=g[0]+y|0,g[1]=g[1]+v|0,g[2]=g[2]+S|0,g[3]=g[3]+T|0,g[4]=g[4]+A|0},_doFinalize:function(){var d=this._data,p=d.words,g=this._nDataBytes*8,y=d.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=Math.floor(g/4294967296),p[(y+64>>>9<<4)+15]=g,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});n.SHA1=a._createHelper(h),n.HmacSHA1=a._createHmacHelper(h)})(),i.SHA1})}),Sae=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,a9=new Set,u3=typeof process=="object"&&process?process:{},o9=(t,e,i,n)=>{typeof u3.emitWarning=="function"?u3.emitWarning(t,e,i,n):console.error(`[${i}] ${e}: ${t}`)},eE=globalThis.AbortController,V8=globalThis.AbortSignal;if(typeof eE>"u"){V8=class{constructor(){Ne(this,"onabort"),Ne(this,"_onabort",[]),Ne(this,"reason"),Ne(this,"aborted",!1)}addEventListener(i,n){this._onabort.push(n)}},eE=class{constructor(){Ne(this,"signal",new V8),e()}abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let n of this.signal._onabort)n(i);this.signal.onabort?.(i)}}};let t=u3.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,o9("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Aae=t=>!a9.has(t),vh=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),u9=t=>vh(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?cT:null:null,cT=class extends Array{constructor(e){super(e),this.fill(0)}},Xy,l9=class Cy{constructor(e,i){if(Ne(this,"heap"),Ne(this,"length"),!ue(Cy,Xy))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new i(e),this.length=0}static create(e){let i=u9(e);if(!i)return[];Dt(Cy,Xy,!0);let n=new Cy(e,i);return Dt(Cy,Xy,!1),n}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Xy=new WeakMap,Ai(l9,Xy,!1);var Cae=l9,j8,X8,Xu,oo,Yu,mm,ju,Yy,wy,qu,Wr,uo,Or,Fn,Zt,sa,lo,zs,as,tl,os,Wu,$u,co,Ku,ef,aa,Dy,ut,l3,Tm,dh,tE,ho,c9,Em,qy,iE,ah,fh,LC,nE,hT,Dn,NC,Ry,Th,c3,wae=class h9{constructor(e){Ai(this,ut),Ai(this,Xu),Ai(this,oo),Ai(this,Yu),Ai(this,mm),Ai(this,ju),Ai(this,Yy),Ai(this,wy),Ai(this,qu),Ne(this,"ttl"),Ne(this,"ttlResolution"),Ne(this,"ttlAutopurge"),Ne(this,"updateAgeOnGet"),Ne(this,"updateAgeOnHas"),Ne(this,"allowStale"),Ne(this,"noDisposeOnSet"),Ne(this,"noUpdateTTL"),Ne(this,"maxEntrySize"),Ne(this,"sizeCalculation"),Ne(this,"noDeleteOnFetchRejection"),Ne(this,"noDeleteOnStaleGet"),Ne(this,"allowStaleOnFetchAbort"),Ne(this,"allowStaleOnFetchRejection"),Ne(this,"ignoreFetchAbort"),Ai(this,Wr),Ai(this,uo),Ai(this,Or),Ai(this,Fn),Ai(this,Zt),Ai(this,sa),Ai(this,lo),Ai(this,zs),Ai(this,as),Ai(this,tl),Ai(this,os),Ai(this,Wu),Ai(this,$u),Ai(this,co),Ai(this,Ku),Ai(this,ef),Ai(this,aa),Ai(this,Dy),Ai(this,Tm,()=>{}),Ai(this,dh,()=>{}),Ai(this,tE,()=>{}),Ai(this,ho,()=>!1),Ai(this,Em,O=>{}),Ai(this,qy,(O,q,re)=>{}),Ai(this,iE,(O,q,re,ae)=>{if(re||ae)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0}),Ne(this,j8,"LRUCache");let{max:i=0,ttl:n,ttlResolution:r=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:o,allowStale:l,dispose:h,onInsert:d,disposeAfter:p,noDisposeOnSet:g,noUpdateTTL:y,maxSize:v=0,maxEntrySize:S=0,sizeCalculation:T,fetchMethod:A,memoMethod:D,noDeleteOnFetchRejection:R,noDeleteOnStaleGet:B,allowStaleOnFetchRejection:z,allowStaleOnFetchAbort:L,ignoreFetchAbort:H,perf:te}=e;if(te!==void 0&&typeof te?.now!="function")throw new TypeError("perf option must have a now() method if specified");if(Dt(this,qu,te??Sae),i!==0&&!vh(i))throw new TypeError("max option must be a nonnegative integer");let j=i?u9(i):Array;if(!j)throw new Error("invalid max value: "+i);if(Dt(this,Xu,i),Dt(this,oo,v),this.maxEntrySize=S||ue(this,oo),this.sizeCalculation=T,this.sizeCalculation){if(!ue(this,oo)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(D!==void 0&&typeof D!="function")throw new TypeError("memoMethod must be a function if defined");if(Dt(this,wy,D),A!==void 0&&typeof A!="function")throw new TypeError("fetchMethod must be a function if specified");if(Dt(this,Yy,A),Dt(this,ef,!!A),Dt(this,Or,new Map),Dt(this,Fn,new Array(i).fill(void 0)),Dt(this,Zt,new Array(i).fill(void 0)),Dt(this,sa,new j(i)),Dt(this,lo,new j(i)),Dt(this,zs,0),Dt(this,as,0),Dt(this,tl,Cae.create(i)),Dt(this,Wr,0),Dt(this,uo,0),typeof h=="function"&&Dt(this,Yu,h),typeof d=="function"&&Dt(this,mm,d),typeof p=="function"?(Dt(this,ju,p),Dt(this,os,[])):(Dt(this,ju,void 0),Dt(this,os,void 0)),Dt(this,Ku,!!ue(this,Yu)),Dt(this,Dy,!!ue(this,mm)),Dt(this,aa,!!ue(this,ju)),this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!R,this.allowStaleOnFetchRejection=!!z,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!H,this.maxEntrySize!==0){if(ue(this,oo)!==0&&!vh(ue(this,oo)))throw new TypeError("maxSize must be a positive integer if specified");if(!vh(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");mt(this,ut,c9).call(this)}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!B,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!o,this.ttlResolution=vh(r)||r===0?r:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!vh(this.ttl))throw new TypeError("ttl must be a positive integer if specified");mt(this,ut,l3).call(this)}if(ue(this,Xu)===0&&this.ttl===0&&ue(this,oo)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!ue(this,Xu)&&!ue(this,oo)){let O="LRU_CACHE_UNBOUNDED";Aae(O)&&(a9.add(O),o9("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,h9))}}get perf(){return ue(this,qu)}static unsafeExposeInternals(e){return{starts:ue(e,$u),ttls:ue(e,co),sizes:ue(e,Wu),keyMap:ue(e,Or),keyList:ue(e,Fn),valList:ue(e,Zt),next:ue(e,sa),prev:ue(e,lo),get head(){return ue(e,zs)},get tail(){return ue(e,as)},free:ue(e,tl),isBackgroundFetch:i=>{var n;return mt(n=e,ut,Dn).call(n,i)},backgroundFetch:(i,n,r,s)=>{var a;return mt(a=e,ut,hT).call(a,i,n,r,s)},moveToTail:i=>{var n;return mt(n=e,ut,Ry).call(n,i)},indexes:i=>{var n;return mt(n=e,ut,ah).call(n,i)},rindexes:i=>{var n;return mt(n=e,ut,fh).call(n,i)},isStale:i=>{var n;return ue(n=e,ho).call(n,i)}}}get max(){return ue(this,Xu)}get maxSize(){return ue(this,oo)}get calculatedSize(){return ue(this,uo)}get size(){return ue(this,Wr)}get fetchMethod(){return ue(this,Yy)}get memoMethod(){return ue(this,wy)}get dispose(){return ue(this,Yu)}get onInsert(){return ue(this,mm)}get disposeAfter(){return ue(this,ju)}getRemainingTTL(e){return ue(this,Or).has(e)?1/0:0}*entries(){for(let e of mt(this,ut,ah).call(this))ue(this,Zt)[e]!==void 0&&ue(this,Fn)[e]!==void 0&&!mt(this,ut,Dn).call(this,ue(this,Zt)[e])&&(yield[ue(this,Fn)[e],ue(this,Zt)[e]])}*rentries(){for(let e of mt(this,ut,fh).call(this))ue(this,Zt)[e]!==void 0&&ue(this,Fn)[e]!==void 0&&!mt(this,ut,Dn).call(this,ue(this,Zt)[e])&&(yield[ue(this,Fn)[e],ue(this,Zt)[e]])}*keys(){for(let e of mt(this,ut,ah).call(this)){let i=ue(this,Fn)[e];i!==void 0&&!mt(this,ut,Dn).call(this,ue(this,Zt)[e])&&(yield i)}}*rkeys(){for(let e of mt(this,ut,fh).call(this)){let i=ue(this,Fn)[e];i!==void 0&&!mt(this,ut,Dn).call(this,ue(this,Zt)[e])&&(yield i)}}*values(){for(let e of mt(this,ut,ah).call(this))ue(this,Zt)[e]!==void 0&&!mt(this,ut,Dn).call(this,ue(this,Zt)[e])&&(yield ue(this,Zt)[e])}*rvalues(){for(let e of mt(this,ut,fh).call(this))ue(this,Zt)[e]!==void 0&&!mt(this,ut,Dn).call(this,ue(this,Zt)[e])&&(yield ue(this,Zt)[e])}[(X8=Symbol.iterator,j8=Symbol.toStringTag,X8)](){return this.entries()}find(e,i={}){for(let n of mt(this,ut,ah).call(this)){let r=ue(this,Zt)[n],s=mt(this,ut,Dn).call(this,r)?r.__staleWhileFetching:r;if(s!==void 0&&e(s,ue(this,Fn)[n],this))return this.get(ue(this,Fn)[n],i)}}forEach(e,i=this){for(let n of mt(this,ut,ah).call(this)){let r=ue(this,Zt)[n],s=mt(this,ut,Dn).call(this,r)?r.__staleWhileFetching:r;s!==void 0&&e.call(i,s,ue(this,Fn)[n],this)}}rforEach(e,i=this){for(let n of mt(this,ut,fh).call(this)){let r=ue(this,Zt)[n],s=mt(this,ut,Dn).call(this,r)?r.__staleWhileFetching:r;s!==void 0&&e.call(i,s,ue(this,Fn)[n],this)}}purgeStale(){let e=!1;for(let i of mt(this,ut,fh).call(this,{allowStale:!0}))ue(this,ho).call(this,i)&&(mt(this,ut,Th).call(this,ue(this,Fn)[i],"expire"),e=!0);return e}info(e){let i=ue(this,Or).get(e);if(i===void 0)return;let n=ue(this,Zt)[i],r=mt(this,ut,Dn).call(this,n)?n.__staleWhileFetching:n;if(r===void 0)return;let s={value:r};if(ue(this,co)&&ue(this,$u)){let a=ue(this,co)[i],o=ue(this,$u)[i];if(a&&o){let l=a-(ue(this,qu).now()-o);s.ttl=l,s.start=Date.now()}}return ue(this,Wu)&&(s.size=ue(this,Wu)[i]),s}dump(){let e=[];for(let i of mt(this,ut,ah).call(this,{allowStale:!0})){let n=ue(this,Fn)[i],r=ue(this,Zt)[i],s=mt(this,ut,Dn).call(this,r)?r.__staleWhileFetching:r;if(s===void 0||n===void 0)continue;let a={value:s};if(ue(this,co)&&ue(this,$u)){a.ttl=ue(this,co)[i];let o=ue(this,qu).now()-ue(this,$u)[i];a.start=Math.floor(Date.now()-o)}ue(this,Wu)&&(a.size=ue(this,Wu)[i]),e.unshift([n,a])}return e}load(e){this.clear();for(let[i,n]of e){if(n.start){let r=Date.now()-n.start;n.start=ue(this,qu).now()-r}this.set(i,n.value,n)}}set(e,i,n={}){var r,s,a,o;if(i===void 0)return this.delete(e),this;let{ttl:l=this.ttl,start:h,noDisposeOnSet:d=this.noDisposeOnSet,sizeCalculation:p=this.sizeCalculation,status:g}=n,{noUpdateTTL:y=this.noUpdateTTL}=n,v=ue(this,iE).call(this,e,i,n.size||0,p);if(this.maxEntrySize&&v>this.maxEntrySize)return g&&(g.set="miss",g.maxEntrySizeExceeded=!0),mt(this,ut,Th).call(this,e,"set"),this;let S=ue(this,Wr)===0?void 0:ue(this,Or).get(e);if(S===void 0)S=ue(this,Wr)===0?ue(this,as):ue(this,tl).length!==0?ue(this,tl).pop():ue(this,Wr)===ue(this,Xu)?mt(this,ut,nE).call(this,!1):ue(this,Wr),ue(this,Fn)[S]=e,ue(this,Zt)[S]=i,ue(this,Or).set(e,S),ue(this,sa)[ue(this,as)]=S,ue(this,lo)[S]=ue(this,as),Dt(this,as,S),o3(this,Wr)._++,ue(this,qy).call(this,S,v,g),g&&(g.set="add"),y=!1,ue(this,Dy)&&((r=ue(this,mm))==null||r.call(this,i,e,"add"));else{mt(this,ut,Ry).call(this,S);let T=ue(this,Zt)[S];if(i!==T){if(ue(this,ef)&&mt(this,ut,Dn).call(this,T)){T.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:A}=T;A!==void 0&&!d&&(ue(this,Ku)&&((s=ue(this,Yu))==null||s.call(this,A,e,"set")),ue(this,aa)&&ue(this,os)?.push([A,e,"set"]))}else d||(ue(this,Ku)&&((a=ue(this,Yu))==null||a.call(this,T,e,"set")),ue(this,aa)&&ue(this,os)?.push([T,e,"set"]));if(ue(this,Em).call(this,S),ue(this,qy).call(this,S,v,g),ue(this,Zt)[S]=i,g){g.set="replace";let A=T&&mt(this,ut,Dn).call(this,T)?T.__staleWhileFetching:T;A!==void 0&&(g.oldValue=A)}}else g&&(g.set="update");ue(this,Dy)&&this.onInsert?.(i,e,i===T?"update":"replace")}if(l!==0&&!ue(this,co)&&mt(this,ut,l3).call(this),ue(this,co)&&(y||ue(this,tE).call(this,S,l,h),g&&ue(this,dh).call(this,g,S)),!d&&ue(this,aa)&&ue(this,os)){let T=ue(this,os),A;for(;A=T?.shift();)(o=ue(this,ju))==null||o.call(this,...A)}return this}pop(){var e;try{for(;ue(this,Wr);){let i=ue(this,Zt)[ue(this,zs)];if(mt(this,ut,nE).call(this,!0),mt(this,ut,Dn).call(this,i)){if(i.__staleWhileFetching)return i.__staleWhileFetching}else if(i!==void 0)return i}}finally{if(ue(this,aa)&&ue(this,os)){let i=ue(this,os),n;for(;n=i?.shift();)(e=ue(this,ju))==null||e.call(this,...n)}}}has(e,i={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:r}=i,s=ue(this,Or).get(e);if(s!==void 0){let a=ue(this,Zt)[s];if(mt(this,ut,Dn).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(ue(this,ho).call(this,s))r&&(r.has="stale",ue(this,dh).call(this,r,s));else return n&&ue(this,Tm).call(this,s),r&&(r.has="hit",ue(this,dh).call(this,r,s)),!0}else r&&(r.has="miss");return!1}peek(e,i={}){let{allowStale:n=this.allowStale}=i,r=ue(this,Or).get(e);if(r===void 0||!n&&ue(this,ho).call(this,r))return;let s=ue(this,Zt)[r];return mt(this,ut,Dn).call(this,s)?s.__staleWhileFetching:s}async fetch(e,i={}){let{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:l=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:y=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:S,forceRefresh:T=!1,status:A,signal:D}=i;if(!ue(this,ef))return A&&(A.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:s,status:A});let R={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:o,size:l,sizeCalculation:h,noUpdateTTL:d,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:v,ignoreFetchAbort:y,status:A,signal:D},B=ue(this,Or).get(e);if(B===void 0){A&&(A.fetch="miss");let z=mt(this,ut,hT).call(this,e,B,R,S);return z.__returned=z}else{let z=ue(this,Zt)[B];if(mt(this,ut,Dn).call(this,z)){let j=n&&z.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",j&&(A.returnedStale=!0)),j?z.__staleWhileFetching:z.__returned=z}let L=ue(this,ho).call(this,B);if(!T&&!L)return A&&(A.fetch="hit"),mt(this,ut,Ry).call(this,B),r&&ue(this,Tm).call(this,B),A&&ue(this,dh).call(this,A,B),z;let H=mt(this,ut,hT).call(this,e,B,R,S),te=H.__staleWhileFetching!==void 0&&n;return A&&(A.fetch=L?"stale":"refresh",te&&L&&(A.returnedStale=!0)),te?H.__staleWhileFetching:H.__returned=H}}async forceFetch(e,i={}){let n=await this.fetch(e,i);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,i={}){let n=ue(this,wy);if(!n)throw new Error("no memoMethod provided to constructor");let{context:r,forceRefresh:s,...a}=i,o=this.get(e,a);if(!s&&o!==void 0)return o;let l=n(e,o,{options:a,context:r});return this.set(e,l,a),l}get(e,i={}){let{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=i,o=ue(this,Or).get(e);if(o!==void 0){let l=ue(this,Zt)[o],h=mt(this,ut,Dn).call(this,l);return a&&ue(this,dh).call(this,a,o),ue(this,ho).call(this,o)?(a&&(a.get="stale"),h?(a&&n&&l.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||mt(this,ut,Th).call(this,e,"expire"),a&&n&&(a.returnedStale=!0),n?l:void 0)):(a&&(a.get="hit"),h?l.__staleWhileFetching:(mt(this,ut,Ry).call(this,o),r&&ue(this,Tm).call(this,o),l))}else a&&(a.get="miss")}delete(e){return mt(this,ut,Th).call(this,e,"delete")}clear(){return mt(this,ut,c3).call(this,"delete")}};Xu=new WeakMap,oo=new WeakMap,Yu=new WeakMap,mm=new WeakMap,ju=new WeakMap,Yy=new WeakMap,wy=new WeakMap,qu=new WeakMap,Wr=new WeakMap,uo=new WeakMap,Or=new WeakMap,Fn=new WeakMap,Zt=new WeakMap,sa=new WeakMap,lo=new WeakMap,zs=new WeakMap,as=new WeakMap,tl=new WeakMap,os=new WeakMap,Wu=new WeakMap,$u=new WeakMap,co=new WeakMap,Ku=new WeakMap,ef=new WeakMap,aa=new WeakMap,Dy=new WeakMap,ut=new WeakSet,l3=function(){let t=new cT(ue(this,Xu)),e=new cT(ue(this,Xu));Dt(this,co,t),Dt(this,$u,e),Dt(this,tE,(r,s,a=ue(this,qu).now())=>{if(e[r]=s!==0?a:0,t[r]=s,s!==0&&this.ttlAutopurge){let o=setTimeout(()=>{ue(this,ho).call(this,r)&&mt(this,ut,Th).call(this,ue(this,Fn)[r],"expire")},s+1);o.unref&&o.unref()}}),Dt(this,Tm,r=>{e[r]=t[r]!==0?ue(this,qu).now():0}),Dt(this,dh,(r,s)=>{if(t[s]){let a=t[s],o=e[s];if(!a||!o)return;r.ttl=a,r.start=o,r.now=i||n();let l=r.now-o;r.remainingTTL=a-l}});let i=0,n=()=>{let r=ue(this,qu).now();if(this.ttlResolution>0){i=r;let s=setTimeout(()=>i=0,this.ttlResolution);s.unref&&s.unref()}return r};this.getRemainingTTL=r=>{let s=ue(this,Or).get(r);if(s===void 0)return 0;let a=t[s],o=e[s];if(!a||!o)return 1/0;let l=(i||n())-o;return a-l},Dt(this,ho,r=>{let s=e[r],a=t[r];return!!a&&!!s&&(i||n())-s>a})},Tm=new WeakMap,dh=new WeakMap,tE=new WeakMap,ho=new WeakMap,c9=function(){let t=new cT(ue(this,Xu));Dt(this,uo,0),Dt(this,Wu,t),Dt(this,Em,e=>{Dt(this,uo,ue(this,uo)-t[e]),t[e]=0}),Dt(this,iE,(e,i,n,r)=>{if(mt(this,ut,Dn).call(this,i))return 0;if(!vh(n))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(n=r(i,e),!vh(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n}),Dt(this,qy,(e,i,n)=>{if(t[e]=i,ue(this,oo)){let r=ue(this,oo)-t[e];for(;ue(this,uo)>r;)mt(this,ut,nE).call(this,!0)}Dt(this,uo,ue(this,uo)+t[e]),n&&(n.entrySize=i,n.totalCalculatedSize=ue(this,uo))})},Em=new WeakMap,qy=new WeakMap,iE=new WeakMap,ah=function*({allowStale:t=this.allowStale}={}){if(ue(this,Wr))for(let e=ue(this,as);!(!mt(this,ut,LC).call(this,e)||((t||!ue(this,ho).call(this,e))&&(yield e),e===ue(this,zs)));)e=ue(this,lo)[e]},fh=function*({allowStale:t=this.allowStale}={}){if(ue(this,Wr))for(let e=ue(this,zs);!(!mt(this,ut,LC).call(this,e)||((t||!ue(this,ho).call(this,e))&&(yield e),e===ue(this,as)));)e=ue(this,sa)[e]},LC=function(t){return t!==void 0&&ue(this,Or).get(ue(this,Fn)[t])===t},nE=function(t){var e;let i=ue(this,zs),n=ue(this,Fn)[i],r=ue(this,Zt)[i];return ue(this,ef)&&mt(this,ut,Dn).call(this,r)?r.__abortController.abort(new Error("evicted")):(ue(this,Ku)||ue(this,aa))&&(ue(this,Ku)&&((e=ue(this,Yu))==null||e.call(this,r,n,"evict")),ue(this,aa)&&ue(this,os)?.push([r,n,"evict"])),ue(this,Em).call(this,i),t&&(ue(this,Fn)[i]=void 0,ue(this,Zt)[i]=void 0,ue(this,tl).push(i)),ue(this,Wr)===1?(Dt(this,zs,Dt(this,as,0)),ue(this,tl).length=0):Dt(this,zs,ue(this,sa)[i]),ue(this,Or).delete(n),o3(this,Wr)._--,i},hT=function(t,e,i,n){let r=e===void 0?void 0:ue(this,Zt)[e];if(mt(this,ut,Dn).call(this,r))return r;let s=new eE,{signal:a}=i;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let o={signal:s.signal,options:i,context:n},l=(v,S=!1)=>{let{aborted:T}=s.signal,A=i.ignoreFetchAbort&&v!==void 0;if(i.status&&(T&&!S?(i.status.fetchAborted=!0,i.status.fetchError=s.signal.reason,A&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),T&&!A&&!S)return d(s.signal.reason);let D=g,R=ue(this,Zt)[e];return(R===g||A&&S&&R===void 0)&&(v===void 0?D.__staleWhileFetching!==void 0?ue(this,Zt)[e]=D.__staleWhileFetching:mt(this,ut,Th).call(this,t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,v,o.options))),v},h=v=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=v),d(v)),d=v=>{let{aborted:S}=s.signal,T=S&&i.allowStaleOnFetchAbort,A=T||i.allowStaleOnFetchRejection,D=A||i.noDeleteOnFetchRejection,R=g;if(ue(this,Zt)[e]===g&&(!D||R.__staleWhileFetching===void 0?mt(this,ut,Th).call(this,t,"fetch"):T||(ue(this,Zt)[e]=R.__staleWhileFetching)),A)return i.status&&R.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),R.__staleWhileFetching;if(R.__returned===R)throw v},p=(v,S)=>{var T;let A=(T=ue(this,Yy))==null?void 0:T.call(this,t,r,o);A&&A instanceof Promise&&A.then(D=>v(D===void 0?void 0:D),S),s.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(v(void 0),i.allowStaleOnFetchAbort&&(v=D=>l(D,!0)))})};i.status&&(i.status.fetchDispatched=!0);let g=new Promise(p).then(l,h),y=Object.assign(g,{__abortController:s,__staleWhileFetching:r,__returned:void 0});return e===void 0?(this.set(t,y,{...o.options,status:void 0}),e=ue(this,Or).get(t)):ue(this,Zt)[e]=y,y},Dn=function(t){if(!ue(this,ef))return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof eE},NC=function(t,e){ue(this,lo)[e]=t,ue(this,sa)[t]=e},Ry=function(t){t!==ue(this,as)&&(t===ue(this,zs)?Dt(this,zs,ue(this,sa)[t]):mt(this,ut,NC).call(this,ue(this,lo)[t],ue(this,sa)[t]),mt(this,ut,NC).call(this,ue(this,as),t),Dt(this,as,t))},Th=function(t,e){var i,n;let r=!1;if(ue(this,Wr)!==0){let s=ue(this,Or).get(t);if(s!==void 0)if(r=!0,ue(this,Wr)===1)mt(this,ut,c3).call(this,e);else{ue(this,Em).call(this,s);let a=ue(this,Zt)[s];if(mt(this,ut,Dn).call(this,a)?a.__abortController.abort(new Error("deleted")):(ue(this,Ku)||ue(this,aa))&&(ue(this,Ku)&&((i=ue(this,Yu))==null||i.call(this,a,t,e)),ue(this,aa)&&ue(this,os)?.push([a,t,e])),ue(this,Or).delete(t),ue(this,Fn)[s]=void 0,ue(this,Zt)[s]=void 0,s===ue(this,as))Dt(this,as,ue(this,lo)[s]);else if(s===ue(this,zs))Dt(this,zs,ue(this,sa)[s]);else{let o=ue(this,lo)[s];ue(this,sa)[o]=ue(this,sa)[s];let l=ue(this,sa)[s];ue(this,lo)[l]=ue(this,lo)[s]}o3(this,Wr)._--,ue(this,tl).push(s)}}if(ue(this,aa)&&ue(this,os)?.length){let s=ue(this,os),a;for(;a=s?.shift();)(n=ue(this,ju))==null||n.call(this,...a)}return r},c3=function(t){var e,i;for(let n of mt(this,ut,fh).call(this,{allowStale:!0})){let r=ue(this,Zt)[n];if(mt(this,ut,Dn).call(this,r))r.__abortController.abort(new Error("deleted"));else{let s=ue(this,Fn)[n];ue(this,Ku)&&((e=ue(this,Yu))==null||e.call(this,r,s,t)),ue(this,aa)&&ue(this,os)?.push([r,s,t])}}if(ue(this,Or).clear(),ue(this,Zt).fill(void 0),ue(this,Fn).fill(void 0),ue(this,co)&&ue(this,$u)&&(ue(this,co).fill(0),ue(this,$u).fill(0)),ue(this,Wu)&&ue(this,Wu).fill(0),Dt(this,zs,0),Dt(this,as,0),ue(this,tl).length=0,Dt(this,uo,0),Dt(this,Wr,0),ue(this,aa)&&ue(this,os)){let n=ue(this,os),r;for(;r=n?.shift();)(i=ue(this,ju))==null||i.call(this,...r)}};var Dae=wae,ac=class{constructor(e){Ne(this,"cache"),Ne(this,"map",new Map),this.cache=new Dae({max:e.cacheSize}),this.map=new Map}get[Symbol.iterator](){return this.map[Symbol.iterator]}get[Symbol.toStringTag](){return this.map[Symbol.toStringTag]}clear(){return this.cache.clear(),this.map.clear()}delete(e){let i=this.map.delete(e);return i&&this.cache.delete(e),i}get forEach(){return this.map.forEach}get(e){return this.cache.get(e)||this.map.get(e)}has(e){return this.map.has(e)}set(e,i){return this.map.set(e,i),this.cache.set(e,i),this}get size(){return this.map.size}entries(){return this.map.entries()}keys(){return this.map.keys()}values(){return this.map.values()}},Rae=Object.create,EB=Object.defineProperty,Pae=Object.getOwnPropertyDescriptor,Mae=Object.getOwnPropertyNames,Bae=Object.getPrototypeOf,kae=Object.prototype.hasOwnProperty,G=(t,e)=>()=>(t&&(e=t(t=0)),e),Oh=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),d9=(t,e)=>{for(var i in e)EB(t,i,{get:e[i],enumerable:!0})},Oae=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Mae(e))!kae.call(t,r)&&r!==i&&EB(t,r,{get:()=>e[r],enumerable:!(n=Pae(e,r))||n.enumerable});return t},SB=(t,e,i)=>(i=t!=null?Rae(Bae(t)):{},Oae(EB(i,"default",{value:t,enumerable:!0}),t)),ge,j2,Yb,Lt,Ae=G(()=>{ge=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(ge||{}),j2=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Yb=(t,e)=>j2(t).priority??e,Lt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(j2).forEach(e=>{e.type.forEach(i=>this._removeHandlers[i]?.(e))}),this},add(...t){return t.map(j2).forEach(e=>{e.type.forEach(i=>{let n=this._addHandlers,r=this._queue;n[i]?n[i]?.(e):(r[i]=r[i]||[],r[i]?.push(e))})}),this},handle(t,e,i){let n=this._addHandlers,r=this._removeHandlers;if(n[t]||r[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,r[t]=i;let s=this._queue;return s[t]&&(s[t]?.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,i=>{i.name&&(e[i.name]=i.ref)},i=>{i.name&&delete e[i.name]})},handleByNamedList(t,e,i=-1){return this.handle(t,n=>{e.findIndex(r=>r.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((r,s)=>Yb(s.value,i)-Yb(r.value,i)))},n=>{let r=e.findIndex(s=>s.name===n.name);r!==-1&&e.splice(r,1)})},handleByList(t,e,i=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((r,s)=>Yb(s,i)-Yb(r,i)))},n=>{let r=e.indexOf(n.ref);r!==-1&&e.splice(r,1)})},mixin(t,...e){for(let i of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(i))}}}),Fae=Oh((t,e)=>{var i=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(h,d,p){this.fn=h,this.context=d,this.once=p||!1}function a(h,d,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new s(p,g||h,y),S=n?n+d:d;return h._events[S]?h._events[S].fn?h._events[S]=[h._events[S],v]:h._events[S].push(v):(h._events[S]=v,h._eventsCount++),h}function o(h,d){--h._eventsCount===0?h._events=new r:delete h._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],d,p;if(this._eventsCount===0)return h;for(p in d=this._events)i.call(d,p)&&h.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},l.prototype.listeners=function(h){var d=n?n+h:h,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,v=new Array(y);g<y;g++)v[g]=p[g].fn;return v},l.prototype.listenerCount=function(h){var d=n?n+h:h,p=this._events[d];return p?p.fn?1:p.length:0},l.prototype.emit=function(h,d,p,g,y,v){var S=n?n+h:h;if(!this._events[S])return!1;var T=this._events[S],A=arguments.length,D,R;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),A){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,d),!0;case 3:return T.fn.call(T.context,d,p),!0;case 4:return T.fn.call(T.context,d,p,g),!0;case 5:return T.fn.call(T.context,d,p,g,y),!0;case 6:return T.fn.call(T.context,d,p,g,y,v),!0}for(R=1,D=new Array(A-1);R<A;R++)D[R-1]=arguments[R];T.fn.apply(T.context,D)}else{var B=T.length,z;for(R=0;R<B;R++)switch(T[R].once&&this.removeListener(h,T[R].fn,void 0,!0),A){case 1:T[R].fn.call(T[R].context);break;case 2:T[R].fn.call(T[R].context,d);break;case 3:T[R].fn.call(T[R].context,d,p);break;case 4:T[R].fn.call(T[R].context,d,p,g);break;default:if(!D)for(z=1,D=new Array(A-1);z<A;z++)D[z-1]=arguments[z];T[R].fn.apply(T[R].context,D)}}return!0},l.prototype.on=function(h,d,p){return a(this,h,d,p,!1)},l.prototype.once=function(h,d,p){return a(this,h,d,p,!0)},l.prototype.removeListener=function(h,d,p,g){var y=n?n+h:h;if(!this._events[y])return this;if(!d)return o(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!g||v.once)&&(!p||v.context===p)&&o(this,y);else{for(var S=0,T=[],A=v.length;S<A;S++)(v[S].fn!==d||g&&!v[S].once||p&&v[S].context!==p)&&T.push(v[S]);T.length?this._events[y]=T.length===1?T[0]:T:o(this,y)}return this},l.prototype.removeAllListeners=function(h){var d;return h?(d=n?n+h:h,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,typeof e<"u"&&(e.exports=l)}),Y8,ma,Cs=G(()=>{Y8=SB(Fae()),ma=Y8.default}),q8,Lu,kr,Da,UC,GC,X2,W8,qb,HC,zC,VC,jC,XC,Jp,$8,K8,Q8,Z8,Y2,YC,J8,q2,W2,qC,$2,tu,WC,f9,Iae=G(()=>{q8={grad:.9,turn:360,rad:360/(2*Math.PI)},Lu=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},kr=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*t)/i+0},Da=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),t>i?i:t>e?t:e},UC=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},GC=function(t){return{r:Da(t.r,0,255),g:Da(t.g,0,255),b:Da(t.b,0,255),a:Da(t.a)}},X2=function(t){return{r:kr(t.r),g:kr(t.g),b:kr(t.b),a:kr(t.a,3)}},W8=/^#([0-9a-f]{3,8})$/i,qb=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},HC=function(t){var e=t.r,i=t.g,n=t.b,r=t.a,s=Math.max(e,i,n),a=s-Math.min(e,i,n),o=a?s===e?(i-n)/a:s===i?2+(n-e)/a:4+(e-i)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:r}},zC=function(t){var e=t.h,i=t.s,n=t.v,r=t.a;e=e/360*6,i/=100,n/=100;var s=Math.floor(e),a=n*(1-i),o=n*(1-(e-s)*i),l=n*(1-(1-e+s)*i),h=s%6;return{r:255*[n,o,a,a,l,n][h],g:255*[l,n,n,o,a,a][h],b:255*[a,a,l,n,n,o][h],a:r}},VC=function(t){return{h:UC(t.h),s:Da(t.s,0,100),l:Da(t.l,0,100),a:Da(t.a)}},jC=function(t){return{h:kr(t.h),s:kr(t.s),l:kr(t.l),a:kr(t.a,3)}},XC=function(t){return zC((i=(e=t).s,{h:e.h,s:(i*=((n=e.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:e.a}));var e,i,n},Jp=function(t){return{h:(e=HC(t)).h,s:(r=(200-(i=e.s))*(n=e.v)/100)>0&&r<200?i*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,i,n,r},$8=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,K8=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Q8=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Z8=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Y2={string:[[function(t){var e=W8.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?kr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?kr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Q8.exec(t)||Z8.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:GC({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=$8.exec(t)||K8.exec(t);if(!e)return null;var i,n,r=VC({h:(i=e[1],n=e[2],n===void 0&&(n="deg"),Number(i)*(q8[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return XC(r)},"hsl"]],object:[[function(t){var e=t.r,i=t.g,n=t.b,r=t.a,s=r===void 0?1:r;return Lu(e)&&Lu(i)&&Lu(n)?GC({r:Number(e),g:Number(i),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,i=t.s,n=t.l,r=t.a,s=r===void 0?1:r;if(!Lu(e)||!Lu(i)||!Lu(n))return null;var a=VC({h:Number(e),s:Number(i),l:Number(n),a:Number(s)});return XC(a)},"hsl"],[function(t){var e=t.h,i=t.s,n=t.v,r=t.a,s=r===void 0?1:r;if(!Lu(e)||!Lu(i)||!Lu(n))return null;var a=(function(o){return{h:UC(o.h),s:Da(o.s,0,100),v:Da(o.v,0,100),a:Da(o.a)}})({h:Number(e),s:Number(i),v:Number(n),a:Number(s)});return zC(a)},"hsv"]]},YC=function(t,e){for(var i=0;i<e.length;i++){var n=e[i][0](t);if(n)return[n,e[i][1]]}return[null,void 0]},J8=function(t){return typeof t=="string"?YC(t.trim(),Y2.string):typeof t=="object"&&t!==null?YC(t,Y2.object):[null,void 0]},q2=function(t,e){var i=Jp(t);return{h:i.h,s:Da(i.s+100*e,0,100),l:i.l,a:i.a}},W2=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},qC=function(t,e){var i=Jp(t);return{h:i.h,s:i.s,l:Da(i.l+100*e,0,100),a:i.a}},$2=(function(){function t(e){this.parsed=J8(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return kr(W2(this.rgba),2)},t.prototype.isDark=function(){return W2(this.rgba)<.5},t.prototype.isLight=function(){return W2(this.rgba)>=.5},t.prototype.toHex=function(){return e=X2(this.rgba),i=e.r,n=e.g,r=e.b,a=(s=e.a)<1?qb(kr(255*s)):"","#"+qb(i)+qb(n)+qb(r)+a;var e,i,n,r,s,a},t.prototype.toRgb=function(){return X2(this.rgba)},t.prototype.toRgbString=function(){return e=X2(this.rgba),i=e.r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+i+", "+n+", "+r+", "+s+")":"rgb("+i+", "+n+", "+r+")";var e,i,n,r,s},t.prototype.toHsl=function(){return jC(Jp(this.rgba))},t.prototype.toHslString=function(){return e=jC(Jp(this.rgba)),i=e.h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+i+", "+n+"%, "+r+"%, "+s+")":"hsl("+i+", "+n+"%, "+r+"%)";var e,i,n,r,s},t.prototype.toHsv=function(){return e=HC(this.rgba),{h:kr(e.h),s:kr(e.s),v:kr(e.v),a:kr(e.a,3)};var e},t.prototype.invert=function(){return tu({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),tu(q2(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),tu(q2(this.rgba,-e))},t.prototype.grayscale=function(){return tu(q2(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),tu(qC(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),tu(qC(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?tu({r:(i=this.rgba).r,g:i.g,b:i.b,a:e}):kr(this.rgba.a,3);var i},t.prototype.hue=function(e){var i=Jp(this.rgba);return typeof e=="number"?tu({h:e,s:i.s,l:i.l,a:i.a}):kr(i.h)},t.prototype.isEqual=function(e){return this.toHex()===tu(e).toHex()},t})(),tu=function(t){return t instanceof $2?t:new $2(t)},WC=[],f9=function(t){t.forEach(function(e){WC.indexOf(e)<0&&(e($2,Y2),WC.push(e))})}});function Lae(t,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in i)n[i[r]]=r;var s={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,h=n[this.toHex()];if(h)return h;if(a?.closest){var d=this.toRgb(),p=1/0,g="black";if(!s.length)for(var y in i)s[y]=new t(i[y]).toRgb();for(var v in i){var S=(o=d,l=s[v],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));S<p&&(p=S,g=v)}return g}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":i[o];return l?new t(l).toRgb():null},"name"])}var Nae=G(()=>{}),Od,An,Lr=G(()=>{Iae(),Nae(),f9([Lae]),Od=class Py{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Py)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,i){let n=typeof e;if(n!==typeof i)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===i;if(Array.isArray(e)&&Array.isArray(i)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(i))return e.length!==i.length?!1:e.every((r,s)=>r===i[s]);if(e!==null&&i!==null){let r=Object.keys(e),s=Object.keys(i);return r.length!==s.length?!1:r.every(a=>e[a]===i[a])}return e===i}toRgba(){let[e,i,n,r]=this._components;return{r:e,g:i,b:n,a:r}}toRgb(){let[e,i,n]=this._components;return{r:e,g:i,b:n}}toRgbaString(){let[e,i,n]=this.toUint8RgbArray();return`rgba(${e},${i},${n},${this.alpha})`}toUint8RgbArray(e){let[i,n,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(i*255),e[1]=Math.round(n*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);let[i,n,r,s]=this._components;return e[0]=i,e[1]=n,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);let[i,n,r]=this._components;return e[0]=i,e[1]=n,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){let[e,i,n]=this.toUint8RgbArray();return(n<<16)+(i<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[i,n,r,s]=Py._temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=n,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,i=!0){return i&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,i=!0){if(e===1)return(255<<24)+this._int;if(e===0)return i?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return i&&(n=n*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(r<<8)+s}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let i,n,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let a=e;i=(a>>16&255)/255,n=(a>>8&255)/255,r=(a&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,n,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,n,r,s=255]=e,i/=255,n/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let o=Py.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}let a=tu(e);a.isValid()&&({r:i,g:n,b:r,a:s}=a.rgba,i/=255,n/=255,r/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=n,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);let[e,i,n]=this._components;this._int=(e*255<<16)+(i*255<<8)+(n*255|0)}_clamp(e,i=0,n=1){return typeof e=="number"?Math.min(Math.max(e,i),n):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,i),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Py||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}},Od.shared=new Od,Od._temp=new Od,Od.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i,An=Od}),p9,m9=G(()=>{p9={cullArea:null,cullable:!1,cullableChildren:!0}}),g9,b9,y9,AB=G(()=>{g9=Math.PI*2,b9=180/Math.PI,y9=Math.PI/180}),Rn,K2,Ga=G(()=>{Rn=class x9{constructor(e=0,i=0){this.x=0,this.y=0,this.x=e,this.y=i}clone(){return new x9(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,i=e){return this.x=e,this.y=i,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return K2.x=0,K2.y=0,K2}},K2=new Rn}),Tt,e6,t6,hi=G(()=>{AB(),Ga(),Tt=class _9{constructor(e=1,i=0,n=0,r=1,s=0,a=0){this.array=null,this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,i,n,r,s,a){return this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a,this}toArray(e,i){this.array||(this.array=new Float32Array(9));let n=i||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,i){i=i||new Rn;let n=e.x,r=e.y;return i.x=this.a*n+this.c*r+this.tx,i.y=this.b*n+this.d*r+this.ty,i}applyInverse(e,i){i=i||new Rn;let n=this.a,r=this.b,s=this.c,a=this.d,o=this.tx,l=this.ty,h=1/(n*a+s*-r),d=e.x,p=e.y;return i.x=a*h*d+-s*h*p+(l*s-o*a)*h,i.y=n*h*p+-r*h*d+(-l*n+o*r)*h,i}translate(e,i){return this.tx+=e,this.ty+=i,this}scale(e,i){return this.a*=e,this.d*=i,this.c*=e,this.b*=i,this.tx*=e,this.ty*=i,this}rotate(e){let i=Math.cos(e),n=Math.sin(e),r=this.a,s=this.c,a=this.tx;return this.a=r*i-this.b*n,this.b=r*n+this.b*i,this.c=s*i-this.d*n,this.d=s*n+this.d*i,this.tx=a*i-this.ty*n,this.ty=a*n+this.ty*i,this}append(e){let i=this.a,n=this.b,r=this.c,s=this.d;return this.a=e.a*i+e.b*r,this.b=e.a*n+e.b*s,this.c=e.c*i+e.d*r,this.d=e.c*n+e.d*s,this.tx=e.tx*i+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}appendFrom(e,i){let n=e.a,r=e.b,s=e.c,a=e.d,o=e.tx,l=e.ty,h=i.a,d=i.b,p=i.c,g=i.d;return this.a=n*h+r*p,this.b=n*d+r*g,this.c=s*h+a*p,this.d=s*d+a*g,this.tx=o*h+l*p+i.tx,this.ty=o*d+l*g+i.ty,this}setTransform(e,i,n,r,s,a,o,l,h){return this.a=Math.cos(o+h)*s,this.b=Math.sin(o+h)*s,this.c=-Math.sin(o-l)*a,this.d=Math.cos(o-l)*a,this.tx=e-(n*this.a+r*this.c),this.ty=i-(n*this.b+r*this.d),this}prepend(e){let i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this}decompose(e){let i=this.a,n=this.b,r=this.c,s=this.d,a=e.pivot,o=-Math.atan2(-r,s),l=Math.atan2(n,i),h=Math.abs(o+l);return h<1e-5||Math.abs(g9-h)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=l),e.scale.x=Math.sqrt(i*i+n*n),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(a.x*i+a.y*r),e.position.y=this.ty+(a.x*n+a.y*s),e}invert(){let e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=e*r-i*n;return this.a=r/a,this.b=-i/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-r*s)/a,this.ty=-(e*this.ty-i*s)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new _9;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return t6.identity()}static get shared(){return e6.identity()}},e6=new Tt,t6=new Tt}),Qn,Sf=G(()=>{Qn=class v9{constructor(e,i,n){this._x=i||0,this._y=n||0,this._observer=e}clone(e){return new v9(e??this._observer,this._x,this._y)}set(e=0,i=e){return(this._x!==e||this._y!==i)&&(this._x=e,this._y=i,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}});function Sn(t="default"){return dT[t]===void 0&&(dT[t]=-1),++dT[t]}var dT,Nr=G(()=>{dT={default:-1}}),$C,ei,T9,Fd,xt,Mi=G(()=>{$C=new Set,ei="8.0.0",T9="8.3.4",Fd={quiet:!1,noColor:!1},xt=(t,e,i=3)=>{if(Fd.quiet||$C.has(e))return;let n=new Error().stack,r=`${e}
Deprecated since v${t}`,s=typeof console.groupCollapsed=="function"&&!Fd.noColor;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",r):(n=n.split(`
`).splice(i).join(`
`),s?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r),console.warn(n))),$C.add(e)},Object.defineProperties(xt,{quiet:{get:()=>Fd.quiet,set:t=>{Fd.quiet=t},enumerable:!0,configurable:!1},noColor:{get:()=>Fd.noColor,set:t=>{Fd.noColor=t},enumerable:!0,configurable:!1}})});function Mt(...t){fT!==h3&&(fT++,fT===h3?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}var fT,h3,Bi=G(()=>{fT=0,h3=500}),Af,Cf=G(()=>{Af={_registeredResources:new Set,register(t){this._registeredResources.add(t)},unregister(t){this._registeredResources.delete(t)},release(){this._registeredResources.forEach(t=>t.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(t){return this._registeredResources.has(t)},reset(){this._registeredResources.clear()}}}),E9,S9=G(()=>{E9=class{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}}),i6,cr,bl=G(()=>{Cf(),S9(),i6=class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new E9(t)),this._poolsByClass.get(t)}stats(){let t={};return this._poolsByClass.forEach(e=>{let i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}},cr=new i6,Af.register(cr)}),A9,C9=G(()=>{Mi(),A9={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){xt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}}});function w9(t,e,i){let n=t.length,r;if(e>=n||i===0)return;i=e+i>n?n-e:i;let s=n-i;for(r=e;r<s;++r)t[r]=t[r+i];t.length=s}var CB=G(()=>{}),D9,R9=G(()=>{CB(),Mi(),D9={allowChildren:!0,removeChildren(t=0,e){let i=e??this.children.length,n=i-t,r=[];if(n>0&&n<=i){for(let a=i-1;a>=t;a--){let o=this.children[a];o&&(r.push(o),o.parent=null)}w9(this.children,t,i);let s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let a=0;a<r.length;++a){let o=r[a];o.parentRenderLayer?.detach(o),this.emit("childRemoved",o,this,a),r[a].emit("removed",this)}return r.length>0&&this._didViewChangeTick++,r}else if(n===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){let e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){let e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||xt(ei,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:i}=this;if(e<0||e>i.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${i.length}`);if(t.parent){let r=t.parent.children.indexOf(t);if(t.parent===this&&r===e)return t;r!==-1&&t.parent.children.splice(r,1)}e===i.length?i.push(t):i.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;let n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;let i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;let i=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);let n=this.worldTransform.clone();return n.invert(),i.prepend(n),t.setFromMatrix(i),t},replaceChild(t,e){t.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(t)),e.setFromMatrix(t.localTransform),e.updateLocalTransform(),this.removeChild(t)}}}),P9,M9=G(()=>{P9={collectRenderables(t,e,i){this.parentRenderLayer&&this.parentRenderLayer!==i||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,i):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,i))},collectRenderablesSimple(t,e,i){let n=this.children,r=n.length;for(let s=0;s<r;s++)n[s].collectRenderables(t,e,i)},collectRenderablesWithEffects(t,e,i){let{renderPipes:n}=e;for(let r=0;r<this.effects.length;r++){let s=this.effects[r];n[s.pipe].push(s,this,t)}this.collectRenderablesSimple(t,e,i);for(let r=this.effects.length-1;r>=0;r--){let s=this.effects[r];n[s.pipe].pop(s,this,t)}}}}),gx,eS=G(()=>{gx=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}}),n6,rE,B9=G(()=>{Ae(),bl(),n6=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){let i=this._tests[e];if(i.test(t))return cr.get(i.maskClass,t)}return t}returnMaskEffect(t){cr.return(t)}},rE=new n6,Lt.handleByList(ge.MaskEffect,rE._effectClasses)}),k9,O9=G(()=>{eS(),B9(),k9={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){let e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){let e=this._maskEffect;e?.mask!==t&&(e&&(this.removeEffect(e),rE.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=rE.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},set filters(t){!Array.isArray(t)&&t&&(t=[t]);let e=this._filterEffect||(this._filterEffect=new gx);t=t;let i=t?.length>0,n=e.filters?.length>0,r=i!==n;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),r&&(i?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){return this._filterEffect?.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new gx),this._filterEffect.filterArea=t},get filterArea(){return this._filterEffect?.filterArea}}}),F9,I9=G(()=>{Mi(),F9={label:null,get name(){return xt(ei,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){xt(ei,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){let i=this.children;for(let n=0;n<i.length;n++){let r=i[n];if(r.label===t||t instanceof RegExp&&t.test(r.label))return r}if(e)for(let n=0;n<i.length;n++){let r=i[n].getChildByLabel(t,!0);if(r)return r}return null},getChildrenByLabel(t,e=!1,i=[]){let n=this.children;for(let r=0;r<n.length;r++){let s=n[r];(s.label===t||t instanceof RegExp&&t.test(s.label))&&i.push(s)}if(e)for(let r=0;r<n.length;r++)n[r].getChildrenByLabel(t,!0,i);return i}}}),Wb,mn,wr=G(()=>{Ga(),Wb=[new Rn,new Rn,new Rn,new Rn],mn=class pT{constructor(e=0,i=0,n=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(i),this.width=Number(n),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new pT(0,0,0,0)}clone(){return new pT(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height}strokeContains(e,i,n,r=.5){let{width:s,height:a}=this;if(s<=0||a<=0)return!1;let o=this.x,l=this.y,h=n*(1-r),d=n-h,p=o-h,g=o+s+h,y=l-h,v=l+a+h,S=o+d,T=o+s-d,A=l+d,D=l+a-d;return e>=p&&e<=g&&i>=y&&i<=v&&!(e>S&&e<T&&i>A&&i<D)}intersects(e,i){if(!i){let te=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=te)return!1;let j=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>j}let n=this.left,r=this.right,s=this.top,a=this.bottom;if(r<=n||a<=s)return!1;let o=Wb[0].set(e.left,e.top),l=Wb[1].set(e.left,e.bottom),h=Wb[2].set(e.right,e.top),d=Wb[3].set(e.right,e.bottom);if(h.x<=o.x||l.y<=o.y)return!1;let p=Math.sign(i.a*i.d-i.b*i.c);if(p===0||(i.apply(o,o),i.apply(l,l),i.apply(h,h),i.apply(d,d),Math.max(o.x,l.x,h.x,d.x)<=n||Math.min(o.x,l.x,h.x,d.x)>=r||Math.max(o.y,l.y,h.y,d.y)<=s||Math.min(o.y,l.y,h.y,d.y)>=a))return!1;let g=p*(l.y-o.y),y=p*(o.x-l.x),v=g*n+y*s,S=g*r+y*s,T=g*n+y*a,A=g*r+y*a;if(Math.max(v,S,T,A)<=g*o.x+y*o.y||Math.min(v,S,T,A)>=g*d.x+y*d.y)return!1;let D=p*(o.y-h.y),R=p*(h.x-o.x),B=D*n+R*s,z=D*r+R*s,L=D*n+R*a,H=D*r+R*a;return!(Math.max(B,z,L,H)<=D*o.x+R*o.y||Math.min(B,z,L,H)>=D*d.x+R*d.y)}pad(e=0,i=e){return this.x-=e,this.y-=i,this.width+=e*2,this.height+=i*2,this}fit(e){let i=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.width=Math.max(n-i,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,i=.001){let n=Math.ceil((this.x+this.width-i)*e)/e,r=Math.ceil((this.y+this.height-i)*e)/e;return this.x=Math.floor((this.x+i)*e)/e,this.y=Math.floor((this.y+i)*e)/e,this.width=n-this.x,this.height=r-this.y,this}scale(e,i=e){return this.x*=e,this.y*=i,this.width*=e,this.height*=i,this}enlarge(e){let i=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=i,this.width=n-i,this.y=r,this.height=s-r,this}getBounds(e){return e||(e=new pT),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;let i=e.x,n=e.y,r=e.x+e.width,s=e.y+e.height;return i>=this.x&&i<this.x+this.width&&n>=this.y&&n<this.y+this.height&&r>=this.x&&r<this.x+this.width&&s>=this.y&&s<this.y+this.height}set(e,i,n,r){return this.x=e,this.y=i,this.width=n,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}}),KC,cs,ws=G(()=>{hi(),wr(),KC=new Tt,cs=class L9{constructor(e=1/0,i=1/0,n=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=KC,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new mn);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=KC,this}set(e,i,n,r){this.minX=e,this.minY=i,this.maxX=n,this.maxY=r}addFrame(e,i,n,r,s){s||(s=this.matrix);let a=s.a,o=s.b,l=s.c,h=s.d,d=s.tx,p=s.ty,g=this.minX,y=this.minY,v=this.maxX,S=this.maxY,T=a*e+l*i+d,A=o*e+h*i+p;T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),T=a*n+l*i+d,A=o*n+h*i+p,T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),T=a*e+l*r+d,A=o*e+h*r+p,T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),T=a*n+l*r+d,A=o*n+h*r+p,T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),this.minX=g,this.minY=y,this.maxX=v,this.maxY=S}addRect(e,i){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,i)}addBounds(e,i){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,i)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let i=this.minX,n=this.minY,r=this.maxX,s=this.maxY,{a,b:o,c:l,d:h,tx:d,ty:p}=e,g=a*i+l*n+d,y=o*i+h*n+p;this.minX=g,this.minY=y,this.maxX=g,this.maxY=y,g=a*r+l*n+d,y=o*r+h*n+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*i+l*s+d,y=o*i+h*s+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*r+l*s+d,y=o*r+h*s+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,i,n,r){return this.minX<e&&(this.minX=e),this.maxX>i&&(this.maxX=i),this.minY<n&&(this.minY=n),this.maxY>r&&(this.maxY=r),this}pad(e,i=e){return this.minX-=e,this.maxX+=e,this.minY-=i,this.maxY+=i,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new L9(this.minX,this.minY,this.maxX,this.maxY)}scale(e,i=e){return this.minX*=e,this.minY*=i,this.maxX*=e,this.maxY*=i,this}get x(){return this.minX}set x(e){let i=this.maxX-this.minX;this.minX=e,this.maxX=e+i}get y(){return this.minY}set y(e){let i=this.maxY-this.minY;this.minY=e,this.maxY=e+i}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,i,n,r){let s=this.minX,a=this.minY,o=this.maxX,l=this.maxY;r||(r=this.matrix);let h=r.a,d=r.b,p=r.c,g=r.d,y=r.tx,v=r.ty;for(let S=i;S<n;S+=2){let T=e[S],A=e[S+1],D=h*T+p*A+y,R=d*T+g*A+v;s=D<s?D:s,a=R<a?R:a,o=D>o?D:o,l=R>l?R:l}this.minX=s,this.minY=a,this.maxX=o,this.maxY=l}containsPoint(e,i){return this.minX<=e&&this.minY<=i&&this.maxX>=e&&this.maxY>=i}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}}),Ts,il,wf=G(()=>{hi(),bl(),ws(),Ts=cr.getPool(Tt),il=cr.getPool(cs)}),r6,N9,U9=G(()=>{hi(),ws(),wf(),r6=new Tt,N9={getFastGlobalBounds(t,e){e||(e=new cs),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);let i=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(i.worldTransform),e},_getGlobalBoundsRecursive(t,e,i){let n=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==i||this.localDisplayStatus!==7||!this.measurable)return;let r=!!this.effects.length;if((this.renderGroup||r)&&(n=il.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let a=this.bounds;n.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}let s=this.children;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(t,n,i)}if(r){let s=!1,a=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(s||(s=!0,n.applyMatrix(a.worldTransform)),this.effects[o].addBounds(n,!0));s&&n.applyMatrix(a.worldTransform.copyTo(r6).invert()),e.addBounds(n),il.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),il.return(n))}}});function wB(t,e,i){i.clear();let n,r;return t.parent?e?n=t.parent.worldTransform:(r=Ts.get().identity(),n=DB(t,r)):n=Tt.IDENTITY,G9(t,i,n,e),r&&Ts.return(r),i.isValid||i.set(0,0,0,0),i}function G9(t,e,i,n){if(!t.visible||!t.measurable)return;let r;n?r=t.worldTransform:(t.updateLocalTransform(),r=Ts.get(),r.appendFrom(t.localTransform,i));let s=e,a=!!t.effects.length;if(a&&(e=il.get().clear()),t.boundsArea)e.addRect(t.boundsArea,r);else{let o=t.bounds;o&&!o.isEmpty()&&(e.matrix=r,e.addBounds(o));for(let l=0;l<t.children.length;l++)G9(t.children[l],e,r,n)}if(a){for(let o=0;o<t.effects.length;o++)t.effects[o].addBounds?.(e);s.addBounds(e,Tt.IDENTITY),il.return(e)}n||Ts.return(r)}function DB(t,e){let i=t.parent;return i&&(DB(i,e),i.updateLocalTransform(),e.append(i.localTransform)),e}var fg=G(()=>{hi(),wf()});function H9(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;let i=t>>16&255,n=t>>8&255,r=t&255,s=e>>16&255,a=e>>8&255,o=e&255,l=i*s/255|0,h=n*a/255|0,d=r*o/255|0;return(l<<16)+(h<<8)+d}var RB=G(()=>{});function sE(t,e){return t===d3?e:e===d3?t:H9(t,e)}var d3,PB=G(()=>{RB(),d3=16777215});function mT(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}var z9,MB=G(()=>{hi(),fg(),wf(),PB(),z9={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,i=this.parent;for(;i;)e*=i.alpha,i=i.parent;return e},getGlobalTransform(t=new Tt,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();let i=DB(this,Ts.get().identity());return t.appendFrom(this.localTransform,i),Ts.return(i),t},getGlobalTint(t){if(t)return this.renderGroup?mT(this.renderGroup.worldColor):this.parentRenderGroup?mT(sE(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,i=this.parent;for(;i;)e=sE(e,i.localColor),i=i.parent;return mT(e)}}});function BB(t,e,i){return e.clear(),i||(i=Tt.IDENTITY),V9(t,e,i,t,!0),e.isValid||e.set(0,0,0,0),e}function V9(t,e,i,n,r){let s;if(r)s=Ts.get(),s=i.copyTo(s);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();let l=t.localTransform;s=Ts.get(),s.appendFrom(l,i)}let a=e,o=!!t.effects.length;if(o&&(e=il.get().clear()),t.boundsArea)e.addRect(t.boundsArea,s);else{t.renderPipeId&&(e.matrix=s,e.addBounds(t.bounds));let l=t.children;for(let h=0;h<l.length;h++)V9(l[h],e,s,n,!1)}if(o){for(let l=0;l<t.effects.length;l++)t.effects[l].addLocalBounds?.(e,n);a.addBounds(e,Tt.IDENTITY),il.return(e)}Ts.return(s)}var tS=G(()=>{hi(),wf()});function j9(t,e){let i=t.children;for(let n=0;n<i.length;n++){let r=i[n],s=r.uid,a=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,o=e.index;(e.data[o]!==s||e.data[o+1]!==a)&&(e.data[e.index]=s,e.data[e.index+1]=a,e.didChange=!0),e.index=o+2,r.children.length&&j9(r,e)}return e.didChange}var X9=G(()=>{}),s6,Y9,q9=G(()=>{hi(),ws(),fg(),tS(),X9(),s6=new Tt,Y9={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){let i=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*i:this.scale.x=i},_setHeight(t,e){let i=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*i:this.scale.y=i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new cs});let t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),j9(this,t),t.didChange&&BB(this,t.localBounds,s6),t.localBounds},getBounds(t,e){return wB(this,t,e||new cs)}}}),W9,$9=G(()=>{W9={_onRender:null,set onRender(t){let e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}}});function Uae(t,e){return t._zIndex-e._zIndex}var K9,Q9=G(()=>{K9={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Uae))}}}),Z9,J9=G(()=>{Ga(),wf(),Z9={getGlobalPosition(t=new Rn,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,i=!1){let n=this.getGlobalTransform(Ts.get(),i);return e=n.apply(t,e),Ts.return(n),e},toLocal(t,e,i,n){e&&(t=e.toGlobal(t,i,n));let r=this.getGlobalTransform(Ts.get(),n);return i=r.applyInverse(t,i),Ts.return(r),i}}}),kB,OB=G(()=>{Nr(),kB=class{constructor(){this.uid=Sn("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}});function Km(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function a6(t){return!(t&t-1)&&!!t}var Jx=G(()=>{});function Qm(t){let e={};for(let i in t)t[i]!==void 0&&(e[i]=t[i]);return e}var Df=G(()=>{});function Gae(t){let e=f3[t];return e===void 0&&(f3[t]=Sn("resource")),e}var f3,QC,lu,hc=G(()=>{Cs(),Nr(),Mi(),f3=Object.create(null),QC=class e7 extends ma{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...e7.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){xt(ei,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Gae(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}},QC.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"},lu=QC}),ZC,Ar,Zr=G(()=>{Cs(),Jx(),Df(),Nr(),hc(),ZC=class t7 extends ma{constructor(e={}){super(),this.options=e,this.uid=Sn("textureSource"),this._resourceType="textureSource",this._resourceId=Sn("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...t7.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new lu(Qm(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Sn("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,i,n){n||(n=this._resolution),e||(e=this.width),i||(i=this.height);let r=Math.round(e*n),s=Math.round(i*n);return this.width=r/n,this.height=s/n,this._resolution=n,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Sn("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=a6(this.pixelWidth)&&a6(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}},ZC.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1},Ar=ZC});function Hae(){for(let t=0;t<16;t++){let e=[];gT.push(e);for(let i=0;i<16;i++){let n=My(ph[t]*ph[i]+gh[t]*mh[i]),r=My(mh[t]*ph[i]+bh[t]*mh[i]),s=My(ph[t]*gh[i]+gh[t]*bh[i]),a=My(mh[t]*gh[i]+bh[t]*bh[i]);for(let o=0;o<16;o++)if(ph[o]===n&&mh[o]===r&&gh[o]===s&&bh[o]===a){e.push(o);break}}}for(let t=0;t<16;t++){let e=new Tt;e.set(ph[t],mh[t],gh[t],bh[t],0,0),p3.push(e)}}var ph,mh,gh,bh,gT,p3,My,en,iS=G(()=>{hi(),ph=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mh=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],gh=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],bh=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],gT=[],p3=[],My=Math.sign,Hae(),en={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>ph[t],uY:t=>mh[t],vX:t=>gh[t],vY:t=>bh[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>gT[t][e],sub:(t,e)=>gT[t][en.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?en.S:en.N:Math.abs(e)*2<=Math.abs(t)?t>0?en.E:en.W:e>0?t>0?en.SE:en.SW:t>0?en.NE:en.NW,matrixAppendRotationInv:(t,e,i=0,n=0)=>{let r=p3[en.inv(e)];r.tx=i,r.ty=n,t.append(r)},transformRectCoords:(t,e,i,n)=>{let{x:r,y:s,width:a,height:o}=t,{x:l,y:h,width:d,height:p}=e;return i===en.E?(n.set(r+l,s+h,a,o),n):i===en.S?n.set(d-s-o+l,r+h,o,a):i===en.W?n.set(d-r-a+l,p-s-o+h,a,o):i===en.N?n.set(s+l,p-r-a+h,o,a):n.set(r+l,s+h,a,o)}}}),m3,i7=G(()=>{m3=()=>{}}),aE,FB=G(()=>{Ae(),Zr(),aE=class extends Ar{constructor(t){let e=t.resource||new Float32Array(t.width*t.height*4),i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":i="bgra8unorm"),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}},aE.extension=ge.TextureSource}),JC,IB,LB=G(()=>{hi(),JC=new Tt,IB=class{constructor(t,e){this.mapCoord=new Tt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);let i=this.mapCoord;for(let n=0;n<t.length;n+=2){let r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e}update(){let t=this._texture;this._updateID++;let e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);let i=t.orig,n=t.trim;n&&(JC.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(JC));let r=t.source,s=this.uClampFrame,a=this.clampMargin/r._resolution,o=this.clampOffset/r._resolution;return s[0]=(t.frame.x+a+o)/r.width,s[1]=(t.frame.y+a+o)/r.height,s[2]=(t.frame.x+t.frame.width-a+o)/r.width,s[3]=(t.frame.y+t.frame.height-a+o)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=t.frame.width===r.width&&t.frame.height===r.height&&t.rotate===0,!0}}}),st,gi=G(()=>{Cs(),iS(),wr(),Nr(),Mi(),i7(),FB(),Zr(),LB(),st=class extends ma{constructor({source:t,label:e,frame:i,orig:n,trim:r,defaultAnchor:s,defaultBorders:a,rotate:o,dynamic:l}={}){if(super(),this.uid=Sn("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new mn,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new Ar,this.noFrame=!i,i)this.frame.copyFrom(i);else{let{width:h,height:d}=this._source;this.frame.width=h,this.frame.height=d}this.orig=n||this.frame,this.trim=r,this.rotate=o??0,this.defaultAnchor=s,this.defaultBorders=a,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new IB(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:t,frame:e}=this,{width:i,height:n}=this._source,r=e.x/i,s=e.y/n,a=e.width/i,o=e.height/n,l=this.rotate;if(l){let h=a/2,d=o/2,p=r+h,g=s+d;l=en.add(l,en.NW),t.x0=p+h*en.uX(l),t.y0=g+d*en.uY(l),l=en.add(l,2),t.x1=p+h*en.uX(l),t.y1=g+d*en.uY(l),l=en.add(l,2),t.x2=p+h*en.uX(l),t.y2=g+d*en.uY(l),l=en.add(l,2),t.x3=p+h*en.uX(l),t.y3=g+d*en.uY(l)}else t.x0=r,t.y0=s,t.x1=r+a,t.y1=s,t.x2=r+a,t.y2=s+o,t.x3=r,t.y3=s+o}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return xt(ei,"Texture.baseTexture is now Texture.source"),this._source}},st.EMPTY=new st({label:"EMPTY",source:new Ar({label:"EMPTY"})}),st.EMPTY.destroy=m3,st.WHITE=new st({source:new aE({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),st.WHITE.destroy=m3}),o6,u6,er,yl=G(()=>{Jx(),Cf(),Zr(),gi(),hc(),o6=0,u6=class{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new lu(this.textureOptions)}createTexture(t,e,i){let n=new Ar({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new st({source:n,label:`texturePool_${o6++}`})}getOptimalTexture(t,e,i=1,n){let r=Math.ceil(t*i-1e-6),s=Math.ceil(e*i-1e-6);r=Km(r),s=Km(s);let a=(r<<17)+(s<<1)+(n?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let o=this._texturePool[a].pop();return o||(o=this.createTexture(r,s,n)),o.source._resolution=i,o.source.width=r/i,o.source.height=s/i,o.source.pixelWidth=r,o.source.pixelHeight=s,o.frame.x=0,o.frame.y=0,o.frame.width=t,o.frame.height=e,o.updateUvs(),this._poolKeyHash[o.uid]=a,o}getSameSizeTexture(t,e=!1){let i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t,e=!1){let i=this._poolKeyHash[t.uid];e&&(t.source.style=this.textureStyle),this._texturePool[i].push(t)}clear(t){if(t=t!==!1,t)for(let e in this._texturePool){let i=this._texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this._texturePool={}}},er=new u6,Af.register(er)}),oE,NB=G(()=>{hi(),OB(),yl(),oE=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Tt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new kB,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;let e=t.children;for(let i=0;i<e.length;i++){let n=e[i];n._updateFlags=15,this.addChild(n)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(er.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;let t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(let t in this.childrenToUpdate){let e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){let e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);let e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}let e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){let e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;let i=t.children;for(let n=0;n<i.length;n++)this._getChildren(i[n],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Tt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Tt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;let t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Tt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}});function zae(t,e,i={}){for(let n in e)!i[n]&&e[n]!==void 0&&(t[n]=e[n])}var UB=G(()=>{}),Q2,$b,Z2,Kb,Wy,uE,Sm,Qi,Ds=G(()=>{Cs(),Lr(),m9(),Ae(),hi(),AB(),Sf(),Nr(),Mi(),Bi(),bl(),C9(),R9(),M9(),O9(),I9(),U9(),MB(),q9(),$9(),Q9(),J9(),NB(),UB(),Q2=new Qn(null),$b=new Qn(null),Z2=new Qn(null,1,1),Kb=new Qn(null),Wy=1,uE=2,Sm=4,Qi=class n7 extends ma{constructor(e={}){super(),this.uid=Sn("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Tt,this.relativeGroupTransform=new Tt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Qn(this,0,0),this._scale=Z2,this._pivot=$b,this._origin=Kb,this._skew=Q2,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],zae(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(i=>this.addChild(i)),e.parent?.addChild(this)}static mixin(e){xt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Lt.mixin(n7,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||xt(ei,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}let i=e[0],n=this.renderGroup||this.parentRenderGroup;return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),n&&(n.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i._updateFlags=15,n&&n.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),this._didViewChangeTick++,i._zIndex!==0&&i.depthOfChildModified(),i)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}let i=e[0],n=this.children.indexOf(i);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(i):this.parentRenderGroup&&this.parentRenderGroup.removeChild(i),i.parentRenderLayer&&i.parentRenderLayer.detach(i),i.parent=null,this.emit("childRemoved",i,this,n),i.emit("removed",this)),i}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=cr.get(oE,this),this.groupTransform=Tt.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),cr.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Tt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*b9}set angle(e){this.rotation=e*y9}get pivot(){return this._pivot===$b&&(this._pivot=new Qn(this,0,0)),this._pivot}set pivot(e){this._pivot===$b&&(this._pivot=new Qn(this,0,0),this._origin!==Kb&&Mt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Q2&&(this._skew=new Qn(this,0,0)),this._skew}set skew(e){this._skew===Q2&&(this._skew=new Qn(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Z2&&(this._scale=new Qn(this,1,1)),this._scale}set scale(e){this._scale===Z2&&(this._scale=new Qn(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Kb&&(this._origin=new Qn(this,0,0)),this._origin}set origin(e){this._origin===Kb&&(this._origin=new Qn(this,0,0),this._pivot!==$b&&Mt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let i=this.getLocalBounds().width;this._setWidth(e,i)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let i=this.getLocalBounds().height;this._setHeight(e,i)}getSize(e){e||(e={});let i=this.getLocalBounds();return e.width=Math.abs(this.scale.x*i.width),e.height=Math.abs(this.scale.y*i.height),e}setSize(e,i){let n=this.getLocalBounds();typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,n.width),i!==void 0&&this._setHeight(i,n.height)}_updateSkew(){let e=this._rotation,i=this._skew;this._cx=Math.cos(e+i._y),this._sx=Math.sin(e+i._y),this._cy=-Math.sin(e-i._x),this._sy=Math.cos(e-i._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let i=this.localTransform,n=this._scale,r=this._pivot,s=this._origin,a=this._position,o=n._x,l=n._y,h=r._x,d=r._y,p=-s._x,g=-s._y;i.a=this._cx*o,i.b=this._sx*o,i.c=this._cy*l,i.d=this._sy*l,i.tx=a._x-(h*i.a+d*i.c)+(p*i.a+g*i.c)-p,i.ty=a._y-(h*i.b+d*i.d)+(p*i.b+g*i.d)-g}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Wy,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let i=An.shared.setValue(e??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=Wy,this._onUpdate())}get tint(){return mT(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=uE,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){let i=e?2:0;(this.localDisplayStatus&2)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Sm,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){let i=e?0:4;(this.localDisplayStatus&4)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Sm,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){let i=e?1:0;(this.localDisplayStatus&1)!==i&&(this._updateFlags|=Sm,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&i)for(let n=0;n<i.length;++n)i[n].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}},Lt.mixin(Qi,D9,N9,Z9,W9,Y9,k9,F9,K9,p9,A9,z9,P9)}),pf,Rf=G(()=>{pf=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(pf||{})}),bT,r7=G(()=>{bT=class{constructor(t,e=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=n}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));let e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let e=this.next;return this.next=t?null:e,this.previous=null,e}}}),ew,ls,Fh=G(()=>{Rf(),r7(),ew=class Ra{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bT(null,null,1/0),this.deltaMS=1/Ra.targetFPMS,this.elapsedMS=1/Ra.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,i,n=pf.NORMAL){return this._addListener(new bT(e,i,n))}addOnce(e,i,n=pf.NORMAL){return this._addListener(new bT(e,i,n,!0))}_addListener(e){let i=this._head.next,n=this._head;if(!i)e.connect(n);else{for(;i;){if(e.priority>i.priority){e.connect(n);break}n=i,i=i.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,i){let n=this._head.next;for(;n;)n.match(e,i)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,i=this._head;for(;i=i.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if(i=this.elapsedMS=e-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){let s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*Ra.targetFPMS;let n=this._head,r=n.next;for(;r;)r=r.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let i=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,i)/1e3,Ra.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let i=Math.max(this.minFPS,e);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!Ra._shared){let e=Ra._shared=new Ra;e.autoStart=!0,e._protected=!0}return Ra._shared}static get system(){if(!Ra._system){let e=Ra._system=new Ra;e.autoStart=!0,e._protected=!0}return Ra._system}},ew.targetFPMS=.06,ls=ew}),GB,HB=G(()=>{Rf(),Fh(),GB=class{constructor(t){this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;let e=this._canvas.getBoundingClientRect(),i=this._canvas.width,n=this._canvas.height,r=e.width/i*this._renderer.resolution,s=e.height/n*this._renderer.resolution,a=e.left,o=e.top,l=`translate(${a}px, ${o}px) scale(${r}, ${s})`;l!==this._lastTransform&&(this._domElement.style.transform=l,this._lastTransform=l)},this._domElement=t.domElement,this._renderer=t.renderer,!(globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas)&&(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){"ResizeObserver"in globalThis?(this._observer&&(this._observer.disconnect(),this._observer=null),this._observer=new ResizeObserver(t=>{for(let e of t){if(e.target!==this._canvas)continue;let i=this.canvas.width,n=this.canvas.height,r=e.contentRect.width/i*this._renderer.resolution,s=e.contentRect.height/n*this._renderer.resolution;(this._lastScaleX!==r||this._lastScaleY!==s)&&(this.updateTranslation(),this._lastScaleX=r,this._lastScaleY=s)}}),this._observer.observe(this._canvas)):this._tickerAttached||ls.shared.add(this.updateTranslation,this,pf.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&ls.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}}),nS,rS=G(()=>{Ga(),nS=class s7{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=s7.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Rn,this.page=new Rn,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,i,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,i,n,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}});function Vae(t){return function(e){return e.test(t)}}function l6(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var i=e.userAgent,n=i.split("[FBAN");typeof n[1]<"u"&&(i=n[0]),n=i.split("Twitter"),typeof n[1]<"u"&&(i=n[0]);var r=Vae(i),s={apple:{phone:r(yT)&&!r(Uu),ipod:r(g3),tablet:!r(yT)&&(r(b3)||C3(e))&&!r(Uu),universal:r(y3),device:(r(yT)||r(g3)||r(b3)||r(y3)||C3(e))&&!r(Uu)},amazon:{phone:r(zd),tablet:!r(zd)&&r(By),device:r(zd)||r(By)},android:{phone:!r(Uu)&&r(zd)||!r(Uu)&&r(xT),tablet:!r(Uu)&&!r(zd)&&!r(xT)&&(r(By)||r(x3)),device:!r(Uu)&&(r(zd)||r(By)||r(xT)||r(x3))||r(/\bokhttp\b/i)},windows:{phone:r(Uu),tablet:r(_3),device:r(Uu)||r(_3)},other:{blackberry:r(v3),blackberry10:r(T3),opera:r(E3),firefox:r(A3),chrome:r(S3),device:r(v3)||r(T3)||r(E3)||r(A3)||r(S3)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var yT,g3,b3,y3,xT,x3,zd,By,Uu,_3,v3,T3,E3,S3,A3,C3,c6=G(()=>{yT=/iPhone/i,g3=/iPod/i,b3=/iPad/i,y3=/\biOS-universal(?:.+)Mac\b/i,xT=/\bAndroid(?:.+)Mobile\b/i,x3=/Android/i,zd=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,By=/Silk/i,Uu=/Windows Phone/i,_3=/\bWindows(?:.+)ARM\b/i,v3=/BlackBerry/i,T3=/BB10/i,E3=/Opera Mini/i,S3=/\b(CriOS|Chrome)(?:.+)Mobile/i,A3=/Mobile(?:.+)Firefox\b/i,C3=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"}}),jae=G(()=>{c6(),c6()}),h6,a7,o7=G(()=>{jae(),h6=l6.default??l6,a7=h6(globalThis.navigator)}),d6,tw,f6,p6,iw,nw,m6,g6,b6,J2,u7,l7=G(()=>{HB(),rS(),Ae(),o7(),CB(),d6=9,tw=100,f6=0,p6=0,iw=2,nw=1,m6=-1e3,g6=-1e3,b6=2,J2=class c7{constructor(e,i=a7){this._mobileInfo=i,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pools={},this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._isRunningTests=!1,this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnMouseMove=this._onMouseMove.bind(this),this._hookDiv=null,(i.tablet||i.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}get div(){return this._div}_createTouchHook(){let e=document.createElement("button");e.style.width=`${nw}px`,e.style.height=`${nw}px`,e.style.position="absolute",e.style.top=`${m6}px`,e.style.left=`${g6}px`,e.style.zIndex=b6.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top=`${f6}px`,this._div.style.left=`${p6}px`,this._div.style.pointerEvents="none",this._div.style.zIndex=iw.toString(),this._canvasObserver=new GB({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._deactivateOnMouseMove&&globalThis.document.addEventListener("mousemove",this._boundOnMouseMove,!0);let e=this._renderer.view.canvas;if(e.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{let i=new MutationObserver(()=>{e.parentNode&&(i.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())});i.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._renderer.runners.postrender.remove(this);for(let e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;for(let e in this._pools)this._pools[e].forEach(i=>{i.parentNode&&i.parentNode.removeChild(i)}),delete this._pools[e];this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pools={},this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);let i=e.children;if(i)for(let n=0;n<i.length;n++)this._updateAccessibleObjects(i[n])}init(e){let i={accessibilityOptions:{...c7.defaultOptions,...e?.accessibilityOptions||{}}};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault&&this._activate(),this._renderer.runners.postrender.remove(this)}postrender(){let e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,(!this._renderer.renderingToScreen||!this._renderer.view.canvas)&&!this._isRunningTests))return;let i=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let n of this._children)n._renderId===this._renderId&&i.add(this._children.indexOf(n))}for(let n=this._children.length-1;n>=0;n--){let r=this._children[n];i.has(n)||(r._accessibleDiv&&r._accessibleDiv.parentNode&&(r._accessibleDiv.parentNode.removeChild(r._accessibleDiv),this._getPool(r.accessibleType).push(r._accessibleDiv),r._accessibleDiv=null),r._accessibleActive=!1,w9(this._children,n,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let n=0;n<this._children.length;n++){let r=this._children[n];if(!r._accessibleActive||!r._accessibleDiv)continue;let s=r._accessibleDiv,a=r.hitArea||r.getBounds().rectangle;if(r.hitArea){let o=r.worldTransform;s.style.left=`${o.tx+a.x*o.a}px`,s.style.top=`${o.ty+a.y*o.d}px`,s.style.width=`${a.width*o.a}px`,s.style.height=`${a.height*o.d}px`}else this._capHitArea(a),s.style.left=`${a.x}px`,s.style.top=`${a.y}px`,s.style.width=`${a.width}px`,s.style.height=`${a.height}px`}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:i,height:n}=this._renderer;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>n&&(e.height=n-e.y)}_addChild(e){let i=this._getPool(e.accessibleType).pop();i?(i.innerHTML="",i.removeAttribute("title"),i.removeAttribute("aria-label"),i.tabIndex=0):(e.accessibleType==="button"?i=document.createElement("button"):(i=document.createElement(e.accessibleType),i.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(i.innerText=e.accessibleText)),i.style.width=`${tw}px`,i.style.height=`${tw}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=iw.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=e.accessiblePointerEvents,i.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?i.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(i.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&i.setAttribute("aria-label",e.accessibleHint),e.interactive?i.tabIndex=e.tabIndex:i.tabIndex=0,this.debug&&this._updateDebugHTML(i),e._accessibleActive=!0,e._accessibleDiv=i,i.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv)}_dispatchEvent(e,i){let{container:n}=e.target,r=this._renderer.events.rootBoundary,s=Object.assign(new nS(r),{target:n});r.rootTarget=this._renderer.lastObjectRendered,i.forEach(a=>r.dispatchEvent(s,a))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==d6||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pools=null,this._children=null,this._renderer=null,this._hookDiv=null,globalThis.removeEventListener("keydown",this._boundOnKeyDown),this._boundOnKeyDown=null,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._boundOnMouseMove=null}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}_getPool(e){return this._pools[e]||(this._pools[e]=[]),this._pools[e]}},J2.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"accessibility"},J2.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0},u7=J2}),h7,d7=G(()=>{h7={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1}}),Xae=G(()=>{Ae(),Ds(),l7(),d7(),Lt.add(u7),Lt.mixin(Qi,h7)}),w3,f7=G(()=>{Ae(),w3=class{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:n,clientHeight:r}=this._resizeTo;e=n,i=r}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}},w3.extension=ge.Application}),D3,p7=G(()=>{Ae(),Rf(),Fh(),D3=class{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,pf.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ls.shared:new ls,t.autoStart&&this.start()}static destroy(){if(this._ticker){let t=this._ticker;this.ticker=null,t.destroy()}}},D3.extension=ge.Application}),m7=G(()=>{Ae(),f7(),p7(),Lt.add(w3),Lt.add(D3)}),y6,Qu,zB=G(()=>{Rf(),Fh(),y6=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this._tickerAdded||!this.domElement||(ls.system.add(this._tickerUpdate,this,pf.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(ls.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let t=this.events._rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY,pointerType:t.pointerType,pointerId:t.pointerId}):new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY}))}_tickerUpdate(t){this._deltaTime+=t.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}destroy(){this.removeTickerListener(),this.events=null,this.domElement=null,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}},Qu=new y6}),bx,sS=G(()=>{Ga(),rS(),bx=class extends nS{constructor(){super(...arguments),this.client=new Rn,this.movement=new Rn,this.offset=new Rn,this.global=new Rn,this.screen=new Rn}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,n,r,s,a,o,l,h,d,p,g,y,v){throw new Error("Method not implemented.")}}}),so,VB=G(()=>{sS(),so=class extends bx{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}}),tf,jB=G(()=>{sS(),tf=class extends bx{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}},tf.DOM_DELTA_PIXEL=0,tf.DOM_DELTA_LINE=1,tf.DOM_DELTA_PAGE=2}),x6,_6,em,g7,b7=G(()=>{Cs(),Ga(),Bi(),zB(),sS(),VB(),jB(),x6=2048,_6=new Rn,em=new Rn,g7=class{constructor(t){this.dispatch=new ma,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,n)=>i.priority-n.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;let e=this.mappingTable[t.type];if(e)for(let i=0,n=e.length;i<n;i++)e[i].fn(t);else Mt(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Qu.pauseUpdate=!0;let i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[i](this.rootTarget,this.rootTarget.eventMode,_6.set(t,e),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,e){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,r=i.length-1;n<r;n++)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;let n=Array.isArray(e)?e:[e];for(let r=i.length-1;r>=0;r--)n.forEach(s=>{t.currentTarget=i[r],this.notifyTarget(t,s)})}propagationPath(t){let e=[t];for(let i=0;i<x6&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,n,r,s=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Qu.pauseUpdate=!1),t.interactiveChildren&&t.children){let h=t.children;for(let d=h.length-1;d>=0;d--){let p=h[d],g=this.hitTestMoveRecursive(p,this._isInteractive(e)?e:p.eventMode,i,n,r,s||r(t,i));if(g){if(g.length>0&&!g[g.length-1].parent)continue;let y=t.isInteractive();(g.length>0||y)&&(y&&this._allInteractiveElements.push(t),g.push(t)),this._hitElements.length===0&&(this._hitElements=g),a=!0}}}let o=this._isInteractive(e),l=t.isInteractive();return l&&l&&this._allInteractiveElements.push(t),s||this._hitElements.length>0?null:a?this._hitElements:o&&!r(t,i)&&n(t,i)?l?[t]:[]:null}hitTestRecursive(t,e,i,n,r){if(this._interactivePrune(t)||r(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Qu.pauseUpdate=!1),t.interactiveChildren&&t.children){let o=t.children,l=i;for(let h=o.length-1;h>=0;h--){let d=o[h],p=this.hitTestRecursive(d,this._isInteractive(e)?e:d.eventMode,l,n,r);if(p){if(p.length>0&&!p[p.length-1].parent)continue;let g=t.isInteractive();return(p.length>0||g)&&p.push(t),p}}}let s=this._isInteractive(e),a=t.isInteractive();return s&&n(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!t||!t.visible||!t.renderable||!t.measurable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,em),!t.hitArea.contains(em.x,em.y)))return!0;if(t.effects&&t.effects.length)for(let i=0;i<t.effects.length;i++){let n=t.effects[i];if(n.containsPoint&&!n.containsPoint(e,this.hitTestFn))return!0}return!1}hitTestFn(t,e){return t.hitArea?!0:t?.containsPoint?(t.worldTransform.applyInverse(e,em),t.containsPoint(em)):!1}notifyTarget(t,e){if(!t.currentTarget.isInteractive())return;e??(e=t.type);let i=`on${e}`;t.currentTarget[i]?.(t);let n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this._notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this._notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof so)){Mt("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){let n=e.button===2;this.dispatchEvent(e,n?"rightdown":"mousedown")}let i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof so)){Mt("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;let i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&r!==e.target){let o=t.type==="mousemove"?"mouseout":"pointerout",l=this.createPointerEvent(t,o,r);if(this.dispatchEvent(l,"pointerout"),i&&this.dispatchEvent(l,"mouseout"),!e.composedPath().includes(r)){let h=this.createPointerEvent(t,"pointerleave",r);for(h.eventPhase=h.AT_TARGET;h.target&&!e.composedPath().includes(h.target);)h.currentTarget=h.target,this.notifyTarget(h),i&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(l)}if(r!==e.target){let o=t.type==="mousemove"?"mouseover":"pointerover",l=this.clonePointerEvent(e,o);this.dispatchEvent(l,"pointerover"),i&&this.dispatchEvent(l,"mouseover");let h=r?.parent;for(;h&&h!==this.rootTarget.parent&&h!==e.target;)h=h.parent;if(!h||h===this.rootTarget.parent){let d=this.clonePointerEvent(e,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==r&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),i&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(l)}let s=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?s.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&s.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?s.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&s.push("globaltouchmove")),i&&(this.moveOnAll?s.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&s.push("globalmousemove"),this.cursor=e.target?.cursor),s.length>0&&this.all(e,s),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof so)){Mt("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=i.target?.cursor);let r=this.clonePointerEvent(i,"pointerenter");for(r.eventPhase=r.AT_TARGET;r.target&&r.target!==this.rootTarget.parent;)r.currentTarget=r.target,this.notifyTarget(r),n&&this.notifyTarget(r,"mouseenter"),r.target=r.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(r)}mapPointerOut(t){if(!(t instanceof so)){Mt("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId);if(e.overTargets){let i=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(e.overTargets),r=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(r),i&&this.dispatchEvent(r,"mouseout");let s=this.createPointerEvent(t,"pointerleave",n);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;e.overTargets=null,this.freeEvent(r),this.freeEvent(s)}this.cursor=null}mapPointerUp(t){if(!(t instanceof so)){Mt("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}let n=this.trackingData(t.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[t.button]),s=r;if(r&&!i.composedPath().includes(r)){let a=r;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let o=i.button===2;this.notifyTarget(i,o?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[t.button],s=a}if(s){let a=this.clonePointerEvent(i,"click");a.target=s,a.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});let o=n.clicksByButton[t.button];if(o.target===a.target&&e-o.timeStamp<200?++o.clickCount:o.clickCount=1,o.target=a.target,o.timeStamp=e,a.detail=o.clickCount,a.pointerType==="mouse"){let l=a.button===2;this.dispatchEvent(a,l?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof so)){Mt("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(i){let r=i;for(;r;)n.currentTarget=r,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),r=r.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof tf)){Mt("EventBoundary cannot map a non-wheel event as a wheel event");return}let e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){let n=this.allocateEvent(so);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof e=="string"&&(n.type=e),n}createWheelEvent(t){let e=this.allocateEvent(tf);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){let i=this.allocateEvent(so);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof so&&e instanceof so&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof bx&&e instanceof bx&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);let e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.defaultPrevented=!1,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}_notifyListeners(t,e){let i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let n=0,r=i.length;n<r&&!t.propagationImmediatelyStopped;n++)i[n].once&&t.currentTarget.removeListener(e,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,t)}}}),v6,T6,e1,XB,YB=G(()=>{Ae(),b7(),zB(),VB(),jB(),v6=1,T6={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},e1=class R3{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new g7(null),Qu.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new so(null),this._rootWheelEvent=new tf(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...R3.defaultEventFeatures},{set:(i,n,r)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),i[n]=r,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){let{canvas:i,resolution:n}=this.renderer;this.setTargetElement(i),this.resolution=n,R3._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){Qu.destroy(),this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let i=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(i=!1),this._currentCursor===e)return;this._currentCursor=e;let n=this.cursorStyles[e];if(n)switch(typeof n){case"string":i&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":i&&Object.assign(this.domElement.style,n);break}else i&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=this._normalizeToPointerData(e);this.autoPreventDefault&&i[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,r=i.length;n<r;n++){let s=i[n],a=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Qu.pointerMoved();let i=this._normalizeToPointerData(e);for(let n=0,r=i.length;n<r;n++){let s=this._bootstrapEvent(this._rootPointerEvent,i[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=e.target;e.composedPath&&e.composedPath().length>0&&(i=e.composedPath()[0]);let n=i!==this.domElement?"outside":"",r=this._normalizeToPointerData(e);for(let s=0,a=r.length;s<a;s++){let o=this._bootstrapEvent(this._rootPointerEvent,r[s]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=this._normalizeToPointerData(e);for(let n=0,r=i.length;n<r;n++){let s=this._bootstrapEvent(this._rootPointerEvent,i[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let i=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(i)}setTargetElement(e){this._removeEvents(),this.domElement=e,Qu.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Qu.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Qu.removeTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,i,n){let r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(i-r.left)*(this.domElement.width/r.width)*s,e.y=(n-r.top)*(this.domElement.height/r.height)*s}_normalizeToPointerData(e){let i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,r=e.changedTouches.length;n<r;n++){let s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,i.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=v6),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,i.push(n)}else i.push(e);return i}normalizeWheelEvent(e){let i=this._rootWheelEvent;return this._transferMouseData(i,e),i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ,i.deltaMode=e.deltaMode,this.mapPositionToPoint(i.screen,e.clientX,e.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=e,i.type=e.type,i}_bootstrapEvent(e,i){return e.originalEvent=null,e.nativeEvent=i,e.pointerId=i.pointerId,e.width=i.width,e.height=i.height,e.isPrimary=i.isPrimary,e.pointerType=i.pointerType,e.pressure=i.pressure,e.tangentialPressure=i.tangentialPressure,e.tiltX=i.tiltX,e.tiltY=i.tiltY,e.twist=i.twist,this._transferMouseData(e,i),this.mapPositionToPoint(e.screen,i.clientX,i.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=T6[e.type]||e.type),e}_transferMouseData(e,i){e.isTrusted=i.isTrusted,e.srcElement=i.srcElement,e.timeStamp=performance.now(),e.type=i.type,e.altKey=i.altKey,e.button=i.button,e.buttons=i.buttons,e.client.x=i.clientX,e.client.y=i.clientY,e.ctrlKey=i.ctrlKey,e.metaKey=i.metaKey,e.movement.x=i.movementX,e.movement.y=i.movementY,e.page.x=i.pageX,e.page.y=i.pageY,e.relatedTarget=null,e.shiftKey=i.shiftKey}},e1.extension={name:"events",type:[ge.WebGLSystem,ge.CanvasSystem,ge.WebGPUSystem],priority:-1},e1.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},XB=e1}),y7,x7=G(()=>{YB(),rS(),y7={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(t){this.eventMode=t?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??XB.defaultEventMode},set eventMode(t){this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,i){let n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,r=typeof i=="object"?i.signal:void 0,s=typeof i=="object"?i.once===!0:!1,a=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;let o=typeof e=="function"?e:e.handleEvent,l=this;r&&r.addEventListener("abort",()=>{l.off(t,o,a)}),s?l.once(t,o,a):l.on(t,o,a)},removeEventListener(t,e,i){let n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,r=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,r)},dispatchEvent(t){if(!(t instanceof nS))throw new Error("Container cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}}}),Yae=G(()=>{Ae(),Ds(),YB(),x7(),Lt.add(XB),Lt.mixin(Qi,y7)}),P3,_7=G(()=>{Ae(),HB(),P3=class{constructor(t){this._attachedDomElements=[],this._renderer=t,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new GB({domElement:this._domElement,renderer:this._renderer})}addRenderable(t,e){this._attachedDomElements.includes(t)||this._attachedDomElements.push(t)}updateRenderable(t){}validateRenderable(t){return!0}postrender(){let t=this._attachedDomElements;if(t.length===0){this._domElement.remove();return}this._canvasObserver.ensureAttached();for(let e=0;e<t.length;e++){let i=t[e],n=i.element;if(!i.parent||i.globalDisplayStatus<7)n?.remove(),t.splice(e,1),e--;else{this._domElement.contains(n)||(n.style.position="absolute",n.style.pointerEvents="auto",this._domElement.appendChild(n));let r=i.worldTransform,s=i._anchor,a=i.width*s.x,o=i.height*s.y;n.style.transformOrigin=`${a}px ${o}px`,n.style.transform=`matrix(${r.a}, ${r.b}, ${r.c}, ${r.d}, ${r.tx-a}, ${r.ty-o})`,n.style.opacity=i.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let t=0;t<this._attachedDomElements.length;t++)this._attachedDomElements[t].element?.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}},P3.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"dom"}}),Ih,xl=G(()=>{ws(),Ds(),Ih=class extends Qi{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new cs(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){let e=this.bounds,{x:i,y:n}=t;return i>=e.minX&&i<=e.maxX&&n>=e.minY&&n<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null;for(let e in this._gpuData)this._gpuData[e].destroy?.();this._gpuData=null}collectRenderablesSimple(t,e,i){let{renderPipes:n}=e;n.blendMode.pushBlendMode(this,this.groupBlendMode,t),n[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;let r=this.children,s=r.length;for(let a=0;a<s;a++)r[a].collectRenderables(t,e,i);n.blendMode.popBlendMode(t)}}}),qae=G(()=>{Ga(),xl()}),Wae=G(()=>{Ae(),_7(),Lt.add(P3)}),Fa,wo=G(()=>{Fa=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Fa||{})}),v7,T7=G(()=>{v7={createCanvas:(t,e)=>{let i=document.createElement("canvas");return i.width=t,i.height=e,i},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")}}),rw,si,Li=G(()=>{T7(),rw=v7,si={get(){return rw},set(t){rw=t}}});function Jo(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Qb(t){return t.split("?")[0].split("#")[0]}function $ae(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Kae(t,e,i){return t.replace(new RegExp($ae(e),"g"),i)}function Qae(t,e){let i="",n=0,r=-1,s=0,a=-1;for(let o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){let l=i.lastIndexOf("/");if(l!==i.length-1){l===-1?(i="",n=0):(i=i.slice(0,l),n=i.length-1-i.lastIndexOf("/")),r=o,s=0;continue}}else if(i.length===2||i.length===1){i="",n=0,r=o,s=0;continue}}}else i.length>0?i+=`/${t.slice(r+1,o)}`:i=t.slice(r+1,o),n=o-r-1;r=o,s=0}else a===46&&s!==-1?++s:s=-1}return i}var ca,Pf=G(()=>{Li(),ca={toPosix(t){return Kae(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){Jo(t),t=this.toPosix(t);let e=/^file:\/\/\//.exec(t);if(e)return e[0];let i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(Jo(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;let n=Qb(this.toPosix(e??si.get().getBaseUrl())),r=Qb(this.toPosix(i??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?ca.join(r,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(Jo(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="",i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));let n=t.endsWith("/");return t=Qae(t),t.length>0&&n&&(t+="/"),i?`/${t}`:e+t},isAbsolute(t){return Jo(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let i=0;i<t.length;++i){let n=t[i];if(Jo(n),n.length>0)if(e===void 0)e=n;else{let r=t[i-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(Jo(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0),i=e===47,n=-1,r=!0,s=this.getProtocol(t),a=t;t=t.slice(s.length);for(let o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),e===47){if(!r){n=o;break}}else r=!1;return n===-1?i?"/":this.isUrl(a)?s+t:s:i&&n===1?"//":s+t.slice(0,n)},rootname(t){Jo(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){let i=t.indexOf("/",e.length);i!==-1?e=t.slice(0,i):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Jo(t),e&&Jo(e),t=Qb(this.toPosix(t));let i=0,n=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(s=t.length-1;s>=0;--s){let l=t.charCodeAt(s);if(l===47){if(!r){i=s+1;break}}else o===-1&&(r=!1,o=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=o))}return i===n?n=o:n===-1&&(n=t.length),t.slice(i,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!r){i=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":t.slice(i,n)},extname(t){Jo(t),t=Qb(this.toPosix(t));let e=-1,i=0,n=-1,r=!0,s=0;for(let a=t.length-1;a>=0;--a){let o=t.charCodeAt(a);if(o===47){if(!r){i=a+1;break}continue}n===-1&&(r=!1,n=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===i+1?"":t.slice(e,n)},parse(t){Jo(t);let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Qb(this.toPosix(t));let i=t.charCodeAt(0),n=this.isAbsolute(t),r;e.root=this.rootname(t),n||this.hasProtocol(t)?r=1:r=0;let s=-1,a=0,o=-1,l=!0,h=t.length-1,d=0;for(;h>=r;--h){if(i=t.charCodeAt(h),i===47){if(!l){a=h+1;break}continue}o===-1&&(l=!1,o=h+1),i===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||o===-1||d===0||d===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&n?e.base=e.name=t.slice(1,o):e.base=e.name=t.slice(a,o)):(a===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,o)):(e.name=t.slice(a,s),e.base=t.slice(a,o)),e.ext=t.slice(s,o)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]}}),go,e_=G(()=>{go=(t,e,i=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||i?e(n):n):t)});function E7(t,e,i,n,r){let s=e[i];for(let a=0;a<s.length;a++){let o=s[a];i<e.length-1?E7(t.replace(n[i],o),e,i+1,n,r):r.push(t.replace(n[i],o))}}function Zae(t){let e=/\{(.*?)\}/g,i=t.match(e),n=[];if(i){let r=[];i.forEach(s=>{let a=s.substring(1,s.length-1).split(",");r.push(a)}),E7(t,r,0,i,n)}else n.push(t);return n}var S7=G(()=>{}),yx,aS=G(()=>{yx=t=>!Array.isArray(t)});function Jae(t){return t.split(".").pop().split("?").shift().split("#").shift()}var mf,Mf=G(()=>{Bi(),Pf(),e_(),S7(),aS(),mf=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{let e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){let{alias:e,src:i}=t;return go(e||i,n=>typeof n=="string"?n:Array.isArray(n)?n.map(r=>r?.src??r):n?.src?n.src:n,!0)}addManifest(t){this._manifest&&Mt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){let i=[],n=e;Array.isArray(e)||(n=Object.entries(e).map(([r,s])=>typeof s=="string"||Array.isArray(s)?{alias:r,src:s}:{alias:r,...s})),n.forEach(r=>{let s=r.src,a=r.alias,o;if(typeof a=="string"){let l=this._createBundleAssetId(t,a);i.push(l),o=[a,l]}else{let l=a.map(h=>this._createBundleAssetId(t,h));i.push(...l),o=[...a,...l]}this.add({...r,alias:o,src:s})}),this._bundles[t]=i}add(t){let e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=n=>{this.hasKey(n)&&Mt(`[Resolver] already has key: ${n} overwriting`)},go(e).forEach(n=>{let{src:r}=n,{data:s,format:a,loadParser:o,parser:l}=n,h=go(r).map(g=>typeof g=="string"?Zae(g):Array.isArray(g)?g:[g]),d=this.getAlias(n);Array.isArray(d)?d.forEach(i):i(d);let p=[];h.forEach(g=>{g.forEach(y=>{let v={};if(typeof y!="object"){v.src=y;for(let S=0;S<this._parsers.length;S++){let T=this._parsers[S];if(T.test(y)){v=T.parse(y);break}}}else s=y.data??s,a=y.format??a,(y.loadParser||y.parser)&&(o=y.loadParser??o,l=y.parser??l),v={...v,...y};if(!d)throw new Error(`[Resolver] alias is undefined for this asset: ${v.src}`);v=this._buildResolvedAsset(v,{aliases:d,data:s,format:a,loadParser:o,parser:l,progressSize:n.progressSize}),p.push(v)})}),d.forEach(g=>{this._assetMap[g]=p})})}resolveBundle(t){let e=yx(t);t=go(t);let i={};return t.forEach(n=>{let r=this._bundles[n];if(r){let s=this.resolve(r),a={};for(let o in s){let l=s[o];a[this._extractAssetIdFromBundle(n,o)]=l}i[n]=a}}),e?i[t[0]]:i}resolveUrl(t){let e=this.resolve(t);if(typeof t!="string"){let i={};for(let n in e)i[n]=e[n].src;return i}return e.src}resolve(t){let e=yx(t);t=go(t);let i={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let r=this._assetMap[n],s=this._getPreferredOrder(r);s?.priority.forEach(a=>{s.params[a].forEach(o=>{let l=r.filter(h=>h[a]?h[a]===o:!1);l.length&&(r=l)})}),this._resolverHash[n]=r[0]}else this._resolverHash[n]=this._buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){let i=t[e],n=this._preferredOrder.find(r=>r.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;let e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){let{aliases:i,data:n,loadParser:r,parser:s,format:a,progressSize:o}=e;return(this._basePath||this._rootPath)&&(t.src=ca.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=r??t.loadParser,t.parser=s??t.parser,t.format=a??t.format??Jae(t.src),o!==void 0&&(t.progressSize=o),t}},mf.RETINA_PREFIX=/@([0-9\.]+)x/}),lE,qB=G(()=>{lE=(t,e)=>{let i=e.split("?")[1];return i&&(t+=`?${i}`),t}}),sw,M3,A7=G(()=>{wr(),Zr(),gi(),sw=class ky{constructor(e,i){this.linkedSheets=[];let n=e;e?.source instanceof Ar&&(n={texture:e,data:i});let{texture:r,data:s,cachePrefix:a=""}=n;this.cachePrefix=a,this._texture=r instanceof st?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=s;let o=parseFloat(s.meta.scale);o?(this.resolution=o,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=ky.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e,n=ky.BATCH_SIZE;for(;i-e<n&&i<this._frameKeys.length;){let r=this._frameKeys[i],s=this._frames[r],a=s.frame;if(a){let o=null,l=null,h=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new mn(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s.rotated?o=new mn(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new mn(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new mn(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new st({source:this.textureSource,frame:o,orig:d,trim:l,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}i++}}_processAnimations(){let e=this.data.animations||{};for(let i in e){this.animations[i]=[];for(let n=0;n<e[i].length;n++){let r=e[i][n];this.animations[i].push(this.textures[r])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ky.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ky.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}},sw.BATCH_SIZE=1e3,M3=sw});function C7(t,e,i){let n={};if(t.forEach(r=>{n[r]=e}),Object.keys(e.textures).forEach(r=>{n[`${e.cachePrefix}${r}`]=e.textures[r]}),!i){let r=ca.dirname(t[0]);e.linkedSheets.forEach((s,a)=>{let o=C7([`${r}/${e.data.meta.related_multi_packs[a]}`],s,!0);Object.assign(n,o)})}return n}var E6,w7,D7=G(()=>{wo(),Mf(),qB(),Ae(),gi(),Pf(),A7(),E6=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],w7={extension:ge.Asset,cache:{test:t=>t instanceof M3,getCacheableAssets:(t,e)=>C7(t,e,!1)},resolver:{extension:{type:ge.ResolveParser,name:"resolveSpritesheet"},test:t=>{let e=t.split("?")[0].split("."),i=e.pop(),n=e.pop();return i==="json"&&E6.includes(n)},parse:t=>{let e=t.split(".");return{resolution:parseFloat(mf.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ge.LoadParser,priority:Fa.Normal,name:"spritesheetLoader"},async testParse(t,e){return ca.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,i){let{texture:n,imageFilename:r,textureOptions:s,cachePrefix:a}=e?.data??{},o=ca.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(n instanceof st)l=n;else{let p=lE(o+(r??t.meta.image),e.src);l=(await i.load([{src:p,data:s}]))[p]}let h=new M3({texture:l.source,data:t,cachePrefix:a});await h.parse();let d=t?.meta?.related_multi_packs;if(Array.isArray(d)){let p=[];for(let y of d){if(typeof y!="string")continue;let v=o+y;e.data?.ignoreMultiPack||(v=lE(v,e.src),p.push(i.load({src:v,data:{textureOptions:s,ignoreMultiPack:!0}})))}let g=await Promise.all(p);h.linkedSheets=g,g.forEach(y=>{y.linkedSheets=[h].concat(h.linkedSheets.filter(v=>v!==y))})}return h},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}}}),WB=G(()=>{Ae(),D7(),Lt.add(w7)});function R7(t,e,i){let{width:n,height:r}=i.orig,s=i.trim;if(s){let a=s.width,o=s.height;t.minX=s.x-e._x*n,t.maxX=t.minX+a,t.minY=s.y-e._y*r,t.maxY=t.minY+o}else t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*r,t.maxY=t.minY+r}var $B=G(()=>{}),Eo,Bf=G(()=>{Sf(),gi(),$B(),Mi(),xl(),Eo=class B3 extends Ih{constructor(e=st.EMPTY){e instanceof st&&(e={texture:e});let{texture:i=st.EMPTY,anchor:n,roundPixels:r,width:s,height:a,...o}=e;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Qn({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=r??!1,s!==void 0&&(this.width=s),a!==void 0&&(this.height=a)}static from(e,i=!1){return e instanceof st?new B3(e):new B3(st.from(e,i))}set texture(e){e||(e=st.EMPTY);let i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return R7(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return xt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){let e=this._anchor,i=this._texture,n=this._bounds,{width:r,height:s}=i.orig;n.minX=-e._x*r,n.maxX=n.minX+r,n.minY=-e._y*s,n.maxY=n.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,i){typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),i!==void 0&&this._setHeight(i,this._texture.orig.height)}}});function P7(t,e,i){let n=M7;t.measurable=!0,wB(t,i,n),e.addBoundsMask(n),t.measurable=!1}var M7,oS=G(()=>{ws(),fg(),M7=new cs});function B7(t,e,i){let n=il.get();t.measurable=!0;let r=Ts.get().identity(),s=k7(t,i,r);BB(t,n,s),t.measurable=!1,e.addBoundsMask(n),Ts.return(r),il.return(n)}function k7(t,e,i){return t?(t!==e&&(k7(t.parent,e,i),t.updateLocalTransform(),i.append(t.localTransform)),i):(Mt("Mask bounds, renderable is not inside the root container"),i)}var uS=G(()=>{tS(),wf(),Bi()}),k3,O7=G(()=>{Ae(),Bf(),oS(),uS(),k3=class{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Eo),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||P7(this.mask,t,e)}addLocalBounds(t,e){B7(this.mask,t,e)}containsPoint(t,e){let i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Eo}},k3.extension=ge.MaskEffect}),O3,F7=G(()=>{Ae(),O3=class{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}},O3.extension=ge.MaskEffect}),F3,I7=G(()=>{Ae(),Ds(),oS(),uS(),F3=class{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){P7(this.mask,t,e)}addLocalBounds(t,e){B7(this.mask,t,e)}containsPoint(t,e){let i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Qi}},F3.extension=ge.MaskEffect}),nl,pg=G(()=>{Li(),Ae(),Zr(),nl=class extends Ar{constructor(t){t.resource||(t.resource=si.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){let n=super.resize(t,e,i);return n&&this.resizeCanvas(),n}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}},nl.extension=ge.TextureSource}),Mh,mg=G(()=>{Ae(),Zr(),Mh=class extends Ar{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}},Mh.extension=ge.TextureSource});async function L7(){return aw??(aw=(async()=>{let t=si.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";let e=await new Promise(s=>{let a=document.createElement("video");a.onloadeddata=()=>s(a),a.onerror=()=>s(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return"premultiply-alpha-on-upload";let i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);let n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);let r=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,r),t.deleteFramebuffer(n),t.deleteTexture(i),t.getExtension("WEBGL_lose_context")?.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),aw}var aw,KB=G(()=>{Li()}),Zb,Bm,QB=G(()=>{Ae(),Fh(),KB(),Zr(),Zb=class N7 extends Ar{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...N7.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=ls.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,i=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(i.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await L7(),this._load=new Promise((n,r)=>{this.isValid?n(this):(this._resolve=n,this._reject=r,i.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${i.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(ls.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ls.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ls.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}},Zb.extension=ge.TextureSource,Zb.defaultOptions={...Ar.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},Zb.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Bm=Zb}),S6,$i,dc=G(()=>{Bi(),e_(),S6=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let e=this._cache.get(t);return e||Mt(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){let i=go(t),n;for(let o=0;o<this.parsers.length;o++){let l=this.parsers[o];if(l.test(e)){n=l.getCacheableAssets(i,e);break}}let r=new Map(Object.entries(n||{}));n||i.forEach(o=>{r.set(o,e)});let s=[...r.keys()],a={cacheKeys:s,keys:i};i.forEach(o=>{this._cacheMap.set(o,a)}),s.forEach(o=>{let l=n?n[o]:e;this._cache.has(o)&&this._cache.get(o)!==l&&Mt("[Cache] already has key:",o),this._cache.set(o,r.get(o))})}remove(t){if(!this._cacheMap.has(t)){Mt(`[Assets] Asset id ${t} was not found in the Cache`);return}let e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}},$i=new S6});function U7(t={}){let e=t&&t.resource,i=e?t.resource:t,n=e?t:{resource:t};for(let r=0;r<cE.length;r++){let s=cE[r];if(s.test(i))return new s(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function eoe(t={},e=!1){let i=t&&t.resource,n=i?t.resource:t,r=i?t:{resource:t};if(!e&&$i.has(n))return $i.get(n);let s=new st({source:U7(r)});return s.on("destroy",()=>{$i.has(n)&&$i.remove(n)}),e||$i.set(n,s),s}function toe(t,e=!1){return typeof t=="string"?$i.get(t):t instanceof Ar?new st({source:t}):eoe(t,e)}var cE,G7=G(()=>{dc(),Ae(),Zr(),gi(),cE=[],Lt.handleByList(ge.TextureSource,cE),st.from=toe,Ar.from=U7}),ZB=G(()=>{Ae(),O7(),F7(),I7(),FB(),pg(),mg(),QB(),G7(),Lt.add(k3,O3,F3,Bm,Mh,nl,aE)}),rl,Lh=G(()=>{rl=class{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(let i in t){let n=t[i];this.setResource(n,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let t=[],e=0;for(let i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){let i=this.resources[e];t!==i&&(i&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){let e=this.resources;for(let i in e)e[i]._touched=t}destroy(){let t=this.resources;for(let e in t)t[e]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){let e=this.resources;for(let i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}});function JB(t,e,i){let n=2166136261;for(let r=0;r<e;r++)n^=t[r].uid,n=Math.imul(n,16777619),n>>>=0;return ek[n]||ioe(t,e,n,i)}function ioe(t,e,i,n){let r={},s=0;for(let o=0;o<n;o++){let l=o<e?t[o]:st.EMPTY.source;r[s++]=l.source,r[s++]=l.style}let a=new rl(r);return ek[i]=a,a}var ek,lS=G(()=>{Lh(),gi(),ek={}}),nf,tk=G(()=>{nf=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}});function I3(t,e){let i=t.byteLength/8|0,n=new Float64Array(t,0,i);new Float64Array(e,0,i).set(n);let r=t.byteLength-i*8;if(r>0){let s=new Uint8Array(t,i*8,r);new Uint8Array(e,i*8,r).set(s)}}var ik=G(()=>{}),H7,tr,kf=G(()=>{H7={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},tr=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(tr||{})});function xx(t,e){return e.alphaMode==="no-premultiply-alpha"&&H7[t]||t}var t_=G(()=>{kf()});function z7(){return(!t1||t1?.isContextLost())&&(t1=si.get().createCanvas().getContext("webgl",{})),t1}var t1,nk=G(()=>{Li()});function noe(t){let e="";for(let i=0;i<t;++i)i>0&&(e+=`
else `),i<t-1&&(e+=`if(test == ${i}.0){}`);return e}function V7(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let i=e.createShader(e.FRAGMENT_SHADER);try{for(;;){let n=j7.replace(/%forloop%/gi,noe(t));if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(i)}return t}var j7,rk=G(()=>{j7=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`)});function roe(){if(Vd)return Vd;let t=z7();return Vd=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Vd=V7(Vd,t),t.getExtension("WEBGL_lose_context")?.loseContext(),Vd}var Vd,X7=G(()=>{nk(),rk(),Vd=null}),Y7,q7=G(()=>{Y7=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){let e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}});function A6(){return _x>0?Am[--_x]:new W7}function C6(t){Am[_x++]=t}var W7,Am,_x,tm,ow,$7,K7=G(()=>{Nr(),tk(),Mi(),Cf(),ik(),t_(),X7(),q7(),W7=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Y7,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},Am=[],_x=0,Af.register({clear:()=>{if(Am.length>0)for(let t of Am)t&&t.destroy();Am.length=0,_x=0}}),tm=0,ow=class Q7{constructor(e){this.uid=Sn("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Q7.defaultOptions,...e},e.maxTextures||(xt("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=roe());let{maxTextures:i,attributesInitialSize:n,indicesInitialSize:r}=e;this.attributeBuffer=new nf(n*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)C6(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,i){let n=e._batch.textures.ids[i._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=i,!0)}updateElement(e){this.dirty=!0;let i=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId)}break(e){let i=this._elements;if(!i[this.elementStart])return;let n=A6(),r=n.textures;r.clear();let s=i[this.elementStart],a=xx(s.blendMode,s.texture._source),o=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let l=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,d=this.indexBuffer,p=this._batchIndexSize,g=this._batchIndexStart,y="startBatch",v=this.maxTextures;for(let S=this.elementStart;S<this.elementSize;++S){let T=i[S];i[S]=null;let A=T.texture._source,D=xx(T.blendMode,A),R=a!==D||o!==T.topology;if(A._batchTick===tm&&!R){T._textureId=A._textureBindLocation,p+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,l,h,T._attributeStart,T._textureId),this.packQuadIndex(d,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,l,h,T._attributeStart,T._textureId),this.packIndex(T,d,T._indexStart,T._attributeStart/this.vertexSize)),T._batch=n;continue}A._batchTick=tm,(r.count>=v||R)&&(this._finishBatch(n,g,p-g,r,a,o,e,y),y="renderBatch",g=p,a=D,o=T.topology,n=A6(),r=n.textures,r.clear(),++tm),T._textureId=A._textureBindLocation=r.count,r.ids[A.uid]=r.count,r.textures[r.count++]=A,T._batch=n,p+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,l,h,T._attributeStart,T._textureId),this.packQuadIndex(d,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,l,h,T._attributeStart,T._textureId),this.packIndex(T,d,T._indexStart,T._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(n,g,p-g,r,a,o,e,y),g=p,++tm),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=p}_finishBatch(e,i,n,r,s,a,o,l){e.gpuBindGroup=null,e.bindGroup=null,e.action=l,e.batcher=this,e.textures=r,e.blendMode=s,e.topology=a,e.start=i,e.size=n,++tm,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let i=Math.max(e,this.attributeBuffer.size*2),n=new nf(i);I3(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){let i=this.indexBuffer,n=Math.max(e,i.length*1.5);n+=n%2;let r=n>65535?new Uint32Array(n):new Uint16Array(n);if(r.BYTES_PER_ELEMENT!==i.BYTES_PER_ELEMENT)for(let s=0;s<i.length;s++)r[s]=i[s];else I3(i.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,i,n){e[i]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3}packIndex(e,i,n,r){let s=e.indices,a=e.indexSize,o=e.indexOffset,l=e.attributeOffset;for(let h=0;h<a;h++)i[n++]=r+s[h+o]-l}destroy(){if(this.batches!==null){for(let e=0;e<this.batches.length;e++)C6(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}},ow.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6},$7=ow}),Ci,fc=G(()=>{Ci=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(Ci||{})}),ha,Nh=G(()=>{Cs(),Nr(),fc(),ha=class extends ma{constructor(t){let{data:e,size:i}=t,{usage:n,label:r,shrinkToFit:s}=t;super(),this.uid=Sn("buffer"),this._resourceType="buffer",this._resourceId=Sn("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e?.byteLength);let a=!!e;this.descriptor={size:i,usage:n,mappedAtCreation:a,label:r},this.shrinkToFit=s??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Ci.STATIC)}set static(t){t?this.descriptor.usage|=Ci.STATIC:this.descriptor.usage&=~Ci.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}let n=this._data;if(this._data=t,this._dataInt32=null,!n||n.length!==t.length){!this.shrinkToFit&&n&&t.byteLength<n.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Sn("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}});function Z7(t,e){if(!(t instanceof ha)){let i=e?Ci.INDEX:Ci.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),i=Ci.INDEX|Ci.COPY_DST):(t=new Float32Array(t),i=Ci.VERTEX|Ci.COPY_DST)),t=new ha({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return t}var J7=G(()=>{Nh(),fc()});function soe(t,e,i){let n=t.getAttribute(e);if(!n)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;let r=n.buffer.data,s=1/0,a=1/0,o=-1/0,l=-1/0,h=r.BYTES_PER_ELEMENT,d=(n.offset||0)/h,p=(n.stride||8)/h;for(let g=d;g<r.length;g+=p){let y=r[g],v=r[g+1];y>o&&(o=y),v>l&&(l=v),y<s&&(s=y),v<a&&(a=v)}return i.minX=s,i.minY=a,i.maxX=o,i.maxY=l,i}var eH=G(()=>{});function aoe(t){return(t instanceof ha||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=Z7(t.buffer,!1),t}var Of,Ff=G(()=>{Cs(),ws(),Nr(),Nh(),J7(),eH(),Of=class extends ma{constructor(t={}){super(),this.uid=Sn("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new cs,this._boundsDirty=!0;let{attributes:e,indexBuffer:i,topology:n}=t;if(this.buffers=[],this.attributes={},e)for(let r in e)this.addAttribute(r,e[r]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=n||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(let t in this.attributes){let e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){let i=aoe(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=Z7(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,soe(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}}),w6,D6,tH,iH=G(()=>{Nh(),fc(),Ff(),w6=new Float32Array(1),D6=new Uint32Array(1),tH=class extends Of{constructor(){let t=new ha({data:w6,label:"attribute-batch-buffer",usage:Ci.VERTEX|Ci.COPY_DST,shrinkToFit:!1}),e=new ha({data:D6,label:"index-batch-buffer",usage:Ci.INDEX|Ci.COPY_DST,shrinkToFit:!1}),i=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:i,offset:0},aUV:{buffer:t,format:"float32x2",stride:i,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:i,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:i,offset:20}},indexBuffer:e})}}});function vx(t,e){let i=L3[t];return i===void 0&&(_T[e]===void 0&&(_T[e]=1),L3[t]=i=_T[e]++),i}var _T,L3,i_=G(()=>{_T=Object.create(null),L3=Object.create(null)});function ooe(){if(!i1){i1="mediump";let t=z7();t&&t.getShaderPrecisionFormat&&(i1=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return i1}var i1,nH=G(()=>{nk()});function uoe(t,e,i){return e?t:i?(t=t.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}var rH=G(()=>{});function loe(t,e,i){let n=i?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let r=i?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&n!=="highp"&&(r="mediump"),`precision ${r} float;
${t}`}else if(n!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var sH=G(()=>{});function coe(t,e){return e?`#version 300 es
${t}`:t}var aH=G(()=>{});function hoe(t,{name:e="pixi-program"},i=!0){e=e.replace(/\s+/g,"-"),e+=i?"-fragment":"-vertex";let n=i?oH:uH;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}var oH,uH,lH=G(()=>{oH={},uH={}});function doe(t,e){return e?t.replace("#version 300 es",""):t}var cH=G(()=>{}),n1,im,uw,Do,ga=G(()=>{i_(),nH(),rH(),sH(),aH(),lH(),cH(),n1={stripVersion:doe,ensurePrecision:loe,addProgramDefines:uoe,setProgramName:hoe,insertVersion:coe},im=Object.create(null),uw=class N3{constructor(e){e={...N3.defaultOptions,...e};let i=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:ooe()},setProgramName:{name:e.name},addProgramDefines:i,insertVersion:i},r=e.fragment,s=e.vertex;Object.keys(n1).forEach(a=>{let o=n[a];r=n1[a](r,o,!0),s=n1[a](s,o,!1)}),this.fragment=r,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=vx(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,im[this._cacheKey]=null}static from(e){let i=`${e.vertex}:${e.fragment}`;return im[i]||(im[i]=new N3(e),im[i]._cacheKey=i),im[i]}},uw.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"},Do=uw});function Bh(t){return U3[t]??U3.float32}var U3,If=G(()=>{U3={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}}});function foe({source:t,entryPoint:e}){let i={},n=t.indexOf(`fn ${e}`);if(n!==-1){let r=t.indexOf("->",n);if(r!==-1){let s=t.substring(n,r),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,o;for(;(o=a.exec(s))!==null;){let l=hH[o[3]]??"float32";i[o[2]]={location:parseInt(o[1],10),format:l,stride:Bh(l).stride,offset:0,instance:!1,start:0}}}}return i}var hH,dH=G(()=>{If(),hH={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"}});function lw(t){let e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,i=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,h=t.match(e)?.map(p=>({group:parseInt(p.match(i)[1],10),binding:parseInt(p.match(n)[1],10),name:p.match(r)[2],isUniform:p.match(r)[1]==="<uniform>",type:p.match(s)[1]}));if(!h)return{groups:[],structs:[]};let d=t.match(a)?.map(p=>{let g=p.match(l)[1],y=p.match(o).reduce((v,S)=>{let[T,A]=S.split(":");return v[T.trim()]=A.trim(),v},{});return y?{name:g,members:y}:null}).filter(({name:p})=>h.some(g=>g.type===p))??[];return{groups:h,structs:d}}var fH=G(()=>{}),Cm,pH=G(()=>{Cm=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(Cm||{})});function poe({groups:t}){let e=[];for(let i=0;i<t.length;i++){let n=t[i];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:Cm.VERTEX|Cm.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:Cm.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:Cm.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}var mH=G(()=>{pH()});function moe({groups:t}){let e=[];for(let i=0;i<t.length;i++){let n=t[i];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}var gH=G(()=>{});function goe(t,e){let i=new Set,n=new Set,r=[...t.structs,...e.structs].filter(a=>i.has(a.name)?!1:(i.add(a.name),!0)),s=[...t.groups,...e.groups].filter(a=>{let o=`${a.name}-${a.binding}`;return n.has(o)?!1:(n.add(o),!0)});return{structs:r,groups:s}}var bH=G(()=>{}),nm,du,Ha=G(()=>{i_(),dH(),fH(),mH(),gH(),bH(),nm=Object.create(null),du=class yH{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;let{fragment:i,vertex:n,layout:r,gpuLayout:s,name:a}=e;if(this.name=a,this.fragment=i,this.vertex=n,i.source===n.source){let o=lw(i.source);this.structsAndGroups=o}else{let o=lw(n.source),l=lw(i.source);this.structsAndGroups=goe(o,l)}this.layout=r??moe(this.structsAndGroups),this.gpuLayout=s??poe(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:e,fragment:i}=this,n=e.source+i.source+e.entryPoint+i.entryPoint;this._layoutKey=vx(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=foe(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,nm[this._cacheKey]=null}static from(e){let i=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return nm[i]||(nm[i]=new yH(e),nm[i]._cacheKey=i),nm[i]}}});function R6(t,e,i){if(t)for(let n in t){let r=n.toLocaleLowerCase(),s=e[r];if(s){let a=t[n];n==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&s.push(`//----${i}----//`),s.push(a)}else Mt(`${n} placement hook does not exist in shader`)}}var xH=G(()=>{Bi()});function P6(t){let e={};return(t.match(_H)?.map(i=>i.replace(/[{()}]/g,""))??[]).forEach(i=>{e[i]=[]}),e}var _H,vH=G(()=>{_H=/\{\{(.*?)\}\}/g});function M6(t,e){let i,n=/@in\s+([^;]+);/g;for(;(i=n.exec(t))!==null;)e.push(i[1])}function B6(t,e,i=!1){let n=[];M6(e,n),t.forEach(o=>{o.header&&M6(o.header,n)});let r=n;i&&r.sort();let s=r.map((o,l)=>`       @location(${l}) ${o},`).join(`
`),a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${s}
`),a}var TH=G(()=>{});function k6(t,e){let i,n=/@out\s+([^;]+);/g;for(;(i=n.exec(t))!==null;)e.push(i[1])}function boe(t){let e=/\b(\w+)\s*:/g.exec(t);return e?e[1]:""}function yoe(t){let e=/@.*?\s+/g;return t.replace(e,"")}function xoe(t,e){let i=[];k6(e,i),t.forEach(l=>{l.header&&k6(l.header,i)});let n=0,r=i.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${n++}) ${l}`).join(`,
`),s=i.sort().map(l=>`       var ${yoe(l)};`).join(`
`),a=`return VSOutput(
            ${i.sort().map(l=>` ${boe(l)}`).join(`,
`)});`,o=e.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${r}
`),o=o.replace("{{start}}",`
${s}
`),o=o.replace("{{return}}",`
${a}
`),o}var EH=G(()=>{});function O6(t,e){let i=t;for(let n in e){let r=e[n];r.join(`
`).length?i=i.replace(`{{${n}}}`,`//-----${n} START-----//
${r.join(`
`)}
//----${n} FINISH----//`):i=i.replace(`{{${n}}}`,"")}return i}var SH=G(()=>{});function _oe({template:t,bits:e}){let i=AH(t,e);if(Eh[i])return Eh[i];let{vertex:n,fragment:r}=Toe(t,e);return Eh[i]=CH(n,r,e),Eh[i]}function voe({template:t,bits:e}){let i=AH(t,e);return Eh[i]||(Eh[i]=CH(t.vertex,t.fragment,e)),Eh[i]}function Toe(t,e){let i=e.map(a=>a.vertex).filter(a=>!!a),n=e.map(a=>a.fragment).filter(a=>!!a),r=B6(i,t.vertex,!0);r=xoe(i,r);let s=B6(n,t.fragment,!0);return{vertex:r,fragment:s}}function AH(t,e){return e.map(i=>(vT.has(i)||vT.set(i,wH++),vT.get(i))).sort((i,n)=>i-n).join("-")+t.vertex+t.fragment}function CH(t,e,i){let n=P6(t),r=P6(e);return i.forEach(s=>{R6(s.vertex,n,s.name),R6(s.fragment,r,s.name)}),{vertex:O6(t,n),fragment:O6(e,r)}}var Eh,vT,wH,DH=G(()=>{xH(),vH(),TH(),EH(),SH(),Eh=Object.create(null),vT=new Map,wH=0}),RH,PH,MH,BH,kH=G(()=>{RH=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,PH=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,MH=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,BH=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`}),OH,FH,IH=G(()=>{OH={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},FH={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}}});function n_({bits:t,name:e}){let i=_oe({template:{fragment:PH,vertex:RH},bits:[OH,...t]});return du.from({name:e,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function r_({bits:t,name:e}){return new Do({name:e,...voe({template:{vertex:MH,fragment:BH},bits:[FH,...t]})})}var Uh=G(()=>{ga(),Ha(),DH(),kH(),IH()}),cS,hS,s_=G(()=>{cS={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},hS={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}}});function Eoe(t){let e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let n=0;n<t;n++)e.push(`@group(1) @binding(${i++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${i++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function Soe(t){let e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let i=0;i<t;i++)i===t-1?e.push("  default:{"):e.push(`  case ${i}:{`),e.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function sk(t){return TT[t]||(TT[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${Eoe(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${Soe(t)}
            `}}),TT[t]}function Aoe(t){let e=[];for(let i=0;i<t;i++)i>0&&e.push("else"),i<t-1&&e.push(`if(vTextureId < ${i}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${i}], vUV);`),e.push("}");return e.join(`
`)}function ak(t){return ET[t]||(ET[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${Aoe(t)}
            `}}),ET[t]}var TT,ET,a_=G(()=>{TT={},ET={}}),gg,bg,Gh=G(()=>{gg={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},bg={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}}}),G3,LH,NH=G(()=>{G3=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],LH=G3.reduce((t,e)=>(t[e]=!0,t),{})});function Coe(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var UH=G(()=>{}),cw,Fr,Dr=G(()=>{Nr(),i_(),NH(),UH(),cw=class GH{constructor(e,i){this._touched=0,this.uid=Sn("uniform"),this._resourceType="uniformGroup",this._resourceId=Sn("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...GH.defaultOptions,...i},this.uniformStructures=e;let n={};for(let r in e){let s=e[r];if(s.name=r,s.size=s.size??1,!LH[s.type]){let a=s.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){let[,o,l]=a;throw new Error(`Uniform type ${s.type} is not supported. Use type: '${o}', size: ${l} instead.`)}throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${G3.join(", ")}`)}s.value??(s.value=Coe(s.type,s.size)),n[r]=s.value}this.uniforms=n,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=vx(Object.keys(n).map(r=>`${r}-${e[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}},cw.defaultOptions={ubo:!1,isStatic:!1},Fr=cw});function ok(t){let e=H3[t];if(e)return e;let i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;return e=H3[t]=new Fr({uTextures:{value:i,type:"i32",size:t}},{isStatic:!0}),e}var H3,dS=G(()=>{Dr(),H3={}}),fa,Ro=G(()=>{fa=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(fa||{})}),fu,pu=G(()=>{Cs(),Nr(),ga(),Lh(),Ha(),Ro(),Dr(),fu=class HH extends ma{constructor(e){super(),this.uid=Sn("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:i,glProgram:n,groups:r,resources:s,compatibleRenderers:a,groupMap:o}=e;this.gpuProgram=i,this.glProgram=n,a===void 0&&(a=0,i&&(a|=fa.WEBGPU),n&&(a|=fa.WEBGL)),this.compatibleRenderers=a;let l={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!i&&r&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!i&&r&&o)for(let h in o)for(let d in o[h]){let p=o[h][d];l[p]={group:h,binding:d,name:p}}else if(i&&r&&!o){let h=i.structsAndGroups.groups;o={},h.forEach(d=>{o[d.group]=o[d.group]||{},o[d.group][d.binding]=d.name,l[d.name]=d})}else if(s){r={},o={},i&&i.structsAndGroups.groups.forEach(d=>{o[d.group]=o[d.group]||{},o[d.group][d.binding]=d.name,l[d.name]=d});let h=0;for(let d in s)l[d]||(r[99]||(r[99]=new rl,this._ownedBindGroups.push(r[99])),l[d]={group:99,binding:h,name:d},o[99]=o[99]||{},o[99][h]=d,h++);for(let d in s){let p=d,g=s[d];!g.source&&!g._resourceType&&(g=new Fr(g));let y=l[p];y&&(r[y.group]||(r[y.group]=new rl,this._ownedBindGroups.push(r[y.group])),r[y.group].setResource(g,y.binding))}}this.groups=r,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(r,l)}addResource(e,i,n){var r,s;(r=this._uniformBindMap)[i]||(r[i]={}),(s=this._uniformBindMap[i])[n]||(s[n]=e),this.groups[i]||(this.groups[i]=new rl,this._ownedBindGroups.push(this.groups[i]))}_buildResourceAccessor(e,i){let n={};for(let r in i){let s=i[r];Object.defineProperty(n,s.name,{get(){return e[s.group].getResource(s.binding)},set(a){e[s.group].setResource(a,s.binding)}})}return n}destroy(e=!1){this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(i=>{i.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){let{gpu:i,gl:n,...r}=e,s,a;return i&&(s=du.from(i)),n&&(a=Do.from(n)),new HH({gpuProgram:s,glProgram:a,...r})}}}),zH,VH=G(()=>{Uh(),s_(),a_(),Gh(),dS(),pu(),zH=class extends fu{constructor(t){let e=r_({name:"batch",bits:[hS,ak(t),bg]}),i=n_({name:"batch",bits:[cS,sk(t),gg]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:ok(t)}})}}}),r1,hw,hE,uk=G(()=>{Ae(),K7(),iH(),VH(),r1=null,hw=class jH extends $7{constructor(e){super(e),this.geometry=new tH,this.name=jH.extension.name,this.vertexSize=6,r1??(r1=new zH(e.maxTextures)),this.shader=r1}packAttributes(e,i,n,r,s){let a=s<<16|e.roundPixels&65535,o=e.transform,l=o.a,h=o.b,d=o.c,p=o.d,g=o.tx,y=o.ty,{positions:v,uvs:S}=e,T=e.color,A=e.attributeOffset,D=A+e.attributeSize;for(let R=A;R<D;R++){let B=R*2,z=v[B],L=v[B+1];i[r++]=l*z+d*L+g,i[r++]=p*L+h*z+y,i[r++]=S[B],i[r++]=S[B+1],n[r++]=T,n[r++]=a}}packQuadAttributes(e,i,n,r,s){let a=e.texture,o=e.transform,l=o.a,h=o.b,d=o.c,p=o.d,g=o.tx,y=o.ty,v=e.bounds,S=v.maxX,T=v.minX,A=v.maxY,D=v.minY,R=a.uvs,B=e.color,z=s<<16|e.roundPixels&65535;i[r+0]=l*T+d*D+g,i[r+1]=p*D+h*T+y,i[r+2]=R.x0,i[r+3]=R.y0,n[r+4]=B,n[r+5]=z,i[r+6]=l*S+d*D+g,i[r+7]=p*D+h*S+y,i[r+8]=R.x1,i[r+9]=R.y1,n[r+10]=B,n[r+11]=z,i[r+12]=l*S+d*A+g,i[r+13]=p*A+h*S+y,i[r+14]=R.x2,i[r+15]=R.y2,n[r+16]=B,n[r+17]=z,i[r+18]=l*T+d*A+g,i[r+19]=p*A+h*T+y,i[r+20]=R.x3,i[r+21]=R.y3,n[r+22]=B,n[r+23]=z}},hw.extension={type:[ge.Batcher],name:"default"},hE=hw});function woe(t,e,i,n,r,s,a,o=null){let l=0;i*=e,r*=s;let h=o.a,d=o.b,p=o.c,g=o.d,y=o.tx,v=o.ty;for(;l<a;){let S=t[i],T=t[i+1];n[r]=h*S+p*T+y,n[r+1]=d*S+g*T+v,r+=s,i+=e,l++}}function Doe(t,e,i,n){let r=0;for(e*=i;r<n;)t[e]=0,t[e+1]=0,e+=i,r++}var lk=G(()=>{});function XH(t,e,i,n,r){let s=e.a,a=e.b,o=e.c,l=e.d,h=e.tx,d=e.ty;i||(i=0),n||(n=2),r||(r=t.length/n-i);let p=i*n;for(let g=0;g<r;g++){let y=t[p],v=t[p+1];t[p]=s*y+o*v+h,t[p+1]=a*y+l*v+d,p+=n}}var ck=G(()=>{}),F6,fS,hk=G(()=>{hi(),RB(),F6=new Tt,fS=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?H9(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||F6}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}}),gm,YH,qH,WH=G(()=>{Ae(),gm={extension:{type:ge.ShapeBuilder,name:"circle"},build(t,e){let i,n,r,s,a,o;if(t.type==="circle"){let B=t;if(a=o=B.radius,a<=0)return!1;i=B.x,n=B.y,r=s=0}else if(t.type==="ellipse"){let B=t;if(a=B.halfWidth,o=B.halfHeight,a<=0||o<=0)return!1;i=B.x,n=B.y,r=s=0}else{let B=t,z=B.width/2,L=B.height/2;i=B.x+z,n=B.y+L,a=o=Math.max(0,Math.min(B.radius,Math.min(z,L))),r=z-a,s=L-o}if(r<0||s<0)return!1;let l=Math.ceil(2.3*Math.sqrt(a+o)),h=l*8+(r?4:0)+(s?4:0);if(h===0)return!1;if(l===0)return e[0]=e[6]=i+r,e[1]=e[3]=n+s,e[2]=e[4]=i-r,e[5]=e[7]=n-s,!0;let d=0,p=l*4+(r?2:0)+2,g=p,y=h,v=r+a,S=s,T=i+v,A=i-v,D=n+S;if(e[d++]=T,e[d++]=D,e[--p]=D,e[--p]=A,s){let B=n-S;e[g++]=A,e[g++]=B,e[--y]=B,e[--y]=T}for(let B=1;B<l;B++){let z=Math.PI/2*(B/l),L=r+Math.cos(z)*a,H=s+Math.sin(z)*o,te=i+L,j=i-L,O=n+H,q=n-H;e[d++]=te,e[d++]=O,e[--p]=O,e[--p]=j,e[g++]=j,e[g++]=q,e[--y]=q,e[--y]=te}v=r,S=s+o,T=i+v,A=i-v,D=n+S;let R=n-S;return e[d++]=T,e[d++]=D,e[--y]=R,e[--y]=T,r&&(e[d++]=A,e[d++]=D,e[--y]=R,e[--y]=A),!0},triangulate(t,e,i,n,r,s){if(t.length===0)return;let a=0,o=0;for(let d=0;d<t.length;d+=2)a+=t[d],o+=t[d+1];a/=t.length/2,o/=t.length/2;let l=n;e[l*i]=a,e[l*i+1]=o;let h=l++;for(let d=0;d<t.length;d+=2)e[l*i]=t[d],e[l*i+1]=t[d+1],d>0&&(r[s++]=l,r[s++]=h,r[s++]=l-1),l++;r[s++]=h+1,r[s++]=h,r[s++]=l-1}},YH={...gm,extension:{...gm.extension,name:"ellipse"}},qH={...gm,extension:{...gm.extension,name:"roundedRectangle"}}}),Roe=G(()=>{});function Poe(t){let e=t.length;if(e<6)return 1;let i=0;for(let n=0,r=t[e-2],s=t[e-1];n<e;n+=2){let a=t[n],o=t[n+1];i+=(a-r)*(o+s),r=a,s=o}return i<0?-1:1}var $H=G(()=>{});function I6(t,e,i,n,r,s,a,o){let l=t-i*r,h=e-n*r,d=t+i*s,p=e+n*s,g,y;a?(g=n,y=-i):(g=-n,y=i);let v=l+g,S=h+y,T=d+g,A=p+y;return o.push(v,S),o.push(T,A),2}function Id(t,e,i,n,r,s,a,o){let l=i-t,h=n-e,d=Math.atan2(l,h),p=Math.atan2(r-t,s-e);o&&d<p?d+=Math.PI*2:!o&&d>p&&(p+=Math.PI*2);let g=d,y=p-d,v=Math.abs(y),S=Math.sqrt(l*l+h*h),T=(15*v*Math.sqrt(S)/Math.PI>>0)+1,A=y/T;if(g+=A,o){a.push(t,e),a.push(i,n);for(let D=1,R=g;D<T;D++,R+=A)a.push(t,e),a.push(t+Math.sin(R)*S,e+Math.cos(R)*S);a.push(t,e),a.push(r,s)}else{a.push(i,n),a.push(t,e);for(let D=1,R=g;D<T;D++,R+=A)a.push(t+Math.sin(R)*S,e+Math.cos(R)*S),a.push(t,e);a.push(r,s),a.push(t,e)}return T*2}function Moe(t,e,i,n,r,s){let a=1e-4;if(t.length===0)return;let o=e,l=o.alignment;if(e.alignment!==.5){let _e=Poe(t);l=(l-.5)*_e+.5}let h=new Rn(t[0],t[1]),d=new Rn(t[t.length-2],t[t.length-1]),p=n,g=Math.abs(h.x-d.x)<a&&Math.abs(h.y-d.y)<a;if(p){t=t.slice(),g&&(t.pop(),t.pop(),d.set(t[t.length-2],t[t.length-1]));let _e=(h.x+d.x)*.5,J=(d.y+h.y)*.5;t.unshift(_e,J),t.push(_e,J)}let y=r,v=t.length/2,S=t.length,T=y.length/2,A=o.width/2,D=A*A,R=o.miterLimit*o.miterLimit,B=t[0],z=t[1],L=t[2],H=t[3],te=0,j=0,O=-(z-H),q=B-L,re=0,ae=0,fe=Math.sqrt(O*O+q*q);O/=fe,q/=fe,O*=A,q*=A;let Te=l,$=(1-Te)*2,se=Te*2;p||(o.cap==="round"?S+=Id(B-O*($-se)*.5,z-q*($-se)*.5,B-O*$,z-q*$,B+O*se,z+q*se,y,!0)+2:o.cap==="square"&&(S+=I6(B,z,O,q,$,se,!0,y))),y.push(B-O*$,z-q*$),y.push(B+O*se,z+q*se);for(let _e=1;_e<v-1;++_e){B=t[(_e-1)*2],z=t[(_e-1)*2+1],L=t[_e*2],H=t[_e*2+1],te=t[(_e+1)*2],j=t[(_e+1)*2+1],O=-(z-H),q=B-L,fe=Math.sqrt(O*O+q*q),O/=fe,q/=fe,O*=A,q*=A,re=-(H-j),ae=L-te,fe=Math.sqrt(re*re+ae*ae),re/=fe,ae/=fe,re*=A,ae*=A;let J=L-B,ie=z-H,be=L-te,ee=j-H,Ge=J*be+ie*ee,Ve=ie*be-ee*J,Ye=Ve<0;if(Math.abs(Ve)<.001*Math.abs(Ge)){y.push(L-O*$,H-q*$),y.push(L+O*se,H+q*se),Ge>=0&&(o.join==="round"?S+=Id(L,H,L-O*$,H-q*$,L-re*$,H-ae*$,y,!1)+4:S+=2,y.push(L-re*se,H-ae*se),y.push(L+re*$,H+ae*$));continue}let lt=(-O+B)*(-q+H)-(-O+L)*(-q+z),pt=(-re+te)*(-ae+H)-(-re+L)*(-ae+j),tt=(J*pt-be*lt)/Ve,$t=(ee*lt-ie*pt)/Ve,li=(tt-L)*(tt-L)+($t-H)*($t-H),Rt=L+(tt-L)*$,Qt=H+($t-H)*$,Bt=L-(tt-L)*se,Nt=H-($t-H)*se,fi=Math.min(J*J+ie*ie,be*be+ee*ee),Si=Ye?$:se,Cn=fi+Si*Si*D;li<=Cn?o.join==="bevel"||li/D>R?(Ye?(y.push(Rt,Qt),y.push(L+O*se,H+q*se),y.push(Rt,Qt),y.push(L+re*se,H+ae*se)):(y.push(L-O*$,H-q*$),y.push(Bt,Nt),y.push(L-re*$,H-ae*$),y.push(Bt,Nt)),S+=2):o.join==="round"?Ye?(y.push(Rt,Qt),y.push(L+O*se,H+q*se),S+=Id(L,H,L+O*se,H+q*se,L+re*se,H+ae*se,y,!0)+4,y.push(Rt,Qt),y.push(L+re*se,H+ae*se)):(y.push(L-O*$,H-q*$),y.push(Bt,Nt),S+=Id(L,H,L-O*$,H-q*$,L-re*$,H-ae*$,y,!1)+4,y.push(L-re*$,H-ae*$),y.push(Bt,Nt)):(y.push(Rt,Qt),y.push(Bt,Nt)):(y.push(L-O*$,H-q*$),y.push(L+O*se,H+q*se),o.join==="round"?Ye?S+=Id(L,H,L+O*se,H+q*se,L+re*se,H+ae*se,y,!0)+2:S+=Id(L,H,L-O*$,H-q*$,L-re*$,H-ae*$,y,!1)+2:o.join==="miter"&&li/D<=R&&(Ye?(y.push(Bt,Nt),y.push(Bt,Nt)):(y.push(Rt,Qt),y.push(Rt,Qt)),S+=2),y.push(L-re*$,H-ae*$),y.push(L+re*se,H+ae*se),S+=2)}B=t[(v-2)*2],z=t[(v-2)*2+1],L=t[(v-1)*2],H=t[(v-1)*2+1],O=-(z-H),q=B-L,fe=Math.sqrt(O*O+q*q),O/=fe,q/=fe,O*=A,q*=A,y.push(L-O*$,H-q*$),y.push(L+O*se,H+q*se),p||(o.cap==="round"?S+=Id(L-O*($-se)*.5,H-q*($-se)*.5,L-O*$,H-q*$,L+O*se,H+q*se,y,!1)+2:o.cap==="square"&&(S+=I6(L,H,O,q,$,se,!1,y)));let we=1e-4*1e-4;for(let _e=T;_e<S+T-2;++_e)B=y[_e*2],z=y[_e*2+1],L=y[(_e+1)*2],H=y[(_e+1)*2+1],te=y[(_e+2)*2],j=y[(_e+2)*2+1],!(Math.abs(B*(H-j)+L*(j-z)+te*(z-H))<we)&&s.push(_e,_e+1,_e+2)}var KH=G(()=>{Ga(),$H()});function Boe(t,e,i,n){let r=1e-4;if(t.length===0)return;let s=t[0],a=t[1],o=t[t.length-2],l=t[t.length-1],h=e||Math.abs(s-o)<r&&Math.abs(a-l)<r,d=i,p=t.length/2,g=d.length/2;for(let y=0;y<p;y++)d.push(t[y*2]),d.push(t[y*2+1]);for(let y=0;y<p-1;y++)n.push(g+y,g+y+1);h&&n.push(g+p-1,g)}var QH=G(()=>{});function L6(t,e,i=2){let n=e&&e.length,r=n?e[0]*i:t.length,s=ZH(t,0,r,i,!0),a=[];if(!s||s.next===s.prev)return a;let o,l,h;if(n&&(s=Loe(t,e,s,i)),t.length>80*i){o=t[0],l=t[1];let d=o,p=l;for(let g=i;g<r;g+=i){let y=t[g],v=t[g+1];y<o&&(o=y),v<l&&(l=v),y>d&&(d=y),v>p&&(p=v)}h=Math.max(d-o,p-l),h=h!==0?32767/h:0}return Tx(s,a,i,o,l,h,0),a}function ZH(t,e,i,n,r){let s;if(r===Woe(t,e,i,n)>0)for(let a=e;a<i;a+=n)s=N6(a/n|0,t[a],t[a+1],s);else for(let a=i-n;a>=e;a-=n)s=N6(a/n|0,t[a],t[a+1],s);return s&&Zm(s,s.next)&&(Sx(s),s=s.next),s}function gf(t,e){if(!t)return t;e||(e=t);let i=t,n;do if(n=!1,!i.steiner&&(Zm(i,i.next)||Vn(i.prev,i,i.next)===0)){if(Sx(i),i=e=i.prev,i===i.next)break;n=!0}else i=i.next;while(n||i!==e);return e}function Tx(t,e,i,n,r,s,a){if(!t)return;!a&&s&&zoe(t,n,r,s);let o=t;for(;t.prev!==t.next;){let l=t.prev,h=t.next;if(s?Ooe(t,n,r,s):koe(t)){e.push(l.i,t.i,h.i),Sx(t),t=h.next,o=h.next;continue}if(t=h,t===o){a?a===1?(t=Foe(gf(t),e),Tx(t,e,i,n,r,s,2)):a===2&&Ioe(t,e,i,n,r,s):Tx(gf(t),e,i,n,r,s,1);break}}}function koe(t){let e=t.prev,i=t,n=t.next;if(Vn(e,i,n)>=0)return!1;let r=e.x,s=i.x,a=n.x,o=e.y,l=i.y,h=n.y,d=Math.min(r,s,a),p=Math.min(o,l,h),g=Math.max(r,s,a),y=Math.max(o,l,h),v=n.next;for(;v!==e;){if(v.x>=d&&v.x<=g&&v.y>=p&&v.y<=y&&Oy(r,o,s,l,a,h,v.x,v.y)&&Vn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Ooe(t,e,i,n){let r=t.prev,s=t,a=t.next;if(Vn(r,s,a)>=0)return!1;let o=r.x,l=s.x,h=a.x,d=r.y,p=s.y,g=a.y,y=Math.min(o,l,h),v=Math.min(d,p,g),S=Math.max(o,l,h),T=Math.max(d,p,g),A=z3(y,v,e,i,n),D=z3(S,T,e,i,n),R=t.prevZ,B=t.nextZ;for(;R&&R.z>=A&&B&&B.z<=D;){if(R.x>=y&&R.x<=S&&R.y>=v&&R.y<=T&&R!==r&&R!==a&&Oy(o,d,l,p,h,g,R.x,R.y)&&Vn(R.prev,R,R.next)>=0||(R=R.prevZ,B.x>=y&&B.x<=S&&B.y>=v&&B.y<=T&&B!==r&&B!==a&&Oy(o,d,l,p,h,g,B.x,B.y)&&Vn(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;R&&R.z>=A;){if(R.x>=y&&R.x<=S&&R.y>=v&&R.y<=T&&R!==r&&R!==a&&Oy(o,d,l,p,h,g,R.x,R.y)&&Vn(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;B&&B.z<=D;){if(B.x>=y&&B.x<=S&&B.y>=v&&B.y<=T&&B!==r&&B!==a&&Oy(o,d,l,p,h,g,B.x,B.y)&&Vn(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Foe(t,e){let i=t;do{let n=i.prev,r=i.next.next;!Zm(n,r)&&ez(n,i,i.next,r)&&Ex(n,r)&&Ex(r,n)&&(e.push(n.i,i.i,r.i),Sx(i),Sx(i.next),i=t=r),i=i.next}while(i!==t);return gf(i)}function Ioe(t,e,i,n,r,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Xoe(a,o)){let l=tz(a,o);a=gf(a,a.next),l=gf(l,l.next),Tx(a,e,i,n,r,s,0),Tx(l,e,i,n,r,s,0);return}o=o.next}a=a.next}while(a!==t)}function Loe(t,e,i,n){let r=[];for(let s=0,a=e.length;s<a;s++){let o=e[s]*n,l=s<a-1?e[s+1]*n:t.length,h=ZH(t,o,l,n,!1);h===h.next&&(h.steiner=!0),r.push(joe(h))}r.sort(Noe);for(let s=0;s<r.length;s++)i=Uoe(r[s],i);return i}function Noe(t,e){let i=t.x-e.x;if(i===0&&(i=t.y-e.y,i===0)){let n=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);i=n-r}return i}function Uoe(t,e){let i=Goe(t,e);if(!i)return e;let n=tz(i,t);return gf(n,n.next),gf(i,i.next)}function Goe(t,e){let i=e,n=t.x,r=t.y,s=-1/0,a;if(Zm(t,i))return i;do{if(Zm(t,i.next))return i.next;if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){let p=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(p<=n&&p>s&&(s=p,a=i.x<i.next.x?i:i.next,p===n))return a}i=i.next}while(i!==e);if(!a)return null;let o=a,l=a.x,h=a.y,d=1/0;i=a;do{if(n>=i.x&&i.x>=l&&n!==i.x&&JH(r<h?n:s,r,l,h,r<h?s:n,r,i.x,i.y)){let p=Math.abs(r-i.y)/(n-i.x);Ex(i,t)&&(p<d||p===d&&(i.x>a.x||i.x===a.x&&Hoe(a,i)))&&(a=i,d=p)}i=i.next}while(i!==o);return a}function Hoe(t,e){return Vn(t.prev,t,e.prev)<0&&Vn(e.next,t,t.next)<0}function zoe(t,e,i,n){let r=t;do r.z===0&&(r.z=z3(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Voe(r)}function Voe(t){let e,i=1;do{let n=t,r;t=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let h=0;h<i&&(o++,a=a.nextZ,!!a);h++);let l=i;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=a}s.nextZ=null,i*=2}while(e>1);return t}function z3(t,e,i,n,r){return t=(t-i)*r|0,e=(e-n)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function joe(t){let e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t);return i}function JH(t,e,i,n,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(i-a)*(e-o)&&(i-a)*(s-o)>=(r-a)*(n-o)}function Oy(t,e,i,n,r,s,a,o){return!(t===a&&e===o)&&JH(t,e,i,n,r,s,a,o)}function Xoe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Yoe(t,e)&&(Ex(t,e)&&Ex(e,t)&&qoe(t,e)&&(Vn(t.prev,t,e.prev)||Vn(t,e.prev,e))||Zm(t,e)&&Vn(t.prev,t,t.next)>0&&Vn(e.prev,e,e.next)>0)}function Vn(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Zm(t,e){return t.x===e.x&&t.y===e.y}function ez(t,e,i,n){let r=a1(Vn(t,e,i)),s=a1(Vn(t,e,n)),a=a1(Vn(i,n,t)),o=a1(Vn(i,n,e));return!!(r!==s&&a!==o||r===0&&s1(t,i,e)||s===0&&s1(t,n,e)||a===0&&s1(i,t,n)||o===0&&s1(i,e,n))}function s1(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function a1(t){return t>0?1:t<0?-1:0}function Yoe(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ez(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function Ex(t,e){return Vn(t.prev,t,t.next)<0?Vn(t,e,t.next)>=0&&Vn(t,t.prev,e)>=0:Vn(t,e,t.prev)<0||Vn(t,t.next,e)<0}function qoe(t,e){let i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==t);return n}function tz(t,e){let i=V3(t.i,t.x,t.y),n=V3(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function N6(t,e,i,n){let r=V3(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Sx(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function V3(t,e,i){return{i:t,x:e,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Woe(t,e,i,n){let r=0;for(let s=e,a=i-n;s<i;s+=n)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}var $oe=G(()=>{}),iz,nz=G(()=>{$oe(),Cs(),iz=L6.default||L6});function rz(t,e,i,n,r,s,a){let o=iz(t,e,2);if(!o)return;for(let h=0;h<o.length;h+=3)s[a++]=o[h]+r,s[a++]=o[h+1]+r,s[a++]=o[h+2]+r;let l=r*n;for(let h=0;h<t.length;h+=2)i[l]=t[h],i[l+1]=t[h+1],l+=n}var dk=G(()=>{nz()}),U6,sz,az=G(()=>{Ae(),dk(),U6=[],sz={extension:{type:ge.ShapeBuilder,name:"polygon"},build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return!0},triangulate(t,e,i,n,r,s){rz(t,U6,e,i,n,r,s)}}}),oz,uz=G(()=>{Ae(),oz={extension:{type:ge.ShapeBuilder,name:"rectangle"},build(t,e){let i=t,n=i.x,r=i.y,s=i.width,a=i.height;return s>0&&a>0?(e[0]=n,e[1]=r,e[2]=n+s,e[3]=r,e[4]=n+s,e[5]=r+a,e[6]=n,e[7]=r+a,!0):!1},triangulate(t,e,i,n,r,s){let a=0;n*=i,e[n+a]=t[0],e[n+a+1]=t[1],a+=i,e[n+a]=t[2],e[n+a+1]=t[3],a+=i,e[n+a]=t[6],e[n+a+1]=t[7],a+=i,e[n+a]=t[4],e[n+a+1]=t[5],a+=i;let o=n/i;r[s++]=o,r[s++]=o+1,r[s++]=o+2,r[s++]=o+1,r[s++]=o+3,r[s++]=o+2}}}),lz,cz=G(()=>{Ae(),lz={extension:{type:ge.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0},triangulate(t,e,i,n,r,s){let a=0;n*=i,e[n+a]=t[0],e[n+a+1]=t[1],a+=i,e[n+a]=t[2],e[n+a+1]=t[3],a+=i,e[n+a]=t[4],e[n+a+1]=t[5];let o=n/i;r[s++]=o,r[s++]=o+1,r[s++]=o+2}}});function G6(t,e){for(let i=0;i<e.length;i++){let n=e[i];t.addColorStop(n.offset,n.color)}}function H6(t,e){let i=si.get().createCanvas(t,e),n=i.getContext("2d");return{canvas:i,context:n}}function Koe(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(xt("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??So.defaultLinearOptions.textureSize}),e}var dw,o1,So,yg=G(()=>{Lr(),Li(),hi(),mg(),gi(),Nr(),Mi(),Df(),dw=[{offset:0,color:"white"},{offset:1,color:"black"}],o1=class j3{constructor(...e){this.uid=Sn("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let i=Koe(e);i={...i.type==="radial"?j3.defaultRadialOptions:j3.defaultLinearOptions,...Qm(i)},this._textureSize=i.textureSize,this._wrapMode=i.wrapMode,i.type==="radial"?(this.center=i.center,this.outerCenter=i.outerCenter??this.center,this.innerRadius=i.innerRadius,this.outerRadius=i.outerRadius,this.scale=i.scale,this.rotation=i.rotation):(this.start=i.start,this.end=i.end),this.textureSpace=i.textureSpace,this.type=i.type,i.colorStops.forEach(n=>{this.addColorStop(n.offset,n.color)})}addColorStop(e,i){return this.colorStops.push({offset:e,color:An.shared.setValue(i).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:i}=this.start,{x:n,y:r}=this.end,s=n-e,a=r-i,o=s<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(s<0){let T=e;e=n,n=T,s*=-1}if(a<0){let T=i;i=r,r=T,a*=-1}}let l=this.colorStops.length?this.colorStops:dw,h=this._textureSize,{canvas:d,context:p}=H6(h,1),g=o?p.createLinearGradient(this._textureSize,0,0,0):p.createLinearGradient(0,0,this._textureSize,0);G6(g,l),p.fillStyle=g,p.fillRect(0,0,h,1),this.texture=new st({source:new Mh({resource:d,addressMode:this._wrapMode})});let y=Math.sqrt(s*s+a*a),v=Math.atan2(a,s),S=new Tt;S.scale(y/h,1),S.rotate(v),S.translate(e,i),this.textureSpace==="local"&&S.scale(h,h),this.transform=S}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;let e=this.colorStops.length?this.colorStops:dw,i=this._textureSize,{canvas:n,context:r}=H6(i,i),{x:s,y:a}=this.center,{x:o,y:l}=this.outerCenter,h=this.innerRadius,d=this.outerRadius,p=o-d,g=l-d,y=i/(d*2),v=(s-p)*y,S=(a-g)*y,T=r.createRadialGradient(v,S,h*y,(o-p)*y,(l-g)*y,d*y);G6(T,e),r.fillStyle=e[e.length-1].color,r.fillRect(0,0,i,i),r.fillStyle=T,r.translate(v,S),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-v,-S),r.fillRect(0,0,i,i),this.texture=new st({source:new Mh({resource:n,addressMode:this._wrapMode})});let A=new Tt;A.scale(1/y,1/y),A.translate(p,g),this.textureSpace==="local"&&A.scale(i,i),this.transform=A}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}},o1.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"},o1.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"},So=o1});function Qoe(t,e,i,n){let r=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){let a=i.getBounds(dz);e.width&&a.pad(e.width);let{x:o,y:l}=a,h=1/a.width,d=1/a.height,p=-o*h,g=-l*d,y=r.a,v=r.b,S=r.c,T=r.d;r.a*=h,r.b*=h,r.c*=d,r.d*=d,r.tx=p*y+g*S+r.tx,r.ty=p*v+g*T+r.ty}else r.translate(e.texture.frame.x,e.texture.frame.y),r.scale(1/e.texture.source.width,1/e.texture.source.height);let s=e.texture.source.style;return!(e.fill instanceof So)&&s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update()),n&&r.append(hz.copyFrom(n).invert()),r}var hz,dz,fz=G(()=>{hi(),wr(),yg(),hz=new Tt,dz=new mn});function Zoe(t,e){let{geometryData:i,batches:n}=e;n.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let r=0;r<t.instructions.length;r++){let s=t.instructions[r];if(s.action==="texture")Joe(s.data,n,i);else if(s.action==="fill"||s.action==="stroke"){let a=s.action==="stroke",o=s.data.path.shapePath,l=s.data.style,h=s.data.hole;a&&h&&z6(h.shapePath,l,!0,n,i),h&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),z6(o,l,a,n,i)}}}function Joe(t,e,i){let n=[],r=Ax.rectangle,s=pz;s.x=t.dx,s.y=t.dy,s.width=t.dw,s.height=t.dh;let a=t.transform;if(!r.build(s,n))return;let{vertices:o,uvs:l,indices:h}=i,d=h.length,p=o.length/2;a&&XH(n,a),r.triangulate(n,o,2,p,h,d);let g=t.image,y=g.uvs;l.push(y.x0,y.y0,y.x1,y.y1,y.x3,y.y3,y.x2,y.y2);let v=cr.get(fS);v.indexOffset=d,v.indexSize=h.length-d,v.attributeOffset=p,v.attributeSize=o.length/2-p,v.baseColor=t.style,v.alpha=t.alpha,v.texture=g,v.geometryData=i,e.push(v)}function z6(t,e,i,n,r){let{vertices:s,uvs:a,indices:o}=r;t.shapePrimitives.forEach(({shape:l,transform:h,holes:d})=>{let p=[],g=Ax[l.type];if(!g.build(l,p))return;let y=o.length,v=s.length/2,S="triangle-list";if(h&&XH(p,h),i){let R=l.closePath??!0,B=e;B.pixelLine?(Boe(p,R,s,o),S="line-list"):Moe(p,B,!1,R,s,o)}else if(d){let R=[],B=p.slice();eue(d).forEach(z=>{R.push(B.length/2),B.push(...z)}),rz(B,R,s,2,v,o,y)}else g.triangulate(p,s,2,v,o,y);let T=a.length/2,A=e.texture;if(A!==st.WHITE){let R=Qoe(mz,e,l,h);woe(s,2,v,a,T,2,s.length/2-v,R)}else Doe(a,T,2,s.length/2-v);let D=cr.get(fS);D.indexOffset=y,D.indexSize=o.length-y,D.attributeOffset=v,D.attributeSize=s.length/2-v,D.baseColor=e.color,D.alpha=e.alpha,D.texture=A,D.geometryData=r,D.topology=S,n.push(D)})}function eue(t){let e=[];for(let i=0;i<t.length;i++){let n=t[i].shape,r=[];Ax[n.type].build(n,r)&&e.push(r)}return e}var Ax,pz,mz,fk=G(()=>{Ae(),hi(),wr(),lk(),ck(),gi(),bl(),hk(),WH(),KH(),QH(),az(),uz(),cz(),fz(),dk(),Ax={},Lt.handleByMap(ge.ShapeBuilder,Ax),Lt.add(oz,sz,lz,gm,YH,qH),pz=new mn,mz=new Tt}),V6,j6,u1,pS,mS=G(()=>{Ae(),lS(),uk(),OB(),Mi(),bl(),fk(),V6=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},j6=class{constructor(){this.instructions=new kB}init(t){this.batcher=new hE({maxTextures:t}),this.instructions.reset()}get geometry(){return xt(T9,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}},u1=class X3{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){X3.defaultOptions.bezierSmoothness=e?.bezierSmoothness??X3.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let i=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){i?this._cleanGraphicsContextData(e):i=this._initContext(e),Zoe(e,i);let n=e.batchMode;e.customShader||n==="no-batch"?i.isBatchable=!1:n==="auto"?i.isBatchable=i.geometryData.vertices.length<400:i.isBatchable=!0,e.dirty=!1}return i}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){let i=cr.get(j6,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:n,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,a=r.indices.length;for(let d=0;d<n.length;d++)n[d].applyTransform=!1;let o=i.batcher;o.ensureAttributeBuffer(s),o.ensureIndexBuffer(a),o.begin();for(let d=0;d<n.length;d++){let p=n[d];o.add(p)}o.finish(i.instructions);let l=o.geometry;l.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),l.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);let h=o.batches;for(let d=0;d<h.length;d++){let p=h[d];p.bindGroup=JB(p.textures.textures,p.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=i,i}_initContext(e){let i=new V6;return i.context=e,this._gpuContextHash[e.uid]=i,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){let i=this._gpuContextHash[e.uid];i.isBatchable||this._graphicsDataContextHash[e.uid]&&(cr.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),i.batches&&i.batches.forEach(n=>{cr.return(n)})}destroy(){for(let e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}},u1.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"graphicsContext"},u1.defaultOptions={bezierSmoothness:.5},pS=u1}),X6,l1,c1,h1,d1,f1,p1,m1,Ia,Po=G(()=>{X6={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},l1=0,c1=1,h1=2,d1=3,f1=4,p1=5,m1=class gz{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<l1)}set blend(e){!!(this.data&1<<l1)!==e&&(this.data^=1<<l1)}get offsets(){return!!(this.data&1<<c1)}set offsets(e){!!(this.data&1<<c1)!==e&&(this.data^=1<<c1)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<h1)}set culling(e){!!(this.data&1<<h1)!==e&&(this.data^=1<<h1)}get depthTest(){return!!(this.data&1<<d1)}set depthTest(e){!!(this.data&1<<d1)!==e&&(this.data^=1<<d1)}get depthMask(){return!!(this.data&1<<p1)}set depthMask(e){!!(this.data&1<<p1)!==e&&(this.data^=1<<p1)}get clockwiseFrontFace(){return!!(this.data&1<<f1)}set clockwiseFrontFace(e){!!(this.data&1<<f1)!==e&&(this.data^=1<<f1)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=X6[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let e=new gz;return e.depthTest=!1,e.blend=!0,e}},m1.default2d=m1.for2d(),Ia=m1});function o_(t,e,i){let n=(t>>24&255)/255;e[i++]=(t&255)/255*n,e[i++]=(t>>8&255)/255*n,e[i++]=(t>>16&255)/255*n,e[i++]=n}var xg=G(()=>{}),Y6,Y3,bz=G(()=>{Ae(),Po(),bl(),xg(),hk(),Y6=class{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(t=>{cr.return(t)}),this.batches.length=0}},Y3=class{constructor(t,e){this.state=Ia.for2d(),this.renderer=t,this._adaptor=e,this.renderer.runners.contextChange.add(this)}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(t){let e=t.context,i=!!t._gpuData,n=this.renderer.graphicsContext.updateGpuContext(e);return!!(n.isBatchable||i!==n.isBatchable)}addRenderable(t,e){let i=this.renderer.graphicsContext.updateGpuContext(t.context);t.didViewUpdate&&this._rebuild(t),i.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){let e=this._getGpuDataForRenderable(t).batches;for(let i=0;i<e.length;i++){let n=e[i];n._batcher.updateElement(n)}}execute(t){if(!t.isRenderable)return;let e=this.renderer,i=t.context;if(!e.graphicsContext.getGpuContext(i).batches.length)return;let n=i.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;let r=n.resources.localUniforms.uniforms;r.uTransformMatrix=t.groupTransform,r.uRound=e._roundPixels|t._roundPixels,o_(t.groupColorAlpha,r.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){let e=this._getGpuDataForRenderable(t),i=this.renderer.graphicsContext.updateGpuContext(t.context);e.destroy(),i.isBatchable&&this._updateBatchesForRenderable(t,e)}_addToBatcher(t,e){let i=this.renderer.renderPipes.batch,n=this._getGpuDataForRenderable(t).batches;for(let r=0;r<n.length;r++){let s=n[r];i.addToBatch(s,e)}}_getGpuDataForRenderable(t){return t._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(t)}_initGpuDataForRenderable(t){let e=new Y6;return t._gpuData[this.renderer.uid]=e,e}_updateBatchesForRenderable(t,e){let i=t.context,n=this.renderer.graphicsContext.getGpuContext(i),r=this.renderer._roundPixels|t._roundPixels;e.batches=n.batches.map(s=>{let a=cr.get(fS);return s.copyTo(a),a.renderable=t,a.roundPixels=r,a})}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}},Y3.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"graphics"}}),yz=G(()=>{Ae(),mS(),bz(),Lt.add(Y3),Lt.add(pS)}),gS,bS=G(()=>{gS=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(t){this._topology=t}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(t){this.texture!==t&&(this.texture=t,this._textureMatrixUpdateId=-1)}get uvs(){let t=this.geometry.getBuffer("aUV"),e=t.data,i=e,n=this.texture.textureMatrix;return n.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==n._updateID||this._uvUpdateId!==t._updateID)&&((!i||i.length<e.length)&&(i=this._transformedUvs=new Float32Array(e.length)),this._textureMatrixUpdateId=n._updateID,this._uvUpdateId=t._updateID,n.multiplyUvs(e,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}}),fw,q3,xz=G(()=>{Ae(),hi(),Lh(),Dr(),t_(),xg(),bS(),fw=class{destroy(){}},q3=class{constructor(t,e){this.localUniforms=new Fr({uTransformMatrix:{value:new Tt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new rl({0:this.localUniforms}),this.renderer=t,this._adaptor=e,this._adaptor.init()}validateRenderable(t){let e=this._getMeshData(t),i=e.batched,n=t.batched;if(e.batched=n,i!==n)return!0;if(n){let r=t._geometry;if(r.indices.length!==e.indexSize||r.positions.length!==e.vertexSize)return e.indexSize=r.indices.length,e.vertexSize=r.positions.length,!0;let s=this._getBatchableMesh(t);return s.texture.uid!==t._texture.uid&&(s._textureMatrixUpdateId=-1),!s._batcher.checkAndUpdateTexture(s,t._texture)}return!1}addRenderable(t,e){let i=this.renderer.renderPipes.batch,n=this._getMeshData(t);if(t.didViewUpdate&&(n.indexSize=t._geometry.indices?.length,n.vertexSize=t._geometry.positions?.length),n.batched){let r=this._getBatchableMesh(t);r.setTexture(t._texture),r.geometry=t._geometry,i.addToBatch(r,e)}else i.break(e),e.add(t)}updateRenderable(t){if(t.batched){let e=this._getBatchableMesh(t);e.setTexture(t._texture),e.geometry=t._geometry,e._batcher.updateElement(e)}}execute(t){if(!t.isRenderable)return;t.state.blendMode=xx(t.groupBlendMode,t.texture._source);let e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),o_(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){var e,i;return(e=t._gpuData)[i=this.renderer.uid]||(e[i]=new fw),t._gpuData[this.renderer.uid].meshData||this._initMeshData(t)}_initMeshData(t){return t._gpuData[this.renderer.uid].meshData={batched:t.batched,indexSize:0,vertexSize:0},t._gpuData[this.renderer.uid].meshData}_getBatchableMesh(t){var e,i;return(e=t._gpuData)[i=this.renderer.uid]||(e[i]=new fw),t._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(t)}_initBatchableMesh(t){let e=new gS;return e.renderable=t,e.setTexture(t._texture),e.transform=t.groupTransform,e.roundPixels=this.renderer._roundPixels|t._roundPixels,t._gpuData[this.renderer.uid].batchableMesh=e,e}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}},q3.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"mesh"}}),_z=G(()=>{Ae(),xz(),Lt.add(q3)}),vz,Tz=G(()=>{vz=class{execute(t,e){let i=t.state,n=t.renderer,r=e.shader||t.defaultShader;r.resources.uTexture=e.texture._source,r.resources.uniforms=t.localUniforms;let s=n.gl,a=t.getBuffers(e);n.shader.bind(r),n.state.set(i),n.geometry.bind(a.geometry,r.glProgram);let o=a.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;s.drawElements(s.TRIANGLES,e.particleChildren.length*6,o,0)}}});function q6(t,e=null){let i=t*6;if(i>65535?e||(e=new Uint32Array(i)):e||(e=new Uint16Array(i)),e.length!==i)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${i}`);for(let n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}var Ez=G(()=>{});function tue(t){return{dynamicUpdate:W6(t,!0),staticUpdate:W6(t,!1)}}function W6(t,e){let i=[];i.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let n=0;for(let s in t){let a=t[s];if(e!==a.dynamic)continue;i.push(`offset = index + ${n}`),i.push(a.code);let o=Bh(a.format);n+=o.stride/4}i.push(`
            index += stride * 4;
        }
    `),i.unshift(`
        var stride = ${n};
    `);let r=i.join(`
`);return new Function("ps","f32v","u32v",r)}var Sz=G(()=>{If()});function iue(t){let e=[];for(let i in t){let n=t[i];e.push(i,n.code,n.dynamic?"d":"s")}return e.join("_")}var Az,Cz=G(()=>{Nh(),fc(),Ff(),If(),tk(),Ez(),Sz(),Az=class{constructor(t){this._size=0,this._generateParticleUpdateCache={};let e=this._size=t.size??1e3,i=t.properties,n=0,r=0;for(let h in i){let d=i[h],p=Bh(d.format);d.dynamic?r+=p.stride:n+=p.stride}this._dynamicStride=r/4,this._staticStride=n/4,this.staticAttributeBuffer=new nf(e*4*n),this.dynamicAttributeBuffer=new nf(e*4*r),this.indexBuffer=q6(e);let s=new Of,a=0,o=0;this._staticBuffer=new ha({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:Ci.VERTEX|Ci.COPY_DST}),this._dynamicBuffer=new ha({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:Ci.VERTEX|Ci.COPY_DST});for(let h in i){let d=i[h],p=Bh(d.format);d.dynamic?(s.addAttribute(d.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:a*4,format:d.format}),a+=p.size):(s.addAttribute(d.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:o*4,format:d.format}),o+=p.size)}s.addIndex(this.indexBuffer);let l=this.getParticleUpdate(i);this._dynamicUpload=l.dynamicUpdate,this._staticUpload=l.staticUpdate,this.geometry=s}getParticleUpdate(t){let e=iue(t);return this._generateParticleUpdateCache[e]?this._generateParticleUpdateCache[e]:(this._generateParticleUpdateCache[e]=this.generateParticleUpdate(t),this._generateParticleUpdateCache[e])}generateParticleUpdate(t){return tue(t)}update(t,e){t.length>this._size&&(e=!0,this._size=Math.max(t.length,this._size*1.5|0),this.staticAttributeBuffer=new nf(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new nf(this._size*this._dynamicStride*4*4),this.indexBuffer=q6(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let i=this.dynamicAttributeBuffer;if(this._dynamicUpload(t,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,t.length*this._dynamicStride*4,!0),e){let n=this.staticAttributeBuffer;this._staticUpload(t,n.float32View,n.uint32View),this._staticBuffer.setDataWithSize(n.float32View,t.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}}),wz,Dz=G(()=>{wz=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`}),Rz,Pz=G(()=>{Rz=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`}),W3,Mz=G(()=>{W3=`
struct ParticleUniforms {
  uTranslationMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uRound:f32,
  uResolution:vec2<f32>,
};

fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
{
  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

   if(uniforms.uRound == 1.0) {
       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);
   }

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`}),Bz,kz=G(()=>{Lr(),hi(),ga(),Ha(),pu(),gi(),hc(),Dz(),Pz(),Mz(),Bz=class extends fu{constructor(){let t=Do.from({vertex:Rz,fragment:wz}),e=du.from({fragment:{source:W3,entryPoint:"mainFragment"},vertex:{source:W3,entryPoint:"mainVertex"}});super({glProgram:t,gpuProgram:e,resources:{uTexture:st.WHITE.source,uSampler:new lu({}),uniforms:{uTranslationMatrix:{value:new Tt,type:"mat3x3<f32>"},uColor:{value:new An(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}}),pk,mk=G(()=>{hi(),Dr(),t_(),Po(),xg(),Cz(),kz(),pk=class{constructor(t,e){this.state=Ia.for2d(),this.localUniforms=new Fr({uTranslationMatrix:{value:new Tt,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=t,this.adaptor=e,this.defaultShader=new Bz,this.state=Ia.for2d()}validateRenderable(t){return!1}addRenderable(t,e){this.renderer.renderPipes.batch.break(e),e.add(t)}getBuffers(t){return t._gpuData[this.renderer.uid]||this._initBuffer(t)}_initBuffer(t){return t._gpuData[this.renderer.uid]=new Az({size:t.particleChildren.length,properties:t._properties}),t._gpuData[this.renderer.uid]}updateRenderable(t){}execute(t){let e=t.particleChildren;if(e.length===0)return;let i=this.renderer,n=this.getBuffers(t);t.texture||(t.texture=e[0].texture);let r=this.state;n.update(e,t._childrenDirty),t._childrenDirty=!1,r.blendMode=xx(t.blendMode,t.texture._source);let s=this.localUniforms.uniforms,a=s.uTranslationMatrix;t.worldTransform.copyTo(a),a.prepend(i.globalUniforms.globalUniformData.projectionMatrix),s.uResolution=i.globalUniforms.globalUniformData.resolution,s.uRound=i._roundPixels|t._roundPixels,o_(t.groupColorAlpha,s.uColor,0),this.adaptor.execute(this,t)}destroy(){this.renderer=null,this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}}),$3,Oz=G(()=>{Ae(),Tz(),mk(),$3=class extends pk{constructor(t){super(t,new vz)}},$3.extension={type:[ge.WebGLPipes],name:"particle"}}),Fz,Iz=G(()=>{Fz=class{execute(t,e){let i=t.renderer,n=e.shader||t.defaultShader;n.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(t.localUniforms,!0),n.groups[1]=i.texture.getTextureBindGroup(e.texture);let r=t.state,s=t.getBuffers(e);i.encoder.draw({geometry:s.geometry,shader:e.shader||t.defaultShader,state:r,size:e.particleChildren.length*6})}}}),K3,Lz=G(()=>{Ae(),Iz(),mk(),K3=class extends pk{constructor(t){super(t,new Fz)}},K3.extension={type:[ge.WebGPUPipes],name:"particle"}}),Nz=G(()=>{Ae(),Oz(),Lz(),Lt.add($3),Lt.add(K3)});function Q3(t,e){let{texture:i,bounds:n}=t,r=e._style._getFinalPadding();R7(n,e._anchor,i);let s=e._anchor._x*r*2,a=e._anchor._y*r*2;n.minX-=r-s,n.minY-=r-a,n.maxX-=r-s,n.maxY-=r-a}var gk=G(()=>{$B()}),u_,l_=G(()=>{u_=class{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){}}}),Uz,Gz=G(()=>{l_(),Uz=class extends u_{constructor(t){super(),this._renderer=t,t.runners.resolutionChange.add(this)}resolutionChange(){let t=this.renderable;t._autoResolution&&t.onViewUpdate()}destroy(){let{canvasText:t}=this._renderer;t.getReferenceCount(this.currentKey)>0?t.decreaseReferenceCount(this.currentKey):this.texture&&t.returnTexture(this.texture),this._renderer.runners.resolutionChange.remove(this),this._renderer=null}}}),Z3,Hz=G(()=>{Ae(),gk(),Gz(),Z3=class{constructor(t){this._renderer=t}validateRenderable(t){let e=this._getGpuText(t),i=t.styleKey;return e.currentKey!==i?!0:t._didTextUpdate}addRenderable(t,e){let i=this._getGpuText(t);if(t._didTextUpdate){let n=t._autoResolution?this._renderer.resolution:t.resolution;(i.currentKey!==t.styleKey||t.resolution!==n)&&this._updateGpuText(t),t._didTextUpdate=!1,Q3(i,t)}this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._getGpuText(t);e._batcher.updateElement(e)}_updateGpuText(t){let e=this._getGpuText(t);e.texture&&this._renderer.canvasText.decreaseReferenceCount(e.currentKey),t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,e.texture=this._renderer.canvasText.getManagedTexture(t),e.currentKey=t.styleKey}_getGpuText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){let e=new Uz(this._renderer);return e.currentKey="--",e.renderable=t,e.transform=t.groupTransform,e.bounds={minX:0,maxX:1,minY:0,maxY:0},e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}},Z3.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"text"}}),pw,Lf,yS=G(()=>{hi(),Nr(),pw={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},Lf=class{constructor(t,e){this.uid=Sn("fillPattern"),this._tick=0,this.transform=new Tt,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=pw[e].addressModeU,t.source.style.addressModeV=pw[e].addressModeV)}setTransform(t){let e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}}),nue=Oh((t,e)=>{e.exports=r;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function r(o){var l=[];return o.replace(n,function(h,d,p){var g=d.toLowerCase();for(p=a(p),g=="m"&&p.length>2&&(l.push([d].concat(p.splice(0,2))),g="l",d=d=="m"?"l":"L");;){if(p.length==i[g])return p.unshift(d),l.push(p);if(p.length<i[g])throw new Error("malformed path data");l.push([d].concat(p.splice(0,i[g])))}}),l}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(o){var l=o.match(s);return l?l.map(Number):[]}});function rue(t,e){let i=(0,zz.default)(t),n=[],r=null,s=0,a=0;for(let o=0;o<i.length;o++){let l=i[o],h=l[0],d=l;switch(h){case"M":s=d[1],a=d[2],e.moveTo(s,a);break;case"m":s+=d[1],a+=d[2],e.moveTo(s,a);break;case"H":s=d[1],e.lineTo(s,a);break;case"h":s+=d[1],e.lineTo(s,a);break;case"V":a=d[1],e.lineTo(s,a);break;case"v":a+=d[1],e.lineTo(s,a);break;case"L":s=d[1],a=d[2],e.lineTo(s,a);break;case"l":s+=d[1],a+=d[2],e.lineTo(s,a);break;case"C":s=d[5],a=d[6],e.bezierCurveTo(d[1],d[2],d[3],d[4],s,a);break;case"c":e.bezierCurveTo(s+d[1],a+d[2],s+d[3],a+d[4],s+d[5],a+d[6]),s+=d[5],a+=d[6];break;case"S":s=d[3],a=d[4],e.bezierCurveToShort(d[1],d[2],s,a);break;case"s":e.bezierCurveToShort(s+d[1],a+d[2],s+d[3],a+d[4]),s+=d[3],a+=d[4];break;case"Q":s=d[3],a=d[4],e.quadraticCurveTo(d[1],d[2],s,a);break;case"q":e.quadraticCurveTo(s+d[1],a+d[2],s+d[3],a+d[4]),s+=d[3],a+=d[4];break;case"T":s=d[1],a=d[2],e.quadraticCurveToShort(s,a);break;case"t":s+=d[1],a+=d[2],e.quadraticCurveToShort(s,a);break;case"A":s=d[6],a=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,a);break;case"a":s+=d[6],a+=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,a);break;case"Z":case"z":e.closePath(),n.length>0&&(r=n.pop(),r?(s=r.startX,a=r.startY):(s=0,a=0)),r=null;break;default:Mt(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&r===null&&(r={startX:s,startY:a},n.push(r))}return e}var zz,Vz=G(()=>{zz=SB(nue()),Bi()}),jz,Xz=G(()=>{wr(),jz=class Yz{constructor(e=0,i=0,n=0){this.type="circle",this.x=e,this.y=i,this.radius=n}clone(){return new Yz(this.x,this.y,this.radius)}contains(e,i){if(this.radius<=0)return!1;let n=this.radius*this.radius,r=this.x-e,s=this.y-i;return r*=r,s*=s,r+s<=n}strokeContains(e,i,n,r=.5){if(this.radius===0)return!1;let s=this.x-e,a=this.y-i,o=this.radius,l=(1-r)*n,h=Math.sqrt(s*s+a*a);return h<=o+l&&h>o-(n-l)}getBounds(e){return e||(e=new mn),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}}),qz,Wz=G(()=>{wr(),qz=class $z{constructor(e=0,i=0,n=0,r=0){this.type="ellipse",this.x=e,this.y=i,this.halfWidth=n,this.halfHeight=r}clone(){return new $z(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,i){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,r=(i-this.y)/this.halfHeight;return n*=n,r*=r,n+r<=1}strokeContains(e,i,n,r=.5){let{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;let o=n*(1-r),l=n-o,h=s-l,d=a-l,p=s+o,g=a+o,y=e-this.x,v=i-this.y,S=y*y/(h*h)+v*v/(d*d),T=y*y/(p*p)+v*v/(g*g);return S>1&&T<=1}getBounds(e){return e||(e=new mn),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}});function sue(t,e,i,n,r,s){let a=t-i,o=e-n,l=r-i,h=s-n,d=a*l+o*h,p=l*l+h*h,g=-1;p!==0&&(g=d/p);let y,v;g<0?(y=i,v=n):g>1?(y=r,v=s):(y=i+g*l,v=n+g*h);let S=t-y,T=e-v;return S*S+T*T}var bk=G(()=>{}),aue,oue,ST,Kz=G(()=>{Mi(),bk(),wr(),ST=class Qz{constructor(...e){this.type="polygon";let i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){let n=[];for(let r=0,s=i.length;r<s;r++)n.push(i[r].x,i[r].y);i=n}this.points=i,this.closePath=!0}isClockwise(){let e=0,i=this.points,n=i.length;for(let r=0;r<n;r+=2){let s=i[r],a=i[r+1],o=i[(r+2)%n],l=i[(r+3)%n];e+=(o-s)*(l+a)}return e<0}containsPolygon(e){let i=this.getBounds(aue),n=e.getBounds(oue);if(!i.containsRect(n))return!1;let r=e.points;for(let s=0;s<r.length;s+=2){let a=r[s],o=r[s+1];if(!this.contains(a,o))return!1}return!0}clone(){let e=this.points.slice(),i=new Qz(e);return i.closePath=this.closePath,i}contains(e,i){let n=!1,r=this.points.length/2;for(let s=0,a=r-1;s<r;a=s++){let o=this.points[s*2],l=this.points[s*2+1],h=this.points[a*2],d=this.points[a*2+1];l>i!=d>i&&e<(h-o)*((i-l)/(d-l))+o&&(n=!n)}return n}strokeContains(e,i,n,r=.5){let s=n*n,a=s*(1-r),o=s-a,{points:l}=this,h=l.length-(this.closePath?0:2);for(let d=0;d<h;d+=2){let p=l[d],g=l[d+1],y=l[(d+2)%l.length],v=l[(d+3)%l.length],S=sue(e,i,p,g,y,v),T=Math.sign((y-p)*(i-g)-(v-g)*(e-p));if(S<=(T<0?o:a))return!0}return!1}getBounds(e){e||(e=new mn);let i=this.points,n=1/0,r=-1/0,s=1/0,a=-1/0;for(let o=0,l=i.length;o<l;o+=2){let h=i[o],d=i[o+1];n=h<n?h:n,r=h>r?h:r,s=d<s?d:s,a=d>a?d:a}return e.x=n,e.width=r-n,e.y=s,e.height=a-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,i)=>`${e}, ${i}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return xt("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return xt("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}}),Jb,Zz,Jz=G(()=>{wr(),Jb=(t,e,i,n,r,s,a)=>{let o=t-i,l=e-n,h=Math.sqrt(o*o+l*l);return h>=r-s&&h<=r+a},Zz=class eV{constructor(e=0,i=0,n=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=i,this.width=n,this.height=r,this.radius=s}getBounds(e){return e||(e=new mn),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new eV(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){let n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+n&&i<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let r=e-(this.x+n),s=i-(this.y+n),a=n*n;if(r*r+s*s<=a||(r=e-(this.x+this.width-n),r*r+s*s<=a)||(s=i-(this.y+this.height-n),r*r+s*s<=a)||(r=e-(this.x+n),r*r+s*s<=a))return!0}return!1}strokeContains(e,i,n,r=.5){let{x:s,y:a,width:o,height:l,radius:h}=this,d=n*(1-r),p=n-d,g=s+h,y=a+h,v=o-h*2,S=l-h*2,T=s+o,A=a+l;return(e>=s-d&&e<=s+p||e>=T-p&&e<=T+d)&&i>=y&&i<=y+S||(i>=a-d&&i<=a+p||i>=A-p&&i<=A+d)&&e>=g&&e<=g+v?!0:e<g&&i<y&&Jb(e,i,g,y,h,p,d)||e>T-h&&i<y&&Jb(e,i,T-h,y,h,p,d)||e>T-h&&i>A-h&&Jb(e,i,T-h,A-h,h,p,d)||e<g&&i>A-h&&Jb(e,i,g,A-h,h,p,d)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}});function tV(t,e,i,n,r,s,a,o,l,h){let d=Math.min(.99,Math.max(0,h??pS.defaultOptions.bezierSmoothness)),p=(nV-d)/1;return p*=p,uue(e,i,n,r,s,a,o,l,t,p),t}function uue(t,e,i,n,r,s,a,o,l,h){J3(t,e,i,n,r,s,a,o,l,h,0),l.push(a,o)}function J3(t,e,i,n,r,s,a,o,l,h,d){if(d>iV)return;let p=Math.PI,g=(t+i)/2,y=(e+n)/2,v=(i+r)/2,S=(n+s)/2,T=(r+a)/2,A=(s+o)/2,D=(g+v)/2,R=(y+S)/2,B=(v+T)/2,z=(S+A)/2,L=(D+B)/2,H=(R+z)/2;if(d>0){let te=a-t,j=o-e,O=Math.abs((i-a)*j-(n-o)*te),q=Math.abs((r-a)*j-(s-o)*te),re,ae;if(O>Fy&&q>Fy){if((O+q)*(O+q)<=h*(te*te+j*j)){if(jd<AT){l.push(L,H);return}let fe=Math.atan2(s-n,r-i);if(re=Math.abs(fe-Math.atan2(n-e,i-t)),ae=Math.abs(Math.atan2(o-s,a-r)-fe),re>=p&&(re=2*p-re),ae>=p&&(ae=2*p-ae),re+ae<jd){l.push(L,H);return}if(oh!==0){if(re>oh){l.push(i,n);return}if(ae>oh){l.push(r,s);return}}}}else if(O>Fy){if(O*O<=h*(te*te+j*j)){if(jd<AT){l.push(L,H);return}if(re=Math.abs(Math.atan2(s-n,r-i)-Math.atan2(n-e,i-t)),re>=p&&(re=2*p-re),re<jd){l.push(i,n),l.push(r,s);return}if(oh!==0&&re>oh){l.push(i,n);return}}}else if(q>Fy){if(q*q<=h*(te*te+j*j)){if(jd<AT){l.push(L,H);return}if(re=Math.abs(Math.atan2(o-s,a-r)-Math.atan2(s-n,r-i)),re>=p&&(re=2*p-re),re<jd){l.push(i,n),l.push(r,s);return}if(oh!==0&&re>oh){l.push(r,s);return}}}else if(te=L-(t+a)/2,j=H-(e+o)/2,te*te+j*j<=h){l.push(L,H);return}}J3(t,e,g,y,D,R,L,H,l,h,d+1),J3(L,H,B,z,T,A,a,o,l,h,d+1)}var iV,Fy,nV,AT,jd,oh,yk=G(()=>{mS(),iV=8,Fy=11920929e-14,nV=1,AT=.01,jd=0,oh=0});function lue(t,e,i,n,r,s,a,o){let l=Math.min(.99,Math.max(0,o??pS.defaultOptions.bezierSmoothness)),h=(aV-l)/1;return h*=h,cue(e,i,n,r,s,a,t,h),t}function cue(t,e,i,n,r,s,a,o){eR(a,t,e,i,n,r,s,o,0),a.push(r,s)}function eR(t,e,i,n,r,s,a,o,l){if(l>rV)return;let h=Math.PI,d=(e+n)/2,p=(i+r)/2,g=(n+s)/2,y=(r+a)/2,v=(d+g)/2,S=(p+y)/2,T=s-e,A=a-i,D=Math.abs((n-s)*A-(r-a)*T);if(D>sV){if(D*D<=o*(T*T+A*A)){if(tR<oV){t.push(v,S);return}let R=Math.abs(Math.atan2(a-r,s-n)-Math.atan2(r-i,n-e));if(R>=h&&(R=2*h-R),R<tR){t.push(v,S);return}}}else if(T=v-(e+s)/2,A=S-(i+a)/2,T*T+A*A<=o){t.push(v,S);return}eR(t,e,i,d,p,v,S,o,l+1),eR(t,v,S,g,y,s,a,o,l+1)}var rV,sV,aV,oV,tR,uV=G(()=>{mS(),rV=8,sV=11920929e-14,aV=1,oV=.01,tR=0});function lV(t,e,i,n,r,s,a,o){let l=Math.abs(r-s);(!a&&r>s||a&&s>r)&&(l=2*Math.PI-l),o||(o=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(l/Math.PI)))),o=Math.max(o,3);let h=l/o,d=r;h*=a?-1:1;for(let p=0;p<o+1;p++){let g=Math.cos(d),y=Math.sin(d),v=e+g*n,S=i+y*n;t.push(v,S),d+=h}}var xk=G(()=>{});function hue(t,e,i,n,r,s){let a=t[t.length-2],o=t[t.length-1]-i,l=a-e,h=r-i,d=n-e,p=Math.abs(o*d-l*h);if(p<1e-8||s===0){(t[t.length-2]!==e||t[t.length-1]!==i)&&t.push(e,i);return}let g=o*o+l*l,y=h*h+d*d,v=o*h+l*d,S=s*Math.sqrt(g)/p,T=s*Math.sqrt(y)/p,A=S*v/g,D=T*v/y,R=S*d+T*l,B=S*h+T*o,z=l*(T+A),L=o*(T+A),H=d*(S+D),te=h*(S+D),j=Math.atan2(L-B,z-R),O=Math.atan2(te-B,H-R);lV(t,R+e,B+i,s,j,O,l*h>d*o)}var cV=G(()=>{xk()});function due(t,e){let i=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:i,r=Math.cos(t),s=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[{x:r-s*n,y:s+r*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]}function fue(t,e,i,n,r,s,a,o=0,l=0,h=0){if(s===0||a===0)return;let d=Math.sin(o*km/360),p=Math.cos(o*km/360),g=p*(e-n)/2+d*(i-r)/2,y=-d*(e-n)/2+p*(i-r)/2;if(g===0&&y===0)return;s=Math.abs(s),a=Math.abs(a);let v=Math.pow(g,2)/Math.pow(s,2)+Math.pow(y,2)/Math.pow(a,2);v>1&&(s*=Math.sqrt(v),a*=Math.sqrt(v)),hV(e,i,n,r,s,a,l,h,d,p,g,y,CT);let{ang1:S,ang2:T}=CT,{centerX:A,centerY:D}=CT,R=Math.abs(T)/(km/4);Math.abs(1-R)<1e-7&&(R=1);let B=Math.max(Math.ceil(R),1);T/=B;let z=t[t.length-2],L=t[t.length-1],H={x:0,y:0};for(let te=0;te<B;te++){let j=due(S,T),{x:O,y:q}=wT(j[0],s,a,p,d,A,D,H),{x:re,y:ae}=wT(j[1],s,a,p,d,A,D,H),{x:fe,y:Te}=wT(j[2],s,a,p,d,A,D,H);tV(t,z,L,O,q,re,ae,fe,Te),z=fe,L=Te,S+=T}}var km,CT,wT,mw,hV,dV=G(()=>{yk(),km=Math.PI*2,CT={centerX:0,centerY:0,ang1:0,ang2:0},wT=({x:t,y:e},i,n,r,s,a,o,l)=>{t*=i,e*=n;let h=r*t-s*e,d=s*t+r*e;return l.x=h+a,l.y=d+o,l},mw=(t,e,i,n)=>{let r=t*n-e*i<0?-1:1,s=t*i+e*n;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},hV=(t,e,i,n,r,s,a,o,l,h,d,p,g)=>{let y=Math.pow(r,2),v=Math.pow(s,2),S=Math.pow(d,2),T=Math.pow(p,2),A=y*v-y*T-v*S;A<0&&(A=0),A/=y*T+v*S,A=Math.sqrt(A)*(a===o?-1:1);let D=A*r/s*p,R=A*-s/r*d,B=h*D-l*R+(t+i)/2,z=l*D+h*R+(e+n)/2,L=(d-D)/r,H=(p-R)/s,te=(-d-D)/r,j=(-p-R)/s,O=mw(1,0,L,H),q=mw(L,H,te,j);o===0&&q>0&&(q-=km),o===1&&q<0&&(q+=km),g.centerX=B,g.centerY=z,g.ang1=O,g.ang2=q}});function pue(t,e,i){let n=(a,o)=>{let l=o.x-a.x,h=o.y-a.y,d=Math.sqrt(l*l+h*h),p=l/d,g=h/d;return{len:d,nx:p,ny:g}},r=(a,o)=>{a===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)},s=e[e.length-1];for(let a=0;a<e.length;a++){let o=e[a%e.length],l=o.radius??i;if(l<=0){r(a,o),s=o;continue}let h=e[(a+1)%e.length],d=n(o,s),p=n(o,h);if(d.len<1e-4||p.len<1e-4){r(a,o),s=o;continue}let g=Math.asin(d.nx*p.ny-d.ny*p.nx),y=1,v=!1;d.nx*p.nx-d.ny*-p.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,y=-1,v=!0):g>0&&(y=-1,v=!0);let S=g/2,T,A=Math.abs(Math.cos(S)*l/Math.sin(S));A>Math.min(d.len/2,p.len/2)?(A=Math.min(d.len/2,p.len/2),T=Math.abs(A*Math.sin(S)/Math.cos(S))):T=l;let D=o.x+p.nx*A+-p.ny*T*y,R=o.y+p.ny*A+p.nx*T*y,B=Math.atan2(d.ny,d.nx)+Math.PI/2*y,z=Math.atan2(p.ny,p.nx)-Math.PI/2*y;a===0&&t.moveTo(D+Math.cos(B)*T,R+Math.sin(B)*T),t.arc(D,R,T,B,z,v),s=o}}function mue(t,e,i,n){let r=(o,l)=>Math.sqrt((o.x-l.x)**2+(o.y-l.y)**2),s=(o,l,h)=>({x:o.x+(l.x-o.x)*h,y:o.y+(l.y-o.y)*h}),a=e.length;for(let o=0;o<a;o++){let l=e[(o+1)%a],h=l.radius??i;if(h<=0){o===0?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y);continue}let d=e[o],p=e[(o+2)%a],g=r(d,l),y;if(g<1e-4)y=l;else{let T=Math.min(g/2,h);y=s(l,d,T/g)}let v=r(p,l),S;if(v<1e-4)S=l;else{let T=Math.min(v/2,h);S=s(l,p,T/v)}o===0?t.moveTo(y.x,y.y):t.lineTo(y.x,y.y),t.quadraticCurveTo(l.x,l.y,S.x,S.y,n)}}var fV=G(()=>{}),$6,pV,mV=G(()=>{Xz(),Wz(),Kz(),wr(),Jz(),ws(),yk(),uV(),xk(),cV(),dV(),fV(),$6=new mn,pV=class{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new cs,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();let i=this._currentPoly.points,n=i[i.length-2],r=i[i.length-1];return(n!==t||r!==e)&&i.push(t,e),this}arc(t,e,i,n,r,s){this._ensurePoly(!1);let a=this._currentPoly.points;return lV(a,t,e,i,n,r,s),this}arcTo(t,e,i,n,r){this._ensurePoly();let s=this._currentPoly.points;return hue(s,t,e,i,n,r),this}arcToSvg(t,e,i,n,r,s,a){let o=this._currentPoly.points;return fue(o,this._currentPoly.lastX,this._currentPoly.lastY,s,a,t,e,i,n,r),this}bezierCurveTo(t,e,i,n,r,s,a){this._ensurePoly();let o=this._currentPoly;return tV(this._currentPoly.points,o.lastX,o.lastY,t,e,i,n,r,s,a),this}quadraticCurveTo(t,e,i,n,r){this._ensurePoly();let s=this._currentPoly;return lue(this._currentPoly.points,s.lastX,s.lastY,t,e,i,n,r),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));let i=this.shapePrimitives,n=i.length;for(let r=0;r<t.instructions.length;r++){let s=t.instructions[r];this[s.action](...s.data)}if(t.checkForHoles&&i.length-n>1){let r=null;for(let s=n;s<i.length;s++){let a=i[s];if(a.shape.type==="polygon"){let o=a.shape,l=r?.shape;l&&l.containsPolygon(o)?(r.holes||(r.holes=[]),r.holes.push(a),i.copyWithin(s,s+1),i.length--,s--):r=a}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,n,r){return this.drawShape(new mn(t,e,i,n),r),this}circle(t,e,i,n){return this.drawShape(new jz(t,e,i),n),this}poly(t,e,i){let n=new ST(t);return n.closePath=e,this.drawShape(n,i),this}regularPoly(t,e,i,n,r=0,s){n=Math.max(n|0,3);let a=-1*Math.PI/2+r,o=Math.PI*2/n,l=[];for(let h=0;h<n;h++){let d=a-h*o;l.push(t+i*Math.cos(d),e+i*Math.sin(d))}return this.poly(l,!0,s),this}roundPoly(t,e,i,n,r,s=0,a){if(n=Math.max(n|0,3),r<=0)return this.regularPoly(t,e,i,n,s);let o=i*Math.sin(Math.PI/n)-.001;r=Math.min(r,o);let l=-1*Math.PI/2+s,h=Math.PI*2/n,d=(n-2)*Math.PI/n/2;for(let p=0;p<n;p++){let g=p*h+l,y=t+i*Math.cos(g),v=e+i*Math.sin(g),S=g+Math.PI+d,T=g-Math.PI-d,A=y+r*Math.cos(S),D=v+r*Math.sin(S),R=y+r*Math.cos(T),B=v+r*Math.sin(T);p===0?this.moveTo(A,D):this.lineTo(A,D),this.quadraticCurveTo(y,v,R,B,a)}return this.closePath()}roundShape(t,e,i=!1,n){return t.length<3?this:(i?mue(this,t,e,n):pue(this,t,e),this.closePath())}filletRect(t,e,i,n,r){if(r===0)return this.rect(t,e,i,n);let s=Math.min(i,n)/2,a=Math.min(s,Math.max(-s,r)),o=t+i,l=e+n,h=a<0?-a:0,d=Math.abs(a);return this.moveTo(t,e+d).arcTo(t+h,e+h,t+d,e,d).lineTo(o-d,e).arcTo(o-h,e+h,o,e+d,d).lineTo(o,l-d).arcTo(o-h,l-h,t+i-d,l,d).lineTo(t+d,l).arcTo(t+h,l-h,t,l-d,d).closePath()}chamferRect(t,e,i,n,r,s){if(r<=0)return this.rect(t,e,i,n);let a=Math.min(r,Math.min(i,n)/2),o=t+i,l=e+n,h=[t+a,e,o-a,e,o,e+a,o,l-a,o-a,l,t+a,l,t,l-a,t,e+a];for(let d=h.length-1;d>=2;d-=2)h[d]===h[d-2]&&h[d-1]===h[d-3]&&h.splice(d-1,2);return this.poly(h,!0,s)}ellipse(t,e,i,n,r){return this.drawShape(new qz(t,e,i,n),r),this}roundRect(t,e,i,n,r,s){return this.drawShape(new Zz(t,e,i,n,r),s),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new ST,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){let e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new ST,t)){let e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,n=e.shape.y;if(e.transform&&!e.transform.isIdentity()){let r=e.transform,s=i;i=r.a*i+r.c*n+r.tx,n=r.b*s+r.d*n+r.ty}this._currentPoly.points.push(i,n)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let e=this.shapePrimitives;for(let i=0;i<e.length;i++){let n=e[i],r=n.shape.getBounds($6);n.transform?t.addRect(r,n.transform):t.addRect(r)}return t}}});function ey(t,e){return t?t.prepend(e):e.clone()}var Rh,c_=G(()=>{Ga(),Nr(),Bi(),Vz(),mV(),Rh=class gV{constructor(e,i=!1){this.instructions=[],this.uid=Sn("graphicsPath"),this._dirty=!0,this.checkForHoles=i,typeof e=="string"?rue(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new pV(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,i){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,i]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,i,n,r,s){let a=this.instructions[this.instructions.length-1],o=this.getLastPoint(Rn.shared),l=0,h=0;if(!a||a.action!=="bezierCurveTo")l=o.x,h=o.y;else{l=a.data[2],h=a.data[3];let d=o.x,p=o.y;l=d+(d-l),h=p+(p-h)}return this.instructions.push({action:"bezierCurveTo",data:[l,h,e,i,n,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,i,n){let r=this.instructions[this.instructions.length-1],s=this.getLastPoint(Rn.shared),a=0,o=0;if(!r||r.action!=="quadraticCurveTo")a=s.x,o=s.y;else{a=r.data[0],o=r.data[1];let l=s.x,h=s.y;a=l+(l-a),o=h+(h-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,e,i,n]}),this._dirty=!0,this}rect(e,i,n,r,s){return this.instructions.push({action:"rect",data:[e,i,n,r,s]}),this._dirty=!0,this}circle(e,i,n,r){return this.instructions.push({action:"circle",data:[e,i,n,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,i,n,r,s,a,o){s||(s=r/2);let l=-1*Math.PI/2+a,h=n*2,d=Math.PI*2/h,p=[];for(let g=0;g<h;g++){let y=g%2?s:r,v=g*d+l;p.push(e+y*Math.cos(v),i+y*Math.sin(v))}return this.poly(p,!0,o),this}clone(e=!1){let i=new gV;if(i.checkForHoles=this.checkForHoles,!e)i.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){let r=this.instructions[n];i.instructions.push({action:r.action,data:r.data.slice()})}return i}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let i=e.a,n=e.b,r=e.c,s=e.d,a=e.tx,o=e.ty,l=0,h=0,d=0,p=0,g=0,y=0,v=0,S=0;for(let T=0;T<this.instructions.length;T++){let A=this.instructions[T],D=A.data;switch(A.action){case"moveTo":case"lineTo":l=D[0],h=D[1],D[0]=i*l+r*h+a,D[1]=n*l+s*h+o;break;case"bezierCurveTo":d=D[0],p=D[1],g=D[2],y=D[3],l=D[4],h=D[5],D[0]=i*d+r*p+a,D[1]=n*d+s*p+o,D[2]=i*g+r*y+a,D[3]=n*g+s*y+o,D[4]=i*l+r*h+a,D[5]=n*l+s*h+o;break;case"quadraticCurveTo":d=D[0],p=D[1],l=D[2],h=D[3],D[0]=i*d+r*p+a,D[1]=n*d+s*p+o,D[2]=i*l+r*h+a,D[3]=n*l+s*h+o;break;case"arcToSvg":l=D[5],h=D[6],v=D[0],S=D[1],D[0]=i*v+r*S,D[1]=n*v+s*S,D[5]=i*l+r*h+a,D[6]=n*l+s*h+o;break;case"circle":D[4]=ey(D[3],e);break;case"rect":D[4]=ey(D[4],e);break;case"ellipse":D[8]=ey(D[8],e);break;case"roundRect":D[5]=ey(D[5],e);break;case"addPath":D[0].transform(e);break;case"poly":D[2]=ey(D[2],e);break;default:Mt("unknown transform action",A.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let i=this.instructions.length-1,n=this.instructions[i];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(i--,i<0)return e.x=0,e.y=0,e;n=this.instructions[i]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}});function Kn(t,e,i){let n=t.getAttribute(e);return n?Number(n):i}var _k=G(()=>{});function gue(t,e){let i=t.querySelectorAll("defs");for(let n=0;n<i.length;n++){let r=i[n];for(let s=0;s<r.children.length;s++){let a=r.children[s];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=bue(a);break;case"radialgradient":e.defs[a.id]=yue();break}}}}function bue(t){let e=Kn(t,"x1",0),i=Kn(t,"y1",0),n=Kn(t,"x2",1),r=Kn(t,"y2",0),s=t.getAttribute("gradientUnits")||"objectBoundingBox",a=new So(e,i,n,r,s==="objectBoundingBox"?"local":"global");for(let o=0;o<t.children.length;o++){let l=t.children[o],h=Kn(l,"offset",0),d=An.shared.setValue(l.getAttribute("stop-color")).toNumber();a.addColorStop(h,d)}return a}function yue(t){return Mt("[SVG Parser] Radial gradients are not yet supported"),new So(0,0,1,0)}var bV=G(()=>{Lr(),Bi(),yg(),_k()});function K6(t){let e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}var yV=G(()=>{});function xV(t,e){let i=t.getAttribute("style"),n={},r={},s={strokeStyle:n,fillStyle:r,useFill:!1,useStroke:!1};for(let a in iR){let o=t.getAttribute(a);o&&Q6(e,s,a,o.trim())}if(i){let a=i.split(";");for(let o=0;o<a.length;o++){let l=a[o].trim(),[h,d]=l.split(":");iR[h]&&Q6(e,s,h,d.trim())}}return{strokeStyle:s.useStroke?n:null,fillStyle:s.useFill?r:null,useFill:s.useFill,useStroke:s.useStroke}}function Q6(t,e,i,n){switch(i){case"stroke":if(n!=="none"){if(n.startsWith("url(")){let r=K6(n);e.strokeStyle.fill=t.defs[r]}else e.strokeStyle.color=An.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){let r=K6(n);e.fillStyle.fill=t.defs[r]}else e.fillStyle.color=An.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}var iR,_V=G(()=>{Lr(),yV(),iR={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}}});function xue(t){if(t.length<=2)return!0;let e=t.map(o=>o.area).sort((o,l)=>l-o),[i,n]=e,r=e[e.length-1],s=i/n,a=n/r;return!(s>3&&a<2)}var vV=G(()=>{});function _ue(t){return t.split(/(?=[Mm])/).filter(e=>e.trim().length>0)}function vue(t){let e=t.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;let i=e.map(Number),n=[],r=[];for(let h=0;h<i.length;h+=2)h+1<i.length&&(n.push(i[h]),r.push(i[h+1]));if(n.length===0||r.length===0)return 0;let s=Math.min(...n),a=Math.max(...n),o=Math.min(...r),l=Math.max(...r);return(a-s)*(l-o)}function Z6(t,e){let i=new Rh(t,!1);for(let n of i.instructions)e.instructions.push(n)}var TV=G(()=>{c_()});function Tue(t,e){if(typeof t=="string"){let a=document.createElement("div");a.innerHTML=t.trim(),t=a.querySelector("svg")}let i={context:e,defs:{},path:new Rh};gue(t,i);let n=t.children,{fillStyle:r,strokeStyle:s}=xV(t,i);for(let a=0;a<n.length;a++){let o=n[a];o.nodeName.toLowerCase()!=="defs"&&EV(o,i,r,s)}return e}function EV(t,e,i,n){let r=t.children,{fillStyle:s,strokeStyle:a}=xV(t,e);s&&i?i={...i,...s}:s&&(i=s),a&&n?n={...n,...a}:a&&(n=a);let o=!i&&!n;o&&(i={color:0});let l,h,d,p,g,y,v,S,T,A,D,R,B,z,L,H,te;switch(t.nodeName.toLowerCase()){case"path":{z=t.getAttribute("d");let j=t.getAttribute("fill-rule"),O=_ue(z),q=j==="evenodd",re=O.length>1;if(q&&re){let ae=O.map(fe=>({path:fe,area:vue(fe)}));if(ae.sort((fe,Te)=>Te.area-fe.area),O.length>3||!xue(ae))for(let fe=0;fe<ae.length;fe++){let Te=ae[fe],$=fe===0;e.context.beginPath();let se=new Rh(void 0,!0);Z6(Te.path,se),e.context.path(se),$?(i&&e.context.fill(i),n&&e.context.stroke(n)):e.context.cut()}else for(let fe=0;fe<ae.length;fe++){let Te=ae[fe],$=fe%2===1;e.context.beginPath();let se=new Rh(void 0,!0);Z6(Te.path,se),e.context.path(se),$?e.context.cut():(i&&e.context.fill(i),n&&e.context.stroke(n))}}else{let ae=j?j==="evenodd":!0;L=new Rh(z,ae),e.context.path(L),i&&e.context.fill(i),n&&e.context.stroke(n)}break}case"circle":v=Kn(t,"cx",0),S=Kn(t,"cy",0),T=Kn(t,"r",0),e.context.ellipse(v,S,T,T),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"rect":l=Kn(t,"x",0),h=Kn(t,"y",0),H=Kn(t,"width",0),te=Kn(t,"height",0),A=Kn(t,"rx",0),D=Kn(t,"ry",0),A||D?e.context.roundRect(l,h,H,te,A||D):e.context.rect(l,h,H,te),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"ellipse":v=Kn(t,"cx",0),S=Kn(t,"cy",0),A=Kn(t,"rx",0),D=Kn(t,"ry",0),e.context.beginPath(),e.context.ellipse(v,S,A,D),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"line":d=Kn(t,"x1",0),p=Kn(t,"y1",0),g=Kn(t,"x2",0),y=Kn(t,"y2",0),e.context.beginPath(),e.context.moveTo(d,p),e.context.lineTo(g,y),n&&e.context.stroke(n);break;case"polygon":B=t.getAttribute("points"),R=B.match(/\d+/g).map(j=>parseInt(j,10)),e.context.poly(R,!0),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"polyline":B=t.getAttribute("points"),R=B.match(/\d+/g).map(j=>parseInt(j,10)),e.context.poly(R,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{Mt(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}o&&(i=null);for(let j=0;j<r.length;j++)EV(r[j],e,i,n)}var SV=G(()=>{Bi(),c_(),bV(),_k(),_V(),vV(),TV()});function Eue(t){return An.isColorLike(t)}function J6(t){return t instanceof Lf}function eL(t){return t instanceof So}function Sue(t){return t instanceof st}function Aue(t,e,i){let n=An.shared.setValue(e??0);return t.color=n.toNumber(),t.alpha=n.alpha===1?i.alpha:n.alpha,t.texture=st.WHITE,{...i,...t}}function Cue(t,e,i){return t.texture=e,{...i,...t}}function tL(t,e,i){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function iL(t,e,i){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...i,...t}}function wue(t,e){let i={...e,...t},n=An.shared.setValue(i.color);return i.alpha*=n.alpha,i.color=n.toNumber(),i}function rf(t,e){if(t==null)return null;let i={},n=t;return Eue(t)?Aue(i,t,e):Sue(t)?Cue(i,t,e):J6(t)?tL(i,t,e):eL(t)?iL(i,t,e):n.fill&&J6(n.fill)?tL(n,n.fill,e):n.fill&&eL(n.fill)?iL(n,n.fill,e):wue(n,e)}function dE(t,e){let{width:i,alignment:n,miterLimit:r,cap:s,join:a,pixelLine:o,...l}=e,h=rf(t,l);return h?{width:i,alignment:n,miterLimit:r,cap:s,join:a,pixelLine:o,...h}:null}var vk=G(()=>{Lr(),gi(),yg(),yS()}),nL,gw,g1,ka,_g=G(()=>{Cs(),Lr(),hi(),Ga(),gi(),Nr(),Mi(),ws(),c_(),SV(),vk(),nL=new Rn,gw=new Tt,g1=class Gu extends ma{constructor(){super(...arguments),this.uid=Sn("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Rh,this._transform=new Tt,this._fillStyle={...Gu.defaultFillStyle},this._strokeStyle={...Gu.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new cs,this._boundsDirty=!0}clone(){let e=new Gu;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=rf(e,Gu.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=dE(e,Gu.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=rf(e,Gu.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=rf(e,Gu.defaultStrokeStyle),this}texture(e,i,n,r,s,a){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:r||0,dw:s||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:i?An.shared.setValue(i).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Rh,this}fill(e,i){let n,r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?n=r.data.path:n=this._activePath.clone(),n?(e!=null&&(i!==void 0&&typeof e=="number"&&(xt(ei,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=rf(e,Gu.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:e,y:i}=this._activePath.getLastPoint(Rn.shared);this._activePath.clear(),this._activePath.moveTo(e,i)}stroke(e){let i,n=this.instructions[this.instructions.length-1];return this._tick===0&&n&&n.action==="fill"?i=n.data.path:i=this._activePath.clone(),i?(e!=null&&(this._strokeStyle=dE(e,Gu.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let i=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(i&&(i.action==="stroke"||i.action==="fill"))if(i.data.hole)i.data.hole.addPath(n);else{i.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,i,n,r,s,a){this._tick++;let o=this._transform;return this._activePath.arc(o.a*e+o.c*i+o.tx,o.b*e+o.d*i+o.ty,n,r,s,a),this}arcTo(e,i,n,r,s){this._tick++;let a=this._transform;return this._activePath.arcTo(a.a*e+a.c*i+a.tx,a.b*e+a.d*i+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,s),this}arcToSvg(e,i,n,r,s,a,o){this._tick++;let l=this._transform;return this._activePath.arcToSvg(e,i,n,r,s,l.a*a+l.c*o+l.tx,l.b*a+l.d*o+l.ty),this}bezierCurveTo(e,i,n,r,s,a,o){this._tick++;let l=this._transform;return this._activePath.bezierCurveTo(l.a*e+l.c*i+l.tx,l.b*e+l.d*i+l.ty,l.a*n+l.c*r+l.tx,l.b*n+l.d*r+l.ty,l.a*s+l.c*a+l.tx,l.b*s+l.d*a+l.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,i,n,r){return this._tick++,this._activePath.ellipse(e,i,n,r,this._transform.clone()),this}circle(e,i,n){return this._tick++,this._activePath.circle(e,i,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,i){this._tick++;let n=this._transform;return this._activePath.lineTo(n.a*e+n.c*i+n.tx,n.b*e+n.d*i+n.ty),this}moveTo(e,i){this._tick++;let n=this._transform,r=this._activePath.instructions,s=n.a*e+n.c*i+n.tx,a=n.b*e+n.d*i+n.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=a,this):(this._activePath.moveTo(s,a),this)}quadraticCurveTo(e,i,n,r,s){this._tick++;let a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*i+a.tx,a.b*e+a.d*i+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,s),this}rect(e,i,n,r){return this._tick++,this._activePath.rect(e,i,n,r,this._transform.clone()),this}roundRect(e,i,n,r,s){return this._tick++,this._activePath.roundRect(e,i,n,r,s,this._transform.clone()),this}poly(e,i){return this._tick++,this._activePath.poly(e,i,this._transform.clone()),this}regularPoly(e,i,n,r,s=0,a){return this._tick++,this._activePath.regularPoly(e,i,n,r,s,a),this}roundPoly(e,i,n,r,s,a){return this._tick++,this._activePath.roundPoly(e,i,n,r,s,a),this}roundShape(e,i,n,r){return this._tick++,this._activePath.roundShape(e,i,n,r),this}filletRect(e,i,n,r,s){return this._tick++,this._activePath.filletRect(e,i,n,r,s),this}chamferRect(e,i,n,r,s,a){return this._tick++,this._activePath.chamferRect(e,i,n,r,s,a),this}star(e,i,n,r,s=0,a=0){return this._tick++,this._activePath.star(e,i,n,r,s,a,this._transform.clone()),this}svg(e){return this._tick++,Tue(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,i=e){return this._transform.scale(e,i),this}setTransform(e,i,n,r,s,a){return e instanceof Tt?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,i,n,r,s,a),this)}transform(e,i,n,r,s,a){return e instanceof Tt?(this._transform.append(e),this):(gw.set(e,i,n,r,s,a),this._transform.append(gw),this)}translate(e,i=e){return this._transform.translate(e,i),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;let e=this._bounds;e.clear();for(let i=0;i<this.instructions.length;i++){let n=this.instructions[i],r=n.action;if(r==="fill"){let s=n.data;e.addBounds(s.path.bounds)}else if(r==="texture"){let s=n.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){let s=n.data,a=s.style.alignment,o=s.style.width*(1-a),l=s.path.bounds;e.addFrame(l.minX-o,l.minY-o,l.maxX+o,l.maxY+o)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;let i=this.instructions,n=!1;for(let r=0;r<i.length;r++){let s=i[r],a=s.data,o=a.path;if(!s.action||!o)continue;let l=a.style,h=o.shapePath.shapePrimitives;for(let d=0;d<h.length;d++){let p=h[d].shape;if(!l||!p)continue;let g=h[d].transform,y=g?g.applyInverse(e,nL):e;if(s.action==="fill")n=p.contains(y.x,y.y);else{let S=l;n=p.strokeContains(y.x,y.y,S.width,S.alignment)}let v=a.hole;if(v){let S=v.shapePath?.shapePrimitives;if(S)for(let T=0;T<S.length;T++)S[T].shape.contains(y.x,y.y)&&(n=!1)}if(n)return!0}}return n}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(i)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(i))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}},g1.defaultFillStyle={color:16777215,alpha:1,texture:st.WHITE,matrix:null,fill:null,textureSpace:"local"},g1.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:st.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1},ka=g1});function Due(t){let e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){let i=Ao.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??i.alpha,angle:e.dropShadowAngle??i.angle,blur:e.dropShadowBlur??i.blur,color:e.dropShadowColor??i.color,distance:e.dropShadowDistance??i.distance}}if(e.strokeThickness!==void 0){xt(ei,"strokeThickness is now a part of stroke");let i=e.stroke,n={};if(An.isColorLike(i))n.color=i;else if(i instanceof So||i instanceof Lf)n.fill=i;else if(Object.hasOwnProperty.call(i,"color")||Object.hasOwnProperty.call(i,"fill"))n=i;else throw new Error("Invalid stroke value.");t.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(xt(ei,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Mt("The number of fill colors must match the number of fill gradient stops.");let i=new So({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),n=e.fillGradientStops.slice(),r=e.fill.map(s=>An.shared.setValue(s).toNumber());n.forEach((s,a)=>{i.addColorStop(s,r[a])}),t.fill={fill:i}}}var b1,Ao,_l=G(()=>{Cs(),Lr(),Nr(),Mi(),Bi(),yg(),yS(),_g(),vk(),b1=class bm extends ma{constructor(e={}){super(),this.uid=Sn("textStyle"),this._tick=0,Due(e);let i={...bm.defaultTextStyle,...e};for(let n in i){let r=n;this[r]=i[n]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...bm.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...bm.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...ka.defaultFillStyle,...e},()=>{this._fill=rf({...this._originalFill},ka.defaultFillStyle)})),this._fill=rf(e===0?"black":e,ka.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...ka.defaultStrokeStyle,...e},()=>{this._stroke=dE({...this._originalStroke},ka.defaultStrokeStyle)})),this._stroke=dE(e,ka.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){let e=bm.defaultTextStyle;for(let i in e)this[i]=e[i]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new bm({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let i=0;i<this._filters.length;i++)e+=this._filters[i].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(i),this._originalFill?.texture&&this._originalFill.texture.destroy(i),this._stroke?.texture&&this._stroke.texture.destroy(i),this._originalStroke?.texture&&this._originalStroke.texture.destroy(i)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,i){return new Proxy(e,{set:(n,r,s)=>(n[r]===s||(n[r]=s,i?.(r,s),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(An.isColorLike(e)||e instanceof So||e instanceof Lf)}},b1.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},b1.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100},Ao=b1});function AV(t,e,i,n){let r=CV;r.minX=0,r.minY=0,r.maxX=t.width/n|0,r.maxY=t.height/n|0;let s=er.getOptimalTexture(r.width,r.height,n,!1);return s.source.uploadMethodId="image",s.source.resource=t,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/n,s.frame.height=i/n,s.source.emit("update",s.source),s.updateUvs(),s}var CV,Tk=G(()=>{yl(),ws(),CV=new cs}),rL,cl,vg=G(()=>{Li(),Jx(),Cf(),rL=class{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){let i=si.get().createCanvas();i.width=t,i.height=e;let n=i.getContext("2d");return{canvas:i,context:n}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=Km(t),e=Km(e);let n=(t<<17)+(e<<1);this._canvasPool[n]||(this._canvasPool[n]=[]);let r=this._canvasPool[n].pop();return r||(r=this._createCanvasAndContext(t,e)),r}returnCanvasAndContext(t){let e=t.canvas,{width:i,height:n}=e,r=(i<<17)+(n<<1);t.context.resetTransform(),t.context.clearRect(0,0,i,n),this._canvasPool[r].push(t)}clear(){this._canvasPool={}}},cl=new rL,Af.register(cl)});function Rue(t,e){uh||(uh=si.get().createCanvas(256,128),Zu=uh.getContext("2d",{willReadFrequently:!0}),Zu.globalCompositeOperation="copy",Zu.globalAlpha=1),(uh.width<t||uh.height<e)&&(uh.width=Km(t),uh.height=Km(e))}function sL(t,e,i){for(let n=0,r=4*i*e;n<e;++n,r+=4)if(t[r+3]!==0)return!1;return!0}function aL(t,e,i,n,r){let s=4*e;for(let a=n,o=n*s+4*i;a<=r;++a,o+=s)if(t[o+3]!==0)return!1;return!0}function Pue(...t){let e=t[0];e.canvas||(e={canvas:t[0],resolution:t[1]});let{canvas:i}=e,n=Math.min(e.resolution??1,1),r=e.width??i.width,s=e.height??i.height,a=e.output;if(Rue(r,s),!Zu)throw new TypeError("Failed to get canvas 2D context");Zu.drawImage(i,0,0,r,s,0,0,r*n,s*n);let o=Zu.getImageData(0,0,r,s).data,l=0,h=0,d=r-1,p=s-1;for(;h<s&&sL(o,r,h);)++h;if(h===s)return mn.EMPTY;for(;sL(o,r,p);)--p;for(;aL(o,r,l,h,p);)++l;for(;aL(o,r,d,h,p);)--d;return++d,++p,Zu.globalCompositeOperation="source-over",Zu.strokeRect(l,h,d-l,p-h),Zu.globalCompositeOperation="copy",a??(a=new mn),a.set(l/n,h/n,(d-l)/n,(p-h)/n),a}var uh,Zu,wV=G(()=>{Li(),Jx(),wr(),uh=null,Zu=null});function DV(t=1e3,e=0,i=!1){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof i!="boolean")throw new TypeError("Invalid resetTtl value");return new RV(t,e,i)}var RV,PV=G(()=>{RV=class{constructor(t=0,e=0,i=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=i,this.size=0,this.ttl=e}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){let e=this.items[t];delete this.items[t],this.size--,e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}entries(t=this.keys()){return t.map(e=>[e,this.get(e)])}evict(t=!1){if(t||this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}return this}expiresAt(t){let e;return this.has(t)&&(e=this.items[t].expiry),e}get(t){let e=this.items[t];if(e!==void 0){if(this.ttl>0&&e.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(e),e.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){let t=[],e=this.first;for(;e!==null;)t.push(e.key),e=e.next;return t}setWithEvicted(t,e,i=this.resetTtl){let n=null;if(this.has(t))this.set(t,e,!0,i);else{this.max>0&&this.size===this.max&&(n={...this.first},this.evict(!0));let r=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e};++this.size===1?this.first=r:this.last.next=r,this.last=r}return n}set(t,e,i=!1,n=this.resetTtl){let r=this.items[t];return i||r!==void 0?(r.value=e,i===!1&&n&&(r.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(r)):(this.max>0&&this.size===this.max&&this.evict(!0),r=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},++this.size===1?this.first=r:this.last.next=r,this.last=r),this}values(t=this.keys()){return t.map(e=>this.get(e))}}});function fE(t){let e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize,i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let n=i.length-1;n>=0;n--){let r=i[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!MV.includes(r)&&(r=`"${r}"`),i[n]=r}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${i.join(",")}`}var MV,xS=G(()=>{MV=["serif","sans-serif","monospace","cursive","fantasy","system-ui"]}),y1,no,_s,Hh=G(()=>{PV(),Li(),xS(),y1={willReadFrequently:!0},no=class _t{static get experimentalLetterSpacingSupported(){let e=_t._experimentalLetterSpacingSupported;if(e===void 0){let i=si.get().getCanvasRenderingContext2D().prototype;e=_t._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(e,i,n,r,s,a,o,l,h){this.text=e,this.style=i,this.width=n,this.height=r,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=h}static measureText(e=" ",i,n=_t._canvas,r=i.wordWrap){let s=`${e}-${i.styleKey}-wordWrap-${r}`;if(_t._measurementCache.has(s))return _t._measurementCache.get(s);let a=fE(i),o=_t.measureFont(a);o.fontSize===0&&(o.fontSize=i.fontSize,o.ascent=i.fontSize);let l=_t.__context;l.font=a;let h=(r?_t._wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),d=new Array(h.length),p=0;for(let A=0;A<h.length;A++){let D=_t._measureText(h[A],i.letterSpacing,l);d[A]=D,p=Math.max(p,D)}let g=i._stroke?.width||0,y=p+g;i.dropShadow&&(y+=i.dropShadow.distance);let v=i.lineHeight||o.fontSize,S=Math.max(v,o.fontSize+g)+(h.length-1)*(v+i.leading);i.dropShadow&&(S+=i.dropShadow.distance);let T=new _t(e,i,y,S,h,d,v+i.leading,p,o);return _t._measurementCache.set(s,T),T}static _measureText(e,i,n){let r=!1;_t.experimentalLetterSpacingSupported&&(_t.experimentalLetterSpacing?(n.letterSpacing=`${i}px`,n.textLetterSpacing=`${i}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e),a=s.width,o=-s.actualBoundingBoxLeft,l=s.actualBoundingBoxRight-o;if(a>0)if(r)a-=i,l-=i;else{let h=(_t.graphemeSegmenter(e).length-1)*i;a+=h,l+=h}return Math.max(a,l)}static _wordWrap(e,i,n=_t._canvas){let r=n.getContext("2d",y1),s=0,a="",o="",l=Object.create(null),{letterSpacing:h,whiteSpace:d}=i,p=_t._collapseSpaces(d),g=_t._collapseNewlines(d),y=!p,v=i.wordWrapWidth+h,S=_t._tokenize(e);for(let T=0;T<S.length;T++){let A=S[T];if(_t._isNewline(A)){if(!g){o+=_t._addLine(a),y=!p,a="",s=0;continue}A=" "}if(p){let R=_t.isBreakingSpace(A),B=_t.isBreakingSpace(a[a.length-1]);if(R&&B)continue}let D=_t._getFromCache(A,h,l,r);if(D>v)if(a!==""&&(o+=_t._addLine(a),a="",s=0),_t.canBreakWords(A,i.breakWords)){let R=_t.wordWrapSplit(A);for(let B=0;B<R.length;B++){let z=R[B],L=z,H=1;for(;R[B+H];){let j=R[B+H];if(!_t.canBreakChars(L,j,A,B,i.breakWords))z+=j;else break;L=j,H++}B+=H-1;let te=_t._getFromCache(z,h,l,r);te+s>v&&(o+=_t._addLine(a),y=!1,a="",s=0),a+=z,s+=te}}else{a.length>0&&(o+=_t._addLine(a),a="",s=0);let R=T===S.length-1;o+=_t._addLine(A,!R),y=!1,a="",s=0}else D+s>v&&(y=!1,o+=_t._addLine(a),a="",s=0),(a.length>0||!_t.isBreakingSpace(A)||y)&&(a+=A,s+=D)}return o+=_t._addLine(a,!1),o}static _addLine(e,i=!0){return e=_t._trimRight(e),e=i?`${e}
`:e,e}static _getFromCache(e,i,n,r){let s=n[e];return typeof s!="number"&&(s=_t._measureText(e,i,r)+i,n[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let i=e.length-1;i>=0;i--){let n=e[i];if(!_t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:_t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return typeof e!="string"?!1:_t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let i=[],n="";if(typeof e!="string")return i;for(let r=0;r<e.length;r++){let s=e[r],a=e[r+1];if(_t.isBreakingSpace(s,a)||_t._isNewline(s)){n!==""&&(i.push(n),n=""),s==="\r"&&a===`
`?(i.push(`\r
`),r++):i.push(s);continue}n+=s}return n!==""&&i.push(n),i}static canBreakWords(e,i){return i}static canBreakChars(e,i,n,r,s){return!0}static wordWrapSplit(e){return _t.graphemeSegmenter(e)}static measureFont(e){if(_t._fonts[e])return _t._fonts[e];let i=_t._context;i.font=e;let n=i.measureText(_t.METRICS_STRING+_t.BASELINE_SYMBOL),r={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return _t._fonts[e]=r,r}static clearMetrics(e=""){e?delete _t._fonts[e]:_t._fonts={}}static get _canvas(){if(!_t.__canvas){let e;try{let i=new OffscreenCanvas(0,0);if(i.getContext("2d",y1)?.measureText)return _t.__canvas=i,i;e=si.get().createCanvas()}catch{e=si.get().createCanvas()}e.width=e.height=10,_t.__canvas=e}return _t.__canvas}static get _context(){return _t.__context||(_t.__context=_t._canvas.getContext("2d",y1)),_t.__context}},no.METRICS_STRING="|ÉqÅ",no.BASELINE_SYMBOL="M",no.BASELINE_MULTIPLIER=1.4,no.HEIGHT_MULTIPLIER=2,no.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let t=new Intl.Segmenter;return e=>{let i=t.segment(e),n=[],r=0;for(let s of i)n[r++]=s.segment;return n}}return t=>[...t]})(),no.experimentalLetterSpacing=!1,no._fonts={},no._newlines=[10,13],no._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],no._measurementCache=DV(1e3),_s=no});function pE(t,e,i,n=0){if(t.texture===st.WHITE&&!t.fill)return An.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof Lf){let r=t.fill,s=e.createPattern(r.texture.source.resource,"repeat"),a=r.transform.copyTo(Tt.shared);return a.scale(r.texture.frame.width,r.texture.frame.height),s.setTransform(a),s}else if(t.fill instanceof So){let r=t.fill,s=r.type==="linear",a=r.textureSpace==="local",o=1,l=1;a&&i&&(o=i.width+n,l=i.height+n);let h,d=!1;if(s){let{start:p,end:g}=r;h=e.createLinearGradient(p.x*o,p.y*l,g.x*o,g.y*l),d=Math.abs(g.x-p.x)<Math.abs((g.y-p.y)*.1)}else{let{center:p,innerRadius:g,outerCenter:y,outerRadius:v}=r;h=e.createRadialGradient(p.x*o,p.y*l,g*o,y.x*o,y.y*l,v*o)}if(d&&a&&i){let p=i.lineHeight/l;for(let g=0;g<i.lines.length;g++){let y=(g*i.lineHeight+n/2)/l;r.colorStops.forEach(v=>{let S=y+v.offset*p;h.addColorStop(Math.floor(S*nR)/nR,An.shared.setValue(v.color).toHex())})}}else r.colorStops.forEach(p=>{h.addColorStop(p.offset,An.shared.setValue(p.color).toHex())});return h}}else{let r=e.createPattern(t.texture.source.resource,"repeat"),s=t.matrix.copyTo(Tt.shared);return s.scale(t.texture.frame.width,t.texture.frame.height),r.setTransform(s),r}return Mt("FillStyle not recognised",t),"red"}var nR,Ek=G(()=>{Lr(),hi(),gi(),Bi(),yg(),yS(),nR=1e5}),bw,oL,Om,Sk=G(()=>{Lr(),wr(),vg(),wV(),Hh(),xS(),Ek(),bw=new mn,oL=class{getCanvasAndContext(t){let{text:e,style:i,resolution:n=1}=t,r=i._getFinalPadding(),s=_s.measureText(e||" ",i),a=Math.ceil(Math.ceil(Math.max(1,s.width)+r*2)*n),o=Math.ceil(Math.ceil(Math.max(1,s.height)+r*2)*n),l=cl.getOptimalCanvasAndContext(a,o);this._renderTextToCanvas(e,i,r,n,l);let h=i.trim?Pue({canvas:l.canvas,width:a,height:o,resolution:1,output:bw}):bw.set(0,0,a,o);return{canvasAndContext:l,frame:h}}returnCanvasAndContext(t){cl.returnCanvasAndContext(t)}_renderTextToCanvas(t,e,i,n,r){let{canvas:s,context:a}=r,o=fE(e),l=_s.measureText(t||" ",e),h=l.lines,d=l.lineHeight,p=l.lineWidths,g=l.maxLineWidth,y=l.fontProperties,v=s.height;if(a.resetTransform(),a.scale(n,n),a.textBaseline=e.textBaseline,e._stroke?.width){let D=e._stroke;a.lineWidth=D.width,a.miterLimit=D.miterLimit,a.lineJoin=D.join,a.lineCap=D.cap}a.font=o;let S,T,A=e.dropShadow?2:1;for(let D=0;D<A;++D){let R=e.dropShadow&&D===0,B=R?Math.ceil(Math.max(1,v)+i*2):0,z=B*n;if(R){a.fillStyle="black",a.strokeStyle="black";let te=e.dropShadow,j=te.color,O=te.alpha;a.shadowColor=An.shared.setValue(j).setAlpha(O).toRgbaString();let q=te.blur*n,re=te.distance*n;a.shadowBlur=q,a.shadowOffsetX=Math.cos(te.angle)*re,a.shadowOffsetY=Math.sin(te.angle)*re+z}else{if(a.fillStyle=e._fill?pE(e._fill,a,l,i*2):null,e._stroke?.width){let te=e._stroke.width*.5+i*2;a.strokeStyle=pE(e._stroke,a,l,te)}a.shadowColor="black"}let L=(d-y.fontSize)/2;d-y.fontSize<0&&(L=0);let H=e._stroke?.width??0;for(let te=0;te<h.length;te++)S=H/2,T=H/2+te*d+y.ascent+L,e.align==="right"?S+=g-p[te]:e.align==="center"&&(S+=(g-p[te])/2),e._stroke?.width&&this._drawLetterSpacing(h[te],e,r,S+i,T+i-B,!0),e._fill!==void 0&&this._drawLetterSpacing(h[te],e,r,S+i,T+i-B)}}_drawLetterSpacing(t,e,i,n,r,s=!1){let{context:a}=i,o=e.letterSpacing,l=!1;if(_s.experimentalLetterSpacingSupported&&(_s.experimentalLetterSpacing?(a.letterSpacing=`${o}px`,a.textLetterSpacing=`${o}px`,l=!0):(a.letterSpacing="0px",a.textLetterSpacing="0px")),o===0||l){s?a.strokeText(t,n,r):a.fillText(t,n,r);return}let h=n,d=_s.graphemeSegmenter(t),p=a.measureText(t).width,g=0;for(let y=0;y<d.length;++y){let v=d[y];s?a.strokeText(v,h,r):a.fillText(v,h,r);let S="";for(let T=y+1;T<d.length;++T)S+=d[T];g=a.measureText(S).width,h+=p-g+o,p=g}}},Om=new oL}),rR,BV=G(()=>{Ae(),yl(),hc(),Mi(),_l(),Tk(),Sk(),rR=class{constructor(t){this._activeTextures={},this._renderer=t}getTexture(t,e,i,n){typeof t=="string"&&(xt("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),t={text:t,style:i,resolution:e}),t.style instanceof Ao||(t.style=new Ao(t.style)),t.textureStyle instanceof lu||(t.textureStyle=new lu(t.textureStyle)),typeof t.text!="string"&&(t.text=t.text.toString());let{text:r,style:s,textureStyle:a}=t,o=t.resolution??this._renderer.resolution,{frame:l,canvasAndContext:h}=Om.getCanvasAndContext({text:r,style:s,resolution:o}),d=AV(h.canvas,l.width,l.height,o);if(a&&(d.source.style=a),s.trim&&(l.pad(s.padding),d.frame.copyFrom(l),d.frame.scale(1/o),d.updateUvs()),s.filters){let p=this._applyFilters(d,s.filters);return this.returnTexture(d),Om.returnCanvasAndContext(h),p}return this._renderer.texture.initSource(d._source),Om.returnCanvasAndContext(h),d}returnTexture(t){let e=t.source;e.resource=null,e.uploadMethodId="unknown",e.alphaMode="no-premultiply-alpha",er.returnTexture(t,!0)}renderTextToCanvas(){xt("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}getManagedTexture(t){t._resolution=t._autoResolution?this._renderer.resolution:t.resolution;let e=t.styleKey;if(this._activeTextures[e])return this._increaseReferenceCount(e),this._activeTextures[e].texture;let i=this.getTexture({text:t.text,style:t.style,resolution:t._resolution,textureStyle:t.textureStyle});return this._activeTextures[e]={texture:i,usageCount:1},i}decreaseReferenceCount(t){let e=this._activeTextures[t];e.usageCount--,e.usageCount===0&&(this.returnTexture(e.texture),this._activeTextures[t]=null)}getReferenceCount(t){return this._activeTextures[t]?.usageCount??0}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}_applyFilters(t,e){let i=this._renderer.renderTarget.renderTarget,n=this._renderer.filter.generateFilteredTexture({texture:t,filters:e});return this._renderer.renderTarget.bind(i,!1),n}destroy(){this._renderer=null;for(let t in this._activeTextures)this._activeTextures[t]&&this.returnTexture(this._activeTextures[t].texture);this._activeTextures=null}},rR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"canvasText"}}),kV=G(()=>{Ae(),Hz(),BV(),Lt.add(rR),Lt.add(Z3)}),mE,Ak=G(()=>{Mi(),xl(),_g(),mE=class sR extends Ih{constructor(e){e instanceof ka&&(e={context:e});let{context:i,roundPixels:n,...r}=e||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new ka,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,i){return this.context[e](...i),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new sR(this._context.clone()):(this._ownedContext=null,new sR(this._context))}lineStyle(e,i,n){xt(ei,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let r={};return e&&(r.width=e),i&&(r.color=i),n&&(r.alpha=n),this.context.strokeStyle=r,this}beginFill(e,i){xt(ei,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let n={};return e!==void 0&&(n.color=e),i!==void 0&&(n.alpha=i),this.context.fillStyle=n,this}endFill(){xt(ei,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let e=this.context.strokeStyle;return(e.width!==ka.defaultStrokeStyle.width||e.color!==ka.defaultStrokeStyle.color||e.alpha!==ka.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return xt(ei,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return xt(ei,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return xt(ei,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return xt(ei,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return xt(ei,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return xt(ei,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}}),OV,FV,IV=G(()=>{OV={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},FV={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}}}),LV,NV,UV=G(()=>{LV={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},NV={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}}}),yw,xw,GV,HV=G(()=>{hi(),Uh(),s_(),a_(),Gh(),dS(),pu(),Dr(),IV(),UV(),GV=class extends fu{constructor(t){let e=new Fr({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Tt,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});yw??(yw=n_({name:"sdf-shader",bits:[cS,sk(t),OV,LV,gg]})),xw??(xw=r_({name:"sdf-shader",bits:[hS,ak(t),FV,NV,bg]})),super({glProgram:xw,gpuProgram:yw,resources:{localUniforms:e,batchSamplers:ok(t)}})}}}),Ck,wk=G(()=>{Cs(),Mi(),Ck=class extends ma{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return xt(ei,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return xt(ei,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return xt(ei,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return xt(ei,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return xt(ei,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(let e in this.chars)this.chars[e].texture?.destroy();this.chars=null,t&&(this.pages.forEach(e=>e.texture.destroy(!0)),this.pages=null)}}}),_w,aR,zV=G(()=>{Lr(),wr(),vg(),mg(),gi(),hc(),Mi(),Hh(),xS(),Ek(),_l(),wk(),_w=class VV extends Ck{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;let i={...VV.defaultOptions,...e};this._textureSize=i.textureSize,this._mipmap=i.mipmap;let n=i.style.clone();i.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=st.WHITE,n._fill.fill=null),this.applyFillAsTint=i.overrideFill;let r=n.fontSize;n.fontSize=this.baseMeasurementFontSize;let s=fE(n);i.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/r):n.fontSize=this.baseRenderedFontSize=r,this._style=n,this._skipKerning=i.skipKerning??!1,this.resolution=i.resolution??1,this._padding=i.padding??4,i.textureStyle&&(this._textureStyle=i.textureStyle instanceof lu?i.textureStyle:new lu(i.textureStyle)),this.fontMetrics=_s.measureFont(s),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){let i=_s.graphemeSegmenter(e).filter(T=>!this._currentChars.includes(T)).filter((T,A,D)=>D.indexOf(T)===A);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:r,context:s}=n.canvasAndContext,a=n.texture.source,o=this._style,l=this._currentX,h=this._currentY,d=this._currentMaxCharHeight,p=this.baseRenderedFontSize/this.baseMeasurementFontSize,g=this._padding*p,y=!1,v=r.width/this.resolution,S=r.height/this.resolution;for(let T=0;T<i.length;T++){let A=i[T],D=_s.measureText(A,o,r,!1);D.lineHeight=D.height;let R=D.width*p,B=Math.ceil((o.fontStyle==="italic"?2:1)*R),z=D.height*p,L=B+g*2,H=z+g*2;if(y=!1,A!==`
`&&A!=="\r"&&A!=="	"&&A!==" "&&(y=!0,d=Math.ceil(Math.max(H,d))),l+L>v&&(h+=d,d=H,l=0,h+d>S)){a.update();let j=this._nextPage();r=j.canvasAndContext.canvas,s=j.canvasAndContext.context,a=j.texture.source,l=0,h=0,d=0}let te=R/p-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[A]={id:A.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:te,kerning:{}},y){this._drawGlyph(s,D,l+g,h+g,p,o);let j=a.width*p,O=a.height*p,q=new mn(l/j*a.width,h/O*a.height,L/j*a.width,H/O*a.height);this.chars[A].texture=new st({source:a,frame:q}),l+=Math.ceil(L)}}a.update(),this._currentX=l,this._currentY=h,this._currentMaxCharHeight=d,this._skipKerning&&this._applyKerning(i,s)}get pageTextures(){return xt(ei,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,i){let n=this._measureCache;for(let r=0;r<e.length;r++){let s=e[r];for(let a=0;a<this._currentChars.length;a++){let o=this._currentChars[a],l=n[s];l||(l=n[s]=i.measureText(s).width);let h=n[o];h||(h=n[o]=i.measureText(o).width);let d=i.measureText(s+o).width,p=d-(l+h);p&&(this.chars[s].kerning[o]=p),d=i.measureText(s+o).width,p=d-(l+h),p&&(this.chars[o].kerning[s]=p)}}}_nextPage(){this._currentPageIndex++;let e=this.resolution,i=cl.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(i.context,this._style,e);let n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new st({source:new Mh({resource:i.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(r.source.style=this._textureStyle);let s={canvasAndContext:i,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,i,n){i.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=fE(i),i.fontSize=this.baseMeasurementFontSize,e.textBaseline=i.textBaseline;let r=i._stroke,s=r?.width??0;if(r&&(e.lineWidth=s,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=pE(r,e)),i._fill&&(e.fillStyle=pE(i._fill,e)),i.dropShadow){let a=i.dropShadow,o=An.shared.setValue(a.color).toArray(),l=a.blur*n,h=a.distance*n;e.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(a.angle)*h,e.shadowOffsetY=Math.sin(a.angle)*h}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,i,n,r,s,a){let o=i.text,l=i.fontProperties,h=(a._stroke?.width??0)*s,d=n+h/2,p=r-h/2,g=l.descent*s,y=i.lineHeight*s,v=!1;a.stroke&&h&&(v=!0,e.strokeText(o,d,p+y-g));let{shadowBlur:S,shadowOffsetX:T,shadowOffsetY:A}=e;a._fill&&(v&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(o,d,p+y-g)),v&&(e.shadowBlur=S,e.shadowOffsetX=T,e.shadowOffsetY=A)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{canvasAndContext:i,texture:n}=this.pages[e];cl.returnCanvasAndContext(i),n.destroy(!0)}this.pages=null}},_w.defaultOptions={textureSize:512,style:new Ao,mipmap:!0},aR=_w});function Dk(t,e,i,n){let r={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=i.baseLineOffset;let s=r.lines[0],a=null,o=!0,l={width:0,start:0,index:0,positions:[],chars:[]},h=i.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*h,p=e.wordWrapWidth*h,g=e.lineHeight?e.lineHeight*h:i.lineHeight,y=e.wordWrap&&e.breakWords,v=A=>{let D=s.width;for(let R=0;R<l.index;R++){let B=A.positions[R];s.chars.push(A.chars[R]),s.charPositions.push(B+D)}s.width+=A.width,o=!1,l.width=0,l.index=0,l.chars.length=0},S=()=>{let A=s.chars.length-1;if(n){let D=s.chars[A];for(;D===" ";)s.width-=i.chars[D].xAdvance,D=s.chars[--A]}r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,r.lines.push(s),r.height+=g},T=A=>A-d>p;for(let A=0;A<t.length+1;A++){let D,R=A===t.length;R||(D=t[A]);let B=i.chars[D]||i.chars[" "];if(/(?:\s)/.test(D)||D==="\r"||D===`
`||R){if(!o&&e.wordWrap&&T(s.width+l.width)?(S(),v(l),R||s.charPositions.push(0)):(l.start=s.width,v(l),R||s.charPositions.push(0)),D==="\r"||D===`
`)S();else if(!R){let z=B.xAdvance+(B.kerning[a]||0)+d;s.width+=z,s.spaceWidth=z,s.spacesIndex.push(s.charPositions.length),s.chars.push(D)}}else{let z=B.kerning[a]||0,L=B.xAdvance+z+d;y&&T(s.width+l.width+L)&&(v(l),S()),l.positions[l.index++]=l.width+z,l.chars.push(D),l.width+=L}a=D}return S(),e.align==="center"?Mue(r):e.align==="right"?Bue(r):e.align==="justify"&&kue(r),r}function Mue(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],n=t.width/2-i.width/2;for(let r=0;r<i.charPositions.length;r++)i.charPositions[r]+=n}}function Bue(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],n=t.width-i.width;for(let r=0;r<i.charPositions.length;r++)i.charPositions[r]+=n}}function kue(t){let e=t.width;for(let i=0;i<t.lines.length;i++){let n=t.lines[i],r=0,s=n.spacesIndex[r++],a=0,o=n.spacesIndex.length,l=(e-n.width)/o;for(let h=0;h<n.charPositions.length;h++)h===s&&(s=n.spacesIndex[r++],a+=l),n.charPositions[h]+=a}}var _S=G(()=>{});function Oue(t){if(t==="")return[];typeof t=="string"&&(t=[t]);let e=[];for(let i=0,n=t.length;i<n;i++){let r=t[i];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let s=r[0].charCodeAt(0),a=r[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(let o=s,l=a;o<=l;o++)e.push(String.fromCharCode(o))}else e.push(...Array.from(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var jV=G(()=>{}),ty,uL,Jm,h_=G(()=>{PV(),dc(),Mi(),Bi(),Hh(),_l(),zV(),_S(),jV(),ty=0,uL=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=DV(1e3)}getFont(t,e){let i=`${e.fontFamily}-bitmap`,n=!0;if(e._fill.fill&&!e._stroke?(i+=e._fill.fill.styleKey,n=!1):(e._stroke||e.dropShadow)&&(i=`${e.styleKey}-bitmap`,n=!1),!$i.has(i)){let s=Object.create(e);s.lineHeight=0;let a=new aR({style:s,overrideFill:n,overrideSize:!0,...this.defaultOptions});ty++,ty>50&&Mt("BitmapText",`You have dynamically created ${ty} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),a.once("destroy",()=>{ty--,$i.remove(i)}),$i.set(i,a)}let r=$i.get(i);return r.ensureCharacters?.(t),r}getLayout(t,e,i=!0){let n=this.getFont(t,e),r=`${t}-${e.styleKey}-${i}`;if(this.measureCache.has(r))return this.measureCache.get(r);let s=_s.graphemeSegmenter(t),a=Dk(s,e,n,i);return this.measureCache.set(r,a),a}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},xt(ei,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));let i=e?.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};let n=e.style,r=n instanceof Ao?n:new Ao(n),s=e.dynamicFill??this._canUseTintForStyle(r),a=new aR({style:r,overrideFill:s,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1,textureStyle:e.textureStyle}),o=Oue(e.chars);return a.ensureCharacters(o.join("")),$i.set(`${i}-bitmap`,a),a.once("destroy",()=>$i.remove(`${i}-bitmap`)),a}uninstall(t){let e=`${t}-bitmap`,i=$i.get(e);i&&i.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}},Jm=new uL});function lL(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}var cL,oR,XV=G(()=>{dc(),Ae(),Ak(),Hh(),HV(),h_(),_S(),cL=class extends mE{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}},oR=class{constructor(t){this._renderer=t}validateRenderable(t){let e=this._getGpuBitmapText(t);return this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){let i=this._getGpuBitmapText(t);lL(t,i),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,i)),this._renderer.renderPipes.graphics.addRenderable(i,e),i.context.customShader&&this._updateDistanceField(t)}updateRenderable(t){let e=this._getGpuBitmapText(t);lL(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){let{context:i}=e,n=Jm.getFont(t.text,t._style);i.clear(),n.distanceField.type!=="none"&&(i.customShader||(i.customShader=new GV(this._renderer.limits.maxBatchableTextures)));let r=_s.graphemeSegmenter(t.text),s=t._style,a=n.baseLineOffset,o=Dk(r,s,n,!0),l=s.padding,h=o.scale,d=o.width,p=o.height+o.offsetY;s._stroke&&(d+=s._stroke.width/h,p+=s._stroke.width/h),i.translate(-t._anchor._x*d-l,-t._anchor._y*p-l).scale(h,h);let g=n.applyFillAsTint?s._fill.color:16777215,y=n.fontMetrics.fontSize,v=n.lineHeight;s.lineHeight&&(y=s.fontSize/h,v=s.lineHeight/h);let S=(v-y)/2;S-n.baseLineOffset<0&&(S=0);for(let T=0;T<o.lines.length;T++){let A=o.lines[T];for(let D=0;D<A.charPositions.length;D++){let R=A.chars[D],B=n.chars[R];if(B?.texture){let z=B.texture;i.texture(z,g||"black",Math.round(A.charPositions[D]+B.xOffset),Math.round(a+B.yOffset+S),z.orig.width,z.orig.height)}}a+=v}}_getGpuBitmapText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){let e=new cL;return t._gpuData[this._renderer.uid]=e,this._updateContext(t,e),e}_updateDistanceField(t){let e=this._getGpuBitmapText(t).context,i=t._style.fontFamily,n=$i.get(`${i}-bitmap`),{a:r,b:s,c:a,d:o}=t.groupTransform,l=Math.sqrt(r*r+s*s),h=Math.sqrt(a*a+o*o),d=(Math.abs(l)+Math.abs(h))/2,p=n.baseRenderedFontSize/t._style.fontSize,g=d*n.distanceField.range*(1/p);e.customShader.resources.localUniforms.uniforms.uDistance=g}destroy(){this._renderer=null}},oR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"bitmapText"}}),YV=G(()=>{Ae(),XV(),Lt.add(oR)}),qV,WV=G(()=>{l_(),qV=class extends u_{constructor(t){super(),this.generatingTexture=!1,this.currentKey="--",this._renderer=t,t.runners.resolutionChange.add(this)}resolutionChange(){let t=this.renderable;t._autoResolution&&t.onViewUpdate()}destroy(){let{htmlText:t}=this._renderer;t.getReferenceCount(this.currentKey)===null?t.returnTexturePromise(this.texturePromise):t.decreaseReferenceCount(this.currentKey),this._renderer.runners.resolutionChange.remove(this),this.texturePromise=null,this._renderer=null}}}),uR,$V=G(()=>{Ae(),gi(),gk(),WV(),uR=class{constructor(t){this._renderer=t}validateRenderable(t){let e=this._getGpuText(t),i=t.styleKey;return e.currentKey!==i}addRenderable(t,e){let i=this._getGpuText(t);if(t._didTextUpdate){let n=t._autoResolution?this._renderer.resolution:t.resolution;(i.currentKey!==t.styleKey||t.resolution!==n)&&this._updateGpuText(t).catch(r=>{console.error(r)}),t._didTextUpdate=!1,Q3(i,t)}this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._getGpuText(t);e._batcher.updateElement(e)}async _updateGpuText(t){t._didTextUpdate=!1;let e=this._getGpuText(t);if(e.generatingTexture)return;let i=e.texturePromise;e.texturePromise=null,e.generatingTexture=!0,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution;let n=this._renderer.htmlText.getTexturePromise(t);i&&(n=n.finally(()=>{this._renderer.htmlText.decreaseReferenceCount(e.currentKey),this._renderer.htmlText.returnTexturePromise(i)})),e.texturePromise=n,e.currentKey=t.styleKey,e.texture=await n;let r=t.renderGroup||t.parentRenderGroup;r&&(r.structureDidChange=!0),e.generatingTexture=!1,Q3(e,t)}_getGpuText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){let e=new qV(this._renderer);return e.renderable=t,e.transform=t.groupTransform,e.texture=st.EMPTY,e.bounds={minX:0,maxX:1,minY:0,maxY:0},e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}},uR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"htmlText"}});function Fue(){let{userAgent:t}=si.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}var KV=G(()=>{Li()}),vw,Tw,Rk,Pk=G(()=>{Li(),vw="http://www.w3.org/2000/svg",Tw="http://www.w3.org/1999/xhtml",Rk=class{constructor(){this.svgRoot=document.createElementNS(vw,"svg"),this.foreignObject=document.createElementNS(vw,"foreignObject"),this.domElement=document.createElementNS(Tw,"div"),this.styleElement=document.createElementNS(Tw,"style");let{foreignObject:t,svgRoot:e,styleElement:i,domElement:n}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(n),this.image=si.get().createImage()}destroy(){this.svgRoot.remove(),this.foreignObject.remove(),this.styleElement.remove(),this.domElement.remove(),this.image.src="",this.image.remove(),this.svgRoot=null,this.foreignObject=null,this.styleElement=null,this.domElement=null,this.image=null,this.canvasAndContext=null}}});function Iue(t,e){let i=e.fontFamily,n=[],r={},s=/font-family:([^;"\s]+)/g,a=t.match(s);function o(l){r[l]||(n.push(l),r[l]=!0)}if(Array.isArray(i))for(let l=0;l<i.length;l++)o(i[l]);else o(i);a&&a.forEach(l=>{let h=l.split(":")[1].trim();o(h)});for(let l in e.tagStyles){let h=e.tagStyles[l].fontFamily;o(h)}return n}var QV=G(()=>{});async function Lue(t){let e=await(await si.get().fetch(t)).blob(),i=new FileReader;return await new Promise((n,r)=>{i.onloadend=()=>n(i.result),i.onerror=r,i.readAsDataURL(e)})}var ZV=G(()=>{Li()});async function Nue(t,e){let i=await Lue(e);return`@font-face {
        font-family: "${t.fontFamily}";
        font-weight: ${t.fontWeight};
        font-style: ${t.fontStyle};
        src: url('${i}');
    }`}var JV=G(()=>{ZV()});async function Uue(t){let e=t.filter(i=>$i.has(`${i}-and-url`)).map(i=>{if(!DT.has(i)){let{entries:n}=$i.get(`${i}-and-url`),r=[];n.forEach(s=>{let a=s.url,o=s.faces.map(l=>({weight:l.weight,style:l.style}));r.push(...o.map(l=>Nue({fontWeight:l.weight,fontStyle:l.style,fontFamily:i},a)))}),DT.set(i,Promise.all(r).then(s=>s.join(`
`)))}return DT.get(i)});return(await Promise.all(e)).join(`
`)}var DT,ej=G(()=>{dc(),JV(),DT=new Map});function Gue(t,e,i,n,r){let{domElement:s,styleElement:a,svgRoot:o}=r;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${t}</div>`,s.setAttribute("style",`transform: scale(${i});transform-origin: top left; display: inline-block`),a.textContent=n;let{width:l,height:h}=r.image;return o.setAttribute("width",l.toString()),o.setAttribute("height",h.toString()),new XMLSerializer().serializeToString(o)}var tj=G(()=>{});function Hue(t,e){let i=cl.getOptimalCanvasAndContext(t.width,t.height,e),{context:n}=i;return n.clearRect(0,0,t.width,t.height),n.drawImage(t,0,0),i}var ij=G(()=>{vg()});function zue(t,e,i){return new Promise(async n=>{i&&await new Promise(r=>setTimeout(r,100)),t.onload=()=>{n()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"})}var nj=G(()=>{});function Vue(t,e,i,n){n||(n=hL||(hL=new Rk));let{domElement:r,styleElement:s,svgRoot:a}=n;r.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${t}</div>`,r.setAttribute("style","transform-origin: top left; display: inline-block"),i&&(s.textContent=i),document.body.appendChild(a);let o=r.getBoundingClientRect();a.remove();let l=e.padding*2;return{width:o.width-l,height:o.height-l}}var hL,Mk=G(()=>{Pk()}),lR,rj=G(()=>{Ae(),vg(),yl(),Ro(),KV(),Bi(),bl(),Tk(),Pk(),QV(),ej(),tj(),ij(),nj(),Mk(),lR=class{constructor(t){this._activeTextures={},this._renderer=t,this._createCanvas=t.type===fa.WEBGPU}getTexture(t){return this.getTexturePromise(t)}getManagedTexture(t){let e=t.styleKey;if(this._activeTextures[e])return this._increaseReferenceCount(e),this._activeTextures[e].promise;let i=this._buildTexturePromise(t).then(n=>(this._activeTextures[e].texture=n,n));return this._activeTextures[e]={texture:null,promise:i,usageCount:1},i}getReferenceCount(t){return this._activeTextures[t]?.usageCount??null}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];e&&(e.usageCount--,e.usageCount===0&&(e.texture?this._cleanUp(e.texture):e.promise.then(i=>{e.texture=i,this._cleanUp(e.texture)}).catch(()=>{Mt("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[t]=null))}getTexturePromise(t){return this._buildTexturePromise(t)}async _buildTexturePromise(t){let{text:e,style:i,resolution:n,textureStyle:r}=t,s=cr.get(Rk),a=Iue(e,i),o=await Uue(a),l=Vue(e,i,o,s),h=Math.ceil(Math.ceil(Math.max(1,l.width)+i.padding*2)*n),d=Math.ceil(Math.ceil(Math.max(1,l.height)+i.padding*2)*n),p=s.image,g=2;p.width=(h|0)+g,p.height=(d|0)+g;let y=Gue(e,i,n,o,s);await zue(p,y,Fue()&&a.length>0);let v=p,S;this._createCanvas&&(S=Hue(p,n));let T=AV(S?S.canvas:v,p.width-g,p.height-g,n);return r&&(T.source.style=r),this._createCanvas&&(this._renderer.texture.initSource(T.source),cl.returnCanvasAndContext(S)),cr.return(s),T}returnTexturePromise(t){t.then(e=>{this._cleanUp(e)}).catch(()=>{Mt("HTMLTextSystem: Failed to clean texture")})}_cleanUp(t){er.returnTexture(t,!0),t.source.resource=null,t.source.uploadMethodId="unknown"}destroy(){this._renderer=null;for(let t in this._activeTextures)this._activeTextures[t]&&this.returnTexturePromise(this._activeTextures[t].promise);this._activeTextures=null}},lR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"htmlText"}}),sj=G(()=>{Ae(),$V(),rj(),Lt.add(lR),Lt.add(uR)}),Ew,Tg,zh=G(()=>{Nh(),fc(),Ff(),Mi(),Ew=class aj extends Of{constructor(...e){let i=e[0]??{};i instanceof Float32Array&&(xt(ei,"use new MeshGeometry({ positions, uvs, indices }) instead"),i={positions:i,uvs:e[1],indices:e[2]}),i={...aj.defaultOptions,...i};let n=i.positions||new Float32Array([0,0,1,0,1,1,0,1]),r=i.uvs;r||(i.positions?r=new Float32Array(n.length):r=new Float32Array([0,0,1,0,1,1,0,1]));let s=i.indices||new Uint32Array([0,1,2,0,2,3]),a=i.shrinkBuffersToFit,o=new ha({data:n,label:"attribute-mesh-positions",shrinkToFit:a,usage:Ci.VERTEX|Ci.COPY_DST}),l=new ha({data:r,label:"attribute-mesh-uvs",shrinkToFit:a,usage:Ci.VERTEX|Ci.COPY_DST}),h=new ha({data:s,label:"index-mesh-buffer",shrinkToFit:a,usage:Ci.INDEX|Ci.COPY_DST});super({attributes:{aPosition:{buffer:o,format:"float32x2",stride:8,offset:0},aUV:{buffer:l,format:"float32x2",stride:8,offset:0}},indexBuffer:h,topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}},Ew.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1},Tg=Ew}),wm,oj,vS,Eg=G(()=>{wm={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},oj={...wm,vertex:{...wm.vertex,header:wm.vertex.header.replace("group(1)","group(2)")}},vS={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}}}),uj,lj,cj=G(()=>{uj={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},lj={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}}}),Sw,Aw,hj,dj=G(()=>{hi(),Uh(),Eg(),Gh(),pu(),Dr(),gi(),cj(),hj=class extends fu{constructor(){Sw??(Sw=n_({name:"tiling-sprite-shader",bits:[wm,uj,gg]})),Aw??(Aw=r_({name:"tiling-sprite-shader",bits:[vS,lj,bg]}));let t=new Fr({uMapCoord:{value:new Tt,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new Tt,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:Aw,gpuProgram:Sw,resources:{localUniforms:new Fr({uTransformMatrix:{value:new Tt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:t,uTexture:st.EMPTY.source,uSampler:st.EMPTY.source.style}})}updateUniforms(t,e,i,n,r,s){let a=this.resources.tilingUniforms,o=s.width,l=s.height,h=s.textureMatrix,d=a.uniforms.uTextureTransform;d.set(i.a*o/t,i.b*o/e,i.c*l/t,i.d*l/e,i.tx/t,i.ty/e),d.invert(),a.uniforms.uMapCoord=h.mapCoord,a.uniforms.uClampFrame=h.uClampFrame,a.uniforms.uClampOffset=h.uClampOffset,a.uniforms.uTextureTransform=d,a.uniforms.uSizeAnchor[0]=t,a.uniforms.uSizeAnchor[1]=e,a.uniforms.uSizeAnchor[2]=n,a.uniforms.uSizeAnchor[3]=r,s&&(this.resources.uTexture=s.source,this.resources.uSampler=s.source.style)}}}),fj,pj=G(()=>{zh(),fj=class extends Tg{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}});function jue(t,e){let i=t.anchor.x,n=t.anchor.y;e[0]=-i*t.width,e[1]=-n*t.height,e[2]=(1-i)*t.width,e[3]=-n*t.height,e[4]=(1-i)*t.width,e[5]=(1-n)*t.height,e[6]=-i*t.width,e[7]=(1-n)*t.height}var mj=G(()=>{});function Xue(t,e,i,n){let r=0,s=t.length/e,a=n.a,o=n.b,l=n.c,h=n.d,d=n.tx,p=n.ty;for(i*=e;r<s;){let g=t[i],y=t[i+1];t[i]=a*g+l*y+d,t[i+1]=o*g+h*y+p,i+=e,r++}}var gj=G(()=>{});function Yue(t,e){let i=t.texture,n=i.frame.width,r=i.frame.height,s=0,a=0;t.applyAnchorToTexture&&(s=t.anchor.x,a=t.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-a,e[5]=e[7]=1-a;let o=Tt.shared;o.copyFrom(t._tileTransform.matrix),o.tx/=t.width,o.ty/=t.height,o.invert(),o.scale(t.width/n,t.height/r),Xue(e,2,0,o)}var bj=G(()=>{hi(),gj()}),iy,dL,cR,yj=G(()=>{Ae(),t_(),Po(),Ro(),xg(),bS(),zh(),dj(),pj(),mj(),bj(),iy=new fj,dL=class{constructor(){this.canBatch=!0,this.geometry=new Tg({indices:iy.indices.slice(),positions:iy.positions.slice(),uvs:iy.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}},cR=class{constructor(t){this._state=Ia.default2d,this._renderer=t}validateRenderable(t){let e=this._getTilingSpriteData(t),i=e.canBatch;this._updateCanBatch(t);let n=e.canBatch;if(n&&n===i){let{batchableMesh:r}=e;return!r._batcher.checkAndUpdateTexture(r,t.texture)}return i!==n}addRenderable(t,e){let i=this._renderer.renderPipes.batch;this._updateCanBatch(t);let n=this._getTilingSpriteData(t),{geometry:r,canBatch:s}=n;if(s){n.batchableMesh||(n.batchableMesh=new gS);let a=n.batchableMesh;t.didViewUpdate&&(this._updateBatchableMesh(t),a.geometry=r,a.renderable=t,a.transform=t.groupTransform,a.setTexture(t._texture)),a.roundPixels=this._renderer._roundPixels|t._roundPixels,i.addToBatch(a,e)}else i.break(e),n.shader||(n.shader=new hj),this.updateRenderable(t),e.add(t)}execute(t){let{shader:e}=this._getTilingSpriteData(t);e.groups[0]=this._renderer.globalUniforms.bindGroup;let i=e.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=this._renderer._roundPixels|t._roundPixels,o_(t.groupColorAlpha,i.uColor,0),this._state.blendMode=xx(t.groupBlendMode,t.texture._source),this._renderer.encoder.draw({geometry:iy,shader:e,state:this._state})}updateRenderable(t){let e=this._getTilingSpriteData(t),{canBatch:i}=e;if(i){let{batchableMesh:n}=e;t.didViewUpdate&&this._updateBatchableMesh(t),n._batcher.updateElement(n)}else if(t.didViewUpdate){let{shader:n}=e;n.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}}_getTilingSpriteData(t){return t._gpuData[this._renderer.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){let e=new dL;return e.renderable=t,t._gpuData[this._renderer.uid]=e,e}_updateBatchableMesh(t){let e=this._getTilingSpriteData(t),{geometry:i}=e,n=t.texture.source.style;n.addressMode!=="repeat"&&(n.addressMode="repeat",n.update()),Yue(t,i.uvs),jue(t,i.positions)}destroy(){this._renderer=null}_updateCanBatch(t){let e=this._getTilingSpriteData(t),i=t.texture,n=!0;return this._renderer.type===fa.WEBGL&&(n=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=i.textureMatrix.isSimple&&(n||i.source.isPowerOfTwo),e.canBatch}},cR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"tilingSprite"}}),xj=G(()=>{Ae(),yj(),Lt.add(cR)}),Cw,Bk,TS=G(()=>{Mi(),zh(),Cw=class _j extends Tg{constructor(...e){super({});let i=e[0]??{};typeof i=="number"&&(xt(ei,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),i={width:i,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(i)}build(e){e={..._j.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;let i=this.verticesX*this.verticesY,n=[],r=[],s=[],a=this.verticesX-1,o=this.verticesY-1,l=this.width/a,h=this.height/o;for(let p=0;p<i;p++){let g=p%this.verticesX,y=p/this.verticesX|0;n.push(g*l,y*h),r.push(g/a,y/o)}let d=a*o;for(let p=0;p<d;p++){let g=p%a,y=p/a|0,v=y*this.verticesX+g,S=y*this.verticesX+g+1,T=(y+1)*this.verticesX+g,A=(y+1)*this.verticesX+g+1;s.push(v,S,T,S,A,T)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}},Cw.defaultOptions={width:100,height:100,verticesX:10,verticesY:10},Bk=Cw}),ww,yh,kk=G(()=>{TS(),ww=class vj extends Bk{constructor(e={}){e={...vj.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=e.anchor?.x,this._anchorY=e.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){let e=this.positions,{width:i,height:n,_leftWidth:r,_rightWidth:s,_topHeight:a,_bottomHeight:o,_anchorX:l,_anchorY:h}=this,d=r+s,p=i>d?1:i/d,g=a+o,y=n>g?1:n/g,v=Math.min(p,y),S=l*i,T=h*n;e[0]=e[8]=e[16]=e[24]=-S,e[2]=e[10]=e[18]=e[26]=r*v-S,e[4]=e[12]=e[20]=e[28]=i-s*v-S,e[6]=e[14]=e[22]=e[30]=i-S,e[1]=e[3]=e[5]=e[7]=-T,e[9]=e[11]=e[13]=e[15]=a*v-T,e[17]=e[19]=e[21]=e[23]=n-o*v-T,e[25]=e[27]=e[29]=e[31]=n-T,this.getBuffer("aPosition").update()}updateUvs(){let e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let i=1/this._originalWidth,n=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.getBuffer("aUV").update()}},ww.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100},yh=ww}),fL,hR,Tj=G(()=>{Ae(),bS(),kk(),fL=class extends gS{constructor(){super(),this.geometry=new yh}destroy(){this.geometry.destroy()}},hR=class{constructor(t){this._renderer=t}addRenderable(t,e){let i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){let e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}_updateBatchableSprite(t,e){e.geometry.update(t),e.setTexture(t._texture)}_getGpuSprite(t){return t._gpuData[this._renderer.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=t._gpuData[this._renderer.uid]=new fL,i=e;return i.renderable=t,i.transform=t.groupTransform,i.texture=t._texture,i.roundPixels=this._renderer._roundPixels|t._roundPixels,t.didViewUpdate||this._updateBatchableSprite(t,i),e}destroy(){this._renderer=null}},hR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"nineSliceSprite"}}),Ej=G(()=>{Ae(),Tj(),Lt.add(hR)}),dR,Sj=G(()=>{Ae(),dR=class{constructor(t){this._renderer=t}push(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){t.action==="pushFilter"?this._renderer.filter.push(t):t.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}},dR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"filter"}}),Dw,Vh,vl=G(()=>{ga(),Ha(),pu(),Po(),Dw=class fR extends fu{constructor(e){e={...fR.defaultOptions,...e},super(e),this.enabled=!0,this._state=Ia.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,i,n,r){e.applyFilter(this,i,n,r)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){let{gpu:i,gl:n,...r}=e,s,a;return i&&(s=du.from(i)),n&&(a=Do.from(n)),new fR({gpuProgram:s,glProgram:a,...r})}},Dw.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0},Vh=Dw}),ES,d_=G(()=>{ES=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`}),Aj,Cj=G(()=>{Aj=`in vec2 vTextureCoord;
out vec4 finalColor;
uniform sampler2D uTexture;
void main() {
    finalColor = texture(uTexture, vTextureCoord);
}
`}),pR,wj=G(()=>{pR=`struct GlobalFilterUniforms {
  uInputSize: vec4<f32>,
  uInputPixel: vec4<f32>,
  uInputClamp: vec4<f32>,
  uOutputFrame: vec4<f32>,
  uGlobalFrame: vec4<f32>,
  uOutputTexture: vec4<f32>,
};

@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler: sampler;

struct VSOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) uv: vec2<f32>
};

fn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition: vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {
    return textureSample(uTexture, uSampler, uv);
}
`}),Dj,Rj=G(()=>{ga(),Ha(),vl(),d_(),Cj(),wj(),Dj=class extends Vh{constructor(){let t=du.from({vertex:{source:pR,entryPoint:"mainVertex"},fragment:{source:pR,entryPoint:"mainFragment"},name:"passthrough-filter"}),e=Do.from({vertex:ES,fragment:Aj,name:"passthrough-filter"});super({gpuProgram:t,glProgram:e})}}});function pL(t,e,i,n,r,s,a,o){let l=a-i,h=o-n,d=r-i,p=s-n,g=t-i,y=e-n,v=l*l+h*h,S=l*d+h*p,T=l*g+h*y,A=d*d+p*p,D=d*g+p*y,R=1/(v*A-S*S),B=(A*T-S*D)*R,z=(v*D-S*T)*R;return B>=0&&z>=0&&B+z<1}var Pj=G(()=>{}),que=G(()=>{bk(),wr()});function Wue(t,e){e.clear();let i=e.matrix;for(let n=0;n<t.length;n++){let r=t[n];if(r.globalDisplayStatus<7)continue;let s=r.renderGroup??r.parentRenderGroup;s?.isCachedAsTexture?e.matrix=mR.copyFrom(s.textureOffsetInverseTransform).append(r.worldTransform):s?._parentCacheAsTextureRenderGroup?e.matrix=mR.copyFrom(s._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(r.groupTransform):e.matrix=r.worldTransform,e.addBounds(r.bounds)}return e.matrix=i,e}var mR,Mj=G(()=>{hi(),mR=new Tt}),mL,gL,gR,Bj=G(()=>{Ae(),Rj(),hi(),Lh(),Ff(),Dr(),gi(),yl(),Ro(),ws(),Mj(),Bi(),mL=new Of({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),gL=class{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new cs,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0},this.firstEnabledIndex=-1,this.lastEnabledIndex=-1}},gR=class{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new Fr({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new rl({}),this.renderer=t}get activeBackTexture(){return this._activeFilterData?.backTexture}push(t){let e=this.renderer,i=t.filterEffect.filters,n=this._pushFilterData();n.skip=!1,n.filters=i,n.container=t.container,n.outputRenderSurface=e.renderTarget.renderSurface;let r=e.renderTarget.renderTarget.colorTexture.source,s=r.resolution,a=r.antialias;if(i.every(g=>!g.enabled)){n.skip=!0;return}let o=n.bounds;if(this._calculateFilterArea(t,o),this._calculateFilterBounds(n,e.renderTarget.rootViewPort,a,s,1),n.skip)return;let l=this._getPreviousFilterData(),h=this._findFilterResolution(s),d=0,p=0;l&&(d=l.bounds.minX,p=l.bounds.minY),this._calculateGlobalFrame(n,d,p,h,r.width,r.height),this._setupFilterTextures(n,o,e,l)}generateFilteredTexture({texture:t,filters:e}){let i=this._pushFilterData();this._activeFilterData=i,i.skip=!1,i.filters=e;let n=t.source,r=n.resolution,s=n.antialias;if(e.every(h=>!h.enabled))return i.skip=!0,t;let a=i.bounds;if(a.addRect(t.frame),this._calculateFilterBounds(i,a.rectangle,s,r,0),i.skip)return t;let o=r;this._calculateGlobalFrame(i,0,0,o,n.width,n.height),i.outputRenderSurface=er.getOptimalTexture(a.width,a.height,i.resolution,i.antialias),i.backTexture=st.EMPTY,i.inputTexture=t,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(i,!0);let l=i.outputRenderSurface;return l.source.alphaMode="premultiplied-alpha",l}pop(){let t=this.renderer,e=this._popFilterData();e.skip||(t.globalUniforms.pop(),t.renderTarget.finishRenderPass(),this._activeFilterData=e,this._applyFiltersToTexture(e,!1),e.blendRequired&&er.returnTexture(e.backTexture),er.returnTexture(e.inputTexture))}getBackTexture(t,e,i){let n=t.colorTexture.source._resolution,r=er.getOptimalTexture(e.width,e.height,n,!1),s=e.minX,a=e.minY;i&&(s-=i.minX,a-=i.minY),s=Math.floor(s*n),a=Math.floor(a*n);let o=Math.ceil(e.width*n),l=Math.ceil(e.height*n);return this.renderer.renderTarget.copyToTexture(t,r,{x:s,y:a},{width:o,height:l},{x:0,y:0}),r}applyFilter(t,e,i,n){let r=this.renderer,s=this._activeFilterData,a=s.outputRenderSurface===i,o=r.renderTarget.rootRenderTarget.colorTexture.source._resolution,l=this._findFilterResolution(o),h=0,d=0;if(a){let g=this._findPreviousFilterOffset();h=g.x,d=g.y}this._updateFilterUniforms(e,i,s,h,d,l,a,n);let p=t.enabled?t:this._getPassthroughFilter();this._setupBindGroupsAndRender(p,e,r)}calculateSpriteMatrix(t,e){let i=this._activeFilterData,n=t.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),r=e.worldTransform.copyTo(Tt.shared),s=e.renderGroup||e.parentRenderGroup;return s&&s.cacheToLocalTransform&&r.prepend(s.cacheToLocalTransform),r.invert(),n.prepend(r),n.scale(1/e.texture.orig.width,1/e.texture.orig.height),n.translate(e.anchor.x,e.anchor.y),n}destroy(){this._passthroughFilter?.destroy(!0),this._passthroughFilter=null}_getPassthroughFilter(){return this._passthroughFilter??(this._passthroughFilter=new Dj),this._passthroughFilter}_setupBindGroupsAndRender(t,e,i){if(i.renderPipes.uniformBatch){let n=i.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(n,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,i.encoder.draw({geometry:mL,shader:t,state:t._state,topology:"triangle-list"}),i.type===fa.WEBGL&&i.renderTarget.finishRenderPass()}_setupFilterTextures(t,e,i,n){if(t.backTexture=st.EMPTY,t.inputTexture=er.getOptimalTexture(e.width,e.height,t.resolution,t.antialias),t.blendRequired){i.renderTarget.finishRenderPass();let r=i.renderTarget.getRenderTarget(t.outputRenderSurface);t.backTexture=this.getBackTexture(r,e,n?.bounds)}i.renderTarget.bind(t.inputTexture,!0),i.globalUniforms.push({offset:e})}_calculateGlobalFrame(t,e,i,n,r,s){let a=t.globalFrame;a.x=e*n,a.y=i*n,a.width=r*n,a.height=s*n}_updateFilterUniforms(t,e,i,n,r,s,a,o){let l=this._filterGlobalUniforms.uniforms,h=l.uOutputFrame,d=l.uInputSize,p=l.uInputPixel,g=l.uInputClamp,y=l.uGlobalFrame,v=l.uOutputTexture;a?(h[0]=i.bounds.minX-n,h[1]=i.bounds.minY-r):(h[0]=0,h[1]=0),h[2]=t.frame.width,h[3]=t.frame.height,d[0]=t.source.width,d[1]=t.source.height,d[2]=1/d[0],d[3]=1/d[1],p[0]=t.source.pixelWidth,p[1]=t.source.pixelHeight,p[2]=1/p[0],p[3]=1/p[1],g[0]=.5*p[2],g[1]=.5*p[3],g[2]=t.frame.width*d[2]-.5*p[2],g[3]=t.frame.height*d[3]-.5*p[3];let S=this.renderer.renderTarget.rootRenderTarget.colorTexture;y[0]=n*s,y[1]=r*s,y[2]=S.source.width*s,y[3]=S.source.height*s,e instanceof st&&(e.source.resource=null);let T=this.renderer.renderTarget.getRenderTarget(e);this.renderer.renderTarget.bind(e,!!o),e instanceof st?(v[0]=e.frame.width,v[1]=e.frame.height):(v[0]=T.width,v[1]=T.height),v[2]=T.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(t){let e=this._filterStackIndex-1;for(;e>0&&this._filterStack[e].skip;)--e;return e>0&&this._filterStack[e].inputTexture?this._filterStack[e].inputTexture.source._resolution:t}_findPreviousFilterOffset(){let t=0,e=0,i=this._filterStackIndex;for(;i>0;){i--;let n=this._filterStack[i];if(!n.skip){t=n.bounds.minX,e=n.bounds.minY;break}}return{x:t,y:e}}_calculateFilterArea(t,e){if(t.renderables?Wue(t.renderables,e):t.filterEffect.filterArea?(e.clear(),e.addRect(t.filterEffect.filterArea),e.applyMatrix(t.container.worldTransform)):t.container.getFastGlobalBounds(!0,e),t.container){let i=(t.container.renderGroup||t.container.parentRenderGroup).cacheToLocalTransform;i&&e.applyMatrix(i)}}_applyFiltersToTexture(t,e){let i=t.inputTexture,n=t.bounds,r=t.filters,s=t.firstEnabledIndex,a=t.lastEnabledIndex;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(t.backTexture.source,3),s===a)r[s].apply(this,i,t.outputRenderSurface,e);else{let o=t.inputTexture,l=er.getOptimalTexture(n.width,n.height,o.source._resolution,!1),h=l;for(let d=s;d<a;d++){let p=r[d];if(!p.enabled)continue;p.apply(this,o,h,!0);let g=o;o=h,h=g}r[a].apply(this,o,t.outputRenderSurface,e),er.returnTexture(l)}}_calculateFilterBounds(t,e,i,n,r){let s=this.renderer,a=t.bounds,o=t.filters,l=1/0,h=0,d=!0,p=!1,g=!1,y=!0,v=-1,S=-1;for(let T=0;T<o.length;T++){let A=o[T];if(A.enabled){if(v===-1&&(v=T),S=T,l=Math.min(l,A.resolution==="inherit"?n:A.resolution),h+=A.padding,A.antialias==="off"?d=!1:A.antialias==="inherit"&&d&&(d=i),A.clipToViewport||(y=!1),!(A.compatibleRenderers&s.type)){g=!1;break}if(A.blendRequired&&!(s.backBuffer?.useBackBuffer??!0)){Mt("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),g=!1;break}g=!0,p||(p=A.blendRequired)}}if(!g){t.skip=!0;return}if(y&&a.fitBounds(0,e.width/n,0,e.height/n),a.scale(l).ceil().scale(1/l).pad((h|0)*r),!a.isPositive){t.skip=!0;return}t.antialias=d,t.resolution=l,t.blendRequired=p,t.firstEnabledIndex=v,t.lastEnabledIndex=S}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let t,e=this._filterStackIndex-1;for(;e>0&&(e--,t=this._filterStack[e],!!t.skip););return t}_pushFilterData(){let t=this._filterStack[this._filterStackIndex];return t||(t=this._filterStack[this._filterStackIndex]=new gL),this._filterStackIndex++,t}},gR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"filter"}}),kj=G(()=>{Ae(),Sj(),Bj(),Lt.add(gR),Lt.add(dR)}),$ue={},Kue=G(()=>{Xae(),m7(),Yae(),Wae(),WB(),ZB(),yz(),_z(),Nz(),kV(),YV(),sj(),xj(),Ej(),kj()}),Que={},Zue=G(()=>{m7(),WB(),ZB(),yz(),_z(),Nz(),kV(),YV(),sj(),xj(),Ej(),kj()});async function Jue(t){if(!t)for(let e=0;e<gE.length;e++){let i=gE[e];if(i.value.test()){await i.value.load();return}}}var gE,Oj=G(()=>{Ae(),gE=[],Lt.handleByNamedList(ge.Environment,gE)});function Fj(){if(typeof ny=="boolean")return ny;try{ny=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ny=!1}return ny}var ny,Ok=G(()=>{}),ua,Sg=G(()=>{ua=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(ua||{})}),Fk,Ik=G(()=>{Fk=class{constructor(t){this.items=[],this._name=t}emit(t,e,i,n,r,s,a,o){let{name:l,items:h}=this;for(let d=0,p=h.length;d<p;d++)h[d][l](t,e,i,n,r,s,a,o);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){let e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}}),bL,Rw,f_,p_=G(()=>{Lr(),Oj(),Ds(),Ok(),Nr(),Mi(),Cf(),Sg(),Ik(),Cs(),bL=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Rw=class Ij extends ma{constructor(e){super(),this.uid=Sn("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;let i=[...bL,...this.config.runners??[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){let i=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Jue(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let n in this._systemsHash)e={...this._systemsHash[n].constructor.defaultOptions,...e};e={...Ij.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(e);this._initOptions=e}render(e,i){let n=e;if(n instanceof Qi&&(n={container:n},i&&(xt(ei,"passing a second argument is deprecated, please use render options instead"),n.target=i.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??(n.clearColor=this.background.colorRgba),n.clear??(n.clear=this.background.clearBeforeRender)),n.clearColor){let r=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=r?n.clearColor:An.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),n.container.visible&&(n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n))}resize(e,i,n){let r=this.view.resolution;this.view.resize(e,i,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==r&&this.runners.resolutionChange.emit(n)}clear(e={}){let i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=ua.ALL);let{clear:n,clearColor:r,target:s}=e;An.shared.setValue(r??this.background.colorRgba),i.renderTarget.clear(s,n,An.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(i=>{this.runners[i]=new Fk(i)})}_addSystems(e){let i;for(i in e){let n=e[i];this._addSystem(n.value,n.name)}}_addSystem(e,i){let n=new e(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=n,this._systemsHash[i]=n;for(let r in this.runners)this.runners[r].add(n);return this}_addPipes(e,i){let n=i.reduce((r,s)=>(r[s.name]=s.value,r),{});e.forEach(r=>{let s=r.value,a=r.name,o=n[a];this.renderPipes[a]=new s(this,o?new o:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(i=>{i.destroy()}),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Af.release(),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Fj())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}},Rw.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1},f_=Rw}),bR,Lj=G(()=>{Ae(),hi(),lS(),Uh(),s_(),a_(),Eg(),Gh(),pu(),Dr(),bR=class{constructor(){this._maxTextures=0}contextChange(t){let e=new Fr({uTransformMatrix:{value:new Tt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=t.limits.maxBatchableTextures;let i=n_({name:"graphics",bits:[cS,sk(this._maxTextures),oj,gg]});this.shader=new fu({gpuProgram:i,resources:{localUniforms:e}})}execute(t,e){let i=e.context,n=i.customShader||this.shader,r=t.renderer,s=r.graphicsContext,{batcher:a,instructions:o}=s.getContextRenderData(i),l=r.encoder;l.setGeometry(a.geometry,n.gpuProgram);let h=r.globalUniforms.bindGroup;l.setBindGroup(0,h,n.gpuProgram);let d=r.renderPipes.uniformBatch.getUniformBindGroup(n.resources.localUniforms,!0);l.setBindGroup(2,d,n.gpuProgram);let p=o.instructions,g=null;for(let y=0;y<o.instructionSize;y++){let v=p[y];if(v.topology!==g&&(g=v.topology,l.setPipelineFromGeometryProgramAndState(a.geometry,n.gpuProgram,t.state,v.topology)),n.groups[1]=v.bindGroup,!v.gpuBindGroup){let S=v.textures;v.bindGroup=JB(S.textures,S.count,this._maxTextures),v.gpuBindGroup=r.bindGroup.getBindGroup(v.bindGroup,n.gpuProgram,1)}l.setBindGroup(1,v.bindGroup,n.gpuProgram),l.renderPassEncoder.drawIndexed(v.size,1,v.start)}}destroy(){this.shader.destroy(!0),this.shader=null}},bR.extension={type:[ge.WebGPUPipesAdaptor],name:"graphics"}}),Nj,Uj,Lk=G(()=>{Nj={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},Uj={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}}}),yR,Gj=G(()=>{Ae(),hi(),Uh(),Eg(),Gh(),Lk(),pu(),gi(),Bi(),yR=class{init(){let t=n_({name:"mesh",bits:[wm,Nj,gg]});this._shader=new fu({gpuProgram:t,resources:{uTexture:st.EMPTY._source,uSampler:st.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Tt}}}})}execute(t,e){let i=t.renderer,n=e._shader;if(!n)n=this._shader,n.groups[2]=i.texture.getTextureBindGroup(e.texture);else if(!n.gpuProgram){Mt("Mesh shader has no gpuProgram",e.shader);return}let r=n.gpuProgram;if(r.autoAssignGlobalUniforms&&(n.groups[0]=i.globalUniforms.bindGroup),r.autoAssignLocalUniforms){let s=t.localUniforms;n.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(s,!0)}i.encoder.draw({geometry:e._geometry,shader:n,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}},yR.extension={type:[ge.WebGPUPipesAdaptor],name:"mesh"}}),ry,xR,Hj=G(()=>{Ae(),Po(),lS(),ry=Ia.for2d(),xR=class{start(t,e,i){let n=t.renderer,r=n.encoder,s=i.gpuProgram;this._shader=i,this._geometry=e,r.setGeometry(e,s),ry.blendMode="normal",n.pipeline.getPipeline(e,s,ry);let a=n.globalUniforms.bindGroup;r.resetBindGroup(1),r.setBindGroup(0,a,s)}execute(t,e){let i=this._shader.gpuProgram,n=t.renderer,r=n.encoder;if(!e.bindGroup){let o=e.textures;e.bindGroup=JB(o.textures,o.count,n.limits.maxBatchableTextures)}ry.blendMode=e.blendMode;let s=n.bindGroup.getBindGroup(e.bindGroup,i,1),a=n.pipeline.getPipeline(this._geometry,i,ry,e.topology);e.bindGroup._touch(n.textureGC.count),r.setPipeline(a),r.renderPassEncoder.setBindGroup(1,s),r.renderPassEncoder.drawIndexed(e.size,1,e.start)}},xR.extension={type:[ge.WebGPUPipesAdaptor],name:"batch"}}),_R,zj=G(()=>{Ae(),_R=class{constructor(t){this._renderer=t}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&t.render(this._renderer)}destroy(){this._renderer=null}},_R.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"customRender"}});function vR(t,e){let i=t.instructionSet,n=i.instructions;for(let r=0;r<i.instructionSize;r++){let s=n[r];e[s.renderPipeId].execute(s)}}var Nk=G(()=>{}),yL,TR,Vj=G(()=>{Ae(),hi(),bl(),l_(),Nk(),yL=new Tt,TR=class{constructor(t){this._renderer=t}addRenderGroup(t,e){t.isCachedAsTexture?this._addRenderableCacheAsTexture(t,e):this._addRenderableDirect(t,e)}execute(t){t.isRenderable&&(t.isCachedAsTexture?this._executeCacheAsTexture(t):this._executeDirect(t))}destroy(){this._renderer=null}_addRenderableDirect(t,e){this._renderer.renderPipes.batch.break(e),t._batchableRenderGroup&&(cr.return(t._batchableRenderGroup),t._batchableRenderGroup=null),e.add(t)}_addRenderableCacheAsTexture(t,e){let i=t._batchableRenderGroup??(t._batchableRenderGroup=cr.get(u_));i.renderable=t.root,i.transform=t.root.relativeGroupTransform,i.texture=t.texture,i.bounds=t._textureBounds,e.add(t),this._renderer.renderPipes.blendMode.pushBlendMode(t,t.root.groupBlendMode,e),this._renderer.renderPipes.batch.addToBatch(i,e),this._renderer.renderPipes.blendMode.popBlendMode(e)}_executeCacheAsTexture(t){if(t.textureNeedsUpdate){t.textureNeedsUpdate=!1;let e=yL.identity().translate(-t._textureBounds.x,-t._textureBounds.y);this._renderer.renderTarget.push(t.texture,!0,null,t.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:e,worldColor:4294967295,offset:{x:0,y:0}}),vR(t,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}t._batchableRenderGroup._batcher.updateElement(t._batchableRenderGroup),t._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(t){this._renderer.globalUniforms.push({worldTransformMatrix:t.inverseParentTextureTransform,worldColor:t.worldColorAlpha}),vR(t,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}},TR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"renderGroup"}});function ER(t,e){e||(e=0);for(let i=e;i<t.length&&t[i];i++)t[i]=null}var Uk=G(()=>{});function jj(t,e=!1){ele(t);let i=t.childrenToUpdate,n=t.updateTick++;for(let r in i){let s=Number(r),a=i[r],o=a.list,l=a.index;for(let h=0;h<l;h++){let d=o[h];d.parentRenderGroup===t&&d.relativeRenderGroupDepth===s&&Xj(d,n,0)}ER(o,l),a.index=0}if(e)for(let r=0;r<t.renderGroupChildren.length;r++)jj(t.renderGroupChildren[r],e)}function ele(t){let e=t.root,i;if(t.renderGroupParent){let n=t.renderGroupParent;t.worldTransform.appendFrom(e.relativeGroupTransform,n.worldTransform),t.worldColor=sE(e.groupColor,n.worldColor),i=e.groupAlpha*n.worldAlpha}else t.worldTransform.copyFrom(e.localTransform),t.worldColor=e.localColor,i=e.localAlpha;i=i<0?0:i>1?1:i,t.worldAlpha=i,t.worldColorAlpha=t.worldColor+((i*255|0)<<24)}function Xj(t,e,i){if(e===t.updateTick)return;t.updateTick=e,t.didChange=!1;let n=t.localTransform;t.updateLocalTransform();let r=t.parent;if(r&&!r.renderGroup?(i|=t._updateFlags,t.relativeGroupTransform.appendFrom(n,r.relativeGroupTransform),i&SR&&xL(t,r,i)):(i=t._updateFlags,t.relativeGroupTransform.copyFrom(n),i&SR&&xL(t,Yj,i)),!t.renderGroup){let s=t.children,a=s.length;for(let h=0;h<a;h++)Xj(s[h],e,i);let o=t.parentRenderGroup,l=t;l.renderPipeId&&!o.structureDidChange&&o.updateRenderable(l)}}function xL(t,e,i){if(i&Wy){t.groupColor=sE(t.localColor,e.groupColor);let n=t.localAlpha*e.groupAlpha;n=n<0?0:n>1?1:n,t.groupAlpha=n,t.groupColorAlpha=t.groupColor+((n*255|0)<<24)}i&uE&&(t.groupBlendMode=t.localBlendMode==="inherit"?e.groupBlendMode:t.localBlendMode),i&Sm&&(t.globalDisplayStatus=t.localDisplayStatus&e.globalDisplayStatus),t._updateFlags=0}var Yj,SR,qj=G(()=>{Ds(),Uk(),PB(),Yj=new Qi,SR=Sm|Wy|uE});function tle(t,e){let{list:i}=t.childrenRenderablesToUpdate,n=!1;for(let r=0;r<t.childrenRenderablesToUpdate.index;r++){let s=i[r];if(n=e[s.renderPipeId].validateRenderable(s),n)break}return t.structureDidChange=n,n}var Wj=G(()=>{}),_L,AR,$j=G(()=>{Ae(),hi(),yl(),hc(),ws(),Uk(),Nk(),qj(),Wj(),_L=new Tt,AR=class{constructor(t){this._renderer=t}render({container:t,transform:e}){let i=t.parent,n=t.renderGroup.renderGroupParent;t.parent=null,t.renderGroup.renderGroupParent=null;let r=this._renderer,s=_L;e&&(s.copyFrom(t.renderGroup.localTransform),t.renderGroup.localTransform.copyFrom(e));let a=r.renderPipes;this._updateCachedRenderGroups(t.renderGroup,null),this._updateRenderGroups(t.renderGroup),r.globalUniforms.start({worldTransformMatrix:e?t.renderGroup.localTransform:t.renderGroup.worldTransform,worldColor:t.renderGroup.worldColorAlpha}),vR(t.renderGroup,a),a.uniformBatch&&a.uniformBatch.renderEnd(),e&&t.renderGroup.localTransform.copyFrom(s),t.parent=i,t.renderGroup.renderGroupParent=n}destroy(){this._renderer=null}_updateCachedRenderGroups(t,e){if(t._parentCacheAsTextureRenderGroup=e,t.isCachedAsTexture){if(!t.textureNeedsUpdate)return;e=t}for(let i=t.renderGroupChildren.length-1;i>=0;i--)this._updateCachedRenderGroups(t.renderGroupChildren[i],e);if(t.invalidateMatrices(),t.isCachedAsTexture){if(t.textureNeedsUpdate){let i=t.root.getLocalBounds();i.ceil();let n=t.texture;t.texture&&er.returnTexture(t.texture,!0);let r=this._renderer,s=t.textureOptions.resolution||r.view.resolution,a=t.textureOptions.antialias??r.view.antialias,o=t.textureOptions.scaleMode??"linear",l=er.getOptimalTexture(i.width,i.height,s,a);l._source.style=new lu({scaleMode:o}),t.texture=l,t._textureBounds||(t._textureBounds=new cs),t._textureBounds.copyFrom(i),n!==t.texture&&t.renderGroupParent&&(t.renderGroupParent.structureDidChange=!0)}}else t.texture&&(er.returnTexture(t.texture,!0),t.texture=null)}_updateRenderGroups(t){let e=this._renderer,i=e.renderPipes;if(t.runOnRender(e),t.instructionSet.renderPipes=i,t.structureDidChange?ER(t.childrenRenderablesToUpdate.list,0):tle(t,i),jj(t),t.structureDidChange?(t.structureDidChange=!1,this._buildInstructions(t,e)):this._updateRenderables(t),t.childrenRenderablesToUpdate.index=0,e.renderPipes.batch.upload(t.instructionSet),!(t.isCachedAsTexture&&!t.textureNeedsUpdate))for(let n=0;n<t.renderGroupChildren.length;n++)this._updateRenderGroups(t.renderGroupChildren[n])}_updateRenderables(t){let{list:e,index:i}=t.childrenRenderablesToUpdate;for(let n=0;n<i;n++){let r=e[n];r.didViewUpdate&&t.updateRenderable(r)}ER(e,i)}_buildInstructions(t,e){let i=t.root,n=t.instructionSet;n.reset();let r=e.renderPipes?e:e.batch.renderer,s=r.renderPipes;s.batch.buildStart(n),s.blendMode.buildStart(),s.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(n,r,null),s.batch.buildEnd(n),s.blendMode.buildEnd(n)}},AR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"renderGroup"}}),CR,Kj=G(()=>{Ae(),l_(),CR=class{constructor(t){this._renderer=t}addRenderable(t,e){let i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){let e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}_updateBatchableSprite(t,e){e.bounds=t.visualBounds,e.texture=t._texture}_getGpuSprite(t){return t._gpuData[this._renderer.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=new u_;return e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.bounds=t.visualBounds,e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}},CR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"sprite"}}),Cx,Gk=G(()=>{Cs(),Cx="8.14.0"}),wR,DR,Hk=G(()=>{Ae(),Gk(),wR=class{static init(){globalThis.__PIXI_APP_INIT__?.(this,Cx)}static destroy(){}},wR.extension=ge.Application,DR=class{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,Cx)}destroy(){this._renderer=null}},DR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"initHook",priority:-10}}),x1,RR,Qj=G(()=>{Ae(),Po(),uk(),x1=class Zj{constructor(e,i){this.state=Ia.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=i,this._adaptor.init?.(this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let i=this._batchersByInstructionSet[e.uid];i||(i=this._batchersByInstructionSet[e.uid]=Object.create(null),i.default||(i.default=new hE({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=i,this._activeBatch=this._activeBatches.default;for(let n in this._activeBatches)this._activeBatches[n].begin()}addToBatch(e,i){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(i);let n=this._activeBatches[e.batcherName];n||(n=this._activeBatches[e.batcherName]=Zj.getBatcher(e.batcherName),n.begin()),this._activeBatch=n}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);let i=this._activeBatches;for(let n in i){let r=i[n],s=r.geometry;s.indexBuffer.setDataWithSize(r.indexBuffer,r.indexSize,!0),s.buffers[0].setDataWithSize(r.attributeBuffer.float32View,r.attributeSize,!1)}}upload(e){let i=this._batchersByInstructionSet[e.uid];for(let n in i){let r=i[n],s=r.geometry;r.dirty&&(r.dirty=!1,s.buffers[0].update(r.attributeSize*4))}}execute(e){if(e.action==="startBatch"){let i=e.batcher,n=i.geometry,r=i.shader;this._adaptor.start(this,n,r)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}},x1.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"batch"},x1._availableBatchers=Object.create(null),RR=x1,Lt.handleByMap(ge.Batcher,RR._availableBatchers),Lt.add(hE)}),Jj,eX=G(()=>{Jj=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`}),tX,iX=G(()=>{tX=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`}),PR,nX=G(()=>{PR=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`}),rX,sX=G(()=>{hi(),ga(),Ha(),Dr(),LB(),vl(),eX(),iX(),nX(),rX=class extends Vh{constructor(t){let{sprite:e,...i}=t,n=new IB(e.texture),r=new Fr({uFilterMatrix:{value:new Tt,type:"mat3x3<f32>"},uMaskClamp:{value:n.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:t.inverse?1:0,type:"f32"}}),s=du.from({vertex:{source:PR,entryPoint:"mainVertex"},fragment:{source:PR,entryPoint:"mainFragment"}}),a=Do.from({vertex:tX,fragment:Jj,name:"mask-filter"});super({...i,gpuProgram:s,glProgram:a,clipToViewport:!1,resources:{filterUniforms:r,uMaskTexture:e.texture.source}}),this.sprite=e,this._textureMatrix=n}set inverse(t){this.resources.filterUniforms.uniforms.uInverse=t?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(t,e,i,n){this._textureMatrix.texture=this.sprite.texture,t.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,t.applyFilter(this,e,i,n)}}}),vL,TL,MR,aX=G(()=>{Ae(),eS(),sX(),ws(),fg(),Bf(),bl(),gi(),yl(),Ro(),vL=new cs,TL=class extends gx{constructor(){super(),this.filters=[new rX({sprite:new Eo(st.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(t){this.filters[0].sprite=t}get inverse(){return this.filters[0].inverse}set inverse(t){this.filters[0].inverse=t}},MR=class{constructor(t){this._activeMaskStage=[],this._renderer=t}push(t,e,i){let n=this._renderer;if(n.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1,maskedContainer:e}),t.inverse=e._maskOptions.inverse,t.renderMaskToTexture){let r=t.mask;r.includeInBuild=!0,r.collectRenderables(i,n,null),r.includeInBuild=!1}n.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:t,maskedContainer:e,inverse:e._maskOptions.inverse,canBundle:!1})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1})}execute(t){let e=this._renderer,i=t.mask.renderMaskToTexture;if(t.action==="pushMaskBegin"){let n=cr.get(TL);if(n.inverse=t.inverse,i){t.mask.mask.measurable=!0;let r=wB(t.mask.mask,!0,vL);t.mask.mask.measurable=!1,r.ceil();let s=e.renderTarget.renderTarget.colorTexture.source,a=er.getOptimalTexture(r.width,r.height,s._resolution,s.antialias);e.renderTarget.push(a,!0),e.globalUniforms.push({offset:r,worldColor:4294967295});let o=n.sprite;o.texture=a,o.worldTransform.tx=r.minX,o.worldTransform.ty=r.minY,this._activeMaskStage.push({filterEffect:n,maskedContainer:t.maskedContainer,filterTexture:a})}else n.sprite=t.mask.mask,this._activeMaskStage.push({filterEffect:n,maskedContainer:t.maskedContainer})}else if(t.action==="pushMaskEnd"){let n=this._activeMaskStage[this._activeMaskStage.length-1];i&&(e.type===fa.WEBGL&&e.renderTarget.finishRenderPass(),e.renderTarget.pop(),e.globalUniforms.pop()),e.filter.push({renderPipeId:"filter",action:"pushFilter",container:n.maskedContainer,filterEffect:n.filterEffect,canBundle:!1})}else if(t.action==="popMaskEnd"){e.filter.pop();let n=this._activeMaskStage.pop();i&&er.returnTexture(n.filterTexture),cr.return(n.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}},MR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"alphaMask"}}),BR,oX=G(()=>{Ae(),BR=class{constructor(t){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=t}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(t,e,i){this._renderer.renderPipes.batch.break(i);let n=this._colorStack;n[this._colorStackIndex]=n[this._colorStackIndex-1]&t.mask;let r=this._colorStack[this._colorStackIndex];r!==this._currentColor&&(this._currentColor=r,i.add({renderPipeId:"colorMask",colorMask:r,canBundle:!1})),this._colorStackIndex++}pop(t,e,i){this._renderer.renderPipes.batch.break(i);let n=this._colorStack;this._colorStackIndex--;let r=n[this._colorStackIndex-1];r!==this._currentColor&&(this._currentColor=r,i.add({renderPipeId:"colorMask",colorMask:r,canBundle:!1}))}execute(t){this._renderer.colorMask.setMask(t.colorMask)}destroy(){this._renderer=null,this._colorStack=null}},BR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"colorMask"}}),kR,uX=G(()=>{Ae(),Sg(),kf(),kR=class{constructor(t){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=t}push(t,e,i){var n;let r=t,s=this._renderer;s.renderPipes.batch.break(i),s.renderPipes.blendMode.setBlendMode(r.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});let a=r.mask;a.includeInBuild=!0,this._maskHash.has(r)||this._maskHash.set(r,{instructionsStart:0,instructionsLength:0});let o=this._maskHash.get(r);o.instructionsStart=i.instructionSize,a.collectRenderables(i,s,null),a.includeInBuild=!1,s.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});let l=i.instructionSize-o.instructionsStart-1;o.instructionsLength=l;let h=s.renderTarget.renderTarget.uid;(n=this._maskStackHash)[h]??(n[h]=0)}pop(t,e,i){let n=t,r=this._renderer;r.renderPipes.batch.break(i),r.renderPipes.blendMode.setBlendMode(n.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:e._maskOptions.inverse,canBundle:!1});let s=this._maskHash.get(t);for(let a=0;a<s.instructionsLength;a++)i.instructions[i.instructionSize++]=i.instructions[s.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(t){var e;let i=this._renderer,n=i.renderTarget.renderTarget.uid,r=(e=this._maskStackHash)[n]??(e[n]=0);t.action==="pushMaskBegin"?(i.renderTarget.ensureDepthStencil(),i.stencil.setStencilMode(tr.RENDERING_MASK_ADD,r),r++,i.colorMask.setMask(0)):t.action==="pushMaskEnd"?(t.inverse?i.stencil.setStencilMode(tr.INVERSE_MASK_ACTIVE,r):i.stencil.setStencilMode(tr.MASK_ACTIVE,r),i.colorMask.setMask(15)):t.action==="popMaskBegin"?(i.colorMask.setMask(0),r!==0?i.stencil.setStencilMode(tr.RENDERING_MASK_REMOVE,r):(i.renderTarget.clear(null,ua.STENCIL),i.stencil.setStencilMode(tr.DISABLED,r)),r--):t.action==="popMaskEnd"&&(t.inverse?i.stencil.setStencilMode(tr.INVERSE_MASK_ACTIVE,r):i.stencil.setStencilMode(tr.MASK_ACTIVE,r),i.colorMask.setMask(15)),this._maskStackHash[n]=r}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}},kR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"stencilMask"}}),_1,lX,cX=G(()=>{Lr(),Ae(),Bi(),_1=class hX{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new An(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...hX.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){An.shared.setValue(e).alpha<1&&this._backgroundColor.alpha===1&&Mt("Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application."),this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}},_1.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"background",priority:0},_1.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},lX=_1}),rm,OR,dX=G(()=>{Ae(),eS(),NB(),Bi(),rm={},Lt.handle(ge.BlendMode,t=>{if(!t.name)throw new Error("BlendMode extension must have a name property");rm[t.name]=t.ref},t=>{delete rm[t.name]}),OR=class{constructor(t){this._blendModeStack=[],this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=t,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}pushBlendMode(t,e,i){this._blendModeStack.push(e),this.setBlendMode(t,e,i)}popBlendMode(t){this._blendModeStack.pop();let e=this._blendModeStack[this._activeBlendMode.length-1]??"normal";this.setBlendMode(null,e,t)}setBlendMode(t,e,i){let n=t instanceof oE;if(this._activeBlendMode===e){this._isAdvanced&&t&&!n&&this._renderableList?.push(t);return}this._isAdvanced&&this._endAdvancedBlendMode(i),this._activeBlendMode=e,t&&(this._isAdvanced=!!rm[e],this._isAdvanced&&this._beginAdvancedBlendMode(t,i))}_beginAdvancedBlendMode(t,e){this._renderer.renderPipes.batch.break(e);let i=this._activeBlendMode;if(!rm[i]){Mt(`Unable to assign BlendMode: '${i}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let n=this._ensureFilterEffect(i),r=t instanceof oE,s={renderPipeId:"filter",action:"pushFilter",filterEffect:n,renderables:r?null:[t],container:r?t.root:null,canBundle:!1};this._renderableList=s.renderables,e.add(s)}_ensureFilterEffect(t){let e=this._filterHash[t];return e||(e=this._filterHash[t]=new gx,e.filters=[new rm[t]]),e}_endAdvancedBlendMode(t){this._isAdvanced=!1,this._renderableList=null,this._renderer.renderPipes.batch.break(t),t.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(t){this._isAdvanced&&this._endAdvancedBlendMode(t)}destroy(){this._renderer=null,this._renderableList=null;for(let t in this._filterHash)this._filterHash[t].destroy();this._filterHash=null}},OR.extension={type:[ge.WebGLPipes,ge.WebGPUPipes,ge.CanvasPipes],name:"blendMode"}}),v1,T1,fX,pX=G(()=>{Li(),Ae(),Ds(),gi(),v1={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},T1=class mX{constructor(e){this._renderer=e}_normalizeOptions(e,i={}){return e instanceof Qi||e instanceof st?{target:e,...i}:{...i,...e}}async image(e){let i=si.get().createImage();return i.src=await this.base64(e),i}async base64(e){e=this._normalizeOptions(e,mX.defaultImageOptions);let{format:i,quality:n}=e,r=this.canvas(e);if(r.toBlob!==void 0)return new Promise((s,a)=>{r.toBlob(o=>{if(!o){a(new Error("ICanvas.toBlob failed!"));return}let l=new FileReader;l.onload=()=>s(l.result),l.onerror=a,l.readAsDataURL(o)},v1[i],n)});if(r.toDataURL!==void 0)return r.toDataURL(v1[i],n);if(r.convertToBlob!==void 0){let s=await r.convertToBlob({type:v1[i],quality:n});return new Promise((a,o)=>{let l=new FileReader;l.onload=()=>a(l.result),l.onerror=o,l.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);let i=e.target,n=this._renderer;if(i instanceof st)return n.texture.generateCanvas(i);let r=n.textureGenerator.generateTexture(e),s=n.texture.generateCanvas(r);return r.destroy(!0),s}pixels(e){e=this._normalizeOptions(e);let i=e.target,n=this._renderer,r=i instanceof st?i:n.textureGenerator.generateTexture(e),s=n.texture.getPixels(r);return i instanceof Qi&&r.destroy(!0),s}texture(e){return e=this._normalizeOptions(e),e.target instanceof st?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);let i=this.canvas(e),n=document.createElement("a");n.download=e.filename??"image.png",n.href=i.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}log(e){let i=e.width??200;e=this._normalizeOptions(e);let n=this.canvas(e),r=n.toDataURL();console.log(`[Pixi Texture] ${n.width}px ${n.height}px`);let s=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${r}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}destroy(){this._renderer=null}},T1.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"extract"},T1.defaultImageOptions={format:"png",quality:1},fX=T1}),gX,bX=G(()=>{Zr(),gi(),gX=class yX extends st{static create(e){return new yX({source:new Ar(e)})}resize(e,i,n){return this.source.resize(e,i,n),this}}}),EL,SL,AL,FR,xX=G(()=>{Lr(),Ae(),hi(),wr(),ws(),tS(),Ds(),bX(),EL=new mn,SL=new cs,AL=[0,0,0,0],FR=class{constructor(t){this._renderer=t}generateTexture(t){t instanceof Qi&&(t={target:t,frame:void 0,textureSourceOptions:{},resolution:void 0});let e=t.resolution||this._renderer.resolution,i=t.antialias||this._renderer.view.antialias,n=t.target,r=t.clearColor;r?r=Array.isArray(r)&&r.length===4?r:An.shared.setValue(r).toArray():r=AL;let s=t.frame?.copyTo(EL)||BB(n,SL).rectangle;s.width=Math.max(s.width,1/e)|0,s.height=Math.max(s.height,1/e)|0;let a=gX.create({...t.textureSourceOptions,width:s.width,height:s.height,resolution:e,antialias:i}),o=Tt.shared.translate(-s.x,-s.y);return this._renderer.render({container:n,transform:o,target:a,clearColor:r}),a.source.updateMipmaps(),a}destroy(){this._renderer=null}},FR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"textureGenerator"}}),IR,_X=G(()=>{Ae(),hi(),Ga(),xg(),Lh(),Ro(),Dr(),IR=class{constructor(t){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=t}reset(){this._stackIndex=0;for(let t=0;t<this._activeUniforms.length;t++)this._uniformsPool.push(this._activeUniforms[t]);for(let t=0;t<this._activeBindGroups.length;t++)this._bindGroupPool.push(this._activeBindGroups[t]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(t){this.reset(),this.push(t)}bind({size:t,projectionMatrix:e,worldTransformMatrix:i,worldColor:n,offset:r}){let s=this._renderer.renderTarget.renderTarget,a=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new Tt,worldColor:4294967295,offset:new Rn},o={projectionMatrix:e||this._renderer.renderTarget.projectionMatrix,resolution:t||s.size,worldTransformMatrix:i||a.worldTransformMatrix,worldColor:n||a.worldColor,offset:r||a.offset,bindGroup:null},l=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(l);let h=l.uniforms;h.uProjectionMatrix=o.projectionMatrix,h.uResolution=o.resolution,h.uWorldTransformMatrix.copyFrom(o.worldTransformMatrix),h.uWorldTransformMatrix.tx-=o.offset.x,h.uWorldTransformMatrix.ty-=o.offset.y,o_(o.worldColor,h.uWorldColorAlpha,0),l.update();let d;this._renderer.renderPipes.uniformBatch?d=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(l,!1):(d=this._bindGroupPool.pop()||new rl,this._activeBindGroups.push(d),d.setResource(l,0)),o.bindGroup=d,this._currentGlobalUniformData=o}push(t){this.bind(t),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===fa.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new Fr({uProjectionMatrix:{value:new Tt,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new Tt,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null,this._globalUniformDataStack.length=0,this._uniformsPool.length=0,this._activeUniforms.length=0,this._bindGroupPool.length=0,this._activeBindGroups.length=0,this._currentGlobalUniformData=null}},IR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"globalUniforms"}}),CL,LR,vX=G(()=>{Ae(),Fh(),CL=1,LR=class{constructor(){this._tasks=[],this._offset=0}init(){ls.system.add(this._update,this)}repeat(t,e,i=!0){let n=CL++,r=0;return i&&(this._offset+=1e3,r=this._offset),this._tasks.push({func:t,duration:e,start:performance.now(),offset:r,last:performance.now(),repeat:!0,id:n}),n}cancel(t){for(let e=0;e<this._tasks.length;e++)if(this._tasks[e].id===t){this._tasks.splice(e,1);return}}_update(){let t=performance.now();for(let e=0;e<this._tasks.length;e++){let i=this._tasks[e];if(t-i.offset-i.last>=i.duration){let n=t-i.start;i.func(n),i.last=t}}}destroy(){ls.system.remove(this._update,this),this._tasks.length=0}},LR.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"scheduler",priority:0}});function ile(t){if(!NR){if(si.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let e=[`%c  %c  %c  %c  %c PixiJS %c v${Cx} (${t}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${Cx} - ${t} - http://www.pixijs.com/`);NR=!0}}var NR,TX=G(()=>{Li(),Gk(),NR=!1}),RT,EX=G(()=>{Ae(),TX(),Ro(),RT=class{constructor(t){this._renderer=t}init(t){if(t.hello){let e=this._renderer.name;this._renderer.type===fa.WEBGL&&(e+=` ${this._renderer.context.webGLVersion}`),ile(e)}}},RT.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"hello",priority:-2},RT.defaultOptions={hello:!1}});function nle(t){let e=!1;for(let n in t)if(t[n]==null){e=!0;break}if(!e)return t;let i=Object.create(null);for(let n in t){let r=t[n];r&&(i[n]=r)}return i}function rle(t){let e=0;for(let i=0;i<t.length;i++)t[i]==null?e++:t[i-e]=t[i];return t.length-=e,t}var SX=G(()=>{}),wL,E1,AX,CX=G(()=>{Ae(),SX(),wL=0,E1=class wX{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e={...wX.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let i of this._managedHashes)i.context[i.hash]=nle(i.context[i.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let i of this._managedArrays)rle(i.context[i.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,i){this._managedHashes.push({context:e,hash:i})}addManagedArray(e,i){this._managedArrays.push({context:e,hash:i})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=wL++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){let e=this._now,i=this._managedRenderables,n=this._renderer.renderPipes,r=0;for(let s=0;s<i.length;s++){let a=i[s];if(a===null){r++;continue}let o=a.renderGroup??a.parentRenderGroup,l=o?.instructionSet?.gcTick??-1;if((o?.gcTick??0)===l&&(a._lastUsed=e),e-a._lastUsed>this.maxUnusedTime){if(!a.destroyed){let h=n;o&&(o.structureDidChange=!0),h[a.renderPipeId].destroyRenderable(a)}a._lastUsed=-1,r++,a.off("destroyed",this._removeRenderable,this)}else i[s-r]=a}i.length-=r}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){let i=this._managedRenderables.indexOf(e);i>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[i]=null)}_updateInstructionGCTick(e,i){e.instructionSet.gcTick=i;for(let n of e.renderGroupChildren)this._updateInstructionGCTick(n,i)}},E1.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"renderableGC",priority:0},E1.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4},AX=E1}),S1,DX,RX=G(()=>{Ae(),S1=class PX{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){e={...PX.defaultOptions,...e},this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=e.textureGCAMaxIdle??e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this._renderer.texture.managedTextures;for(let i=0;i<e.length;i++){let n=e[i];n.autoGarbageCollect&&n.resource&&n._touched>-1&&this.count-n._touched>this.maxIdle&&(n._touched=-1,n.unload())}}destroy(){this._renderer=null}},S1.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"textureGC"},S1.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600},DX=S1}),Pw,bE,zk=G(()=>{Nr(),Zr(),gi(),Pw=class MX{constructor(e={}){if(this.uid=Sn("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...MX.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let i=0;i<e.colorTextures;i++)this.colorTextures.push(new Ar({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(n=>n.source)];let i=this.colorTexture.source;this.resize(i.width,i.height,i._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof st||e.depthStencilTexture instanceof Ar?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Ar({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,i,n=this.resolution,r=!1){this.dirtyId++,this.colorTextures.forEach((s,a)=>{r&&a===0||s.source.resize(e,i,n)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,i,n)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}},Pw.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1},bE=Pw});function BX(t,e){if(!Qd.has(t)){let i=new st({source:new nl({resource:t,...e})}),n=()=>{Qd.get(t)===i&&Qd.delete(t)};i.once("destroy",n),i.source.once("destroy",n),Qd.set(t,i)}return Qd.get(t)}var Qd,Vk=G(()=>{Cf(),pg(),gi(),Qd=new Map,Af.register(Qd)}),A1,kX,OX=G(()=>{Li(),Ae(),wr(),Mi(),zk(),Vk(),A1=class FX{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e={...FX.defaultOptions,...e},e.view&&(xt(ei,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new mn(0,0,e.width,e.height),this.canvas=e.canvas||si.get().createCanvas(),this.antialias=!!e.antialias,this.texture=BX(this.canvas,e),this.renderTarget=new bE({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,i,n){this.texture.source.resize(e,i,n),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:e?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.texture.destroy()}},A1.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"view",priority:0},A1.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1},kX=A1}),jk,Xk,Yk=G(()=>{zj(),Vj(),$j(),Kj(),Hk(),Qj(),aX(),oX(),uX(),cX(),dX(),pX(),xX(),_X(),vX(),EX(),CX(),RX(),OX(),jk=[lX,IR,RT,kX,AR,DX,FR,fX,DR,AX,LR],Xk=[OR,RR,CR,TR,MR,kR,BR,_R]}),UR,IX=G(()=>{Ae(),UR=class{constructor(t){this._hash=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(t){this._gpu=t}getBindGroup(t,e,i){return t._updateKey(),this._hash[t._key]||this._createBindGroup(t,e,i)}_createBindGroup(t,e,i){let n=this._gpu.device,r=e.layout[i],s=[],a=this._renderer;for(let h in r){let d=t.resources[h]??t.resources[r[h]],p;if(d._resourceType==="uniformGroup"){let g=d;a.ubo.updateUniformGroup(g);let y=g.buffer;p={buffer:a.buffer.getGPUBuffer(y),offset:0,size:y.descriptor.size}}else if(d._resourceType==="buffer"){let g=d;p={buffer:a.buffer.getGPUBuffer(g),offset:0,size:g.descriptor.size}}else if(d._resourceType==="bufferResource"){let g=d;p={buffer:a.buffer.getGPUBuffer(g.buffer),offset:g.offset,size:g.size}}else if(d._resourceType==="textureSampler"){let g=d;p=a.texture.getGpuSampler(g)}else if(d._resourceType==="textureSource"){let g=d;p=a.texture.getGpuSource(g).createView({})}s.push({binding:r[h],resource:p})}let o=a.shader.getProgramData(e).bindGroups[i],l=n.createBindGroup({layout:o,entries:s});return this._hash[t._key]=l,l}destroy(){for(let t of Object.keys(this._hash))this._hash[t]=null;this._hash=null,this._renderer=null}},UR.extension={type:[ge.WebGPUSystem],name:"bindGroup"}}),GR,LX=G(()=>{Ae(),ik(),GR=class{constructor(t){this._gpuBuffers=Object.create(null),this._managedBuffers=[],t.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(t){this._gpu=t}getGPUBuffer(t){return this._gpuBuffers[t.uid]||this.createGPUBuffer(t)}updateBuffer(t){let e=this._gpuBuffers[t.uid]||this.createGPUBuffer(t),i=t.data;return t._updateID&&i&&(t._updateID=0,this._gpu.device.queue.writeBuffer(e,0,i.buffer,0,(t._updateSize||i.byteLength)+3&-4)),e}destroyAll(){for(let t in this._gpuBuffers)this._gpuBuffers[t].destroy();this._gpuBuffers={}}createGPUBuffer(t){this._gpuBuffers[t.uid]||(t.on("update",this.updateBuffer,this),t.on("change",this.onBufferChange,this),t.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(t));let e=this._gpu.device.createBuffer(t.descriptor);return t._updateID=0,t.data&&(I3(t.data.buffer,e.getMappedRange()),e.unmap()),this._gpuBuffers[t.uid]=e,e}onBufferChange(t){this._gpuBuffers[t.uid].destroy(),t._updateID=0,this._gpuBuffers[t.uid]=this.createGPUBuffer(t)}onBufferDestroy(t){this._managedBuffers.splice(this._managedBuffers.indexOf(t),1),this._destroyBuffer(t)}destroy(){this._managedBuffers.forEach(t=>this._destroyBuffer(t)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(t){this._gpuBuffers[t.uid].destroy(),t.off("update",this.updateBuffer,this),t.off("change",this.onBufferChange,this),t.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[t.uid]=null}},GR.extension={type:[ge.WebGPUSystem],name:"buffer"}}),HR,NX=G(()=>{Ae(),HR=class{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.pipeline.setColorMask(t))}destroy(){this._renderer=null,this._colorMaskCache=null}},HR.extension={type:[ge.WebGPUSystem],name:"colorMask"}}),PT,UX=G(()=>{Li(),Ae(),PT=class{constructor(t){this._renderer=t}async init(t){return this._initPromise?this._initPromise:(this._initPromise=(t.gpu?Promise.resolve(t.gpu):this._createDeviceAndAdaptor(t)).then(e=>{this.gpu=e,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(t){this._renderer.gpu=t}async _createDeviceAndAdaptor(t){let e=await si.get().getNavigator().gpu.requestAdapter({powerPreference:t.powerPreference,forceFallbackAdapter:t.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(r=>e.features.has(r)),n=await e.requestDevice({requiredFeatures:i});return{adapter:e,device:n}}destroy(){this.gpu=null,this._renderer=null}},PT.extension={type:[ge.WebGPUSystem],name:"device"},PT.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1}}),zR,GX=G(()=>{Ae(),zR=class{constructor(t){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=t}renderStart(){this.commandFinished=new Promise(t=>{this._resolveCommandFinished=t}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(t){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(t.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(t){this.renderPassEncoder.setViewport(t.x,t.y,t.width,t.height,0,1)}setPipelineFromGeometryProgramAndState(t,e,i,n){let r=this._renderer.pipeline.getPipeline(t,e,i,n);this.setPipeline(r)}setPipeline(t){this._boundPipeline!==t&&(this._boundPipeline=t,this.renderPassEncoder.setPipeline(t))}_setVertexBuffer(t,e){this._boundVertexBuffer[t]!==e&&(this._boundVertexBuffer[t]=e,this.renderPassEncoder.setVertexBuffer(t,this._renderer.buffer.updateBuffer(e)))}_setIndexBuffer(t){if(this._boundIndexBuffer===t)return;this._boundIndexBuffer=t;let e=t.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(t),e)}resetBindGroup(t){this._boundBindGroup[t]=null}setBindGroup(t,e,i){if(this._boundBindGroup[t]===e)return;this._boundBindGroup[t]=e,e._touch(this._renderer.textureGC.count);let n=this._renderer.bindGroup.getBindGroup(e,i,t);this.renderPassEncoder.setBindGroup(t,n)}setGeometry(t,e){let i=this._renderer.pipeline.getBufferNamesToBind(t,e);for(let n in i)this._setVertexBuffer(parseInt(n,10),t.attributes[i[n]].buffer);t.indexBuffer&&this._setIndexBuffer(t.indexBuffer)}_setShaderBindGroups(t,e){for(let i in t.groups){let n=t.groups[i];e||this._syncBindGroup(n),this.setBindGroup(i,n,t.gpuProgram)}}_syncBindGroup(t){for(let e in t.resources){let i=t.resources[e];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(t){let{geometry:e,shader:i,state:n,topology:r,size:s,start:a,instanceCount:o,skipSync:l}=t;this.setPipelineFromGeometryProgramAndState(e,i.gpuProgram,n,r),this.setGeometry(e,i.gpuProgram),this._setShaderBindGroups(i,l),e.indexBuffer?this.renderPassEncoder.drawIndexed(s||e.indexBuffer.data.length,o??e.instanceCount,a||0):this.renderPassEncoder.draw(s||e.getSize(),o??e.instanceCount,a||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let t=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(t);let e=this._boundPipeline,i={...this._boundVertexBuffer},n=this._boundIndexBuffer,r={...this._boundBindGroup};this._clearCache();let s=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(s.x,s.y,s.width,s.height,0,1),this.setPipeline(e);for(let a in i)this._setVertexBuffer(a,i[a]);for(let a in r)this.setBindGroup(a,r[a],null);this._setIndexBuffer(n)}_clearCache(){for(let t=0;t<16;t++)this._boundBindGroup[t]=null,this._boundVertexBuffer[t]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(t){this._gpu=t}},zR.extension={type:[ge.WebGPUSystem],name:"encoder",priority:1}}),VR,HX=G(()=>{Ae(),VR=class{constructor(t){this._renderer=t}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}},VR.extension={type:[ge.WebGPUSystem],name:"limits"}}),jR,zX=G(()=>{Ae(),kf(),jR=class{constructor(t){this._renderTargetStencilState=Object.create(null),this._renderer=t,t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:tr.DISABLED,stencilReference:0}),this._activeRenderTarget=t,this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){let i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=t,i.stencilReference=e;let n=this._renderer;n.pipeline.setStencilMode(t),n.encoder.renderPassEncoder.setStencilReference(e)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}},jR.extension={type:[ge.WebGPUSystem],name:"stencil"}}),qk,Wk=G(()=>{Ok(),Nh(),fc(),qk=class{constructor(t){this._syncFunctionHash=Object.create(null),this._adaptor=t,this._systemCheck()}_systemCheck(){if(!Fj())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(t){let e=this.getUniformGroupData(t);t.buffer||(t.buffer=new ha({data:new Float32Array(e.layout.size/4),usage:Ci.UNIFORM|Ci.COPY_DST}))}getUniformGroupData(t){return this._syncFunctionHash[t._signature]||this._initUniformGroup(t)}_initUniformGroup(t){let e=t._signature,i=this._syncFunctionHash[e];if(!i){let n=Object.keys(t.uniformStructures).map(a=>t.uniformStructures[a]),r=this._adaptor.createUboElements(n),s=this._generateUboSync(r.uboElements);i=this._syncFunctionHash[e]={layout:r,syncFunction:s}}return this._syncFunctionHash[e]}_generateUboSync(t){return this._adaptor.generateUboSync(t)}syncUniformGroup(t,e,i){let n=this.getUniformGroupData(t);t.buffer||(t.buffer=new ha({data:new Float32Array(n.layout.size/4),usage:Ci.UNIFORM|Ci.COPY_DST}));let r=null;return e||(e=t.buffer.data,r=t.buffer.dataInt32),i||(i=0),n.syncFunction(t.uniforms,e,r,i),!0}updateUniformGroup(t){if(t.isStatic&&!t._dirtyId)return!1;t._dirtyId=0;let e=this.syncUniformGroup(t);return t.buffer.update(),e}destroy(){this._syncFunctionHash=null}}});function sle(t){let e=t.map(n=>({data:n,offset:0,size:0})),i=0;for(let n=0;n<e.length;n++){let r=e[n],s=$y[r.data.type].size,a=$y[r.data.type].align;if(!$y[r.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${r.data.type}`);r.data.size>1&&(s=Math.max(s,a)*r.data.size),i=Math.ceil(i/a)*a,r.size=s,r.offset=i,i+=s}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}var $y,$k=G(()=>{$y={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}}}),Sh,Kk=G(()=>{Sh=[{type:"mat3x3<f32>",test:t=>t.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:t=>t.type==="vec2<f32>"&&t.size===1&&t.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:t=>t.type==="vec3<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}]});function VX(t,e,i,n){let r=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `],s=0;for(let o=0;o<t.length;o++){let l=t[o],h=l.data.name,d=!1,p=0;for(let g=0;g<Sh.length;g++)if(Sh[g].test(l.data)){p=l.offset/4,r.push(`name = "${h}";`,`offset += ${p-s};`,Sh[g][e]||Sh[g].ubo),d=!0;break}if(!d)if(l.data.size>1)p=l.offset/4,r.push(i(l,p-s));else{let g=n[l.data.type];p=l.offset/4,r.push(`
                    v = uv.${h};
                    offset += ${p-s};
                    ${g};
                `)}s=p}let a=r.join(`
`);return new Function("uv","data","dataInt32","offset",a)}var Qk=G(()=>{Kk()});function sm(t,e){return`
        for (let i = 0; i < ${t*e}; i++) {
            data[offset + (((i / ${t})|0) * 4) + (i % ${t})] = v[i];
        }
    `}var XR,jX,Zk=G(()=>{XR={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":sm(3,2),"mat4x2<f32>":sm(4,2),"mat2x3<f32>":sm(2,3),"mat4x3<f32>":sm(4,3),"mat2x4<f32>":sm(2,4),"mat3x4<f32>":sm(3,4)},jX={...XR,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `}});function ale(t,e){let{size:i,align:n}=$y[t.data.type],r=(n-i)/4,s=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${t.data.name};
         ${e!==0?`offset += ${e};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${t.data.size*(i/4)}; i++)
         {
             for(var j = 0; j < ${i/4}; j++)
             {
                 ${s}[arrayOffset++] = v[t++];
             }
             ${r!==0?`arrayOffset += ${r};`:""}
         }
     `}var XX=G(()=>{$k()});function ole(t){return VX(t,"uboWgsl",ale,jX)}var YX=G(()=>{Qk(),Zk(),XX()}),YR,qX=G(()=>{Ae(),Wk(),$k(),YX(),YR=class extends qk{constructor(){super({createUboElements:sle,generateUboSync:ole})}},YR.extension={type:[ge.WebGPUSystem],name:"ubo"}}),SS,AS=G(()=>{Cs(),Nr(),SS=class extends ma{constructor({buffer:t,offset:e,size:i}){super(),this.uid=Sn("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Sn("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=t,this.offset=e|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Sn("resource"),this.emit("change",this)}destroy(t=!1){this.destroyed=!0,t&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}}),WX,$X=G(()=>{WX=class{constructor({minUniformOffsetAlignment:t}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=t,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(t){if(t>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${t*4}`);let e=this.byteIndex,i=e+t*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,e}addGroup(t){let e=this.addEmptyGroup(t.length);for(let i=0;i<t.length;i++)this.data[e/4+i]=t[i];return e}destroy(){this.data=null}}}),Kl,qR,KX=G(()=>{Ae(),Nh(),AS(),fc(),$X(),Lh(),Kl=128,qR=class{constructor(t){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new WX({minUniformOffsetAlignment:Kl});let e=256/Kl;for(let i=0;i<e;i++){let n=Ci.UNIFORM|Ci.COPY_DST;i===0&&(n|=Ci.COPY_SRC),this._buffers.push(new ha({data:this._batchBuffer.data,usage:n}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let t in this._bindGroupHash)this._bindGroupHash[t]=null;this._batchBuffer.clear()}getUniformBindGroup(t,e){if(!e&&this._bindGroupHash[t.uid])return this._bindGroupHash[t.uid];this._renderer.ubo.ensureUniformGroup(t);let i=t.buffer.data,n=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(t,this._batchBuffer.data,n/4),this._bindGroupHash[t.uid]=this._getBindGroup(n/Kl),this._bindGroupHash[t.uid]}getUboResource(t){this._renderer.ubo.updateUniformGroup(t);let e=t.buffer.data,i=this._batchBuffer.addGroup(e);return this._getBufferResource(i/Kl)}getArrayBindGroup(t){let e=this._batchBuffer.addGroup(t);return this._getBindGroup(e/Kl)}getArrayBufferResource(t){let e=this._batchBuffer.addGroup(t)/Kl;return this._getBufferResource(e)}_getBufferResource(t){if(!this._bufferResources[t]){let e=this._buffers[t%2];this._bufferResources[t]=new SS({buffer:e,offset:(t/2|0)*256,size:Kl})}return this._bufferResources[t]}_getBindGroup(t){if(!this._bindGroups[t]){let e=new rl({0:this._getBufferResource(t)});this._bindGroups[t]=e}return this._bindGroups[t]}_uploadBindGroups(){let t=this._renderer.buffer,e=this._buffers[0];e.update(this._batchBuffer.byteIndex),t.updateBuffer(e);let i=this._renderer.gpu.device.createCommandEncoder();for(let n=1;n<this._buffers.length;n++){let r=this._buffers[n];i.copyBufferToBuffer(t.getGPUBuffer(e),Kl,t.getGPUBuffer(r),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let t=0;t<this._bindGroups.length;t++)this._bindGroups[t]?.destroy();this._bindGroups=null,this._bindGroupHash=null;for(let t=0;t<this._buffers.length;t++)this._buffers[t].destroy();this._buffers=null;for(let t=0;t<this._bufferResources.length;t++)this._bufferResources[t].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}},qR.extension={type:[ge.WebGPUPipes],name:"uniformBatch"}});function QX(t,e){for(let i in t.attributes){let n=t.attributes[i],r=e[i];r?(n.format??(n.format=r.format),n.offset??(n.offset=r.offset),n.instance??(n.instance=r.instance)):Mt(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}ule(t)}function ule(t){let{buffers:e,attributes:i}=t,n={},r={};for(let s in e){let a=e[s];n[a.uid]=0,r[a.uid]=0}for(let s in i){let a=i[s];n[a.buffer.uid]+=Bh(a.format).stride}for(let s in i){let a=i[s];a.stride??(a.stride=n[a.buffer.uid]),a.start??(a.start=r[a.buffer.uid]),r[a.buffer.uid]+=Bh(a.format).stride}}var Jk=G(()=>{Bi(),If()}),ec,eO=G(()=>{kf(),ec=[],ec[tr.NONE]=void 0,ec[tr.DISABLED]={stencilWriteMask:0,stencilReadMask:0},ec[tr.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},ec[tr.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},ec[tr.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},ec[tr.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}}});function lle(t,e,i,n,r){return t<<24|e<<16|i<<10|n<<5|r}function cle(t,e,i,n){return i<<6|t<<3|n<<1|e}var DL,WR,ZX=G(()=>{Ae(),Bi(),Jk(),kf(),i_(),eO(),DL={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4},WR=class{constructor(t){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=t}contextChange(t){this._gpu=t,this.setStencilMode(tr.DISABLED),this._updatePipeHash()}setMultisampleCount(t){this._multisampleCount!==t&&(this._multisampleCount=t,this._updatePipeHash())}setRenderTarget(t){this._multisampleCount=t.msaaSamples,this._depthStencilAttachment=t.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(t){this._colorMask!==t&&(this._colorMask=t,this._updatePipeHash())}setStencilMode(t){this._stencilMode!==t&&(this._stencilMode=t,this._stencilState=ec[t],this._updatePipeHash())}setPipeline(t,e,i,n){let r=this.getPipeline(t,e,i);n.setPipeline(r)}getPipeline(t,e,i,n){t._layoutKey||(QX(t,e.attributeData),this._generateBufferKey(t)),n||(n=t.topology);let r=lle(t._layoutKey,e._layoutKey,i.data,i._blendModeId,DL[n]);return this._pipeCache[r]?this._pipeCache[r]:(this._pipeCache[r]=this._createPipeline(t,e,i,n),this._pipeCache[r])}_createPipeline(t,e,i,n){let r=this._gpu.device,s=this._createVertexBufferLayouts(t,e),a=this._renderer.state.getColorTargets(i);a[0].writeMask=this._stencilMode===tr.RENDERING_MASK_ADD?0:this._colorMask;let o=this._renderer.shader.getProgramData(e).pipeline,l={vertex:{module:this._getModule(e.vertex.source),entryPoint:e.vertex.entryPoint,buffers:s},fragment:{module:this._getModule(e.fragment.source),entryPoint:e.fragment.entryPoint,targets:a},primitive:{topology:n,cullMode:i.cullMode},layout:o,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(l.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"}),r.createRenderPipeline(l)}_getModule(t){return this._moduleCache[t]||this._createModule(t)}_createModule(t){let e=this._gpu.device;return this._moduleCache[t]=e.createShaderModule({code:t}),this._moduleCache[t]}_generateBufferKey(t){let e=[],i=0,n=Object.keys(t.attributes).sort();for(let s=0;s<n.length;s++){let a=t.attributes[n[s]];e[i++]=a.offset,e[i++]=a.format,e[i++]=a.stride,e[i++]=a.instance}let r=e.join("|");return t._layoutKey=vx(r,"geometry"),t._layoutKey}_generateAttributeLocationsKey(t){let e=[],i=0,n=Object.keys(t.attributeData).sort();for(let s=0;s<n.length;s++){let a=t.attributeData[n[s]];e[i++]=a.location}let r=e.join("|");return t._attributeLocationsKey=vx(r,"programAttributes"),t._attributeLocationsKey}getBufferNamesToBind(t,e){let i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];let n=this._createVertexBufferLayouts(t,e),r=Object.create(null),s=e.attributeData;for(let a=0;a<n.length;a++){let o=Object.values(n[a].attributes)[0].shaderLocation;for(let l in s)if(s[l].location===o){r[a]=l;break}}return this._bindingNamesCache[i]=r,r}_createVertexBufferLayouts(t,e){e._attributeLocationsKey||this._generateAttributeLocationsKey(e);let i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];let n=[];return t.buffers.forEach(r=>{let s={arrayStride:0,stepMode:"vertex",attributes:[]},a=s.attributes;for(let o in e.attributeData){let l=t.attributes[o];(l.divisor??1)!==1&&Mt(`Attribute ${o} has an invalid divisor value of '${l.divisor}'. WebGPU only supports a divisor value of 1`),l.buffer===r&&(s.arrayStride=l.stride,s.stepMode=l.instance?"instance":"vertex",a.push({shaderLocation:e.attributeData[o].location,offset:l.offset,format:l.format}))}a.length&&n.push(s)}),this._bufferLayoutsCache[i]=n,n}_updatePipeHash(){let t=cle(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[t]||(this._pipeStateCaches[t]=Object.create(null)),this._pipeCache=this._pipeStateCaches[t]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}},WR.extension={type:[ge.WebGPUSystem],name:"pipeline"}});function hle(t,e,i,n,r,s){let a=s?1:-1;return t.identity(),t.a=1/n*2,t.d=a*(1/r*2),t.tx=-1-e*t.a,t.ty=-a-i*t.d,t}var JX=G(()=>{});function dle(t){let e=t.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}var eY=G(()=>{}),tO,iO=G(()=>{hi(),wr(),Sg(),JX(),Ik(),pg(),Zr(),gi(),Vk(),eY(),zk(),tO=class{constructor(t){this.rootViewPort=new mn,this.viewport=new mn,this.onRenderTargetChange=new Fk("onRenderTargetChange"),this.projectionMatrix=new Tt,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:t,clear:e,clearColor:i,frame:n}){this._renderTargetStack.length=0,this.push(t,e,i,n),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=dle(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(t,e=!0,i,n){let r=this.getRenderTarget(t),s=this.renderTarget!==r;this.renderTarget=r,this.renderSurface=t;let a=this.getGpuRenderTarget(r);(r.pixelWidth!==a.width||r.pixelHeight!==a.height)&&(this.adaptor.resizeGpuRenderTarget(r),a.width=r.pixelWidth,a.height=r.pixelHeight);let o=r.colorTexture,l=this.viewport,h=o.pixelWidth,d=o.pixelHeight;if(!n&&t instanceof st&&(n=t.frame),n){let p=o._resolution;l.x=n.x*p+.5|0,l.y=n.y*p+.5|0,l.width=n.width*p+.5|0,l.height=n.height*p+.5|0}else l.x=0,l.y=0,l.width=h,l.height=d;return hle(this.projectionMatrix,0,0,l.width/o.resolution,l.height/o.resolution,!r.isRoot),this.adaptor.startRenderPass(r,e,i,l),s&&this.onRenderTargetChange.emit(r),r}clear(t,e=ua.ALL,i){e&&(t&&(t=this.getRenderTarget(t)),this.adaptor.clear(t||this.renderTarget,e,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(t,e=ua.ALL,i,n){let r=this.bind(t,e,i,n);return this._renderTargetStack.push({renderTarget:r,frame:n}),r}pop(){this._renderTargetStack.pop();let t=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(t.renderTarget,!1,null,t.frame)}getRenderTarget(t){return t.isTexture&&(t=t.source),this._renderSurfaceToRenderTargetHash.get(t)??this._initRenderTarget(t)}copyToTexture(t,e,i,n,r){i.x<0&&(n.width+=i.x,r.x-=i.x,i.x=0),i.y<0&&(n.height+=i.y,r.y-=i.y,i.y=0);let{pixelWidth:s,pixelHeight:a}=t;return n.width=Math.min(n.width,s-i.x),n.height=Math.min(n.height,a-i.y),this.adaptor.copyToTexture(t,e,i,n,r)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((t,e)=>{t!==e&&t.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(t){let e=null;return nl.test(t)&&(t=BX(t).source),t instanceof bE?e=t:t instanceof Ar&&(e=new bE({colorTextures:[t]}),t.source instanceof nl&&(e.isRoot=!0),t.once("destroy",()=>{e.destroy(),this._renderSurfaceToRenderTargetHash.delete(t);let i=this._gpuRenderTargetHash[e.uid];i&&(this._gpuRenderTargetHash[e.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(t,e),e}getGpuRenderTarget(t){return this._gpuRenderTargetHash[t.uid]||(this._gpuRenderTargetHash[t.uid]=this.adaptor.initGpuRenderTarget(t))}resetState(){this.renderTarget=null,this.renderSurface=null}}}),tY,iY=G(()=>{tY=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}}),nY,rY=G(()=>{Sg(),pg(),Zr(),iY(),nY=class{init(t,e){this._renderer=t,this._renderTargetSystem=e}copyToTexture(t,e,i,n,r){let s=this._renderer,a=this._getGpuColorTexture(t),o=s.texture.getGpuSource(e.source);return s.encoder.commandEncoder.copyTextureToTexture({texture:a,origin:i},{texture:o,origin:r},n),e}startRenderPass(t,e=!0,i,n){let r=this._renderTargetSystem.getGpuRenderTarget(t),s=this.getDescriptor(t,e,i);r.descriptor=s,this._renderer.pipeline.setRenderTarget(r),this._renderer.encoder.beginRenderPass(r),this._renderer.encoder.setViewport(n)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);return e.contexts[0]?e.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(t.colorTextures[0].source)}getDescriptor(t,e,i){typeof e=="boolean"&&(e=e?ua.ALL:ua.NONE);let n=this._renderTargetSystem,r=n.getGpuRenderTarget(t),s=t.colorTextures.map((o,l)=>{let h=r.contexts[l],d,p;h?d=h.getCurrentTexture().createView():d=this._renderer.texture.getGpuSource(o).createView({mipLevelCount:1}),r.msaaTextures[l]&&(p=d,d=this._renderer.texture.getTextureView(r.msaaTextures[l]));let g=e&ua.COLOR?"clear":"load";return i??(i=n.defaultClearColor),{view:d,resolveTarget:p,clearValue:i,storeOp:"store",loadOp:g}}),a;if((t.stencil||t.depth)&&!t.depthStencilTexture&&(t.ensureDepthStencilTexture(),t.depthStencilTexture.source.sampleCount=r.msaa?4:1),t.depthStencilTexture){let o=e&ua.STENCIL?"clear":"load",l=e&ua.DEPTH?"clear":"load";a={view:this._renderer.texture.getGpuSource(t.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:o,depthClearValue:1,depthLoadOp:l,depthStoreOp:"store"}}return{colorAttachments:s,depthStencilAttachment:a}}clear(t,e=!0,i,n){if(!e)return;let{gpu:r,encoder:s}=this._renderer,a=r.device;if(s.commandEncoder===null){let o=a.createCommandEncoder(),l=this.getDescriptor(t,e,i),h=o.beginRenderPass(l);h.setViewport(n.x,n.y,n.width,n.height,0,1),h.end();let d=o.finish();a.queue.submit([d])}else this.startRenderPass(t,e,i,n)}initGpuRenderTarget(t){t.isRoot=!0;let e=new tY;return t.colorTextures.forEach((i,n)=>{if(i instanceof nl){let r=i.resource.getContext("webgpu"),s=i.transparent?"premultiplied":"opaque";try{r.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:s})}catch(a){console.error(a)}e.contexts[n]=r}if(e.msaa=i.source.antialias,i.source.antialias){let r=new Ar({width:0,height:0,sampleCount:4});e.msaaTextures[n]=r}}),e.msaa&&(e.msaaSamples=4,t.depthStencilTexture&&(t.depthStencilTexture.source.sampleCount=4)),e}destroyGpuRenderTarget(t){t.contexts.forEach(e=>{e.unconfigure()}),t.msaaTextures.forEach(e=>{e.destroy()}),t.msaaTextures.length=0,t.contexts.length=0}ensureDepthStencilTexture(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);t.depthStencilTexture&&e.msaa&&(t.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);e.width=t.width,e.height=t.height,e.msaa&&t.colorTextures.forEach((i,n)=>{e.msaaTextures[n]?.resize(i.source.width,i.source.height,i.source._resolution)})}}}),$R,sY=G(()=>{Ae(),iO(),rY(),$R=class extends tO{constructor(t){super(t),this.adaptor=new nY,this.adaptor.init(t,this)}},$R.extension={type:[ge.WebGPUSystem],name:"renderTarget"}}),KR,aY=G(()=>{Ae(),KR=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(t){this._gpu=t}getProgramData(t){return this._gpuProgramData[t._layoutKey]||this._createGPUProgramData(t)}_createGPUProgramData(t){let e=this._gpu.device,i=t.gpuLayout.map(r=>e.createBindGroupLayout({entries:r})),n={bindGroupLayouts:i};return this._gpuProgramData[t._layoutKey]={bindGroups:i,pipeline:e.createPipelineLayout(n)},this._gpuProgramData[t._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}},KR.extension={type:[ge.WebGPUSystem],name:"shader"}}),Gs,oY=G(()=>{Gs={},Gs.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},Gs.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},Gs.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},Gs.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},Gs.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},Gs.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},Gs["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},Gs["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},Gs["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},Gs.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},Gs.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},Gs.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}}}),QR,uY=G(()=>{Ae(),Po(),oY(),QR=class{constructor(){this.defaultState=new Ia,this.defaultState.blend=!0}contextChange(t){this.gpu=t}getColorTargets(t){return[{format:"bgra8unorm",writeMask:0,blend:Gs[t.blendMode]||Gs.normal}]}destroy(){this.gpu=null}},QR.extension={type:[ge.WebGPUSystem],name:"state"}}),lY,cY=G(()=>{lY={type:"image",upload(t,e,i){let n=t.resource,r=(t.pixelWidth|0)*(t.pixelHeight|0),s=n.byteLength/r;i.device.queue.writeTexture({texture:e},n,{offset:0,rowsPerImage:t.pixelHeight,bytesPerRow:t.pixelHeight*s},{width:t.pixelWidth,height:t.pixelHeight,depthOrArrayLayers:1})}}}),ZR,RL,hY,dY=G(()=>{ZR={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},RL={blockBytes:4,blockWidth:1,blockHeight:1},hY={type:"compressed",upload(t,e,i){let n=t.pixelWidth,r=t.pixelHeight,s=ZR[t.format]||RL;for(let a=0;a<t.resource.length;a++){let o=t.resource[a],l=Math.ceil(n/s.blockWidth)*s.blockBytes;i.device.queue.writeTexture({texture:e,mipLevel:a},o,{offset:0,bytesPerRow:l},{width:Math.ceil(n/s.blockWidth)*s.blockWidth,height:Math.ceil(r/s.blockHeight)*s.blockHeight,depthOrArrayLayers:1}),n=Math.max(n>>1,1),r=Math.max(r>>1,1)}}}}),nO,rO=G(()=>{Li(),Bi(),nO={type:"image",upload(t,e,i){let n=t.resource;if(!n)return;if(globalThis.HTMLImageElement&&n instanceof HTMLImageElement){let o=si.get().createCanvas(n.width,n.height);o.getContext("2d").drawImage(n,0,0,n.width,n.height),t.resource=o,Mt("ImageSource: Image element passed, converting to canvas and replacing resource.")}let r=Math.min(e.width,t.resourceWidth||t.pixelWidth),s=Math.min(e.height,t.resourceHeight||t.pixelHeight),a=t.alphaMode==="premultiply-alpha-on-upload";i.device.queue.copyExternalImageToTexture({source:n},{texture:e,premultipliedAlpha:a},{width:r,height:s})}}}),fY,pY=G(()=>{rO(),fY={type:"video",upload(t,e,i){nO.upload(t,e,i)}}}),mY,gY=G(()=>{mY=class{constructor(t){this.device=t,this.sampler=t.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(t){let e=this.pipelines[t];return e||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),e=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:t}]}}),this.pipelines[t]=e),e}generateMipmap(t){let e=this._getMipmapPipeline(t.format);if(t.dimension==="3d"||t.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=t,n=t.depthOrArrayLayers||1,r=t.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!r){let o={size:{width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:n},format:t.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:t.mipLevelCount-1};i=this.device.createTexture(o)}let s=this.device.createCommandEncoder({}),a=e.getBindGroupLayout(0);for(let o=0;o<n;++o){let l=t.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:o,arrayLayerCount:1}),h=r?1:0;for(let d=1;d<t.mipLevelCount;++d){let p=i.createView({baseMipLevel:h++,mipLevelCount:1,dimension:"2d",baseArrayLayer:o,arrayLayerCount:1}),g=s.beginRenderPass({colorAttachments:[{view:p,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),y=this.device.createBindGroup({layout:a,entries:[{binding:0,resource:this.sampler},{binding:1,resource:l}]});g.setPipeline(e),g.setBindGroup(0,y),g.draw(3,1,0,0),g.end(),l=p}}if(!r){let o={width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:n};for(let l=1;l<t.mipLevelCount;++l)s.copyTextureToTexture({texture:i,mipLevel:l-1},{texture:t,mipLevel:l},o),o.width=Math.ceil(o.width/2),o.height=Math.ceil(o.height/2)}return this.device.queue.submit([s.finish()]),r||i.destroy(),t}}}),JR,bY=G(()=>{Li(),Ae(),Dr(),vg(),Lh(),cY(),dY(),rO(),pY(),gY(),JR=class{constructor(t){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:nO,buffer:lY,video:fY,compressed:hY},this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuSources"),t.renderableGC.addManagedHash(this,"_gpuSamplers"),t.renderableGC.addManagedHash(this,"_bindGroupHash"),t.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(t){this._gpu=t}initSource(t){return this._gpuSources[t.uid]?this._gpuSources[t.uid]:this._initSource(t)}_initSource(t){if(t.autoGenerateMipmaps){let o=Math.max(t.pixelWidth,t.pixelHeight);t.mipLevelCount=Math.floor(Math.log2(o))+1}let e=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;t.uploadMethodId!=="compressed"&&(e|=GPUTextureUsage.RENDER_ATTACHMENT,e|=GPUTextureUsage.COPY_SRC);let i=ZR[t.format]||{blockWidth:1,blockHeight:1},n=Math.ceil(t.pixelWidth/i.blockWidth)*i.blockWidth,r=Math.ceil(t.pixelHeight/i.blockHeight)*i.blockHeight,s={label:t.label,size:{width:n,height:r},format:t.format,sampleCount:t.sampleCount,mipLevelCount:t.mipLevelCount,dimension:t.dimension,usage:e},a=this._gpuSources[t.uid]=this._gpu.device.createTexture(s);return this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceResize,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),a}onSourceUpdate(t){let e=this.getGpuSource(t);e&&(this._uploads[t.uploadMethodId]&&this._uploads[t.uploadMethodId].upload(t,e,this._gpu),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t))}onSourceUnload(t){let e=this._gpuSources[t.uid];e&&(this._gpuSources[t.uid]=null,e.destroy())}onUpdateMipmaps(t){this._mipmapGenerator||(this._mipmapGenerator=new mY(this._gpu.device));let e=this.getGpuSource(t);this._mipmapGenerator.generateMipmap(e)}onSourceDestroy(t){t.off("update",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("destroy",this.onSourceDestroy,this),t.off("resize",this.onSourceResize,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}onSourceResize(t){let e=this._gpuSources[t.uid];e?(e.width!==t.pixelWidth||e.height!==t.pixelHeight)&&(this._textureViewHash[t.uid]=null,this._bindGroupHash[t.uid]=null,this.onSourceUnload(t),this.initSource(t)):this.initSource(t)}_initSampler(t){return this._gpuSamplers[t._resourceId]=this._gpu.device.createSampler(t),this._gpuSamplers[t._resourceId]}getGpuSampler(t){return this._gpuSamplers[t._resourceId]||this._initSampler(t)}getGpuSource(t){return this._gpuSources[t.uid]||this.initSource(t)}getTextureBindGroup(t){return this._bindGroupHash[t.uid]??this._createTextureBindGroup(t)}_createTextureBindGroup(t){let e=t.source;return this._bindGroupHash[t.uid]=new rl({0:e,1:e.style,2:new Fr({uTextureMatrix:{type:"mat3x3<f32>",value:t.textureMatrix.mapCoord}})}),this._bindGroupHash[t.uid]}getTextureView(t){let e=t.source;return this._textureViewHash[e.uid]??this._createTextureView(e)}_createTextureView(t){return this._textureViewHash[t.uid]=this.getGpuSource(t).createView(),this._textureViewHash[t.uid]}generateCanvas(t){let e=this._renderer,i=e.gpu.device.createCommandEncoder(),n=si.get().createCanvas();n.width=t.source.pixelWidth,n.height=t.source.pixelHeight;let r=n.getContext("webgpu");return r.configure({device:e.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:si.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:e.texture.getGpuSource(t.source),origin:{x:0,y:0}},{texture:r.getCurrentTexture()},{width:n.width,height:n.height}),e.gpu.device.queue.submit([i.finish()]),n}getPixels(t){let e=this.generateCanvas(t),i=cl.getOptimalCanvasAndContext(e.width,e.height),n=i.context;n.drawImage(e,0,0);let{width:r,height:s}=e,a=n.getImageData(0,0,r,s),o=new Uint8ClampedArray(a.data.buffer);return cl.returnCanvasAndContext(i),{pixels:o,width:r,height:s}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null;for(let t of Object.keys(this._bindGroupHash)){let e=Number(t);this._bindGroupHash[e]?.destroy(),this._bindGroupHash[e]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}},JR.extension={type:[ge.WebGPUSystem],name:"texture"}}),yY={};d9(yY,{WebGPURenderer:()=>xY});var PL,ML,BL,Mw,Bw,kw,xY,_Y=G(()=>{Ae(),Lj(),Gj(),Hj(),p_(),Yk(),Ro(),IX(),LX(),NX(),UX(),GX(),HX(),zX(),qX(),KX(),ZX(),sY(),aY(),uY(),bY(),PL=[...jk,YR,zR,PT,VR,GR,JR,$R,KR,QR,WR,HR,jR,UR],ML=[...Xk,qR],BL=[xR,yR,bR],Mw=[],Bw=[],kw=[],Lt.handleByNamedList(ge.WebGPUSystem,Mw),Lt.handleByNamedList(ge.WebGPUPipes,Bw),Lt.handleByNamedList(ge.WebGPUPipesAdaptor,kw),Lt.add(...PL,...ML,...BL),xY=class extends f_{constructor(){let t={name:"webgpu",type:fa.WEBGPU,systems:Mw,renderPipes:Bw,renderPipeAdaptors:kw};super(t)}}}),eP,vY=G(()=>{Ae(),hi(),Uh(),s_(),a_(),Eg(),Gh(),dS(),pu(),Dr(),eP=class{contextChange(t){let e=new Fr({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Tt,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),i=t.limits.maxBatchableTextures,n=r_({name:"graphics",bits:[hS,ak(i),vS,bg]});this.shader=new fu({glProgram:n,resources:{localUniforms:e,batchSamplers:ok(i)}})}execute(t,e){let i=e.context,n=i.customShader||this.shader,r=t.renderer,s=r.graphicsContext,{batcher:a,instructions:o}=s.getContextRenderData(i);n.groups[0]=r.globalUniforms.bindGroup,r.state.set(t.state),r.shader.bind(n),r.geometry.bind(a.geometry,n.glProgram);let l=o.instructions;for(let h=0;h<o.instructionSize;h++){let d=l[h];if(d.size){for(let p=0;p<d.textures.count;p++)r.texture.bind(d.textures.textures[p],p);r.geometry.draw(d.topology,d.size,d.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}},eP.extension={type:[ge.WebGLPipesAdaptor],name:"graphics"}}),tP,TY=G(()=>{Ae(),hi(),Uh(),Eg(),Gh(),Lk(),pu(),gi(),Bi(),tP=class{init(){let t=r_({name:"mesh",bits:[vS,Uj,bg]});this._shader=new fu({glProgram:t,resources:{uTexture:st.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Tt}}}})}execute(t,e){let i=t.renderer,n=e._shader;if(n){if(!n.glProgram){Mt("Mesh shader has no glProgram",e.shader);return}}else{n=this._shader;let r=e.texture,s=r.source;n.resources.uTexture=s,n.resources.uSampler=s.style,n.resources.textureUniforms.uniforms.uTextureMatrix=r.textureMatrix.mapCoord}n.groups[100]=i.globalUniforms.bindGroup,n.groups[101]=t.localUniformsBindGroup,i.encoder.draw({geometry:e._geometry,shader:n,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}},tP.extension={type:[ge.WebGLPipesAdaptor],name:"mesh"}}),iP,EY=G(()=>{Ae(),Po(),iP=class{constructor(){this._tempState=Ia.for2d(),this._didUploadHash={}}init(t){t.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(t,e,i){let n=t.renderer,r=this._didUploadHash[i.uid];n.shader.bind(i,r),r||(this._didUploadHash[i.uid]=!0),n.shader.updateUniformGroup(n.globalUniforms.uniformGroup),n.geometry.bind(e,i.glProgram)}execute(t,e){let i=t.renderer;this._tempState.blendMode=e.blendMode,i.state.set(this._tempState);let n=e.textures.textures;for(let r=0;r<e.textures.count;r++)i.texture.bind(n[r],r);i.geometry.draw(e.topology,e.size,e.start)}},iP.extension={type:[ge.WebGLPipesAdaptor],name:"batch"}}),Ky,SY=G(()=>{Ky=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Ky||{})}),AY,CY=G(()=>{AY=class{constructor(t,e){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.type=e}}}),nP,wY=G(()=>{Ae(),fc(),SY(),CY(),nP=class{constructor(t){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){this._gl=this._renderer.gl,this._gpuBuffers=Object.create(null),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(t){return this._gpuBuffers[t.uid]||this.createGLBuffer(t)}bind(t){let{_gl:e}=this,i=this.getGlBuffer(t);e.bindBuffer(i.type,i.buffer)}bindBufferBase(t,e){let{_gl:i}=this;this._boundBufferBases[e]!==t&&(this._boundBufferBases[e]=t,t._lastBindBaseLocation=e,i.bindBufferBase(i.UNIFORM_BUFFER,e,t.buffer))}nextBindBase(t){this._bindCallId++,this._minBaseLocation=0,t&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(t){let e=this.getLastBindBaseLocation(t);if(e>=this._minBaseLocation)return t._lastBindCallId=this._bindCallId,e;let i=0,n=this._nextBindBaseIndex;for(;i<2;){n>=this._maxBindings&&(n=this._minBaseLocation,i++);let r=this._boundBufferBases[n];if(r&&r._lastBindCallId===this._bindCallId){n++;continue}break}return e=n,this._nextBindBaseIndex=n+1,i>=2?-1:(t._lastBindCallId=this._bindCallId,this._boundBufferBases[e]=null,e)}getLastBindBaseLocation(t){let e=t._lastBindBaseLocation;return this._boundBufferBases[e]===t?e:-1}bindBufferRange(t,e,i,n){let{_gl:r}=this;i||(i=0),e||(e=0),this._boundBufferBases[e]=null,r.bindBufferRange(r.UNIFORM_BUFFER,e||0,t.buffer,i*256,n||256)}updateBuffer(t){let{_gl:e}=this,i=this.getGlBuffer(t);if(t._updateID===i.updateID)return i;i.updateID=t._updateID,e.bindBuffer(i.type,i.buffer);let n=t.data,r=t.descriptor.usage&Ci.STATIC?e.STATIC_DRAW:e.DYNAMIC_DRAW;return n?i.byteLength>=n.byteLength?e.bufferSubData(i.type,0,n,0,t._updateSize/n.BYTES_PER_ELEMENT):(i.byteLength=n.byteLength,e.bufferData(i.type,n,r)):(i.byteLength=t.descriptor.size,e.bufferData(i.type,i.byteLength,r)),i}destroyAll(){let t=this._gl;for(let e in this._gpuBuffers)t.deleteBuffer(this._gpuBuffers[e].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(t,e){let i=this._gpuBuffers[t.uid],n=this._gl;e||n.deleteBuffer(i.buffer),this._gpuBuffers[t.uid]=null}createGLBuffer(t){let{_gl:e}=this,i=Ky.ARRAY_BUFFER;t.descriptor.usage&Ci.INDEX?i=Ky.ELEMENT_ARRAY_BUFFER:t.descriptor.usage&Ci.UNIFORM&&(i=Ky.UNIFORM_BUFFER);let n=new AY(e.createBuffer(),i);return this._gpuBuffers[t.uid]=n,t.on("destroy",this.onBufferDestroy,this),n}resetState(){this._boundBufferBases=Object.create(null)}},nP.extension={type:[ge.WebGLSystem],name:"buffer"}}),C1,DY,RY=G(()=>{Li(),Ae(),Bi(),C1=class PY{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){e={...PY.defaultOptions,...e};let i=this.multiView=e.multiView;if(e.context&&i&&(Mt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),i=!1),i?this.canvas=si.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{let n=this._renderer.background.alpha<1,r=e.premultipliedAlpha??!0,s=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:n,premultipliedAlpha:r,antialias:s,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Mt("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:i}=this;(i.width<e.width||i.height<e.height)&&(i.width=Math.max(e.width,e.width),i.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof si.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let i=this._renderer.view.canvas;i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,i){let n,r=this.canvas;if(e===2&&(n=r.getContext("webgl2",i)),!n&&(n=r.getContext("webgl",i),!n))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=n,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,i={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...i,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...i,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};let n=e.getExtension("WEBGL_provoking_vertex");n&&n.provokingVertexWEBGL(n.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){let e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(e){let i=e.getContextAttributes();i&&!i.stencil&&Mt("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let n=this.supports,r=this.webGLVersion===2,s=this.extensions;n.uint32Indices=r||!!s.uint32ElementIndex,n.uniformBufferObject=r,n.vertexArrayObject=r||!!s.vertexArrayObject,n.srgbTextures=r||!!s.srgb,n.nonPowOf2wrapping=r,n.nonPowOf2mipmaps=r,n.msaa=r,n.uint32Indices||Mt("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}},C1.extension={type:[ge.WebGLSystem],name:"context"},C1.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1},DY=C1}),yE,rP,kL,Oi,sO=G(()=>{yE=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(yE||{}),rP=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(rP||{}),kL=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(kL||{}),Oi=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Oi||{})});function fle(t){return sP[t]??sP.float32}var sP,MY=G(()=>{sO(),sP={uint8x2:Oi.UNSIGNED_BYTE,uint8x4:Oi.UNSIGNED_BYTE,sint8x2:Oi.BYTE,sint8x4:Oi.BYTE,unorm8x2:Oi.UNSIGNED_BYTE,unorm8x4:Oi.UNSIGNED_BYTE,snorm8x2:Oi.BYTE,snorm8x4:Oi.BYTE,uint16x2:Oi.UNSIGNED_SHORT,uint16x4:Oi.UNSIGNED_SHORT,sint16x2:Oi.SHORT,sint16x4:Oi.SHORT,unorm16x2:Oi.UNSIGNED_SHORT,unorm16x4:Oi.UNSIGNED_SHORT,snorm16x2:Oi.SHORT,snorm16x4:Oi.SHORT,float16x2:Oi.HALF_FLOAT,float16x4:Oi.HALF_FLOAT,float32:Oi.FLOAT,float32x2:Oi.FLOAT,float32x3:Oi.FLOAT,float32x4:Oi.FLOAT,uint32:Oi.UNSIGNED_INT,uint32x2:Oi.UNSIGNED_INT,uint32x3:Oi.UNSIGNED_INT,uint32x4:Oi.UNSIGNED_INT,sint32:Oi.INT,sint32x2:Oi.INT,sint32x3:Oi.INT,sint32x4:Oi.INT}}),OL,aP,BY=G(()=>{Ae(),If(),Jk(),MY(),OL={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},aP=class{constructor(t){this._geometryVaoHash=Object.create(null),this._renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let t=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let e=this._renderer.context.extensions.vertexArrayObject;e&&(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=n=>e.bindVertexArrayOES(n),t.deleteVertexArray=n=>e.deleteVertexArrayOES(n));let i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(t.drawArraysInstanced=(n,r,s,a)=>{i.drawArraysInstancedANGLE(n,r,s,a)},t.drawElementsInstanced=(n,r,s,a,o)=>{i.drawElementsInstancedANGLE(n,r,s,a,o)},t.vertexAttribDivisor=(n,r)=>i.vertexAttribDivisorANGLE(n,r)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(t,e){let i=this.gl;this._activeGeometry=t;let n=this.getVao(t,e);this._activeVao!==n&&(this._activeVao=n,i.bindVertexArray(n)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let t=this._activeGeometry,e=this._renderer.buffer;for(let i=0;i<t.buffers.length;i++){let n=t.buffers[i];e.updateBuffer(n)}}checkCompatibility(t,e){let i=t.attributes,n=e._attributeData;for(let r in n)if(!i[r])throw new Error(`shader and geometry incompatible, geometry missing the "${r}" attribute`)}getSignature(t,e){let i=t.attributes,n=e._attributeData,r=["g",t.uid];for(let s in i)n[s]&&r.push(s,n[s].location);return r.join("-")}getVao(t,e){return this._geometryVaoHash[t.uid]?.[e._key]||this.initGeometryVao(t,e)}initGeometryVao(t,e,i=!0){let n=this._renderer.gl,r=this._renderer.buffer;this._renderer.shader._getProgramData(e),this.checkCompatibility(t,e);let s=this.getSignature(t,e);this._geometryVaoHash[t.uid]||(this._geometryVaoHash[t.uid]=Object.create(null),t.on("destroy",this.onGeometryDestroy,this));let a=this._geometryVaoHash[t.uid],o=a[s];if(o)return a[e._key]=o,o;QX(t,e._attributeData);let l=t.buffers;o=n.createVertexArray(),n.bindVertexArray(o);for(let h=0;h<l.length;h++){let d=l[h];r.bind(d)}return this.activateVao(t,e),a[e._key]=o,a[s]=o,n.bindVertexArray(null),o}onGeometryDestroy(t,e){let i=this._geometryVaoHash[t.uid],n=this.gl;if(i){if(e)for(let r in i)this._activeVao!==i[r]&&this.unbind(),n.deleteVertexArray(i[r]);this._geometryVaoHash[t.uid]=null}}destroyAll(t=!1){let e=this.gl;for(let i in this._geometryVaoHash){if(t)for(let n in this._geometryVaoHash[i]){let r=this._geometryVaoHash[i];this._activeVao!==r&&this.unbind(),e.deleteVertexArray(r[n])}this._geometryVaoHash[i]=null}}activateVao(t,e){let i=this._renderer.gl,n=this._renderer.buffer,r=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let s=null;for(let a in r){let o=r[a],l=o.buffer,h=n.getGlBuffer(l),d=e._attributeData[a];if(d){s!==h&&(n.bind(l),s=h);let p=d.location;i.enableVertexAttribArray(p);let g=Bh(o.format),y=fle(o.format);if(d.format?.substring(1,4)==="int"?i.vertexAttribIPointer(p,g.size,y,o.stride,o.offset):i.vertexAttribPointer(p,g.size,y,g.normalised,o.stride,o.offset),o.instance)if(this.hasInstance){let v=o.divisor??1;i.vertexAttribDivisor(p,v)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,n){let{gl:r}=this._renderer,s=this._activeGeometry,a=OL[t||s.topology];if(n??(n=s.instanceCount),s.indexBuffer){let o=s.indexBuffer.data.BYTES_PER_ELEMENT,l=o===2?r.UNSIGNED_SHORT:r.UNSIGNED_INT;n!==1?r.drawElementsInstanced(a,e||s.indexBuffer.data.length,l,(i||0)*o,n):r.drawElements(a,e||s.indexBuffer.data.length,l,(i||0)*o)}else n!==1?r.drawArraysInstanced(a,i||0,e||s.getSize(),n):r.drawArrays(a,i||0,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null,this._geometryVaoHash=null}},aP.extension={type:[ge.WebGLSystem],name:"geometry"}}),FL,w1,kY,OY=G(()=>{Ae(),Bi(),Ff(),pu(),Po(),Zr(),gi(),ga(),FL=new Of({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),w1=class FY{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){let{useBackBuffer:i,antialias:n}={...FY.defaultOptions,...e};this.useBackBuffer=i,this._antialias=n,this._renderer.context.supports.msaa||(Mt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Ia.for2d();let r=new Do({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new fu({glProgram:r,resources:{uTexture:st.WHITE.source}})}renderStart(e){let i=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!i.isRoot,this._useBackBufferThisRender){let n=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=n.colorTexture,e.target=this._getBackBufferTexture(n.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:FL,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new st({source:new Ar({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}},w1.extension={type:[ge.WebGLSystem],name:"backBuffer",priority:1},w1.defaultOptions={useBackBuffer:!1},kY=w1}),oP,IY=G(()=>{Ae(),oP=class{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.gl.colorMask(!!(t&8),!!(t&4),!!(t&2),!!(t&1)))}},oP.extension={type:[ge.WebGLSystem],name:"colorMask"}}),uP,LY=G(()=>{Ae(),uP=class{constructor(t){this.commandFinished=Promise.resolve(),this._renderer=t}setGeometry(t,e){this._renderer.geometry.bind(t,e.glProgram)}finishRenderPass(){}draw(t){let e=this._renderer,{geometry:i,shader:n,state:r,skipSync:s,topology:a,size:o,start:l,instanceCount:h}=t;e.shader.bind(n,s),e.geometry.bind(i,e.shader._activeProgram),r&&e.state.set(r),e.geometry.draw(a,o,l,h??i.instanceCount)}destroy(){this._renderer=null}},uP.extension={type:[ge.WebGLSystem],name:"encoder"}}),lP,NY=G(()=>{Ae(),rk(),lP=class{constructor(t){this._renderer=t}contextChange(){let t=this._renderer.gl;this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=V7(this.maxTextures,t);let e=this._renderer.context.webGLVersion===2;this.maxUniformBindings=e?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0}destroy(){}},lP.extension={type:[ge.WebGLSystem],name:"limits"}}),cP,UY=G(()=>{Ae(),eO(),kf(),cP=class{constructor(t){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:tr.NONE},this._renderTargetStencilState=Object.create(null),t.renderTarget.onRenderTargetChange.add(this)}contextChange(t){this._gl=t,this._comparisonFuncMapping={always:t.ALWAYS,never:t.NEVER,equal:t.EQUAL,"not-equal":t.NOTEQUAL,less:t.LESS,"less-equal":t.LEQUAL,greater:t.GREATER,"greater-equal":t.GEQUAL},this._stencilOpsMapping={keep:t.KEEP,zero:t.ZERO,replace:t.REPLACE,invert:t.INVERT,"increment-clamp":t.INCR,"decrement-clamp":t.DECR,"increment-wrap":t.INCR_WRAP,"decrement-wrap":t.DECR_WRAP},this.resetState()}onRenderTargetChange(t){if(this._activeRenderTarget===t)return;this._activeRenderTarget=t;let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:tr.DISABLED,stencilReference:0}),this.setStencilMode(e.stencilMode,e.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=tr.NONE,this._stencilCache.stencilReference=0}setStencilMode(t,e){let i=this._renderTargetStencilState[this._activeRenderTarget.uid],n=this._gl,r=ec[t],s=this._stencilCache;if(i.stencilMode=t,i.stencilReference=e,t===tr.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,n.disable(n.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,n.enable(n.STENCIL_TEST)),(t!==s.stencilMode||s.stencilReference!==e)&&(s.stencilMode=t,s.stencilReference=e,n.stencilFunc(this._comparisonFuncMapping[r.stencilBack.compare],e,255),n.stencilOp(n.KEEP,n.KEEP,this._stencilOpsMapping[r.stencilBack.passOp]))}},cP.extension={type:[ge.WebGLSystem],name:"stencil"}});function ple(t){let e=t.map(s=>({data:s,offset:0,size:0})),i=16,n=0,r=0;for(let s=0;s<e.length;s++){let a=e[s];if(n=aO[a.data.type],!n)throw new Error(`Unknown type ${a.data.type}`);a.data.size>1&&(n=Math.max(n,i)*a.data.size);let o=n===12?16:n;a.size=n;let l=r%i;l>0&&i-l<o?r+=(i-l)%16:r+=(n-l%n)%n,a.offset=r,r+=n}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}var aO,oO=G(()=>{aO={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64}});function mle(t,e){let i=Math.max(aO[t.data.type]/16,1),n=t.data.value.length/t.data.size,r=(4-n%4)%4,s=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${t.data.name};
        offset += ${e};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${t.data.size*i}; i++)
        {
            for(var j = 0; j < ${n}; j++)
            {
                ${s}[arrayOffset++] = v[t++];
            }
            ${r!==0?`arrayOffset += ${r};`:""}
        }
    `}var GY=G(()=>{oO()});function gle(t){return VX(t,"uboStd40",mle,XR)}var HY=G(()=>{Qk(),Zk(),GY()}),hP,zY=G(()=>{Ae(),Wk(),oO(),HY(),hP=class extends qk{constructor(){super({createUboElements:ple,generateUboSync:gle})}},hP.extension={type:[ge.WebGLSystem],name:"ubo"}}),VY,jY=G(()=>{VY=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}}),XY,YY=G(()=>{wr(),Bi(),pg(),Sg(),jY(),XY=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new mn}init(t,e){this._renderer=t,this._renderTargetSystem=e,t.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new mn}copyToTexture(t,e,i,n,r){let s=this._renderTargetSystem,a=this._renderer,o=s.getGpuRenderTarget(t),l=a.gl;return this.finishRenderPass(t),l.bindFramebuffer(l.FRAMEBUFFER,o.resolveTargetFramebuffer),a.texture.bind(e,0),l.copyTexSubImage2D(l.TEXTURE_2D,0,r.x,r.y,i.x,i.y,n.width,n.height),e}startRenderPass(t,e=!0,i,n){let r=this._renderTargetSystem,s=t.colorTexture,a=r.getGpuRenderTarget(t),o=n.y;t.isRoot&&(o=s.pixelHeight-n.height),t.colorTextures.forEach(d=>{this._renderer.texture.unbind(d)});let l=this._renderer.gl;l.bindFramebuffer(l.FRAMEBUFFER,a.framebuffer);let h=this._viewPortCache;(h.x!==n.x||h.y!==o||h.width!==n.width||h.height!==n.height)&&(h.x=n.x,h.y=o,h.width=n.width,h.height=n.height,l.viewport(n.x,o,n.width,n.height)),!a.depthStencilRenderBuffer&&(t.stencil||t.depth)&&this._initStencil(a),this.clear(t,e,i)}finishRenderPass(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);if(!e.msaa)return;let i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,e.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,e.framebuffer),i.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer)}initGpuRenderTarget(t){let e=this._renderer.gl,i=new VY;return t.colorTexture instanceof nl?(this._renderer.context.ensureCanvasSize(t.colorTexture.resource),i.framebuffer=null,i):(this._initColor(t,i),e.bindFramebuffer(e.FRAMEBUFFER,null),i)}destroyGpuRenderTarget(t){let e=this._renderer.gl;t.framebuffer&&(e.deleteFramebuffer(t.framebuffer),t.framebuffer=null),t.resolveTargetFramebuffer&&(e.deleteFramebuffer(t.resolveTargetFramebuffer),t.resolveTargetFramebuffer=null),t.depthStencilRenderBuffer&&(e.deleteRenderbuffer(t.depthStencilRenderBuffer),t.depthStencilRenderBuffer=null),t.msaaRenderBuffer.forEach(i=>{e.deleteRenderbuffer(i)}),t.msaaRenderBuffer=null}clear(t,e,i){if(!e)return;let n=this._renderTargetSystem;typeof e=="boolean"&&(e=e?ua.ALL:ua.NONE);let r=this._renderer.gl;if(e&ua.COLOR){i??(i=n.defaultClearColor);let s=this._clearColorCache,a=i;(s[0]!==a[0]||s[1]!==a[1]||s[2]!==a[2]||s[3]!==a[3])&&(s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],r.clearColor(a[0],a[1],a[2],a[3]))}r.clear(e)}resizeGpuRenderTarget(t){if(t.isRoot)return;let e=this._renderTargetSystem.getGpuRenderTarget(t);this._resizeColor(t,e),(t.stencil||t.depth)&&this._resizeStencil(e)}_initColor(t,e){let i=this._renderer,n=i.gl,r=n.createFramebuffer();if(e.resolveTargetFramebuffer=r,n.bindFramebuffer(n.FRAMEBUFFER,r),e.width=t.colorTexture.source.pixelWidth,e.height=t.colorTexture.source.pixelHeight,t.colorTextures.forEach((s,a)=>{let o=s.source;o.antialias&&(i.context.supports.msaa?e.msaa=!0:Mt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(o,0);let l=i.texture.getGlSource(o).texture;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+a,3553,l,0)}),e.msaa){let s=n.createFramebuffer();e.framebuffer=s,n.bindFramebuffer(n.FRAMEBUFFER,s),t.colorTextures.forEach((a,o)=>{let l=n.createRenderbuffer();e.msaaRenderBuffer[o]=l})}else e.framebuffer=r;this._resizeColor(t,e)}_resizeColor(t,e){let i=t.colorTexture.source;if(e.width=i.pixelWidth,e.height=i.pixelHeight,t.colorTextures.forEach((n,r)=>{r!==0&&n.source.resize(i.width,i.height,i._resolution)}),e.msaa){let n=this._renderer,r=n.gl,s=e.framebuffer;r.bindFramebuffer(r.FRAMEBUFFER,s),t.colorTextures.forEach((a,o)=>{let l=a.source;n.texture.bindSource(l,0);let h=n.texture.getGlSource(l).internalFormat,d=e.msaaRenderBuffer[o];r.bindRenderbuffer(r.RENDERBUFFER,d),r.renderbufferStorageMultisample(r.RENDERBUFFER,4,h,l.pixelWidth,l.pixelHeight),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+o,r.RENDERBUFFER,d)})}}_initStencil(t){if(t.framebuffer===null)return;let e=this._renderer.gl,i=e.createRenderbuffer();t.depthStencilRenderBuffer=i,e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i),this._resizeStencil(t)}_resizeStencil(t){let e=this._renderer.gl;e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilRenderBuffer),t.msaa?e.renderbufferStorageMultisample(e.RENDERBUFFER,4,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,this._renderer.context.webGLVersion===2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t.width,t.height)}prerender(t){let e=t.colorTexture.resource;this._renderer.context.multiView&&nl.test(e)&&this._renderer.context.ensureCanvasSize(e)}postrender(t){if(this._renderer.context.multiView&&nl.test(t.colorTexture.resource)){let e=this._renderer.context.canvas,i=t.colorTexture;i.context2D.drawImage(e,0,i.pixelHeight-e.height)}}}}),dP,qY=G(()=>{Ae(),iO(),YY(),dP=class extends tO{constructor(t){super(t),this.adaptor=new XY,this.adaptor.init(t,this)}},dP.extension={type:[ge.WebGLSystem],name:"renderTarget"}});function ble(t,e){let i=[],n=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `],r=!1,s=0,a=e._getProgramData(t.glProgram);for(let l in t.groups){let h=t.groups[l];i.push(`
            resources = g[${l}].resources;
        `);for(let d in h.resources){let p=h.resources[d];if(p instanceof Fr)if(p.ubo){let g=t._uniformBindMap[l][Number(d)];i.push(`
                        sS.bindUniformBlock(
                            resources[${d}],
                            '${g}',
                            ${t.glProgram._uniformBlockData[g].index}
                        );
                    `)}else i.push(`
                        ugS.updateUniformGroup(resources[${d}], p, sD);
                    `);else if(p instanceof SS){let g=t._uniformBindMap[l][Number(d)];i.push(`
                    sS.bindUniformBlock(
                        resources[${d}],
                        '${g}',
                        ${t.glProgram._uniformBlockData[g].index}
                    );
                `)}else if(p instanceof Ar){let g=t._uniformBindMap[l][d],y=a.uniformData[g];y&&(r||(r=!0,n.push(`
                        var tS = r.texture;
                        `)),e._gl.uniform1i(y.location,s),i.push(`
                        tS.bind(resources[${d}], ${s});
                    `),s++)}}}let o=[...n,...i].join(`
`);return new Function("r","s","sD",o)}var WY=G(()=>{AS(),Dr(),Zr()}),$Y,KY=G(()=>{$Y=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}});function IL(t,e,i){let n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}var QY=G(()=>{});function Ow(t){let e=new Array(t);for(let i=0;i<e.length;i++)e[i]=!1;return e}function ZY(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Ow(2*e);case"bvec3":return Ow(3*e);case"bvec4":return Ow(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var uO=G(()=>{});function JY(t,e){if(!Iy){let i=Object.keys(fP);Iy={};for(let n=0;n<i.length;++n){let r=i[n];Iy[t[r]]=fP[r]}}return Iy[e]}function yle(t,e){let i=JY(t,e);return eq[i]||"float32"}var Iy,fP,eq,lO=G(()=>{Iy=null,fP={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},eq={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"}});function xle(t,e,i=!1){let n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let a=0;a<r;a++){let o=e.getActiveAttrib(t,a);if(o.name.startsWith("gl_"))continue;let l=yle(e,o.type);n[o.name]={location:0,format:l,stride:Bh(l).stride,offset:0,instance:!1,start:0}}let s=Object.keys(n);if(i){s.sort((a,o)=>a>o?1:-1);for(let a=0;a<s.length;a++)n[s[a]].location=a,e.bindAttribLocation(t,a,s[a]);e.linkProgram(t)}else for(let a=0;a<s.length;a++)n[s[a]].location=e.getAttribLocation(t,s[a]);return n}var tq=G(()=>{If(),lO()});function _le(t,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};let i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let r=0;r<n;r++){let s=e.getActiveUniformBlockName(t,r),a=e.getUniformBlockIndex(t,s),o=e.getActiveUniformBlockParameter(t,r,e.UNIFORM_BLOCK_DATA_SIZE);i[s]={name:s,index:a,size:o}}return i}var iq=G(()=>{});function vle(t,e){let i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;r++){let s=e.getActiveUniform(t,r),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),l=JY(e,s.type);i[a]={name:a,index:r,type:l,size:s.size,isArray:o,value:ZY(l,s.size)}}return i}var nq=G(()=>{uO(),lO()});function LL(t,e){let i=t.getShaderSource(e).split(`
`).map((h,d)=>`${d}: ${h}`),n=t.getShaderInfoLog(e),r=n.split(`
`),s={},a=r.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!s[h]?(s[h]=!0,!0):!1),o=[""];a.forEach(h=>{i[h-1]=`%c${i[h-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let l=i.join(`
`);o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function Tle(t,e,i,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||LL(t,i),t.getShaderParameter(n,t.COMPILE_STATUS)||LL(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}var rq=G(()=>{});function Ele(t,e){let i=IL(t,t.VERTEX_SHADER,e.vertex),n=IL(t,t.FRAGMENT_SHADER,e.fragment),r=t.createProgram();t.attachShader(r,i),t.attachShader(r,n);let s=e.transformFeedbackVaryings;s&&(typeof t.transformFeedbackVaryings!="function"?Mt("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||Tle(t,r,i,n),e._attributeData=xle(r,t,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=vle(r,t),e._uniformBlockData=_le(r,t),t.deleteShader(i),t.deleteShader(n);let a={};for(let o in e._uniformData){let l=e._uniformData[o];a[o]={location:t.getUniformLocation(r,o),value:ZY(l.type,l.size)}}return new $Y(r,a)}var sq=G(()=>{Bi(),KY(),QY(),uO(),tq(),iq(),nq(),rq()}),sy,pP,aq=G(()=>{Ae(),WY(),sq(),sy={textureCount:0,blockIndex:0},pP=class{constructor(t){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(t){this._gl=t,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(t,e){if(this._setProgram(t.glProgram),e)return;sy.textureCount=0,sy.blockIndex=0;let i=this._shaderSyncFunctions[t.glProgram._key];i||(i=this._shaderSyncFunctions[t.glProgram._key]=this._generateShaderSync(t,this)),this._renderer.buffer.nextBindBase(!!t.glProgram.transformFeedbackVaryings),i(this._renderer,t,sy)}updateUniformGroup(t){this._renderer.uniformGroup.updateUniformGroup(t,this._activeProgram,sy)}bindUniformBlock(t,e,i=0){let n=this._renderer.buffer,r=this._getProgramData(this._activeProgram),s=t._bufferResource;s||this._renderer.ubo.updateUniformGroup(t);let a=t.buffer,o=n.updateBuffer(a),l=n.freeLocationForBufferBase(o);if(s){let{offset:d,size:p}=t;d===0&&p===a.data.byteLength?n.bindBufferBase(o,l):n.bindBufferRange(o,l,d)}else n.getLastBindBaseLocation(o)!==l&&n.bindBufferBase(o,l);let h=this._activeProgram._uniformBlockData[e].index;r.uniformBlockBindings[i]!==l&&(r.uniformBlockBindings[i]=l,this._renderer.gl.uniformBlockBinding(r.program,h,l))}_setProgram(t){if(this._activeProgram===t)return;this._activeProgram=t;let e=this._getProgramData(t);this._gl.useProgram(e.program)}_getProgramData(t){return this._programDataHash[t._key]||this._createProgramData(t)}_createProgramData(t){let e=t._key;return this._programDataHash[e]=Ele(this._gl,t),this._programDataHash[e]}destroy(){for(let t of Object.keys(this._programDataHash))this._programDataHash[t].destroy(),this._programDataHash[t]=null;this._programDataHash=null,this._shaderSyncFunctions=null,this._activeProgram=null,this._renderer=null,this._gl=null}_generateShaderSync(t,e){return ble(t,e)}resetState(){this._activeProgram=null}},pP.extension={type:[ge.WebGLSystem],name:"shader"}}),oq,uq,lq=G(()=>{oq={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},uq={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"}});function Sle(t,e){let i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(let n in t.uniforms){if(!e[n]){t.uniforms[n]instanceof Fr?t.uniforms[n].ubo?i.push(`
                        renderer.shader.bindUniformBlock(uv.${n}, "${n}");
                    `):i.push(`
                        renderer.shader.updateUniformGroup(uv.${n});
                    `):t.uniforms[n]instanceof SS&&i.push(`
                        renderer.shader.bindBufferResource(uv.${n}, "${n}");
                    `);continue}let r=t.uniformStructures[n],s=!1;for(let a=0;a<Sh.length;a++){let o=Sh[a];if(r.type===o.type&&o.test(r)){i.push(`name = "${n}";`,Sh[a].uniform),s=!0;break}}if(!s){let a=(r.size===1?oq:uq)[r.type].replace("location",`ud["${n}"].location`);i.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var cq=G(()=>{AS(),Dr(),Kk(),lq()}),mP,hq=G(()=>{Ae(),cq(),mP=class{constructor(t){this._cache={},this._uniformGroupSyncHash={},this._renderer=t,this.gl=null,this._cache={}}contextChange(t){this.gl=t}updateUniformGroup(t,e,i){let n=this._renderer.shader._getProgramData(e);(!t.isStatic||t._dirtyId!==n.uniformDirtyGroups[t.uid])&&(n.uniformDirtyGroups[t.uid]=t._dirtyId,this._getUniformSyncFunction(t,e)(n.uniformData,t.uniforms,this._renderer,i))}_getUniformSyncFunction(t,e){return this._uniformGroupSyncHash[t._signature]?.[e._key]||this._createUniformSyncFunction(t,e)}_createUniformSyncFunction(t,e){let i=this._uniformGroupSyncHash[t._signature]||(this._uniformGroupSyncHash[t._signature]={}),n=this._getSignature(t,e._uniformData,"u");return this._cache[n]||(this._cache[n]=this._generateUniformsSync(t,e._uniformData)),i[e._key]=this._cache[n],i[e._key]}_generateUniformsSync(t,e){return Sle(t,e)}_getSignature(t,e,i){let n=t.uniforms,r=[`${i}-`];for(let s in n)r.push(s),e[s]&&r.push(e[s].type);return r.join("-")}destroy(){this._renderer=null,this._cache=null}},mP.extension={type:[ge.WebGLSystem],name:"uniformGroup"}});function Ale(t){let e={};if(e.normal=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.add=[t.ONE,t.ONE],e.multiply=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.screen=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e["screen-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.erase=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],!(t instanceof si.get().getWebGLRenderingContext()))e.min=[t.ONE,t.ONE,t.ONE,t.ONE,t.MIN,t.MIN],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,t.MAX,t.MAX];else{let i=t.getExtension("EXT_blend_minmax");i&&(e.min=[t.ONE,t.ONE,t.ONE,t.ONE,i.MIN_EXT,i.MIN_EXT],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,i.MAX_EXT,i.MAX_EXT])}return e}var dq=G(()=>{Li()}),NL,UL,GL,HL,zL,VL,Fw,fq,pq=G(()=>{Ae(),Po(),dq(),NL=0,UL=1,GL=2,HL=3,zL=4,VL=5,Fw=class gP{constructor(e){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[NL]=this.setBlend,this.map[UL]=this.setOffset,this.map[GL]=this.setCullFace,this.map[HL]=this.setDepthTest,this.map[zL]=this.setFrontFace,this.map[VL]=this.setDepthMask,this.checks=[],this.defaultState=Ia.for2d(),e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){this._invertFrontFace=!e.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(e){this.gl=e,this.blendModesMap=Ale(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let i=this.stateId^e.data,n=0;for(;i;)i&1&&this.map[n].call(this,!!(e.data&1<<n)),i>>=1,n++;this.stateId=e.data}for(let i=0;i<this.checks.length;i++)this.checks[i](this,e)}forceState(e){e||(e=this.defaultState);for(let i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(let i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(gP._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(gP._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this._cullFace=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(e){this._frontFace=e,this._frontFaceDirty=!1;let i=this._invertFrontFace?!e:e;this._glFrontFace!==i&&(this._glFrontFace=i,this.gl.frontFace(this.gl[i?"CW":"CCW"]))}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;let i=this.blendModesMap[e],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,i){this.gl.polygonOffset(e,i)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,i){let n=this.checks.indexOf(e);i&&n===-1?this.checks.push(e):!i&&n!==-1&&this.checks.splice(n,1)}static _checkBlendMode(e,i){e.setBlendMode(i.blendMode)}static _checkPolygonOffset(e,i){e.setPolygonOffset(1,i.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}},Fw.extension={type:[ge.WebGLSystem],name:"state"},fq=Fw}),mq,gq=G(()=>{sO(),mq=class{constructor(t){this.target=rP.TEXTURE_2D,this.texture=t,this.width=-1,this.height=-1,this.type=Oi.UNSIGNED_BYTE,this.internalFormat=yE.RGBA,this.format=yE.RGBA,this.samplerType=0}}}),bq,yq=G(()=>{bq={id:"buffer",upload(t,e,i){e.width===t.width||e.height===t.height?i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.width,t.height,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,t.width,t.height,0,e.format,e.type,t.resource),e.width=t.width,e.height=t.height}}}),jL,xq,_q=G(()=>{jL={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},xq={id:"compressed",upload(t,e,i){i.pixelStorei(i.UNPACK_ALIGNMENT,4);let n=t.pixelWidth,r=t.pixelHeight,s=!!jL[t.format];for(let a=0;a<t.resource.length;a++){let o=t.resource[a];s?i.compressedTexImage2D(i.TEXTURE_2D,a,e.internalFormat,n,r,0,o):i.texImage2D(i.TEXTURE_2D,a,e.internalFormat,n,r,0,e.format,e.type,o),n=Math.max(n>>1,1),r=Math.max(r>>1,1)}}}}),cO,hO=G(()=>{cO={id:"image",upload(t,e,i,n){let r=e.width,s=e.height,a=t.pixelWidth,o=t.pixelHeight,l=t.resourceWidth,h=t.resourceHeight;l<a||h<o?((r!==a||s!==o)&&i.texImage2D(e.target,0,e.internalFormat,a,o,0,e.format,e.type,null),n===2?i.texSubImage2D(i.TEXTURE_2D,0,0,0,l,h,e.format,e.type,t.resource):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource)):r===a&&s===o?i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource):n===2?i.texImage2D(e.target,0,e.internalFormat,a,o,0,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,e.format,e.type,t.resource),e.width=a,e.height=o}}}),vq,Tq=G(()=>{hO(),vq={id:"video",upload(t,e,i,n){if(!t.isValid){i.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}cO.upload(t,e,i,n)}}}),bP,Eq,MT,Sq,Aq=G(()=>{bP={linear:9729,nearest:9728},Eq={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},MT={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},Sq={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519}});function XL(t,e,i,n,r,s,a,o){let l=s;if(!o||t.addressModeU!=="repeat"||t.addressModeV!=="repeat"||t.addressModeW!=="repeat"){let h=MT[a?"clamp-to-edge":t.addressModeU],d=MT[a?"clamp-to-edge":t.addressModeV],p=MT[a?"clamp-to-edge":t.addressModeW];e[r](l,e.TEXTURE_WRAP_S,h),e[r](l,e.TEXTURE_WRAP_T,d),e.TEXTURE_WRAP_R&&e[r](l,e.TEXTURE_WRAP_R,p)}if((!o||t.magFilter!=="linear")&&e[r](l,e.TEXTURE_MAG_FILTER,bP[t.magFilter]),i){if(!o||t.mipmapFilter!=="linear"){let h=Eq[t.minFilter][t.mipmapFilter];e[r](l,e.TEXTURE_MIN_FILTER,h)}}else e[r](l,e.TEXTURE_MIN_FILTER,bP[t.minFilter]);if(n&&t.maxAnisotropy>1){let h=Math.min(t.maxAnisotropy,e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[r](l,n.TEXTURE_MAX_ANISOTROPY_EXT,h)}t.compare&&e[r](l,e.TEXTURE_COMPARE_FUNC,Sq[t.compare])}var Cq=G(()=>{Aq()});function Cle(t){return{r8unorm:t.RED,r8snorm:t.RED,r8uint:t.RED,r8sint:t.RED,r16uint:t.RED,r16sint:t.RED,r16float:t.RED,rg8unorm:t.RG,rg8snorm:t.RG,rg8uint:t.RG,rg8sint:t.RG,r32uint:t.RED,r32sint:t.RED,r32float:t.RED,rg16uint:t.RG,rg16sint:t.RG,rg16float:t.RG,rgba8unorm:t.RGBA,"rgba8unorm-srgb":t.RGBA,rgba8snorm:t.RGBA,rgba8uint:t.RGBA,rgba8sint:t.RGBA,bgra8unorm:t.RGBA,"bgra8unorm-srgb":t.RGBA,rgb9e5ufloat:t.RGB,rgb10a2unorm:t.RGBA,rg11b10ufloat:t.RGB,rg32uint:t.RG,rg32sint:t.RG,rg32float:t.RG,rgba16uint:t.RGBA,rgba16sint:t.RGBA,rgba16float:t.RGBA,rgba32uint:t.RGBA,rgba32sint:t.RGBA,rgba32float:t.RGBA,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT,depth24plus:t.DEPTH_COMPONENT,"depth24plus-stencil8":t.DEPTH_STENCIL,depth32float:t.DEPTH_COMPONENT,"depth32float-stencil8":t.DEPTH_STENCIL}}var wq=G(()=>{});function wle(t,e){let i={},n=t.RGBA;return t instanceof si.get().getWebGLRenderingContext()?e.srgb&&(i={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(i={"rgba8unorm-srgb":t.SRGB8_ALPHA8,"bgra8unorm-srgb":t.SRGB8_ALPHA8},n=t.RGBA8),{r8unorm:t.R8,r8snorm:t.R8_SNORM,r8uint:t.R8UI,r8sint:t.R8I,r16uint:t.R16UI,r16sint:t.R16I,r16float:t.R16F,rg8unorm:t.RG8,rg8snorm:t.RG8_SNORM,rg8uint:t.RG8UI,rg8sint:t.RG8I,r32uint:t.R32UI,r32sint:t.R32I,r32float:t.R32F,rg16uint:t.RG16UI,rg16sint:t.RG16I,rg16float:t.RG16F,rgba8unorm:t.RGBA,...i,rgba8snorm:t.RGBA8_SNORM,rgba8uint:t.RGBA8UI,rgba8sint:t.RGBA8I,bgra8unorm:n,rgb9e5ufloat:t.RGB9_E5,rgb10a2unorm:t.RGB10_A2,rg11b10ufloat:t.R11F_G11F_B10F,rg32uint:t.RG32UI,rg32sint:t.RG32I,rg32float:t.RG32F,rgba16uint:t.RGBA16UI,rgba16sint:t.RGBA16I,rgba16float:t.RGBA16F,rgba32uint:t.RGBA32UI,rgba32sint:t.RGBA32I,rgba32float:t.RGBA32F,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT16,depth24plus:t.DEPTH_COMPONENT24,"depth24plus-stencil8":t.DEPTH24_STENCIL8,depth32float:t.DEPTH_COMPONENT32F,"depth32float-stencil8":t.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}var Dq=G(()=>{Li()});function Dle(t){return{r8unorm:t.UNSIGNED_BYTE,r8snorm:t.BYTE,r8uint:t.UNSIGNED_BYTE,r8sint:t.BYTE,r16uint:t.UNSIGNED_SHORT,r16sint:t.SHORT,r16float:t.HALF_FLOAT,rg8unorm:t.UNSIGNED_BYTE,rg8snorm:t.BYTE,rg8uint:t.UNSIGNED_BYTE,rg8sint:t.BYTE,r32uint:t.UNSIGNED_INT,r32sint:t.INT,r32float:t.FLOAT,rg16uint:t.UNSIGNED_SHORT,rg16sint:t.SHORT,rg16float:t.HALF_FLOAT,rgba8unorm:t.UNSIGNED_BYTE,"rgba8unorm-srgb":t.UNSIGNED_BYTE,rgba8snorm:t.BYTE,rgba8uint:t.UNSIGNED_BYTE,rgba8sint:t.BYTE,bgra8unorm:t.UNSIGNED_BYTE,"bgra8unorm-srgb":t.UNSIGNED_BYTE,rgb9e5ufloat:t.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:t.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:t.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:t.UNSIGNED_INT,rg32sint:t.INT,rg32float:t.FLOAT,rgba16uint:t.UNSIGNED_SHORT,rgba16sint:t.SHORT,rgba16float:t.HALF_FLOAT,rgba32uint:t.UNSIGNED_INT,rgba32sint:t.INT,rgba32float:t.FLOAT,stencil8:t.UNSIGNED_BYTE,depth16unorm:t.UNSIGNED_SHORT,depth24plus:t.UNSIGNED_INT,"depth24plus-stencil8":t.UNSIGNED_INT_24_8,depth32float:t.FLOAT,"depth32float-stencil8":t.FLOAT_32_UNSIGNED_INT_24_8_REV}}var Rq=G(()=>{}),Rle=G(()=>{}),YL,yP,Pq=G(()=>{Li(),Ae(),gi(),gq(),yq(),_q(),hO(),Tq(),Cq(),wq(),Dq(),Rq(),YL=4,yP=class{constructor(t){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:cO,buffer:bq,video:vq,compressed:xq},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(t){this._gl=t,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=wle(t,this._renderer.context.extensions),this._mapFormatToType=Dle(t),this._mapFormatToFormat=Cle(t)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let e=0;e<16;e++)this.bind(st.EMPTY,e)}initSource(t){this.bind(t)}bind(t,e=0){let i=t.source;t?(this.bindSource(i,e),this._useSeparateSamplers&&this._bindSampler(i.style,e)):(this.bindSource(null,e),this._useSeparateSamplers&&this._bindSampler(null,e))}bindSource(t,e=0){let i=this._gl;if(t._touched=this._renderer.textureGC.count,this._boundTextures[e]!==t){this._boundTextures[e]=t,this._activateLocation(e),t||(t=st.EMPTY.source);let n=this.getGlSource(t);i.bindTexture(n.target,n.texture)}}_bindSampler(t,e=0){let i=this._gl;if(!t){this._boundSamplers[e]=null,i.bindSampler(e,null);return}let n=this._getGlSampler(t);this._boundSamplers[e]!==n&&(this._boundSamplers[e]=n,i.bindSampler(e,n))}unbind(t){let e=t.source,i=this._boundTextures,n=this._gl;for(let r=0;r<i.length;r++)if(i[r]===e){this._activateLocation(r);let s=this.getGlSource(e);n.bindTexture(s.target,null),i[r]=null}}_activateLocation(t){this._activeTextureLocation!==t&&(this._activeTextureLocation=t,this._gl.activeTexture(this._gl.TEXTURE0+t))}_initSource(t){let e=this._gl,i=new mq(e.createTexture());if(i.type=this._mapFormatToType[t.format],i.internalFormat=this._mapFormatToInternalFormat[t.format],i.format=this._mapFormatToFormat[t.format],t.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||t.isPowerOfTwo)){let n=Math.max(t.width,t.height);t.mipLevelCount=Math.floor(Math.log2(n))+1}return this._glTextures[t.uid]=i,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceUpdate,this),t.on("styleChange",this.onStyleChange,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),this.updateStyle(t,!1),i}onStyleChange(t){this.updateStyle(t,!1)}updateStyle(t,e){let i=this._gl,n=this.getGlSource(t);i.bindTexture(i.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=t,XL(t.style,i,t.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!t.isPowerOfTwo,e)}onSourceUnload(t){let e=this._glTextures[t.uid];e&&(this.unbind(t),this._glTextures[t.uid]=null,this._gl.deleteTexture(e.texture))}onSourceUpdate(t){let e=this._gl,i=this.getGlSource(t);e.bindTexture(e.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=t;let n=t.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==n&&(this._premultiplyAlpha=n,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n)),this._uploads[t.uploadMethodId]?this._uploads[t.uploadMethodId].upload(t,i,e,this._renderer.context.webGLVersion):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.pixelWidth,t.pixelHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t,!1)}onUpdateMipmaps(t,e=!0){e&&this.bindSource(t,0);let i=this.getGlSource(t);this._gl.generateMipmap(i.target)}onSourceDestroy(t){t.off("destroy",this.onSourceDestroy,this),t.off("update",this.onSourceUpdate,this),t.off("resize",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("styleChange",this.onStyleChange,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}_initSampler(t){let e=this._gl,i=this._gl.createSampler();return this._glSamplers[t._resourceId]=i,XL(t,e,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[t._resourceId]}_getGlSampler(t){return this._glSamplers[t._resourceId]||this._initSampler(t)}getGlSource(t){return this._glTextures[t.uid]||this._initSource(t)}generateCanvas(t){let{pixels:e,width:i,height:n}=this.getPixels(t),r=si.get().createCanvas();r.width=i,r.height=n;let s=r.getContext("2d");if(s){let a=s.createImageData(i,n);a.data.set(e),s.putImageData(a,0,0)}return r}getPixels(t){let e=t.source.resolution,i=t.frame,n=Math.max(Math.round(i.width*e),1),r=Math.max(Math.round(i.height*e),1),s=new Uint8Array(YL*n*r),a=this._renderer,o=a.renderTarget.getRenderTarget(t),l=a.renderTarget.getGpuRenderTarget(o),h=a.gl;return h.bindFramebuffer(h.FRAMEBUFFER,l.resolveTargetFramebuffer),h.readPixels(Math.round(i.x*e),Math.round(i.y*e),n,r,h.RGBA,h.UNSIGNED_BYTE,s),{pixels:new Uint8ClampedArray(s.buffer),width:n,height:r}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null,this._glTextures=null,this._glSamplers=null,this._boundTextures=null,this._boundSamplers=null,this._mapFormatToInternalFormat=null,this._mapFormatToType=null,this._mapFormatToFormat=null,this._uploads=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(st.EMPTY.source),this._boundSamplers=Object.create(null);let t=this._gl;this._premultiplyAlpha=!1,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}},yP.extension={type:[ge.WebGLSystem],name:"texture"}}),Mq={};d9(Mq,{WebGLRenderer:()=>Bq});var qL,WL,$L,Iw,Lw,Nw,Bq,kq=G(()=>{Ae(),vY(),TY(),EY(),p_(),Yk(),Ro(),wY(),RY(),BY(),OY(),IY(),LY(),NY(),UY(),zY(),qY(),aq(),hq(),pq(),Pq(),qL=[...jk,hP,kY,DY,lP,nP,yP,dP,aP,mP,pP,uP,fq,cP,oP],WL=[...Xk],$L=[iP,tP,eP],Iw=[],Lw=[],Nw=[],Lt.handleByNamedList(ge.WebGLSystem,Iw),Lt.handleByNamedList(ge.WebGLPipes,Lw),Lt.handleByNamedList(ge.WebGLPipesAdaptor,Nw),Lt.add(...qL,...WL,...$L),Bq=class extends f_{constructor(){let t={name:"webgl",type:fa.WEBGL,systems:Iw,renderPipes:Lw,renderPipeAdaptors:Nw};super(t)}}}),CS=Oh(t=>{function e(a,o,l){if(l===void 0&&(l=Array.prototype),a&&typeof l.find=="function")return l.find.call(a,o);for(var h=0;h<a.length;h++)if(Object.prototype.hasOwnProperty.call(a,h)){var d=a[h];if(o.call(void 0,d,h,a))return d}}function i(a,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(a):a}function n(a,o){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l]);return a}var r=i({HTML:"text/html",isHTML:function(a){return a===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=n,t.find=e,t.freeze=i,t.MIME_TYPE=r,t.NAMESPACE=s}),Oq=Oh(t=>{var e=CS(),i=e.find,n=e.NAMESPACE;function r(M){return M!==""}function s(M){return M?M.split(/[\t\n\f\r ]+/).filter(r):[]}function a(M,F){return M.hasOwnProperty(F)||(M[F]=!0),M}function o(M){if(!M)return[];var F=s(M);return Object.keys(F.reduce(a,{}))}function l(M){return function(F){return M&&M.indexOf(F)!==-1}}function h(M,F){for(var Z in M)Object.prototype.hasOwnProperty.call(M,Z)&&(F[Z]=M[Z])}function d(M,F){var Z=M.prototype;if(!(Z instanceof F)){let ye=function(){};ye.prototype=F.prototype,ye=new ye,h(Z,ye),M.prototype=Z=ye}Z.constructor!=M&&(typeof M!="function"&&console.error("unknown Class:"+M),Z.constructor=M)}var p={},g=p.ELEMENT_NODE=1,y=p.ATTRIBUTE_NODE=2,v=p.TEXT_NODE=3,S=p.CDATA_SECTION_NODE=4,T=p.ENTITY_REFERENCE_NODE=5,A=p.ENTITY_NODE=6,D=p.PROCESSING_INSTRUCTION_NODE=7,R=p.COMMENT_NODE=8,B=p.DOCUMENT_NODE=9,z=p.DOCUMENT_TYPE_NODE=10,L=p.DOCUMENT_FRAGMENT_NODE=11,H=p.NOTATION_NODE=12,te={},j={};te.INDEX_SIZE_ERR=(j[1]="Index size error",1),te.DOMSTRING_SIZE_ERR=(j[2]="DOMString size error",2);var O=te.HIERARCHY_REQUEST_ERR=(j[3]="Hierarchy request error",3);te.WRONG_DOCUMENT_ERR=(j[4]="Wrong document",4),te.INVALID_CHARACTER_ERR=(j[5]="Invalid character",5),te.NO_DATA_ALLOWED_ERR=(j[6]="No data allowed",6),te.NO_MODIFICATION_ALLOWED_ERR=(j[7]="No modification allowed",7);var q=te.NOT_FOUND_ERR=(j[8]="Not found",8);te.NOT_SUPPORTED_ERR=(j[9]="Not supported",9);var re=te.INUSE_ATTRIBUTE_ERR=(j[10]="Attribute in use",10);te.INVALID_STATE_ERR=(j[11]="Invalid state",11),te.SYNTAX_ERR=(j[12]="Syntax error",12),te.INVALID_MODIFICATION_ERR=(j[13]="Invalid modification",13),te.NAMESPACE_ERR=(j[14]="Invalid namespace",14),te.INVALID_ACCESS_ERR=(j[15]="Invalid access",15);function ae(M,F){if(F instanceof Error)var Z=F;else Z=this,Error.call(this,j[M]),this.message=j[M],Error.captureStackTrace&&Error.captureStackTrace(this,ae);return Z.code=M,F&&(this.message=this.message+": "+F),Z}ae.prototype=Error.prototype,h(te,ae);function fe(){}fe.prototype={length:0,item:function(M){return M>=0&&M<this.length?this[M]:null},toString:function(M,F){for(var Z=[],ye=0;ye<this.length;ye++)_a(this[ye],Z,M,F);return Z.join("")},filter:function(M){return Array.prototype.filter.call(this,M)},indexOf:function(M){return Array.prototype.indexOf.call(this,M)}};function Te(M,F){this._node=M,this._refresh=F,$(this)}function $(M){var F=M._node._inc||M._node.ownerDocument._inc;if(M._inc!==F){var Z=M._refresh(M._node);if(V(M,"length",Z.length),!M.$$length||Z.length<M.$$length)for(var ye=Z.length;ye in M;ye++)Object.prototype.hasOwnProperty.call(M,ye)&&delete M[ye];h(Z,M),M._inc=F}}Te.prototype.item=function(M){return $(this),this[M]||null},d(Te,fe);function se(){}function we(M,F){for(var Z=M.length;Z--;)if(M[Z]===F)return Z}function _e(M,F,Z,ye){if(ye?F[we(F,ye)]=Z:F[F.length++]=Z,M){Z.ownerElement=M;var Le=M.ownerDocument;Le&&(ye&&lt(Le,M,ye),Ye(Le,M,Z))}}function J(M,F,Z){var ye=we(F,Z);if(ye>=0){for(var Le=F.length-1;ye<Le;)F[ye]=F[++ye];if(F.length=Le,M){var at=M.ownerDocument;at&&(lt(at,M,Z),Z.ownerElement=null)}}else throw new ae(q,new Error(M.tagName+"@"+Z))}se.prototype={length:0,item:fe.prototype.item,getNamedItem:function(M){for(var F=this.length;F--;){var Z=this[F];if(Z.nodeName==M)return Z}},setNamedItem:function(M){var F=M.ownerElement;if(F&&F!=this._ownerElement)throw new ae(re);var Z=this.getNamedItem(M.nodeName);return _e(this._ownerElement,this,M,Z),Z},setNamedItemNS:function(M){var F=M.ownerElement,Z;if(F&&F!=this._ownerElement)throw new ae(re);return Z=this.getNamedItemNS(M.namespaceURI,M.localName),_e(this._ownerElement,this,M,Z),Z},removeNamedItem:function(M){var F=this.getNamedItem(M);return J(this._ownerElement,this,F),F},removeNamedItemNS:function(M,F){var Z=this.getNamedItemNS(M,F);return J(this._ownerElement,this,Z),Z},getNamedItemNS:function(M,F){for(var Z=this.length;Z--;){var ye=this[Z];if(ye.localName==F&&ye.namespaceURI==M)return ye}return null}};function ie(){}ie.prototype={hasFeature:function(M,F){return!0},createDocument:function(M,F,Z){var ye=new Ve;if(ye.implementation=this,ye.childNodes=new fe,ye.doctype=Z||null,Z&&ye.appendChild(Z),F){var Le=ye.createElementNS(M,F);ye.appendChild(Le)}return ye},createDocumentType:function(M,F,Z){var ye=new Ut;return ye.name=M,ye.nodeName=M,ye.publicId=F||"",ye.systemId=Z||"",ye}};function be(){}be.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(M,F){return nn(this,M,F)},replaceChild:function(M,F){nn(this,M,F,Nn),F&&this.removeChild(F)},removeChild:function(M){return tt(this,M)},appendChild:function(M){return this.insertBefore(M,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(M){return Hr(this.ownerDocument||this,this,M)},normalize:function(){for(var M=this.firstChild;M;){var F=M.nextSibling;F&&F.nodeType==v&&M.nodeType==v?(this.removeChild(F),M.appendData(F.data)):(M.normalize(),M=F)}},isSupported:function(M,F){return this.ownerDocument.implementation.hasFeature(M,F)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(M){for(var F=this;F;){var Z=F._nsMap;if(Z){for(var ye in Z)if(Object.prototype.hasOwnProperty.call(Z,ye)&&Z[ye]===M)return ye}F=F.nodeType==y?F.ownerDocument:F.parentNode}return null},lookupNamespaceURI:function(M){for(var F=this;F;){var Z=F._nsMap;if(Z&&Object.prototype.hasOwnProperty.call(Z,M))return Z[M];F=F.nodeType==y?F.ownerDocument:F.parentNode}return null},isDefaultNamespace:function(M){var F=this.lookupPrefix(M);return F==null}};function ee(M){return M=="<"&&"&lt;"||M==">"&&"&gt;"||M=="&"&&"&amp;"||M=='"'&&"&quot;"||"&#"+M.charCodeAt()+";"}h(p,be),h(p,be.prototype);function Ge(M,F){if(F(M))return!0;if(M=M.firstChild)do if(Ge(M,F))return!0;while(M=M.nextSibling)}function Ve(){this.ownerDocument=this}function Ye(M,F,Z){M&&M._inc++;var ye=Z.namespaceURI;ye===n.XMLNS&&(F._nsMap[Z.prefix?Z.localName:""]=Z.value)}function lt(M,F,Z,ye){M&&M._inc++;var Le=Z.namespaceURI;Le===n.XMLNS&&delete F._nsMap[Z.prefix?Z.localName:""]}function pt(M,F,Z){if(M&&M._inc){M._inc++;var ye=F.childNodes;if(Z)ye[ye.length++]=Z;else{for(var Le=F.firstChild,at=0;Le;)ye[at++]=Le,Le=Le.nextSibling;ye.length=at,delete ye[ye.length]}}}function tt(M,F){var Z=F.previousSibling,ye=F.nextSibling;return Z?Z.nextSibling=ye:M.firstChild=ye,ye?ye.previousSibling=Z:M.lastChild=Z,F.parentNode=null,F.previousSibling=null,F.nextSibling=null,pt(M.ownerDocument,M),F}function $t(M){return M&&(M.nodeType===be.DOCUMENT_NODE||M.nodeType===be.DOCUMENT_FRAGMENT_NODE||M.nodeType===be.ELEMENT_NODE)}function li(M){return M&&(Qt(M)||Bt(M)||Rt(M)||M.nodeType===be.DOCUMENT_FRAGMENT_NODE||M.nodeType===be.COMMENT_NODE||M.nodeType===be.PROCESSING_INSTRUCTION_NODE)}function Rt(M){return M&&M.nodeType===be.DOCUMENT_TYPE_NODE}function Qt(M){return M&&M.nodeType===be.ELEMENT_NODE}function Bt(M){return M&&M.nodeType===be.TEXT_NODE}function Nt(M,F){var Z=M.childNodes||[];if(i(Z,Qt)||Rt(F))return!1;var ye=i(Z,Rt);return!(F&&ye&&Z.indexOf(ye)>Z.indexOf(F))}function fi(M,F){var Z=M.childNodes||[];function ye(at){return Qt(at)&&at!==F}if(i(Z,ye))return!1;var Le=i(Z,Rt);return!(F&&Le&&Z.indexOf(Le)>Z.indexOf(F))}function Si(M,F,Z){if(!$t(M))throw new ae(O,"Unexpected parent node type "+M.nodeType);if(Z&&Z.parentNode!==M)throw new ae(q,"child not in parent");if(!li(F)||Rt(F)&&M.nodeType!==be.DOCUMENT_NODE)throw new ae(O,"Unexpected node type "+F.nodeType+" for parent node type "+M.nodeType)}function Cn(M,F,Z){var ye=M.childNodes||[],Le=F.childNodes||[];if(F.nodeType===be.DOCUMENT_FRAGMENT_NODE){var at=Le.filter(Qt);if(at.length>1||i(Le,Bt))throw new ae(O,"More than one element or text in fragment");if(at.length===1&&!Nt(M,Z))throw new ae(O,"Element in fragment can not be inserted before doctype")}if(Qt(F)&&!Nt(M,Z))throw new ae(O,"Only one element can be added and only after doctype");if(Rt(F)){if(i(ye,Rt))throw new ae(O,"Only one doctype is allowed");var qt=i(ye,Qt);if(Z&&ye.indexOf(qt)<ye.indexOf(Z))throw new ae(O,"Doctype can only be inserted before an element");if(!Z&&qt)throw new ae(O,"Doctype can not be appended since element is present")}}function Nn(M,F,Z){var ye=M.childNodes||[],Le=F.childNodes||[];if(F.nodeType===be.DOCUMENT_FRAGMENT_NODE){var at=Le.filter(Qt);if(at.length>1||i(Le,Bt))throw new ae(O,"More than one element or text in fragment");if(at.length===1&&!fi(M,Z))throw new ae(O,"Element in fragment can not be inserted before doctype")}if(Qt(F)&&!fi(M,Z))throw new ae(O,"Only one element can be added and only after doctype");if(Rt(F)){if(i(ye,function(vi){return Rt(vi)&&vi!==Z}))throw new ae(O,"Only one doctype is allowed");var qt=i(ye,Qt);if(Z&&ye.indexOf(qt)<ye.indexOf(Z))throw new ae(O,"Doctype can only be inserted before an element")}}function nn(M,F,Z,ye){Si(M,F,Z),M.nodeType===be.DOCUMENT_NODE&&(ye||Cn)(M,F,Z);var Le=F.parentNode;if(Le&&Le.removeChild(F),F.nodeType===L){var at=F.firstChild;if(at==null)return F;var qt=F.lastChild}else at=qt=F;var zt=Z?Z.previousSibling:M.lastChild;at.previousSibling=zt,qt.nextSibling=Z,zt?zt.nextSibling=at:M.firstChild=at,Z==null?M.lastChild=qt:Z.previousSibling=qt;do{at.parentNode=M;var vi=M.ownerDocument||M;ci(at,vi)}while(at!==qt&&(at=at.nextSibling));return pt(M.ownerDocument||M,M),F.nodeType==L&&(F.firstChild=F.lastChild=null),F}function ci(M,F){if(M.ownerDocument!==F){if(M.ownerDocument=F,M.nodeType===g&&M.attributes)for(var Z=0;Z<M.attributes.length;Z++){var ye=M.attributes.item(Z);ye&&(ye.ownerDocument=F)}for(var Le=M.firstChild;Le;)ci(Le,F),Le=Le.nextSibling}}function kt(M,F){F.parentNode&&F.parentNode.removeChild(F),F.parentNode=M,F.previousSibling=M.lastChild,F.nextSibling=null,F.previousSibling?F.previousSibling.nextSibling=F:M.firstChild=F,M.lastChild=F,pt(M.ownerDocument,M,F);var Z=M.ownerDocument||M;return ci(F,Z),F}Ve.prototype={nodeName:"#document",nodeType:B,doctype:null,documentElement:null,_inc:1,insertBefore:function(M,F){if(M.nodeType==L){for(var Z=M.firstChild;Z;){var ye=Z.nextSibling;this.insertBefore(Z,F),Z=ye}return M}return nn(this,M,F),ci(M,this),this.documentElement===null&&M.nodeType===g&&(this.documentElement=M),M},removeChild:function(M){return this.documentElement==M&&(this.documentElement=null),tt(this,M)},replaceChild:function(M,F){nn(this,M,F,Nn),ci(M,this),F&&this.removeChild(F),Qt(M)&&(this.documentElement=M)},importNode:function(M,F){return Gr(this,M,F)},getElementById:function(M){var F=null;return Ge(this.documentElement,function(Z){if(Z.nodeType==g&&Z.getAttribute("id")==M)return F=Z,!0}),F},getElementsByClassName:function(M){var F=o(M);return new Te(this,function(Z){var ye=[];return F.length>0&&Ge(Z.documentElement,function(Le){if(Le!==Z&&Le.nodeType===g){var at=Le.getAttribute("class");if(at){var qt=M===at;if(!qt){var zt=o(at);qt=F.every(l(zt))}qt&&ye.push(Le)}}}),ye})},createElement:function(M){var F=new Di;F.ownerDocument=this,F.nodeName=M,F.tagName=M,F.localName=M,F.childNodes=new fe;var Z=F.attributes=new se;return Z._ownerElement=F,F},createDocumentFragment:function(){var M=new cn;return M.ownerDocument=this,M.childNodes=new fe,M},createTextNode:function(M){var F=new Be;return F.ownerDocument=this,F.appendData(M),F},createComment:function(M){var F=new We;return F.ownerDocument=this,F.appendData(M),F},createCDATASection:function(M){var F=new bt;return F.ownerDocument=this,F.appendData(M),F},createProcessingInstruction:function(M,F){var Z=new Xi;return Z.ownerDocument=this,Z.tagName=Z.nodeName=Z.target=M,Z.nodeValue=Z.data=F,Z},createAttribute:function(M){var F=new Ni;return F.ownerDocument=this,F.name=M,F.nodeName=M,F.localName=M,F.specified=!0,F},createEntityReference:function(M){var F=new pr;return F.ownerDocument=this,F.nodeName=M,F},createElementNS:function(M,F){var Z=new Di,ye=F.split(":"),Le=Z.attributes=new se;return Z.childNodes=new fe,Z.ownerDocument=this,Z.nodeName=F,Z.tagName=F,Z.namespaceURI=M,ye.length==2?(Z.prefix=ye[0],Z.localName=ye[1]):Z.localName=F,Le._ownerElement=Z,Z},createAttributeNS:function(M,F){var Z=new Ni,ye=F.split(":");return Z.ownerDocument=this,Z.nodeName=F,Z.name=F,Z.namespaceURI=M,Z.specified=!0,ye.length==2?(Z.prefix=ye[0],Z.localName=ye[1]):Z.localName=F,Z}},d(Ve,be);function Di(){this._nsMap={}}Di.prototype={nodeType:g,hasAttribute:function(M){return this.getAttributeNode(M)!=null},getAttribute:function(M){var F=this.getAttributeNode(M);return F&&F.value||""},getAttributeNode:function(M){return this.attributes.getNamedItem(M)},setAttribute:function(M,F){var Z=this.ownerDocument.createAttribute(M);Z.value=Z.nodeValue=""+F,this.setAttributeNode(Z)},removeAttribute:function(M){var F=this.getAttributeNode(M);F&&this.removeAttributeNode(F)},appendChild:function(M){return M.nodeType===L?this.insertBefore(M,null):kt(this,M)},setAttributeNode:function(M){return this.attributes.setNamedItem(M)},setAttributeNodeNS:function(M){return this.attributes.setNamedItemNS(M)},removeAttributeNode:function(M){return this.attributes.removeNamedItem(M.nodeName)},removeAttributeNS:function(M,F){var Z=this.getAttributeNodeNS(M,F);Z&&this.removeAttributeNode(Z)},hasAttributeNS:function(M,F){return this.getAttributeNodeNS(M,F)!=null},getAttributeNS:function(M,F){var Z=this.getAttributeNodeNS(M,F);return Z&&Z.value||""},setAttributeNS:function(M,F,Z){var ye=this.ownerDocument.createAttributeNS(M,F);ye.value=ye.nodeValue=""+Z,this.setAttributeNode(ye)},getAttributeNodeNS:function(M,F){return this.attributes.getNamedItemNS(M,F)},getElementsByTagName:function(M){return new Te(this,function(F){var Z=[];return Ge(F,function(ye){ye!==F&&ye.nodeType==g&&(M==="*"||ye.tagName==M)&&Z.push(ye)}),Z})},getElementsByTagNameNS:function(M,F){return new Te(this,function(Z){var ye=[];return Ge(Z,function(Le){Le!==Z&&Le.nodeType===g&&(M==="*"||Le.namespaceURI===M)&&(F==="*"||Le.localName==F)&&ye.push(Le)}),ye})}},Ve.prototype.getElementsByTagName=Di.prototype.getElementsByTagName,Ve.prototype.getElementsByTagNameNS=Di.prototype.getElementsByTagNameNS,d(Di,be);function Ni(){}Ni.prototype.nodeType=y,d(Ni,be);function Ms(){}Ms.prototype={data:"",substringData:function(M,F){return this.data.substring(M,M+F)},appendData:function(M){M=this.data+M,this.nodeValue=this.data=M,this.length=M.length},insertData:function(M,F){this.replaceData(M,0,F)},appendChild:function(M){throw new Error(j[O])},deleteData:function(M,F){this.replaceData(M,F,"")},replaceData:function(M,F,Z){var ye=this.data.substring(0,M),Le=this.data.substring(M+F);Z=ye+Z+Le,this.nodeValue=this.data=Z,this.length=Z.length}},d(Ms,be);function Be(){}Be.prototype={nodeName:"#text",nodeType:v,splitText:function(M){var F=this.data,Z=F.substring(M);F=F.substring(0,M),this.data=this.nodeValue=F,this.length=F.length;var ye=this.ownerDocument.createTextNode(Z);return this.parentNode&&this.parentNode.insertBefore(ye,this.nextSibling),ye}},d(Be,Ms);function We(){}We.prototype={nodeName:"#comment",nodeType:R},d(We,Ms);function bt(){}bt.prototype={nodeName:"#cdata-section",nodeType:S},d(bt,Ms);function Ut(){}Ut.prototype.nodeType=z,d(Ut,be);function pi(){}pi.prototype.nodeType=H,d(pi,be);function Yn(){}Yn.prototype.nodeType=A,d(Yn,be);function pr(){}pr.prototype.nodeType=T,d(pr,be);function cn(){}cn.prototype.nodeName="#document-fragment",cn.prototype.nodeType=L,d(cn,be);function Xi(){}Xi.prototype.nodeType=D,d(Xi,be);function qn(){}qn.prototype.serializeToString=function(M,F,Z){return bi.call(M,F,Z)},be.prototype.toString=bi;function bi(M,F){var Z=[],ye=this.nodeType==9&&this.documentElement||this,Le=ye.prefix,at=ye.namespaceURI;if(at&&Le==null){var Le=ye.lookupPrefix(at);if(Le==null)var qt=[{namespace:at,prefix:null}]}return _a(this,Z,M,F,qt),Z.join("")}function Jr(M,F,Z){var ye=M.prefix||"",Le=M.namespaceURI;if(!Le||ye==="xml"&&Le===n.XML||Le===n.XMLNS)return!1;for(var at=Z.length;at--;){var qt=Z[at];if(qt.prefix===ye)return qt.namespace!==Le}return!0}function rn(M,F,Z){M.push(" ",F,'="',Z.replace(/[<>&"\t\n\r]/g,ee),'"')}function _a(M,F,Z,ye,Le){if(Le||(Le=[]),ye)if(M=ye(M),M){if(typeof M=="string"){F.push(M);return}}else return;switch(M.nodeType){case g:var at=M.attributes,qt=at.length,zt=M.firstChild,vi=M.tagName;Z=n.isHTML(M.namespaceURI)||Z;var ot=vi;if(!Z&&!M.prefix&&M.namespaceURI){for(var Un,zr=0;zr<at.length;zr++)if(at.item(zr).name==="xmlns"){Un=at.item(zr).value;break}if(!Un)for(var Pn=Le.length-1;Pn>=0;Pn--){var mr=Le[Pn];if(mr.prefix===""&&mr.namespace===M.namespaceURI){Un=mr.namespace;break}}if(Un!==M.namespaceURI)for(var Pn=Le.length-1;Pn>=0;Pn--){var mr=Le[Pn];if(mr.namespace===M.namespaceURI){mr.prefix&&(ot=mr.prefix+":"+vi);break}}}F.push("<",ot);for(var yn=0;yn<qt;yn++){var Gt=at.item(yn);Gt.prefix=="xmlns"?Le.push({prefix:Gt.localName,namespace:Gt.value}):Gt.nodeName=="xmlns"&&Le.push({prefix:"",namespace:Gt.value})}for(var yn=0;yn<qt;yn++){var Gt=at.item(yn);if(Jr(Gt,Z,Le)){var hn=Gt.prefix||"",or=Gt.namespaceURI;rn(F,hn?"xmlns:"+hn:"xmlns",or),Le.push({prefix:hn,namespace:or})}_a(Gt,F,Z,ye,Le)}if(vi===ot&&Jr(M,Z,Le)){var hn=M.prefix||"",or=M.namespaceURI;rn(F,hn?"xmlns:"+hn:"xmlns",or),Le.push({prefix:hn,namespace:or})}if(zt||Z&&!/^(?:meta|link|img|br|hr|input)$/i.test(vi)){if(F.push(">"),Z&&/^script$/i.test(vi))for(;zt;)zt.data?F.push(zt.data):_a(zt,F,Z,ye,Le.slice()),zt=zt.nextSibling;else for(;zt;)_a(zt,F,Z,ye,Le.slice()),zt=zt.nextSibling;F.push("</",ot,">")}else F.push("/>");return;case B:case L:for(var zt=M.firstChild;zt;)_a(zt,F,Z,ye,Le.slice()),zt=zt.nextSibling;return;case y:return rn(F,M.name,M.value);case v:return F.push(M.data.replace(/[<&>]/g,ee));case S:return F.push("<![CDATA[",M.data,"]]>");case R:return F.push("<!--",M.data,"-->");case z:var va=M.publicId,Va=M.systemId;if(F.push("<!DOCTYPE ",M.name),va)F.push(" PUBLIC ",va),Va&&Va!="."&&F.push(" ",Va),F.push(">");else if(Va&&Va!=".")F.push(" SYSTEM ",Va,">");else{var $h=M.internalSubset;$h&&F.push(" [",$h,"]"),F.push(">")}return;case D:return F.push("<?",M.target," ",M.data,"?>");case T:return F.push("&",M.nodeName,";");default:F.push("??",M.nodeName)}}function Gr(M,F,Z){var ye;switch(F.nodeType){case g:ye=F.cloneNode(!1),ye.ownerDocument=M;case L:break;case y:Z=!0;break}if(ye||(ye=F.cloneNode(!1)),ye.ownerDocument=M,ye.parentNode=null,Z)for(var Le=F.firstChild;Le;)ye.appendChild(Gr(M,Le,Z)),Le=Le.nextSibling;return ye}function Hr(M,F,Z){var ye=new F.constructor;for(var Le in F)if(Object.prototype.hasOwnProperty.call(F,Le)){var at=F[Le];typeof at!="object"&&at!=ye[Le]&&(ye[Le]=at)}switch(F.childNodes&&(ye.childNodes=new fe),ye.ownerDocument=M,ye.nodeType){case g:var qt=F.attributes,zt=ye.attributes=new se,vi=qt.length;zt._ownerElement=ye;for(var ot=0;ot<vi;ot++)ye.setAttributeNode(Hr(M,qt.item(ot),!0));break;case y:Z=!0}if(Z)for(var Un=F.firstChild;Un;)ye.appendChild(Hr(M,Un,Z)),Un=Un.nextSibling;return ye}function V(M,F,Z){M[F]=Z}try{if(Object.defineProperty){let M=function(F){switch(F.nodeType){case g:case L:var Z=[];for(F=F.firstChild;F;)F.nodeType!==7&&F.nodeType!==8&&Z.push(M(F)),F=F.nextSibling;return Z.join("");default:return F.nodeValue}};Y=M,Object.defineProperty(Te.prototype,"length",{get:function(){return $(this),this.$$length}}),Object.defineProperty(be.prototype,"textContent",{get:function(){return M(this)},set:function(F){switch(this.nodeType){case g:case L:for(;this.firstChild;)this.removeChild(this.firstChild);(F||String(F))&&this.appendChild(this.ownerDocument.createTextNode(F));break;default:this.data=F,this.value=F,this.nodeValue=F}}}),V=function(F,Z,ye){F["$$"+Z]=ye}}}catch{}var Y;t.DocumentType=Ut,t.DOMException=ae,t.DOMImplementation=ie,t.Element=Di,t.Node=be,t.NodeList=fe,t.XMLSerializer=qn}),Ple=Oh(t=>{var e=CS().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES}),Mle=Oh(t=>{var e=CS().NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+i.source+n.source+"*(?::"+i.source+n.source+"*)?$"),s=0,a=1,o=2,l=3,h=4,d=5,p=6,g=7;function y(O,q){this.message=O,this.locator=q,Error.captureStackTrace&&Error.captureStackTrace(this,y)}y.prototype=new Error,y.prototype.name=y.name;function v(){}v.prototype={parse:function(O,q,re){var ae=this.domBuilder;ae.startDocument(),z(q,q={}),S(O,q,re,ae,this.errorHandler),ae.endDocument()}};function S(O,q,re,ae,fe){function Te(kt){if(kt>65535){kt-=65536;var Di=55296+(kt>>10),Ni=56320+(kt&1023);return String.fromCharCode(Di,Ni)}else return String.fromCharCode(kt)}function $(kt){var Di=kt.slice(1,-1);return Object.hasOwnProperty.call(re,Di)?re[Di]:Di.charAt(0)==="#"?Te(parseInt(Di.substr(1).replace("x","0x"))):(fe.error("entity not found:"+kt),kt)}function se(kt){if(kt>Ve){var Di=O.substring(Ve,kt).replace(/&#?\w+;/g,$);be&&we(Ve),ae.characters(Di,0,kt-Ve),Ve=kt}}function we(kt,Di){for(;kt>=J&&(Di=ie.exec(O));)_e=Di.index,J=_e+Di[0].length,be.lineNumber++;be.columnNumber=kt-_e+1}for(var _e=0,J=0,ie=/.*(?:\r\n?|\n)|.*$/g,be=ae.locator,ee=[{currentNSMap:q}],Ge={},Ve=0;;){try{var Ye=O.indexOf("<",Ve);if(Ye<0){if(!O.substr(Ve).match(/^\s*$/)){var lt=ae.doc,pt=lt.createTextNode(O.substr(Ve));lt.appendChild(pt),ae.currentElement=pt}return}switch(Ye>Ve&&se(Ye),O.charAt(Ye+1)){case"/":var Si=O.indexOf(">",Ye+3),tt=O.substring(Ye+2,Si).replace(/[ \t\n\r]+$/g,""),$t=ee.pop();Si<0?(tt=O.substring(Ye+2).replace(/[\s<].*/,""),fe.error("end tag name: "+tt+" is not complete:"+$t.tagName),Si=Ye+1+tt.length):tt.match(/\s</)&&(tt=tt.replace(/[\s<].*/,""),fe.error("end tag name: "+tt+" maybe not complete"),Si=Ye+1+tt.length);var li=$t.localNSMap,Rt=$t.tagName==tt,Qt=Rt||$t.tagName&&$t.tagName.toLowerCase()==tt.toLowerCase();if(Qt){if(ae.endElement($t.uri,$t.localName,tt),li)for(var Bt in li)Object.prototype.hasOwnProperty.call(li,Bt)&&ae.endPrefixMapping(Bt);Rt||fe.fatalError("end tag name: "+tt+" is not match the current start tagName:"+$t.tagName)}else ee.push($t);Si++;break;case"?":be&&we(Ye),Si=H(O,Ye,ae);break;case"!":be&&we(Ye),Si=L(O,Ye,ae,fe);break;default:be&&we(Ye);var Nt=new te,fi=ee[ee.length-1].currentNSMap,Si=A(O,Ye,Nt,fi,$,fe),Cn=Nt.length;if(!Nt.closed&&B(O,Si,Nt.tagName,Ge)&&(Nt.closed=!0,re.nbsp||fe.warning("unclosed xml attribute")),be&&Cn){for(var Nn=T(be,{}),nn=0;nn<Cn;nn++){var ci=Nt[nn];we(ci.offset),ci.locator=T(be,{})}ae.locator=Nn,D(Nt,ae,fi)&&ee.push(Nt),ae.locator=be}else D(Nt,ae,fi)&&ee.push(Nt);e.isHTML(Nt.uri)&&!Nt.closed?Si=R(O,Si,Nt.tagName,$,ae):Si++}}catch(kt){if(kt instanceof y)throw kt;fe.error("element parse error: "+kt),Si=-1}Si>Ve?Ve=Si:se(Math.max(Ye,Ve)+1)}}function T(O,q){return q.lineNumber=O.lineNumber,q.columnNumber=O.columnNumber,q}function A(O,q,re,ae,fe,Te){function $(be,ee,Ge){re.attributeNames.hasOwnProperty(be)&&Te.fatalError("Attribute "+be+" redefined"),re.addValue(be,ee.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,fe),Ge)}for(var se,we,_e=++q,J=s;;){var ie=O.charAt(_e);switch(ie){case"=":if(J===a)se=O.slice(q,_e),J=l;else if(J===o)J=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(J===l||J===a)if(J===a&&(Te.warning('attribute value must after "="'),se=O.slice(q,_e)),q=_e+1,_e=O.indexOf(ie,q),_e>0)we=O.slice(q,_e),$(se,we,q-1),J=d;else throw new Error("attribute value no end '"+ie+"' match");else if(J==h)we=O.slice(q,_e),$(se,we,q),Te.warning('attribute "'+se+'" missed start quot('+ie+")!!"),q=_e+1,J=d;else throw new Error('attribute value must after "="');break;case"/":switch(J){case s:re.setTagName(O.slice(q,_e));case d:case p:case g:J=g,re.closed=!0;case h:case a:break;case o:re.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Te.error("unexpected end of input"),J==s&&re.setTagName(O.slice(q,_e)),_e;case">":switch(J){case s:re.setTagName(O.slice(q,_e));case d:case p:case g:break;case h:case a:we=O.slice(q,_e),we.slice(-1)==="/"&&(re.closed=!0,we=we.slice(0,-1));case o:J===o&&(we=se),J==h?(Te.warning('attribute "'+we+'" missed quot(")!'),$(se,we,q)):((!e.isHTML(ae[""])||!we.match(/^(?:disabled|checked|selected)$/i))&&Te.warning('attribute "'+we+'" missed value!! "'+we+'" instead!!'),$(we,we,q));break;case l:throw new Error("attribute value missed!!")}return _e;case"":ie=" ";default:if(ie<=" ")switch(J){case s:re.setTagName(O.slice(q,_e)),J=p;break;case a:se=O.slice(q,_e),J=o;break;case h:var we=O.slice(q,_e);Te.warning('attribute "'+we+'" missed quot(")!!'),$(se,we,q);case d:J=p;break}else switch(J){case o:re.tagName,(!e.isHTML(ae[""])||!se.match(/^(?:disabled|checked|selected)$/i))&&Te.warning('attribute "'+se+'" missed value!! "'+se+'" instead2!!'),$(se,se,q),q=_e,J=a;break;case d:Te.warning('attribute space is required"'+se+'"!!');case p:J=a,q=_e;break;case l:J=h,q=_e;break;case g:throw new Error("elements closed character '/' and '>' must be connected to")}}_e++}}function D(O,q,re){for(var ae=O.tagName,fe=null,Te=O.length;Te--;){var $=O[Te],se=$.qName,we=$.value,be=se.indexOf(":");if(be>0)var _e=$.prefix=se.slice(0,be),J=se.slice(be+1),ie=_e==="xmlns"&&J;else J=se,_e=null,ie=se==="xmlns"&&"";$.localName=J,ie!==!1&&(fe==null&&(fe={},z(re,re={})),re[ie]=fe[ie]=we,$.uri=e.XMLNS,q.startPrefixMapping(ie,we))}for(var Te=O.length;Te--;){$=O[Te];var _e=$.prefix;_e&&(_e==="xml"&&($.uri=e.XML),_e!=="xmlns"&&($.uri=re[_e||""]))}var be=ae.indexOf(":");be>0?(_e=O.prefix=ae.slice(0,be),J=O.localName=ae.slice(be+1)):(_e=null,J=O.localName=ae);var ee=O.uri=re[_e||""];if(q.startElement(ee,J,ae,O),O.closed){if(q.endElement(ee,J,ae),fe)for(_e in fe)Object.prototype.hasOwnProperty.call(fe,_e)&&q.endPrefixMapping(_e)}else return O.currentNSMap=re,O.localNSMap=fe,!0}function R(O,q,re,ae,fe){if(/^(?:script|textarea)$/i.test(re)){var Te=O.indexOf("</"+re+">",q),$=O.substring(q+1,Te);if(/[&<]/.test($))return/^script$/i.test(re)?(fe.characters($,0,$.length),Te):($=$.replace(/&#?\w+;/g,ae),fe.characters($,0,$.length),Te)}return q+1}function B(O,q,re,ae){var fe=ae[re];return fe==null&&(fe=O.lastIndexOf("</"+re+">"),fe<q&&(fe=O.lastIndexOf("</"+re)),ae[re]=fe),fe<q}function z(O,q){for(var re in O)Object.prototype.hasOwnProperty.call(O,re)&&(q[re]=O[re])}function L(O,q,re,ae){var fe=O.charAt(q+2);switch(fe){case"-":if(O.charAt(q+3)==="-"){var Te=O.indexOf("-->",q+4);return Te>q?(re.comment(O,q+4,Te-q-4),Te+3):(ae.error("Unclosed comment"),-1)}else return-1;default:if(O.substr(q+3,6)=="CDATA["){var Te=O.indexOf("]]>",q+9);return re.startCDATA(),re.characters(O,q+9,Te-q-9),re.endCDATA(),Te+3}var $=j(O,q),se=$.length;if(se>1&&/!doctype/i.test($[0][0])){var we=$[1][0],_e=!1,J=!1;se>3&&(/^public$/i.test($[2][0])?(_e=$[3][0],J=se>4&&$[4][0]):/^system$/i.test($[2][0])&&(J=$[3][0]));var ie=$[se-1];return re.startDTD(we,_e,J),re.endDTD(),ie.index+ie[0].length}}return-1}function H(O,q,re){var ae=O.indexOf("?>",q);if(ae){var fe=O.substring(q,ae).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return fe?(fe[0].length,re.processingInstruction(fe[1],fe[2]),ae+2):-1}return-1}function te(){this.attributeNames={}}te.prototype={setTagName:function(O){if(!r.test(O))throw new Error("invalid tagName:"+O);this.tagName=O},addValue:function(O,q,re){if(!r.test(O))throw new Error("invalid attribute:"+O);this.attributeNames[O]=this.length,this[this.length++]={qName:O,value:q,offset:re}},length:0,getLocalName:function(O){return this[O].localName},getLocator:function(O){return this[O].locator},getQName:function(O){return this[O].qName},getURI:function(O){return this[O].uri},getValue:function(O){return this[O].value}};function j(O,q){var re,ae=[],fe=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(fe.lastIndex=q,fe.exec(O);re=fe.exec(O);)if(ae.push(re),re[1])return ae}t.XMLReader=v,t.ParseError=y}),Ble=Oh(t=>{var e=CS(),i=Oq(),n=Ple(),r=Mle(),s=i.DOMImplementation,a=e.NAMESPACE,o=r.ParseError,l=r.XMLReader;function h(A){return A.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function d(A){this.options=A||{locator:{}}}d.prototype.parseFromString=function(A,D){var R=this.options,B=new l,z=R.domBuilder||new g,L=R.errorHandler,H=R.locator,te=R.xmlns||{},j=/\/x?html?$/.test(D),O=j?n.HTML_ENTITIES:n.XML_ENTITIES;H&&z.setDocumentLocator(H),B.errorHandler=p(L,z,H),B.domBuilder=R.domBuilder||z,j&&(te[""]=a.HTML),te.xml=te.xml||a.XML;var q=R.normalizeLineEndings||h;return A&&typeof A=="string"?B.parse(q(A),te,O):B.errorHandler.error("invalid doc source"),z.doc};function p(A,D,R){if(!A){if(D instanceof g)return D;A=D}var B={},z=A instanceof Function;R=R||{};function L(H){var te=A[H];!te&&z&&(te=A.length==2?function(j){A(H,j)}:A),B[H]=te&&function(j){te("[xmldom "+H+"]	"+j+v(R))}||function(){}}return L("warning"),L("error"),L("fatalError"),B}function g(){this.cdata=!1}function y(A,D){D.lineNumber=A.lineNumber,D.columnNumber=A.columnNumber}g.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(A,D,R,B){var z=this.doc,L=z.createElementNS(A,R||D),H=B.length;T(this,L),this.currentElement=L,this.locator&&y(this.locator,L);for(var te=0;te<H;te++){var A=B.getURI(te),j=B.getValue(te),R=B.getQName(te),O=z.createAttributeNS(A,R);this.locator&&y(B.getLocator(te),O),O.value=O.nodeValue=j,L.setAttributeNode(O)}},endElement:function(A,D,R){var B=this.currentElement;B.tagName,this.currentElement=B.parentNode},startPrefixMapping:function(A,D){},endPrefixMapping:function(A){},processingInstruction:function(A,D){var R=this.doc.createProcessingInstruction(A,D);this.locator&&y(this.locator,R),T(this,R)},ignorableWhitespace:function(A,D,R){},characters:function(A,D,R){if(A=S.apply(this,arguments),A){if(this.cdata)var B=this.doc.createCDATASection(A);else var B=this.doc.createTextNode(A);this.currentElement?this.currentElement.appendChild(B):/^\s*$/.test(A)&&this.doc.appendChild(B),this.locator&&y(this.locator,B)}},skippedEntity:function(A){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(A){(this.locator=A)&&(A.lineNumber=0)},comment:function(A,D,R){A=S.apply(this,arguments);var B=this.doc.createComment(A);this.locator&&y(this.locator,B),T(this,B)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(A,D,R){var B=this.doc.implementation;if(B&&B.createDocumentType){var z=B.createDocumentType(A,D,R);this.locator&&y(this.locator,z),T(this,z),this.doc.doctype=z}},warning:function(A){console.warn("[xmldom warning]	"+A,v(this.locator))},error:function(A){console.error("[xmldom error]	"+A,v(this.locator))},fatalError:function(A){throw new o(A,this.locator)}};function v(A){if(A)return`
@`+(A.systemId||"")+"#[line:"+A.lineNumber+",col:"+A.columnNumber+"]"}function S(A,D,R){return typeof A=="string"?A.substr(D,R):A.length>=D+R||D?new java.lang.String(A,D,R)+"":A}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(A){g.prototype[A]=function(){return null}});function T(A,D){A.currentElement?A.currentElement.appendChild(D):A.doc.appendChild(D)}t.__DOMHandler=g,t.normalizeLineEndings=h,t.DOMParser=d}),kle=Oh(t=>{var e=Oq();t.DOMImplementation=e.DOMImplementation,t.XMLSerializer=e.XMLSerializer,t.DOMParser=Ble().DOMParser});Ae();var Ole={extension:{type:ge.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(()=>(Kue(),$ue))}};Ae();var Fle={extension:{type:ge.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Promise.resolve().then(()=>(Zue(),Que))}};Ae();Ae();ZB();WB();Ae();ga();Ha();Dr();gi();vl();var Ile=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,Lle=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Nle=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`,fr=class extends Vh{constructor(e){let i=e.gpu,n=KL({source:Nle,...i}),r=du.from({vertex:{source:n,entryPoint:"mainVertex"},fragment:{source:n,entryPoint:"mainFragment"}}),s=e.gl,a=KL({source:Ile,...s}),o=Do.from({vertex:Lle,fragment:a}),l=new Fr({uBlend:{value:1,type:"f32"}});super({gpuProgram:r,glProgram:o,blendRequired:!0,resources:{blendUniforms:l,uBackTexture:st.EMPTY}})}};function KL(t){let{source:e,functions:i,main:n}=t;return e.replace("{FUNCTIONS}",i).replace("{MAIN}",n)}var dO=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,fO=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`,Ule=class extends fr{constructor(){super({gl:{functions:`
                ${dO}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${fO}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};Ule.extension={name:"color",type:ge.BlendMode};Ae();var Gle=class extends fr{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Gle.extension={name:"color-burn",type:ge.BlendMode};Ae();var Hle=class extends fr{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};Hle.extension={name:"color-dodge",type:ge.BlendMode};Ae();var zle=class extends fr{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};zle.extension={name:"darken",type:ge.BlendMode};Ae();var Vle=class extends fr{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Vle.extension={name:"difference",type:ge.BlendMode};Ae();var jle=class extends fr{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};jle.extension={name:"divide",type:ge.BlendMode};Ae();var Xle=class extends fr{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Xle.extension={name:"exclusion",type:ge.BlendMode};Ae();var Yle=class extends fr{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};Yle.extension={name:"hard-light",type:ge.BlendMode};Ae();var qle=class extends fr{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};qle.extension={name:"hard-mix",type:ge.BlendMode};Ae();var Wle=class extends fr{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Wle.extension={name:"lighten",type:ge.BlendMode};Ae();var $le=class extends fr{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};$le.extension={name:"linear-burn",type:ge.BlendMode};Ae();var Kle=class extends fr{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Kle.extension={name:"linear-dodge",type:ge.BlendMode};Ae();var Qle=class extends fr{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Qle.extension={name:"linear-light",type:ge.BlendMode};Ae();var Zle=class extends fr{constructor(){super({gl:{functions:`
                ${dO}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${fO}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Zle.extension={name:"luminosity",type:ge.BlendMode};Ae();var Jle=class extends fr{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};Jle.extension={name:"negation",type:ge.BlendMode};Ae();var ece=class extends fr{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};ece.extension={name:"overlay",type:ge.BlendMode};Ae();var tce=class extends fr{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};tce.extension={name:"pin-light",type:ge.BlendMode};Ae();var ice=class extends fr{constructor(){super({gl:{functions:`
                ${dO}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${fO}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}};ice.extension={name:"saturation",type:ge.BlendMode};Ae();var nce=class extends fr{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};nce.extension={name:"soft-light",type:ge.BlendMode};Ae();var rce=class extends fr{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};rce.extension={name:"subtract",type:ge.BlendMode};Ae();var sce=class extends fr{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}};sce.extension={name:"vivid-light",type:ge.BlendMode};Ae();Li();p_();var Uw;function ace(t){return Uw!==void 0||(Uw=(()=>{let e={stencil:!0,failIfMajorPerformanceCaveat:t??f_.defaultOptions.failIfMajorPerformanceCaveat};try{if(!si.get().getWebGLRenderingContext())return!1;let i=si.get().createCanvas().getContext("webgl",e),n=!!i?.getContextAttributes()?.stencil;if(i){let r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch{return!1}})()),Uw}Li();var Gw;async function oce(t={}){return Gw!==void 0||(Gw=await(async()=>{let e=si.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),Gw}p_();var QL=["webgl","webgpu","canvas"];async function uce(t){let e=[];t.preference?(e.push(t.preference),QL.forEach(s=>{s!==t.preference&&e.push(s)})):e=QL.slice();let i,n={};for(let s=0;s<e.length;s++){let a=e[s];if(a==="webgpu"&&await oce()){let{WebGPURenderer:o}=await Promise.resolve().then(()=>(_Y(),yY));i=o,n={...t,...t.webgpu};break}else if(a==="webgl"&&ace(t.failIfMajorPerformanceCaveat??f_.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:o}=await Promise.resolve().then(()=>(kq(),Mq));i=o,n={...t,...t.webgl};break}else if(a==="canvas")throw n={...t},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!i)throw new Error("No available renderer for the current environment");let r=new i;return await r.init(n),r}Ds();Hk();Mi();var Fq=class xP{constructor(...e){this.stage=new Qi,e[0]!==void 0&&xt(ei,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await uce(e),xP._plugins.forEach(i=>{i.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return xt(ei,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,i=!1){let n=xP._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Fq._plugins=[];var Iq=Fq;Lt.handleByList(ge.Application,Iq._plugins);Lt.add(wR);Ae();wo();qB();Li();Ae();Pf();iS();wr();gi();wk();h_();var Lq=class extends Ck{constructor(t,e){super();let{textures:i,data:n}=t;Object.keys(n.pages).forEach(r=>{let s=n.pages[parseInt(r,10)],a=i[s.id];this.pages.push({texture:a})}),Object.keys(n.chars).forEach(r=>{let s=n.chars[r],{frame:a,source:o,rotate:l}=i[s.page],h=en.transformRectCoords(s,a,l,new mn),d=new st({frame:h,orig:new mn(0,0,s.width,s.height),source:o,rotate:l});this.chars[r]={id:r.codePointAt(0),xOffset:s.xOffset,yOffset:s.yOffset,xAdvance:s.xAdvance,kerning:s.kerning??{},texture:d}}),this.baseRenderedFontSize=n.fontSize,this.baseMeasurementFontSize=n.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:n.fontSize},this.baseLineOffset=n.baseLineOffset,this.lineHeight=n.lineHeight,this.fontFamily=n.fontFamily,this.distanceField=n.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Jm.install(t)}static uninstall(t){Jm.uninstall(t)}},Hw={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){let e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let p in e){let g=e[p].match(/^[a-z]+/gm)[0],y=e[p].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),v={};for(let S in y){let T=y[S].split("="),A=T[0],D=T[1].replace(/"/gm,""),R=parseFloat(D),B=isNaN(R)?D:R;v[A]=B}i[g].push(v)}let n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=i.info,[s]=i.common,[a]=i.distanceField??[];a&&(n.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),n.fontSize=parseInt(r.size,10),n.fontFamily=r.face,n.lineHeight=parseInt(s.lineHeight,10);let o=i.page;for(let p=0;p<o.length;p++)n.pages.push({id:parseInt(o[p].id,10)||0,file:o[p].file});let l={};n.baseLineOffset=n.lineHeight-parseInt(s.base,10);let h=i.char;for(let p=0;p<h.length;p++){let g=h[p],y=parseInt(g.id,10),v=g.letter??g.char??String.fromCharCode(y);v==="space"&&(v=" "),l[y]=v,n.chars[v]={id:y,page:parseInt(g.page,10)||0,x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xOffset:parseInt(g.xoffset,10),yOffset:parseInt(g.yoffset,10),xAdvance:parseInt(g.xadvance,10),kerning:{}}}let d=i.kerning||[];for(let p=0;p<d.length;p++){let g=parseInt(d[p].first,10),y=parseInt(d[p].second,10),v=parseInt(d[p].amount,10);n.chars[l[y]].kerning[l[g]]=v}return n}};Li();var ZL={test(t){let e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){let e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=t.getElementsByTagName("info")[0],n=t.getElementsByTagName("common")[0],r=t.getElementsByTagName("distanceField")[0];r&&(e.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});let s=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let h=0;h<s.length;h++)e.pages.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});let l={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let h=0;h<a.length;h++){let d=a[h],p=parseInt(d.getAttribute("id"),10),g=d.getAttribute("letter")??d.getAttribute("char")??String.fromCharCode(p);g==="space"&&(g=" "),l[p]=g,e.chars[g]={id:p,page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<o.length;h++){let d=parseInt(o[h].getAttribute("first"),10),p=parseInt(o[h].getAttribute("second"),10),g=parseInt(o[h].getAttribute("amount"),10);e.chars[l[p]].kerning[l[d]]=g}return e}},JL={test(t){return typeof t=="string"&&t.includes("<font>")?ZL.test(si.get().parseXML(t)):!1},parse(t){return ZL.parse(si.get().parseXML(t))}},lce=[".xml",".fnt"],cce={extension:{type:ge.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof Lq,getCacheableAssets(t,e){let i={};return t.forEach(n=>{i[n]=e,i[`${n}-bitmap`]=e}),i[`${e.fontFamily}-bitmap`]=e,i}},hce={extension:{type:ge.LoadParser,priority:Fa.Normal},name:"loadBitmapFont",id:"bitmap-font",test(t){return lce.includes(ca.extname(t).toLowerCase())},async testParse(t){return Hw.test(t)||JL.test(t)},async parse(t,e,i){let n=Hw.test(t)?Hw.parse(t):JL.parse(t),{src:r}=e,{pages:s}=n,a=[],o=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let d=0;d<s.length;++d){let p=s[d].file,g=ca.join(ca.dirname(r),p);g=lE(g,r),a.push({src:g,data:o})}let l=await i.load(a),h=a.map(d=>l[d.src]);return new Lq({data:n,textures:h},r)},async load(t,e){return await(await si.get().fetch(t)).text()},async unload(t,e,i){await Promise.all(t.pages.map(n=>i.unload(n.texture.source._sourceOrigin))),t.destroy()}};Bi();var dce=class{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}};dc();Ae();gi();var fce={extension:{type:ge.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof st),getCacheableAssets:(t,e)=>{let i={};return t.forEach(n=>{e.forEach((r,s)=>{i[n+(s===0?"":s+1)]=r})}),i}};Ae();async function Nq(t){if("Image"in globalThis)return new Promise(e=>{let i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}var pce={extension:{type:ge.DetectionParser,priority:1},test:async()=>Nq("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};Ae();var eN=["png","jpg","jpeg"],mce={extension:{type:ge.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...eN],remove:async t=>t.filter(e=>!eN.includes(e))};Ae();var gce="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function wS(t){return gce?!1:document.createElement("video").canPlayType(t)!==""}var bce={extension:{type:ge.DetectionParser,priority:0},test:async()=>wS("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};Ae();var yce={extension:{type:ge.DetectionParser,priority:0},test:async()=>wS("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};Ae();var xce={extension:{type:ge.DetectionParser,priority:0},test:async()=>wS("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};Ae();var _ce={extension:{type:ge.DetectionParser,priority:0},test:async()=>Nq("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};Bi();Pf();e_();aS();var Uq=class BT{constructor(){this.loadOptions={...BT.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,i,n)=>(this._parsersValidated=!1,e[i]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,i){let n={promise:null,parser:null};return n.promise=(async()=>{let r=null,s=null;if((i.parser||i.loadParser)&&(s=this._parserHash[i.parser||i.loadParser],i.loadParser&&Mt(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),s||Mt(`[Assets] specified load parser "${i.parser||i.loadParser}" not found while loading ${e}`)),!s){for(let a=0;a<this.parsers.length;a++){let o=this.parsers[a];if(o.load&&o.test?.(e,i,this)){s=o;break}}if(!s)return Mt(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(e,i,this),n.parser=s;for(let a=0;a<this.parsers.length;a++){let o=this.parsers[a];o.parse&&o.parse&&await o.testParse?.(r,i,this)&&(r=await o.parse(r,i,this)||r,n.parser=o)}return r})(),n}async load(e,i){this._parsersValidated||this._validateParsers();let n=typeof i=="function"?{...BT.defaultOptions,...this.loadOptions,onProgress:i}:{...BT.defaultOptions,...this.loadOptions,...i||{}},{onProgress:r,onError:s,strategy:a,retryCount:o,retryDelay:l}=n,h=0,d={},p=yx(e),g=go(e,S=>({alias:[S],src:S,data:{}})),y=g.reduce((S,T)=>S+(T.progressSize||1),0),v=g.map(async S=>{let T=ca.toAbsolute(S.src);d[S.src]||(await this._loadAssetWithRetry(T,S,{onProgress:r,onError:s,strategy:a,retryCount:o,retryDelay:l},d),h+=S.progressSize||1,r&&r(h/y))});return await Promise.all(v),p?d[g[0].src]:d}async unload(e){let i=go(e,n=>({alias:[n],src:n})).map(async n=>{let r=ca.toAbsolute(n.src),s=this.promiseCache[r];if(s){let a=await s.promise;delete this.promiseCache[r],await s.parser?.unload?.(a,n,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,i)=>(!i.name&&!i.id?Mt("[Assets] parser should have an id"):(e[i.name]||e[i.id])&&Mt(`[Assets] parser id conflict "${i.id}"`),e[i.name]=i,i.id&&(e[i.id]=i),e),{})}async _loadAssetWithRetry(e,i,n,r){let s=0,{onError:a,strategy:o,retryCount:l,retryDelay:h}=n,d=p=>new Promise(g=>setTimeout(g,p));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,i)),r[i.src]=await this.promiseCache[e].promise;return}catch(p){delete this.promiseCache[e],delete r[i.src],s++;let g=o!=="retry"||s>l;if(o==="retry"&&!g){a&&a(p,i),await d(h);continue}if(o==="skip"){a&&a(p,i);return}throw a&&a(p,i),new Error(`[Loader.load] Failed to load ${e}.
${p}`)}}};Uq.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};var vce=Uq;Li();Ae();function Ag(t,e){if(Array.isArray(e)){for(let i of e)if(t.startsWith(`data:${i}`))return!0;return!1}return t.startsWith(`data:${e}`)}Pf();function Cg(t,e){let i=t.split("?")[0],n=ca.extname(i).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}wo();var Tce=".json",Ece="application/json",Sce={extension:{type:ge.LoadParser,priority:Fa.Low},name:"loadJson",id:"json",test(t){return Ag(t,Ece)||Cg(t,Tce)},async load(t){return await(await si.get().fetch(t)).json()}};Li();Ae();wo();var Ace=".txt",Cce="text/plain",wce={name:"loadTxt",id:"text",extension:{type:ge.LoadParser,priority:Fa.Low,name:"loadTxt"},test(t){return Ag(t,Cce)||Cg(t,Ace)},async load(t){return await(await si.get().fetch(t)).text()}};Li();Ae();Bi();Pf();dc();wo();var Dce=["normal","bold","100","200","300","400","500","600","700","800","900"],Rce=[".ttf",".otf",".woff",".woff2"],Pce=["font/ttf","font/otf","font/woff","font/woff2"],Mce=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Bce(t){let e=ca.extname(t),i=ca.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)),n=i.length>0;for(let s of i)if(!s.match(Mce)){n=!1;break}let r=i.join(" ");return n||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}var kce=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Oce(t){return kce.test(t)?t:encodeURI(t)}var Fce={extension:{type:ge.LoadParser,priority:Fa.Low},name:"loadWebFont",id:"web-font",test(t){return Ag(t,Pce)||Cg(t,Rce)},async load(t,e){let i=si.get().getFontFaceSet();if(i){let n=[],r=e.data?.family??Bce(t),s=e.data?.weights?.filter(o=>Dce.includes(o))??["normal"],a=e.data??{};for(let o=0;o<s.length;o++){let l=s[o],h=new FontFace(r,`url(${Oce(t)})`,{...a,weight:l});await h.load(),i.add(h),n.push(h)}return $i.has(`${r}-and-url`)?$i.get(`${r}-and-url`).entries.push({url:t,faces:n}):$i.set(`${r}-and-url`,{entries:[{url:t,faces:n}]}),n.length===1?n[0]:n}return Mt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){let e=Array.isArray(t)?t:[t],i=e[0].family,n=$i.get(`${i}-and-url`),r=n.entries.find(s=>s.faces.some(a=>e.indexOf(a)!==-1));r.faces=r.faces.filter(s=>e.indexOf(s)===-1),r.faces.length===0&&(n.entries=n.entries.filter(s=>s!==r)),e.forEach(s=>{si.get().getFontFaceSet().delete(s)}),n.entries.length===0&&$i.remove(`${i}-and-url`)}};Li();Ae();mg();_g();Mf();function pO(t,e=1){let i=mf.RETINA_PREFIX?.exec(t);return i?parseFloat(i[1]):e}wo();gi();Bi();dc();function mO(t,e,i){t.label=i,t._sourceOrigin=i;let n=new st({source:t,label:i}),r=()=>{delete e.promiseCache[i],$i.has(i)&&$i.remove(i)};return n.source.once("destroy",()=>{e.promiseCache[i]&&(Mt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),n.once("destroy",()=>{t.destroyed||(Mt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),n}var Ice=".svg",Lce="image/svg+xml",Nce={extension:{type:ge.LoadParser,priority:Fa.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return Ag(t,Lce)||Cg(t,Ice)},async load(t,e,i){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?Gce(t):Uce(t,e,i,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function Uce(t,e,i,n){let r=await si.get().fetch(t),s=si.get().createImage();s.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await r.text())}`,s.crossOrigin=n,await s.decode();let a=e.data?.width??s.width,o=e.data?.height??s.height,l=e.data?.resolution||pO(t),h=Math.ceil(a*l),d=Math.ceil(o*l),p=si.get().createCanvas(h,d),g=p.getContext("2d");g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(s,0,0,a*l,o*l);let{parseAsGraphicsContext:y,...v}=e.data??{},S=new Mh({resource:p,alphaMode:"premultiply-alpha-on-upload",resolution:l,...v});return mO(S,i,t)}async function Gce(t){let e=await(await si.get().fetch(t)).text(),i=new ka;return i.svg(e),i}Li();Ae();mg();var Hce=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,Fm=null,_P=class{constructor(){Fm||(Fm=URL.createObjectURL(new Blob([Hce],{type:"application/javascript"}))),this.worker=new Worker(Fm)}};_P.revokeObjectURL=function(){Fm&&(URL.revokeObjectURL(Fm),Fm=null)};var zce=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,Im=null,Gq=class{constructor(){Im||(Im=URL.createObjectURL(new Blob([zce],{type:"application/javascript"}))),this.worker=new Worker(Im)}};Gq.revokeObjectURL=function(){Im&&(URL.revokeObjectURL(Im),Im=null)};var tN=0,zw,Vce=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{let{worker:e}=new _P;e.addEventListener("message",i=>{e.terminate(),_P.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){return this._run("loadImageBitmap",[t,e?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){zw===void 0&&(zw=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<zw&&(this._createdWorkers++,t=new Gq().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();let i=new Promise((n,r)=>{this._queue.push({id:t,arguments:e,resolve:n,reject:r})});return this._next(),i}_next(){if(!this._queue.length)return;let t=this._getWorker();if(!t)return;let e=this._queue.pop(),i=e.id;this._resolveHash[tN]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:tN++,id:i})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager destroyed"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}},iN=new Vce;wo();var jce=[".jpeg",".jpg",".png",".webp",".avif"],Xce=["image/jpeg","image/png","image/webp","image/avif"];async function Yce(t,e){let i=await si.get().fetch(t);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${i.status} ${i.statusText}`);let n=await i.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}var Hq={name:"loadTextures",id:"texture",extension:{type:ge.LoadParser,priority:Fa.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Ag(t,Xce)||Cg(t,jce)},async load(t,e,i){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await iN.isImageBitmapSupported()?n=await iN.loadImageBitmap(t,e):n=await Yce(t,e):n=await new Promise((s,a)=>{n=si.get().createImage(),n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?s(n):(n.onload=()=>{s(n)},n.onerror=a)});let r=new Mh({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||pO(t),...e.data});return mO(r,i,t)},unload(t){t.destroy(!0)}};Ae();QB();KB();var qce=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Vw,jw;function Wce(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=Kce(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}function $ce(t){return new Promise((e,i)=>{t.addEventListener("canplaythrough",n),t.addEventListener("error",r),t.load();function n(){s(),e()}function r(a){s(),i(a)}function s(){t.removeEventListener("canplaythrough",n),t.removeEventListener("error",r)}})}function Kce(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);let i=new URL(t,document.baseURI);return i.hostname!==e.hostname||i.port!==e.port||i.protocol!==e.protocol?"anonymous":""}function Qce(){let t=[],e=[];for(let i of qce){let n=Bm.MIME_TYPES[i.substring(1)]||`video/${i.substring(1)}`;wS(n)&&(t.push(i),e.includes(n)||e.push(n))}return{validVideoExtensions:t,validVideoMime:e}}var Zce={name:"loadVideo",id:"video",extension:{type:ge.LoadParser,name:"loadVideo"},test(t){if(!Vw||!jw){let{validVideoExtensions:n,validVideoMime:r}=Qce();Vw=n,jw=r}let e=Ag(t,jw),i=Cg(t,Vw);return e||i},async load(t,e,i){let n={...Bm.defaultOptions,resolution:e.data?.resolution||pO(t),alphaMode:e.data?.alphaMode||await L7(),...e.data},r=document.createElement("video"),s={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(s).forEach(l=>{let h=s[l];h!==void 0&&r.setAttribute(l,h)}),n.muted===!0&&(r.muted=!0),Wce(r,t,n.crossorigin);let a=document.createElement("source"),o;if(n.mime)o=n.mime;else if(t.startsWith("data:"))o=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){let l=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();o=Bm.MIME_TYPES[l]||`video/${l}`}return a.src=t,o&&(a.type=o),new Promise(l=>{let h=async()=>{let d=new Bm({...n,resource:r});r.removeEventListener("canplay",h),e.data.preload&&await $ce(r),l(mO(d,i,t))};n.preload&&!n.autoPlay&&r.load(),r.addEventListener("canplay",h),r.appendChild(a)})},unload(t){t.destroy(!0)}};Ae();Mf();Ae();Mf();var zq={extension:{type:ge.ResolveParser,name:"resolveTexture"},test:Hq.test,parse:t=>({resolution:parseFloat(mf.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})},Jce={extension:{type:ge.ResolveParser,priority:-2,name:"resolveJson"},test:t=>mf.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:zq.parse};Mf();e_();aS();var ehe=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new mf,this.loader=new vce,this.cache=$i,this._backgroundLoader=new dce(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){Mt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let r=t.manifest;typeof r=="string"&&(r=await this.load(r)),this.resolver.addManifest(r)}let e=t.texturePreference?.resolution??1,i=typeof e=="number"?[e]:e,n=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:i}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();let i=yx(t),n=go(t).map(a=>{if(typeof a!="string"){let o=this.resolver.getAlias(a);return o.some(l=>!this.resolver.hasKey(l))&&this.add(a),Array.isArray(o)?o[0]:o}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),r=this.resolver.resolve(n),s=await this._mapLoadToResolve(r,e);return i?s[n[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);let n=this.resolver.resolveBundle(t),r={},s=Object.keys(n),a=0,o=[],l=()=>{e?.(o.reduce((d,p)=>d+p,0)/a)},h=s.map((d,p)=>{let g=n[d],y=Object.values(g),v=[...new Set(y.flat())].reduce((S,T)=>S+(T.progressSize||1),0);return o.push(0),a+=v,this._mapLoadToResolve(g,S=>{o[p]=S*v,l()}).then(S=>{r[d]=S})});return await Promise.all(h),i?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return $i.get(t);let e={};for(let i=0;i<t.length;i++)e[i]=$i.get(t[i]);return e}async _mapLoadToResolve(t,e){let i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;let n=await this.loader.load(i,e);this._backgroundLoader.active=!0;let r={};return i.forEach(s=>{let a=n[s.src],o=[s.src];s.alias&&o.push(...s.alias),o.forEach(l=>{r[l]=a}),$i.set(o,a)}),r}async unload(t){this._initialized||await this.init();let e=go(t).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=go(t);let e=this.resolver.resolveBundle(t),i=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(i)}async _unloadFromResolved(t){let e=Object.values(t);e.forEach(i=>{$i.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(let i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,n)=>e.indexOf(i)===n),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}},Es=new ehe;Lt.handleByList(ge.LoadParser,Es.loader.parsers).handleByList(ge.ResolveParser,Es.resolver.parsers).handleByList(ge.CacheParser,Es.cache.parsers).handleByList(ge.DetectionParser,Es.detections);Lt.add(fce,mce,pce,_ce,bce,yce,xce,Sce,wce,Fce,Nce,Hq,Zce,hce,cce,zq,Jce);var nN={loader:ge.LoadParser,resolver:ge.ResolveParser,cache:ge.CacheParser,detection:ge.DetectionParser};Lt.handle(ge.Asset,t=>{let e=t.ref;Object.entries(nN).filter(([i])=>!!e[i]).forEach(([i,n])=>Lt.add(Object.assign(e[i],{extension:e[i].extension??n})))},t=>{let e=t.ref;Object.keys(nN).filter(i=>!!e[i]).forEach(i=>Lt.remove(e[i]))});Ae();ge.DetectionParser;wo();Ae();Zr();Li();Li();ge.LoadParser,Fa.High;var the=(t=>(t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",t))(the||{}),ihe=(t=>(t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",t))(ihe||{});function jr(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var ro=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.R8G8B8=20]="R8G8B8",t[t.A8R8G8B8=21]="A8R8G8B8",t[t.X8R8G8B8=22]="X8R8G8B8",t[t.R5G6B5=23]="R5G6B5",t[t.X1R5G5B5=24]="X1R5G5B5",t[t.A1R5G5B5=25]="A1R5G5B5",t[t.A4R4G4B4=26]="A4R4G4B4",t[t.R3G3B2=27]="R3G3B2",t[t.A8=28]="A8",t[t.A8R3G3B2=29]="A8R3G3B2",t[t.X4R4G4B4=30]="X4R4G4B4",t[t.A2B10G10R10=31]="A2B10G10R10",t[t.A8B8G8R8=32]="A8B8G8R8",t[t.X8B8G8R8=33]="X8B8G8R8",t[t.G16R16=34]="G16R16",t[t.A2R10G10B10=35]="A2R10G10B10",t[t.A16B16G16R16=36]="A16B16G16R16",t[t.A8P8=40]="A8P8",t[t.P8=41]="P8",t[t.L8=50]="L8",t[t.A8L8=51]="A8L8",t[t.A4L4=52]="A4L4",t[t.V8U8=60]="V8U8",t[t.L6V5U5=61]="L6V5U5",t[t.X8L8V8U8=62]="X8L8V8U8",t[t.Q8W8V8U8=63]="Q8W8V8U8",t[t.V16U16=64]="V16U16",t[t.A2W10V10U10=67]="A2W10V10U10",t[t.Q16W16V16U16=110]="Q16W16V16U16",t[t.R16F=111]="R16F",t[t.G16R16F=112]="G16R16F",t[t.A16B16G16R16F=113]="A16B16G16R16F",t[t.R32F=114]="R32F",t[t.G32R32F=115]="G32R32F",t[t.A32B32G32R32F=116]="A32B32G32R32F",t[t.UYVY=jr("UYVY")]="UYVY",t[t.R8G8_B8G8=jr("RGBG")]="R8G8_B8G8",t[t.YUY2=jr("YUY2")]="YUY2",t[t.D3DFMT_G8R8_G8B8=jr("GRGB")]="D3DFMT_G8R8_G8B8",t[t.DXT1=jr("DXT1")]="DXT1",t[t.DXT2=jr("DXT2")]="DXT2",t[t.DXT3=jr("DXT3")]="DXT3",t[t.DXT4=jr("DXT4")]="DXT4",t[t.DXT5=jr("DXT5")]="DXT5",t[t.ATI1=jr("ATI1")]="ATI1",t[t.AT1N=jr("AT1N")]="AT1N",t[t.ATI2=jr("ATI2")]="ATI2",t[t.AT2N=jr("AT2N")]="AT2N",t[t.BC4U=jr("BC4U")]="BC4U",t[t.BC4S=jr("BC4S")]="BC4S",t[t.BC5U=jr("BC5U")]="BC5U",t[t.BC5S=jr("BC5S")]="BC5S",t[t.DX10=jr("DX10")]="DX10",t))(ro||{});ro.DXT1+"",ro.DXT2+"",ro.DXT3+"",ro.DXT4+"",ro.DXT5+"",ro.ATI1+"",ro.BC4U+"",ro.BC4S+"",ro.ATI2+"",ro.BC5U+"",ro.BC5S+"";wo();Ae();ge.LoadParser,Fa.High;wo();Ae();var nhe=(t=>(t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGBA=6408]="RGBA",t[t.RGBA8UI=36220]="RGBA8UI",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8=32856]="RGBA8",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(nhe||{});ge.LoadParser,Fa.High;wo();Ae();ge.LoadParser,Fa.High;Ae();Mf();Ae();ge.ResolveParser;ge.DetectionParser;ws();fg();new cs;Ae();ge.Application;SB(kle());ga();Ha();Dr();vl();d_();var rhe=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,rN=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`,she=class Vq extends Vh{constructor(e){e={...Vq.defaultOptions,...e};let i=du.from({vertex:{source:rN,entryPoint:"mainVertex"},fragment:{source:rN,entryPoint:"mainFragment"}}),n=Do.from({vertex:ES,fragment:rhe,name:"alpha-filter"}),{alpha:r,...s}=e,a=new Fr({uAlpha:{value:r,type:"f32"}});super({...s,gpuProgram:i,glProgram:n,resources:{alphaUniforms:a}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};she.defaultOptions={alpha:1};yl();Ro();Mi();vl();yl();Ro();vl();ga();var jq={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ahe=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function ohe(t){let e=jq[t],i=e.length,n=ahe,r="",s="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",a;for(let o=0;o<t;o++){let l=s.replace("%index%",o.toString());a=o,o>=i&&(a=t-o-1),l=l.replace("%value%",e[a].toString()),r+=l,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",t.toString()),n}var uhe=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function lhe(t,e){let i=Math.ceil(t/2),n=uhe,r="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let a=0;a<t;a++){let o=s.replace("%index%",a.toString());o=o.replace("%sampleIndex%",`${a-(i-1)}.0`),r+=o,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",t.toString()),n=n.replace("%dimension%",e?"z":"w"),n}function che(t,e){let i=lhe(e,t),n=ohe(e);return Do.from({vertex:i,fragment:n,name:`blur-${t?"horizontal":"vertical"}-pass-filter`})}Ha();var hhe=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function dhe(t,e){let i=jq[e],n=i.length,r=[],s=[],a=[];for(let p=0;p<e;p++){r[p]=`@location(${p}) offset${p}: vec2<f32>,`,t?s[p]=`filteredCord + vec2(${p-n+1} * pixelStrength, 0.0),`:s[p]=`filteredCord + vec2(0.0, ${p-n+1} * pixelStrength),`;let g=p<n?p:e-p-1,y=i[g].toString();a[p]=`finalColor += textureSample(uTexture, uSampler, offset${p}) * ${y};`}let o=r.join(`
`),l=s.join(`
`),h=a.join(`
`),d=hhe.replace("%blur-struct%",o).replace("%blur-vertex-out%",l).replace("%blur-fragment-in%",o).replace("%blur-sampling%",h).replace("%dimension%",t?"z":"w");return du.from({vertex:{source:d,entryPoint:"mainVertex"},fragment:{source:d,entryPoint:"mainFragment"}})}var Xq=class Yq extends Vh{constructor(e){e={...Yq.defaultOptions,...e};let i=che(e.horizontal,e.kernelSize),n=dhe(e.horizontal,e.kernelSize);super({glProgram:i,gpuProgram:n,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,i,n,r){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,i,n,r);else{let s=er.getSameSizeTexture(i),a=i,o=s;this._state.blend=!1;let l=e.renderer.type===fa.WEBGPU;for(let h=0;h<this.passes-1;h++){e.applyFilter(this,a,o,h===0?!0:l);let d=o;o=a,a=d}this._state.blend=!0,e.applyFilter(this,a,n,r),er.returnTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};Xq.defaultOptions={strength:8,quality:4,kernelSize:5};var Xw=Xq,fhe=class extends Vh{constructor(...t){let e=t[0]??{};typeof e=="number"&&(xt(ei,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),e={strength:e},t[1]!==void 0&&(e.quality=t[1]),t[2]!==void 0&&(e.resolution=t[2]||"inherit"),t[3]!==void 0&&(e.kernelSize=t[3])),e={...Xw.defaultOptions,...e};let{strength:i,strengthX:n,strengthY:r,quality:s,...a}=e;super({...a,compatibleRenderers:fa.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new Xw({horizontal:!0,...e}),this.blurYFilter=new Xw({horizontal:!1,...e}),this.quality=s,this.strengthX=n??i,this.strengthY=r??i,this.repeatEdgePixels=!1}apply(t,e,i,n){let r=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(r&&s){let a=er.getSameSizeTexture(e);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(t,e,a,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,a,i,n),er.returnTexture(a)}else s?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,e,i,n)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(t,e,i,n))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get strengthX(){return this.blurXFilter.blur}set strengthX(t){this.blurXFilter.blur=t,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(t){this.blurYFilter.blur=t,this.updatePadding()}get blur(){return xt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(t){xt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=t}get blurX(){return xt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(t){xt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=t}get blurY(){return xt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(t){xt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}};fhe.defaultOptions={strength:8,quality:4,kernelSize:5};Lr();ga();Ha();Dr();vl();d_();hi();Ga();ga();Ha();Dr();Bf();Mi();vl();ga();Ha();Dr();vl();d_();var phe=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,sN=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`,mhe=class qq extends Vh{constructor(e={}){e={...qq.defaultOptions,...e};let i=du.from({vertex:{source:sN,entryPoint:"mainVertex"},fragment:{source:sN,entryPoint:"mainFragment"}}),n=Do.from({vertex:ES,fragment:phe,name:"noise-filter"}),{noise:r,seed:s,...a}=e;super({...a,gpuProgram:i,glProgram:n,resources:{noiseUniforms:new Fr({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=r,this.seed=s??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};mhe.defaultOptions={noise:.5};Ds();Rf();Fh();Zr();gi();Ds();Ak();_g();Pj();Ff();Po();gi();Mi();xl();zh();var Wq=class extends Ih{constructor(...t){let e=t[0];e instanceof Of&&(xt(ei,"Mesh: use new Mesh({ geometry, shader }) instead"),e={geometry:e,shader:t[1]},t[3]&&(xt(ei,"Mesh: drawMode argument has been removed, use geometry.topology instead"),e.geometry.topology=t[3]));let{geometry:i,shader:n,texture:r,roundPixels:s,state:a,...o}=e;super({label:"Mesh",...o}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=n??null,this.texture=r??n?.texture??st.WHITE,this.state=a??Ia.for2d(),this._geometry=i,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=s??!1}get material(){return xt(ei,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(t){this._shader!==t&&(this._shader=t,this.onViewUpdate())}get shader(){return this._shader}set geometry(t){this._geometry!==t&&(this._geometry?.off("update",this.onViewUpdate,this),t.on("update",this.onViewUpdate,this),this._geometry=t,this.onViewUpdate())}get geometry(){return this._geometry}set texture(t){t||(t=st.EMPTY);let e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=t),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof Tg?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(t){let{x:e,y:i}=t;if(!this.bounds.containsPoint(e,i))return!1;let n=this.geometry.getBuffer("aPosition").data,r=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){let s=this.geometry.getIndex().data,a=s.length;for(let o=0;o+2<a;o+=r){let l=s[o]*2,h=s[o+1]*2,d=s[o+2]*2;if(pL(e,i,n[l],n[l+1],n[h],n[h+1],n[d],n[d+1]))return!0}}else{let s=n.length/2;for(let a=0;a+2<s;a+=r){let o=a*2,l=(a+1)*2,h=(a+2)*2;if(pL(e,i,n[o],n[o+1],n[l],n[l+1],n[h],n[h+1]))return!0}}return!1}destroy(t){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){let e=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(e)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null,this._gpuData=null}};Bf();gi();Rf();Fh();Bf();dc();Sf();gi();Mi();hi();Sf();var ghe=class{constructor({matrix:t,observer:e}={}){this.dirty=!0,this._matrix=t??new Tt,this.observer=e,this.position=new Qn(this,0,0),this.scale=new Qn(this,1,1),this.pivot=new Qn(this,0,0),this.skew=new Qn(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let t=this._matrix;return this.dirty&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1),t}_onUpdate(t){this.dirty=!0,t===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}};xl();var bhe=class kT extends Ih{constructor(...e){let i=e[0]||{};i instanceof st&&(i={texture:i}),e.length>1&&(xt(ei,"use new TilingSprite({ texture, width:100, height:100 }) instead"),i.width=e[1],i.height=e[2]),i={...kT.defaultOptions,...i};let{texture:n,anchor:r,tilePosition:s,tileScale:a,tileRotation:o,width:l,height:h,applyAnchorToTexture:d,roundPixels:p,...g}=i??{};super({label:"TilingSprite",...g}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Qn({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=d,this.texture=n,this._width=l??n.width,this._height=h??n.height,this._tileTransform=new ghe({observer:{_onUpdate:()=>this.onViewUpdate()}}),r&&(this.anchor=r),this.tilePosition=s,this.tileScale=a,this.tileRotation=o,this.roundPixels=p??!1}static from(e,i={}){return typeof e=="string"?new kT({texture:$i.get(e),...i}):new kT({texture:e,...i})}get uvRespectAnchor(){return xt(ei,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){xt(ei,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=st.EMPTY);let i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,i){typeof e=="object"&&(i=e.height??e.width,e=e.width),this._width=e,this._height=i??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){let e=this._bounds,i=this._anchor,n=this._width,r=this._height;e.minX=-i._x*n,e.maxX=e.minX+n,e.minY=-i._y*r,e.maxY=e.minY+r}containsPoint(e){let i=this._width,n=this._height,r=-i*this._anchor._x,s=0;return e.x>=r&&e.x<=r+i&&(s=-n*this._anchor._y,e.y>=s&&e.y<=s+n)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}this._texture=null}};bhe.defaultOptions={texture:st.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};hc();Sf();Mi();xl();var $q=class extends Ih{constructor(t,e){let{text:i,resolution:n,style:r,anchor:s,width:a,height:o,roundPixels:l,...h}=t;super({...h}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=r,this.resolution=n??null,this.allowChildren=!1,this._anchor=new Qn({_onUpdate:()=>{this.onViewUpdate()}}),s&&(this.anchor=s),this.roundPixels=l??!1,a!==void 0&&(this.width=a),o!==void 0&&(this.height=o)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){t||(t={}),this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){let e=this.bounds.width,i=this.bounds.height,n=-e*this.anchor.x,r=0;return t.x>=n&&t.x<=n+e&&(r=-i*this.anchor.y,t.y>=r&&t.y<=r+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}};function Kq(t,e){let i=t[0]??{};return(typeof i=="string"||t[1])&&(xt(ei,`use new ${e}({ text: "hi!", style }) instead`),i={text:i,style:t[1]}),i}Sk();Hh();_l();var gO=class extends $q{constructor(...t){let e=Kq(t,"Text");super(e,Ao),this.renderPipeId="text",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof lu?e.textureStyle:new lu(e.textureStyle))}updateBounds(){let t=this._bounds,e=this._anchor,i=0,n=0;if(this._style.trim){let{frame:r,canvasAndContext:s}=Om.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Om.returnCanvasAndContext(s),i=r.width,n=r.height}else{let r=_s.measureText(this._text,this._style);i=r.width,n=r.height}t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*n,t.maxY=t.minY+n}};Ae();Zr();_g();Bi();_l();h_();var yhe=class extends $q{constructor(...t){var e;let i=Kq(t,"BitmapText");i.style??(i.style=i.style||{}),(e=i.style).fill??(e.fill=16777215),super(i,Ao),this.renderPipeId="bitmapText"}updateBounds(){let t=this._bounds,e=this._anchor,i=Jm.measureText(this.text,this._style),n=i.scale,r=i.offsetY*n,s=i.width*n,a=i.height*n,o=this._style._stroke;o&&(s+=o.width,a+=o.width),t.minX=-e._x*s,t.maxX=t.minX+s,t.minY=-e._y*(a+r),t.maxY=t.minY+a}set resolution(t){t!==null&&Mt("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}};hc();Bi();_l();Lr();Mk();ge.WebGLSystem,ge.WebGPUSystem;oS();uS();Mi();var aN={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"};new Proxy(aN,{get(t,e){return xt(ei,`DRAW_MODES.${e} is deprecated, use '${aN[e]}' instead`),t[e]}});Mi();var vP=(t=>(t.CLAMP="clamp-to-edge",t.REPEAT="repeat",t.MIRRORED_REPEAT="mirror-repeat",t))(vP||{});new Proxy(vP,{get(t,e){return xt(ei,`DRAW_MODES.${e} is deprecated, use '${vP[e]}' instead`),t[e]}});var TP=(t=>(t.NEAREST="nearest",t.LINEAR="linear",t))(TP||{});new Proxy(TP,{get(t,e){return xt(ei,`DRAW_MODES.${e} is deprecated, use '${TP[e]}' instead`),t[e]}});iS();Mi();xl();Mi();lk();ck();zh();c_();fk();Bi();Ds();var xhe=class Qq extends Qi{constructor(e={}){e={...Qq.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let i=0;i<e.length;i++){let n=e[i];if(n.parentRenderLayer){if(n.parentRenderLayer===this)continue;n.parentRenderLayer.detach(n)}this.renderLayerChildren.push(n),n.parentRenderLayer=this;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)}return e[0]}detach(...e){for(let i=0;i<e.length;i++){let n=e[i],r=this.renderLayerChildren.indexOf(n);r!==-1&&this.renderLayerChildren.splice(r,1),n.parentRenderLayer=null;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detachAll(){let e=this.renderLayerChildren;for(let i=0;i<e.length;i++)e[i].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,i,n){let r=this.renderLayerChildren,s=r.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let a=0;a<s;a++)r[a].parent||Mt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",r[a]),r[a].collectRenderables(e,i,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,i,n){if(!e)return;let r=this.renderLayerChildren;for(let s=0;s<r.length;s++)r[s]._getGlobalBoundsRecursive(!0,i,this)}getFastGlobalBounds(e,i){return super.getFastGlobalBounds(e,i)}addChild(...e){throw new Error("RenderLayer.addChild() is not available. Please use RenderLayer.attach()")}removeChild(...e){throw new Error("RenderLayer.removeChild() is not available. Please use RenderLayer.detach()")}removeChildren(e,i){throw new Error("RenderLayer.removeChildren() is not available. Please use RenderLayer.detach()")}removeChildAt(e){throw new Error("RenderLayer.removeChildAt() is not available")}getChildAt(e){throw new Error("RenderLayer.getChildAt() is not available")}setChildIndex(e,i){throw new Error("RenderLayer.setChildIndex() is not available")}getChildIndex(e){throw new Error("RenderLayer.getChildIndex() is not available")}addChildAt(e,i){throw new Error("RenderLayer.addChildAt() is not available")}swapChildren(e,i){throw new Error("RenderLayer.swapChildren() is not available")}reparentChild(...e){throw new Error("RenderLayer.reparentChild() is not available with the render layer")}reparentChildAt(e,i){throw new Error("RenderLayer.reparentChildAt() is not available with the render layer")}};xhe.defaultOptions={sortableChildren:!1,sortFunction:(t,e)=>t.zIndex-e.zIndex};gi();Df();TS();function _he(t,e,i,n){let r=i.buffers[0],s=r.data,{verticesX:a,verticesY:o}=i,l=t/(a-1),h=e/(o-1),d=0,p=n[0],g=n[1],y=n[2],v=n[3],S=n[4],T=n[5],A=n[6],D=n[7],R=n[8];for(let B=0;B<s.length;B+=2){let z=d%a*l,L=(d/a|0)*h,H=p*z+g*L+y,te=v*z+S*L+T,j=A*z+D*L+R;s[B]=H/j,s[B+1]=te/j,d++}r.update()}function Zq(t,e){let i=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],d=e[8];return t[0]=a*d-o*h,t[1]=r*h-n*d,t[2]=n*o-r*a,t[3]=o*l-s*d,t[4]=i*d-r*l,t[5]=r*s-i*o,t[6]=s*h-a*l,t[7]=n*l-i*h,t[8]=i*a-n*s,t}function Jq(t,e,i){let n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],h=e[6],d=e[7],p=e[8],g=i[0],y=i[1],v=i[2],S=i[3],T=i[4],A=i[5],D=i[6],R=i[7],B=i[8];return t[0]=g*n+y*a+v*h,t[1]=g*r+y*o+v*d,t[2]=g*s+y*l+v*p,t[3]=S*n+T*a+A*h,t[4]=S*r+T*o+A*d,t[5]=S*s+T*l+A*p,t[6]=D*n+R*a+B*h,t[7]=D*r+R*o+B*d,t[8]=D*s+R*l+B*p,t}function vhe(t,e,i){let n=i[0],r=i[1],s=i[2];return t[0]=e[0]*n+e[1]*r+e[2]*s,t[1]=e[3]*n+e[4]*r+e[5]*s,t[2]=e[6]*n+e[7]*r+e[8]*s,t}var The=[0,0,0,0,0,0,0,0,0],Ehe=[0,0,0],D1=[0,0,0];function oN(t,e,i,n,r,s,a,o,l){let h=The;h[0]=e,h[1]=n,h[2]=s,h[3]=i,h[4]=r,h[5]=a,h[6]=1,h[7]=1,h[8]=1;let d=Zq(t,h);D1[0]=o,D1[1]=l,D1[2]=1;let p=vhe(Ehe,d,D1),g=t;return t[0]=p[0],t[1]=0,t[2]=0,t[3]=0,t[4]=p[1],t[5]=0,t[6]=0,t[7]=0,t[8]=p[2],Jq(t,g,h)}var She=[0,0,0,0,0,0,0,0,0],Ahe=[0,0,0,0,0,0,0,0,0];function Che(t,e,i,n,r,s,a,o,l,h,d,p,g,y,v,S,T){let A=oN(She,e,i,s,a,h,d,y,v),D=oN(Ahe,n,r,o,l,p,g,S,T);return Jq(t,Zq(A,A),D)}var whe=class extends Bk{constructor(t){super(t),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];let{width:e,height:i}=t;this.corners=[0,0,e,0,e,i,0,i]}setCorners(t,e,i,n,r,s,a,o){let l=this.corners;l[0]=t,l[1]=e,l[2]=i,l[3]=n,l[4]=r,l[5]=s,l[6]=a,l[7]=o,this.updateProjection()}updateProjection(){let{width:t,height:e}=this,i=this.corners,n=Che(this._projectionMatrix,0,0,i[0],i[1],t,0,i[2],i[3],t,e,i[4],i[5],0,e,i[6],i[7]);_he(t,e,this,n)}},Dhe=class eW extends Wq{constructor(e){e={...eW.defaultOptions,...e};let{texture:i,verticesX:n,verticesY:r,...s}=e,a=new whe(Qm({width:i.width,height:i.height,verticesX:n,verticesY:r}));super(Qm({...s,geometry:a})),this._texture=i,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){let e=this.geometry;if(!e)return;let{width:i,height:n}=this.texture;(e.width!==i||e.height!==n)&&(e.width=i,e.height=n,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,i,n,r,s,a,o,l){this.geometry.setCorners(e,i,n,r,s,a,o,l)}};Dhe.defaultOptions={texture:st.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};Df();TS();Df();zh();var tW=class iW extends Tg{constructor(e){let{width:i,points:n,textureScale:r}={...iW.defaultOptions,...e};super({positions:new Float32Array(n.length*4),uvs:new Float32Array(n.length*4),indices:new Uint32Array((n.length-1)*6)}),this.points=n,this._width=i,this.textureScale=r,this._build()}get width(){return this._width}_build(){let e=this.points;if(!e)return;let i=this.getBuffer("aPosition"),n=this.getBuffer("aUV"),r=this.getIndex();if(e.length<1)return;i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),r.data=new Uint16Array((e.length-1)*6));let s=n.data,a=r.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let o=0,l=e[0],h=this._width*this.textureScale,d=e.length;for(let g=0;g<d;g++){let y=g*4;if(this.textureScale>0){let v=l.x-e[g].x,S=l.y-e[g].y,T=Math.sqrt(v*v+S*S);l=e[g],o+=T/h}else o=g/(d-1);s[y]=o,s[y+1]=0,s[y+2]=o,s[y+3]=1}let p=0;for(let g=0;g<d-1;g++){let y=g*2;a[p++]=y,a[p++]=y+1,a[p++]=y+2,a[p++]=y+2,a[p++]=y+1,a[p++]=y+3}n.update(),r.update(),this.updateVertices()}updateVertices(){let e=this.points;if(e.length<1)return;let i=e[0],n,r=0,s=0,a=this.buffers[0].data,o=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<o;h++){let d=e[h],p=h*4;h<e.length-1?n=e[h+1]:n=d,s=-(n.x-i.x),r=n.y-i.y;let g=Math.sqrt(r*r+s*s);g<1e-6?(r=0,s=0):(r/=g,s/=g,r*=l,s*=l),a[p]=d.x+r,a[p+1]=d.y+s,a[p+2]=d.x-r,a[p+3]=d.y-s,i=d}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};tW.defaultOptions={width:200,points:[],textureScale:0};var Rhe=tW,Phe=class nW extends Wq{constructor(e){let{texture:i,points:n,textureScale:r,...s}={...nW.defaultOptions,...e},a=new Rhe(Qm({width:i.height,points:n,textureScale:r}));r>0&&(i.source.style.addressMode="repeat"),super(Qm({...s,texture:i,geometry:a})),this.autoUpdate=!0,this.onRender=this._render}_render(){let e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};Phe.defaultOptions={textureScale:0};Df();zh();Lr();gi();MB();UB();ws();xl();var uN={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},Mhe=new cs(0,0,0,0),Bhe=class EP extends Ih{constructor(e={}){e={...EP.defaultOptions,...e,dynamicProperties:{...EP.defaultOptions.dynamicProperties,...e?.dynamicProperties}};let{dynamicProperties:i,shader:n,roundPixels:r,texture:s,particles:a,...o}=e;super({label:"ParticleContainer",...o}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=s||null,this.shader=n,this._properties={};for(let l in uN){let h=uN[l],d=i[l];this._properties[l]={...h,dynamic:d}}this.allowChildren=!0,this.roundPixels=r??!1,this.particleChildren=a??[]}addParticle(...e){for(let i=0;i<e.length;i++)this.particleChildren.push(e[i]);return this.onViewUpdate(),e[0]}removeParticle(...e){let i=!1;for(let n=0;n<e.length;n++){let r=this.particleChildren.indexOf(e[n]);r>-1&&(this.particleChildren.splice(r,1),i=!0)}return i&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return Mhe}updateBounds(){}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource,n=this.texture??this.particleChildren[0]?.texture;n&&n.destroy(i)}this.texture=null,this.shader?.destroy()}removeParticles(e,i){e??(e=0),i??(i=this.particleChildren.length);let n=this.particleChildren.splice(e,i-e);return this.onViewUpdate(),n}removeParticleAt(e){let i=this.particleChildren.splice(e,1);return this.onViewUpdate(),i[0]}addParticleAt(e,i){return this.particleChildren.splice(i,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,i){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,i){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,i){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,i){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,i){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};Bhe.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};Sf();gi();Mi();xl();kk();var khe=class rW extends Ih{constructor(e){e instanceof st&&(e={texture:e});let{width:i,height:n,anchor:r,leftWidth:s,rightWidth:a,topHeight:o,bottomHeight:l,texture:h,roundPixels:d,...p}=e;super({label:"NineSliceSprite",...p}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=s??h?.defaultBorders?.left??yh.defaultOptions.leftWidth,this._topHeight=o??h?.defaultBorders?.top??yh.defaultOptions.topHeight,this._rightWidth=a??h?.defaultBorders?.right??yh.defaultOptions.rightWidth,this._bottomHeight=l??h?.defaultBorders?.bottom??yh.defaultOptions.bottomHeight,this._width=i??h.width??yh.defaultOptions.width,this._height=n??h.height??yh.defaultOptions.height,this.allowChildren=!1,this.texture=h??rW.defaultOptions.texture,this.roundPixels=d??!1,this._anchor=new Qn({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,i){typeof e=="object"&&(i=e.height??e.width,e=e.width),this._width=e,this._height=i??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=st.EMPTY);let i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}this._texture=null}updateBounds(){let e=this._bounds,i=this._anchor,n=this._width,r=this._height;e.minX=-i._x*n,e.maxX=e.minX+n,e.minY=-i._y*r,e.maxY=e.minY+r}};khe.defaultOptions={texture:st.EMPTY};Ds();Hh();h_();_S();function Ohe(t){let{text:e,style:i,chars:n}=t,r=i,s=Jm.getFont(e,r),a=_s.graphemeSegmenter(e),o=Dk(a,r,s,!0),l=o.scale,h=[],d=[],p=[],g=i.lineHeight?i.lineHeight:s.lineHeight*l,y=0;for(let v of o.lines){if(v.chars.length===0)continue;let S=new Qi({label:"line"});S.y=y,p.push(S);let T=new Qi({label:"word"}),A=0;for(let D=0;D<v.chars.length;D++){let R=v.chars[D];if(!R||!s.chars[R])continue;let B=R===" ",z=D===v.chars.length-1,L;n.length>0?(L=n.shift(),L.text=R,L.style=r,L.label=`char-${R}`,L.x=v.charPositions[D]*l-v.charPositions[A]*l):L=new yhe({text:R,style:r,label:`char-${R}`,x:v.charPositions[D]*l-v.charPositions[A]*l}),B||(h.push(L),T.addChild(L)),(B||z)&&T.children.length>0&&(T.x=v.charPositions[A]*l,d.push(T),S.addChild(T),T=new Qi({label:"word"}),A=D+1)}y+=g}return{chars:h,lines:p,words:d}}Ds();_l();var sW=class extends Qi{constructor(t){let{text:e,style:i,autoSplit:n,lineAnchor:r,wordAnchor:s,charAnchor:a,...o}=t;super(o),this._dirty=!1,this._canReuseChars=!1,this.chars=[],this.words=[],this.lines=[],this._originalText=e,this._autoSplit=n,this._lineAnchor=r,this._wordAnchor=s,this._charAnchor=a,this.style=i}split(){let t=this.splitFn();this.chars=t.chars,this.words=t.words,this.lines=t.lines,this.addChild(...this.lines),this.charAnchor=this._charAnchor,this.wordAnchor=this._wordAnchor,this.lineAnchor=this._lineAnchor,this._dirty=!1,this._canReuseChars=!0}get text(){return this._originalText}set text(t){this._originalText=t,this.lines.forEach(e=>e.destroy({children:!0})),this.lines.length=0,this.words.length=0,this.chars.length=0,this._canReuseChars=!1,this.onTextUpdate()}_setOrigin(t,e,i){let n;typeof t=="number"?n={x:t,y:t}:n={x:t.x,y:t.y},e.forEach(r=>{let s=r.getLocalBounds(),a=s.minX+s.width*n.x,o=s.minY+s.height*n.y;r.origin.set(a,o)}),this[i]=t}get lineAnchor(){return this._lineAnchor}set lineAnchor(t){this._setOrigin(t,this.lines,"_lineAnchor")}get wordAnchor(){return this._wordAnchor}set wordAnchor(t){this._setOrigin(t,this.words,"_wordAnchor")}get charAnchor(){return this._charAnchor}set charAnchor(t){this._setOrigin(t,this.chars,"_charAnchor")}get style(){return this._style}set style(t){t||(t={}),this._style=new Ao(t),this.words.forEach(e=>e.destroy()),this.words.length=0,this.lines.forEach(e=>e.destroy()),this.lines.length=0,this._canReuseChars=!0,this.onTextUpdate()}onTextUpdate(){this._dirty=!0,this._autoSplit&&this.split()}destroy(t){super.destroy(t),this.chars=[],this.words=[],this.lines=[],(typeof t=="boolean"?t:t?.style)&&this._style.destroy(t),this._style=null,this._originalText=""}};_l();var Fhe=class OT extends sW{constructor(e){let i={...OT.defaultOptions,...e};super(i)}static from(e,i){let n={...OT.defaultOptions,...i,text:e.text,style:new Ao(e.style)};return new OT({...n})}splitFn(){return Ohe({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};Fhe.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};_l();hi();Ds();Hh();function Ihe(t,e,i){switch(t){case"center":return(i-e)/2;case"right":return i-e;case"left":default:return 0}}function aW(t){return t==="\r"||t===`
`||t===`\r
`}function Lhe(t,e,i){let n=[],r=e.lines[0],s="",a=[],o=0;return i.wordWrap=!1,t.forEach(l=>{let h=/^\s*$/.test(l),d=aW(l),p=s.length===0&&h;if(h&&!d&&p)return;d||(s+=l);let g=_s.measureText(l,i);a.push({char:l,metric:g}),s.length>=r.length&&(n.push({line:s,chars:a,width:a.reduce((y,v)=>y+v.metric.width,0)}),a=[],s="",o++,r=e.lines[o])}),n}function Nhe(t){let{text:e,style:i,chars:n}=t,r=i,s=_s.measureText(e,r),a=_s.graphemeSegmenter(e),o=Lhe(a,s,r.clone()),l=r.align,h=s.lineWidths.reduce((T,A)=>Math.max(T,A),0),d=[],p=[],g=[],y=0,v=r.stroke?.width||0,S=r.dropShadow?.distance||0;return o.forEach((T,A)=>{let D=new Qi({label:`line-${A}`});D.y=y,p.push(D);let R=s.lineWidths[A],B=Ihe(l,R,h),z=new Qi({label:"word"});z.x=B,T.chars.forEach((L,H)=>{if(L.metric.width!==0){if(aW(L.char)){B+=L.metric.width-v;return}if(L.char===" ")z.children.length>0&&(g.push(z),D.addChild(z)),B+=L.metric.width+r.letterSpacing-v,z=new Qi({label:"word"}),z.x=B;else{let te;n.length>0?(te=n.shift(),te.text=L.char,te.style=r,te.setFromMatrix(Tt.IDENTITY),te.x=B-z.x-S*H):te=new gO({text:L.char,style:r,x:B-z.x-S*H}),d.push(te),z.addChild(te),B+=L.metric.width+r.letterSpacing-v}}}),z.children.length>0&&(g.push(z),D.addChild(z)),y+=s.lineHeight}),{chars:d,lines:p,words:g}}var Uhe=class FT extends sW{constructor(e){let i={...FT.defaultOptions,...e};super(i)}static from(e,i){let n={...FT.defaultOptions,...i,text:e.text,style:new Ao(e.style)};return new FT({...n})}splitFn(){return Nhe({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};Uhe.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};Lr();Bf();l7();d7();f7();p7();dc();wo();Mf();e_();qB();S7();aS();Lr();m9();HB();qae();_7();Li();Oj();T7();b7();YB();zB();rS();x7();sS();VB();jB();d_();Cj();wj();eX();iX();nX();Rj();vl();eS();Sj();Bj();sX();iS();hi();AB();Jx();bk();Sf();Ga();Pj();Xz();Wz();Kz();wr();Jz();que();EY();rk();X7();lS();Hj();K7();Qj();iH();q7();uk();VH();Uh();DH();xH();vH();TH();EH();SH();kH();s_();a_();IH();Eg();Gh();Lk();O7();aX();F7();oX();B9();I7();uX();oS();uS();SY();CY();wY();Sg();RY();BY();MY();OY();IY();LY();NY();jY();UY();zY();YY();qY();WY();dS();ga();KY();aq();hq();QY();uO();Jk();tq();sq();nH();nk();iq();nq();rq();lO();rH();sH();aH();lH();cH();oO();HY();GY();cq();lq();pq();dq();sO();gq();Pq();yq();_q();hO();Tq();Cq();wq();Dq();Rq();Aq();Rle();kq();IX();LX();$X();NX();UX();GX();HX();zX();qX();KX();ZX();JX();iY();rY();sY();Lh();Ha();aY();$k();YX();dH();fH();XX();mH();gH();bH();oY();uY();eO();bY();cY();dY();rO();pY();gY();_Y();cX();dX();Nh();AS();fc();ik();pX();xX();Ff();lk();J7();If();eH();ck();OB();_X();eY();zk();iO();vX();pH();pu();NH();Wk();Dr();Qk();UH();Zk();Kk();EX();kf();t_();Po();p_();Yk();Ik();vg();CX();bX();FB();pg();mg();Zr();QB();gi();RX();LB();yl();hc();Vk();G7();i_();OX();Ro();Dz();Pz();Mz();ws();fg();tS();Mj();wf();C9();R9();M9();O9();I9();U9();MB();q9();$9();Q9();J9();Ds();zj();NB();Vj();$j();UB();X9();Uk();Df();Nk();PB();RB();qj();Wj();vY();xg();Lj();hk();yk();uV();xk();cV();dV();WH();KH();QH();az();uz();cz();Roe();yg();yS();Ak();_g();mS();bz();c_();fV();mV();bV();_k();Vz();_V();SV();yV();vV();TV();fk();vk();fz();$H();dk();TS();TY();Gj();bS();zh();xz();Tz();Iz();Oz();Lz();Cz();mk();kz();Ez();Sz();kk();Tj();cj();dj();yj();gj();pj();mj();bj();l_();Bf();Kj();wk();h_();XV();zV();_S();jV();WV();$V();Pk();rj();QV();ej();tj();ij();ZV();JV();nj();Mk();Gz();Sk();Hh();Hz();BV();xS();Ek();HV();IV();UV();_l();Tk();gk();xl();A7();D7();Rf();Fh();r7();KB();o7();KV();Ok();wV();Gk();Cs();SX();CB();Nr();$B();tk();Hk();Mi();Bi();i7();Pf();Cf();S9();bl();TX();nz();Lt.add(Ole,Fle);const Ghe="modulepreload",Hhe=function(t){return"/novel-rpg/"+t},lN={},wx=function(e,i,n){let r=Promise.resolve();if(i&&i.length>0){let l=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");r=l(i.map(h=>{if(h=Hhe(h),h in lN)return;lN[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Ghe,d||(g.as="script"),g.crossOrigin="",g.href=h,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((y,v)=>{g.addEventListener("load",y),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};async function zhe(t){var e;const i={importPixi:!1,...t};i.app&&(i.renderer=i.app.renderer,i.stage=i.app.stage),i.importPixi&&!i.pixi&&(i.pixi=await wx(()=>Promise.resolve().then(()=>h_e),void 0)),window.__PIXI_DEVTOOLS__={...window.__PIXI_DEVTOOLS__||{},app:i.app,stage:i.stage,renderer:i.renderer,extensions:[...((e=window.__PIXI_DEVTOOLS__)==null?void 0:e.extensions)||[],...i.extensions||[]],plugins:{}}}function Vhe(t,e){t.indexOf(e)===-1&&t.push(e)}function oW(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}const bf=(t,e,i)=>i>e?e:i<t?t:i;let bO=()=>{};const oc={},uW=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function jhe(t){return typeof t=="object"&&t!==null}const lW=t=>/^0[^.\s]+$/u.test(t);function yO(t){let e;return()=>(e===void 0&&(e=t()),e)}const wg=t=>t,Xhe=(t,e)=>i=>e(t(i)),xO=(...t)=>t.reduce(Xhe),_O=(t,e,i)=>{const n=e-t;return n===0?1:(i-t)/n};class cW{constructor(){this.subscriptions=[]}add(e){return Vhe(this.subscriptions,e),()=>oW(this.subscriptions,e)}notify(e,i,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,i,n);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,i,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sl=t=>t*1e3,ru=t=>t/1e3;function hW(t,e){return e?t*(1e3/e):0}const Yhe=(t,e,i)=>{const n=e-t;return((i-t)%n+n)%n+t},dW=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,qhe=1e-7,Whe=12;function $he(t,e,i,n,r){let s,a,o=0;do a=e+(i-e)/2,s=dW(a,n,r)-t,s>0?i=a:e=a;while(Math.abs(s)>qhe&&++o<Whe);return a}function m_(t,e,i,n){if(t===e&&i===n)return wg;const r=s=>$he(s,0,1,t,i);return s=>s===0||s===1?s:dW(r(s),e,n)}const fW=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,pW=t=>e=>1-t(1-e),mW=m_(.33,1.53,.69,.99),vO=pW(mW),gW=fW(vO),bW=t=>(t*=2)<1?.5*vO(t):.5*(2-Math.pow(2,-10*(t-1))),TO=t=>1-Math.sin(Math.acos(t)),Khe=pW(TO),yW=fW(TO),Qhe=m_(.42,0,1,1),Zhe=m_(0,0,.58,1),xW=m_(.42,0,.58,1),_W=t=>Array.isArray(t)&&typeof t[0]!="number";function vW(t,e){return _W(t)?t[Yhe(0,t.length,e)]:t}const TW=t=>Array.isArray(t)&&typeof t[0]=="number",Jhe={linear:wg,easeIn:Qhe,easeInOut:xW,easeOut:Zhe,circIn:TO,circInOut:yW,circOut:Khe,backIn:vO,backInOut:gW,backOut:mW,anticipate:bW},ede=t=>typeof t=="string",cN=t=>{if(TW(t)){bO(t.length===4);const[e,i,n,r]=t;return m_(e,i,n,r)}else if(ede(t))return Jhe[t];return t},R1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function tde(t,e){let i=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(h.schedule(d),t()),d(o)}const h={schedule:(d,p=!1,g=!1)=>{const v=g&&r?i:n;return p&&a.add(d),v.has(d)||v.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,r){s=!0;return}r=!0,[i,n]=[n,i],i.forEach(l),i.clear(),r=!1,s&&(s=!1,h.process(d))}};return h}const ide=40;function EW(t,e){let i=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>i=!0,a=R1.reduce((R,B)=>(R[B]=tde(s),R),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:d,update:p,preRender:g,render:y,postRender:v}=a,S=()=>{const R=oc.useManualTiming?r.timestamp:performance.now();i=!1,oc.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(R-r.timestamp,ide),1)),r.timestamp=R,r.isProcessing=!0,o.process(r),l.process(r),h.process(r),d.process(r),p.process(r),g.process(r),y.process(r),v.process(r),r.isProcessing=!1,i&&e&&(n=!1,t(S))},T=()=>{i=!0,n=!0,r.isProcessing||t(S)};return{schedule:R1.reduce((R,B)=>{const z=a[B];return R[B]=(L,H=!1,te=!1)=>(i||T(),z.schedule(L,H,te)),R},{}),cancel:R=>{for(let B=0;B<R1.length;B++)a[R1[B]].cancel(R)},state:r,steps:a}}const{schedule:uc,cancel:SP,state:xE}=EW(typeof requestAnimationFrame<"u"?requestAnimationFrame:wg,!0);let IT;function nde(){IT=void 0}const yo={now:()=>(IT===void 0&&yo.set(xE.isProcessing||oc.useManualTiming?xE.timestamp:performance.now()),IT),set:t=>{IT=t,queueMicrotask(nde)}},SW=t=>e=>typeof e=="string"&&e.startsWith(t),AW=SW("--"),rde=SW("var(--"),EO=t=>rde(t)?sde.test(t.split("/*")[0].trim()):!1,sde=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Dg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Dx={...Dg,transform:t=>bf(0,1,t)},P1={...Dg,default:1},Qy=t=>Math.round(t*1e5)/1e5,SO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ade(t){return t==null}const ode=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,AO=(t,e)=>i=>!!(typeof i=="string"&&ode.test(i)&&i.startsWith(t)||e&&!ade(i)&&Object.prototype.hasOwnProperty.call(i,e)),CW=(t,e,i)=>n=>{if(typeof n!="string")return n;const[r,s,a,o]=n.match(SO);return{[t]:parseFloat(r),[e]:parseFloat(s),[i]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},ude=t=>bf(0,255,t),Yw={...Dg,transform:t=>Math.round(ude(t))},sf={test:AO("rgb","red"),parse:CW("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:n=1})=>"rgba("+Yw.transform(t)+", "+Yw.transform(e)+", "+Yw.transform(i)+", "+Qy(Dx.transform(n))+")"};function lde(t){let e="",i="",n="",r="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,i+=i,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const AP={test:AO("#"),parse:lde,transform:sf.transform},g_=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),lh=g_("deg"),Lm=g_("%"),jt=g_("px"),cde=g_("vh"),hde=g_("vw"),hN={...Lm,parse:t=>Lm.parse(t)/100,transform:t=>Lm.transform(t*100)},Dm={test:AO("hsl","hue"),parse:CW("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:n=1})=>"hsla("+Math.round(t)+", "+Lm.transform(Qy(e))+", "+Lm.transform(Qy(i))+", "+Qy(Dx.transform(n))+")"},Sr={test:t=>sf.test(t)||AP.test(t)||Dm.test(t),parse:t=>sf.test(t)?sf.parse(t):Dm.test(t)?Dm.parse(t):AP.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?sf.transform(t):Dm.transform(t),getAnimatableNone:t=>{const e=Sr.parse(t);return e.alpha=0,Sr.transform(e)}},dde=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fde(t){return isNaN(t)&&typeof t=="string"&&(t.match(SO)?.length||0)+(t.match(dde)?.length||0)>0}const wW="number",DW="color",pde="var",mde="var(",dN="${}",gde=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rx(t){const e=t.toString(),i=[],n={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(gde,l=>(Sr.test(l)?(n.color.push(s),r.push(DW),i.push(Sr.parse(l))):l.startsWith(mde)?(n.var.push(s),r.push(pde),i.push(l)):(n.number.push(s),r.push(wW),i.push(parseFloat(l))),++s,dN)).split(dN);return{values:i,split:o,indexes:n,types:r}}function RW(t){return Rx(t).values}function PW(t){const{split:e,types:i}=Rx(t),n=e.length;return r=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],r[a]!==void 0){const o=i[a];o===wW?s+=Qy(r[a]):o===DW?s+=Sr.transform(r[a]):s+=r[a]}return s}}const bde=t=>typeof t=="number"?0:Sr.test(t)?Sr.getAnimatableNone(t):t;function yde(t){const e=RW(t);return PW(t)(e.map(bde))}const Rg={test:fde,parse:RW,createTransformer:PW,getAnimatableNone:yde};function qw(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function xde({hue:t,saturation:e,lightness:i,alpha:n}){t/=360,e/=100,i/=100;let r=0,s=0,a=0;if(!e)r=s=a=i;else{const o=i<.5?i*(1+e):i+e-i*e,l=2*i-o;r=qw(l,o,t+1/3),s=qw(l,o,t),a=qw(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function _E(t,e){return i=>i>0?e:t}const b_=(t,e,i)=>t+(e-t)*i,Ww=(t,e,i)=>{const n=t*t,r=i*(e*e-n)+n;return r<0?0:Math.sqrt(r)},_de=[AP,sf,Dm],vde=t=>_de.find(e=>e.test(t));function fN(t){const e=vde(t);if(!e)return!1;let i=e.parse(t);return e===Dm&&(i=xde(i)),i}const pN=(t,e)=>{const i=fN(t),n=fN(e);if(!i||!n)return _E(t,e);const r={...i};return s=>(r.red=Ww(i.red,n.red,s),r.green=Ww(i.green,n.green,s),r.blue=Ww(i.blue,n.blue,s),r.alpha=b_(i.alpha,n.alpha,s),sf.transform(r))},CP=new Set(["none","hidden"]);function Tde(t,e){return CP.has(t)?i=>i<=0?t:e:i=>i>=1?e:t}function Ede(t,e){return i=>b_(t,e,i)}function CO(t){return typeof t=="number"?Ede:typeof t=="string"?EO(t)?_E:Sr.test(t)?pN:Cde:Array.isArray(t)?MW:typeof t=="object"?Sr.test(t)?pN:Sde:_E}function MW(t,e){const i=[...t],n=i.length,r=t.map((s,a)=>CO(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)i[a]=r[a](s);return i}}function Sde(t,e){const i={...t,...e},n={};for(const r in i)t[r]!==void 0&&e[r]!==void 0&&(n[r]=CO(t[r])(t[r],e[r]));return r=>{for(const s in n)i[s]=n[s](r);return i}}function Ade(t,e){const i=[],n={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],a=t.indexes[s][n[s]],o=t.values[a]??0;i[r]=o,n[s]++}return i}const Cde=(t,e)=>{const i=Rg.createTransformer(e),n=Rx(t),r=Rx(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?CP.has(t)&&!r.values.length||CP.has(e)&&!n.values.length?Tde(t,e):xO(MW(Ade(n,r),r.values),i):_E(t,e)};function BW(t,e,i){return typeof t=="number"&&typeof e=="number"&&typeof i=="number"?b_(t,e,i):CO(t)(t,e)}const wde=t=>{const e=({timestamp:i})=>t(i);return{start:(i=!0)=>uc.update(e,i),stop:()=>SP(e),now:()=>xE.isProcessing?xE.timestamp:yo.now()}},kW=(t,e,i=10)=>{let n="";const r=Math.max(Math.round(e/i),2);for(let s=0;s<r;s++)n+=Math.round(t(s/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},vE=2e4;function wO(t){let e=0;const i=50;let n=t.next(e);for(;!n.done&&e<vE;)e+=i,n=t.next(e);return e>=vE?1/0:e}function OW(t,e=100,i){const n=i({...t,keyframes:[0,e]}),r=Math.min(wO(n),vE);return{type:"keyframes",ease:s=>n.next(r*s).value/e,duration:ru(r)}}const Dde=5;function FW(t,e,i){const n=Math.max(e-Dde,0);return hW(i-t(n),e-n)}const Jn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$w=.001;function Rde({duration:t=Jn.duration,bounce:e=Jn.bounce,velocity:i=Jn.velocity,mass:n=Jn.mass}){let r,s,a=1-e;a=bf(Jn.minDamping,Jn.maxDamping,a),t=bf(Jn.minDuration,Jn.maxDuration,ru(t)),a<1?(r=h=>{const d=h*a,p=d*t,g=d-i,y=wP(h,a),v=Math.exp(-p);return $w-g/y*v},s=h=>{const p=h*a*t,g=p*i+i,y=Math.pow(a,2)*Math.pow(h,2)*t,v=Math.exp(-p),S=wP(Math.pow(h,2),a);return(-r(h)+$w>0?-1:1)*((g-y)*v)/S}):(r=h=>{const d=Math.exp(-h*t),p=(h-i)*t+1;return-$w+d*p},s=h=>{const d=Math.exp(-h*t),p=(i-h)*(t*t);return d*p});const o=5/t,l=Mde(r,s,o);if(t=sl(t),isNaN(l))return{stiffness:Jn.stiffness,damping:Jn.damping,duration:t};{const h=Math.pow(l,2)*n;return{stiffness:h,damping:a*2*Math.sqrt(n*h),duration:t}}}const Pde=12;function Mde(t,e,i){let n=i;for(let r=1;r<Pde;r++)n=n-t(n)/e(n);return n}function wP(t,e){return t*Math.sqrt(1-e*e)}const Bde=["duration","bounce"],kde=["stiffness","damping","mass"];function mN(t,e){return e.some(i=>t[i]!==void 0)}function Ode(t){let e={velocity:Jn.velocity,stiffness:Jn.stiffness,damping:Jn.damping,mass:Jn.mass,isResolvedFromDuration:!1,...t};if(!mN(t,kde)&&mN(t,Bde))if(t.visualDuration){const i=t.visualDuration,n=2*Math.PI/(i*1.2),r=n*n,s=2*bf(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Jn.mass,stiffness:r,damping:s}}else{const i=Rde(t);e={...e,...i,mass:Jn.mass},e.isResolvedFromDuration=!0}return e}function Px(t=Jn.visualDuration,e=Jn.bounce){const i=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:r}=i;const s=i.keyframes[0],a=i.keyframes[i.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:h,mass:d,duration:p,velocity:g,isResolvedFromDuration:y}=Ode({...i,velocity:-ru(i.velocity||0)}),v=g||0,S=h/(2*Math.sqrt(l*d)),T=a-s,A=ru(Math.sqrt(l/d)),D=Math.abs(T)<5;n||(n=D?Jn.restSpeed.granular:Jn.restSpeed.default),r||(r=D?Jn.restDelta.granular:Jn.restDelta.default);let R;if(S<1){const z=wP(A,S);R=L=>{const H=Math.exp(-S*A*L);return a-H*((v+S*A*T)/z*Math.sin(z*L)+T*Math.cos(z*L))}}else if(S===1)R=z=>a-Math.exp(-A*z)*(T+(v+A*T)*z);else{const z=A*Math.sqrt(S*S-1);R=L=>{const H=Math.exp(-S*A*L),te=Math.min(z*L,300);return a-H*((v+S*A*T)*Math.sinh(te)+z*T*Math.cosh(te))/z}}const B={calculatedDuration:y&&p||null,next:z=>{const L=R(z);if(y)o.done=z>=p;else{let H=z===0?v:0;S<1&&(H=z===0?sl(v):FW(R,z,L));const te=Math.abs(H)<=n,j=Math.abs(a-L)<=r;o.done=te&&j}return o.value=o.done?a:L,o},toString:()=>{const z=Math.min(wO(B),vE),L=kW(H=>B.next(z*H).value,z,30);return z+"ms "+L},toTransition:()=>{}};return B}Px.applyToOptions=t=>{const e=OW(t,100,Px);return t.ease=e.ease,t.duration=sl(e.duration),t.type="keyframes",t};function DP({keyframes:t,velocity:e=0,power:i=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:d}){const p=t[0],g={done:!1,value:p},y=te=>o!==void 0&&te<o||l!==void 0&&te>l,v=te=>o===void 0?l:l===void 0||Math.abs(o-te)<Math.abs(l-te)?o:l;let S=i*e;const T=p+S,A=a===void 0?T:a(T);A!==T&&(S=A-p);const D=te=>-S*Math.exp(-te/n),R=te=>A+D(te),B=te=>{const j=D(te),O=R(te);g.done=Math.abs(j)<=h,g.value=g.done?A:O};let z,L;const H=te=>{y(g.value)&&(z=te,L=Px({keyframes:[g.value,v(g.value)],velocity:FW(R,te,g.value),damping:r,stiffness:s,restDelta:h,restSpeed:d}))};return H(0),{calculatedDuration:null,next:te=>{let j=!1;return!L&&z===void 0&&(j=!0,B(te),H(te)),z!==void 0&&te>=z?L.next(te-z):(!j&&B(te),g)}}}function Fde(t,e,i){const n=[],r=i||oc.mix||BW,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||wg:e;o=xO(l,o)}n.push(o)}return n}function Ide(t,e,{clamp:i=!0,ease:n,mixer:r}={}){const s=t.length;if(bO(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Fde(e,n,r),l=o.length,h=d=>{if(a&&d<t[0])return e[0];let p=0;if(l>1)for(;p<t.length-2&&!(d<t[p+1]);p++);const g=_O(t[p],t[p+1],d);return o[p](g)};return i?d=>h(bf(t[0],t[s-1],d)):h}function IW(t,e){const i=t[t.length-1];for(let n=1;n<=e;n++){const r=_O(0,e,n);t.push(b_(i,1,r))}}function LW(t){const e=[0];return IW(e,t.length-1),e}function Lde(t,e){return t.map(i=>i*e)}function Nde(t,e){return t.map(()=>e||xW).splice(0,t.length-1)}function Zy({duration:t=300,keyframes:e,times:i,ease:n="easeInOut"}){const r=_W(n)?n.map(cN):cN(n),s={done:!1,value:e[0]},a=Lde(i&&i.length===e.length?i:LW(e),t),o=Ide(a,e,{ease:Array.isArray(r)?r:Nde(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const Ude=t=>t!==null;function DO(t,{repeat:e,repeatType:i="loop"},n,r=1){const s=t.filter(Ude),o=r<0||e&&i!=="loop"&&e%2===1?0:s.length-1;return!o||n===void 0?s[o]:n}const Gde={decay:DP,inertia:DP,tween:Zy,keyframes:Zy,spring:Px};function NW(t){typeof t.type=="string"&&(t.type=Gde[t.type])}class RO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,i){return this.finished.then(e,i)}}const Hde=t=>t/100;class PO extends RO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:i}=this.options;i&&i.updatedAt!==yo.now()&&this.tick(yo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;NW(e);const{type:i=Zy,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=i||Zy;l!==Zy&&typeof o[0]!="number"&&(this.mixKeyframes=xO(Hde,BW(o[0],o[1])),o=[0,100]);const h=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=wO(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=h}updateTime(e){const i=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(e,i=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:d,repeat:p,repeatType:g,repeatDelay:y,type:v,onUpdate:S,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),i?this.currentTime=e:this.updateTime(e);const A=this.currentTime-h*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?A<0:A>r;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let R=this.currentTime,B=n;if(p){const te=Math.min(this.currentTime,r)/o;let j=Math.floor(te),O=te%1;!O&&te>=1&&(O=1),O===1&&j--,j=Math.min(j,p+1),!!(j%2)&&(g==="reverse"?(O=1-O,y&&(O-=y/o)):g==="mirror"&&(B=a)),R=bf(0,1,O)*o}const z=D?{done:!1,value:d[0]}:B.next(R);s&&(z.value=s(z.value));let{done:L}=z;!D&&l!==null&&(L=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return H&&v!==DP&&(z.value=DO(d,this.options,T,this.speed)),S&&S(z.value),H&&this.finish(),z}then(e,i){return this.finished.then(e,i)}get duration(){return ru(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ru(e)}get time(){return ru(this.currentTime)}set time(e){e=sl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(yo.now());const i=this.playbackSpeed!==e;this.playbackSpeed=e,i&&(this.time=ru(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=wde,startTime:i}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=i??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(yo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function zde(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const af=t=>t*180/Math.PI,RP=t=>{const e=af(Math.atan2(t[1],t[0]));return PP(e)},Vde={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:RP,rotateZ:RP,skewX:t=>af(Math.atan(t[1])),skewY:t=>af(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},PP=t=>(t=t%360,t<0&&(t+=360),t),gN=RP,bN=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),yN=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),jde={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bN,scaleY:yN,scale:t=>(bN(t)+yN(t))/2,rotateX:t=>PP(af(Math.atan2(t[6],t[5]))),rotateY:t=>PP(af(Math.atan2(-t[2],t[0]))),rotateZ:gN,rotate:gN,skewX:t=>af(Math.atan(t[4])),skewY:t=>af(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function MP(t){return t.includes("scale")?1:0}function BP(t,e){if(!t||t==="none")return MP(e);const i=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(i)n=jde,r=i;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Vde,r=o}if(!r)return MP(e);const s=n[e],a=r[1].split(",").map(Yde);return typeof s=="function"?s(a):a[s]}const Xde=(t,e)=>{const{transform:i="none"}=getComputedStyle(t);return BP(i,e)};function Yde(t){return parseFloat(t.trim())}const Pg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mg=new Set(Pg),xN=t=>t===Dg||t===jt,qde=new Set(["x","y","z"]),Wde=Pg.filter(t=>!qde.has(t));function $de(t){const e=[];return Wde.forEach(i=>{const n=t.getValue(i);n!==void 0&&(e.push([i,n.get()]),n.set(i.startsWith("scale")?1:0))}),e}const hf={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>BP(e,"x"),y:(t,{transform:e})=>BP(e,"y")};hf.translateX=hf.x;hf.translateY=hf.y;const df=new Set;let kP=!1,OP=!1,FP=!1;function UW(){if(OP){const t=Array.from(df).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),i=new Map;e.forEach(n=>{const r=$de(n);r.length&&(i.set(n,r),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=i.get(n);r&&r.forEach(([s,a])=>{n.getValue(s)?.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}OP=!1,kP=!1,df.forEach(t=>t.complete(FP)),df.clear()}function GW(){df.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(OP=!0)})}function Kde(){FP=!0,GW(),UW(),FP=!1}class MO{constructor(e,i,n,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=i,this.name=n,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(df.add(this),kP||(kP=!0,uc.read(GW),uc.resolveKeyframes(UW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:i,element:n,motionValue:r}=this;if(e[0]===null){const s=r?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&i){const o=n.readValue(i,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),r&&s===void 0&&r.set(e[0])}zde(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),df.delete(this)}cancel(){this.state==="scheduled"&&(df.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Qde=t=>t.startsWith("--");function Zde(t,e,i){Qde(e)?t.style.setProperty(e,i):t.style[e]=i}const Jde=yO(()=>window.ScrollTimeline!==void 0),efe={};function tfe(t,e){const i=yO(t);return()=>efe[e]??i()}const HW=tfe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ly=([t,e,i,n])=>`cubic-bezier(${t}, ${e}, ${i}, ${n})`,_N={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ly([0,.65,.55,1]),circOut:Ly([.55,0,1,.45]),backIn:Ly([.31,.01,.66,-.59]),backOut:Ly([.33,1.53,.69,.99])};function zW(t,e){if(t)return typeof t=="function"?HW()?kW(t,e):"ease-out":TW(t)?Ly(t):Array.isArray(t)?t.map(i=>zW(i,e)||_N.easeOut):_N[t]}function ife(t,e,i,{delay:n=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h=void 0){const d={[e]:i};l&&(d.offset=l);const p=zW(o,r);Array.isArray(p)&&(d.easing=p);const g={delay:n,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(g.pseudoElement=h),t.animate(d,g)}function BO(t){return typeof t=="function"&&"applyToOptions"in t}function nfe({type:t,...e}){return BO(t)&&HW()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class rfe extends RO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:i,name:n,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,bO(typeof e.type!="string");const h=nfe(e);this.animation=ife(i,n,r,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=DO(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):Zde(i,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ru(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ru(e)}get time(){return ru(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=sl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:i}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Jde()?(this.animation.timeline=e,wg):i(this)}}const VW={anticipate:bW,backInOut:gW,circInOut:yW};function sfe(t){return t in VW}function afe(t){typeof t.ease=="string"&&sfe(t.ease)&&(t.ease=VW[t.ease])}const vN=10;class ofe extends rfe{constructor(e){afe(e),NW(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:i,onUpdate:n,onComplete:r,element:s,...a}=this.options;if(!i)return;if(e!==void 0){i.set(e);return}const o=new PO({...a,autoplay:!1}),l=sl(this.finishedTime??this.time);i.setWithVelocity(o.sample(l-vN).value,o.sample(l).value,vN),o.stop()}}const TN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Rg.test(t)||t==="0")&&!t.startsWith("url("));function ufe(t){const e=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}function lfe(t,e,i,n){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=TN(r,e),o=TN(s,e);return!a||!o?!1:ufe(t)||(i==="spring"||BO(i))&&n}function IP(t){t.duration=0,t.type="keyframes"}const cfe=new Set(["opacity","clipPath","filter","transform"]),hfe=yO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function dfe(t){const{motionValue:e,name:i,repeatDelay:n,repeatType:r,damping:s,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=e.owner.getProps();return hfe()&&i&&cfe.has(i)&&(i!=="transform"||!h)&&!l&&!n&&r!=="mirror"&&s!==0&&a!=="inertia"}const ffe=40;class pfe extends RO{constructor({autoplay:e=!0,delay:i=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:h,element:d,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=yo.now();const g={autoplay:e,delay:i,type:n,repeat:r,repeatDelay:s,repeatType:a,name:l,motionValue:h,element:d,...p},y=d?.KeyframeResolver||MO;this.keyframeResolver=new y(o,(v,S,T)=>this.onKeyframesResolved(v,S,g,!T),l,h,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,i,n,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:h,onUpdate:d}=n;this.resolvedAt=yo.now(),lfe(e,s,a,o)||((oc.instantAnimations||!l)&&d?.(DO(e,n,i)),e[0]=e[e.length-1],IP(n),n.repeat=0);const g={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>ffe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...n,keyframes:e},y=!h&&dfe(g)?new ofe({...g,element:g.motionValue.owner.current}):new PO(g);y.finished.then(()=>this.notifyFinished()).catch(wg),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,i){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Kde()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}class mfe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,i){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=i}attachTimeline(e){const i=this.animations.map(n=>n.attachTimeline(e));return()=>{i.forEach((n,r)=>{n&&n(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return EN(this.animations,"duration")}get iterationDuration(){return EN(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(i=>i[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function EN(t,e){let i=0;for(let n=0;n<t.length;n++){const r=t[n][e];r!==null&&r>i&&(i=r)}return i}class gfe extends mfe{then(e,i){return this.finished.finally(e).then(()=>{})}}const bfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yfe(t){const e=bfe.exec(t);if(!e)return[,];const[,i,n,r]=e;return[`--${i??n}`,r]}function jW(t,e,i=1){const[n,r]=yfe(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return uW(a)?parseFloat(a):a}return EO(r)?jW(r,e,i+1):r}function XW(t,e){return t?.[e]??t?.default??t}const YW=new Set(["width","height","top","left","right","bottom",...Pg]),xfe={test:t=>t==="auto",parse:t=>t},qW=t=>e=>e.test(t),WW=[Dg,jt,Lm,lh,hde,cde,xfe],SN=t=>WW.find(qW(t));function _fe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lW(t):!0}const vfe=new Set(["brightness","contrast","saturate","opacity"]);function Tfe(t){const[e,i]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=i.match(SO)||[];if(!n)return t;const r=i.replace(n,"");let s=vfe.has(e)?1:0;return n!==i&&(s*=100),e+"("+s+r+")"}const Efe=/\b([a-z-]*)\(.*?\)/gu,LP={...Rg,getAnimatableNone:t=>{const e=t.match(Efe);return e?e.map(Tfe).join(" "):t}},AN={...Dg,transform:Math.round},Sfe={rotate:lh,rotateX:lh,rotateY:lh,rotateZ:lh,scale:P1,scaleX:P1,scaleY:P1,scaleZ:P1,skew:lh,skewX:lh,skewY:lh,distance:jt,translateX:jt,translateY:jt,translateZ:jt,x:jt,y:jt,z:jt,perspective:jt,transformPerspective:jt,opacity:Dx,originX:hN,originY:hN,originZ:jt},kO={borderWidth:jt,borderTopWidth:jt,borderRightWidth:jt,borderBottomWidth:jt,borderLeftWidth:jt,borderRadius:jt,radius:jt,borderTopLeftRadius:jt,borderTopRightRadius:jt,borderBottomRightRadius:jt,borderBottomLeftRadius:jt,width:jt,maxWidth:jt,height:jt,maxHeight:jt,top:jt,right:jt,bottom:jt,left:jt,padding:jt,paddingTop:jt,paddingRight:jt,paddingBottom:jt,paddingLeft:jt,margin:jt,marginTop:jt,marginRight:jt,marginBottom:jt,marginLeft:jt,backgroundPositionX:jt,backgroundPositionY:jt,...Sfe,zIndex:AN,fillOpacity:Dx,strokeOpacity:Dx,numOctaves:AN},Afe={...kO,color:Sr,backgroundColor:Sr,outlineColor:Sr,fill:Sr,stroke:Sr,borderColor:Sr,borderTopColor:Sr,borderRightColor:Sr,borderBottomColor:Sr,borderLeftColor:Sr,filter:LP,WebkitFilter:LP},$W=t=>Afe[t];function KW(t,e){let i=$W(t);return i!==LP&&(i=Rg),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const Cfe=new Set(["auto","none","0"]);function wfe(t,e,i){let n=0,r;for(;n<t.length&&!r;){const s=t[n];typeof s=="string"&&!Cfe.has(s)&&Rx(s).values.length&&(r=t[n]),n++}if(r&&i)for(const s of e)t[s]=KW(i,r)}class Dfe extends MO{constructor(e,i,n,r,s){super(e,i,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:i,name:n}=this;if(!i||!i.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let h=e[l];if(typeof h=="string"&&(h=h.trim(),EO(h))){const d=jW(h,i.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!YW.has(n)||e.length!==2)return;const[r,s]=e,a=SN(r),o=SN(s);if(a!==o)if(xN(a)&&xN(o))for(let l=0;l<e.length;l++){const h=e[l];typeof h=="string"&&(e[l]=parseFloat(h))}else hf[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:i}=this,n=[];for(let r=0;r<e.length;r++)(e[r]===null||_fe(e[r]))&&n.push(r);n.length&&wfe(e,n,i)}measureInitialState(){const{element:e,unresolvedKeyframes:i,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i[0]=this.measuredOrigin;const r=i[i.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:i,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(i);r&&r.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=hf[i](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{e.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function Rfe(t,e,i){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const r=i?.[t]??n.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const QW=(t,e)=>e&&typeof t=="number"?e.transform(t):t,CN=30,Pfe=t=>!isNaN(parseFloat(t));class Mfe{constructor(e,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const r=yo.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){this.current=e,this.updatedAt=yo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Pfe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,i){this.events[e]||(this.events[e]=new cW);const n=this.events[e].add(i);return e==="change"?()=>{n(),uc.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,i){this.passiveEffect=e,this.stopPassiveEffect=i}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,i,n){this.set(i),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,i=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=yo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>CN)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,CN);return hW(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(e){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=e(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mx(t,e){return new Mfe(t,e)}const{schedule:Bfe}=EW(queueMicrotask,!1);function ZW(t){return jhe(t)&&"ownerSVGElement"in t}function kfe(t){return ZW(t)&&t.tagName==="svg"}const Xs=t=>!!(t&&t.getVelocity),Ofe=[...WW,Sr,Rg],Ffe=t=>Ofe.find(qW(t));function OO(t){return typeof t=="object"&&!Array.isArray(t)}function JW(t,e,i,n){return typeof t=="string"&&OO(e)?Rfe(t,i,n):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function Ife(t,e,i){return t*(e+1)}function wN(t,e,i,n){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?i:e.startsWith("<")?Math.max(0,i+parseFloat(e.slice(1))):n.get(e)??t}function Lfe(t,e,i){for(let n=0;n<t.length;n++){const r=t[n];r.at>e&&r.at<i&&(oW(t,r),n--)}}function Nfe(t,e,i,n,r,s){Lfe(t,r,s);for(let a=0;a<e.length;a++)t.push({value:e[a],at:b_(r,s,n[a]),easing:vW(i,a)})}function Ufe(t,e){for(let i=0;i<t.length;i++)t[i]=t[i]/(e+1)}function Gfe(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const Hfe="easeInOut";function zfe(t,{defaultTransition:e={},...i}={},n,r){const s=e.duration||.3,a=new Map,o=new Map,l={},h=new Map;let d=0,p=0,g=0;for(let y=0;y<t.length;y++){const v=t[y];if(typeof v=="string"){h.set(v,p);continue}else if(!Array.isArray(v)){h.set(v.name,wN(p,v.at,d,h));continue}let[S,T,A={}]=v;A.at!==void 0&&(p=wN(p,A.at,d,h));let D=0;const R=(B,z,L,H=0,te=0)=>{const j=Vfe(B),{delay:O=0,times:q=LW(j),type:re="keyframes",repeat:ae,repeatType:fe,repeatDelay:Te=0,...$}=z;let{ease:se=e.ease||"easeOut",duration:we}=z;const _e=typeof O=="function"?O(H,te):O,J=j.length,ie=BO(re)?re:r?.[re||"keyframes"];if(J<=2&&ie){let Ve=100;if(J===2&&Yfe(j)){const pt=j[1]-j[0];Ve=Math.abs(pt)}const Ye={...$};we!==void 0&&(Ye.duration=sl(we));const lt=OW(Ye,Ve,ie);se=lt.ease,we=lt.duration}we??(we=s);const be=p+_e;q.length===1&&q[0]===0&&(q[1]=1);const ee=q.length-j.length;if(ee>0&&IW(q,ee),j.length===1&&j.unshift(null),ae){we=Ife(we,ae);const Ve=[...j],Ye=[...q];se=Array.isArray(se)?[...se]:[se];const lt=[...se];for(let pt=0;pt<ae;pt++){j.push(...Ve);for(let tt=0;tt<Ve.length;tt++)q.push(Ye[tt]+(pt+1)),se.push(tt===0?"linear":vW(lt,tt-1))}Ufe(q,ae)}const Ge=be+we;Nfe(L,j,se,q,be,Ge),D=Math.max(_e+we,D),g=Math.max(Ge,g)};if(Xs(S)){const B=DN(S,o);R(T,A,RN("default",B))}else{const B=JW(S,T,n,l),z=B.length;for(let L=0;L<z;L++){T=T,A=A;const H=B[L],te=DN(H,o);for(const j in T)R(T[j],jfe(A,j),RN(j,te),L,z)}}d=p,p+=D}return o.forEach((y,v)=>{for(const S in y){const T=y[S];T.sort(Gfe);const A=[],D=[],R=[];for(let z=0;z<T.length;z++){const{at:L,value:H,easing:te}=T[z];A.push(H),D.push(_O(0,g,L)),R.push(te||"easeOut")}D[0]!==0&&(D.unshift(0),A.unshift(A[0]),R.unshift(Hfe)),D[D.length-1]!==1&&(D.push(1),A.push(null)),a.has(v)||a.set(v,{keyframes:{},transition:{}});const B=a.get(v);B.keyframes[S]=A,B.transition[S]={...e,duration:g,ease:R,times:D,...i}}}),a}function DN(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function RN(t,e){return e[t]||(e[t]=[]),e[t]}function Vfe(t){return Array.isArray(t)?t:[t]}function jfe(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const Xfe=t=>typeof t=="number",Yfe=t=>t.every(Xfe),Bx=new WeakMap,qfe=t=>Array.isArray(t);function PN(t){const e=[{},{}];return t?.values.forEach((i,n)=>{e[0][n]=i.get(),e[1][n]=i.getVelocity()}),e}function e$(t,e,i,n){if(typeof e=="function"){const[r,s]=PN(n);e=e(i!==void 0?i:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=PN(n);e=e(i!==void 0?i:t.custom,r,s)}return e}function Wfe(t,e,i){const n=t.getProps();return e$(n,e,n.custom,t)}function $fe(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,Mx(i))}function Kfe(t){return qfe(t)?t[t.length-1]||0:t}function Qfe(t,e){const i=Wfe(t,e);let{transitionEnd:n={},transition:r={},...s}=i||{};s={...s,...n};for(const a in s){const o=Kfe(s[a]);$fe(t,a,o)}}function Zfe(t){return!!(Xs(t)&&t.add)}function Jfe(t,e){const i=t.getValue("willChange");if(Zfe(i))return i.add(e);if(!i&&oc.WillChange){const n=new oc.WillChange("auto");t.addValue("willChange",n),n.add(e)}}const FO=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),epe="framerAppearId",tpe="data-"+FO(epe);function ipe(t){return t.props[tpe]}const npe=t=>t!==null;function rpe(t,{repeat:e,repeatType:i="loop"},n){const r=t.filter(npe),s=e&&i!=="loop"&&e%2===1?0:r.length-1;return r[s]}const spe={type:"spring",stiffness:500,damping:25,restSpeed:10},ape=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ope={type:"keyframes",duration:.8},upe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lpe=(t,{keyframes:e})=>e.length>2?ope:Mg.has(t)?t.startsWith("scale")?ape(e[1]):spe:upe;function cpe({when:t,delay:e,delayChildren:i,staggerChildren:n,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...d}){return!!Object.keys(d).length}const t$=(t,e,i,n={},r,s)=>a=>{const o=XW(n,t)||{},l=o.delay||n.delay||0;let{elapsed:h=0}=n;h=h-sl(l);const d={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-h,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};cpe(o)||Object.assign(d,lpe(t,d)),d.duration&&(d.duration=sl(d.duration)),d.repeatDelay&&(d.repeatDelay=sl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(IP(d),d.delay===0&&(p=!0)),(oc.instantAnimations||oc.skipAnimations)&&(p=!0,IP(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,p&&!s&&e.get()!==void 0){const g=rpe(d.keyframes,o);if(g!==void 0){uc.update(()=>{d.onUpdate(g),d.onComplete()});return}}return o.isSync?new PO(d):new pfe(d)};function hpe({protectedKeys:t,needsAnimating:e},i){const n=t.hasOwnProperty(i)&&e[i]!==!0;return e[i]=!1,n}function dpe(t,e,{delay:i=0,transitionOverride:n,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...o}=e;n&&(s=n);const l=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in o){const p=t.getValue(d,t.latestValues[d]??null),g=o[d];if(g===void 0||h&&hpe(h,d))continue;const y={delay:i,...XW(s||{},d)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===v&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const A=ipe(t);if(A){const D=window.MotionHandoffAnimation(A,d,uc);D!==null&&(y.startTime=D,S=!0)}}Jfe(t,d),p.start(t$(d,p,g,t.shouldReduceMotion&&YW.has(d)?{type:!1}:y,t,S));const T=p.animation;T&&l.push(T)}return a&&Promise.all(l).then(()=>{uc.update(()=>{a&&Qfe(t,a)})}),l}function fpe({top:t,left:e,right:i,bottom:n}){return{x:{min:e,max:i},y:{min:t,max:n}}}function ppe(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:n.y,right:n.x}}function mpe(t,e){return fpe(ppe(t.getBoundingClientRect(),e))}const MN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},NP={};for(const t in MN)NP[t]={isEnabled:e=>MN[t].some(i=>!!e[i])};const BN=()=>({min:0,max:0}),IO=()=>({x:BN(),y:BN()}),gpe=typeof window<"u",UP={current:null},i$={current:!1};function bpe(){if(i$.current=!0,!!gpe)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>UP.current=t.matches;t.addEventListener("change",e),e()}else UP.current=!1}function ype(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function xpe(t){return typeof t=="string"||Array.isArray(t)}const _pe=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vpe=["initial",..._pe];function n$(t){return ype(t.animate)||vpe.some(e=>xpe(t[e]))}function Tpe(t){return!!(n$(t)||t.variants)}function Epe(t,e,i){for(const n in e){const r=e[n],s=i[n];if(Xs(r))t.addValue(n,r);else if(Xs(s))t.addValue(n,Mx(r,{owner:t}));else if(s!==r)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(n);t.addValue(n,Mx(a!==void 0?a:r,{owner:t}))}}for(const n in i)e[n]===void 0&&t.removeValue(n);return e}const kN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class r${scrapeMotionValuesFromProps(e,i,n){return{}}constructor({parent:e,props:i,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=MO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=yo.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,uc.render(this.render,!1,!0))};const{latestValues:l,renderState:h}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=i.initial?{...l}:{},this.renderState=h,this.parent=e,this.props=i,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=n$(i),this.isVariantNode=Tpe(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(i,{},this);for(const g in p){const y=p[g];l[g]!==void 0&&Xs(y)&&y.set(l[g])}}mount(e){this.current=e,Bx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,n)=>this.bindToMotionValue(n,i)),i$.current||bpe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:UP.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),SP(this.notifyUpdate),SP(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,i){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Mg.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=i.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&uc.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,i)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),i.owner&&i.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in NP){const i=NP[e];if(!i)continue;const{isEnabled:n,Feature:r}=i;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):IO()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,i){this.latestValues[e]=i}update(e,i){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let n=0;n<kN.length;n++){const r=kN[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=Epe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(e),()=>i.variantChildren.delete(e)}addValue(e,i){const n=this.values.get(e);i!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,i),this.values.set(e,i),this.latestValues[e]=i.get())}removeValue(e){this.values.delete(e);const i=this.valueSubscriptions.get(e);i&&(i(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,i){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&i!==void 0&&(n=Mx(i===null?void 0:i,{owner:this}),this.addValue(e,n)),n}readValue(e,i){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(uW(n)||lW(n))?n=parseFloat(n):!Ffe(n)&&Rg.test(i)&&(n=KW(e,i)),this.setBaseTarget(e,Xs(n)?n.get():n)),Xs(n)?n.get():n}setBaseTarget(e,i){this.baseTarget[e]=i}getBaseTarget(e){const{initial:i}=this.props;let n;if(typeof i=="string"||typeof i=="object"){const s=e$(this.props,i,this.presenceContext?.custom);s&&(n=s[e])}if(i&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Xs(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,i){return this.events[e]||(this.events[e]=new cW),this.events[e].add(i)}notify(e,...i){this.events[e]&&this.events[e].notify(...i)}scheduleRenderMicrotask(){Bfe.render(this.render)}}class s$ extends r${constructor(){super(...arguments),this.KeyframeResolver=Dfe}sortInstanceNodePosition(e,i){return e.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(e,i){return e.style?e.style[i]:void 0}removeValueFromRenderState(e,{vars:i,style:n}){delete i[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xs(e)&&(this.childSubscription=e.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}const Spe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ape=Pg.length;function Cpe(t,e,i){let n="",r=!0;for(let s=0;s<Ape;s++){const a=Pg[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||i){const h=QW(o,kO[a]);if(!l){r=!1;const d=Spe[a]||a;n+=`${d}(${h}) `}i&&(e[a]=h)}}return n=n.trim(),i?n=i(e,r?"":n):r&&(n="none"),n}function a$(t,e,i){const{style:n,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const h=e[l];if(Mg.has(l)){a=!0;continue}else if(AW(l)){r[l]=h;continue}else{const d=QW(h,kO[l]);l.startsWith("origin")?(o=!0,s[l]=d):n[l]=d}}if(e.transform||(a||i?n.transform=Cpe(e,t.transform,i):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:d=0}=s;n.transformOrigin=`${l} ${h} ${d}`}}function o$(t,{style:e,vars:i},n,r){const s=t.style;let a;for(a in e)s[a]=e[a];r?.applyProjectionStyles(s,n);for(a in i)s.setProperty(a,i[a])}const wpe={};function Dpe(t,{layout:e,layoutId:i}){return Mg.has(t)||t.startsWith("origin")||(e||i!==void 0)&&(!!wpe[t]||t==="opacity")}function u$(t,e,i){const{style:n}=t,r={};for(const s in n)(Xs(n[s])||e.style&&Xs(e.style[s])||Dpe(s,t)||i?.getValue(s)?.liveStyle!==void 0)&&(r[s]=n[s]);return r}function Rpe(t){return window.getComputedStyle(t)}class Ppe extends s${constructor(){super(...arguments),this.type="html",this.renderInstance=o$}readValueFromInstance(e,i){if(Mg.has(i))return this.projection?.isProjecting?MP(i):Xde(e,i);{const n=Rpe(e),r=(AW(i)?n.getPropertyValue(i):n[i])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:i}){return mpe(e,i)}build(e,i,n){a$(e,i,n.transformTemplate)}scrapeMotionValuesFromProps(e,i,n){return u$(e,i,n)}}function Mpe(t,e){return t in e}class Bpe extends r${constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,i){if(Mpe(i,e)){const n=e[i];if(typeof n=="string"||typeof n=="number")return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,i){delete i.output[e]}measureInstanceViewportBox(){return IO()}build(e,i){Object.assign(e.output,i)}renderInstance(e,{output:i}){Object.assign(e,i)}sortInstanceNodePosition(){return 0}}const kpe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ope={offset:"strokeDashoffset",array:"strokeDasharray"};function Fpe(t,e,i=1,n=0,r=!0){t.pathLength=1;const s=r?kpe:Ope;t[s.offset]=jt.transform(-n);const a=jt.transform(e),o=jt.transform(i);t[s.array]=`${a} ${o}`}function Ipe(t,{attrX:e,attrY:i,attrScale:n,pathLength:r,pathSpacing:s=1,pathOffset:a=0,...o},l,h,d){if(a$(t,o,h),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g}=t;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=d?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),i!==void 0&&(p.y=i),n!==void 0&&(p.scale=n),r!==void 0&&Fpe(p,r,s,a,!1)}const l$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Lpe=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Npe(t,e,i,n){o$(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(l$.has(r)?r:FO(r),e.attrs[r])}function Upe(t,e,i){const n=u$(t,e,i);for(const r in t)if(Xs(t[r])||Xs(e[r])){const s=Pg.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}class Gpe extends s${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=IO}getBaseTargetFromProps(e,i){return e[i]}readValueFromInstance(e,i){if(Mg.has(i)){const n=$W(i);return n&&n.default||0}return i=l$.has(i)?i:FO(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,i,n){return Upe(e,i,n)}build(e,i,n){Ipe(e,i,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,i,n,r){Npe(e,i,n,r)}mount(e){this.isSVGTag=Lpe(e.tagName),super.mount(e)}}function Hpe(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},i=ZW(t)&&!kfe(t)?new Gpe(e):new Ppe(e);i.mount(t),Bx.set(t,i)}function zpe(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},i=new Bpe(e);i.mount(t),Bx.set(t,i)}function Vpe(t,e,i){const n=Xs(t)?t:Mx(t);return n.start(t$("",n,e,i)),n.animation}function jpe(t,e){return Xs(t)||typeof t=="number"||typeof t=="string"&&!OO(e)}function c$(t,e,i,n){const r=[];if(jpe(t,e))r.push(Vpe(t,OO(e)&&e.default||e,i&&(i.default||i)));else{const s=JW(t,e,n),a=s.length;for(let o=0;o<a;o++){const l=s[o],h=l instanceof Element?Hpe:zpe;Bx.has(l)||h(l);const d=Bx.get(l),p={...i};"delay"in p&&typeof p.delay=="function"&&(p.delay=p.delay(o,a)),r.push(...dpe(d,{...e,transition:p},{}))}}return r}function Xpe(t,e,i){const n=[];return zfe(t,e,i,{spring:Px}).forEach(({keyframes:s,transition:a},o)=>{n.push(...c$(o,s,a))}),n}function Ype(t){return Array.isArray(t)&&t.some(Array.isArray)}function qpe(t){function e(i,n,r){let s=[],a;if(Ype(i))s=Xpe(i,n,t);else{const{onComplete:l,...h}=r||{};typeof l=="function"&&(a=l),s=c$(i,n,h,t)}const o=new gfe(s);return a&&o.finished.then(a),o}return e}const ON=qpe();var Wpe=JE((t,e)=>{e.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/ace+json":{source:"iana",compressible:!0},"application/ace-groupcomm+cbor":{source:"iana"},"application/ace-trl+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/aif+cbor":{source:"iana"},"application/aif+json":{source:"iana",compressible:!0},"application/alto-cdni+json":{source:"iana",compressible:!0},"application/alto-cdnifilter+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-propmap+json":{source:"iana",compressible:!0},"application/alto-propmapparams+json":{source:"iana",compressible:!0},"application/alto-tips+json":{source:"iana",compressible:!0},"application/alto-tipsparams+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/appinstaller":{compressible:!1,extensions:["appinstaller"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/appx":{compressible:!1,extensions:["appx"]},"application/appxbundle":{compressible:!1,extensions:["appxbundle"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/automationml-aml+xml":{source:"iana",compressible:!0,extensions:["aml"]},"application/automationml-amlx+zip":{source:"iana",compressible:!1,extensions:["amlx"]},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/bufr":{source:"iana"},"application/c2pa":{source:"iana"},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/ce+cbor":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/cid-edhoc+cbor-seq":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/city+json-seq":{source:"iana"},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-eap":{source:"iana"},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/concise-problem-details+cbor":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cose-x509":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwl":{source:"iana",extensions:["cwl"]},"application/cwl+json":{source:"iana",compressible:!0},"application/cwl+yaml":{source:"iana"},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana",extensions:["dcm"]},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dpop+jwt":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/eat+cwt":{source:"iana"},"application/eat+jwt":{source:"iana"},"application/eat-bun+cbor":{source:"iana"},"application/eat-bun+json":{source:"iana",compressible:!0},"application/eat-ucs+cbor":{source:"iana"},"application/eat-ucs+json":{source:"iana",compressible:!0},"application/ecmascript":{source:"apache",compressible:!0,extensions:["ecma"]},"application/edhoc+cbor-seq":{source:"iana"},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.legacyesn+json":{source:"iana",compressible:!0},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/entity-statement+jwt":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdf":{source:"iana",extensions:["fdf"]},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geopose+json":{source:"iana",compressible:!0},"application/geoxacml+json":{source:"iana",compressible:!0},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gnap-binding-jws":{source:"iana"},"application/gnap-binding-jwsd":{source:"iana"},"application/gnap-binding-rotation-jws":{source:"iana"},"application/gnap-binding-rotation-jwsd":{source:"iana"},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/grib":{source:"iana"},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"iana",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"apache",charset:"UTF-8",compressible:!0,extensions:["js"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/jscontact+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jsonpath":{source:"iana"},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwk-set+jwt":{source:"iana"},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/linkset":{source:"iana"},"application/linkset+json":{source:"iana",compressible:!0},"application/load-control+xml":{source:"iana",compressible:!0},"application/logout+jwt":{source:"iana"},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4","mpg4","mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msix":{compressible:!1,extensions:["msix"]},"application/msixbundle":{compressible:!1,extensions:["msixbundle"]},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!0,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/ohttp-keys":{source:"iana"},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg","one","onea"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["sig","asc"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/private-token-issuer-directory":{source:"iana"},"application/private-token-request":{source:"iana"},"application/private-token-response":{source:"iana"},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/provided-claims+jwt":{source:"iana"},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.implied-document+xml":{source:"iana",compressible:!0},"application/prs.implied-executable":{source:"iana"},"application/prs.implied-object+json":{source:"iana",compressible:!0},"application/prs.implied-object+json-seq":{source:"iana"},"application/prs.implied-object+yaml":{source:"iana"},"application/prs.implied-structure":{source:"iana"},"application/prs.mayfile":{source:"iana"},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.vcfbzip2":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0,extensions:["xsf"]},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"apache"},"application/reputon+json":{source:"iana",compressible:!0},"application/resolve-response+jwt":{source:"iana"},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-checklist":{source:"iana"},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-signed-tal":{source:"iana"},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"apache"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana",extensions:["sql"]},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/sslkeylogfile":{source:"iana"},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/st2110-41":{source:"iana"},"application/stix+json":{source:"iana",compressible:!0},"application/stratum":{source:"iana"},"application/swid+cbor":{source:"iana"},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tm+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/toc+cbor":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{source:"iana",compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/trust-chain+json":{source:"iana",compressible:!0},"application/trust-mark+jwt":{source:"iana"},"application/trust-mark-delegation+jwt":{source:"iana"},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/uccs+cbor":{source:"iana"},"application/ujcs+json":{source:"iana",compressible:!0},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vc":{source:"iana"},"application/vc+cose":{source:"iana"},"application/vc+jwt":{source:"iana"},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.1ob":{source:"iana"},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3a+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ach+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc8+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.5gsa2x":{source:"iana"},"application/vnd.3gpp.5gsa2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gsv2x":{source:"iana"},"application/vnd.3gpp.5gsv2x-local-service-information":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.crs+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.current-location-discovery+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-msgstore-ctrl-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.pinapp-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.seal-group-doc+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-network-qos-management-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-ue-config-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-unicast-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.seal-user-profile-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.v2x":{source:"iana"},"application/vnd.3gpp.vae-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acm.addressxfer+json":{source:"iana",compressible:!0},"application/vnd.acm.chatbot+json":{source:"iana",compressible:!0},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"apache",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"apache"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.parquet":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.apexlang":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"apache"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autodesk.fbx":{extensions:["fbx"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.belightsoft.lhzd+zip":{source:"iana",compressible:!1},"application/vnd.belightsoft.lhzl+zip":{source:"iana",compressible:!1},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.bzip3":{source:"iana"},"application/vnd.c3voc.schedule+xml":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.cncf.helm.chart.content.v1.tar+gzip":{source:"iana"},"application/vnd.cncf.helm.chart.provenance.v1.prov":{source:"iana"},"application/vnd.cncf.helm.config.v1+json":{source:"iana",compressible:!0},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datalog":{source:"iana"},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.dcmp+xml":{source:"iana",compressible:!0,extensions:["dcmp"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.eln+zip":{source:"iana",compressible:!1},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.erofs":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"apache",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.fdsn.stationxml+xml":{source:"iana",charset:"XML-BASED",compressible:!0},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.freelog.comic":{source:"iana"},"application/vnd.frogans.fnc":{source:"apache",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"apache",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.ga4gh.passport+jwt":{source:"iana"},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.genozip":{source:"iana"},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.gentoo.catmetadata+xml":{source:"iana",compressible:!0},"application/vnd.gentoo.ebuild":{source:"iana"},"application/vnd.gentoo.eclass":{source:"iana"},"application/vnd.gentoo.gpkg":{source:"iana"},"application/vnd.gentoo.manifest":{source:"iana"},"application/vnd.gentoo.pkgmetadata+xml":{source:"iana",compressible:!0},"application/vnd.gentoo.xpak":{source:"iana"},"application/vnd.geo+json":{source:"apache",compressible:!0},"application/vnd.geocube+xml":{source:"apache",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.pinboard":{source:"iana"},"application/vnd.geogebra.slides":{source:"iana",extensions:["ggs"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.gnu.taler.exchange+json":{source:"iana",compressible:!0},"application/vnd.gnu.taler.merchant+json":{source:"iana",compressible:!0},"application/vnd.google-apps.audio":{},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.drawing":{compressible:!1,extensions:["gdraw"]},"application/vnd.google-apps.drive-sdk":{compressible:!1},"application/vnd.google-apps.file":{},"application/vnd.google-apps.folder":{compressible:!1},"application/vnd.google-apps.form":{compressible:!1,extensions:["gform"]},"application/vnd.google-apps.fusiontable":{},"application/vnd.google-apps.jam":{compressible:!1,extensions:["gjam"]},"application/vnd.google-apps.mail-layout":{},"application/vnd.google-apps.map":{compressible:!1,extensions:["gmap"]},"application/vnd.google-apps.photo":{},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.script":{compressible:!1,extensions:["gscript"]},"application/vnd.google-apps.shortcut":{},"application/vnd.google-apps.site":{compressible:!1,extensions:["gsite"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-apps.unknown":{},"application/vnd.google-apps.video":{},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"apache",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0,extensions:["xdcf"]},"application/vnd.gpxsee.map+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.hsl":{source:"iana"},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"apache"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"apache",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"apache"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.ipfs.ipns-record":{source:"iana"},"application/vnd.ipld.car":{source:"iana"},"application/vnd.ipld.dag-cbor":{source:"iana"},"application/vnd.ipld.dag-json":{source:"iana"},"application/vnd.ipld.raw":{source:"iana"},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kdl":{source:"iana"},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.keyman.kmp+zip":{source:"iana",compressible:!1},"application/vnd.keyman.kmx":{source:"iana"},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.ldev.productlicensing":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.mdl":{source:"iana"},"application/vnd.mdl-mbsdf":{source:"iana"},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.medicalholodeck.recordxr":{source:"iana"},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mermaid":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.modl":{source:"iana"},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-visio.viewer":{extensions:["vdx"]},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msgpack":{source:"iana"},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.nato.bindingdataobject+cbor":{source:"iana"},"application/vnd.nato.bindingdataobject+json":{source:"iana",compressible:!0},"application/vnd.nato.bindingdataobject+xml":{source:"iana",compressible:!0,extensions:["bdo"]},"application/vnd.nato.openxmlformats-package.iepd+zip":{source:"iana",compressible:!1},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"apache",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oai.workflows":{source:"iana"},"application/vnd.oai.workflows+json":{source:"iana",compressible:!0},"application/vnd.oai.workflows+yaml":{source:"iana"},"application/vnd.oasis.opendocument.base":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"apache",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-master-template":{source:"iana"},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.onvif.metadata":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openvpi.dspx+json":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.procrate.brushset":{extensions:["brushset"]},"application/vnd.procreate.brush":{extensions:["brush"]},"application/vnd.procreate.dream":{extensions:["drm"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.pt.mundusmundi":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0,extensions:["xhtm"]},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.relpipe":{source:"iana"},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.sketchometry":{source:"iana"},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.smintio.portals.archive":{source:"iana"},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sybyl.mol2":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uic.osdm+json":{source:"iana",compressible:!0},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml","uo"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.veraison.tsm-report+cbor":{source:"iana"},"application/vnd.veraison.tsm-report+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw","vsdx","vtx"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vocalshaper.vsp4":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.wasmflow.wafl":{source:"iana"},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordlift":{source:"iana"},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xarin.cpj":{source:"iana"},"application/vnd.xecrets-encrypted":{source:"iana"},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/voucher-jws+json":{source:"iana",compressible:!0},"application/vp":{source:"iana"},"application/vp+cose":{source:"iana"},"application/vp+jwt":{source:"iana"},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blender":{extensions:["blend"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-compressed":{extensions:["rar"]},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-ipynb+json":{compressible:!0,extensions:["ipynb"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zip-compressed":{extensions:["zip"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xfdf":{source:"iana",extensions:["xfdf"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yaml":{source:"iana"},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+cbor":{source:"iana"},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yang-sid+json":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zip+dotlottie":{extensions:["lottie"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana",extensions:["adts","aac"]},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flac":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/matroska":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/midi-clip":{source:"iana"},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a","m4b"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"apache"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{source:"iana",compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp","dib"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/dpx":{source:"iana",extensions:["dpx"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/j2c":{source:"iana"},"image/jaii":{source:"iana",extensions:["jaii"]},"image/jais":{source:"iana",extensions:["jais"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpg","jpeg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm","jpgm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxl":{source:"iana",extensions:["jxl"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1,extensions:["jfif"]},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif","btf"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.clip":{source:"iana"},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"iana",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-adobe-dng":{extensions:["dng"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-emf":{source:"iana"},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-wmf":{source:"iana"},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/bhttp":{source:"iana"},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/mls":{source:"iana"},"message/news":{source:"apache"},"message/ohttp-req":{source:"iana"},"message/ohttp-res":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime","mht","mhtml"]},"message/s-http":{source:"apache"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"apache"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/jt":{source:"iana",extensions:["jt"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/prc":{source:"iana",extensions:["prc"]},"model/step":{source:"iana",extensions:["step","stp","stpnc","p21","210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/u3d":{source:"iana",extensions:["u3d"]},"model/vnd.bary":{source:"iana",extensions:["bary"]},"model/vnd.cld":{source:"iana",extensions:["cld"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana",extensions:["pyo","pyox"]},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usda":{source:"iana",extensions:["usda"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"apache"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/hl7v2":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["md","markdown"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/prs.texi":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.exchangeable":{source:"iana"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"apache"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.vcf":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vnd.zoo.kcl":{source:"iana"},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/wgsl":{source:"iana",extensions:["wgsl"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/evc":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/h266":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/lottie+json":{source:"iana",compressible:!0},"video/matroska":{source:"iana"},"video/matroska-3d":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts","m2t","m2ts","mts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.planar":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"apache"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}}),$pe=JE((t,e)=>{e.exports=Wpe()}),M1="repeat",tc="__game_layer__",TE="Container",GP="ImageContainer",h$="Image",EE="Sprite",SE="Text",d$="Video",Kpe=vB(s9()),Qpe={extension:{type:"sceneProperties",name:"additional-positions"},testNode(t){return t instanceof Co||t instanceof ig||t instanceof fl},testProp(t){switch(t){case"xAlign":case"yAlign":case"percentageX":case"percentageY":case"positionType":return!0;default:return!1}},setProperty(t,e,i){if(t instanceof Co||t instanceof ig||t instanceof fl)switch(e){case"xAlign":t.xAlign=i/100;break;case"yAlign":t.yAlign=i/100;break;case"percentageX":t.percentageX=i/100;break;case"percentageY":t.percentageY=i/100;break}},getProperties(t){return[{value:t.positionType,prop:"positionType",entry:{section:"Transform",type:"text",label:"Position Type"}},{value:t.xAlign*100,prop:"xAlign",entry:{section:"Transform",type:"range",label:"X Align",tooltip:"0% is left, 100% is right",options:{min:0,max:100}}},{value:t.yAlign*100,prop:"yAlign",entry:{section:"Transform",type:"range",label:"Y Align",tooltip:"0% is top, 100% is bottom",options:{min:0,max:100}}},{value:t.percentageX*100,prop:"percentageX",entry:{section:"Transform",type:"range",label:"X Percentage Position",tooltip:"0% is left, 100% is right",options:{min:0,max:100}}},{value:t.percentageY*100,prop:"percentageY",entry:{section:"Transform",type:"range",label:"Y Percentage Position",tooltip:"0% is top, 100% is bottom",options:{min:0,max:100}}}]}},Zpe=Qpe;function Jpe(t,e){let i=0;return async(...n)=>{let r=Date.now();if(r-i>=e)return i=r,await t(...n)}}var iu=class At{constructor(){}static get app(){if(!At._app)throw ke.error("The canvas is not initialized"),new Error("[Pixi’VN] CanvasManagerStatic.app is undefined");return At._app}static get gameLayer(){let e=this.app.stage.getChildByLabel(tc);return e||(e=new Qi,e.label=tc,this.app.stage.addChild(e)),e}static async init(e,i,n,r,s){return At.canvasWidth=i,At.canvasHeight=n,At._app=new Iq,At.app.init({resolution:window.devicePixelRatio||1,autoDensity:!0,width:i,height:n,...r}).then(()=>{let{app:a=At.app,extensions:o=[],...l}=s||{};zhe({app:a,extensions:[Zpe,...o],...l}),At._isInitialized=!0,At.addCanvasIntoHTMLElement(e),window.addEventListener("resize",At.resize),At.resize(),At.gameLayer})}static addCanvasIntoHTMLElement(e){At._isInitialized?e.appendChild(At.app.canvas):ke.error("GameWindowManager is not initialized")}static addHtmlLayer(e,i,n={position:"absolute",pointerEvents:"none"}){let r=document.createElement("div");r.setAttribute("id",e),r.style.position=n.position,r.style.pointerEvents=n.pointerEvents;let s=i.appendChild(r);return At.htmlLayers.push(r),At.resize(),s}static removeHtmlLayer(e){let i=At.htmlLayers.find(n=>n.id===e);i&&(i.remove(),At.htmlLayers=At.htmlLayers.filter(n=>n.id!==e))}static getHtmlLayer(e){return At.htmlLayers.find(i=>i.id===e)}static get screenScale(){let e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return Math.min(e/At.canvasWidth,i/At.canvasHeight)}static get screenWidth(){return Math.floor(At.screenScale*At.canvasWidth)}static get screenHeight(){return Math.floor(At.screenScale*At.canvasHeight)}static get horizontalMargin(){return(Math.max(document.documentElement.clientWidth,window.innerWidth||0)-At.screenWidth)/2}static get verticalMargin(){return(Math.max(document.documentElement.clientHeight,window.innerHeight||0)-At.screenHeight)/2}static async resize(){await Jpe(async()=>{if(At._isInitialized){let i=At.app.canvas.style;i.width=`${At.screenWidth}px`,i.height=`${At.screenHeight}px`,i.marginLeft=`${At.horizontalMargin}px`,i.marginRight=`${At.horizontalMargin}px`,i.marginTop=`${At.verticalMargin}px`,i.marginBottom=`${At.verticalMargin}px`}let e=At.htmlLayers.map(i=>{i.style.width=`${At.screenWidth}px`,i.style.height=`${At.screenHeight}px`,i.style.marginLeft=`${At.horizontalMargin}px`,i.style.marginRight=`${At.horizontalMargin}px`,i.style.marginTop=`${At.verticalMargin}px`,i.style.marginBottom=`${At.verticalMargin}px`});await Promise.all(e)},10)()}static get childrenAliasesOrder(){return At.gameLayer.children.filter(e=>e.label).sort((e,i)=>At.gameLayer.getChildIndex(e)-At.gameLayer.getChildIndex(i)).map(e=>e.label)}static get currentTickersWithoutCreatedBySteps(){return Object.fromEntries(Object.entries(At._currentTickers).filter(([e,i])=>!i.createdByTicketSteps).map(([e,i])=>[e,{id:i.ticker.id,args:i.ticker.args,canvasElementAliases:i.ticker.canvasElementAliases,priority:i.ticker.priority,duration:i.ticker.duration,paused:i.ticker.paused}]))}static generateTickerId(e){try{return(0,Kpe.default)(JSON.stringify(e)).toString()+"_"+Math.random().toString(36).substring(7)}catch(i){throw new Error(`[Pixi’VN] Error to generate ticker id: ${i}`)}}static addTickerTimeoutInfo(e,i,n,r){typeof e=="string"&&(e=[e]),At._currentTickersTimeouts[n]={aliases:e,ticker:i,canBeDeletedBeforeEnd:r}}static removeTickerTimeoutInfo(e){typeof e!="string"&&(e=e.toString()),At._currentTickersTimeouts[e]&&delete At._currentTickersTimeouts[e]}static removeTickerTimeout(e){typeof e!="string"&&(e=e.toString()),clearTimeout(Number(e)),At.removeTickerTimeoutInfo(e)}static removeTickerTimeoutsByAlias(e,i){Object.entries(At._currentTickersTimeouts).forEach(([n,r])=>{let s=r.aliases.filter(a=>a!==e);if(s.length===0){let a=r.canBeDeletedBeforeEnd;(!i||a)&&At.removeTickerTimeout(n)}else At._currentTickersTimeouts[n].aliases=s})}};Ne(iu,"_app"),Ne(iu,"htmlLayers",[]),Ne(iu,"canvasWidth",300),Ne(iu,"canvasHeight",300),Ne(iu,"_isInitialized",!1),Ne(iu,"_currentTickers",{}),Ne(iu,"_currentTickersSequence",{}),Ne(iu,"_currentTickersTimeouts",{}),Ne(iu,"_tickersToCompleteOnStepEnd",{tikersIds:[],stepAlias:[]}),Ne(iu,"_tickersOnPause",{});var He=iu,am=new ac({cacheSize:5}),HP;(t=>{function e(a,o){o||(o=a.name),am.get(o)&&ke.warn(`CanvasElement "${o}" already registered`),a.prototype.pixivnId=o,am.set(o,a)}t.add=e;function i(a){try{let o=am.get(a);if(!o){ke.error(`CanvasElement "${a}" not found, did you forget to register it with the canvasComponentDecorator?`);return}return new o,o}catch(o){ke.error(`Error while getting CanvasElement "${a}"`,o);return}}t.get=i;function n(){return Array.from(am.values())}t.values=n;function r(a){return am.has(a)}t.has=r;function s(){return Array.from(am.keys())}t.keys=s})(HP||(HP={}));var Nf=HP,Ld=new ac({cacheSize:5}),zP;(t=>{function e(o,l){l||(l=o.name),Ld.get(l)&&ke.info(`Event "${l}" already exists, it will be overwritten`),o.prototype.id=l,Ld.set(l,o)}t.add=e;function i(o){try{let l=Ld.get(o);if(!l){ke.error(`Event "${o}" not found, did you forget to register it with the eventDecorator?`);return}return new l,l}catch(l){ke.error(`Error while getting Event "${o}"`,l);return}}t.get=i;function n(o){try{let l=Ld.get(o);if(!l){ke.error(`Event "${o}" not found, did you forget to register it with the eventDecorator?`);return}return new l}catch(l){ke.error(`Error while getting Event "${o}"`,l);return}}t.getInstance=n;function r(){return Array.from(Ld.values())}t.values=r;function s(o){return Ld.has(o)}t.has=s;function a(){return Array.from(Ld.keys())}t.keys=a})(zP||(zP={}));var y_=zP;async function f$(t){let e=eme(t.pixivnId);if(e)await e.setMemory(t);else throw new Error("[Pixi’VN] The element "+t.pixivnId+" could not be created");return e}function eme(t){try{let e=Nf.get(t);return e?new e:void 0}catch(e){ke.error(`Error while getting CanvasElement ${t}`,e);return}}function p$(t){return"memory"in t?t.memory:t instanceof gO?m$(t):t instanceof Eo?LO(t):x_(t)}function tme(t){return{width:t.width,height:t.height,isRenderGroup:t.isRenderGroup,blendMode:t.blendMode,tint:t.tint,alpha:t.alpha,angle:t.angle,renderable:t.renderable,rotation:t.rotation,scale:{x:t.scale.x,y:t.scale.y},pivot:{x:t.pivot.x,y:t.pivot.y},position:{x:t.position.x,y:t.position.y},skew:{x:t.skew.x,y:t.skew.y},visible:t.visible,x:t.x,y:t.y,boundsArea:t.boundsArea,cursor:t.cursor,eventMode:t.eventMode,interactive:t.interactive,interactiveChildren:t.interactiveChildren,hitArea:t.hitArea}}function FN(t,e){return{url:t.source.label,alias:e===t.source.label?void 0:e}}function x_(t,e){let i=ime(t,TE),n=e?.childrenExport?t.children.sort((r,s)=>t.getChildIndex(r)-t.getChildIndex(s)).map(r=>p$(r)):[];return{pixivnId:i,elements:n,...tme(t)}}function LO(t){let e=x_(t),i=e.pixivnId??EE,n=g$(t),r="textureAlias"in t?FN(t.texture,t.textureAlias):FN(t.texture);return{...e,pixivnId:i,textureData:r,anchor:{x:t.anchor.x,y:t.anchor.y},roundPixels:t.roundPixels,onEvents:n}}function m$(t){let e=x_(t),i=e.pixivnId??SE,n=g$(t);return{...e,pixivnId:i,anchor:{x:t.anchor.x,y:t.anchor.y},text:t.text,resolution:t.resolution,style:ame(t.style),roundPixels:t.roundPixels,onEvents:n}}function ime(t,e){return Object.prototype.hasOwnProperty.call(t,"pixivnId")?t.pixivnId:e}function g$(t){return"onEvents"in t?t.onEvents:{}}function AE(t){switch(t.type){case"linear":return{type:"linear",colorStops:t.colorStops,end:{x:t.end.x,y:t.end.y},start:{x:t.start.x,y:t.start.y},textureSpace:t.textureSpace,wrapMode:t.texture.source.wrapMode,textureSize:t.texture.source.width/t.texture.source.height};case"radial":return{type:"radial",colorStops:t.colorStops,textureSpace:t.textureSpace,center:{x:t.center.x,y:t.center.y},innerRadius:t.innerRadius,outerCenter:{x:t.outerCenter.x,y:t.outerCenter.y},outerRadius:t.outerRadius,rotation:t.rotation,scale:t.scale,wrapMode:t.texture.source.wrapMode,textureSize:t.texture.source.width/t.texture.source.height}}}function nme(t){if(t!=null){{if(typeof t=="number"||typeof t=="string"||Array.isArray(t))return t;if(t instanceof So)return AE(t);if(typeof t=="object"&&"fill"in t&&typeof t.fill!="function"&&t.fill&&!(t.fill instanceof Lf))return AE(t.fill)}ke.warn("Unsupported property type for Text.style.fill.",t)}}function rme(t){if(typeof t=="number"||typeof t=="string"||Array.isArray(t))return t;if(t instanceof An)return t.toNumber();ke.warn("Unsupported color type.",t)}function sme(t){if(t!=null){{if(typeof t=="number"||typeof t=="string"||Array.isArray(t))return t;if(t instanceof So)return AE(t);if(typeof t=="object"&&"alignment"in t)return{alignment:t.alignment,alpha:t.alpha,color:rme(t.color),join:t.join,miterLimit:t.miterLimit,width:t.width,cap:t.cap,pixelLine:t.pixelLine,textureSpace:t.textureSpace};if(typeof t=="object"&&"fill"in t&&typeof t.fill!="function"&&t.fill&&!(t.fill instanceof Lf))return AE(t.fill)}ke.warn("Unsupported property type for Text.style.stroke.",t)}}function ame(t){return{align:t.align,breakWords:t.breakWords,dropShadow:t.dropShadow,fill:nme(t.fill),fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:t.fontWeight,leading:t.leading,letterSpacing:t.letterSpacing,lineHeight:t.lineHeight,padding:t.padding,stroke:sme(t.stroke),textBaseline:t.textBaseline,trim:t.trim,whiteSpace:t.whiteSpace,wordWrap:t.wordWrap,wordWrapWidth:t.wordWrapWidth}}var NO=class extends Qi{constructor(t){super(t),Ne(this,"pixivnId",TE),Ne(this,"_onEvents",{}),this.pixivnId=this.constructor.prototype.pixivnId||TE}get memory(){return x_(this,{childrenExport:!0})}set memory(t){}async setMemory(t){return this.memory=t,await this.importChildren(t),await eg(this,t)}async importChildren(t){for(let e=0;e<t.elements.length;e++){let i=t.elements[e],n=await f$(i);this.addChild(n)}}get onEvents(){return this._onEvents}onEvent(t,e){let i=e.prototype.id,n=y_.getInstance(i);return this._onEvents[t]=i,n?super.on(t,()=>{n.fn(t,this)}):ke.error(`Event ${i} not found`),this}on(t,e,i){return super.on(t,e,i)}};Nf.add(NO,TE);async function eg(t,e,i){let n=i?.ignoreScale||!1,r=i?.end;"isRenderGroup"in e&&e.isRenderGroup!==void 0&&(t.isRenderGroup=e.isRenderGroup),"blendMode"in e&&e.blendMode!==void 0&&(t.blendMode=e.blendMode),"tint"in e&&e.tint!==void 0&&(t.tint=e.tint),"alpha"in e&&e.alpha!==void 0&&(t.alpha=e.alpha),"angle"in e&&e.angle!==void 0&&(t.angle=e.angle),"renderable"in e&&e.renderable!==void 0&&(t.renderable=e.renderable),"rotation"in e&&e.rotation!==void 0&&(t.rotation=e.rotation),!n&&"scale"in e&&e.scale!==void 0&&(typeof e.scale=="number"?t.scale.set(e.scale,e.scale):t.scale.set(e.scale.x,e.scale.y)),"pivot"in e&&e.pivot!==void 0&&(typeof e.pivot=="number"?t.pivot.set(e.pivot,e.pivot):t.pivot.set(e.pivot.x,e.pivot.y)),"position"in e&&e.position!==void 0&&t.position.set(e.position.x,e.position.y),"skew"in e&&e.skew!==void 0&&t.skew.set(e.skew.x,e.skew.y),"visible"in e&&e.visible!==void 0&&(t.visible=e.visible),"x"in e&&e.x!==void 0&&(t.x=e.x),"y"in e&&e.y!==void 0&&(t.y=e.y),"boundsArea"in e&&e.boundsArea!==void 0&&(t.boundsArea=e.boundsArea),"cursor"in e&&e.cursor!==void 0&&(t.cursor=e.cursor),"eventMode"in e&&e.eventMode!==void 0&&(t.eventMode=e.eventMode),"interactive"in e&&e.interactive!==void 0&&(t.interactive=e.interactive),"interactiveChildren"in e&&e.interactiveChildren!==void 0&&(t.interactiveChildren=e.interactiveChildren),"hitArea"in e&&e.hitArea!==void 0&&(t.hitArea=e.hitArea),r&&await r(),n||("width"in e&&e.width!==void 0&&(t.width=e.width),"height"in e&&e.height!==void 0&&(t.height=e.height))}var b$=class VP{static init(e){VP._getScreen=e.getScreen}static get screen(){return VP._getScreen()}};Ne(b$,"_getScreen");var lc=b$;function hl(t,e,i,n,r,s=0){return n=n*(r?-1:1),t==="width"?e*(lc.screen.width-i)+n+s*i+(r?i:0):e*(lc.screen.height-i)+n+s*i+(r?i:0)}function xo(t,e,i,n,r,s=0){return n=n*(r?-1:1),t==="width"?(e-n-s*i-(r?i:0))/(lc.screen.width-i):(e-n-s*i-(r?i:0))/(lc.screen.height-i)}function dl(t,e){return t==="width"?e*lc.screen.width:e*lc.screen.height}function _o(t,e){return t==="width"?e/lc.screen.width:e/lc.screen.height}function ln(t,e){if(e=e%360,e<0&&(e+=360),e===0)return{x:t.x,y:t.y};if(e===90)return{x:-t.y,y:t.x};if(e===180)return{x:-t.x,y:-t.y};if(e===270)return{x:t.y,y:-t.x};if(e>0&&e<90){let i=e*Math.PI/180,n=Math.cos(i),r=Math.sin(i),s=t.x*n-t.y*r,a=t.x*r+t.y*n;return t.x!==0&&Math.sign(s)!==Math.sign(t.x)&&(s=-s),t.y!==0&&Math.sign(a)!==Math.sign(t.y)&&(a=-a),{x:s,y:a}}else if(e>90&&e<180){let i=(e-90)*Math.PI/180,n=Math.cos(i),r=Math.sin(i),s=-t.y*r-t.x*n,a=t.y*n-t.x*r;return t.x!==0&&Math.sign(s)!==Math.sign(t.x)&&(s=-s),t.y!==0&&Math.sign(a)!==Math.sign(t.y)&&(a=-a),{x:s,y:a}}else if(e>180&&e<270){let i=(e-180)*Math.PI/180,n=Math.cos(i),r=Math.sin(i),s=-t.x*n+t.y*r,a=-t.x*r-t.y*n;return t.x!==0&&Math.sign(s)!==Math.sign(t.x)&&(s=-s),t.y!==0&&Math.sign(a)!==Math.sign(t.y)&&(a=-a),{x:s,y:a}}else if(e>270&&e<360){let i=(e-270)*Math.PI/180,n=Math.cos(i),r=Math.sin(i),s=t.y*r-t.x*n,a=-t.y*n-t.x*r;return t.x!==0&&Math.sign(s)!==Math.sign(t.x)&&(s=-s),t.y!==0&&Math.sign(a)!==Math.sign(t.y)&&(a=-a),{x:s,y:a}}return{x:0,y:0}}function su(t){let e=t.width,i=t.height,n=t.angle%360;return n<0&&(n+=360),n===0||n===180?e:n===90||n===270?i:Math.abs(e*Math.cos(n*Math.PI/180))+Math.abs(i*Math.sin(n*Math.PI/180))}function au(t){let e=t.width,i=t.height,n=t.angle%360;return n<0&&(n+=360),n===0||n===180?i:n===90||n===270?e:Math.abs(i*Math.cos(n*Math.PI/180))+Math.abs(e*Math.sin(n*Math.PI/180))}var ome=vB($pe());function jP(t){let e=Es.cache.has(t)?Es.get(t):null;return e instanceof st&&(t=e.source?.label||t),ume(t)}function ume(t){let e=t.split(".").pop()?.toLowerCase();if(!e)return!1;for(let[i,n]of Object.entries(ome.default))if(n.extensions?.includes(e)&&i.startsWith("video/"))return!0;return!1}function tg(t){return t&&(typeof t.align!="number"&&(t.xAlign!=null&&(t.align===void 0?(t.align={x:t.xAlign},delete t.xAlign):(t.align.x=t.xAlign,delete t.xAlign)),t.yAlign!=null&&(t.align===void 0?(t.align={y:t.yAlign},delete t.yAlign):(t.align.y=t.yAlign,delete t.yAlign))),typeof t.percentagePosition!="number"&&(t.xPercentagePosition!=null&&t.percentageX===void 0&&(t.percentageX=t.xPercentagePosition),t.yPercentagePosition!=null&&t.percentageY===void 0&&(t.percentageY=t.yPercentagePosition),t.percentageX!=null&&(t.percentagePosition===void 0?(t.percentagePosition={x:t.percentageX},delete t.percentageX):(t.percentagePosition.x=t.percentageX,delete t.percentageX)),t.percentageY!=null&&(t.percentagePosition===void 0?(t.percentagePosition={y:t.percentageY},delete t.percentageY):(t.percentagePosition.y=t.percentageY,delete t.percentageY))),t)}async function XP(t){if(t!=="EMPTY"){if(!t){ke.error("Texture not found",t);return}if(Es.cache.has(t)){let e=Es.get(t);if(e)return e}return Es.load(t).then(e=>{if(!e){ke.error("Texture not found",t);return}if(!(e instanceof st)){ke.error("File not is a file",t);return}return e}).catch(e=>{ke.error("Error loading file",e)})}}var UO=class y$ extends Eo{constructor(e){super(e),Ne(this,"pixivnId",EE),Ne(this,"_textureAlias"),Ne(this,"_onEvents",{}),this.pixivnId=this.constructor.prototype.pixivnId||EE}get textureAlias(){return this._textureAlias?this._textureAlias:this.texture.source.label}set textureAlias(e){this._textureAlias=e}get memory(){return LO(this)}set memory(e){}async setMemory(e){return this.memory=e,await GO(this,e)}get onEvents(){return this._onEvents}onEvent(e,i){let n=i.prototype.id,r=y_.getInstance(n);return this._onEvents[e]=n,r?(super.on(e,()=>{r.fn(e,this)}),this.interactive||(this.interactive=!0,this.eventMode="dynamic")):ke.error(`Event ${n} not found`),this}on(e,i,n){return super.on(e,i,n)}static from(e,i){let n=Eo.from(e,i),r=new y$;return r.texture=n.texture,r}};Nf.add(UO,EE);async function GO(t,e,i){let n=i?.ignoreTexture||!1;if(await eg(t,e),!n){if("textureImage"in e&&e.textureImage&&e.textureImage.image){let s=await XP(e.textureImage.image);s&&(t.texture=s)}if("textureData"in e&&(e.textureData.alias&&(t.textureAlias=e.textureData.alias),e.textureData.url!=="EMPTY")){let s=e.textureData.url;e.textureData.alias&&Es.resolver.hasKey(e.textureData.alias)&&(s=e.textureData.alias);let a=await XP(s);a&&(t.texture=a)}}let r=i?.half;if(r?await r():"anchor"in e&&e.anchor!==void 0&&(typeof e.anchor=="number"?t.anchor.set(e.anchor,e.anchor):t.anchor.set(e.anchor.x,e.anchor.y)),"roundPixels"in e&&e.roundPixels!==void 0&&(t.roundPixels=e.roundPixels),"onEvents"in e)for(let s in e.onEvents){let a=e.onEvents[s],o=y_.get(a);o&&t.onEvent(s,o)}}var Co=class x$ extends UO{constructor(e,i){e=tg(e);let n,r;e&&"align"in e&&e?.align!==void 0&&(n=e.align,delete e.align),e&&"percentagePosition"in e&&e?.percentagePosition!==void 0&&(r=e.percentagePosition,delete e.percentagePosition),super(e),Ne(this,"pixivnId",h$),Ne(this,"_loadIsStarted",!1),Ne(this,"_align"),Ne(this,"_percentagePosition"),i&&(this.textureAlias=i),n&&(this.align=n),r&&(this.percentagePosition=r)}get memory(){return{...LO(this),pixivnId:this.pixivnId,align:this._align,percentagePosition:this._percentagePosition,loadIsStarted:this._loadIsStarted}}set memory(e){}async setMemory(e){this.memory=e,await HO(this,e),this.reloadPosition()}static from(e,i){let n=Eo.from(e,i),r=new x$;return r.texture=n.texture,r}get loadIsStarted(){return this._loadIsStarted}async load(){return this._loadIsStarted=!0,XP(this.textureAlias).then(e=>{this._loadIsStarted=!1,e&&(this.texture=e)}).catch(e=>{this._loadIsStarted=!1,ke.error("Error into ImageSprite.load()",e)})}set texture(e){super.texture=e,this.reloadPosition()}get texture(){return super.texture}get haveEmptyTexture(){return this.texture._source.label==="EMPTY"}set align(e){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),typeof e=="number"?(this._align.x=e,this._align.y=e):(e.x!==void 0&&(this._align.x=e.x),e.y!==void 0&&(this._align.y=e.y)),this.reloadPosition()}get align(){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);return{x:xo("width",this.x,su(this),e.x,i.x<0,this.anchor.x),y:xo("height",this.y,au(this),e.y,i.y<0,this.anchor.y)}}set xAlign(e){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),this._align.x=e,this.reloadPosition()}get xAlign(){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);return xo("width",this.x,su(this),e.x,i.x<0,this.anchor.x)}set yAlign(e){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),this._align.y=e,this.reloadPosition()}get yAlign(){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);return xo("height",this.y,au(this),e.y,i.y<0,this.anchor.y)}set percentagePosition(e){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),typeof e=="number"?(this._percentagePosition.x=e,this._percentagePosition.y=e):(e.x!==void 0&&(this._percentagePosition.x=e.x),e.y!==void 0&&(this._percentagePosition.y=e.y)),this.reloadPosition()}get percentagePosition(){return{x:_o("width",this.x),y:_o("height",this.y)}}get percentageX(){return _o("width",this.x)}set percentageX(e){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.x=e,this.reloadPosition()}get percentageY(){return _o("height",this.y)}set percentageY(e){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.y=e,this.reloadPosition()}set xPercentagePosition(e){this.percentageX=e}get xPercentagePosition(){return this.percentageX}set yPercentagePosition(e){this.percentageY=e}get yPercentagePosition(){return this.percentageY}get positionType(){return this._align?"align":this._percentagePosition?"percentage":"pixel"}get positionInfo(){return this._align?{x:this._align.x||0,y:this._align.y||0,type:"align"}:this._percentagePosition?{x:this._percentagePosition.x||0,y:this._percentagePosition.y||0,type:"percentage"}:{x:this.x,y:this.y,type:"pixel"}}set positionInfo(e){e.type==="align"?this.align={x:e.x,y:e.y}:e.type==="percentage"?this.percentagePosition={x:e.x,y:e.y}:this.position.set(e.x,e.y)}reloadPosition(){if(this._align){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);this._align.x!==void 0&&(super.x=hl("width",this._align.x,su(this),e.x,i.x<0,this.anchor.x)),this._align.y!==void 0&&(super.y=hl("height",this._align.y,au(this),e.y,i.y<0,this.anchor.y))}else this._percentagePosition&&(this._percentagePosition.x!==void 0&&(super.x=dl("width",this._percentagePosition.x)),this._percentagePosition.y!==void 0&&(super.y=dl("height",this._percentagePosition.y)))}get position(){return super.position}set position(e){this._align=void 0,this._percentagePosition=void 0,super.position=e}get x(){return super.x}set x(e){this._align=void 0,this._percentagePosition=void 0,super.x=e}get y(){return super.y}set y(e){this._align=void 0,this._percentagePosition=void 0,super.y=e}};Nf.add(Co,h$);async function HO(t,e,i){let n=i?.ignoreTexture||!1;return e=tg(e),await GO(t,e,{half:async()=>{n||"imageLink"in e&&e.imageLink!==void 0&&(t.textureAlias=e.imageLink),"loadIsStarted"in e&&e.loadIsStarted&&await t.load(),"anchor"in e&&e.anchor!==void 0&&(typeof e.anchor=="number"?t.anchor.set(e.anchor,e.anchor):t.anchor.set(e.anchor.x,e.anchor.y)),"align"in e&&e.align!==void 0&&(t.align=e.align),"percentagePosition"in e&&e.percentagePosition!==void 0&&(t.percentagePosition=e.percentagePosition)},ignoreTexture:i?.ignoreTexture})}var ig=class _$ extends Co{constructor(e,i){let n,r,s;e&&"loop"in e&&e?.loop!==void 0&&(n=e.loop,delete e.loop),e&&"paused"in e&&e?.paused!==void 0&&(r=e.paused,delete e.paused),e&&"currentTime"in e&&e?.currentTime!==void 0&&(s=e.currentTime,delete e.currentTime),super(e,i),Ne(this,"pixivnId",d$),Ne(this,"_looop",!1),Ne(this,"_paused",!1),Ne(this,"_currentTime",0),n&&(this.loop=n),r&&(this.paused=r),s&&(this.currentTime=s)}get memory(){return{...super.memory,pixivnId:this.pixivnId,loop:this.loop,paused:this._paused,currentTime:this.currentTime}}set memory(e){}async setMemory(e){return this.memory=e,await v$(this,e)}static from(e,i){let n=Eo.from(e,i),r=new _$;return r.texture=n.texture,r}async load(){await super.load(),this.loop=this._looop,this.currentTime=this._currentTime,this.paused=this._paused}get loop(){return this.texture?.source?.resource?.loop||!1}set loop(e){this._looop=e,this.texture?.source?.resource&&(this.texture.source.resource.loop=e)}get paused(){return this.texture?.source?.resource?.paused||!1}set paused(e){e?this.pause():this.play()}pause(){this._paused=!0,this.texture?.source?.resource&&this.texture.source.resource.pause()}play(){this._paused=!1,this.texture?.source?.resource?.play&&typeof this.texture.source.resource.play=="function"&&this.texture.source.resource.play()}get currentTime(){return this.texture?.source?.resource?.currentTime||0}set currentTime(e){let i=this.duration;i&&e>=i&&(e=0),this._currentTime=e,this.texture?.source?.resource&&(this.texture.source.resource.currentTime=e)}restart(){this.currentTime=0}get duration(){if(this.texture?.source?.resource)return this.texture.source.resource.duration||0}};Nf.add(ig,d$);async function v$(t,e,i){await HO(t,e,{ignoreTexture:i?.ignoreTexture}),"loop"in e&&e.loop!==void 0&&(t.loop=e.loop),"currentTime"in e&&e.currentTime!==void 0&&(t.currentTime=e.currentTime),"paused"in e&&e.paused!==void 0&&(t.paused=e.paused)}var fl=class extends NO{constructor(t,e=[]){t=tg(t);let i,n,r;t&&"anchor"in t&&t?.anchor!==void 0&&(r=t.anchor,delete t.anchor),t&&"align"in t&&t?.align!==void 0&&(i=t.align,delete t.align),t&&"percentagePosition"in t&&t?.percentagePosition!==void 0&&(n=t.percentagePosition,delete t.percentagePosition),super(t),Ne(this,"pixivnId",GP),Ne(this,"_loadIsStarted",!1),Ne(this,"_anchor"),Ne(this,"_align"),Ne(this,"_percentagePosition"),t=tg(t),e&&e.forEach(s=>{let a;jP(s)?a=new ig(void 0,s):a=new Co(void 0,s),this.addChild(a)}),r&&(this.anchor=r),i&&(this.align=i),n&&(this.percentagePosition=n)}get memory(){return{...super.memory,pixivnId:GP,anchor:this._anchor?this.anchor:void 0,align:this._align,percentagePosition:this._percentagePosition,loadIsStarted:this._loadIsStarted}}set memory(t){}async setMemory(t){this.memory=t,await this.importChildren(t),await T$(this,t),this.reloadAnchor(),this.reloadPosition()}get loadIsStarted(){return this._loadIsStarted}async load(){this._loadIsStarted=!0;let t=Array(this.children.length);for(let e=0;e<this.children.length;e++)t[e]=this.children[e].load();return Promise.all(t).then(()=>{this._loadIsStarted=!1,this.reloadAnchor(),this.reloadPosition()}).catch(e=>{this._loadIsStarted=!1,ke.error("Error into ImageContainer.load()",e)})}get texture(){return this.children.length>0?this.children[0].texture:new st}get haveEmptyTexture(){return this.children.some(t=>t.texture._source.label==="EMPTY")}get anchor(){let t=super.pivot.x/this.width,e=super.pivot.y/this.height;return{x:t,y:e}}set anchor(t){typeof t=="number"?this._anchor={x:t,y:t}:this._anchor=t,this.reloadAnchor()}reloadAnchor(){this._anchor&&super.pivot.set(this._anchor.x*this.width,this._anchor.y*this.height)}get pivot(){return super.pivot}set pivot(t){this._anchor=void 0,super.pivot=t}set align(t){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),typeof t=="number"?(this._align.x=t,this._align.y=t):(t.x!==void 0&&(this._align.x=t.x),t.y!==void 0&&(this._align.y=t.y)),this.reloadPosition()}get align(){let t=ln(this.pivot,this.angle),e=ln(this.scale,this.angle);return{x:xo("width",this.x,su(this),t.x,e.x<0,this.anchor.x),y:xo("height",this.y,au(this),t.y,e.y<0,this.anchor.y)}}set xAlign(t){this._percentagePosition&&(this._percentagePosition=void 0),this._align===void 0&&(this._align={}),this._align.x=t,this.reloadPosition()}get xAlign(){let t=ln(this.pivot,this.angle),e=ln(this.scale,this.angle);return xo("width",this.x,su(this),t.x,e.x<0,this.anchor.x)}set yAlign(t){this._percentagePosition&&(this._percentagePosition=void 0),this._align===void 0&&(this._align={}),this._align.y=t,this.reloadPosition()}get yAlign(){let t=ln(this.pivot,this.angle),e=ln(this.scale,this.angle);return xo("height",this.y,au(this),t.y,e.y<0,this.anchor.y)}set percentagePosition(t){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),typeof t=="number"?(this._percentagePosition.x=t,this._percentagePosition.y=t):(t.x!==void 0&&(this._percentagePosition.x=t.x),t.y!==void 0&&(this._percentagePosition.y=t.y)),this.reloadPosition()}get percentagePosition(){return{x:_o("width",this.x),y:_o("height",this.y)}}set percentageX(t){this._align&&(this._align=void 0),this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.x=t,this.reloadPosition()}get percentageX(){return _o("width",this.x)}set xPercentagePosition(t){this.percentageX=t}get xPercentagePosition(){return this.percentageX}set yPercentagePosition(t){this.percentageY=t}get yPercentagePosition(){return this.percentageY}set percentageY(t){this._align&&(this._align=void 0),this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.y=t,this.reloadPosition()}get percentageY(){return _o("height",this.y)}get positionType(){return this._align?"align":this._percentagePosition?"percentage":"pixel"}get positionInfo(){return this._align?{x:this._align.x||0,y:this._align.y||0,type:"align"}:this._percentagePosition?{x:this._percentagePosition.x||0,y:this._percentagePosition.y||0,type:"percentage"}:{x:this.x,y:this.y,type:"pixel"}}set positionInfo(t){t.type==="align"?this.align={x:t.x,y:t.y}:t.type==="percentage"?this.percentagePosition={x:t.x,y:t.y}:this.position.set(t.x,t.y)}reloadPosition(){if(this._align){let t=ln(this.pivot,this.angle),e=ln(this.scale,this.angle);this._align.x!==void 0&&(super.x=hl("width",this._align.x,su(this),t.x,e.x<0)),this._align.y!==void 0&&(super.y=hl("height",this._align.y,au(this),t.y,e.y<0))}else this._percentagePosition&&(this._percentagePosition.x!==void 0&&(super.x=dl("width",this._percentagePosition.x)),this._percentagePosition.y!==void 0&&(super.y=dl("height",this._percentagePosition.y)))}get position(){return super.position}set position(t){this._align=void 0,this._percentagePosition=void 0,super.position=t}get x(){return super.x}set x(t){this._align=void 0,this._percentagePosition=void 0,super.x=t}get y(){return super.y}set y(t){this._align=void 0,this._percentagePosition=void 0,super.y=t}};Nf.add(fl,GP);async function T$(t,e,i){e=tg(e),eg(t,e,{...i,end:async()=>{"align"in e&&e.align!==void 0&&(t.align=e.align),"percentagePosition"in e&&e.percentagePosition!==void 0&&(t.percentagePosition=e.percentagePosition),"loadIsStarted"in e&&e.loadIsStarted&&await t.load()}})}var E$=class extends gO{constructor(e){e=tg(e);let i,n;e&&"align"in e&&e?.align!==void 0&&(i=e.align,delete e.align),e&&"percentagePosition"in e&&e?.percentagePosition!==void 0&&(n=e.percentagePosition,delete e.percentagePosition),super(e),Ne(this,"pixivnId",SE),Ne(this,"_onEvents",{}),Ne(this,"_align"),Ne(this,"_percentagePosition"),this.pixivnId=this.constructor.prototype.pixivnId||SE,i&&(this.align=i),n&&(this.percentagePosition=n)}get memory(){return{...m$(this),pixivnId:this.pixivnId,align:this._align,percentagePosition:this._percentagePosition}}set memory(e){}async setMemory(e){this.memory=e,await S$(this,e),this.reloadPosition()}get onEvents(){return this._onEvents}onEvent(e,i){let n=i.prototype.id,r=y_.getInstance(n);return this._onEvents[e]=n,r?(super.on(e,()=>{r.fn(e,this)}),this.interactive||(this.interactive=!0,this.eventMode="dynamic")):ke.error(`Event ${n} not found`),this}on(e,i,n){return super.on(e,i,n)}set align(e){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),typeof e=="number"?(this._align.x=e,this._align.y=e):(e.x!==void 0&&(this._align.x=e.x),e.y!==void 0&&(this._align.y=e.y)),this.reloadPosition()}get align(){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);return{x:xo("width",this.x,su(this),e.x,i.x<0,this.anchor.x),y:xo("height",this.y,au(this),e.y,i.y<0,this.anchor.y)}}set xAlign(e){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),this._align.x=e,this.reloadPosition()}get xAlign(){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);return xo("width",this.x,su(this),e.x,i.x<0,this.anchor.x)}set yAlign(e){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),this._align.y=e,this.reloadPosition()}get yAlign(){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);return xo("height",this.y,au(this),e.y,i.y<0,this.anchor.y)}set percentagePosition(e){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),typeof e=="number"?(this._percentagePosition.x=e,this._percentagePosition.y=e):(e.x!==void 0&&(this._percentagePosition.x=e.x),e.y!==void 0&&(this._percentagePosition.y=e.y)),this.reloadPosition()}get percentagePosition(){return{x:_o("width",this.x),y:_o("height",this.y)}}get percentageX(){return _o("width",this.x)}set percentageX(e){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.x=e,this.reloadPosition()}get percentageY(){return _o("height",this.y)}set percentageY(e){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.y=e,this.reloadPosition()}set xPercentagePosition(e){this.percentageX=e}get xPercentagePosition(){return this.percentageX}set yPercentagePosition(e){this.percentageY=e}get yPercentagePosition(){return this.percentageY}get positionType(){return this._align?"align":this._percentagePosition?"percentage":"pixel"}get positionInfo(){return this._align?{x:this._align.x||0,y:this._align.y||0,type:"align"}:this._percentagePosition?{x:this._percentagePosition.x||0,y:this._percentagePosition.y||0,type:"percentage"}:{x:this.x,y:this.y,type:"pixel"}}set positionInfo(e){e.type==="align"?this.align={x:e.x,y:e.y}:e.type==="percentage"?this.percentagePosition={x:e.x,y:e.y}:this.position.set(e.x,e.y)}reloadPosition(){if(this._align){let e=ln(this.pivot,this.angle),i=ln(this.scale,this.angle);this._align.x!==void 0&&(super.x=hl("width",this._align.x,su(this),e.x,i.x<0,this.anchor.x)),this._align.y!==void 0&&(super.y=hl("height",this._align.y,au(this),e.y,i.y<0,this.anchor.y))}else this._percentagePosition&&(this._percentagePosition.x!==void 0&&(super.x=dl("width",this._percentagePosition.x)),this._percentagePosition.y!==void 0&&(super.y=dl("height",this._percentagePosition.y)))}get position(){return super.position}set position(e){this._align=void 0,this._percentagePosition=void 0,super.position=e}get x(){return super.x}set x(e){this._align=void 0,this._percentagePosition=void 0,super.x=e}get y(){return super.y}set y(e){this._align=void 0,this._percentagePosition=void 0,super.y=e}};Nf.add(E$,SE);async function S$(t,e){if("text"in e&&e.text!==void 0&&(t.text=e.text),await eg(t,e,{end:()=>{"style"in e&&e.style!==void 0&&(t.style=e.style)}}),"anchor"in e&&e.anchor!==void 0&&(typeof e.anchor=="number"?t.anchor.set(e.anchor,e.anchor):t.anchor.set(e.anchor.x,e.anchor.y)),"resolution"in e&&e.resolution!==void 0&&(t.resolution=e.resolution),"anchor"in e&&e.anchor!==void 0&&(typeof e.anchor=="number"?t.anchor.set(e.anchor,e.anchor):t.anchor.set(e.anchor.x,e.anchor.y)),"align"in e&&e.align!==void 0&&(t.align=e.align),"percentagePosition"in e&&e.percentagePosition!==void 0&&(t.percentagePosition=e.percentagePosition),"roundPixels"in e&&e.roundPixels!==void 0&&(t.roundPixels=e.roundPixels),"onEvents"in e)for(let i in e.onEvents){let n=e.onEvents[i],r=y_.get(n);r&&t.onEvent(i,r)}}var A$=class{constructor(t,e,i){Ne(this,"_args"),Ne(this,"duration"),Ne(this,"priority"),Ne(this,"ticker",new ls),Ne(this,"animation"),Ne(this,"stopped",!1),Ne(this,"tickerId"),Ne(this,"canvasElementAliases",[]),Ne(this,"timeout",50),Ne(this,"onComplete",()=>{let n=this.tickerId;if(!n){ke.warn("MotionTicker.complete() called without tickerId set. This may cause issues.",this.id);return}let r=this._args.options?.aliasToRemoveAfter||[];typeof r=="string"&&(r=[r]);let s=this._args.options?.tickerAliasToResume||[];typeof s=="string"&&(s=[s]);let a=this._args.options?.tickerIdToResume||[];typeof a=="string"&&(a=[a]),dt.onTickerComplete(n,{aliasToRemoveAfter:r,tickerAliasToResume:s,tickerIdToResume:a,stopTicker:!1})}),this._args=t,this.duration=e,this.priority=i}get args(){return{...this._args,time:this.animation?.time}}getItemByAlias(t){if(!this.canvasElementAliases.includes(t))return;let e=dt.find(t);if(e)return e}async complete(){if(!this.animation){ke.warn("MotionTicker.complete() called without animation set. This may cause issues.",this.id);return}this.animation.complete(),await new Promise(t=>setTimeout(t,this.timeout))}stop(){if(this.stopped=!0,!this.animation){ke.warn("MotionTicker.stop() called without animation set. This may cause issues.",this.id);return}this.animation.stop()}start(t){if(this.tickerId=t,this._args.options.autoplay!==!1)return this.initialize()}createItem(t){return new Proxy({alias:t},{set:({alias:e},i,n)=>{if(this.stopped||this._args.startState&&this._args.startState[i]===n)return!0;let r=this.getItemByAlias(e);if(!r)return!0;switch(i){case"pivotX":r.pivot.x=n;break;case"pivotY":r.pivot.y=n;break;case"scaleX":r.scale.x=n;break;case"scaleY":r.scale.y=n;break;default:r[i]=n;break}return!0},get:({alias:e},i)=>{if(this._args.startState||(this._args.startState={}),i in this._args.startState)return this._args.startState[i];let n=this.getItemByAlias(e);if(!n)return;let r;switch(i){case"pivotX":r=n.pivot.x;break;case"pivotY":r=n.pivot.y;break;case"scaleX":r=n.scale.x;break;case"scaleY":r=n.scale.y;break;default:r=n[i];break}return this._args.startState={...this._args.startState,[i]:r},r},has:({alias:e},i)=>{let n=this.getItemByAlias(e);if(!n)return!1;switch(i){case"pivotX":return"pivot"in n&&"x"in n.pivot;case"pivotY":return"pivot"in n&&"y"in n.pivot;case"scaleX":return"scale"in n&&"x"in n.scale;case"scaleY":return"scale"in n&&"y"in n.scale;default:return i in n}},ownKeys:({alias:e})=>{let i=this.getItemByAlias(e);return i?Object.keys(i):[]}})}pause(){this.animation&&this.animation.pause()}play(){if(this.animation||this.initialize(),!this.animation){ke.warn("MotionTicker.play() called without animation set. This may cause issues.",this.id);return}this.animation.play()}get paused(){return this.animation?this.animation.state==="paused":!0}},C$=class extends A${constructor(){super(...arguments),Ne(this,"id","motion-sequence")}initialize(){let t=this.canvasElementAliases[0],e=this.createItem(t),i=this._args.sequence.map((n,r)=>[e,n[0],{...n[1]||{},ticker:this.ticker,repeat:this._args.options.repeat===null?1/0:this._args.options.repeat,onComplete:r===this._args.sequence.length-1?()=>this.onComplete():void 0}]);this.animation=P$(i,{...this._args.options,repeat:this._args.options.repeat===null?1/0:this._args.options.repeat}),this._args.time&&(this.animation.time=this._args.time)}},w$=class extends A${constructor(){super(...arguments),Ne(this,"id","motion")}initialize(){let t=this.canvasElementAliases.map(e=>this.createItem(e));this.animation=P$(t,this._args.keyframes,{...this._args.options,repeat:this._args.options?.repeat===null?1/0:this._args.options?.repeat,onComplete:()=>this.onComplete(),ticker:this.ticker}),this._args.time&&(this.animation.time=this._args.time)}},ic=new ac({cacheSize:5});ic.set("motion",w$);ic.set("motion-sequence",C$);var YP;(t=>{function e(o,l){l||(l=o.name),ic.get(l)&&ke.info(`Ticker "${l}" already exists, it will be overwritten`),o.prototype.id=l,ic.set(l,o)}t.add=e;function i(o){try{let l=ic.get(o);if(!l){ke.error(`Event "${o}" not found, did you forget to register it with the tickerDecorator?`);return}return l}catch(l){ke.error(`Error while getting Event "${o}"`,l);return}}t.get=i;function n(o,l,h,d){try{let p=ic.get(o);if(!p){ke.error(`Ticker "${o}" not found, did you forget to register it with the tickerDecorator?`);return}return new p(l,h,d)}catch(p){ke.error(`Error while getting Ticker "${o}"`,p);return}}t.getInstance=n;function r(){return Array.from(ic.values())}t.values=r;function s(o){return ic.has(o)}t.has=s;function a(){return Array.from(ic.keys())}t.keys=a})(YP||(YP={}));var rc=YP,lme="aliasToRemoveAfter",cme=class{get app(){return He.app}get gameLayer(){return He.gameLayer}get isInitialized(){return He._isInitialized}get width(){return He.canvasWidth}get canvasWidth(){return He.canvasWidth}get height(){return He.canvasHeight}get canvasHeight(){return He.canvasHeight}set width(t){He.canvasWidth=t}set canvasWidth(t){He.canvasWidth=t}set height(t){He.canvasHeight=t}set canvasHeight(t){He.canvasHeight=t}get screen(){return this.app.screen}async init(t,e,i,n,r){if(typeof e=="number"&&typeof i=="number")return await He.init(t,e,i,n,r);if(typeof e!="number"&&typeof i!="number")return await He.init(t,e.width,e.height,e,i);throw new Error("Invalid parameters")}get children(){return He.gameLayer.children}async copyCanvasElementProperty(t,e){if(typeof e=="string"){let i=this.find(e);if(i)e=i;else{ke.error(`Canvas element ${e} not found`);return}}if(typeof t=="string"){let i=this.find(t);if(i)t=i;else{ke.error(`Canvas element ${t} not found`);return}}t instanceof Qi&&(t=t.memory),"isRenderGroup"in t&&delete t.isRenderGroup,"scale"in t&&delete t.scale,"visible"in t&&delete t.visible,"boundsArea"in t&&delete t.boundsArea,"text"in t&&delete t.text,"resolution"in t&&delete t.resolution,"style"in t&&delete t.style,"height"in t&&delete t.height,"width"in t&&delete t.width,e instanceof ig?await v$(e,t,{ignoreTexture:!0}):e instanceof Co?await HO(e,t,{ignoreTexture:!0}):e instanceof UO?await GO(e,t,{ignoreTexture:!0}):e instanceof E$?await S$(e,t):e instanceof fl?await T$(e,t):e instanceof Qi&&await eg(e,t)}add(t,e,i={}){if(t===tc){ke.error(`The alias ${tc} is reserved`);return}let n=this.find(t),r=i?.ignoreOldStyle;n&&!r&&this.copyCanvasElementProperty(n,e);let s=i.zIndex;n&&!this.gameLayer.children.includes(n)?ke.error(`The canvas element ${t} exist in the memory but it is not on the canvas, so the zIndex is not set`):n&&(s===void 0&&(s=this.gameLayer.getChildIndex(n)),this.remove(t,{ignoreTickers:!0})),s!==void 0?(e.label=t,this.gameLayer.addChildAt(e,s)):(e.label=t,this.gameLayer.addChild(e))}remove(t,e={}){if(t===tc){ke.error(`The alias ${tc} is reserved`);return}let i=e.ignoreTickers;typeof t=="string"&&(t=[t]),t.forEach(n=>{this.gameLayer.getChildrenByLabel(n).forEach(r=>{this.gameLayer.removeChild(r),!i&&this.unlinkComponentFromTicker(n)})})}find(t){if(t===tc)return this.gameLayer;let e=this.gameLayer.getChildByLabel(t);if(e)return e}canvasElementIsOnCanvas(t){return this.gameLayer.children.includes(t)}removeAll(){this.gameLayer.removeChildren()}editAlias(t,e,i={}){let n=this.find(t);n&&(n.label=e),!i.ignoreTickers&&this.transferTickers(t,e,"move")}get currentTickers(){return He._currentTickers}get currentTickersSteps(){return He._currentTickersSequence}findTicker(t){let e=He._currentTickers[t];if(e)return e.ticker}addTicker(t,e,i){let n=e.id;if(typeof t=="string"&&(t=[t]),e.canvasElementAliases=t,!rc.has(n)){ke.error(`Ticker ${n} not found`);return}let r={ticker:e},{id:s=He.generateTickerId(r)}=i||{};if(He._currentTickers[s]=r,r.ticker.start(s),e.duration){let a=setTimeout(()=>{He.removeTickerTimeoutInfo(a),He._currentTickersTimeouts[a.toString()]&&r.ticker.complete({ignoreTickerSteps:!0})},e.duration*1e3);He.addTickerTimeoutInfo(t,n,a.toString(),!0)}return s}addTickersSequence(t,e,i=0){if(e.length==0){ke.warn("The steps of the tickers is empty");return}t in He._currentTickersSequence||(He._currentTickersSequence[t]={});let n={currentStepNumber:i,steps:e.map(s=>s===M1||s.hasOwnProperty("type")&&s.type==="pause"?s:{ticker:s.id,args:Hi(s.args),duration:s.duration})},r=He.generateTickerId(n);return He._currentTickersSequence[t][r]=n,this.runTickersSequence(t,r),r}runTickersSequence(t,e){if(!He._currentTickersSequence[t]||!He._currentTickersSequence[t][e])return;let i=He._currentTickersSequence[t][e].steps[He._currentTickersSequence[t][e].currentStepNumber];if(i===M1&&(i=He._currentTickersSequence[t][e].steps[0],He._currentTickersSequence[t][e].currentStepNumber=0,i===M1)){ke.error("TikersSteps has a RepeatType in the first step");return}if(i.hasOwnProperty("type")&&i.type==="pause"){let o=setTimeout(()=>{let l=He._currentTickersTimeouts[o.toString()];l&&l.aliases.forEach(h=>{this.nextTickerStep(h,e)}),He.removeTickerTimeoutInfo(o)},i.duration*1e3);He.addTickerTimeoutInfo(t,"steps",o.toString(),!1);return}let n=rc.getInstance(i.ticker,i.args,i.duration,i.priority);if(!n){ke.error(`Ticker ${i.ticker} not found`);return}n.canvasElementAliases=[t];let r=n.id,s={createdByTicketSteps:{canvasElementAlias:t,id:e},ticker:n},a=He.generateTickerId(s);if(He._currentTickers[a]=s,s.ticker.start(a),n.duration){let o=setTimeout(()=>{let l=He._currentTickersTimeouts[o.toString()];l&&(s.ticker.complete({ignoreTickerSteps:!0}),l.aliases.forEach(h=>{this.nextTickerStep(h,e)})),He.removeTickerTimeoutInfo(o)},n.duration*1e3);He.addTickerTimeoutInfo(t,r,o.toString(),!1)}}nextTickerStep(t,e){if(He._currentTickersSequence[t]&&He._currentTickersSequence[t][e]){let i=He._currentTickersSequence[t][e];i.currentStepNumber+1<i.steps.length?(i.currentStepNumber++,He._currentTickersSequence[t][e]=i,this.runTickersSequence(t,e)):e&&He._currentTickersSequence[t]&&He._currentTickersSequence[t][e]&&(delete He._currentTickersSequence[t][e],Object.entries(He._currentTickers).forEach(([n,r])=>{r.createdByTicketSteps?.canvasElementAlias===t&&r.createdByTicketSteps.id===e&&this.removeTicker(n)}))}}onEndOfTicker(t,e){return this.onTickerComplete(t,e)}onTickerComplete(t,e){let{stopTicker:i=!0,aliasToRemoveAfter:n,tickerAliasToResume:r,tickerIdToResume:s}=e,a=He._currentTickers[t],o=e.ignoreTickerSteps||!1;this.remove(n),r.forEach(l=>this.resumeTicker({canvasAlias:l})),this.resumeTicker({id:s}),a&&(this.removeTicker(t,{stopTicker:i}),!o&&a.ticker.duration==null&&a.createdByTicketSteps&&this.nextTickerStep(a.createdByTicketSteps.canvasElementAlias,a.createdByTicketSteps.id))}unlinkComponentFromTicker(t,e){if(typeof t=="string"&&(t=[t]),!e){t.forEach(n=>{Object.entries(He._currentTickers).forEach(([r,s])=>{s.ticker.canvasElementAliases.includes(n)&&(s.ticker.canvasElementAliases.length===1?this.removeTicker(r):s.ticker.canvasElementAliases=s.ticker.canvasElementAliases.filter(a=>a!==n))}),He._currentTickersSequence[n]&&delete He._currentTickersSequence[n],He.removeTickerTimeoutsByAlias(n,!1)});return}let i;typeof e=="string"?i=e:i=e.prototype.id,t.forEach(n=>{He._currentTickersSequence[n]&&Object.entries(He._currentTickersSequence[n]).forEach(([r,s])=>{s.steps.find(a=>typeof a=="object"&&"ticker"in a&&a.ticker===i)&&delete He._currentTickersSequence[n][r]})}),Object.entries(He._currentTickers).forEach(([n,r])=>{r.ticker.id===i&&(He._currentTickers[n].ticker.canvasElementAliases=r.ticker.canvasElementAliases.filter(s=>!t.includes(s)))}),Object.entries(He._currentTickersTimeouts).forEach(([n,r])=>{r.ticker===i&&r.canBeDeletedBeforeEnd&&(He._currentTickersTimeouts[n].aliases=r.aliases.filter(s=>!t.includes(s)))}),this.removeTickersWithoutAssociatedCanvasElement()}removeTickersWithoutAssociatedCanvasElement(){Object.entries(He._currentTickers).forEach(([t,e])=>{e.ticker.canvasElementAliases=e.ticker.canvasElementAliases.filter(i=>this.find(i)),e.ticker.canvasElementAliases.length===0&&e.ticker.complete({ignoreTickerSteps:!0})}),Object.entries(He._currentTickersSequence).forEach(([t,e])=>{e===void 0&&delete He._currentTickersSequence[t]}),Object.entries(He._currentTickersTimeouts).forEach(([t,{aliases:e}])=>{e.length===0&&He.removeTickerTimeout(t)})}removeAllTickers(){He._currentTickersSequence={},Object.keys(He._currentTickers).forEach(t=>{this.removeTicker(t)}),He._currentTickers={};for(let t in He._currentTickersTimeouts)He.removeTickerTimeout(t);He._tickersToCompleteOnStepEnd={tikersIds:[],stepAlias:[]},He._tickersOnPause={}}removeTicker(t,e={stopTicker:!0}){typeof t=="string"&&(t=[t]),t.forEach(i=>{let n=He._currentTickers[i];n&&(e.stopTicker&&n.ticker.stop(),delete He._currentTickers[i])})}pauseTicker(t){let e=[];if("canvasAlias"in t){let{canvasAlias:i,tickerIdsExcluded:n=[]}=t;Object.entries(He._currentTickers).forEach(([r,s])=>{s.ticker.canvasElementAliases.includes(i)&&!n.includes(s.ticker.id)&&s.ticker.paused===!1&&(s.ticker.pause(),e.push(r))})}else if("id"in t){let{id:i}=t;typeof i=="string"&&(i=[i]),i.forEach(n=>{let r=He._currentTickers[n];r?r.ticker.paused===!1&&(r.ticker.pause(),e.push(n)):ke.error(`Ticker with id ${n} not found`)})}return e}resumeTicker(t){if("canvasAlias"in t){let{canvasAlias:e}=t;Object.values(He._currentTickers).forEach(i=>{i.ticker.canvasElementAliases.includes(e)&&i.ticker.play()}),delete He._tickersOnPause[e]}else if("id"in t){let{id:e}=t;typeof e=="string"&&(e=[e]),e.forEach(i=>{let n=He._currentTickers[i];n?n.ticker.play():ke.error(`Ticker with id ${i} not found`)})}}isTickerPaused(t,e){let i=He._tickersOnPause[t];if(i){if(e){if("tickerIdsIncluded"in i&&i.tickerIdsIncluded)return i.tickerIdsIncluded.includes(e);if("tickerIdsExcluded"in i&&i.tickerIdsExcluded)return!i.tickerIdsExcluded.includes(e)}return!0}return!1}transferTickers(t,e,i="move"){He._currentTickersSequence[t]&&(i==="move"||i==="duplicate")&&(He._currentTickersSequence[e]=Hi(He._currentTickersSequence[t])),Object.entries(He._currentTickers).forEach(([n,r])=>{if(r.createdByTicketSteps?.canvasElementAlias===t&&this.removeTicker(n),r.ticker.canvasElementAliases.includes(t)){let s=rc.getInstance(r.ticker.id,Hi(r.ticker.args),r.ticker.duration,r.ticker.priority);if(s?(s.canvasElementAliases=[e],this.addTicker(e,s),r.ticker.paused&&s.pause()):ke.error(`Ticker ${r.ticker.id} not found`),i==="move"&&(r.ticker.canvasElementAliases=r.ticker.canvasElementAliases.filter(a=>a!==t)),r.ticker.args.hasOwnProperty(lme)){let a=r.ticker.args.aliasToRemoveAfter;typeof a=="string"&&(a=[a]),Array.isArray(a)&&(i==="move"?r.ticker.args.aliasToRemoveAfter=a.map(o=>o===t?e:o):i==="duplicate"&&a.find(o=>o===t)&&(r.ticker.args.aliasToRemoveAfter=[...a,e]))}}}),Object.values(He._currentTickersTimeouts).forEach(n=>{n.aliases.includes(t)&&(i==="move"?n.aliases=n.aliases.map(r=>r===t?e:r):i==="duplicate"&&n.aliases.find(r=>r===t)&&n.aliases.push(e))}),He._currentTickersSequence[e]&&Object.keys(He._currentTickersSequence[e]).forEach(n=>{this.runTickersSequence(e,n)}),i==="duplicate"&&He._currentTickersSequence[t]&&Object.keys(He._currentTickersSequence[t]).forEach(n=>{this.runTickersSequence(t,n)})}completeTickerOnStepEnd(t){t.alias?He._tickersToCompleteOnStepEnd.stepAlias.push({id:t.id,alias:t.alias}):He._tickersToCompleteOnStepEnd.tikersIds.push({id:t.id})}async forceCompletionOfTicker(t,e){if(e){let i=He._currentTickersSequence[e];if(i&&i[t])if(i[t].steps.includes(M1))ke.error(`The ticker alias: ${e} id: ${t} contains a RepeatType, so it can't be forced to complete`,i[t]);else{let n=i[t].steps.map(r=>{if(typeof r=="object"&&"ticker"in r){let s=rc.getInstance(r.ticker,r.args,r.duration,r.priority);if(s)return s.canvasElementAliases=[e],s.complete()}});await Promise.all(n)}}else{let i=He._currentTickers[t];i&&await i.ticker.complete()}}animate(t,e,i,n){try{e=Hi(e)}catch(l){throw ke.error("animate keyframes cannot contain functions or classes"),l}try{i=Hi(i)}catch(l){throw ke.error("animate options cannot contain functions or classes"),l}let r=[];typeof t=="string"?r=[t]:Array.isArray(t)?r=t.map(l=>typeof l=="string"?l:l.label):r=[t.label];let s;Array.isArray(e)?s=new C$({sequence:e,options:i},void 0,n):s=new w$({keyframes:e,options:i},void 0,n);let a=this.addTicker(r,s),{forceCompleteBeforeNext:o}=i||{};return a&&o&&this.completeTickerOnStepEnd({id:a}),a}addLayer(t,e){if(t===tc){ke.error(`The alias ${tc} is reserved`);return}return e.label=t,He.app.stage.addChild(e)}getLayer(t){return He.app.stage.getChildByLabel(t)}removeLayer(t){let e=He.app.stage.getChildByLabel(t);e&&He.app.stage.removeChild(e)}addHtmlLayer(t,e,i){return He.addHtmlLayer(t,e,i)}removeHtmlLayer(t){return He.removeHtmlLayer(t)}getHtmlLayer(t){return He.getHtmlLayer(t)}async extractImage(){return(await this.app.renderer.extract.image(this.app.stage)).src}clear(){this.removeAllTickers(),this.removeAll()}export(){let t={};return this.children.forEach(e=>{e.label&&(t[e.label]=p$(e))}),{tickers:Hi(He.currentTickersWithoutCreatedBySteps),tickersSteps:Hi(He._currentTickersSequence),elements:Hi(t),stage:Hi(x_(this.gameLayer)),elementAliasesOrder:Hi(He.childrenAliasesOrder),tickersOnPause:Hi(He._tickersOnPause),tickersToCompleteOnStepEnd:Hi(He._tickersToCompleteOnStepEnd)}}async restore(t){this.clear();try{if(t.hasOwnProperty("elementAliasesOrder")&&t.hasOwnProperty("elements")){let e=t.elementAliasesOrder,i={},n=Object.entries(t.elements).map(async([r,s])=>{i[r]=await f$(s)});await Promise.all(n),e.forEach(r=>{let s=i[r];s&&this.add(r,s)})}else{ke.error("The data does not have the properties elementAliasesOrder and elements");return}if(t.hasOwnProperty("stage")&&t.hasOwnProperty("stage")?eg(this.gameLayer,t.stage,{ignoreScale:!0}):ke.error("The data does not have the properties stage"),t.hasOwnProperty("tickers")){let e=t.tickers;Object.entries(e).forEach(([i,n])=>{let r=n.canvasElementAliases;if(r.length!==0){let s=rc.getInstance(n.id,n.args,n.duration,n.priority);s?(s.canvasElementAliases=r,this.addTicker(r,s,{id:i}),n.paused&&s.pause()):ke.error(`Ticker ${n.id} not found`)}})}if(t.hasOwnProperty("tickersSteps")){let e=t.tickersSteps;Object.entries(e).forEach(([i,n])=>{He._currentTickersSequence[i]=n,Object.keys(n).forEach(r=>{this.runTickersSequence(i,r)})})}if(t.hasOwnProperty("tickersOnPause")){let e=t.tickersOnPause;Object.keys(e).forEach(i=>{let n=e[i];"tickerIdsExcluded"in n&&n.tickerIdsExcluded&&(e[i].tickerIdsExcluded=n.tickerIdsExcluded),"tickerIdsIncluded"in n&&n.tickerIdsIncluded&&(e[i].tickerIdsIncluded=n.tickerIdsIncluded)}),He._tickersOnPause=e}if(t.hasOwnProperty("tickersToCompleteOnStepEnd")){let e=t.tickersToCompleteOnStepEnd,i=e.tikersIds,n=e.stepAlias.map(r=>({id:r.id,alias:r.alias}));He._tickersToCompleteOnStepEnd={tikersIds:i,stepAlias:n}}}catch(e){ke.error("Error importing data",e)}}};function IN(t,e,i){let n={...dt.find(t)?.memory,...i},r=new fl(i,e);return n&&dt.copyCanvasElementProperty(n,r),dt.add(t,r,{ignoreOldStyle:!0,zIndex:i?.zIndex}),r}async function U(t,e,i){let n={...dt.find(t)?.memory,...i},r=new fl(i,e);return await r.load(),n&&dt.copyCanvasElementProperty(n,r),dt.add(t,r,{ignoreOldStyle:!0,zIndex:i?.zIndex}),r}function LN(t,e,i){if(!e)if(Es.resolver.hasKey(t))e=t;else throw new Error(`The image ${t} does not exist in the cache.`);let n={...dt.find(t)?.memory,...i},r=new Co(i,e);return n&&dt.copyCanvasElementProperty(n,r),dt.add(t,r,{ignoreOldStyle:!0,zIndex:i?.zIndex}),r}async function D$(t,e,i){if(!e)if(Es.resolver.hasKey(t))e=t;else throw new Error(`The image ${t} does not exist in the cache.`);let n={...dt.find(t)?.memory,...i},r=new Co(i,e);return await r.load(),n&&dt.copyCanvasElementProperty(n,r),dt.add(t,r,{ignoreOldStyle:!0,zIndex:i?.zIndex}),r}function NN(t,e,i){if(!e)if(Es.resolver.hasKey(t))e=t;else throw new Error(`The video ${t} does not exist in the cache.`);let n={...dt.find(t)?.memory,...i},r=new ig(i,e);return n&&dt.copyCanvasElementProperty(n,r),dt.add(t,r,{ignoreOldStyle:!0,zIndex:i?.zIndex}),r}function hme(t,e){if(t.type==="align"){let i,n;e instanceof Eo&&(i=e.anchor.x,n=e.anchor.y);let r=ln(e.pivot,e.angle),s=ln(e.scale,e.angle);t.x=hl("width",t.x,su(e),r.x,s.x<0,i),t.y=hl("height",t.y,au(e),r.y,s.y<0,n)}return t.type==="percentage"&&(t.x=dl("width",t.x),t.y=dl("height",t.y)),{x:t.x,y:t.y}}function dme(t,e,i){if(typeof e=="string")return jP(e)?NN(t,e,i):LN(t,e,i);if(Array.isArray(e))return IN(t,e,i);if(typeof e=="object"&&"value"in e&&"options"in e){if(typeof e.value=="string")return jP(e.value)?NN(t,e.value,{...e.options,zIndex:i.zIndex}):LN(t,e.value,{...e.options,zIndex:i.zIndex});if(Array.isArray(e.value))return IN(t,e.value,{...e.options,zIndex:i.zIndex})}return dt.add(t,e,i),e}async function LT(t,e,i={},n){let{direction:r="right",forceCompleteBeforeNext:s=!0,tickerIdToResume:a=[],aliasToRemoveAfter:o=[],removeOldComponentWithMoveOut:l,...h}=i,d=[];e||(e=t),typeof a=="string"&&(a=[a]),typeof o=="string"&&(o=[o]);let p,g=dt.find(t);g&&(p=t+"_temp_movein",dt.editAlias(t,p)),e=dme(t,e,{zIndex:g?dt.gameLayer.getChildIndex(g):void 0}),p&&dt.copyCanvasElementProperty(p,t),p&&dt.transferTickers(p,t,"move");let y;if(e instanceof Co||e instanceof fl?y=e.positionInfo:y={x:e.x,y:e.y,type:"pixel"},p)if(l){let T=R$(p,{...i,autoplay:!1,forceCompleteBeforeNext:s},n);T&&(d.push(...T),a.push(...T))}else o.push(p);switch((e instanceof Co||e instanceof fl)&&e.haveEmptyTexture&&await e.load(),r){case"up":e.y=dt.height+e.height;break;case"down":e.y=-e.height;break;case"left":e.x=dt.width+e.width;break;case"right":e.x=-e.width;break}let v=dt.pauseTicker({canvasAlias:t});a.push(...v);let S=dt.animate(t,hme(y,e),{...h,tickerIdToResume:a,aliasToRemoveAfter:o,forceCompleteBeforeNext:s},n);if(S&&d.push(S),d.length>0)return d}function R$(t,e={},i){let{direction:n="right",forceCompleteBeforeNext:r=!0,aliasToRemoveAfter:s=[],...a}=e;typeof s=="string"&&(s=[s]),s.push(t);let o=dt.find(t);if(!o){ke.warn(`The canvas component "${t}" is not found.`);return}let l={x:o.x,y:o.y};switch(n){case"up":l.y=-o.height;break;case"down":l.y=dt.height+o.height;break;case"left":l.x=-o.width;break;case"right":l.x=dt.width+o.width;break}dt.pauseTicker({canvasAlias:t});let h=dt.animate(t,l,{...a,aliasToRemoveAfter:s,forceCompleteBeforeNext:r},i);if(h)return[h]}var DS=class{constructor(e,i,n){Ne(this,"id","ticker_id_not_set"),Ne(this,"args"),Ne(this,"duration"),Ne(this,"priority"),Ne(this,"ticker",new ls),Ne(this,"tickerId"),Ne(this,"canvasElementAliases",[]),Ne(this,"fnValue"),this.args=e,this.duration=i,this.priority=n,this.id=this.constructor.prototype.id}complete(e){this.stop()}stop(){let e=this.fnValue;if(!e){ke.warn("TickerBase.stop() called without fnValue set. This may cause issues.");return}this.ticker.remove(e,null)}start(e){this.tickerId=e;let i=()=>{let{createdByTicketSteps:n}=He._currentTickers[e],r=this.canvasElementAliases;if(n){if(dt.isTickerPaused(n.canvasElementAlias,n.id))return}else r=r.filter(s=>!dt.isTickerPaused(s,e));return this.fn(this.ticker,this.args,r,e)};this.fnValue=i,this.ticker.add(i,null,this.priority),this.ticker.start()}pause(){this.ticker.stop()}play(){this.ticker.start()}get paused(){return!this.ticker.started}};function RS(t){return(t instanceof Co||t instanceof fl)&&t.haveEmptyTexture?!1:!(t instanceof Eo&&t.texture?.label=="EMPTY")}function PS(t,e,i){let{limit:n}=i;t[e]===void 0||!i||t[e]===n||(typeof t[e]=="number"?i.type==="linear"?t[e]=Kw(t[e],i):i.type==="exponential"&&(t[e]=Qw(t[e],i)):t[e]!==void 0&&typeof t[e]=="object"&&t[e].haveOwnProperty("x")&&t[e].haveOwnProperty("y")&&typeof t[e].x=="number"&&typeof t[e].y=="number"&&(i.type==="linear"?(t[e].x=Kw(t[e].x,i),t[e].y=Kw(t[e].y,i)):i.type==="exponential"&&(t[e].x=Qw(t[e].x,i),t[e].y=Qw(t[e].y,i))))}function Kw(t,e){let{limit:i,amt:n}=e;return i!==void 0&&(t>i&&n>0||t<i&&n<0)?i:t+n}function Qw(t,e){let{limit:i}=e;return i!==void 0&&(t>i&&e.percentage>0||t<i&&e.percentage<0)?i:t+t*e.percentage}var fme=5,pme=class extends DS{constructor(t={},e,i){super(t,e,i)}fn(t,e,i,n){e.speed===void 0&&(e.duration===void 0?e.speed=fme:e.speed=600/(e.duration*60));let{type:r="hide",startOnlyIfHaveTexture:s,speedProgression:a}=e,o=this.speedConvert(e.speed),l=this.getLimit(e);r==="hide"&&l<0&&(l=0),r==="show"&&l>1&&(l=1),i.filter(h=>{let d=dt.find(h);return!(!d||s&&!RS(d))}).forEach(h=>{let d=dt.find(h);if(d&&d instanceof Qi){if(r==="show"&&d.alpha<l?d.alpha+=o*t.deltaTime:r==="hide"&&d.alpha>l&&(d.alpha-=o*t.deltaTime),r==="show"&&d.alpha>=l){this.complete();return}else if(r==="hide"&&d.alpha<=l){this.complete();return}if(o<1e-5&&!(a&&a.type=="linear"&&a.amt!=0)){ke.warn("The speed of the FadeAlphaTicker must be greater than 0."),this.complete();return}}}),a&&PS(e,"speed",a)}onComplete(t,e,i){typeof t=="string"&&(t=[t]),t.forEach(n=>{let r=dt.find(n);if(r){let s=this.getLimit(i);r.alpha=s}})}getLimit(t){let{type:e="hide",limit:i=e==="hide"?0:1}=t;return i}speedConvert(t){return t/600}complete(t){let{ignoreTickerSteps:e}=t||{},i=this.tickerId;if(!i){ke.warn("TickerBase.complete() called without tickerId set. This may cause issues.");return}this.onComplete(this.canvasElementAliases,i,this.args);let n="aliasToRemoveAfter"in this.args&&this.args.aliasToRemoveAfter||[];typeof n=="string"&&(n=[n]);let r="tickerAliasToResume"in this.args&&this.args.tickerAliasToResume||[];typeof r=="string"&&(r=[r]);let s="tickerIdToResume"in this.args&&this.args.tickerIdToResume||[];typeof s=="string"&&(s=[s]),dt.onTickerComplete(i,{aliasToRemoveAfter:n,tickerAliasToResume:r,tickerIdToResume:s,ignoreTickerSteps:e}),super.complete(t)}};rc.add(pme);var mme=10;function gme(t,e){let i=Hi(t.destination);if(i.type==="align"){let n,r;e instanceof Eo&&(n=e.anchor.x,r=e.anchor.y);let s=ln(e.pivot,e.angle),a=ln(e.scale,e.angle);i.x=hl("width",i.x,su(e),s.x,a.x<0,n),i.y=hl("height",i.y,au(e),s.y,a.y<0,r)}return i.type==="percentage"&&(i.x=dl("width",i.x),i.y=dl("height",i.y)),i}var bme=class extends DS{fn(t,e,i,n){e.speed===void 0&&(e.speed=mme);let{speed:r,startOnlyIfHaveTexture:s,speedProgression:a}=e;i.filter(o=>{let l=dt.find(o);return!(!l||s&&!RS(l))}).forEach(o=>{let l=dt.find(o);if(l&&l instanceof Qi){let h=gme(e,l),d=h.x-l.x,p=h.y-l.y,g=d>0?1:-1,y=p>0?1:-1,v,S;if(typeof r=="number"){let T=this.speedConvert(r);d===0||p===0?v=S=T:(v=Math.abs(d/(d+p))*T,S=Math.abs(p/(d+p))*T)}else v=this.speedConvert(r.x),S=this.speedConvert(r.y);if(v>0){l.x+=g*v*t.deltaTime;let T=h.x-l.x;(g<0&&T>0||g>0&&T<0)&&(l.x=h.x)}if(S>0){l.y+=y*S*t.deltaTime;let T=h.y-l.y;(y<0&&T>0||y>0&&T<0)&&(l.y=h.y)}if(l.x==h.x&&l.y==h.y){this.complete();return}else if(v<1e-5&&S<1e-5&&!(a&&a.type=="linear"&&a.amt!=0)){ke.warn("The speed of the MoveTicker must be greater than 0."),this.complete();return}}}),a&&PS(e,"speed",a)}onComplete(t,e,i){typeof t=="string"&&(t=[t]),t.forEach(n=>{let r=dt.find(n);if(r){let s=i.destination;r instanceof Co||r instanceof fl?r.positionInfo=s:(r.x=s.x,r.y=s.y)}})}speedConvert(t){return t*(66/400)}complete(t){let{ignoreTickerSteps:e}=t||{},i=this.tickerId;if(!i){ke.warn("TickerBase.complete() called without tickerId set. This may cause issues.");return}this.onComplete(this.canvasElementAliases,i,this.args);let n="aliasToRemoveAfter"in this.args&&this.args.aliasToRemoveAfter||[];typeof n=="string"&&(n=[n]);let r="tickerAliasToResume"in this.args&&this.args.tickerAliasToResume||[];typeof r=="string"&&(r=[r]);let s="tickerIdToResume"in this.args&&this.args.tickerIdToResume||[];typeof s=="string"&&(s=[s]),dt.onTickerComplete(i,{aliasToRemoveAfter:n,tickerAliasToResume:r,tickerIdToResume:s,ignoreTickerSteps:e}),super.complete(t)}};rc.add(bme);var yme=1,xme=class extends DS{constructor(t={},e,i){super(t,e,i)}fn(t,e,i,n){e.speed===void 0&&(e.speed=yme);let{clockwise:r=!0,speedProgression:s,limit:a}=e,o=this.speedConvert(e.speed);i.filter(l=>{let h=dt.find(l);return!(!h||e.startOnlyIfHaveTexture&&!RS(h))}).forEach(l=>{let h=dt.find(l);if(h&&h instanceof Qi&&(r?h.rotation+=o*t.deltaTime:h.rotation-=o*t.deltaTime,a!==void 0&&(r&&h.angle>=a?(h.angle=a,this.complete()):!r&&h.angle<=a&&(h.angle=a,this.complete())),o<1e-5&&!(s&&s.type=="linear"&&s.amt!=0))){ke.warn("The speed of the RotateTicker must be greater than 0."),this.complete();return}}),s&&PS(e,"speed",s)}onComplete(t,e,i){let{limit:n}=i;typeof t=="string"&&(t=[t]),t.forEach(r=>{let s=dt.find(r);s&&n!==void 0&&(s.angle=n)})}speedConvert(t){return t/100}complete(t){let{ignoreTickerSteps:e}=t||{},i=this.tickerId;if(!i){ke.warn("TickerBase.complete() called without tickerId set. This may cause issues.");return}this.onComplete(this.canvasElementAliases,i,this.args);let n="aliasToRemoveAfter"in this.args&&this.args.aliasToRemoveAfter||[];typeof n=="string"&&(n=[n]);let r="tickerAliasToResume"in this.args&&this.args.tickerAliasToResume||[];typeof r=="string"&&(r=[r]);let s="tickerIdToResume"in this.args&&this.args.tickerIdToResume||[];typeof s=="string"&&(s=[s]),dt.onTickerComplete(i,{aliasToRemoveAfter:n,tickerAliasToResume:r,tickerIdToResume:s,ignoreTickerSteps:e}),super.complete(t)}};rc.add(xme);var _me=10,vme=class extends DS{constructor(t={},e,i){super(t,e,i)}fn(t,e,i,n){e.speed===void 0&&(e.speed=_me);let{speed:r,type:s="zoom",startOnlyIfHaveTexture:a,speedProgression:o}=e,l,h;typeof r=="number"?(l=this.speedConvert(r),h=this.speedConvert(r)):(l=this.speedConvert(r.x),h=this.speedConvert(r.y));let d=this.getLimit(e);i.filter(p=>{let g=dt.find(p);return!(!g||a&&!RS(g))}).forEach(p=>{let g=dt.find(p);if(g&&g instanceof Qi){if(s==="zoom"&&(g.scale.x<d.x||g.scale.y<d.y)?(g.scale.x+=l*t.deltaTime,g.scale.y+=h*t.deltaTime):s==="unzoom"&&(g.scale.x>d.x||g.scale.y>d.y)&&(g.scale.x-=l*t.deltaTime,g.scale.y-=h*t.deltaTime),s==="zoom"){if(g.scale.x>d.x&&(g.scale.x=d.x),g.scale.y>d.y&&(g.scale.y=d.y),g.scale.x>=d.x&&g.scale.y>=d.y){this.complete();return}}else if(s==="unzoom"&&(g.scale.x<d.x&&(g.scale.x=d.x),g.scale.y<d.y&&(g.scale.y=d.y),g.scale.x<=d.x&&g.scale.y<=d.y)){this.complete();return}if((l<1e-5&&h<1e-5||l<1e-5&&g.scale.y==d.y||h<1e-5&&g.scale.x==d.x)&&!(o&&o.type=="linear"&&o.amt!=0)){ke.warn("The speed of the ZoomTicker must be greater than 0."),this.complete();return}}}),o&&PS(e,"speed",o)}speedConvert(t){return t/600}onComplete(t,e,i){let{isZoomInOut:n}=i;typeof t=="string"&&(t=[t]),t.forEach(r=>{let s=dt.find(r);if(s){let a=this.getLimit(i);if(s.scale.x=a.x,s.scale.y=a.y,n){let{pivot:o,position:l}=n;s.pivot=o.x,s.position=l}}})}getLimit(t){let{type:e="zoom",limit:i}=t,n=e==="zoom"?1/0:0,r=e==="zoom"?1/0:0;return i&&(typeof i=="number"?(n=i,r=i):(n=i.x,r=i.y)),{x:n,y:r}}complete(t){let{ignoreTickerSteps:e}=t||{},i=this.tickerId;if(!i){ke.warn("TickerBase.complete() called without tickerId set. This may cause issues.");return}this.onComplete(this.canvasElementAliases,i,this.args);let n="aliasToRemoveAfter"in this.args&&this.args.aliasToRemoveAfter||[];typeof n=="string"&&(n=[n]);let r="tickerAliasToResume"in this.args&&this.args.tickerAliasToResume||[];typeof r=="string"&&(r=[r]);let s="tickerIdToResume"in this.args&&this.args.tickerIdToResume||[];typeof s=="string"&&(s=[s]),dt.onTickerComplete(i,{aliasToRemoveAfter:n,tickerAliasToResume:r,tickerIdToResume:s,ignoreTickerSteps:e}),super.complete(t)}};rc.add(vme);function Tme(t,e,i){if(Array.isArray(t)&&Array.isArray(t[0])){let n=t.map(r=>{let{ticker:s=new ls,...a}=r[2]||{};return[r[0],r[1],{driver:o=>{let l=({lastTime:h})=>o(h);return{start:(h=!0)=>{s.add(l),s.start()},stop:()=>s.remove(l),now:()=>s.lastTime}},...a}]});return ON(n,e)}else{let{ticker:n=new ls}=i||{};return ON(t,e,{driver:r=>{let s=({lastTime:a})=>r(a);return{start:(a=!0)=>{n.add(s),n.start()},stop:()=>n.remove(s),now:()=>n.lastTime}},...i||{}})}}var P$=Tme,dt=new cme;lc.init({getScreen:()=>dt.screen});var Eme=Object.defineProperty,Sme=(t,e,i)=>e in t?Eme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ss=(t,e,i)=>Sme(t,typeof e!="symbol"?e+"":e,i),Hs;(t=>(t.log=(e,...i)=>console.log(`[Pixi’VN] ${e}`,...i),t.warn=(e,...i)=>console.warn(`[Pixi’VN] ${e}`,...i),t.error=(e,...i)=>console.error(`[Pixi’VN] ${e}`,...i),t.info=(e,...i)=>console.info(`[Pixi’VN] ${e}`,...i)))(Hs||(Hs={}));var Yr=class Vi{static init(e){Vi._getStepCounter=e.getStepCounter,Vi._setStepCounter=e.setStepCounter,Vi._getCurrentGameStepState=e.getCurrentGameStepState,Vi._restoreGameStepState=e.restoreGameStepState,Vi._getOpenedLabels=e.getOpenedLabels,e.onGoNextEnd&&(Vi._onGoNextEnd=e.onGoNextEnd),Vi._getVariable=e.getVariable,Vi._setVariable=e.setVariable,Vi._removeVariable=e.removeVariable,Vi._getFlag=e.getFlag,Vi._setFlag=e.setFlag,e.onLabelClosing&&(Vi._onLabelClosing=e.onLabelClosing),Vi._addHistoryItem=e.addHistoryItem,Vi._getCurrentStepsRunningNumber=e.getCurrentStepsRunningNumber,Vi._getCharacter=e.getCharacter}static get stepCounter(){return Vi._getStepCounter()}static set stepCounter(e){Vi._setStepCounter(e)}static get currentGameStepState(){return Vi._getCurrentGameStepState()}static get restoreGameStepState(){return Vi._restoreGameStepState}static get openedLabels(){return Vi._getOpenedLabels()}static get onGoNextEnd(){return Vi._onGoNextEnd}static get getVariable(){return Vi._getVariable}static get setVariable(){return Vi._setVariable}static get removeVariable(){return Vi._removeVariable}static get getFlag(){return Vi._getFlag}static get setFlag(){return Vi._setFlag}static get onLabelClosing(){return Vi._onLabelClosing}static get addHistoryItem(){return Vi._addHistoryItem}static get currentStepsRunningNumber(){return Vi._getCurrentStepsRunningNumber()}static get getCharacter(){return Vi._getCharacter}};ss(Yr,"_getStepCounter",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_setStepCounter",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_getCurrentGameStepState",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_restoreGameStepState",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_getOpenedLabels",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_onGoNextEnd",async()=>{}),ss(Yr,"_getVariable",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_setVariable",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_removeVariable",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_getFlag",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_setFlag",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_onLabelClosing",()=>{}),ss(Yr,"_addHistoryItem",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_getCurrentStepsRunningNumber",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented, you should initialize the Game: Game.init()")}),ss(Yr,"_getCharacter",()=>{throw Hs.error("Method not implemented, you should initialize the Game: Game.init()"),new Error("Method not implemented.")}),ss(Yr,"onEnd"),ss(Yr,"onError");var ht=Yr,ym=class ta{constructor(){}static clearOldTempVariables(e){ta.tempStorageDeadlines.forEach((i,n)=>{i>e&&(ta.tempStorage.delete(n),ta.tempStorageDeadlines.delete(n),ta.storage.cache.delete(n))})}static setVariable(e,i){let n=ta.tempStorage.has(e);i==null?(ta.storage.map.delete(e),!n&&ta.storage.cache.delete(e)):(ta.storage.map.set(e,i),!n&&ta.storage.cache.set(e,i))}static getVariable(e){let i=ta.storage.cache.get(e);return i===void 0&&(i=ta.tempStorage.get(e)),i===void 0&&(i=ta.storage.map.get(e)),Hi(i)}static removeVariable(e){ta.storage.delete(e)}static setFlag(e,i){if(i)this.flags.includes(e)||this.flags.push(e);else{let n=this.flags.indexOf(e);n>-1&&this.flags.splice(n,1)}}static getFlag(e){return this.flags.includes(e)}};Ne(ym,"storage",new ac({cacheSize:20})),Ne(ym,"startingStorage",[]),Ne(ym,"flags",Array()),Ne(ym,"tempStorage",new Map),Ne(ym,"tempStorageDeadlines",new Map);var ui=ym,Ame=class{get storage(){return ui.storage.map}get cache(){return ui.storage.cache}get flags(){return ui.flags}get tempStorage(){return ui.tempStorage}get tempStorageDeadlines(){return ui.tempStorageDeadlines}set startingStorage(e){let i=ht.stepCounter===0;Object.entries(e).forEach(([n,r])=>{ui.startingStorage.push({key:n,value:r}),i&&ui.storage.set(n,r)})}set(e,i){return ui.setVariable(e,i)}setVariable(e,i){return this.set(e,i)}get(e){return ui.getVariable(e)}getVariable(e){return this.get(e)}removeVariable(e){return ui.removeVariable(e)}setTempVariable(e,i){if(i==null){this.removeTempVariable(e);return}else ui.tempStorage.set(e,i),ui.storage.cache.set(e,i),ui.tempStorageDeadlines.has(e)||ui.tempStorageDeadlines.set(e,ht.openedLabels)}removeTempVariable(e){ui.tempStorage.has(e)&&(ui.tempStorage.delete(e),ui.tempStorageDeadlines.delete(e),ui.storage.cache.delete(e))}setFlag(e,i){return ui.setFlag(e,i)}getFlag(e){return ui.getFlag(e)}clear(){this.storage.clear(),this.cache.clear(),ui.flags=[],ui.tempStorage.clear(),ui.tempStorageDeadlines.clear(),ui.startingStorage.forEach(({key:e,value:i})=>{this.storage.set(e,i)})}export(){let e=[];[...this.storage.keys()].forEach(r=>{e.push({key:r,value:this.storage.get(r)})});let i=[];[...ui.tempStorage.keys()].forEach(r=>{i.push({key:r,value:ui.tempStorage.get(r)})});let n=[];return[...ui.tempStorageDeadlines.keys()].forEach(r=>{n.push({key:r,value:ui.tempStorageDeadlines.get(r)})}),Hi({base:e,temp:i,tempDeadlines:n,flags:ui.flags})}restore(e){this.clear();try{e?(Array.isArray(e)&&e.forEach(i=>{if(i.key==="___temp_storage___"){let n=i.value;Object.entries(n).forEach(([r,s])=>{ui.tempStorage.set(r,s)})}else if(i.key==="___temp_storage_deadlines___"){let n=i.value;Object.entries(n).forEach(([r,s])=>{ui.tempStorageDeadlines.set(r,s)})}else i.key==="___flags___"?i.value.forEach(n=>{ui.flags.push(n)}):this.storage.set(i.key,i.value)}),"base"in e&&"temp"in e&&"tempDeadlines"in e?(e.base?.forEach(i=>{this.storage.set(i.key,i.value)}),e.temp?.forEach(i=>{ui.tempStorage.set(i.key,i.value)}),e.tempDeadlines?.forEach(i=>{ui.tempStorageDeadlines.set(i.key,i.value)})):Object.entries(e).forEach(([i,n])=>{i==="___temp_storage___"?Object.entries(n).forEach(([r,s])=>{ui.tempStorage.set(r,s)}):i==="___temp_storage_deadlines___"?Object.entries(n).forEach(([r,s])=>{ui.tempStorageDeadlines.set(r,s)}):i==="___flags___"?n.forEach(r=>{ui.flags.push(r)}):this.storage.set(i,n)})):ke.warn("No storage data found")}catch(i){ke.error("Error importing data",i)}}},Cme=class{constructor(e,i){Ne(this,"id"),Ne(this,"categoryId"),this.categoryId=e,this.id=i}setStorageProperty(e,i){let n=ui.getVariable(this.categoryId);n||(n={}),n.hasOwnProperty(this.id)||(n[this.id]={}),i==null?n[this.id].hasOwnProperty(e)&&delete n[this.id][e]:n[this.id]={...n[this.id],[e]:i},Object.keys(n[this.id]).length===0&&delete n[this.id],ui.setVariable(this.categoryId,n)}getStorageProperty(e,i=this.id){let n=ui.getVariable(this.categoryId);if(n&&n.hasOwnProperty(i)&&n[i].hasOwnProperty(e))return n[i][e]}},Nu=new Ame,di={CURRENT_DIALOGUE_MEMORY_KEY:"___current_dialogue_memory___",LAST_DIALOGUE_ADDED_IN_STEP_MEMORY_KEY:"___last_dialogue_added_in_step_memory___",CURRENT_MENU_OPTIONS_MEMORY_KEY:"___current_menu_options_memory___",LAST_MENU_OPTIONS_ADDED_IN_STEP_MEMORY_KEY:"___last_menu_options_added_in_step_memory___",CURRENT_INPUT_VALUE_MEMORY_KEY:"_input_value_",LAST_INPUT_ADDED_IN_STEP_MEMORY_KEY:"___last_input_added_in_step_memory___",CURRENT_INPUT_INFO_MEMORY_KEY:"___current_input_info_memory___",CHARACTER_CATEGORY_KEY:"___character___",ADD_NEXT_DIALOG_TEXT_INTO_THE_CURRENT_DIALOG_FLAG_KEY:"___glue___",OPENED_LABELS_COUNTER_KEY:"___opened_labels_counter___",ALL_CHOICES_MADE_KEY:"___all_choices_made___",CURRENT_STEP_TIMES_COUNTER_KEY:"___current_step_times_counter___",LAST_STEP_GLUED:"___last_step_glued___"},wme="@",Dme=class extends Cme{constructor(e,i=""){super(di.CHARACTER_CATEGORY_KEY,e+(i?wme+i:"")),Ne(this,"sourceId"),this.sourceId=e}getStorageProperty(e){let i=super.getStorageProperty(e);return i===void 0&&(i=super.getStorageProperty(e,this.sourceId)),i}},__=class extends Dme{constructor(e,i){super(typeof e=="string"?e:e.id,typeof e=="string"?"":e.emotion),Ne(this,"defaultName"),Ne(this,"defaultSurname"),Ne(this,"defaultAge"),Ne(this,"_icon"),Ne(this,"_color"),this.defaultName=i.name,this.defaultSurname=i.surname,this.defaultAge=i.age,this._icon=i.icon,this._color=i.color}get name(){return this.getStorageProperty("name")||this.defaultName||this.id}set name(e){this.setStorageProperty("name",e)}get surname(){return this.getStorageProperty("surname")||this.defaultSurname}set surname(e){this.setStorageProperty("surname",e)}get age(){return this.getStorageProperty("age")||this.defaultAge}set age(e){this.setStorageProperty("age",e)}get icon(){return this._icon}get color(){return this._color}},om=new ac({cacheSize:10}),qP;(t=>{function e(a){try{let o=om.get(a);if(!o){ke.warn(`Character "${a}" not found, did you forget to register it with the RegisteredCharacters.add?`);return}return o}catch(o){ke.error(`Error while getting Character "${a}"`,o);return}}t.get=e;function i(a){if(Array.isArray(a)){a.forEach(o=>i(o));return}om.get(a.id)&&ke.info(`Character id "${a.id}" already exists, it will be overwritten`),om.set(a.id,a)}t.add=i;function n(){return Array.from(om.values())}t.values=n;function r(a){return om.has(a)}t.has=r;function s(){return Array.from(om.keys())}t.keys=s})(qP||(qP={}));var M$=qP,Rme={Date:!0,RegExp:!0,String:!0,Number:!0};function B$(t,e,i={cyclesFix:!0},n=[]){let r=[],s=Array.isArray(t);for(let o in t){let l=t[o],h=s?+o:o;if(!(o in e)){r.push({type:"REMOVE",path:[h],oldValue:t[o]});continue}let d=e[o],p=typeof l=="object"&&typeof d=="object"&&Array.isArray(l)===Array.isArray(d);l&&d&&p&&!Rme[Object.getPrototypeOf(l)?.constructor?.name]&&(!i.cyclesFix||!n.includes(l))?r.push.apply(r,B$(l,d,i,i.cyclesFix?n.concat([l]):[]).map(g=>(g.path.unshift(h),g))):l!==d&&!(Number.isNaN(l)&&Number.isNaN(d))&&!(p&&(isNaN(l)?l+""==d+"":+l==+d))&&r.push({path:[h],type:"CHANGE",value:d,oldValue:l})}let a=Array.isArray(e);for(let o in e)o in t||r.push({type:"CREATE",path:[a?+o:o],value:e[o]});return r}function Pme(t,e){let i=Hi(t);return e.length>1&&"type"in e[0]&&(e=e.reverse()),e.forEach(n=>{"type"in n?Mme(i,n):Bme(i,n)}),i}function Mme(t,e){let i=t;e.path&&e.path.length>0?e.path.forEach((n,r)=>{if(e.path&&r===e.path.length-1)switch(e.type){case"CHANGE":case"REMOVE":i[n]=e.oldValue;break;case"CREATE":Array.isArray(i)&&typeof n=="number"?i.splice(n,1):delete i[n];break}else i=i[n]}):ke.warn("No path found, skipping diff",e)}function Bme(t,e){let i=t;e.path&&e.path.length>0?e.path.forEach((n,r)=>{if(e.path&&r===e.path.length-1){if(e.kind==="E"||e.kind==="D")i[n]=e.lhs;else if(e.kind==="N")Number.isInteger(n)?Array.isArray(i)&&i.splice(n,1):typeof n=="string"&&delete i[n];else if(e.kind==="A"){let s=e.index;e.item.kind==="N"?i[n].splice(s,1):e.item.kind==="E"||e.item.kind==="D"?i[n][s]=e.item.lhs:e.item.kind==="A"?ke.warn("Nested array found, skipping diff",e):ke.warn("No array found, skipping diff",e)}}else i=i[n]}):ke.warn("No path found, skipping diff",e)}var Xd=class NT{static get originalStepData(){return NT._originalStepData?Hi(NT._originalStepData):{path:"",storage:{},canvas:{elementAliasesOrder:[],elements:{},stage:{},tickers:{},tickersSteps:{},tickersOnPause:{},tickersToCompleteOnStepEnd:{tikersIds:[],stepAlias:[]}},sound:{soundAliasesOrder:[],soundsPlaying:{},playInStepIndex:{},filters:void 0},labelIndex:-1,openedLabels:[]}}static set originalStepData(e){NT._originalStepData=Hi(e)}};Ne(Xd,"_diffHistory",new ac({cacheSize:5})),Ne(Xd,"_stepsInfoHistory",new ac({cacheSize:5})),Ne(Xd,"_narrationHistory",new ac({cacheSize:50})),Ne(Xd,"stepLimitSaved",20),Ne(Xd,"goBackRunning",!1),Ne(Xd,"_originalStepData");var wt=Xd,kme=class{get stepsInfoMap(){return wt._stepsInfoHistory}get diffMap(){return wt._diffHistory}get narrationMap(){return wt._narrationHistory}get size(){return wt._stepsInfoHistory.size}get lastKey(){return this.size===0?null:Math.max(...Array.from(this.keys()))}keys(){return wt._stepsInfoHistory.keys()}get(e){let i=wt._narrationHistory.get(e);if(!(i&&Object.keys(i).length===1&&i.stepIndex!==void 0))return i}delete(e){wt._stepsInfoHistory.delete(e),wt._diffHistory.delete(e),wt._narrationHistory.delete(e)}internalRestoreOldGameState(e,i){if(e<=0||this.size==0)return i;let n=this.lastKey;if(typeof n!="number")return ke.error("You can't go back, there is no step to go back"),i;let r=wt._diffHistory.get(n);if(r)try{let s=Pme(i,r);return ht.stepCounter=n,this.delete(n),this.internalRestoreOldGameState(e-1,s)}catch(s){return ke.error("Error applying diff",s),i}else return ke.error("You can't go back, there is no step to go back"),i}async goBack(e,i=1){return await this.back(e,i)}async back(e,i=1){if(i<=0){ke.warn("The parameter steps must be greater than 0");return}if(wt._diffHistory.size<1){ke.warn("You can't go back, there is no step to go back");return}if(wt.goBackRunning){ke.warn("Go back is already running");return}wt.goBackRunning=!0;try{let n=Hi(this.internalRestoreOldGameState(i,wt.originalStepData));if(n){await ht.restoreGameStepState(n,e);let r=ht.stepCounter-1,s=wt._narrationHistory.get(r);if(s&&Object.keys(s).length===1&&s.stepIndex!==void 0){let a=wt._stepsInfoHistory.get(r);if(a){let o=this.itemMapper({step:a});wt._narrationHistory.set(a.index,o)}}}else ke.error("Error going back");wt.originalStepData=n,wt.goBackRunning=!1}catch(n){ke.error("Error going back",n),wt.goBackRunning=!1}}add(e,i={}){let n=wt.originalStepData,{ignoreSameStep:r}=i,s=ht.currentGameStepState;if(!r&&this.isSameStep(n,s))return;let a=this.lastKey;(async()=>{try{let o,l;if(typeof a=="number"&&(o=wt._stepsInfoHistory.get(a),l=wt._narrationHistory.get(a)),wt._stepsInfoHistory.set(e.index,e),e.index!==0){let p=B$(n,s);p?wt._diffHistory.set(e.index,p):ke.warn("It was not possible to create the difference between the two steps")}let h={},d=this.itemMapper({step:e},h);if(wt._narrationHistory.set(e.index,d),o&&l&&typeof a=="number"){let p=this.itemMapper({...h,step:o},{});wt._narrationHistory.set(a,p)}}catch(o){ke.error("Error adding history step",o)}})(),wt.originalStepData=s}itemMapper(e,i){let{step:n,choiceIndexMade:r,inputValue:s,removeDialogue:a}=e,o=n.dialogue||n.dialoge;i&&n.isGlued&&(i.removeDialogue=!0),a&&(o=void 0);let l=n.choices;if(i&&n.currentLabel&&n.choiceIndexMade!==void 0&&(i.choiceIndexMade=n.choiceIndexMade),n.inputValue&&i&&(i.inputValue=n.inputValue),o||l||s){let h=l?.map((d,p)=>{let g=!1;return d.oneTime&&n.alreadyMadeChoices&&n.alreadyMadeChoices.includes(p)&&(g=!0),{text:d.text,type:d.type,isResponse:!1,hidden:g}});if(h){if(h.every(d=>d.hidden)){let d=h.find(p=>p.hidden===!1);d&&(d.hidden=!1)}r!==void 0&&(h[r].isResponse=!0)}return{dialogue:o?{...o,character:o.character?ht.getCharacter(o.character)||o.character:void 0}:void 0,playerMadeChoice:typeof r=="number",choices:h,stepIndex:n.index,inputValue:s}}return{stepIndex:n.index}}get narrativeHistory(){let e=[];return Array.from(this.keys()).sort((i,n)=>i-n).forEach(i=>{let n=this.get(i);n&&e.push(n)}),e}get currentLabelHistory(){let e=[],i=Array.from(this.keys()).sort((l,h)=>h-l);if(i.length===0)return e;let n=i[0];if(typeof n!="number")return e;let r=wt._stepsInfoHistory.get(n);if(!r)return e;let s=r.openedLabels;if(!s||!Array.isArray(s)||s.length===0)return e;let a=s[0].currentStepIndex,o=s[0].label;return i.every((l,h)=>{let d=this.get(l);if(d){if(h===0)return e.push(d),!0;let p=wt._stepsInfoHistory.get(l);if(!p)return!0;let g=p.openedLabels;if(!g||!Array.isArray(g)||g.length===0||g[0].label!==o||g[0].currentStepIndex>=a)return!1;a=g[0].currentStepIndex,e.push(d)}return!0}),e.reverse()}removeNarrativeHistory(e){if(e){let i=Array.from(this.keys()).sort((n,r)=>n-r);i=i.slice(0,e),i.forEach(n=>{wt._narrationHistory.delete(n),wt._stepsInfoHistory.delete(n),wt._diffHistory.delete(n)})}else wt._stepsInfoHistory.clear(),wt._diffHistory.clear(),wt._narrationHistory.clear()}get canGoBack(){let e=this.lastKey;return typeof e!="number"?!1:wt._diffHistory.has(e)}blockGoBack(){ht.currentStepsRunningNumber===0&&wt._diffHistory.clear()}isSameStep(e,i){if(e.openedLabels.length===i.openedLabels.length)try{let n=JSON.stringify(e.openedLabels),r=JSON.stringify(i.openedLabels);if(n===r&&e.path===i.path&&e.labelIndex===i.labelIndex)return!0}catch(n){return ke.error("Error comparing opened labels",n),!0}return!1}clear(){wt._stepsInfoHistory.clear(),wt._diffHistory.clear(),wt._narrationHistory.clear(),wt._originalStepData=void 0}get stepLimitSaved(){return wt.stepLimitSaved}set stepLimitSaved(e){wt.stepLimitSaved=e}export(){let e=Array.from(this.keys()).sort((n,r)=>n-r);e.length>this.stepLimitSaved&&(e=e.slice(e.length-this.stepLimitSaved));let i=[];return e.forEach(n=>{let r=wt._stepsInfoHistory.get(n);if(r){let s=wt._diffHistory.get(n);i.push({...r,diff:s})}}),{stepsHistory:Hi(i),originalStepData:Hi(wt._originalStepData)}}restoreNarrativeHistory(){let e=Array.from(this.keys()).sort((n,r)=>n-r),i={};e.forEach(n=>{let r=wt._stepsInfoHistory.get(n);if(r){let s={...i};i={};let a=this.itemMapper({step:r,choiceIndexMade:s.choiceIndexMade,inputValue:s.inputValue,removeDialogue:s.removeDialogue},i);a&&wt._narrationHistory.set(n,a)}})}async restore(e){this.clear();try{e.hasOwnProperty("stepsHistory")?(e.stepsHistory.forEach(i=>{i.diff&&wt._diffHistory.set(i.index,i.diff);let n={...i,diff:void 0};wt._stepsInfoHistory.set(i.index,n)}),this.restoreNarrativeHistory()):ke.warn("Could not import stepsHistory data, so will be ignored"),e.hasOwnProperty("originalStepData")?wt._originalStepData=e.originalStepData:ke.warn("Could not import originalStepData data, so will be ignored")}catch(i){ke.error("Error importing data",i)}}},xh=new kme,um=new ac({cacheSize:10}),WP;(t=>{function e(a){let o=um.get(a);if(!o){ke.error(`Label "${a}" not found`);return}return o}t.get=e;function i(a){if(Array.isArray(a)){a.forEach(o=>i(o));return}um.has(a.id)&&ke.info(`Label "${a.id}" already exists, it will be overwritten`),um.set(a.id,a)}t.add=i;function n(){return Array.from(um.values())}t.values=n;function r(a){return um.has(a)}t.has=r;function s(){return Array.from(um.keys())}t.keys=s})(WP||(WP={}));var of=WP,nu=class Ht{constructor(){}static get allOpenedLabels(){return ht.getVariable(di.OPENED_LABELS_COUNTER_KEY)||{}}static set allOpenedLabels(e){ht.setVariable(di.OPENED_LABELS_COUNTER_KEY,e)}static getCurrentStepTimesCounterData(e=""){let i=Ht.currentLabelStepIndex;if(i===null)return ke.error("currentLabelStepIndex is null"),null;let n=`${i}${e}`,r=Ht.currentLabelId,s=Ht._currentLabel;if(!r||i===null||!s)return ke.error("currentLabelId or currentLabelStepIndex is null or currentLabel not found"),null;let a=s.getStepSha(i)||"error",o=ht.getVariable(di.CURRENT_STEP_TIMES_COUNTER_KEY)||{};return o[r]||(o[r]={}),(!o[r][n]||o[r][n].stepSha1!=a)&&(o[r][n]={stepSha1:a}),o[r][n]}static setCurrentStepTimesCounterData(e="",i){let n=Ht.currentLabelStepIndex,r=n+e,s=Ht.currentLabelId;if(!s||n===null){ke.error("currentLabelId or currentLabelStepIndex is null");return}let a=ht.getVariable(di.CURRENT_STEP_TIMES_COUNTER_KEY)||{};a[s]||(a[s]={}),a[s][r]=i,ht.setVariable(di.CURRENT_STEP_TIMES_COUNTER_KEY,a)}static getCurrentStepTimesCounter(e=""){let i=Ht._stepCounter,n=Ht.getCurrentStepTimesCounterData(e);if(!n)return ke.error("getCurrentStepTimesCounter obj is null"),0;let r=n.stepCounters||n.lastStepIndexs||[];return r.find(s=>s===i)||(r.push(i),delete n.lastStepIndexs,n.stepCounters=r,Ht.setCurrentStepTimesCounterData(e,n)),r.length}static getRandomNumber(e,i,n={}){let r=n.nestedId||"";if(n.onceOnly){let s=Ht.getCurrentStepTimesCounterData(r);if(!s)return;let a=s.usedRandomNumbers||{},o=Array.from({length:i-e+1},(d,p)=>p+e).filter(d=>!a[`${e}-${i}`]?.includes(d));if(o.length===0)return;let l=Math.floor(Math.random()*o.length),h=o[l];return a[`${e}-${i}`]||(a[`${e}-${i}`]=[]),a[`${e}-${i}`].push(h),s.usedRandomNumbers=a,Ht.setCurrentStepTimesCounterData(r,s),h}return Math.floor(Math.random()*(i-e+1))+e}static resetCurrentStepTimesCounter(e=""){let i=Ht.currentLabelStepIndex,n=i+e,r=Ht.currentLabelId;if(!r||i===null){ke.error("currentLabelId or currentLabelStepIndex is null");return}let s=ht.getVariable(di.CURRENT_STEP_TIMES_COUNTER_KEY)||{};s[r]||(s[r]={}),s[r][n]={stepCounters:[],stepSha1:""},ht.setVariable(di.CURRENT_STEP_TIMES_COUNTER_KEY,s)}static get allChoicesMade(){return ht.getVariable(di.ALL_CHOICES_MADE_KEY)||[]}static set allChoicesMade(e){ht.setVariable(di.ALL_CHOICES_MADE_KEY,e)}static increaseStepCounter(){Ht._stepCounter++}static get openedLabels(){return Hi(Ht._openedLabels)}static set openedLabels(e){Ht._openedLabels=Hi(e)}static get originalOpenedLabels(){return Hi(Ht._originalOpenedLabels)}static set originalOpenedLabels(e){Ht._originalOpenedLabels=Hi(e)}static get _currentLabel(){if(Ht.currentLabelId)return of.get(Ht.currentLabelId)}static get currentLabelId(){if(Ht._openedLabels.length>0)return Ht._openedLabels[Ht._openedLabels.length-1].label}static get currentLabelStepIndex(){return Ht._openedLabels.length>0?Ht._openedLabels[Ht._openedLabels.length-1].currentStepIndex:null}static addLabelHistory(e,i){let n=Ht.allOpenedLabels,r=Ht.allOpenedLabels[e]?.biggestStep||0,s=Ht.allOpenedLabels[e]?.openCount||0;(!r||r<i)&&(n[e]={biggestStep:i,openCount:s},Ht.allOpenedLabels=n)}static addChoicesMade(e,i,n,r){let s=Ht.allChoicesMade,a=s.findIndex(o=>o.labelId===e&&o.stepIndex===i&&o.choiceIndex===r&&o.stepSha1===n);a<0?s.push({labelId:e,stepIndex:i,choiceIndex:r,stepSha1:n,madeTimes:1}):s[a].madeTimes++,Ht.allChoicesMade=s}static pushNewLabel(e){if(!of.get(e))throw new Error(`[Pixi’VN] Label ${e} not found`);Ht._openedLabels.push({label:e,currentStepIndex:0});let i=Ht.allOpenedLabels,n=Ht.allOpenedLabels[e]?.biggestStep||0,r=Ht.allOpenedLabels[e]?.openCount||0;i[e]={biggestStep:n,openCount:r+1},Ht.allOpenedLabels=i}static increaseCurrentStepIndex(){if(Ht._openedLabels.length>0){let e=Ht._openedLabels[Ht._openedLabels.length-1];Ht._openedLabels[Ht._openedLabels.length-1]={...e,currentStepIndex:e.currentStepIndex+1}}}static set onStepStart(e){Ht._onStepStart=e}static get onStepStart(){return async(e,i)=>{let n=[];return Ht.onLoadingLabel&&e===0&&n.push(Ht.onLoadingLabel(e,i)),Ht._onStepStart&&n.push(Ht._onStepStart(e,i)),await Promise.all(n)}}};Ne(nu,"stepsRunning",0),Ne(nu,"continueRequests",0),Ne(nu,"choiceMadeTemp"),Ne(nu,"lastHistoryStep",null),Ne(nu,"_stepCounter",0),Ne(nu,"_openedLabels",[]),Ne(nu,"_originalOpenedLabels",[]),Ne(nu,"_onStepStart"),Ne(nu,"onLoadingLabel"),Ne(nu,"onStepEnd");var nt=nu,Ome=class{get currentStepTimesCounter(){return nt.getCurrentStepTimesCounter()}set currentStepTimesCounter(t){nt.resetCurrentStepTimesCounter()}getRandomNumber(t,e,i={}){return nt.getRandomNumber(t,e,i)}get stepCounter(){return nt._stepCounter}get openedLabels(){return nt.openedLabels}get currentLabel(){return nt._currentLabel}addStepHistory(t,e={}){let{choiceMade:i,ignoreSameStep:n}=e,r,s,a,o=ht.getVariable(di.LAST_STEP_GLUED)===this.stepCounter;ht.getVariable(di.LAST_DIALOGUE_ADDED_IN_STEP_MEMORY_KEY)===this.stepCounter&&(r=ht.getVariable(di.CURRENT_DIALOGUE_MEMORY_KEY)),ht.getVariable(di.LAST_MENU_OPTIONS_ADDED_IN_STEP_MEMORY_KEY)===this.stepCounter&&(s=ht.getVariable(di.CURRENT_MENU_OPTIONS_MEMORY_KEY)),ht.getVariable(di.LAST_INPUT_ADDED_IN_STEP_MEMORY_KEY)===this.stepCounter&&(a=ht.getVariable(di.CURRENT_INPUT_VALUE_MEMORY_KEY));let l=nt.openedLabels,h={currentLabel:nt.currentLabelId,dialogue:r,choices:s,stepSha1:t,index:this.stepCounter,labelStepIndex:nt.currentLabelStepIndex,choiceIndexMade:i,inputValue:a,alreadyMadeChoices:this.alreadyCurrentStepMadeChoices,isGlued:o,openedLabels:l};nt.originalOpenedLabels=l,ht.addHistoryItem(h,{ignoreSameStep:n}),nt.lastHistoryStep=h,nt.increaseStepCounter()}closeCurrentLabel(){if(!nt.currentLabelId){ke.warn("No label to close");return}if(!this.currentLabel){ke.error("currentLabel not found");return}let t=nt.openedLabels;t.pop(),nt.openedLabels=t,ht.onLabelClosing(this.openedLabels.length)}closeAllLabels(){for(;nt.openedLabels.length>0;)this.closeCurrentLabel(),ht.onLabelClosing(this.openedLabels.length)}isLabelAlreadyCompleted(t){let e;typeof t=="string"?e=t:e=t.id;let i=nt.allOpenedLabels[e]?.biggestStep||0;if(i){let n=of.get(e);if(n)return n.stepCount<=i}return!1}get alreadyCurrentStepMadeChoicesObj(){let t=nt.currentLabelStepIndex,e=this.currentLabel;if(t===null||!e)return;let i=e.getStepSha(t);return i||(ke.warn("stepSha not found, setting to ERROR"),i="error"),nt.allChoicesMade.filter(n=>n.labelId===e?.id&&n.stepIndex===t&&n.stepSha1===i)}get alreadyCurrentStepMadeChoices(){return this.alreadyCurrentStepMadeChoicesObj?.map(t=>t.choiceIndex)}get isCurrentStepAlreadyOpened(){let t=nt.currentLabelId;if(t){let e=nt.allOpenedLabels[t]?.openCount||0;if(nt.currentLabelStepIndex&&e>=nt.currentLabelStepIndex)return!0}return!1}getTimesLabelOpened(t){return nt.allOpenedLabels[t]?.openCount||0}getTimesChoiceMade(t){return this.alreadyCurrentStepMadeChoicesObj?.find(e=>e.choiceIndex===t)?.madeTimes||0}addCurrentStepToHistory(){this.addStepHistory("dev",{ignoreSameStep:!0})}getCanContinue(t){let e=t?.showWarn||!1,i=this.choices;return i&&i.length>0?(e&&ke.warn("The player must make a choice"),!1):this.isRequiredInput?(e&&ke.warn("The player must enter a value"),!1):!0}get canContinue(){return nt.stepsRunning!==0?!1:this.getCanContinue()}get canGoNext(){return this.canContinue}async onStepRun(t,e){let i=[];return t.onStepStart&&i.push(t.onStepStart(e,t)),nt.onStepStart&&i.push(nt.onStepStart(e,t)),await Promise.all(i)}async onStepEnd(t,e){let i=[];return t.onStepEnd&&i.push(t.onStepEnd(e,t)),nt.onStepEnd&&i.push(nt.onStepEnd(e,t)),await Promise.all(i)}async goNext(t,e={}){return await this.continue(t,e)}async continue(t,e={}){let{runNow:i=!1}=e;if(!(!i&&!this.getCanContinue({showWarn:!0}))){if(!i&&nt.stepsRunning!==0){nt.continueRequests++;return}try{this.currentLabel&&await this.onStepEnd(this.currentLabel,nt.currentLabelStepIndex||0)}catch(n){ke.error("Error running onStepEnd",n)}return nt.stepsRunning===0&&await ht.onGoNextEnd(),nt.increaseCurrentStepIndex(),await this.runCurrentStep(t,e)}}async runCurrentStep(t,e={}){let{choiceMade:i}=e;if(nt.currentLabelId){let n=nt.currentLabelStepIndex;if(n===null){ke.error("currentLabelStepIndex is null");return}let r=nt._currentLabel;if(!r){ke.error("currentLabel not found");return}if(r.stepCount>n){try{await this.onStepRun(r,n)}catch(o){ke.error("Error running onStepStart",o),this.onStepError&&this.onStepError(o,t);return}let s=r.getStepById(n);if(!s){ke.error("step not found");return}let a=r.getStepSha(n);a||(ke.warn("stepSha not found, setting to ERROR"),a="error");try{nt.stepsRunning++;let o=await s(t,{labelId:r.id}),l=this.choices;if(l?.length===1&&l[0].autoSelect){let d=l[0];o=await this.selectChoice(d,t)}let h=nt.lastHistoryStep;if(i!==void 0&&h){let d=h.stepSha1;d||(ke.warn("stepSha not found, setting to ERROR"),d="error"),nt.addChoicesMade(h.currentLabel||"error",typeof h.labelStepIndex=="number"?h.labelStepIndex:-1,h.stepSha1||"error",i),nt.choiceMadeTemp=i}return nt.stepsRunning--,nt.stepsRunning===0&&(nt.addLabelHistory(r.id,n),this.addStepHistory(a,{...e,choiceMade:nt.choiceMadeTemp}),nt.choiceMadeTemp=void 0,nt.continueRequests>0)?(nt.continueRequests--,await this.continue(t)):o}catch(o){nt.stepsRunning>0&&nt.stepsRunning--,ke.error("Error running step",o),this.onStepError&&this.onStepError(o,t);return}}else{if(this.openedLabels.length>1)return this.closeCurrentLabel(),await this.continue(t,e);if(this.openedLabels.length===1)return nt.openedLabels=[],ht.onEnd?await ht.onEnd(t,{labelId:"end"}):void 0}}else if(this.openedLabels.length===0){if(nt.openedLabels=nt.originalOpenedLabels,ht.onEnd)return await ht.onEnd(t,{labelId:"end"});ke.error("The end of the game is not managed, so the game is blocked. Read this documentation to know how to manage the end of the game: https://pixi-vn.web.app/start/other-narrative-features.html#how-manage-the-end-of-the-game");return}else ke.error("currentLabelId not found")}async callLabel(t,e,i){return await this.call(t,e,i)}async call(t,e,i){let{choiceMade:n}=i||{},r;typeof t=="string"?r=t:r=t.id;try{let s=of.get(r);if(!s)throw new Error(`[Pixi’VN] Label ${r} not found`);try{this.currentLabel&&await this.onStepEnd(this.currentLabel,nt.currentLabelStepIndex||0)}catch(a){ke.error("Error running onStepEnd",a)}nt.pushNewLabel(s.id)}catch(s){ke.error("Error calling label",s);return}return await this.runCurrentStep(e,{choiceMade:n})}async jumpLabel(t,e,i){return await this.jump(t,e,i)}async jump(t,e,i){this.openedLabels.length>0&&this.closeCurrentLabel();let{choiceMade:n}=i||{},r;typeof t=="string"?r=t:r=t.id;try{let s=of.get(r);if(!s)throw new Error(`[Pixi’VN] Label ${r} not found`);try{this.currentLabel&&await this.onStepEnd(this.currentLabel,nt.currentLabelStepIndex||0)}catch(a){ke.error("Error running onStepEnd",a)}nt.pushNewLabel(s.id)}catch(s){ke.error("Error jumping label",s);return}return await this.runCurrentStep(e,{choiceMade:n})}async selectChoice(t,e){this.choices=void 0;let i=t.type;switch(i){case"call":return await this.call(t.label,{...t.props,...e},{choiceMade:t.choiceIndex});case"jump":return await this.jump(t.label,{...t.props,...e},{choiceMade:t.choiceIndex});case"close":return await this.closeChoiceMenu(t,{...t.props,...e});default:throw ke.error(`Type ${i} not found`),new Error(`[Pixi’VN] Type ${i} not found`)}}async closeChoiceMenu(t,e){if(t.type!=="close")throw ke.error("For closeChoiceMenu, the type must be close"),new Error("[Pixi’VN] For closeChoiceMenu, the type must be close");let i;return typeof t.choiceIndex=="number"&&(i=t.choiceIndex),t.closeCurrentLabel&&this.closeCurrentLabel(),this.continue(e,{choiceMade:i})}get onStepError(){let t=ht.onError;return t?(e,i)=>t("step",e,i):void 0}set onStepError(t){ht.onError=(e,i,n)=>t(i,n)}get dialogue(){let t=ht.getVariable(di.CURRENT_DIALOGUE_MEMORY_KEY);if(t)return{...t,character:t.character?ht.getCharacter(t.character)||t.character:void 0}}set dialogue(t){if(t===void 0){ht.setVariable(di.CURRENT_DIALOGUE_MEMORY_KEY,void 0);return}if((typeof t=="string"||Array.isArray(t))&&(t={text:t}),this.dialogGlue){let e=ht.getVariable(di.CURRENT_DIALOGUE_MEMORY_KEY);if(e){let i=[];Array.isArray(e.text)?i=[...e.text]:i=[e.text],Array.isArray(t.text)?i=[...i,...t.text]:i=[...i,t.text],t.text=i,t.character=t.character||e.character}ht.setVariable(di.LAST_STEP_GLUED,this.stepCounter),this.dialogGlue=!1}try{ht.setVariable(di.CURRENT_DIALOGUE_MEMORY_KEY,Hi({...t,character:typeof t.character=="string"?t.character:t.character?.id})),ht.setVariable(di.LAST_DIALOGUE_ADDED_IN_STEP_MEMORY_KEY,this.stepCounter)}catch(e){throw ke.error("DialogueInterface cannot contain functions or classes"),e}}get choiceMenuOptions(){return this.choices}get choices(){let t=ht.getVariable(di.CURRENT_MENU_OPTIONS_MEMORY_KEY);if(t){let e=[],i=t.map((r,s)=>({...r,choiceIndex:s})),n=this.alreadyCurrentStepMadeChoices;if(i=i.filter((r,s)=>r.oneTime&&n&&n.includes(s)?!1:r.onlyHaveNoChoice?(e.push(r),!1):!0),i.length>0)return i;if(e.length>0)return[e[0]]}}set choiceMenuOptions(t){this.choices=t}set choices(t){if(!t||t.length===0){ht.setVariable(di.CURRENT_MENU_OPTIONS_MEMORY_KEY,void 0);return}try{ht.setVariable(di.CURRENT_MENU_OPTIONS_MEMORY_KEY,Hi(t)),ht.setVariable(di.LAST_MENU_OPTIONS_ADDED_IN_STEP_MEMORY_KEY,this.stepCounter)}catch(e){throw ke.error("ChoiceInterface cannot contain functions or classes"),e}}get dialogGlue(){return ht.getFlag(di.ADD_NEXT_DIALOG_TEXT_INTO_THE_CURRENT_DIALOG_FLAG_KEY)}set dialogGlue(t){ht.setFlag(di.ADD_NEXT_DIALOG_TEXT_INTO_THE_CURRENT_DIALOG_FLAG_KEY,t)}get inputValue(){return ht.getVariable(di.CURRENT_INPUT_VALUE_MEMORY_KEY)}set inputValue(t){this.removeInputRequest(),ht.setVariable(di.CURRENT_INPUT_VALUE_MEMORY_KEY,t),ht.setVariable(di.LAST_INPUT_ADDED_IN_STEP_MEMORY_KEY,this.stepCounter)}get isRequiredInput(){return ht.getVariable(di.CURRENT_INPUT_INFO_MEMORY_KEY)?.isRequired||!1}get inputType(){return ht.getVariable(di.CURRENT_INPUT_INFO_MEMORY_KEY)?.type}requestInput(t,e){t.isRequired=!0,ht.setVariable(di.CURRENT_INPUT_INFO_MEMORY_KEY,t),e!==void 0?ht.setVariable(di.CURRENT_INPUT_VALUE_MEMORY_KEY,e):ht.removeVariable(di.CURRENT_INPUT_VALUE_MEMORY_KEY)}removeInputRequest(){ht.removeVariable(di.CURRENT_INPUT_INFO_MEMORY_KEY),ht.removeVariable(di.CURRENT_INPUT_VALUE_MEMORY_KEY)}clear(){nt.openedLabels=[],nt._stepCounter=0}export(){return{openedLabels:Hi(nt.openedLabels),stepCounter:this.stepCounter}}async onLoadingLabel(t){let e=this.openedLabels.map(async i=>{let n=[],r=of.get(i.label);return r&&(r.onLoadingLabel&&n.push(r.onLoadingLabel(t,r)),nt.onLoadingLabel&&n.push(nt.onLoadingLabel(t,r))),await Promise.all(n)});return await Promise.all(e)}async restore(t,e){this.clear();try{nt.lastHistoryStep=e,t.hasOwnProperty("openedLabels")?(nt.openedLabels=t.openedLabels,nt.originalOpenedLabels=nt.openedLabels):ke.warn("Could not import openedLabels data, so will be ignored"),t.hasOwnProperty("stepCounter")?nt._stepCounter=t.stepCounter:t.hasOwnProperty("lastStepIndex")?nt._stepCounter=t.lastStepIndex:ke.warn("Could not import stepCounter data, so will be ignored");try{await this.onLoadingLabel(nt.currentLabelStepIndex||0)}catch(i){ke.error("Error running onLoadingLabel",i)}}catch(i){ke.error("Error importing data",i)}}};function Fme(t,e,i,n){let r=typeof e=="string"?e:e.id;return{...n,label:r,props:i,text:t,type:n?.type||"call"}}var Ime="close";function Lme(t,e){return{...e,type:Ime,text:t}}var Nme=vB(s9()),Ume=class{constructor(e,i){Ne(this,"id"),Ne(this,"_onStepStart"),Ne(this,"_onLoadingLabel"),Ne(this,"_onStepEnd"),this.id=e,this._onStepStart=i?.onStepStart,this._onLoadingLabel=i?.onLoadingLabel,this._onStepEnd=i?.onStepEnd}get onStepStart(){return async(e,i)=>{if(this._onLoadingLabel&&e===0&&await this._onLoadingLabel(e,i),this._onStepStart)return await this._onStepStart(e,i)}}get onLoadingLabel(){return this._onLoadingLabel}get onStepEnd(){return this._onStepEnd}},Gme=class extends Ume{constructor(t,e,i){super(t,i),Ne(this,"_steps"),this._steps=e}get stepCount(){return this.steps.length}getStepById(t){return this.steps[t]}get steps(){return typeof this._steps=="function"?this._steps():this._steps}getStepSha(t){if(t<0||t>=this.steps.length)return ke.warn("stepSha not found, setting to ERROR"),"error";try{let e=this.steps[t];return(0,Nme.default)(e.toString().toLocaleLowerCase()).toString()}catch(e){return ke.warn("stepSha not found, setting to ERROR",e),"error"}}};function zO(t,e,i){let n=new Gme(t,e,i);return of.add(n),n}var K=new Ome;let k$;function Hme(t){return k$=t,t}function Cr(){return k$}let jh=class{constructor(e,i){this.init(e,i)}init(e,i){this.destination=e,this.source=i||e}connect(e){this.source?.connect(e)}disconnect(){this.source?.disconnect()}destroy(){this.disconnect(),this.destination=null,this.source=null}};class O$ extends jh{constructor(e=0){let i;if(!Cr().useLegacy){const{audioContext:n}=Cr().context;i=n.createWaveShaper()}super(i),this._distortion=i,this.amount=e}set amount(e){if(this._amount=e,Cr().useLegacy)return;const i=e*1e3,n=44100,r=new Float32Array(n),s=Math.PI/180;let a=0,o;for(;a<n;++a)o=a*2/n-1,r[a]=(3+i)*o*20*s/(Math.PI+i*Math.abs(o));this._distortion.curve=r,this._distortion.oversample="4x"}get amount(){return this._amount}destroy(){this._distortion=null,super.destroy()}}class vo{static setParamValue(e,i){if(e.setValueAtTime){const n=Cr().context;e.setValueAtTime(i,n.audioContext.currentTime)}else e.value=i;return i}}const ji=class extends jh{constructor(t=0,e=0,i=0,n=0,r=0,s=0,a=0,o=0,l=0,h=0){let d=[];const p=[{f:ji.F32,type:"lowshelf",gain:t},{f:ji.F64,type:"peaking",gain:e},{f:ji.F125,type:"peaking",gain:i},{f:ji.F250,type:"peaking",gain:n},{f:ji.F500,type:"peaking",gain:r},{f:ji.F1K,type:"peaking",gain:s},{f:ji.F2K,type:"peaking",gain:a},{f:ji.F4K,type:"peaking",gain:o},{f:ji.F8K,type:"peaking",gain:l},{f:ji.F16K,type:"highshelf",gain:h}];Cr().useLegacy||(d=p.map(g=>{const y=Cr().context.audioContext.createBiquadFilter();return y.type=g.type,vo.setParamValue(y.Q,1),y.frequency.value=g.f,vo.setParamValue(y.gain,g.gain),y})),super(d[0],d[d.length-1]),this.bands=d,this.bandsMap={};for(let g=0;g<this.bands.length;g++){const y=this.bands[g];g>0&&this.bands[g-1].connect(y),this.bandsMap[y.frequency.value]=y}}setGain(t,e=0){if(!this.bandsMap[t])throw new Error(`No band found for frequency ${t}`);vo.setParamValue(this.bandsMap[t].gain,e)}getGain(t){if(!this.bandsMap[t])throw new Error(`No band found for frequency ${t}`);return this.bandsMap[t].gain.value}set f32(t){this.setGain(ji.F32,t)}get f32(){return this.getGain(ji.F32)}set f64(t){this.setGain(ji.F64,t)}get f64(){return this.getGain(ji.F64)}set f125(t){this.setGain(ji.F125,t)}get f125(){return this.getGain(ji.F125)}set f250(t){this.setGain(ji.F250,t)}get f250(){return this.getGain(ji.F250)}set f500(t){this.setGain(ji.F500,t)}get f500(){return this.getGain(ji.F500)}set f1k(t){this.setGain(ji.F1K,t)}get f1k(){return this.getGain(ji.F1K)}set f2k(t){this.setGain(ji.F2K,t)}get f2k(){return this.getGain(ji.F2K)}set f4k(t){this.setGain(ji.F4K,t)}get f4k(){return this.getGain(ji.F4K)}set f8k(t){this.setGain(ji.F8K,t)}get f8k(){return this.getGain(ji.F8K)}set f16k(t){this.setGain(ji.F16K,t)}get f16k(){return this.getGain(ji.F16K)}reset(){this.bands.forEach(t=>{vo.setParamValue(t.gain,0)})}destroy(){this.bands.forEach(t=>{t.disconnect()}),this.bands=null,this.bandsMap=null}};let Mo=ji;Mo.F32=32;Mo.F64=64;Mo.F125=125;Mo.F250=250;Mo.F500=500;Mo.F1K=1e3;Mo.F2K=2e3;Mo.F4K=4e3;Mo.F8K=8e3;Mo.F16K=16e3;class F$ extends jh{constructor(){let e,i;if(!Cr().useLegacy){const{audioContext:n}=Cr().context;i=n.createChannelSplitter(),e=n.createChannelMerger(),e.connect(i)}super(e,i),this._merger=e}destroy(){this._merger?.disconnect(),this._merger=null,super.destroy()}}class I$ extends jh{constructor(e=3,i=2,n=!1){super(null),this._seconds=this._clamp(e,1,50),this._decay=this._clamp(i,0,100),this._reverse=n,this._rebuild()}_clamp(e,i,n){return Math.min(n,Math.max(i,e))}get seconds(){return this._seconds}set seconds(e){this._seconds=this._clamp(e,1,50),this._rebuild()}get decay(){return this._decay}set decay(e){this._decay=this._clamp(e,0,100),this._rebuild()}get reverse(){return this._reverse}set reverse(e){this._reverse=e,this._rebuild()}_rebuild(){if(Cr().useLegacy)return;const{audioContext:e}=Cr().context,i=e.sampleRate,n=i*this._seconds,r=e.createBuffer(2,n,i),s=r.getChannelData(0),a=r.getChannelData(1);let o;for(let h=0;h<n;h++)o=this._reverse?n-h:h,s[h]=(Math.random()*2-1)*Math.pow(1-o/n,this._decay),a[h]=(Math.random()*2-1)*Math.pow(1-o/n,this._decay);const l=e.createConvolver();l.buffer=r,this.init(l)}}class L$ extends jh{constructor(e=0){let i,n,r;if(!Cr().useLegacy){const{audioContext:s}=Cr().context;s.createStereoPanner?(i=s.createStereoPanner(),r=i):(n=s.createPanner(),n.panningModel="equalpower",r=n)}super(r),this._stereo=i,this._panner=n,this.pan=e}set pan(e){this._pan=e,this._stereo?vo.setParamValue(this._stereo.pan,e):this._panner&&this._panner.setPosition(e,0,1-Math.abs(e))}get pan(){return this._pan}destroy(){super.destroy(),this._stereo=null,this._panner=null}}class N$ extends jh{constructor(){let e,i;if(!Cr().useLegacy){const{audioContext:n}=Cr().context;e=n.createMediaStreamDestination(),i=n.createMediaStreamSource(e.stream)}super(e,i),this._stream=e?.stream}get stream(){return this._stream}destroy(){this._stream=null,super.destroy()}}class U$ extends jh{constructor(){let e,i;if(!Cr().useLegacy){const{audioContext:n}=Cr().context,r=n.createBiquadFilter(),s=n.createBiquadFilter(),a=n.createBiquadFilter(),o=n.createBiquadFilter();r.type="lowpass",vo.setParamValue(r.frequency,2e3),s.type="lowpass",vo.setParamValue(s.frequency,2e3),a.type="highpass",vo.setParamValue(a.frequency,500),o.type="highpass",vo.setParamValue(o.frequency,500),r.connect(s),s.connect(a),a.connect(o),e=r,i=o}super(e,i)}}var me=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(me||{});const $P=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Ny=(t,e)=>$P(t).priority??e,Zi={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map($P).forEach(e=>{e.type.forEach(i=>this._removeHandlers[i]?.(e))}),this},add(...t){return t.map($P).forEach(e=>{e.type.forEach(i=>{const n=this._addHandlers,r=this._queue;n[i]?n[i]?.(e):(r[i]=r[i]||[],r[i]?.push(e))})}),this},handle(t,e,i){const n=this._addHandlers,r=this._removeHandlers;if(n[t]||r[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,r[t]=i;const s=this._queue;return s[t]&&(s[t]?.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,i=>{i.name&&(e[i.name]=i.ref)},i=>{i.name&&delete e[i.name]})},handleByNamedList(t,e,i=-1){return this.handle(t,n=>{e.findIndex(s=>s.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((s,a)=>Ny(a.value,i)-Ny(s.value,i)))},n=>{const r=e.findIndex(s=>s.name===n.name);r!==-1&&e.splice(r,1)})},handleByList(t,e,i=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((r,s)=>Ny(s,i)-Ny(r,i)))},n=>{const r=e.indexOf(n.ref);r!==-1&&e.splice(r,1)})},mixin(t,...e){for(const i of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(i))}},G$={extension:{type:me.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await wx(()=>import("./browserAll-DwiGIqh8.js"),__vite__mapDeps([0,1]))}},H$={extension:{type:me.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await wx(()=>import("./webworkerAll-psOtDE_0.js"),[])}};class In{constructor(e,i,n){this._x=i||0,this._y=n||0,this._observer=e}clone(e){return new In(e??this._observer,this._x,this._y)}set(e=0,i=e){return(this._x!==e||this._y!==i)&&(this._x=e,this._y=i,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Zw={exports:{}},UN;function zme(){return UN||(UN=1,(function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function r(l,h,d){this.fn=l,this.context=h,this.once=d||!1}function s(l,h,d,p,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new r(d,p||l,g),v=i?i+h:h;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],y]:l._events[v].push(y):(l._events[v]=y,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],d,p;if(this._eventsCount===0)return h;for(p in d=this._events)e.call(d,p)&&h.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},o.prototype.listeners=function(h){var d=i?i+h:h,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,v=new Array(y);g<y;g++)v[g]=p[g].fn;return v},o.prototype.listenerCount=function(h){var d=i?i+h:h,p=this._events[d];return p?p.fn?1:p.length:0},o.prototype.emit=function(h,d,p,g,y,v){var S=i?i+h:h;if(!this._events[S])return!1;var T=this._events[S],A=arguments.length,D,R;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),A){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,d),!0;case 3:return T.fn.call(T.context,d,p),!0;case 4:return T.fn.call(T.context,d,p,g),!0;case 5:return T.fn.call(T.context,d,p,g,y),!0;case 6:return T.fn.call(T.context,d,p,g,y,v),!0}for(R=1,D=new Array(A-1);R<A;R++)D[R-1]=arguments[R];T.fn.apply(T.context,D)}else{var B=T.length,z;for(R=0;R<B;R++)switch(T[R].once&&this.removeListener(h,T[R].fn,void 0,!0),A){case 1:T[R].fn.call(T[R].context);break;case 2:T[R].fn.call(T[R].context,d);break;case 3:T[R].fn.call(T[R].context,d,p);break;case 4:T[R].fn.call(T[R].context,d,p,g);break;default:if(!D)for(z=1,D=new Array(A-1);z<A;z++)D[z-1]=arguments[z];T[R].fn.apply(T[R].context,D)}}return!0},o.prototype.on=function(h,d,p){return s(this,h,d,p,!1)},o.prototype.once=function(h,d,p){return s(this,h,d,p,!0)},o.prototype.removeListener=function(h,d,p,g){var y=i?i+h:h;if(!this._events[y])return this;if(!d)return a(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!g||v.once)&&(!p||v.context===p)&&a(this,y);else{for(var S=0,T=[],A=v.length;S<A;S++)(v[S].fn!==d||g&&!v[S].once||p&&v[S].context!==p)&&T.push(v[S]);T.length?this._events[y]=T.length===1?T[0]:T:a(this,y)}return this},o.prototype.removeAllListeners=function(h){var d;return h?(d=i?i+h:h,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})(Zw)),Zw.exports}var Vme=zme();const Ur=ZE(Vme),z$=Math.PI*2,V$=180/Math.PI,j$=Math.PI/180;class tn{constructor(e=0,i=0){this.x=0,this.y=0,this.x=e,this.y=i}clone(){return new tn(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,i=e){return this.x=e,this.y=i,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Jw.x=0,Jw.y=0,Jw}}const Jw=new tn;class gt{constructor(e=1,i=0,n=0,r=1,s=0,a=0){this.array=null,this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,i,n,r,s,a){return this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a,this}toArray(e,i){this.array||(this.array=new Float32Array(9));const n=i||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,i){i=i||new tn;const n=e.x,r=e.y;return i.x=this.a*n+this.c*r+this.tx,i.y=this.b*n+this.d*r+this.ty,i}applyInverse(e,i){i=i||new tn;const n=this.a,r=this.b,s=this.c,a=this.d,o=this.tx,l=this.ty,h=1/(n*a+s*-r),d=e.x,p=e.y;return i.x=a*h*d+-s*h*p+(l*s-o*a)*h,i.y=n*h*p+-r*h*d+(-l*n+o*r)*h,i}translate(e,i){return this.tx+=e,this.ty+=i,this}scale(e,i){return this.a*=e,this.d*=i,this.c*=e,this.b*=i,this.tx*=e,this.ty*=i,this}rotate(e){const i=Math.cos(e),n=Math.sin(e),r=this.a,s=this.c,a=this.tx;return this.a=r*i-this.b*n,this.b=r*n+this.b*i,this.c=s*i-this.d*n,this.d=s*n+this.d*i,this.tx=a*i-this.ty*n,this.ty=a*n+this.ty*i,this}append(e){const i=this.a,n=this.b,r=this.c,s=this.d;return this.a=e.a*i+e.b*r,this.b=e.a*n+e.b*s,this.c=e.c*i+e.d*r,this.d=e.c*n+e.d*s,this.tx=e.tx*i+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}appendFrom(e,i){const n=e.a,r=e.b,s=e.c,a=e.d,o=e.tx,l=e.ty,h=i.a,d=i.b,p=i.c,g=i.d;return this.a=n*h+r*p,this.b=n*d+r*g,this.c=s*h+a*p,this.d=s*d+a*g,this.tx=o*h+l*p+i.tx,this.ty=o*d+l*g+i.ty,this}setTransform(e,i,n,r,s,a,o,l,h){return this.a=Math.cos(o+h)*s,this.b=Math.sin(o+h)*s,this.c=-Math.sin(o-l)*a,this.d=Math.cos(o-l)*a,this.tx=e-(n*this.a+r*this.c),this.ty=i-(n*this.b+r*this.d),this}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this}decompose(e){const i=this.a,n=this.b,r=this.c,s=this.d,a=e.pivot,o=-Math.atan2(-r,s),l=Math.atan2(n,i),h=Math.abs(o+l);return h<1e-5||Math.abs(z$-h)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=l),e.scale.x=Math.sqrt(i*i+n*n),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(a.x*i+a.y*r),e.position.y=this.ty+(a.x*n+a.y*s),e}invert(){const e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=e*r-i*n;return this.a=r/a,this.b=-i/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-r*s)/a,this.ty=-(e*this.ty-i*s)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new gt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Xme.identity()}static get shared(){return jme.identity()}}const jme=new gt,Xme=new gt,Yd=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],qd=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Wd=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$d=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],KP=[],X$=[],B1=Math.sign;function Yme(){for(let t=0;t<16;t++){const e=[];KP.push(e);for(let i=0;i<16;i++){const n=B1(Yd[t]*Yd[i]+Wd[t]*qd[i]),r=B1(qd[t]*Yd[i]+$d[t]*qd[i]),s=B1(Yd[t]*Wd[i]+Wd[t]*$d[i]),a=B1(qd[t]*Wd[i]+$d[t]*$d[i]);for(let o=0;o<16;o++)if(Yd[o]===n&&qd[o]===r&&Wd[o]===s&&$d[o]===a){e.push(o);break}}}for(let t=0;t<16;t++){const e=new gt;e.set(Yd[t],qd[t],Wd[t],$d[t],0,0),X$.push(e)}}Yme();const ri={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Yd[t],uY:t=>qd[t],vX:t=>Wd[t],vY:t=>$d[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>KP[t][e],sub:(t,e)=>KP[t][ri.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?ri.S:ri.N:Math.abs(e)*2<=Math.abs(t)?t>0?ri.E:ri.W:e>0?t>0?ri.SE:ri.SW:t>0?ri.NE:ri.NW,matrixAppendRotationInv:(t,e,i=0,n=0)=>{const r=X$[ri.inv(e)];r.tx=i,r.ty=n,t.append(r)},transformRectCoords:(t,e,i,n)=>{const{x:r,y:s,width:a,height:o}=t,{x:l,y:h,width:d,height:p}=e;return i===ri.E?(n.set(r+l,s+h,a,o),n):i===ri.S?n.set(d-s-o+l,r+h,o,a):i===ri.W?n.set(d-r-a+l,p-s-o+h,a,o):i===ri.N?n.set(s+l,p-r-a+h,o,a):n.set(r+l,s+h,a,o)}},k1=[new tn,new tn,new tn,new tn];class zi{constructor(e=0,i=0,n=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(i),this.width=Number(n),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new zi(0,0,0,0)}clone(){return new zi(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height}strokeContains(e,i,n,r=.5){const{width:s,height:a}=this;if(s<=0||a<=0)return!1;const o=this.x,l=this.y,h=n*(1-r),d=n-h,p=o-h,g=o+s+h,y=l-h,v=l+a+h,S=o+d,T=o+s-d,A=l+d,D=l+a-d;return e>=p&&e<=g&&i>=y&&i<=v&&!(e>S&&e<T&&i>A&&i<D)}intersects(e,i){if(!i){const te=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=te)return!1;const O=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>O}const n=this.left,r=this.right,s=this.top,a=this.bottom;if(r<=n||a<=s)return!1;const o=k1[0].set(e.left,e.top),l=k1[1].set(e.left,e.bottom),h=k1[2].set(e.right,e.top),d=k1[3].set(e.right,e.bottom);if(h.x<=o.x||l.y<=o.y)return!1;const p=Math.sign(i.a*i.d-i.b*i.c);if(p===0||(i.apply(o,o),i.apply(l,l),i.apply(h,h),i.apply(d,d),Math.max(o.x,l.x,h.x,d.x)<=n||Math.min(o.x,l.x,h.x,d.x)>=r||Math.max(o.y,l.y,h.y,d.y)<=s||Math.min(o.y,l.y,h.y,d.y)>=a))return!1;const g=p*(l.y-o.y),y=p*(o.x-l.x),v=g*n+y*s,S=g*r+y*s,T=g*n+y*a,A=g*r+y*a;if(Math.max(v,S,T,A)<=g*o.x+y*o.y||Math.min(v,S,T,A)>=g*d.x+y*d.y)return!1;const D=p*(o.y-h.y),R=p*(h.x-o.x),B=D*n+R*s,z=D*r+R*s,L=D*n+R*a,H=D*r+R*a;return!(Math.max(B,z,L,H)<=D*o.x+R*o.y||Math.min(B,z,L,H)>=D*d.x+R*d.y)}pad(e=0,i=e){return this.x-=e,this.y-=i,this.width+=e*2,this.height+=i*2,this}fit(e){const i=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.width=Math.max(n-i,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,i=.001){const n=Math.ceil((this.x+this.width-i)*e)/e,r=Math.ceil((this.y+this.height-i)*e)/e;return this.x=Math.floor((this.x+i)*e)/e,this.y=Math.floor((this.y+i)*e)/e,this.width=n-this.x,this.height=r-this.y,this}scale(e,i=e){return this.x*=e,this.y*=i,this.width*=e,this.height*=i,this}enlarge(e){const i=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=i,this.width=n-i,this.y=r,this.height=s-r,this}getBounds(e){return e||(e=new zi),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const i=e.x,n=e.y,r=e.x+e.width,s=e.y+e.height;return i>=this.x&&i<this.x+this.width&&n>=this.y&&n<this.y+this.height&&r>=this.x&&r<this.x+this.width&&s>=this.y&&s<this.y+this.height}set(e,i,n,r){return this.x=e,this.y=i,this.width=n,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Jy={default:-1};function gn(t="default"){return Jy[t]===void 0&&(Jy[t]=-1),++Jy[t]}function qme(){for(const t in Jy)delete Jy[t]}const GN=new Set,Yt="8.0.0",Y$="8.3.4",Rm={quiet:!1,noColor:!1},ft=(t,e,i=3)=>{if(Rm.quiet||GN.has(e))return;let n=new Error().stack;const r=`${e}
Deprecated since v${t}`,s=typeof console.groupCollapsed=="function"&&!Rm.noColor;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",r):(n=n.split(`
`).splice(i).join(`
`),s?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r),console.warn(n))),GN.add(e)};Object.defineProperties(ft,{quiet:{get:()=>Rm.quiet,set:t=>{Rm.quiet=t},enumerable:!0,configurable:!1},noColor:{get:()=>Rm.noColor,set:t=>{Rm.noColor=t},enumerable:!0,configurable:!1}});const VO=()=>{};function yf(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function QP(t){return!(t&t-1)&&!!t}function Wme(t){let e=(t>65535?1:0)<<4;t>>>=e;let i=(t>255?1:0)<<3;return t>>>=i,e|=i,i=(t>15?1:0)<<2,t>>>=i,e|=i,i=(t>3?1:0)<<1,t>>>=i,e|=i,e|t>>1}function cu(t){const e={};for(const i in t)t[i]!==void 0&&(e[i]=t[i]);return e}const HN=Object.create(null);function $me(t){const e=HN[t];return e===void 0&&(HN[t]=gn("resource")),e}const q$=class W$ extends Ur{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...W$.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){ft(Yt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=$me(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};q$.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let La=q$;const $$=class K$ extends Ur{constructor(e={}){super(),this.options=e,this.uid=gn("textureSource"),this._resourceType="textureSource",this._resourceId=gn("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...K$.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new La(cu(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=gn("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,i,n){n||(n=this._resolution),e||(e=this.width),i||(i=this.height);const r=Math.round(e*n),s=Math.round(i*n);return this.width=r/n,this.height=s/n,this._resolution=n,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=gn("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=QP(this.pixelWidth)&&QP(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};$$.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Xn=$$;class MS extends Xn{constructor(e){const i=e.resource||new Float32Array(e.width*e.height*4);let n=e.format;n||(i instanceof Float32Array?n="rgba32float":i instanceof Int32Array||i instanceof Uint32Array?n="rgba32uint":i instanceof Int16Array||i instanceof Uint16Array?n="rgba16uint":(i instanceof Int8Array,n="bgra8unorm")),super({...e,resource:i,format:n}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}MS.extension=me.TextureSource;const zN=new gt;class jO{constructor(e,i){this.mapCoord=new gt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof i>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=i,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,i){i===void 0&&(i=e);const n=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],a=e[r+1];i[r]=s*n.a+a*n.c+n.tx,i[r+1]=s*n.b+a*n.d+n.ty}return i}update(){const e=this._texture;this._updateID++;const i=e.uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=e.orig,r=e.trim;r&&(zN.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(zN));const s=e.source,a=this.uClampFrame,o=this.clampMargin/s._resolution,l=this.clampOffset/s._resolution;return a[0]=(e.frame.x+o+l)/s.width,a[1]=(e.frame.y+o+l)/s.height,a[2]=(e.frame.x+e.frame.width-o+l)/s.width,a[3]=(e.frame.y+e.frame.height-o+l)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}class it extends Ur{constructor({source:e,label:i,frame:n,orig:r,trim:s,defaultAnchor:a,defaultBorders:o,rotate:l,dynamic:h}={}){if(super(),this.uid=gn("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new zi,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=i,this.source=e?.source??new Xn,this.noFrame=!n,n)this.frame.copyFrom(n);else{const{width:d,height:p}=this._source;this.frame.width=d,this.frame.height=p}this.orig=r||this.frame,this.trim=s,this.rotate=l??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new jO(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:i}=this,{width:n,height:r}=this._source,s=i.x/n,a=i.y/r,o=i.width/n,l=i.height/r;let h=this.rotate;if(h){const d=o/2,p=l/2,g=s+d,y=a+p;h=ri.add(h,ri.NW),e.x0=g+d*ri.uX(h),e.y0=y+p*ri.uY(h),h=ri.add(h,2),e.x1=g+d*ri.uX(h),e.y1=y+p*ri.uY(h),h=ri.add(h,2),e.x2=g+d*ri.uX(h),e.y2=y+p*ri.uY(h),h=ri.add(h,2),e.x3=g+d*ri.uX(h),e.y3=y+p*ri.uY(h)}else e.x0=s,e.y0=a,e.x1=s+o,e.y1=a,e.x2=s+o,e.y2=a+l,e.x3=s,e.y3=a+l}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return ft(Yt,"Texture.baseTexture is now Texture.source"),this._source}}it.EMPTY=new it({label:"EMPTY",source:new Xn({label:"EMPTY"})});it.EMPTY.destroy=VO;it.WHITE=new it({source:new MS({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});it.WHITE.destroy=VO;function XO(t,e,i){const{width:n,height:r}=i.orig,s=i.trim;if(s){const a=s.width,o=s.height;t.minX=s.x-e._x*n,t.maxX=t.minX+a,t.minY=s.y-e._y*r,t.maxY=t.minY+o}else t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*r,t.maxY=t.minY+r}const VN=new gt;class Ir{constructor(e=1/0,i=1/0,n=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=VN,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new zi);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=VN,this}set(e,i,n,r){this.minX=e,this.minY=i,this.maxX=n,this.maxY=r}addFrame(e,i,n,r,s){s||(s=this.matrix);const a=s.a,o=s.b,l=s.c,h=s.d,d=s.tx,p=s.ty;let g=this.minX,y=this.minY,v=this.maxX,S=this.maxY,T=a*e+l*i+d,A=o*e+h*i+p;T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),T=a*n+l*i+d,A=o*n+h*i+p,T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),T=a*e+l*r+d,A=o*e+h*r+p,T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),T=a*n+l*r+d,A=o*n+h*r+p,T<g&&(g=T),A<y&&(y=A),T>v&&(v=T),A>S&&(S=A),this.minX=g,this.minY=y,this.maxX=v,this.maxY=S}addRect(e,i){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,i)}addBounds(e,i){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,i)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const i=this.minX,n=this.minY,r=this.maxX,s=this.maxY,{a,b:o,c:l,d:h,tx:d,ty:p}=e;let g=a*i+l*n+d,y=o*i+h*n+p;this.minX=g,this.minY=y,this.maxX=g,this.maxY=y,g=a*r+l*n+d,y=o*r+h*n+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*i+l*s+d,y=o*i+h*s+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*r+l*s+d,y=o*r+h*s+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,i,n,r){return this.minX<e&&(this.minX=e),this.maxX>i&&(this.maxX=i),this.minY<n&&(this.minY=n),this.maxY>r&&(this.maxY=r),this}pad(e,i=e){return this.minX-=e,this.maxX+=e,this.minY-=i,this.maxY+=i,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Ir(this.minX,this.minY,this.maxX,this.maxY)}scale(e,i=e){return this.minX*=e,this.minY*=i,this.maxX*=e,this.maxY*=i,this}get x(){return this.minX}set x(e){const i=this.maxX-this.minX;this.minX=e,this.maxX=e+i}get y(){return this.minY}set y(e){const i=this.maxY-this.minY;this.minY=e,this.maxY=e+i}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,i,n,r){let s=this.minX,a=this.minY,o=this.maxX,l=this.maxY;r||(r=this.matrix);const h=r.a,d=r.b,p=r.c,g=r.d,y=r.tx,v=r.ty;for(let S=i;S<n;S+=2){const T=e[S],A=e[S+1],D=h*T+p*A+y,R=d*T+g*A+v;s=D<s?D:s,a=R<a?R:a,o=D>o?D:o,l=R>l?R:l}this.minX=s,this.minY=a,this.maxX=o,this.maxY=l}containsPoint(e,i){return this.minX<=e&&this.minY<=i&&this.maxX>=e&&this.maxY>=i}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var Kme={grad:.9,turn:360,rad:360/(2*Math.PI)},Ql=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},$r=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*t)/i+0},To=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),t>i?i:t>e?t:e},Q$=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},jN=function(t){return{r:To(t.r,0,255),g:To(t.g,0,255),b:To(t.b,0,255),a:To(t.a)}},eD=function(t){return{r:$r(t.r),g:$r(t.g),b:$r(t.b),a:$r(t.a,3)}},Qme=/^#([0-9a-f]{3,8})$/i,O1=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Z$=function(t){var e=t.r,i=t.g,n=t.b,r=t.a,s=Math.max(e,i,n),a=s-Math.min(e,i,n),o=a?s===e?(i-n)/a:s===i?2+(n-e)/a:4+(e-i)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:r}},J$=function(t){var e=t.h,i=t.s,n=t.v,r=t.a;e=e/360*6,i/=100,n/=100;var s=Math.floor(e),a=n*(1-i),o=n*(1-(e-s)*i),l=n*(1-(1-e+s)*i),h=s%6;return{r:255*[n,o,a,a,l,n][h],g:255*[l,n,n,o,a,a][h],b:255*[a,a,l,n,n,o][h],a:r}},XN=function(t){return{h:Q$(t.h),s:To(t.s,0,100),l:To(t.l,0,100),a:To(t.a)}},YN=function(t){return{h:$r(t.h),s:$r(t.s),l:$r(t.l),a:$r(t.a,3)}},qN=function(t){return J$((i=(e=t).s,{h:e.h,s:(i*=((n=e.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:e.a}));var e,i,n},ex=function(t){return{h:(e=Z$(t)).h,s:(r=(200-(i=e.s))*(n=e.v)/100)>0&&r<200?i*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,i,n,r},Zme=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Jme=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ege=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tge=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ZP={string:[[function(t){var e=Qme.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?$r(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?$r(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=ege.exec(t)||tge.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:jN({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=Zme.exec(t)||Jme.exec(t);if(!e)return null;var i,n,r=XN({h:(i=e[1],n=e[2],n===void 0&&(n="deg"),Number(i)*(Kme[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return qN(r)},"hsl"]],object:[[function(t){var e=t.r,i=t.g,n=t.b,r=t.a,s=r===void 0?1:r;return Ql(e)&&Ql(i)&&Ql(n)?jN({r:Number(e),g:Number(i),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,i=t.s,n=t.l,r=t.a,s=r===void 0?1:r;if(!Ql(e)||!Ql(i)||!Ql(n))return null;var a=XN({h:Number(e),s:Number(i),l:Number(n),a:Number(s)});return qN(a)},"hsl"],[function(t){var e=t.h,i=t.s,n=t.v,r=t.a,s=r===void 0?1:r;if(!Ql(e)||!Ql(i)||!Ql(n))return null;var a=(function(o){return{h:Q$(o.h),s:To(o.s,0,100),v:To(o.v,0,100),a:To(o.a)}})({h:Number(e),s:Number(i),v:Number(n),a:Number(s)});return J$(a)},"hsv"]]},WN=function(t,e){for(var i=0;i<e.length;i++){var n=e[i][0](t);if(n)return[n,e[i][1]]}return[null,void 0]},ige=function(t){return typeof t=="string"?WN(t.trim(),ZP.string):typeof t=="object"&&t!==null?WN(t,ZP.object):[null,void 0]},tD=function(t,e){var i=ex(t);return{h:i.h,s:To(i.s+100*e,0,100),l:i.l,a:i.a}},iD=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},$N=function(t,e){var i=ex(t);return{h:i.h,s:i.s,l:To(i.l+100*e,0,100),a:i.a}},JP=(function(){function t(e){this.parsed=ige(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return $r(iD(this.rgba),2)},t.prototype.isDark=function(){return iD(this.rgba)<.5},t.prototype.isLight=function(){return iD(this.rgba)>=.5},t.prototype.toHex=function(){return e=eD(this.rgba),i=e.r,n=e.g,r=e.b,a=(s=e.a)<1?O1($r(255*s)):"","#"+O1(i)+O1(n)+O1(r)+a;var e,i,n,r,s,a},t.prototype.toRgb=function(){return eD(this.rgba)},t.prototype.toRgbString=function(){return e=eD(this.rgba),i=e.r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+i+", "+n+", "+r+", "+s+")":"rgb("+i+", "+n+", "+r+")";var e,i,n,r,s},t.prototype.toHsl=function(){return YN(ex(this.rgba))},t.prototype.toHslString=function(){return e=YN(ex(this.rgba)),i=e.h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+i+", "+n+"%, "+r+"%, "+s+")":"hsl("+i+", "+n+"%, "+r+"%)";var e,i,n,r,s},t.prototype.toHsv=function(){return e=Z$(this.rgba),{h:$r(e.h),s:$r(e.s),v:$r(e.v),a:$r(e.a,3)};var e},t.prototype.invert=function(){return Hu({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Hu(tD(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Hu(tD(this.rgba,-e))},t.prototype.grayscale=function(){return Hu(tD(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Hu($N(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Hu($N(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Hu({r:(i=this.rgba).r,g:i.g,b:i.b,a:e}):$r(this.rgba.a,3);var i},t.prototype.hue=function(e){var i=ex(this.rgba);return typeof e=="number"?Hu({h:e,s:i.s,l:i.l,a:i.a}):$r(i.h)},t.prototype.isEqual=function(e){return this.toHex()===Hu(e).toHex()},t})(),Hu=function(t){return t instanceof JP?t:new JP(t)},KN=[],nge=function(t){t.forEach(function(e){KN.indexOf(e)<0&&(e(JP,ZP),KN.push(e))})};function rge(t,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in i)n[i[r]]=r;var s={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,h=n[this.toHex()];if(h)return h;if(a?.closest){var d=this.toRgb(),p=1/0,g="black";if(!s.length)for(var y in i)s[y]=new t(i[y]).toRgb();for(var v in i){var S=(o=d,l=s[v],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));S<p&&(p=S,g=v)}return g}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":i[o];return l?new t(l).toRgb():null},"name"])}nge([rge]);const ng=class Uy{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Uy)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,i){const n=typeof e;if(n!==typeof i)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===i;if(Array.isArray(e)&&Array.isArray(i)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(i))return e.length!==i.length?!1:e.every((s,a)=>s===i[a]);if(e!==null&&i!==null){const s=Object.keys(e),a=Object.keys(i);return s.length!==a.length?!1:s.every(o=>e[o]===i[o])}return e===i}toRgba(){const[e,i,n,r]=this._components;return{r:e,g:i,b:n,a:r}}toRgb(){const[e,i,n]=this._components;return{r:e,g:i,b:n}}toRgbaString(){const[e,i,n]=this.toUint8RgbArray();return`rgba(${e},${i},${n},${this.alpha})`}toUint8RgbArray(e){const[i,n,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(i*255),e[1]=Math.round(n*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[i,n,r,s]=this._components;return e[0]=i,e[1]=n,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[i,n,r]=this._components;return e[0]=i,e[1]=n,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,i,n]=this.toUint8RgbArray();return(n<<16)+(i<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[i,n,r,s]=Uy._temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=n,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,i=!0){return i&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,i=!0){if(e===1)return(255<<24)+this._int;if(e===0)return i?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return i&&(n=n*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(r<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const i=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-i.length)+i}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let i,n,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;i=(a>>16&255)/255,n=(a>>8&255)/255,r=(a&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,n,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,n,r,s=255]=e,i/=255,n/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=Uy.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const a=Hu(e);a.isValid()&&({r:i,g:n,b:r,a:s}=a.rgba,i/=255,n/=255,r/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=n,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,i,n]=this._components;this._int=(e*255<<16)+(i*255<<8)+(n*255|0)}_clamp(e,i=0,n=1){return typeof e=="number"?Math.min(Math.max(e,i),n):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,i),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Uy||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};ng.shared=new ng;ng._temp=new ng;ng.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Pi=ng;const eK={cullArea:null,cullable:!1,cullableChildren:!0};let nD=0;const QN=500;function Ct(...t){nD!==QN&&(nD++,nD===QN?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}const Uf={_registeredResources:new Set,register(t){this._registeredResources.add(t)},unregister(t){this._registeredResources.delete(t)},release(){this._registeredResources.forEach(t=>t.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(t){return this._registeredResources.has(t)},reset(){this._registeredResources.clear()}};class tK{constructor(e,i){this._pool=[],this._count=0,this._index=0,this._classType=e,i&&this.prepopulate(i)}prepopulate(e){for(let i=0;i<e;i++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,i.init?.(e),i}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class iK{constructor(){this._poolsByClass=new Map}prepopulate(e,i){this.getPool(e).prepopulate(i)}get(e,i){return this.getPool(e).get(i)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new tK(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(i=>{const n=e[i._classType.name]?i._classType.name+i._classType.ID:i._classType.name;e[n]={free:i.totalFree,used:i.totalUsed,size:i.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const hr=new iK;Uf.register(hr);const nK={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){ft("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};function YO(t,e,i){const n=t.length;let r;if(e>=n||i===0)return;i=e+i>n?n-e:i;const s=n-i;for(r=e;r<s;++r)t[r]=t[r+i];t.length=s}const rK={allowChildren:!0,removeChildren(t=0,e){const i=e??this.children.length,n=i-t,r=[];if(n>0&&n<=i){for(let a=i-1;a>=t;a--){const o=this.children[a];o&&(r.push(o),o.parent=null)}YO(this.children,t,i);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let a=0;a<r.length;++a){const o=r[a];o.parentRenderLayer?.detach(o),this.emit("childRemoved",o,this,a),r[a].emit("removed",this)}return r.length>0&&this._didViewChangeTick++,r}else if(n===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||ft(Yt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(e<0||e>i.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${i.length}`);if(t.parent){const r=t.parent.children.indexOf(t);if(t.parent===this&&r===e)return t;r!==-1&&t.parent.children.splice(r,1)}e===i.length?i.push(t):i.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const i=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const n=this.worldTransform.clone();return n.invert(),i.prepend(n),t.setFromMatrix(i),t},replaceChild(t,e){t.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(t)),e.setFromMatrix(t.localTransform),e.updateLocalTransform(),this.removeChild(t)}},sK={collectRenderables(t,e,i){this.parentRenderLayer&&this.parentRenderLayer!==i||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,i):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,i))},collectRenderablesSimple(t,e,i){const n=this.children,r=n.length;for(let s=0;s<r;s++)n[s].collectRenderables(t,e,i)},collectRenderablesWithEffects(t,e,i){const{renderPipes:n}=e;for(let r=0;r<this.effects.length;r++){const s=this.effects[r];n[s.pipe].push(s,this,t)}this.collectRenderablesSimple(t,e,i);for(let r=this.effects.length-1;r>=0;r--){const s=this.effects[r];n[s.pipe].pop(s,this,t)}}};class kx{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class aK{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let i=0;i<this._tests.length;i++){const n=this._tests[i];if(n.test(e))return hr.get(n.maskClass,e)}return e}returnMaskEffect(e){hr.return(e)}}const CE=new aK;Zi.handleByList(me.MaskEffect,CE._effectClasses);const oK={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((i,n)=>i.priority-n.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;e?.mask!==t&&(e&&(this.removeEffect(e),CE.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=CE.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},set filters(t){!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new kx);t=t;const i=t?.length>0,n=e.filters?.length>0,r=i!==n;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),r&&(i?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){return this._filterEffect?.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new kx),this._filterEffect.filterArea=t},get filterArea(){return this._filterEffect?.filterArea}},uK={label:null,get name(){return ft(Yt,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){ft(Yt,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const i=this.children;for(let n=0;n<i.length;n++){const r=i[n];if(r.label===t||t instanceof RegExp&&t.test(r.label))return r}if(e)for(let n=0;n<i.length;n++){const s=i[n].getChildByLabel(t,!0);if(s)return s}return null},getChildrenByLabel(t,e=!1,i=[]){const n=this.children;for(let r=0;r<n.length;r++){const s=n[r];(s.label===t||t instanceof RegExp&&t.test(s.label))&&i.push(s)}if(e)for(let r=0;r<n.length;r++)n[r].getChildrenByLabel(t,!0,i);return i}},Ss=hr.getPool(gt),al=hr.getPool(Ir),sge=new gt,lK={getFastGlobalBounds(t,e){e||(e=new Ir),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const i=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(i.worldTransform),e},_getGlobalBoundsRecursive(t,e,i){let n=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==i||this.localDisplayStatus!==7||!this.measurable)return;const r=!!this.effects.length;if((this.renderGroup||r)&&(n=al.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;n.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const s=this.children;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(t,n,i)}if(r){let s=!1;const a=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(s||(s=!0,n.applyMatrix(a.worldTransform)),this.effects[o].addBounds(n,!0));s&&n.applyMatrix(a.worldTransform.copyTo(sge).invert()),e.addBounds(n),al.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),al.return(n))}};function v_(t,e,i){i.clear();let n,r;return t.parent?e?n=t.parent.worldTransform:(r=Ss.get().identity(),n=BS(t,r)):n=gt.IDENTITY,cK(t,i,n,e),r&&Ss.return(r),i.isValid||i.set(0,0,0,0),i}function cK(t,e,i,n){if(!t.visible||!t.measurable)return;let r;n?r=t.worldTransform:(t.updateLocalTransform(),r=Ss.get(),r.appendFrom(t.localTransform,i));const s=e,a=!!t.effects.length;if(a&&(e=al.get().clear()),t.boundsArea)e.addRect(t.boundsArea,r);else{const o=t.bounds;o&&!o.isEmpty()&&(e.matrix=r,e.addBounds(o));for(let l=0;l<t.children.length;l++)cK(t.children[l],e,r,n)}if(a){for(let o=0;o<t.effects.length;o++)t.effects[o].addBounds?.(e);s.addBounds(e,gt.IDENTITY),al.return(e)}n||Ss.return(r)}function BS(t,e){const i=t.parent;return i&&(BS(i,e),i.updateLocalTransform(),e.append(i.localTransform)),e}function qO(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;const i=t>>16&255,n=t>>8&255,r=t&255,s=e>>16&255,a=e>>8&255,o=e&255,l=i*s/255|0,h=n*a/255|0,d=r*o/255|0;return(l<<16)+(h<<8)+d}const ZN=16777215;function Ox(t,e){return t===ZN?e:e===ZN?t:qO(t,e)}function Nm(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}const hK={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,i=this.parent;for(;i;)e*=i.alpha,i=i.parent;return e},getGlobalTransform(t=new gt,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const i=BS(this,Ss.get().identity());return t.appendFrom(this.localTransform,i),Ss.return(i),t},getGlobalTint(t){if(t)return this.renderGroup?Nm(this.renderGroup.worldColor):this.parentRenderGroup?Nm(Ox(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,i=this.parent;for(;i;)e=Ox(e,i.localColor),i=i.parent;return Nm(e)}};function kS(t,e,i){return e.clear(),i||(i=gt.IDENTITY),dK(t,e,i,t,!0),e.isValid||e.set(0,0,0,0),e}function dK(t,e,i,n,r){let s;if(r)s=Ss.get(),s=i.copyTo(s);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const l=t.localTransform;s=Ss.get(),s.appendFrom(l,i)}const a=e,o=!!t.effects.length;if(o&&(e=al.get().clear()),t.boundsArea)e.addRect(t.boundsArea,s);else{t.renderPipeId&&(e.matrix=s,e.addBounds(t.bounds));const l=t.children;for(let h=0;h<l.length;h++)dK(l[h],e,s,n,!1)}if(o){for(let l=0;l<t.effects.length;l++)t.effects[l].addLocalBounds?.(e,n);a.addBounds(e,gt.IDENTITY),al.return(e)}Ss.return(s)}function WO(t,e){const i=t.children;for(let n=0;n<i.length;n++){const r=i[n],s=r.uid,a=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,o=e.index;(e.data[o]!==s||e.data[o+1]!==a)&&(e.data[e.index]=s,e.data[e.index+1]=a,e.didChange=!0),e.index=o+2,r.children.length&&WO(r,e)}return e.didChange}const age=new gt,fK={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const i=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*i:this.scale.x=i},_setHeight(t,e){const i=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*i:this.scale.y=i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ir});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),WO(this,t),t.didChange&&kS(this,t.localBounds,age),t.localBounds},getBounds(t,e){return v_(this,t,e||new Ir)}},pK={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},mK={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(oge))}};function oge(t,e){return t._zIndex-e._zIndex}const gK={getGlobalPosition(t=new tn,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,i=!1){const n=this.getGlobalTransform(Ss.get(),i);return e=n.apply(t,e),Ss.return(n),e},toLocal(t,e,i,n){e&&(t=e.toGlobal(t,i,n));const r=this.getGlobalTransform(Ss.get(),n);return i=r.applyInverse(t,i),Ss.return(r),i}};class $O{constructor(){this.uid=gn("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let uge=0;class bK{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new La(this.textureOptions)}createTexture(e,i,n){const r=new Xn({...this.textureOptions,width:e,height:i,resolution:1,antialias:n,autoGarbageCollect:!1});return new it({source:r,label:`texturePool_${uge++}`})}getOptimalTexture(e,i,n=1,r){let s=Math.ceil(e*n-1e-6),a=Math.ceil(i*n-1e-6);s=yf(s),a=yf(a);const o=(s<<17)+(a<<1)+(r?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let l=this._texturePool[o].pop();return l||(l=this.createTexture(s,a,r)),l.source._resolution=n,l.source.width=s/n,l.source.height=a/n,l.source.pixelWidth=s,l.source.pixelHeight=a,l.frame.x=0,l.frame.y=0,l.frame.width=e,l.frame.height=i,l.updateUvs(),this._poolKeyHash[l.uid]=o,l}getSameSizeTexture(e,i=!1){const n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,i)}returnTexture(e,i=!1){const n=this._poolKeyHash[e.uid];i&&(e.source.style=this.textureStyle),this._texturePool[n].push(e)}clear(e){if(e=e!==!1,e)for(const i in this._texturePool){const n=this._texturePool[i];if(n)for(let r=0;r<n.length;r++)n[r].destroy(!0)}this._texturePool={}}}const ir=new bK;Uf.register(ir);class wE{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new gt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new $O,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const i=e.children;for(let n=0;n<i.length;n++){const r=i[n];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(ir.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const i=this.childrenToUpdate[e];i.list.fill(null),i.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const i=this.renderGroupChildren.indexOf(e);i>-1&&this.renderGroupChildren.splice(i,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const i=e.children;for(let n=0;n<i.length;n++)this.addChild(i[n])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const i=e.children;for(let n=0;n<i.length;n++)this.removeChild(i[n])}removeChildren(e){for(let i=0;i<e.length;i++)this.removeChild(e[i])}onChildUpdate(e){let i=this.childrenToUpdate[e.relativeRenderGroupDepth];i||(i=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),i.list[i.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let i=0;i<this._onRenderContainers.length;i++)this._onRenderContainers[i]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const i=this.root.children;for(let n=0;n<i.length;n++)this._getChildren(i[n],e);return e}_getChildren(e,i=[]){if(i.push(e),e.renderGroup)return i;const n=e.children;for(let r=0;r<n.length;r++)this._getChildren(n[r],i);return i}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new gt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new gt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new gt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function DE(t,e,i={}){for(const n in e)!i[n]&&e[n]!==void 0&&(t[n]=e[n])}const rD=new In(null),F1=new In(null),sD=new In(null,1,1),I1=new In(null),Fx=1,OS=2,Um=4,lge=8;class sr extends Ur{constructor(e={}){super(),this.uid=gn("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new gt,this.relativeGroupTransform=new gt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new In(this,0,0),this._scale=sD,this._pivot=F1,this._origin=I1,this._skew=rD,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],DE(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(i=>this.addChild(i)),e.parent?.addChild(this)}static mixin(e){ft("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Zi.mixin(sr,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||ft(Yt,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}const i=e[0],n=this.renderGroup||this.parentRenderGroup;return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),n&&(n.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i._updateFlags=15,n&&n.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),this._didViewChangeTick++,i._zIndex!==0&&i.depthOfChildModified(),i)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}const i=e[0],n=this.children.indexOf(i);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(i):this.parentRenderGroup&&this.parentRenderGroup.removeChild(i),i.parentRenderLayer&&i.parentRenderLayer.detach(i),i.parent=null,this.emit("childRemoved",i,this,n),i.emit("removed",this)),i}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=hr.get(wE,this),this.groupTransform=gt.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),hr.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new gt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*V$}set angle(e){this.rotation=e*j$}get pivot(){return this._pivot===F1&&(this._pivot=new In(this,0,0)),this._pivot}set pivot(e){this._pivot===F1&&(this._pivot=new In(this,0,0),this._origin!==I1&&Ct("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===rD&&(this._skew=new In(this,0,0)),this._skew}set skew(e){this._skew===rD&&(this._skew=new In(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===sD&&(this._scale=new In(this,1,1)),this._scale}set scale(e){this._scale===sD&&(this._scale=new In(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===I1&&(this._origin=new In(this,0,0)),this._origin}set origin(e){this._origin===I1&&(this._origin=new In(this,0,0),this._pivot!==F1&&Ct("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const i=this.getLocalBounds().width;this._setWidth(e,i)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const i=this.getLocalBounds().height;this._setHeight(e,i)}getSize(e){e||(e={});const i=this.getLocalBounds();return e.width=Math.abs(this.scale.x*i.width),e.height=Math.abs(this.scale.y*i.height),e}setSize(e,i){const n=this.getLocalBounds();typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,n.width),i!==void 0&&this._setHeight(i,n.height)}_updateSkew(){const e=this._rotation,i=this._skew;this._cx=Math.cos(e+i._y),this._sx=Math.sin(e+i._y),this._cy=-Math.sin(e-i._x),this._sy=Math.cos(e-i._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const i=this.localTransform,n=this._scale,r=this._pivot,s=this._origin,a=this._position,o=n._x,l=n._y,h=r._x,d=r._y,p=-s._x,g=-s._y;i.a=this._cx*o,i.b=this._sx*o,i.c=this._cy*l,i.d=this._sy*l,i.tx=a._x-(h*i.a+d*i.c)+(p*i.a+g*i.c)-p,i.ty=a._y-(h*i.b+d*i.d)+(p*i.b+g*i.d)-g}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Fx,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const n=Pi.shared.setValue(e??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=Fx,this._onUpdate())}get tint(){return Nm(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=OS,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const i=e?2:0;(this.localDisplayStatus&2)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Um,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const i=e?0:4;(this.localDisplayStatus&4)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Um,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const i=e?1:0;(this.localDisplayStatus&1)!==i&&(this._updateFlags|=Um,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&i)for(let r=0;r<i.length;++r)i[r].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}Zi.mixin(sr,rK,lK,gK,pK,fK,oK,uK,mK,eK,nK,hK,sK);class Tl extends sr{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Ir(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const i=this.bounds,{x:n,y:r}=e;return n>=i.minX&&n<=i.maxX&&r>=i.minY&&r<=i.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null;for(const i in this._gpuData)this._gpuData[i].destroy?.();this._gpuData=null}collectRenderablesSimple(e,i,n){const{renderPipes:r}=i;r.blendMode.pushBlendMode(this,this.groupBlendMode,e),r[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const a=this.children,o=a.length;for(let l=0;l<o;l++)a[l].collectRenderables(e,i,n);r.blendMode.popBlendMode(e)}}class hu extends Tl{constructor(e=it.EMPTY){e instanceof it&&(e={texture:e});const{texture:i=it.EMPTY,anchor:n,roundPixels:r,width:s,height:a,...o}=e;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new In({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=r??!1,s!==void 0&&(this.width=s),a!==void 0&&(this.height=a)}static from(e,i=!1){return e instanceof it?new hu(e):new hu(it.from(e,i))}set texture(e){e||(e=it.EMPTY);const i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return XO(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return ft("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,i=this._texture,n=this._bounds,{width:r,height:s}=i.orig;n.minX=-e._x*r,n.maxX=n.minX+r,n.minY=-e._y*s,n.maxY=n.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,i){typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),i!==void 0&&this._setHeight(i,this._texture.orig.height)}}const cge=new Ir;function FS(t,e,i){const n=cge;t.measurable=!0,v_(t,i,n),e.addBoundsMask(n),t.measurable=!1}function IS(t,e,i){const n=al.get();t.measurable=!0;const r=Ss.get().identity(),s=yK(t,i,r);kS(t,n,s),t.measurable=!1,e.addBoundsMask(n),Ss.return(r),al.return(n)}function yK(t,e,i){return t?(t!==e&&(yK(t.parent,e,i),t.updateLocalTransform(),i.append(t.localTransform)),i):(Ct("Mask bounds, renderable is not inside the root container"),i)}class KO{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof hu),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,i){this.inverse||FS(this.mask,e,i)}addLocalBounds(e,i){IS(this.mask,e,i)}containsPoint(e,i){const n=this.mask;return i(n,e)}destroy(){this.reset()}static test(e){return e instanceof hu}}KO.extension=me.MaskEffect;class QO{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}QO.extension=me.MaskEffect;class ZO{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,i){FS(this.mask,e,i)}addLocalBounds(e,i){IS(this.mask,e,i)}containsPoint(e,i){const n=this.mask;return i(n,e)}destroy(){this.reset()}static test(e){return e instanceof sr}}ZO.extension=me.MaskEffect;const xK={createCanvas:(t,e)=>{const i=document.createElement("canvas");return i.width=t,i.height=e,i},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")};let JN=xK;const Wt={get(){return JN},set(t){JN=t}};class ol extends Xn{constructor(e){e.resource||(e.resource=Wt.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,i=this.height,n=this._resolution){const r=super.resize(e,i,n);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}ol.extension=me.TextureSource;class kh extends Xn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}kh.extension=me.TextureSource;var pl=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(pl||{});class UT{constructor(e,i=null,n=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=i,this.priority=n,this._once=r}match(e,i=null){return this._fn===e&&this._context===i}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const i=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=e?null:i,this.previous=null,i}}const _K=class Pa{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new UT(null,null,1/0),this.deltaMS=1/Pa.targetFPMS,this.elapsedMS=1/Pa.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,i,n=pl.NORMAL){return this._addListener(new UT(e,i,n))}addOnce(e,i,n=pl.NORMAL){return this._addListener(new UT(e,i,n,!0))}_addListener(e){let i=this._head.next,n=this._head;if(!i)e.connect(n);else{for(;i;){if(e.priority>i.priority){e.connect(n);break}n=i,i=i.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,i){let n=this._head.next;for(;n;)n.match(e,i)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,i=this._head;for(;i=i.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if(i=this.elapsedMS=e-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*Pa.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const i=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,i)/1e3,Pa.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const i=Math.max(this.minFPS,e);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!Pa._shared){const e=Pa._shared=new Pa;e.autoStart=!0,e._protected=!0}return Pa._shared}static get system(){if(!Pa._system){const e=Pa._system=new Pa;e.autoStart=!0,e._protected=!0}return Pa._system}};_K.targetFPMS=.06;let Ln=_K,aD;async function JO(){return aD??(aD=(async()=>{const e=Wt.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const i=await new Promise(a=>{const o=document.createElement("video");o.onloadeddata=()=>a(o),o.onerror=()=>a(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!i)return"premultiply-alpha-on-upload";const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(r),e.deleteTexture(n),e.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),aD}const LS=class vK extends Xn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...vK.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Ln.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,i=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(i.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await JO(),this._load=new Promise((n,r)=>{this.isValid?n(this):(this._resolve=n,this._reject=r,i.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${i.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ln.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ln.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ln.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};LS.extension=me.TextureSource;LS.defaultOptions={...Xn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};LS.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Gm=LS;const bo=(t,e,i=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||i?e(n):n):t);class hge{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const i=this._cache.get(e);return i||Ct(`[Assets] Asset id ${e} was not found in the Cache`),i}set(e,i){const n=bo(e);let r;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.test(i)){r=h.getCacheableAssets(n,i);break}}const s=new Map(Object.entries(r||{}));r||n.forEach(l=>{s.set(l,i)});const a=[...s.keys()],o={cacheKeys:a,keys:n};n.forEach(l=>{this._cacheMap.set(l,o)}),a.forEach(l=>{const h=r?r[l]:i;this._cache.has(l)&&this._cache.get(l)!==h&&Ct("[Cache] already has key:",l),this._cache.set(l,s.get(l))})}remove(e){if(!this._cacheMap.has(e)){Ct(`[Assets] Asset id ${e} was not found in the Cache`);return}const i=this._cacheMap.get(e);i.cacheKeys.forEach(r=>{this._cache.delete(r)}),i.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Ki=new hge,eM=[];Zi.handleByList(me.TextureSource,eM);function dge(t={}){return eF(t)}function eF(t={}){const e=t&&t.resource,i=e?t.resource:t,n=e?t:{resource:t};for(let r=0;r<eM.length;r++){const s=eM[r];if(s.test(i))return new s(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function TK(t={},e=!1){const i=t&&t.resource,n=i?t.resource:t,r=i?t:{resource:t};if(!e&&Ki.has(n))return Ki.get(n);const s=new it({source:eF(r)});return s.on("destroy",()=>{Ki.has(n)&&Ki.remove(n)}),e||Ki.set(n,s),s}function EK(t,e=!1){return typeof t=="string"?Ki.get(t):t instanceof Xn?new it({source:t}):TK(t,e)}it.from=EK;Xn.from=eF;Zi.add(KO,QO,ZO,Gm,kh,ol,MS);var ba=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(ba||{});function eu(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function ay(t){return t.split("?")[0].split("#")[0]}function fge(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pge(t,e,i){return t.replace(new RegExp(fge(e),"g"),i)}function mge(t,e){let i="",n=0,r=-1,s=0,a=-1;for(let o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const l=i.lastIndexOf("/");if(l!==i.length-1){l===-1?(i="",n=0):(i=i.slice(0,l),n=i.length-1-i.lastIndexOf("/")),r=o,s=0;continue}}else if(i.length===2||i.length===1){i="",n=0,r=o,s=0;continue}}}else i.length>0?i+=`/${t.slice(r+1,o)}`:i=t.slice(r+1,o),n=o-r-1;r=o,s=0}else a===46&&s!==-1?++s:s=-1}return i}const Qr={toPosix(t){return pge(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){eu(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(eu(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=ay(this.toPosix(e??Wt.get().getBaseUrl())),r=ay(this.toPosix(i??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?Qr.join(r,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(eu(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=mge(t),t.length>0&&n&&(t+="/"),i?`/${t}`:e+t},isAbsolute(t){return eu(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let i=0;i<t.length;++i){const n=t[i];if(eu(n),n.length>0)if(e===void 0)e=n;else{const r=t[i-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(eu(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const i=e===47;let n=-1,r=!0;const s=this.getProtocol(t),a=t;t=t.slice(s.length);for(let o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),e===47){if(!r){n=o;break}}else r=!1;return n===-1?i?"/":this.isUrl(a)?s+t:s:i&&n===1?"//":s+t.slice(0,n)},rootname(t){eu(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const i=t.indexOf("/",e.length);i!==-1?e=t.slice(0,i):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){eu(t),e&&eu(e),t=ay(this.toPosix(t));let i=0,n=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!r){i=s+1;break}}else o===-1&&(r=!1,o=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=o))}return i===n?n=o:n===-1&&(n=t.length),t.slice(i,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!r){i=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":t.slice(i,n)},extname(t){eu(t),t=ay(this.toPosix(t));let e=-1,i=0,n=-1,r=!0,s=0;for(let a=t.length-1;a>=0;--a){const o=t.charCodeAt(a);if(o===47){if(!r){i=a+1;break}continue}n===-1&&(r=!1,n=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===i+1?"":t.slice(e,n)},parse(t){eu(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=ay(this.toPosix(t));let i=t.charCodeAt(0);const n=this.isAbsolute(t);let r;e.root=this.rootname(t),n||this.hasProtocol(t)?r=1:r=0;let s=-1,a=0,o=-1,l=!0,h=t.length-1,d=0;for(;h>=r;--h){if(i=t.charCodeAt(h),i===47){if(!l){a=h+1;break}continue}o===-1&&(l=!1,o=h+1),i===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||o===-1||d===0||d===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&n?e.base=e.name=t.slice(1,o):e.base=e.name=t.slice(a,o)):(a===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,o)):(e.name=t.slice(a,s),e.base=t.slice(a,o)),e.ext=t.slice(s,o)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function SK(t,e,i,n,r){const s=e[i];for(let a=0;a<s.length;a++){const o=s[a];i<e.length-1?SK(t.replace(n[i],o),e,i+1,n,r):r.push(t.replace(n[i],o))}}function AK(t){const e=/\{(.*?)\}/g,i=t.match(e),n=[];if(i){const r=[];i.forEach(s=>{const a=s.substring(1,s.length-1).split(",");r.push(a)}),SK(t,r,0,i,n)}else n.push(t);return n}const Ix=t=>!Array.isArray(t);class Xh{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,i)=>`${e}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(e,i)=>i.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const i=e;this._defaultSearchParams=Object.keys(i).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(i[n])}`).join("&")}}getAlias(e){const{alias:i,src:n}=e;return bo(i||n,s=>typeof s=="string"?s:Array.isArray(s)?s.map(a=>a?.src??a):s?.src?s.src:s,!0)}addManifest(e){this._manifest&&Ct("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(e,i){const n=[];let r=i;Array.isArray(i)||(r=Object.entries(i).map(([s,a])=>typeof a=="string"||Array.isArray(a)?{alias:s,src:a}:{alias:s,...a})),r.forEach(s=>{const a=s.src,o=s.alias;let l;if(typeof o=="string"){const h=this._createBundleAssetId(e,o);n.push(h),l=[o,h]}else{const h=o.map(d=>this._createBundleAssetId(e,d));n.push(...h),l=[...o,...h]}this.add({...s,alias:l,src:a})}),this._bundles[e]=n}add(e){const i=[];Array.isArray(e)?i.push(...e):i.push(e);let n;n=s=>{this.hasKey(s)&&Ct(`[Resolver] already has key: ${s} overwriting`)},bo(i).forEach(s=>{const{src:a}=s;let{data:o,format:l,loadParser:h,parser:d}=s;const p=bo(a).map(v=>typeof v=="string"?AK(v):Array.isArray(v)?v:[v]),g=this.getAlias(s);Array.isArray(g)?g.forEach(n):n(g);const y=[];p.forEach(v=>{v.forEach(S=>{let T={};if(typeof S!="object"){T.src=S;for(let A=0;A<this._parsers.length;A++){const D=this._parsers[A];if(D.test(S)){T=D.parse(S);break}}}else o=S.data??o,l=S.format??l,(S.loadParser||S.parser)&&(h=S.loadParser??h,d=S.parser??d),T={...T,...S};if(!g)throw new Error(`[Resolver] alias is undefined for this asset: ${T.src}`);T=this._buildResolvedAsset(T,{aliases:g,data:o,format:l,loadParser:h,parser:d,progressSize:s.progressSize}),y.push(T)})}),g.forEach(v=>{this._assetMap[v]=y})})}resolveBundle(e){const i=Ix(e);e=bo(e);const n={};return e.forEach(r=>{const s=this._bundles[r];if(s){const a=this.resolve(s),o={};for(const l in a){const h=a[l];o[this._extractAssetIdFromBundle(r,l)]=h}n[r]=o}}),i?n[e[0]]:n}resolveUrl(e){const i=this.resolve(e);if(typeof e!="string"){const n={};for(const r in i)n[r]=i[r].src;return n}return i.src}resolve(e){const i=Ix(e);e=bo(e);const n={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const a=this._getPreferredOrder(s);a?.priority.forEach(o=>{a.params[o].forEach(l=>{const h=s.filter(d=>d[o]?d[o]===l:!1);h.length&&(s=h)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});n[r]=this._resolverHash[r]}),i?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let i=0;i<e.length;i++){const n=e[i],r=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const i=/\?/.test(e)?"&":"?";return`${e}${i}${this._defaultSearchParams}`}_buildResolvedAsset(e,i){const{aliases:n,data:r,loadParser:s,parser:a,format:o,progressSize:l}=i;return(this._basePath||this._rootPath)&&(e.src=Qr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=s??e.loadParser,e.parser=a??e.parser,e.format=o??e.format??CK(e.src),l!==void 0&&(e.progressSize=l),e}}Xh.RETINA_PREFIX=/@([0-9\.]+)x/;function CK(t){return t.split(".").pop().split("?").shift().split("#").shift()}const RE=(t,e)=>{const i=e.split("?")[1];return i&&(t+=`?${i}`),t},wK=class Gy{constructor(e,i){this.linkedSheets=[];let n=e;e?.source instanceof Xn&&(n={texture:e,data:i});const{texture:r,data:s,cachePrefix:a=""}=n;this.cachePrefix=a,this._texture=r instanceof it?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=s;const o=parseFloat(s.meta.scale);o?(this.resolution=o,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Gy.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e;const n=Gy.BATCH_SIZE;for(;i-e<n&&i<this._frameKeys.length;){const r=this._frameKeys[i],s=this._frames[r],a=s.frame;if(a){let o=null,l=null;const h=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new zi(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s.rotated?o=new zi(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new zi(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new zi(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new it({source:this.textureSource,frame:o,orig:d,trim:l,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}i++}}_processAnimations(){const e=this.data.animations||{};for(const i in e){this.animations[i]=[];for(let n=0;n<e[i].length;n++){const r=e[i][n];this.animations[i].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Gy.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Gy.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};wK.BATCH_SIZE=1e3;let tM=wK;const gge=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function DK(t,e,i){const n={};if(t.forEach(r=>{n[r]=e}),Object.keys(e.textures).forEach(r=>{n[`${e.cachePrefix}${r}`]=e.textures[r]}),!i){const r=Qr.dirname(t[0]);e.linkedSheets.forEach((s,a)=>{const o=DK([`${r}/${e.data.meta.related_multi_packs[a]}`],s,!0);Object.assign(n,o)})}return n}const RK={extension:me.Asset,cache:{test:t=>t instanceof tM,getCacheableAssets:(t,e)=>DK(t,e,!1)},resolver:{extension:{type:me.ResolveParser,name:"resolveSpritesheet"},test:t=>{const i=t.split("?")[0].split("."),n=i.pop(),r=i.pop();return n==="json"&&gge.includes(r)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(Xh.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:me.LoadParser,priority:ba.Normal,name:"spritesheetLoader"},async testParse(t,e){return Qr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,i){const{texture:n,imageFilename:r,textureOptions:s,cachePrefix:a}=e?.data??{};let o=Qr.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(n instanceof it)l=n;else{const p=RE(o+(r??t.meta.image),e.src);l=(await i.load([{src:p,data:s}]))[p]}const h=new tM({texture:l.source,data:t,cachePrefix:a});await h.parse();const d=t?.meta?.related_multi_packs;if(Array.isArray(d)){const p=[];for(const y of d){if(typeof y!="string")continue;let v=o+y;e.data?.ignoreMultiPack||(v=RE(v,e.src),p.push(i.load({src:v,data:{textureOptions:s,ignoreMultiPack:!0}})))}const g=await Promise.all(p);h.linkedSheets=g,g.forEach(y=>{y.linkedSheets=[h].concat(h.linkedSheets.filter(v=>v!==y))})}return h},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};Zi.add(RK);class tF{constructor(e){this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;const i=this._canvas.getBoundingClientRect(),n=this._canvas.width,r=this._canvas.height,s=i.width/n*this._renderer.resolution,a=i.height/r*this._renderer.resolution,o=i.left,l=i.top,h=`translate(${o}px, ${l}px) scale(${s}, ${a})`;h!==this._lastTransform&&(this._domElement.style.transform=h,this._lastTransform=h)},this._domElement=e.domElement,this._renderer=e.renderer,!(globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas)&&(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){"ResizeObserver"in globalThis?(this._observer&&(this._observer.disconnect(),this._observer=null),this._observer=new ResizeObserver(e=>{for(const i of e){if(i.target!==this._canvas)continue;const n=this.canvas.width,r=this.canvas.height,s=i.contentRect.width/n*this._renderer.resolution,a=i.contentRect.height/r*this._renderer.resolution;(this._lastScaleX!==s||this._lastScaleY!==a)&&(this.updateTranslation(),this._lastScaleX=s,this._lastScaleY=a)}}),this._observer.observe(this._canvas)):this._tickerAttached||Ln.shared.add(this.updateTranslation,this,pl.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&Ln.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}class Bg{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Bg.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new tn,this.page=new tn,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,i,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,i,n,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var oD=/iPhone/i,e5=/iPod/i,t5=/iPad/i,i5=/\biOS-universal(?:.+)Mac\b/i,uD=/\bAndroid(?:.+)Mobile\b/i,n5=/Android/i,lm=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,L1=/Silk/i,Zl=/Windows Phone/i,r5=/\bWindows(?:.+)ARM\b/i,s5=/BlackBerry/i,a5=/BB10/i,o5=/Opera Mini/i,u5=/\b(CriOS|Chrome)(?:.+)Mobile/i,l5=/Mobile(?:.+)Firefox\b/i,c5=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function bge(t){return function(e){return e.test(t)}}function h5(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var i=e.userAgent,n=i.split("[FBAN");typeof n[1]<"u"&&(i=n[0]),n=i.split("Twitter"),typeof n[1]<"u"&&(i=n[0]);var r=bge(i),s={apple:{phone:r(oD)&&!r(Zl),ipod:r(e5),tablet:!r(oD)&&(r(t5)||c5(e))&&!r(Zl),universal:r(i5),device:(r(oD)||r(e5)||r(t5)||r(i5)||c5(e))&&!r(Zl)},amazon:{phone:r(lm),tablet:!r(lm)&&r(L1),device:r(lm)||r(L1)},android:{phone:!r(Zl)&&r(lm)||!r(Zl)&&r(uD),tablet:!r(Zl)&&!r(lm)&&!r(uD)&&(r(L1)||r(n5)),device:!r(Zl)&&(r(lm)||r(L1)||r(uD)||r(n5))||r(/\bokhttp\b/i)},windows:{phone:r(Zl),tablet:r(r5),device:r(Zl)||r(r5)},other:{blackberry:r(s5),blackberry10:r(a5),opera:r(o5),firefox:r(l5),chrome:r(u5),device:r(s5)||r(a5)||r(o5)||r(l5)||r(u5)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const yge=h5.default??h5,PK=yge(globalThis.navigator),xge=9,d5=100,_ge=0,vge=0,f5=2,p5=1,Tge=-1e3,Ege=-1e3,Sge=2,iF=class MK{constructor(e,i=PK){this._mobileInfo=i,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pools={},this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._isRunningTests=!1,this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnMouseMove=this._onMouseMove.bind(this),this._hookDiv=null,(i.tablet||i.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}get div(){return this._div}_createTouchHook(){const e=document.createElement("button");e.style.width=`${p5}px`,e.style.height=`${p5}px`,e.style.position="absolute",e.style.top=`${Tge}px`,e.style.left=`${Ege}px`,e.style.zIndex=Sge.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top=`${_ge}px`,this._div.style.left=`${vge}px`,this._div.style.pointerEvents="none",this._div.style.zIndex=f5.toString(),this._canvasObserver=new tF({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._deactivateOnMouseMove&&globalThis.document.addEventListener("mousemove",this._boundOnMouseMove,!0);const e=this._renderer.view.canvas;if(e.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{const i=new MutationObserver(()=>{e.parentNode&&(i.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())});i.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;for(const e in this._pools)this._pools[e].forEach(n=>{n.parentNode&&n.parentNode.removeChild(n)}),delete this._pools[e];this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pools={},this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const i=e.children;if(i)for(let n=0;n<i.length;n++)this._updateAccessibleObjects(i[n])}init(e){const n={accessibilityOptions:{...MK.defaultOptions,...e?.accessibilityOptions||{}}};this.debug=n.accessibilityOptions.debug,this._activateOnTab=n.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=n.accessibilityOptions.deactivateOnMouseMove,n.accessibilityOptions.enabledByDefault&&this._activate(),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,(!this._renderer.renderingToScreen||!this._renderer.view.canvas)&&!this._isRunningTests))return;const i=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const n of this._children)n._renderId===this._renderId&&i.add(this._children.indexOf(n))}for(let n=this._children.length-1;n>=0;n--){const r=this._children[n];i.has(n)||(r._accessibleDiv&&r._accessibleDiv.parentNode&&(r._accessibleDiv.parentNode.removeChild(r._accessibleDiv),this._getPool(r.accessibleType).push(r._accessibleDiv),r._accessibleDiv=null),r._accessibleActive=!1,YO(this._children,n,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let n=0;n<this._children.length;n++){const r=this._children[n];if(!r._accessibleActive||!r._accessibleDiv)continue;const s=r._accessibleDiv,a=r.hitArea||r.getBounds().rectangle;if(r.hitArea){const o=r.worldTransform;s.style.left=`${o.tx+a.x*o.a}px`,s.style.top=`${o.ty+a.y*o.d}px`,s.style.width=`${a.width*o.a}px`,s.style.height=`${a.height*o.d}px`}else this._capHitArea(a),s.style.left=`${a.x}px`,s.style.top=`${a.y}px`,s.style.width=`${a.width}px`,s.style.height=`${a.height}px`}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:i,height:n}=this._renderer;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>n&&(e.height=n-e.y)}_addChild(e){let n=this._getPool(e.accessibleType).pop();n?(n.innerHTML="",n.removeAttribute("title"),n.removeAttribute("aria-label"),n.tabIndex=0):(e.accessibleType==="button"?n=document.createElement("button"):(n=document.createElement(e.accessibleType),n.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(n.innerText=e.accessibleText)),n.style.width=`${d5}px`,n.style.height=`${d5}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=f5.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),e.interactive?n.tabIndex=e.tabIndex:n.tabIndex=0,this.debug&&this._updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv)}_dispatchEvent(e,i){const{container:n}=e.target,r=this._renderer.events.rootBoundary,s=Object.assign(new Bg(r),{target:n});r.rootTarget=this._renderer.lastObjectRendered,i.forEach(a=>r.dispatchEvent(s,a))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==xge||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pools=null,this._children=null,this._renderer=null,this._hookDiv=null,globalThis.removeEventListener("keydown",this._boundOnKeyDown),this._boundOnKeyDown=null,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._boundOnMouseMove=null}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}_getPool(e){return this._pools[e]||(this._pools[e]=[]),this._pools[e]}};iF.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"accessibility"};iF.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let Age=iF;const Cge={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},lD=Object.create(null),m5=Object.create(null);function rg(t,e){let i=m5[t];return i===void 0&&(lD[e]===void 0&&(lD[e]=1),m5[t]=i=lD[e]++),i}let N1;function nF(){return(!N1||N1?.isContextLost())&&(N1=Wt.get().createCanvas().getContext("webgl",{})),N1}let U1;function BK(){if(!U1){U1="mediump";const t=nF();t&&t.getShaderPrecisionFormat&&(U1=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return U1}function kK(t,e,i){return e?t:i?(t=t.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}function OK(t,e,i){const n=i?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let r=i?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&n!=="highp"&&(r="mediump"),`precision ${r} float;
${t}`}else if(n!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}function FK(t,e){return e?`#version 300 es
${t}`:t}const wge={},Dge={};function IK(t,{name:e="pixi-program"},i=!0){e=e.replace(/\s+/g,"-"),e+=i?"-fragment":"-vertex";const n=i?wge:Dge;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}function LK(t,e){return e?t.replace("#version 300 es",""):t}const cD={stripVersion:LK,ensurePrecision:OK,addProgramDefines:kK,setProgramName:IK,insertVersion:FK},oy=Object.create(null),NK=class iM{constructor(e){e={...iM.defaultOptions,...e};const i=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:BK()},setProgramName:{name:e.name},addProgramDefines:i,insertVersion:i};let r=e.fragment,s=e.vertex;Object.keys(cD).forEach(a=>{const o=n[a];r=cD[a](r,o,!0),s=cD[a](s,o,!1)}),this.fragment=r,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=rg(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,oy[this._cacheKey]=null}static from(e){const i=`${e.vertex}:${e.fragment}`;return oy[i]||(oy[i]=new iM(e),oy[i]._cacheKey=i),oy[i]}};NK.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let ya=NK;const g5={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function cc(t){return g5[t]??g5.float32}const Rge={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function UK({source:t,entryPoint:e}){const i={},n=t.indexOf(`fn ${e}`);if(n!==-1){const r=t.indexOf("->",n);if(r!==-1){const s=t.substring(n,r),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(s))!==null;){const l=Rge[o[3]]??"float32";i[o[2]]={location:parseInt(o[1],10),format:l,stride:cc(l).stride,offset:0,instance:!1,start:0}}}}return i}function GT(t){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,i=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,h=t.match(e)?.map(p=>({group:parseInt(p.match(i)[1],10),binding:parseInt(p.match(n)[1],10),name:p.match(r)[2],isUniform:p.match(r)[1]==="<uniform>",type:p.match(s)[1]}));if(!h)return{groups:[],structs:[]};const d=t.match(a)?.map(p=>{const g=p.match(l)[1],y=p.match(o).reduce((v,S)=>{const[T,A]=S.split(":");return v[T.trim()]=A.trim(),v},{});return y?{name:g,members:y}:null}).filter(({name:p})=>h.some(g=>g.type===p))??[];return{groups:h,structs:d}}var Pm=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(Pm||{});function GK({groups:t}){const e=[];for(let i=0;i<t.length;i++){const n=t[i];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:Pm.VERTEX|Pm.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:Pm.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:Pm.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function HK({groups:t}){const e=[];for(let i=0;i<t.length;i++){const n=t[i];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}function zK(t,e){const i=new Set,n=new Set,r=[...t.structs,...e.structs].filter(a=>i.has(a.name)?!1:(i.add(a.name),!0)),s=[...t.groups,...e.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return n.has(o)?!1:(n.add(o),!0)});return{structs:r,groups:s}}const uy=Object.create(null);class qs{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:i,vertex:n,layout:r,gpuLayout:s,name:a}=e;if(this.name=a,this.fragment=i,this.vertex=n,i.source===n.source){const o=GT(i.source);this.structsAndGroups=o}else{const o=GT(n.source),l=GT(i.source);this.structsAndGroups=zK(o,l)}this.layout=r??HK(this.structsAndGroups),this.gpuLayout=s??GK(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:i}=this,n=e.source+i.source+e.entryPoint+i.entryPoint;this._layoutKey=rg(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=UK(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,uy[this._cacheKey]=null}static from(e){const i=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return uy[i]||(uy[i]=new qs(e),uy[i]._cacheKey=i),uy[i]}}const rF=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],VK=rF.reduce((t,e)=>(t[e]=!0,t),{});function jK(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const XK=class YK{constructor(e,i){this._touched=0,this.uid=gn("uniform"),this._resourceType="uniformGroup",this._resourceId=gn("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...YK.defaultOptions,...i},this.uniformStructures=e;const n={};for(const r in e){const s=e[r];if(s.name=r,s.size=s.size??1,!VK[s.type]){const a=s.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,o,l]=a;throw new Error(`Uniform type ${s.type} is not supported. Use type: '${o}', size: ${l} instead.`)}throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${rF.join(", ")}`)}s.value??(s.value=jK(s.type,s.size)),n[r]=s.value}this.uniforms=n,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=rg(Object.keys(n).map(r=>`${r}-${e[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};XK.defaultOptions={ubo:!1,isStatic:!1};let dr=XK;class ul{constructor(e){this.resources=Object.create(null),this._dirty=!0;let i=0;for(const n in e){const r=e[n];this.setResource(r,i++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let i=0;for(const n in this.resources)e[i++]=this.resources[n]._resourceId;this._key=e.join("|")}setResource(e,i){const n=this.resources[i];e!==n&&(n&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[i]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const i=this.resources;for(const n in i)i[n]._touched=e}destroy(){const e=this.resources;for(const i in e)e[i]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const i=this.resources;for(const n in i)i[n]===e&&(i[n]=null)}else this._updateKey()}}var pa=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(pa||{});class za extends Ur{constructor(e){super(),this.uid=gn("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:i,glProgram:n,groups:r,resources:s,compatibleRenderers:a,groupMap:o}=e;this.gpuProgram=i,this.glProgram=n,a===void 0&&(a=0,i&&(a|=pa.WEBGPU),n&&(a|=pa.WEBGL)),this.compatibleRenderers=a;const l={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!i&&r&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!i&&r&&o)for(const h in o)for(const d in o[h]){const p=o[h][d];l[p]={group:h,binding:d,name:p}}else if(i&&r&&!o){const h=i.structsAndGroups.groups;o={},h.forEach(d=>{o[d.group]=o[d.group]||{},o[d.group][d.binding]=d.name,l[d.name]=d})}else if(s){r={},o={},i&&i.structsAndGroups.groups.forEach(p=>{o[p.group]=o[p.group]||{},o[p.group][p.binding]=p.name,l[p.name]=p});let h=0;for(const d in s)l[d]||(r[99]||(r[99]=new ul,this._ownedBindGroups.push(r[99])),l[d]={group:99,binding:h,name:d},o[99]=o[99]||{},o[99][h]=d,h++);for(const d in s){const p=d;let g=s[d];!g.source&&!g._resourceType&&(g=new dr(g));const y=l[p];y&&(r[y.group]||(r[y.group]=new ul,this._ownedBindGroups.push(r[y.group])),r[y.group].setResource(g,y.binding))}}this.groups=r,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(r,l)}addResource(e,i,n){var r,s;(r=this._uniformBindMap)[i]||(r[i]={}),(s=this._uniformBindMap[i])[n]||(s[n]=e),this.groups[i]||(this.groups[i]=new ul,this._ownedBindGroups.push(this.groups[i]))}_buildResourceAccessor(e,i){const n={};for(const r in i){const s=i[r];Object.defineProperty(n,s.name,{get(){return e[s.group].getResource(s.binding)},set(a){e[s.group].setResource(a,s.binding)}})}return n}destroy(e=!1){this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(i=>{i.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:i,gl:n,...r}=e;let s,a;return i&&(s=qs.from(i)),n&&(a=ya.from(n)),new za({gpuProgram:s,glProgram:a,...r})}}const Pge={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},hD=0,dD=1,fD=2,pD=3,mD=4,gD=5,nM=class qK{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<hD)}set blend(e){!!(this.data&1<<hD)!==e&&(this.data^=1<<hD)}get offsets(){return!!(this.data&1<<dD)}set offsets(e){!!(this.data&1<<dD)!==e&&(this.data^=1<<dD)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<fD)}set culling(e){!!(this.data&1<<fD)!==e&&(this.data^=1<<fD)}get depthTest(){return!!(this.data&1<<pD)}set depthTest(e){!!(this.data&1<<pD)!==e&&(this.data^=1<<pD)}get depthMask(){return!!(this.data&1<<gD)}set depthMask(e){!!(this.data&1<<gD)!==e&&(this.data^=1<<gD)}get clockwiseFrontFace(){return!!(this.data&1<<mD)}set clockwiseFrontFace(e){!!(this.data&1<<mD)!==e&&(this.data^=1<<mD)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=Pge[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new qK;return e.depthTest=!1,e.blend=!0,e}};nM.default2d=nM.for2d();let Na=nM;const WK=class rM extends za{constructor(e){e={...rM.defaultOptions,...e},super(e),this.enabled=!0,this._state=Na.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,i,n,r){e.applyFilter(this,i,n,r)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:i,gl:n,...r}=e;let s,a;return i&&(s=qs.from(i)),n&&(a=ya.from(n)),new rM({gpuProgram:s,glProgram:a,...r})}};WK.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let El=WK;var $K=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,KK=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,QK=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class ar extends El{constructor(e){const i=e.gpu,n=b5({source:QK,...i}),r=qs.from({vertex:{source:n,entryPoint:"mainVertex"},fragment:{source:n,entryPoint:"mainFragment"}}),s=e.gl,a=b5({source:$K,...s}),o=ya.from({vertex:KK,fragment:a}),l=new dr({uBlend:{value:1,type:"f32"}});super({gpuProgram:r,glProgram:o,blendRequired:!0,resources:{blendUniforms:l,uBackTexture:it.EMPTY}})}}function b5(t){const{source:e,functions:i,main:n}=t;return e.replace("{FUNCTIONS}",i).replace("{MAIN}",n)}const NS=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,US=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class ZK extends ar{constructor(){super({gl:{functions:`
                ${NS}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${US}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}ZK.extension={name:"color",type:me.BlendMode};class JK extends ar{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}JK.extension={name:"color-burn",type:me.BlendMode};class eQ extends ar{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}eQ.extension={name:"color-dodge",type:me.BlendMode};class tQ extends ar{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}tQ.extension={name:"darken",type:me.BlendMode};class iQ extends ar{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}iQ.extension={name:"difference",type:me.BlendMode};class nQ extends ar{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}nQ.extension={name:"divide",type:me.BlendMode};class rQ extends ar{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}rQ.extension={name:"exclusion",type:me.BlendMode};class sQ extends ar{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}sQ.extension={name:"hard-light",type:me.BlendMode};class aQ extends ar{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}aQ.extension={name:"hard-mix",type:me.BlendMode};class oQ extends ar{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}oQ.extension={name:"lighten",type:me.BlendMode};class uQ extends ar{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}uQ.extension={name:"linear-burn",type:me.BlendMode};class lQ extends ar{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}lQ.extension={name:"linear-dodge",type:me.BlendMode};class cQ extends ar{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}cQ.extension={name:"linear-light",type:me.BlendMode};class hQ extends ar{constructor(){super({gl:{functions:`
                ${NS}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${US}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}hQ.extension={name:"luminosity",type:me.BlendMode};class dQ extends ar{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}dQ.extension={name:"negation",type:me.BlendMode};class fQ extends ar{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}fQ.extension={name:"overlay",type:me.BlendMode};class pQ extends ar{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}pQ.extension={name:"pin-light",type:me.BlendMode};class mQ extends ar{constructor(){super({gl:{functions:`
                ${NS}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${US}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}mQ.extension={name:"saturation",type:me.BlendMode};class gQ extends ar{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}gQ.extension={name:"soft-light",type:me.BlendMode};class bQ extends ar{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}bQ.extension={name:"subtract",type:me.BlendMode};class yQ extends ar{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}yQ.extension={name:"vivid-light",type:me.BlendMode};const sM=[];Zi.handleByNamedList(me.Environment,sM);async function sF(t){if(!t)for(let e=0;e<sM.length;e++){const i=sM[e];if(i.value.test()){await i.value.load();return}}}async function Mge(t){return sF(!t)}let ly;function aF(){if(typeof ly=="boolean")return ly;try{ly=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ly=!1}return ly}function y5(t,e,i=2){const n=e&&e.length,r=n?e[0]*i:t.length;let s=xQ(t,0,r,i,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,h;if(n&&(s=Ige(t,e,s,i)),t.length>80*i){o=t[0],l=t[1];let d=o,p=l;for(let g=i;g<r;g+=i){const y=t[g],v=t[g+1];y<o&&(o=y),v<l&&(l=v),y>d&&(d=y),v>p&&(p=v)}h=Math.max(d-o,p-l),h=h!==0?32767/h:0}return Lx(s,a,i,o,l,h,0),a}function xQ(t,e,i,n,r){let s;if(r===qge(t,e,i,n)>0)for(let a=e;a<i;a+=n)s=x5(a/n|0,t[a],t[a+1],s);else for(let a=i-n;a>=e;a-=n)s=x5(a/n|0,t[a],t[a+1],s);return s&&sg(s,s.next)&&(Ux(s),s=s.next),s}function xf(t,e){if(!t)return t;e||(e=t);let i=t,n;do if(n=!1,!i.steiner&&(sg(i,i.next)||jn(i.prev,i,i.next)===0)){if(Ux(i),i=e=i.prev,i===i.next)break;n=!0}else i=i.next;while(n||i!==e);return e}function Lx(t,e,i,n,r,s,a){if(!t)return;!a&&s&&Hge(t,n,r,s);let o=t;for(;t.prev!==t.next;){const l=t.prev,h=t.next;if(s?kge(t,n,r,s):Bge(t)){e.push(l.i,t.i,h.i),Ux(t),t=h.next,o=h.next;continue}if(t=h,t===o){a?a===1?(t=Oge(xf(t),e),Lx(t,e,i,n,r,s,2)):a===2&&Fge(t,e,i,n,r,s):Lx(xf(t),e,i,n,r,s,1);break}}}function Bge(t){const e=t.prev,i=t,n=t.next;if(jn(e,i,n)>=0)return!1;const r=e.x,s=i.x,a=n.x,o=e.y,l=i.y,h=n.y,d=Math.min(r,s,a),p=Math.min(o,l,h),g=Math.max(r,s,a),y=Math.max(o,l,h);let v=n.next;for(;v!==e;){if(v.x>=d&&v.x<=g&&v.y>=p&&v.y<=y&&Hy(r,o,s,l,a,h,v.x,v.y)&&jn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function kge(t,e,i,n){const r=t.prev,s=t,a=t.next;if(jn(r,s,a)>=0)return!1;const o=r.x,l=s.x,h=a.x,d=r.y,p=s.y,g=a.y,y=Math.min(o,l,h),v=Math.min(d,p,g),S=Math.max(o,l,h),T=Math.max(d,p,g),A=aM(y,v,e,i,n),D=aM(S,T,e,i,n);let R=t.prevZ,B=t.nextZ;for(;R&&R.z>=A&&B&&B.z<=D;){if(R.x>=y&&R.x<=S&&R.y>=v&&R.y<=T&&R!==r&&R!==a&&Hy(o,d,l,p,h,g,R.x,R.y)&&jn(R.prev,R,R.next)>=0||(R=R.prevZ,B.x>=y&&B.x<=S&&B.y>=v&&B.y<=T&&B!==r&&B!==a&&Hy(o,d,l,p,h,g,B.x,B.y)&&jn(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;R&&R.z>=A;){if(R.x>=y&&R.x<=S&&R.y>=v&&R.y<=T&&R!==r&&R!==a&&Hy(o,d,l,p,h,g,R.x,R.y)&&jn(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;B&&B.z<=D;){if(B.x>=y&&B.x<=S&&B.y>=v&&B.y<=T&&B!==r&&B!==a&&Hy(o,d,l,p,h,g,B.x,B.y)&&jn(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Oge(t,e){let i=t;do{const n=i.prev,r=i.next.next;!sg(n,r)&&vQ(n,i,i.next,r)&&Nx(n,r)&&Nx(r,n)&&(e.push(n.i,i.i,r.i),Ux(i),Ux(i.next),i=t=r),i=i.next}while(i!==t);return xf(i)}function Fge(t,e,i,n,r,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&jge(a,o)){let l=TQ(a,o);a=xf(a,a.next),l=xf(l,l.next),Lx(a,e,i,n,r,s,0),Lx(l,e,i,n,r,s,0);return}o=o.next}a=a.next}while(a!==t)}function Ige(t,e,i,n){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,l=s<a-1?e[s+1]*n:t.length,h=xQ(t,o,l,n,!1);h===h.next&&(h.steiner=!0),r.push(Vge(h))}r.sort(Lge);for(let s=0;s<r.length;s++)i=Nge(r[s],i);return i}function Lge(t,e){let i=t.x-e.x;if(i===0&&(i=t.y-e.y,i===0)){const n=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);i=n-r}return i}function Nge(t,e){const i=Uge(t,e);if(!i)return e;const n=TQ(i,t);return xf(n,n.next),xf(i,i.next)}function Uge(t,e){let i=e;const n=t.x,r=t.y;let s=-1/0,a;if(sg(t,i))return i;do{if(sg(t,i.next))return i.next;if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const p=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(p<=n&&p>s&&(s=p,a=i.x<i.next.x?i:i.next,p===n))return a}i=i.next}while(i!==e);if(!a)return null;const o=a,l=a.x,h=a.y;let d=1/0;i=a;do{if(n>=i.x&&i.x>=l&&n!==i.x&&_Q(r<h?n:s,r,l,h,r<h?s:n,r,i.x,i.y)){const p=Math.abs(r-i.y)/(n-i.x);Nx(i,t)&&(p<d||p===d&&(i.x>a.x||i.x===a.x&&Gge(a,i)))&&(a=i,d=p)}i=i.next}while(i!==o);return a}function Gge(t,e){return jn(t.prev,t,e.prev)<0&&jn(e.next,t,t.next)<0}function Hge(t,e,i,n){let r=t;do r.z===0&&(r.z=aM(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,zge(r)}function zge(t){let e,i=1;do{let n=t,r;t=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let h=0;h<i&&(o++,a=a.nextZ,!!a);h++);let l=i;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=a}s.nextZ=null,i*=2}while(e>1);return t}function aM(t,e,i,n,r){return t=(t-i)*r|0,e=(e-n)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Vge(t){let e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t);return i}function _Q(t,e,i,n,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(i-a)*(e-o)&&(i-a)*(s-o)>=(r-a)*(n-o)}function Hy(t,e,i,n,r,s,a,o){return!(t===a&&e===o)&&_Q(t,e,i,n,r,s,a,o)}function jge(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Xge(t,e)&&(Nx(t,e)&&Nx(e,t)&&Yge(t,e)&&(jn(t.prev,t,e.prev)||jn(t,e.prev,e))||sg(t,e)&&jn(t.prev,t,t.next)>0&&jn(e.prev,e,e.next)>0)}function jn(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function sg(t,e){return t.x===e.x&&t.y===e.y}function vQ(t,e,i,n){const r=H1(jn(t,e,i)),s=H1(jn(t,e,n)),a=H1(jn(i,n,t)),o=H1(jn(i,n,e));return!!(r!==s&&a!==o||r===0&&G1(t,i,e)||s===0&&G1(t,n,e)||a===0&&G1(i,t,n)||o===0&&G1(i,e,n))}function G1(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function H1(t){return t>0?1:t<0?-1:0}function Xge(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&vQ(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function Nx(t,e){return jn(t.prev,t,t.next)<0?jn(t,e,t.next)>=0&&jn(t,t.prev,e)>=0:jn(t,e,t.prev)<0||jn(t,t.next,e)<0}function Yge(t,e){let i=t,n=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==t);return n}function TQ(t,e){const i=oM(t.i,t.x,t.y),n=oM(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function x5(t,e,i,n){const r=oM(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Ux(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function oM(t,e,i){return{i:t,x:e,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function qge(t,e,i,n){let r=0;for(let s=e,a=i-n;s<i;s+=n)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}const EQ=y5.default||y5;var la=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(la||{});class oF{constructor(e){this.items=[],this._name=e}emit(e,i,n,r,s,a,o,l){const{name:h,items:d}=this;for(let p=0,g=d.length;p<g;p++)d[p][h](e,i,n,r,s,a,o,l);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const i=this.items.indexOf(e);return i!==-1&&this.items.splice(i,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Wge=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],SQ=class AQ extends Ur{constructor(e){super(),this.uid=gn("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const i=[...Wge,...this.config.runners??[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){const i=e.skipExtensionImports===!0?!0:e.manageImports===!1;await sF(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const n in this._systemsHash)e={...this._systemsHash[n].constructor.defaultOptions,...e};e={...AQ.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(e);this._initOptions=e}render(e,i){let n=e;if(n instanceof sr&&(n={container:n},i&&(ft(Yt,"passing a second argument is deprecated, please use render options instead"),n.target=i.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??(n.clearColor=this.background.colorRgba),n.clear??(n.clear=this.background.clearBeforeRender)),n.clearColor){const r=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=r?n.clearColor:Pi.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),n.container.visible&&(n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n))}resize(e,i,n){const r=this.view.resolution;this.view.resize(e,i,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==r&&this.runners.resolutionChange.emit(n)}clear(e={}){const i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=la.ALL);const{clear:n,clearColor:r,target:s}=e;Pi.shared.setValue(r??this.background.colorRgba),i.renderTarget.clear(s,n,Pi.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(i=>{this.runners[i]=new oF(i)})}_addSystems(e){let i;for(i in e){const n=e[i];this._addSystem(n.value,n.name)}}_addSystem(e,i){const n=new e(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=n,this._systemsHash[i]=n;for(const r in this.runners)this.runners[r].add(n);return this}_addPipes(e,i){const n=i.reduce((r,s)=>(r[s.name]=s.value,r),{});e.forEach(r=>{const s=r.value,a=r.name,o=n[a];this.renderPipes[a]=new s(this,o?new o:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(i=>{i.destroy()}),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Uf.release(),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!aF())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};SQ.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let T_=SQ,z1;function E_(t){return z1!==void 0||(z1=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:t??T_.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Wt.get().getWebGLRenderingContext())return!1;let n=Wt.get().createCanvas().getContext("webgl",e);const r=!!n?.getContextAttributes()?.stencil;if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,r}catch{return!1}})()),z1}let V1;async function S_(t={}){return V1!==void 0||(V1=await(async()=>{const e=Wt.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),V1}const _5=["webgl","webgpu","canvas"];async function CQ(t){let e=[];t.preference?(e.push(t.preference),_5.forEach(s=>{s!==t.preference&&e.push(s)})):e=_5.slice();let i,n={};for(let s=0;s<e.length;s++){const a=e[s];if(a==="webgpu"&&await S_()){const{WebGPURenderer:o}=await wx(async()=>{const{WebGPURenderer:l}=await Promise.resolve().then(()=>Axe);return{WebGPURenderer:l}},void 0);i=o,n={...t,...t.webgpu};break}else if(a==="webgl"&&E_(t.failIfMajorPerformanceCaveat??T_.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await wx(async()=>{const{WebGLRenderer:l}=await Promise.resolve().then(()=>bxe);return{WebGLRenderer:l}},void 0);i=o,n={...t,...t.webgl};break}else if(a==="canvas")throw n={...t},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!i)throw new Error("No available renderer for the current environment");const r=new i;return await r.init(n),r}const $ge=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,Gx="8.14.0";class uF{static init(){globalThis.__PIXI_APP_INIT__?.(this,Gx)}static destroy(){}}uF.extension=me.Application;class lF{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,Gx)}destroy(){this._renderer=null}}lF.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"initHook",priority:-10};const wQ=class uM{constructor(...e){this.stage=new sr,e[0]!==void 0&&ft(Yt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await CQ(e),uM._plugins.forEach(i=>{i.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return ft(Yt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,i=!1){const n=uM._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null}};wQ._plugins=[];let DQ=wQ;Zi.handleByList(me.Application,DQ._plugins);Zi.add(uF);class RQ{static init(e){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let i,n;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:s}=this._resizeTo;i=r,n=s}this.renderer.resize(i,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}RQ.extension=me.Application;class PQ{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,pl.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ln.shared:new Ln,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}PQ.extension=me.Application;class cF extends Ur{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return ft(Yt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return ft(Yt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return ft(Yt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return ft(Yt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return ft(Yt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)this.chars[i].texture?.destroy();this.chars=null,e&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class Kge{constructor(e=0,i=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=n,this.size=0,this.ttl=i}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const i=this.items[e];delete this.items[e],this.size--,i.prev!==null&&(i.prev.next=i.next),i.next!==null&&(i.next.prev=i.prev),this.first===i&&(this.first=i.next),this.last===i&&(this.last=i.prev)}return this}entries(e=this.keys()){return e.map(i=>[i,this.get(i)])}evict(e=!1){if(e||this.size>0){const i=this.first;delete this.items[i.key],--this.size===0?(this.first=null,this.last=null):(this.first=i.next,this.first.prev=null)}return this}expiresAt(e){let i;return this.has(e)&&(i=this.items[e].expiry),i}get(e){const i=this.items[e];if(i!==void 0){if(this.ttl>0&&i.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(i),i.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let i=this.first;for(;i!==null;)e.push(i.key),i=i.next;return e}setWithEvicted(e,i,n=this.resetTtl){let r=null;if(this.has(e))this.set(e,i,!0,n);else{this.max>0&&this.size===this.max&&(r={...this.first},this.evict(!0));let s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:i};++this.size===1?this.first=s:this.last.next=s,this.last=s}return r}set(e,i,n=!1,r=this.resetTtl){let s=this.items[e];return n||s!==void 0?(s.value=i,n===!1&&r&&(s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(s)):(this.max>0&&this.size===this.max&&this.evict(!0),s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:i},++this.size===1?this.first=s:this.last.next=s,this.last=s),this}values(e=this.keys()){return e.map(i=>this.get(i))}}function MQ(t=1e3,e=0,i=!1){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof i!="boolean")throw new TypeError("Invalid resetTtl value");return new Kge(t,e,i)}const Qge=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Hx(t){const e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize;let i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let n=i.length-1;n>=0;n--){let r=i[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!Qge.includes(r)&&(r=`"${r}"`),i[n]=r}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${i.join(",")}`}const bD={willReadFrequently:!0},mu=class vt{static get experimentalLetterSpacingSupported(){let e=vt._experimentalLetterSpacingSupported;if(e===void 0){const i=Wt.get().getCanvasRenderingContext2D().prototype;e=vt._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(e,i,n,r,s,a,o,l,h){this.text=e,this.style=i,this.width=n,this.height=r,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=h}static measureText(e=" ",i,n=vt._canvas,r=i.wordWrap){const s=`${e}-${i.styleKey}-wordWrap-${r}`;if(vt._measurementCache.has(s))return vt._measurementCache.get(s);const a=Hx(i),o=vt.measureFont(a);o.fontSize===0&&(o.fontSize=i.fontSize,o.ascent=i.fontSize);const l=vt.__context;l.font=a;const d=(r?vt._wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),p=new Array(d.length);let g=0;for(let D=0;D<d.length;D++){const R=vt._measureText(d[D],i.letterSpacing,l);p[D]=R,g=Math.max(g,R)}const y=i._stroke?.width||0;let v=g+y;i.dropShadow&&(v+=i.dropShadow.distance);const S=i.lineHeight||o.fontSize;let T=Math.max(S,o.fontSize+y)+(d.length-1)*(S+i.leading);i.dropShadow&&(T+=i.dropShadow.distance);const A=new vt(e,i,v,T,d,p,S+i.leading,g,o);return vt._measurementCache.set(s,A),A}static _measureText(e,i,n){let r=!1;vt.experimentalLetterSpacingSupported&&(vt.experimentalLetterSpacing?(n.letterSpacing=`${i}px`,n.textLetterSpacing=`${i}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const s=n.measureText(e);let a=s.width;const o=-s.actualBoundingBoxLeft;let h=s.actualBoundingBoxRight-o;if(a>0)if(r)a-=i,h-=i;else{const d=(vt.graphemeSegmenter(e).length-1)*i;a+=d,h+=d}return Math.max(a,h)}static _wordWrap(e,i,n=vt._canvas){const r=n.getContext("2d",bD);let s=0,a="",o="";const l=Object.create(null),{letterSpacing:h,whiteSpace:d}=i,p=vt._collapseSpaces(d),g=vt._collapseNewlines(d);let y=!p;const v=i.wordWrapWidth+h,S=vt._tokenize(e);for(let T=0;T<S.length;T++){let A=S[T];if(vt._isNewline(A)){if(!g){o+=vt._addLine(a),y=!p,a="",s=0;continue}A=" "}if(p){const R=vt.isBreakingSpace(A),B=vt.isBreakingSpace(a[a.length-1]);if(R&&B)continue}const D=vt._getFromCache(A,h,l,r);if(D>v)if(a!==""&&(o+=vt._addLine(a),a="",s=0),vt.canBreakWords(A,i.breakWords)){const R=vt.wordWrapSplit(A);for(let B=0;B<R.length;B++){let z=R[B],L=z,H=1;for(;R[B+H];){const j=R[B+H];if(!vt.canBreakChars(L,j,A,B,i.breakWords))z+=j;else break;L=j,H++}B+=H-1;const te=vt._getFromCache(z,h,l,r);te+s>v&&(o+=vt._addLine(a),y=!1,a="",s=0),a+=z,s+=te}}else{a.length>0&&(o+=vt._addLine(a),a="",s=0);const R=T===S.length-1;o+=vt._addLine(A,!R),y=!1,a="",s=0}else D+s>v&&(y=!1,o+=vt._addLine(a),a="",s=0),(a.length>0||!vt.isBreakingSpace(A)||y)&&(a+=A,s+=D)}return o+=vt._addLine(a,!1),o}static _addLine(e,i=!0){return e=vt._trimRight(e),e=i?`${e}
`:e,e}static _getFromCache(e,i,n,r){let s=n[e];return typeof s!="number"&&(s=vt._measureText(e,i,r)+i,n[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let i=e.length-1;i>=0;i--){const n=e[i];if(!vt.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:vt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return typeof e!="string"?!1:vt._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const i=[];let n="";if(typeof e!="string")return i;for(let r=0;r<e.length;r++){const s=e[r],a=e[r+1];if(vt.isBreakingSpace(s,a)||vt._isNewline(s)){n!==""&&(i.push(n),n=""),s==="\r"&&a===`
`?(i.push(`\r
`),r++):i.push(s);continue}n+=s}return n!==""&&i.push(n),i}static canBreakWords(e,i){return i}static canBreakChars(e,i,n,r,s){return!0}static wordWrapSplit(e){return vt.graphemeSegmenter(e)}static measureFont(e){if(vt._fonts[e])return vt._fonts[e];const i=vt._context;i.font=e;const n=i.measureText(vt.METRICS_STRING+vt.BASELINE_SYMBOL),r={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return vt._fonts[e]=r,r}static clearMetrics(e=""){e?delete vt._fonts[e]:vt._fonts={}}static get _canvas(){if(!vt.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if(i.getContext("2d",bD)?.measureText)return vt.__canvas=i,i;e=Wt.get().createCanvas()}catch{e=Wt.get().createCanvas()}e.width=e.height=10,vt.__canvas=e}return vt.__canvas}static get _context(){return vt.__context||(vt.__context=vt._canvas.getContext("2d",bD)),vt.__context}};mu.METRICS_STRING="|ÉqÅ";mu.BASELINE_SYMBOL="M";mu.BASELINE_MULTIPLIER=1.4;mu.HEIGHT_MULTIPLIER=2;mu.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const t=new Intl.Segmenter;return e=>{const i=t.segment(e),n=[];let r=0;for(const s of i)n[r++]=s.segment;return n}}return t=>[...t]})();mu.experimentalLetterSpacing=!1;mu._fonts={};mu._newlines=[10,13];mu._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];mu._measurementCache=MQ(1e3);let vs=mu;const v5=[{offset:0,color:"white"},{offset:1,color:"black"}],hF=class lM{constructor(...e){this.uid=gn("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let i=Zge(e);i={...i.type==="radial"?lM.defaultRadialOptions:lM.defaultLinearOptions,...cu(i)},this._textureSize=i.textureSize,this._wrapMode=i.wrapMode,i.type==="radial"?(this.center=i.center,this.outerCenter=i.outerCenter??this.center,this.innerRadius=i.innerRadius,this.outerRadius=i.outerRadius,this.scale=i.scale,this.rotation=i.rotation):(this.start=i.start,this.end=i.end),this.textureSpace=i.textureSpace,this.type=i.type,i.colorStops.forEach(r=>{this.addColorStop(r.offset,r.color)})}addColorStop(e,i){return this.colorStops.push({offset:e,color:Pi.shared.setValue(i).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:i}=this.start,{x:n,y:r}=this.end,s=n-e,a=r-i;const o=s<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(s<0){const T=e;e=n,n=T,s*=-1}if(a<0){const T=i;i=r,r=T,a*=-1}}const l=this.colorStops.length?this.colorStops:v5,h=this._textureSize,{canvas:d,context:p}=E5(h,1),g=o?p.createLinearGradient(this._textureSize,0,0,0):p.createLinearGradient(0,0,this._textureSize,0);T5(g,l),p.fillStyle=g,p.fillRect(0,0,h,1),this.texture=new it({source:new kh({resource:d,addressMode:this._wrapMode})});const y=Math.sqrt(s*s+a*a),v=Math.atan2(a,s),S=new gt;S.scale(y/h,1),S.rotate(v),S.translate(e,i),this.textureSpace==="local"&&S.scale(h,h),this.transform=S}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:v5,i=this._textureSize,{canvas:n,context:r}=E5(i,i),{x:s,y:a}=this.center,{x:o,y:l}=this.outerCenter,h=this.innerRadius,d=this.outerRadius,p=o-d,g=l-d,y=i/(d*2),v=(s-p)*y,S=(a-g)*y,T=r.createRadialGradient(v,S,h*y,(o-p)*y,(l-g)*y,d*y);T5(T,e),r.fillStyle=e[e.length-1].color,r.fillRect(0,0,i,i),r.fillStyle=T,r.translate(v,S),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-v,-S),r.fillRect(0,0,i,i),this.texture=new it({source:new kh({resource:n,addressMode:this._wrapMode})});const A=new gt;A.scale(1/y,1/y),A.translate(p,g),this.textureSpace==="local"&&A.scale(i,i),this.transform=A}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};hF.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};hF.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let ml=hF;function T5(t,e){for(let i=0;i<e.length;i++){const n=e[i];t.addColorStop(n.offset,n.color)}}function E5(t,e){const i=Wt.get().createCanvas(t,e),n=i.getContext("2d");return{canvas:i,context:n}}function Zge(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(ft("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??ml.defaultLinearOptions.textureSize}),e}const S5={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class A_{constructor(e,i){this.uid=gn("fillPattern"),this._tick=0,this.transform=new gt,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),i&&(e.source.style.addressModeU=S5[i].addressModeU,e.source.style.addressModeV=S5[i].addressModeV)}setTransform(e){const i=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/i.frame.width,1/i.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var yD,A5;function Jge(){if(A5)return yD;A5=1,yD=i;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function i(s){var a=[];return s.replace(e,function(o,l,h){var d=l.toLowerCase();for(h=r(h),d=="m"&&h.length>2&&(a.push([l].concat(h.splice(0,2))),d="l",l=l=="m"?"l":"L");;){if(h.length==t[d])return h.unshift(l),a.push(h);if(h.length<t[d])throw new Error("malformed path data");a.push([l].concat(h.splice(0,t[d])))}}),a}var n=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function r(s){var a=s.match(n);return a?a.map(Number):[]}return yD}var e0e=Jge();const t0e=ZE(e0e);function BQ(t,e){const i=t0e(t),n=[];let r=null,s=0,a=0;for(let o=0;o<i.length;o++){const l=i[o],h=l[0],d=l;switch(h){case"M":s=d[1],a=d[2],e.moveTo(s,a);break;case"m":s+=d[1],a+=d[2],e.moveTo(s,a);break;case"H":s=d[1],e.lineTo(s,a);break;case"h":s+=d[1],e.lineTo(s,a);break;case"V":a=d[1],e.lineTo(s,a);break;case"v":a+=d[1],e.lineTo(s,a);break;case"L":s=d[1],a=d[2],e.lineTo(s,a);break;case"l":s+=d[1],a+=d[2],e.lineTo(s,a);break;case"C":s=d[5],a=d[6],e.bezierCurveTo(d[1],d[2],d[3],d[4],s,a);break;case"c":e.bezierCurveTo(s+d[1],a+d[2],s+d[3],a+d[4],s+d[5],a+d[6]),s+=d[5],a+=d[6];break;case"S":s=d[3],a=d[4],e.bezierCurveToShort(d[1],d[2],s,a);break;case"s":e.bezierCurveToShort(s+d[1],a+d[2],s+d[3],a+d[4]),s+=d[3],a+=d[4];break;case"Q":s=d[3],a=d[4],e.quadraticCurveTo(d[1],d[2],s,a);break;case"q":e.quadraticCurveTo(s+d[1],a+d[2],s+d[3],a+d[4]),s+=d[3],a+=d[4];break;case"T":s=d[1],a=d[2],e.quadraticCurveToShort(s,a);break;case"t":s+=d[1],a+=d[2],e.quadraticCurveToShort(s,a);break;case"A":s=d[6],a=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,a);break;case"a":s+=d[6],a+=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],s,a);break;case"Z":case"z":e.closePath(),n.length>0&&(r=n.pop(),r?(s=r.startX,a=r.startY):(s=0,a=0)),r=null;break;default:Ct(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&r===null&&(r={startX:s,startY:a},n.push(r))}return e}class GS{constructor(e=0,i=0,n=0){this.type="circle",this.x=e,this.y=i,this.radius=n}clone(){return new GS(this.x,this.y,this.radius)}contains(e,i){if(this.radius<=0)return!1;const n=this.radius*this.radius;let r=this.x-e,s=this.y-i;return r*=r,s*=s,r+s<=n}strokeContains(e,i,n,r=.5){if(this.radius===0)return!1;const s=this.x-e,a=this.y-i,o=this.radius,l=(1-r)*n,h=Math.sqrt(s*s+a*a);return h<=o+l&&h>o-(n-l)}getBounds(e){return e||(e=new zi),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class HS{constructor(e=0,i=0,n=0,r=0){this.type="ellipse",this.x=e,this.y=i,this.halfWidth=n,this.halfHeight=r}clone(){return new HS(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,i){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,r=(i-this.y)/this.halfHeight;return n*=n,r*=r,n+r<=1}strokeContains(e,i,n,r=.5){const{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;const o=n*(1-r),l=n-o,h=s-l,d=a-l,p=s+o,g=a+o,y=e-this.x,v=i-this.y,S=y*y/(h*h)+v*v/(d*d),T=y*y/(p*p)+v*v/(g*g);return S>1&&T<=1}getBounds(e){return e||(e=new zi),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function tx(t,e,i,n,r,s){const a=t-i,o=e-n,l=r-i,h=s-n,d=a*l+o*h,p=l*l+h*h;let g=-1;p!==0&&(g=d/p);let y,v;g<0?(y=i,v=n):g>1?(y=r,v=s):(y=i+g*l,v=n+g*h);const S=t-y,T=e-v;return S*S+T*T}let i0e,n0e;class Hm{constructor(...e){this.type="polygon";let i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){const n=[];for(let r=0,s=i.length;r<s;r++)n.push(i[r].x,i[r].y);i=n}this.points=i,this.closePath=!0}isClockwise(){let e=0;const i=this.points,n=i.length;for(let r=0;r<n;r+=2){const s=i[r],a=i[r+1],o=i[(r+2)%n],l=i[(r+3)%n];e+=(o-s)*(l+a)}return e<0}containsPolygon(e){const i=this.getBounds(i0e),n=e.getBounds(n0e);if(!i.containsRect(n))return!1;const r=e.points;for(let s=0;s<r.length;s+=2){const a=r[s],o=r[s+1];if(!this.contains(a,o))return!1}return!0}clone(){const e=this.points.slice(),i=new Hm(e);return i.closePath=this.closePath,i}contains(e,i){let n=!1;const r=this.points.length/2;for(let s=0,a=r-1;s<r;a=s++){const o=this.points[s*2],l=this.points[s*2+1],h=this.points[a*2],d=this.points[a*2+1];l>i!=d>i&&e<(h-o)*((i-l)/(d-l))+o&&(n=!n)}return n}strokeContains(e,i,n,r=.5){const s=n*n,a=s*(1-r),o=s-a,{points:l}=this,h=l.length-(this.closePath?0:2);for(let d=0;d<h;d+=2){const p=l[d],g=l[d+1],y=l[(d+2)%l.length],v=l[(d+3)%l.length],S=tx(e,i,p,g,y,v),T=Math.sign((y-p)*(i-g)-(v-g)*(e-p));if(S<=(T<0?o:a))return!0}return!1}getBounds(e){e||(e=new zi);const i=this.points;let n=1/0,r=-1/0,s=1/0,a=-1/0;for(let o=0,l=i.length;o<l;o+=2){const h=i[o],d=i[o+1];n=h<n?h:n,r=h>r?h:r,s=d<s?d:s,a=d>a?d:a}return e.x=n,e.width=r-n,e.y=s,e.height=a-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,i)=>`${e}, ${i}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return ft("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return ft("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const j1=(t,e,i,n,r,s,a)=>{const o=t-i,l=e-n,h=Math.sqrt(o*o+l*l);return h>=r-s&&h<=r+a};class zS{constructor(e=0,i=0,n=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=i,this.width=n,this.height=r,this.radius=s}getBounds(e){return e||(e=new zi),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new zS(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+n&&i<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let r=e-(this.x+n),s=i-(this.y+n);const a=n*n;if(r*r+s*s<=a||(r=e-(this.x+this.width-n),r*r+s*s<=a)||(s=i-(this.y+this.height-n),r*r+s*s<=a)||(r=e-(this.x+n),r*r+s*s<=a))return!0}return!1}strokeContains(e,i,n,r=.5){const{x:s,y:a,width:o,height:l,radius:h}=this,d=n*(1-r),p=n-d,g=s+h,y=a+h,v=o-h*2,S=l-h*2,T=s+o,A=a+l;return(e>=s-d&&e<=s+p||e>=T-p&&e<=T+d)&&i>=y&&i<=y+S||(i>=a-d&&i<=a+p||i>=A-p&&i<=A+d)&&e>=g&&e<=g+v?!0:e<g&&i<y&&j1(e,i,g,y,h,p,d)||e>T-h&&i<y&&j1(e,i,T-h,y,h,p,d)||e>T-h&&i>A-h&&j1(e,i,T-h,A-h,h,p,d)||e<g&&i>A-h&&j1(e,i,g,A-h,h,p,d)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const kQ={};function VS(t,e,i){let n=2166136261;for(let r=0;r<e;r++)n^=t[r].uid,n=Math.imul(n,16777619),n>>>=0;return kQ[n]||r0e(t,e,n,i)}function r0e(t,e,i,n){const r={};let s=0;for(let o=0;o<n;o++){const l=o<e?t[o]:it.EMPTY.source;r[s++]=l.source,r[s++]=l.style}const a=new ul(r);return kQ[i]=a,a}class uf{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function PE(t,e){const i=t.byteLength/8|0,n=new Float64Array(t,0,i);new Float64Array(e,0,i).set(n);const s=t.byteLength-i*8;if(s>0){const a=new Uint8Array(t,i*8,s);new Uint8Array(e,i*8,s).set(a)}}const OQ={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var nr=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(nr||{});function ag(t,e){return e.alphaMode==="no-premultiply-alpha"&&OQ[t]||t}const s0e=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function a0e(t){let e="";for(let i=0;i<t;++i)i>0&&(e+=`
else `),i<t-1&&(e+=`if(test == ${i}.0){}`);return e}function dF(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const n=s0e.replace(/%forloop%/gi,a0e(t));if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(i)}return t}let cm=null;function FQ(){if(cm)return cm;const t=nF();return cm=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),cm=dF(cm,t),t.getExtension("WEBGL_lose_context")?.loseContext(),cm}class IQ{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const i=this.textures[e];this.textures[e]=null,this.ids[i.uid]=null}this.count=0}}class LQ{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new IQ,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const ix=[];let ME=0;Uf.register({clear:()=>{if(ix.length>0)for(const t of ix)t&&t.destroy();ix.length=0,ME=0}});function C5(){return ME>0?ix[--ME]:new LQ}function w5(t){ix[ME++]=t}let cy=0;const NQ=class UQ{constructor(e){this.uid=gn("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...UQ.defaultOptions,...e},e.maxTextures||(ft("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=FQ());const{maxTextures:i,attributesInitialSize:n,indicesInitialSize:r}=e;this.attributeBuffer=new uf(n*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)w5(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,i){const n=e._batch.textures.ids[i._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=i,!0)}updateElement(e){this.dirty=!0;const i=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId)}break(e){const i=this._elements;if(!i[this.elementStart])return;let n=C5(),r=n.textures;r.clear();const s=i[this.elementStart];let a=ag(s.blendMode,s.texture._source),o=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const l=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,d=this.indexBuffer;let p=this._batchIndexSize,g=this._batchIndexStart,y="startBatch";const v=this.maxTextures;for(let S=this.elementStart;S<this.elementSize;++S){const T=i[S];i[S]=null;const D=T.texture._source,R=ag(T.blendMode,D),B=a!==R||o!==T.topology;if(D._batchTick===cy&&!B){T._textureId=D._textureBindLocation,p+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,l,h,T._attributeStart,T._textureId),this.packQuadIndex(d,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,l,h,T._attributeStart,T._textureId),this.packIndex(T,d,T._indexStart,T._attributeStart/this.vertexSize)),T._batch=n;continue}D._batchTick=cy,(r.count>=v||B)&&(this._finishBatch(n,g,p-g,r,a,o,e,y),y="renderBatch",g=p,a=R,o=T.topology,n=C5(),r=n.textures,r.clear(),++cy),T._textureId=D._textureBindLocation=r.count,r.ids[D.uid]=r.count,r.textures[r.count++]=D,T._batch=n,p+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,l,h,T._attributeStart,T._textureId),this.packQuadIndex(d,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,l,h,T._attributeStart,T._textureId),this.packIndex(T,d,T._indexStart,T._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(n,g,p-g,r,a,o,e,y),g=p,++cy),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=p}_finishBatch(e,i,n,r,s,a,o,l){e.gpuBindGroup=null,e.bindGroup=null,e.action=l,e.batcher=this,e.textures=r,e.blendMode=s,e.topology=a,e.start=i,e.size=n,++cy,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const i=Math.max(e,this.attributeBuffer.size*2),n=new uf(i);PE(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){const i=this.indexBuffer;let n=Math.max(e,i.length*1.5);n+=n%2;const r=n>65535?new Uint32Array(n):new Uint16Array(n);if(r.BYTES_PER_ELEMENT!==i.BYTES_PER_ELEMENT)for(let s=0;s<i.length;s++)r[s]=i[s];else PE(i.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,i,n){e[i]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3}packIndex(e,i,n,r){const s=e.indices,a=e.indexSize,o=e.indexOffset,l=e.attributeOffset;for(let h=0;h<a;h++)i[n++]=r+s[h+o]-l}destroy(){if(this.batches!==null){for(let e=0;e<this.batches.length;e++)w5(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};NQ.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let GQ=NQ;var wi=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(wi||{});class da extends Ur{constructor(e){let{data:i,size:n}=e;const{usage:r,label:s,shrinkToFit:a}=e;super(),this.uid=gn("buffer"),this._resourceType="buffer",this._resourceId=gn("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,i instanceof Array&&(i=new Float32Array(i)),this._data=i,n??(n=i?.byteLength);const o=!!i;this.descriptor={size:n,usage:r,mappedAtCreation:o,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&wi.STATIC)}set static(e){e?this.descriptor.usage|=wi.STATIC:this.descriptor.usage&=~wi.STATIC}setDataWithSize(e,i,n){if(this._updateID++,this._updateSize=i*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit("update",this);return}const r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?n&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=gn("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function fF(t,e){if(!(t instanceof da)){let i=e?wi.INDEX:wi.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),i=wi.INDEX|wi.COPY_DST):(t=new Float32Array(t),i=wi.VERTEX|wi.COPY_DST)),t=new da({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return t}function HQ(t,e,i){const n=t.getAttribute(e);if(!n)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const r=n.buffer.data;let s=1/0,a=1/0,o=-1/0,l=-1/0;const h=r.BYTES_PER_ELEMENT,d=(n.offset||0)/h,p=(n.stride||8)/h;for(let g=d;g<r.length;g+=p){const y=r[g],v=r[g+1];y>o&&(o=y),v>l&&(l=v),y<s&&(s=y),v<a&&(a=v)}return i.minX=s,i.minY=a,i.maxX=o,i.maxY=l,i}function o0e(t){return(t instanceof da||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=fF(t.buffer,!1),t}class Gf extends Ur{constructor(e={}){super(),this.uid=gn("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ir,this._boundsDirty=!0;const{attributes:i,indexBuffer:n,topology:r}=e;if(this.buffers=[],this.attributes={},i)for(const s in i)this.addAttribute(s,i[s]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const i=this.attributes[e];return i.buffer.data.length/(i.stride/4||i.size)}return 0}addAttribute(e,i){const n=o0e(i);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=fF(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,HQ(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(i=>i.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const u0e=new Float32Array(1),l0e=new Uint32Array(1);class zQ extends Gf{constructor(){const i=new da({data:u0e,label:"attribute-batch-buffer",usage:wi.VERTEX|wi.COPY_DST,shrinkToFit:!1}),n=new da({data:l0e,label:"index-batch-buffer",usage:wi.INDEX|wi.COPY_DST,shrinkToFit:!1}),r=24;super({attributes:{aPosition:{buffer:i,format:"float32x2",stride:r,offset:0},aUV:{buffer:i,format:"float32x2",stride:r,offset:8},aColor:{buffer:i,format:"unorm8x4",stride:r,offset:16},aTextureIdAndRound:{buffer:i,format:"uint16x2",stride:r,offset:20}},indexBuffer:n})}}function cM(t,e,i){if(t)for(const n in t){const r=n.toLocaleLowerCase(),s=e[r];if(s){let a=t[n];n==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&s.push(`//----${i}----//`),s.push(a)}else Ct(`${n} placement hook does not exist in shader`)}}const c0e=/\{\{(.*?)\}\}/g;function hM(t){const e={};return(t.match(c0e)?.map(n=>n.replace(/[{()}]/g,""))??[]).forEach(n=>{e[n]=[]}),e}function D5(t,e){let i;const n=/@in\s+([^;]+);/g;for(;(i=n.exec(t))!==null;)e.push(i[1])}function dM(t,e,i=!1){const n=[];D5(e,n),t.forEach(o=>{o.header&&D5(o.header,n)});const r=n;i&&r.sort();const s=r.map((o,l)=>`       @location(${l}) ${o},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${s}
`),a}function R5(t,e){let i;const n=/@out\s+([^;]+);/g;for(;(i=n.exec(t))!==null;)e.push(i[1])}function h0e(t){const i=/\b(\w+)\s*:/g.exec(t);return i?i[1]:""}function d0e(t){const e=/@.*?\s+/g;return t.replace(e,"")}function VQ(t,e){const i=[];R5(e,i),t.forEach(l=>{l.header&&R5(l.header,i)});let n=0;const r=i.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${n++}) ${l}`).join(`,
`),s=i.sort().map(l=>`       var ${d0e(l)};`).join(`
`),a=`return VSOutput(
            ${i.sort().map(l=>` ${h0e(l)}`).join(`,
`)});`;let o=e.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${r}
`),o=o.replace("{{start}}",`
${s}
`),o=o.replace("{{return}}",`
${a}
`),o}function fM(t,e){let i=t;for(const n in e){const r=e[n];r.join(`
`).length?i=i.replace(`{{${n}}}`,`//-----${n} START-----//
${r.join(`
`)}
//----${n} FINISH----//`):i=i.replace(`{{${n}}}`,"")}return i}const Ah=Object.create(null),xD=new Map;let f0e=0;function jQ({template:t,bits:e}){const i=YQ(t,e);if(Ah[i])return Ah[i];const{vertex:n,fragment:r}=p0e(t,e);return Ah[i]=qQ(n,r,e),Ah[i]}function XQ({template:t,bits:e}){const i=YQ(t,e);return Ah[i]||(Ah[i]=qQ(t.vertex,t.fragment,e)),Ah[i]}function p0e(t,e){const i=e.map(a=>a.vertex).filter(a=>!!a),n=e.map(a=>a.fragment).filter(a=>!!a);let r=dM(i,t.vertex,!0);r=VQ(i,r);const s=dM(n,t.fragment,!0);return{vertex:r,fragment:s}}function YQ(t,e){return e.map(i=>(xD.has(i)||xD.set(i,f0e++),xD.get(i))).sort((i,n)=>i-n).join("-")+t.vertex+t.fragment}function qQ(t,e,i){const n=hM(t),r=hM(e);return i.forEach(s=>{cM(s.vertex,n,s.name),cM(s.fragment,r,s.name)}),{vertex:fM(t,n),fragment:fM(e,r)}}const WQ=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,$Q=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,KQ=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,QQ=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,ZQ={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},m0e={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},JQ={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function kg({bits:t,name:e}){const i=jQ({template:{fragment:$Q,vertex:WQ},bits:[ZQ,...t]});return qs.from({name:e,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function Og({bits:t,name:e}){return new ya({name:e,...XQ({template:{vertex:KQ,fragment:QQ},bits:[JQ,...t]})})}const jS={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},XS={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},_D={};function g0e(t){const e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let n=0;n<t;n++)e.push(`@group(1) @binding(${i++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${i++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function b0e(t){const e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let i=0;i<t;i++)i===t-1?e.push("  default:{"):e.push(`  case ${i}:{`),e.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function YS(t){return _D[t]||(_D[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${g0e(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${b0e(t)}
            `}}),_D[t]}const vD={};function y0e(t){const e=[];for(let i=0;i<t;i++)i>0&&e.push("else"),i<t-1&&e.push(`if(vTextureId < ${i}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${i}], vUV);`),e.push("}");return e.join(`
`)}function qS(t){return vD[t]||(vD[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${y0e(t)}
            `}}),vD[t]}const Fg={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Ig={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},P5={};function WS(t){let e=P5[t];if(e)return e;const i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;return e=P5[t]=new dr({uTextures:{value:i,type:"i32",size:t}},{isStatic:!0}),e}class eZ extends za{constructor(e){const i=Og({name:"batch",bits:[XS,qS(e),Ig]}),n=kg({name:"batch",bits:[jS,YS(e),Fg]});super({glProgram:i,gpuProgram:n,resources:{batchSamplers:WS(e)}})}}let TD=null;const tZ=class iZ extends GQ{constructor(e){super(e),this.geometry=new zQ,this.name=iZ.extension.name,this.vertexSize=6,TD??(TD=new eZ(e.maxTextures)),this.shader=TD}packAttributes(e,i,n,r,s){const a=s<<16|e.roundPixels&65535,o=e.transform,l=o.a,h=o.b,d=o.c,p=o.d,g=o.tx,y=o.ty,{positions:v,uvs:S}=e,T=e.color,A=e.attributeOffset,D=A+e.attributeSize;for(let R=A;R<D;R++){const B=R*2,z=v[B],L=v[B+1];i[r++]=l*z+d*L+g,i[r++]=p*L+h*z+y,i[r++]=S[B],i[r++]=S[B+1],n[r++]=T,n[r++]=a}}packQuadAttributes(e,i,n,r,s){const a=e.texture,o=e.transform,l=o.a,h=o.b,d=o.c,p=o.d,g=o.tx,y=o.ty,v=e.bounds,S=v.maxX,T=v.minX,A=v.maxY,D=v.minY,R=a.uvs,B=e.color,z=s<<16|e.roundPixels&65535;i[r+0]=l*T+d*D+g,i[r+1]=p*D+h*T+y,i[r+2]=R.x0,i[r+3]=R.y0,n[r+4]=B,n[r+5]=z,i[r+6]=l*S+d*D+g,i[r+7]=p*D+h*S+y,i[r+8]=R.x1,i[r+9]=R.y1,n[r+10]=B,n[r+11]=z,i[r+12]=l*S+d*A+g,i[r+13]=p*A+h*S+y,i[r+14]=R.x2,i[r+15]=R.y2,n[r+16]=B,n[r+17]=z,i[r+18]=l*T+d*A+g,i[r+19]=p*A+h*T+y,i[r+20]=R.x3,i[r+21]=R.y3,n[r+22]=B,n[r+23]=z}};tZ.extension={type:[me.Batcher],name:"default"};let $S=tZ;function pF(t,e,i,n,r,s,a,o=null){let l=0;i*=e,r*=s;const h=o.a,d=o.b,p=o.c,g=o.d,y=o.tx,v=o.ty;for(;l<a;){const S=t[i],T=t[i+1];n[r]=h*S+p*T+y,n[r+1]=d*S+g*T+v,r+=s,i+=e,l++}}function mF(t,e,i,n){let r=0;for(e*=i;r<n;)t[e]=0,t[e+1]=0,e+=i,r++}function KS(t,e,i,n,r){const s=e.a,a=e.b,o=e.c,l=e.d,h=e.tx,d=e.ty;i||(i=0),n||(n=2),r||(r=t.length/n-i);let p=i*n;for(let g=0;g<r;g++){const y=t[p],v=t[p+1];t[p]=s*y+o*v+h,t[p+1]=a*y+l*v+d,p+=n}}const x0e=new gt;class QS{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,i=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?qO(i,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):i+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||x0e}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const og={extension:{type:me.ShapeBuilder,name:"circle"},build(t,e){let i,n,r,s,a,o;if(t.type==="circle"){const B=t;if(a=o=B.radius,a<=0)return!1;i=B.x,n=B.y,r=s=0}else if(t.type==="ellipse"){const B=t;if(a=B.halfWidth,o=B.halfHeight,a<=0||o<=0)return!1;i=B.x,n=B.y,r=s=0}else{const B=t,z=B.width/2,L=B.height/2;i=B.x+z,n=B.y+L,a=o=Math.max(0,Math.min(B.radius,Math.min(z,L))),r=z-a,s=L-o}if(r<0||s<0)return!1;const l=Math.ceil(2.3*Math.sqrt(a+o)),h=l*8+(r?4:0)+(s?4:0);if(h===0)return!1;if(l===0)return e[0]=e[6]=i+r,e[1]=e[3]=n+s,e[2]=e[4]=i-r,e[5]=e[7]=n-s,!0;let d=0,p=l*4+(r?2:0)+2,g=p,y=h,v=r+a,S=s,T=i+v,A=i-v,D=n+S;if(e[d++]=T,e[d++]=D,e[--p]=D,e[--p]=A,s){const B=n-S;e[g++]=A,e[g++]=B,e[--y]=B,e[--y]=T}for(let B=1;B<l;B++){const z=Math.PI/2*(B/l),L=r+Math.cos(z)*a,H=s+Math.sin(z)*o,te=i+L,j=i-L,O=n+H,q=n-H;e[d++]=te,e[d++]=O,e[--p]=O,e[--p]=j,e[g++]=j,e[g++]=q,e[--y]=q,e[--y]=te}v=r,S=s+o,T=i+v,A=i-v,D=n+S;const R=n-S;return e[d++]=T,e[d++]=D,e[--y]=R,e[--y]=T,r&&(e[d++]=A,e[d++]=D,e[--y]=R,e[--y]=A),!0},triangulate(t,e,i,n,r,s){if(t.length===0)return;let a=0,o=0;for(let d=0;d<t.length;d+=2)a+=t[d],o+=t[d+1];a/=t.length/2,o/=t.length/2;let l=n;e[l*i]=a,e[l*i+1]=o;const h=l++;for(let d=0;d<t.length;d+=2)e[l*i]=t[d],e[l*i+1]=t[d+1],d>0&&(r[s++]=l,r[s++]=h,r[s++]=l-1),l++;r[s++]=h+1,r[s++]=h,r[s++]=l-1}},nZ={...og,extension:{...og.extension,name:"ellipse"}},rZ={...og,extension:{...og.extension,name:"roundedRectangle"}},gF=1e-4,pM=1e-4;function sZ(t){const e=t.length;if(e<6)return 1;let i=0;for(let n=0,r=t[e-2],s=t[e-1];n<e;n+=2){const a=t[n],o=t[n+1];i+=(a-r)*(o+s),r=a,s=o}return i<0?-1:1}function M5(t,e,i,n,r,s,a,o){const l=t-i*r,h=e-n*r,d=t+i*s,p=e+n*s;let g,y;a?(g=n,y=-i):(g=-n,y=i);const v=l+g,S=h+y,T=d+g,A=p+y;return o.push(v,S),o.push(T,A),2}function Nd(t,e,i,n,r,s,a,o){const l=i-t,h=n-e;let d=Math.atan2(l,h),p=Math.atan2(r-t,s-e);o&&d<p?d+=Math.PI*2:!o&&d>p&&(p+=Math.PI*2);let g=d;const y=p-d,v=Math.abs(y),S=Math.sqrt(l*l+h*h),T=(15*v*Math.sqrt(S)/Math.PI>>0)+1,A=y/T;if(g+=A,o){a.push(t,e),a.push(i,n);for(let D=1,R=g;D<T;D++,R+=A)a.push(t,e),a.push(t+Math.sin(R)*S,e+Math.cos(R)*S);a.push(t,e),a.push(r,s)}else{a.push(i,n),a.push(t,e);for(let D=1,R=g;D<T;D++,R+=A)a.push(t+Math.sin(R)*S,e+Math.cos(R)*S),a.push(t,e);a.push(r,s),a.push(t,e)}return T*2}function aZ(t,e,i,n,r,s){const a=gF;if(t.length===0)return;const o=e;let l=o.alignment;if(e.alignment!==.5){let _e=sZ(t);i&&(_e*=-1),l=(l-.5)*_e+.5}const h=new tn(t[0],t[1]),d=new tn(t[t.length-2],t[t.length-1]),p=n,g=Math.abs(h.x-d.x)<a&&Math.abs(h.y-d.y)<a;if(p){t=t.slice(),g&&(t.pop(),t.pop(),d.set(t[t.length-2],t[t.length-1]));const _e=(h.x+d.x)*.5,J=(d.y+h.y)*.5;t.unshift(_e,J),t.push(_e,J)}const y=r,v=t.length/2;let S=t.length;const T=y.length/2,A=o.width/2,D=A*A,R=o.miterLimit*o.miterLimit;let B=t[0],z=t[1],L=t[2],H=t[3],te=0,j=0,O=-(z-H),q=B-L,re=0,ae=0,fe=Math.sqrt(O*O+q*q);O/=fe,q/=fe,O*=A,q*=A;const Te=l,$=(1-Te)*2,se=Te*2;p||(o.cap==="round"?S+=Nd(B-O*($-se)*.5,z-q*($-se)*.5,B-O*$,z-q*$,B+O*se,z+q*se,y,!0)+2:o.cap==="square"&&(S+=M5(B,z,O,q,$,se,!0,y))),y.push(B-O*$,z-q*$),y.push(B+O*se,z+q*se);for(let _e=1;_e<v-1;++_e){B=t[(_e-1)*2],z=t[(_e-1)*2+1],L=t[_e*2],H=t[_e*2+1],te=t[(_e+1)*2],j=t[(_e+1)*2+1],O=-(z-H),q=B-L,fe=Math.sqrt(O*O+q*q),O/=fe,q/=fe,O*=A,q*=A,re=-(H-j),ae=L-te,fe=Math.sqrt(re*re+ae*ae),re/=fe,ae/=fe,re*=A,ae*=A;const J=L-B,ie=z-H,be=L-te,ee=j-H,Ge=J*be+ie*ee,Ve=ie*be-ee*J,Ye=Ve<0;if(Math.abs(Ve)<.001*Math.abs(Ge)){y.push(L-O*$,H-q*$),y.push(L+O*se,H+q*se),Ge>=0&&(o.join==="round"?S+=Nd(L,H,L-O*$,H-q*$,L-re*$,H-ae*$,y,!1)+4:S+=2,y.push(L-re*se,H-ae*se),y.push(L+re*$,H+ae*$));continue}const lt=(-O+B)*(-q+H)-(-O+L)*(-q+z),pt=(-re+te)*(-ae+H)-(-re+L)*(-ae+j),tt=(J*pt-be*lt)/Ve,$t=(ee*lt-ie*pt)/Ve,li=(tt-L)*(tt-L)+($t-H)*($t-H),Rt=L+(tt-L)*$,Qt=H+($t-H)*$,Bt=L-(tt-L)*se,Nt=H-($t-H)*se,fi=Math.min(J*J+ie*ie,be*be+ee*ee),Si=Ye?$:se,Cn=fi+Si*Si*D;li<=Cn?o.join==="bevel"||li/D>R?(Ye?(y.push(Rt,Qt),y.push(L+O*se,H+q*se),y.push(Rt,Qt),y.push(L+re*se,H+ae*se)):(y.push(L-O*$,H-q*$),y.push(Bt,Nt),y.push(L-re*$,H-ae*$),y.push(Bt,Nt)),S+=2):o.join==="round"?Ye?(y.push(Rt,Qt),y.push(L+O*se,H+q*se),S+=Nd(L,H,L+O*se,H+q*se,L+re*se,H+ae*se,y,!0)+4,y.push(Rt,Qt),y.push(L+re*se,H+ae*se)):(y.push(L-O*$,H-q*$),y.push(Bt,Nt),S+=Nd(L,H,L-O*$,H-q*$,L-re*$,H-ae*$,y,!1)+4,y.push(L-re*$,H-ae*$),y.push(Bt,Nt)):(y.push(Rt,Qt),y.push(Bt,Nt)):(y.push(L-O*$,H-q*$),y.push(L+O*se,H+q*se),o.join==="round"?Ye?S+=Nd(L,H,L+O*se,H+q*se,L+re*se,H+ae*se,y,!0)+2:S+=Nd(L,H,L-O*$,H-q*$,L-re*$,H-ae*$,y,!1)+2:o.join==="miter"&&li/D<=R&&(Ye?(y.push(Bt,Nt),y.push(Bt,Nt)):(y.push(Rt,Qt),y.push(Rt,Qt)),S+=2),y.push(L-re*$,H-ae*$),y.push(L+re*se,H+ae*se),S+=2)}B=t[(v-2)*2],z=t[(v-2)*2+1],L=t[(v-1)*2],H=t[(v-1)*2+1],O=-(z-H),q=B-L,fe=Math.sqrt(O*O+q*q),O/=fe,q/=fe,O*=A,q*=A,y.push(L-O*$,H-q*$),y.push(L+O*se,H+q*se),p||(o.cap==="round"?S+=Nd(L-O*($-se)*.5,H-q*($-se)*.5,L-O*$,H-q*$,L+O*se,H+q*se,y,!1)+2:o.cap==="square"&&(S+=M5(L,H,O,q,$,se,!1,y)));const we=pM*pM;for(let _e=T;_e<S+T-2;++_e)B=y[_e*2],z=y[_e*2+1],L=y[(_e+1)*2],H=y[(_e+1)*2+1],te=y[(_e+2)*2],j=y[(_e+2)*2+1],!(Math.abs(B*(H-j)+L*(j-z)+te*(z-H))<we)&&s.push(_e,_e+1,_e+2)}function oZ(t,e,i,n){const r=gF;if(t.length===0)return;const s=t[0],a=t[1],o=t[t.length-2],l=t[t.length-1],h=e||Math.abs(s-o)<r&&Math.abs(a-l)<r,d=i,p=t.length/2,g=d.length/2;for(let y=0;y<p;y++)d.push(t[y*2]),d.push(t[y*2+1]);for(let y=0;y<p-1;y++)n.push(g+y,g+y+1);h&&n.push(g+p-1,g)}function bF(t,e,i,n,r,s,a){const o=EQ(t,e,2);if(!o)return;for(let h=0;h<o.length;h+=3)s[a++]=o[h]+r,s[a++]=o[h+1]+r,s[a++]=o[h+2]+r;let l=r*n;for(let h=0;h<t.length;h+=2)i[l]=t[h],i[l+1]=t[h+1],l+=n}const _0e=[],uZ={extension:{type:me.ShapeBuilder,name:"polygon"},build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return!0},triangulate(t,e,i,n,r,s){bF(t,_0e,e,i,n,r,s)}},lZ={extension:{type:me.ShapeBuilder,name:"rectangle"},build(t,e){const i=t,n=i.x,r=i.y,s=i.width,a=i.height;return s>0&&a>0?(e[0]=n,e[1]=r,e[2]=n+s,e[3]=r,e[4]=n+s,e[5]=r+a,e[6]=n,e[7]=r+a,!0):!1},triangulate(t,e,i,n,r,s){let a=0;n*=i,e[n+a]=t[0],e[n+a+1]=t[1],a+=i,e[n+a]=t[2],e[n+a+1]=t[3],a+=i,e[n+a]=t[6],e[n+a+1]=t[7],a+=i,e[n+a]=t[4],e[n+a+1]=t[5],a+=i;const o=n/i;r[s++]=o,r[s++]=o+1,r[s++]=o+2,r[s++]=o+1,r[s++]=o+3,r[s++]=o+2}},cZ={extension:{type:me.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0},triangulate(t,e,i,n,r,s){let a=0;n*=i,e[n+a]=t[0],e[n+a+1]=t[1],a+=i,e[n+a]=t[2],e[n+a+1]=t[3],a+=i,e[n+a]=t[4],e[n+a+1]=t[5];const o=n/i;r[s++]=o,r[s++]=o+1,r[s++]=o+2}},v0e=new gt,T0e=new zi;function hZ(t,e,i,n){const r=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){const a=i.getBounds(T0e);e.width&&a.pad(e.width);const{x:o,y:l}=a,h=1/a.width,d=1/a.height,p=-o*h,g=-l*d,y=r.a,v=r.b,S=r.c,T=r.d;r.a*=h,r.b*=h,r.c*=d,r.d*=d,r.tx=p*y+g*S+r.tx,r.ty=p*v+g*T+r.ty}else r.translate(e.texture.frame.x,e.texture.frame.y),r.scale(1/e.texture.source.width,1/e.texture.source.height);const s=e.texture.source.style;return!(e.fill instanceof ml)&&s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update()),n&&r.append(v0e.copyFrom(n).invert()),r}const Lg={};Zi.handleByMap(me.ShapeBuilder,Lg);Zi.add(lZ,uZ,cZ,og,nZ,rZ);const E0e=new zi,S0e=new gt;function dZ(t,e){const{geometryData:i,batches:n}=e;n.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let r=0;r<t.instructions.length;r++){const s=t.instructions[r];if(s.action==="texture")A0e(s.data,n,i);else if(s.action==="fill"||s.action==="stroke"){const a=s.action==="stroke",o=s.data.path.shapePath,l=s.data.style,h=s.data.hole;a&&h&&B5(h.shapePath,l,!0,n,i),h&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),B5(o,l,a,n,i)}}}function A0e(t,e,i){const n=[],r=Lg.rectangle,s=E0e;s.x=t.dx,s.y=t.dy,s.width=t.dw,s.height=t.dh;const a=t.transform;if(!r.build(s,n))return;const{vertices:o,uvs:l,indices:h}=i,d=h.length,p=o.length/2;a&&KS(n,a),r.triangulate(n,o,2,p,h,d);const g=t.image,y=g.uvs;l.push(y.x0,y.y0,y.x1,y.y1,y.x3,y.y3,y.x2,y.y2);const v=hr.get(QS);v.indexOffset=d,v.indexSize=h.length-d,v.attributeOffset=p,v.attributeSize=o.length/2-p,v.baseColor=t.style,v.alpha=t.alpha,v.texture=g,v.geometryData=i,e.push(v)}function B5(t,e,i,n,r){const{vertices:s,uvs:a,indices:o}=r;t.shapePrimitives.forEach(({shape:l,transform:h,holes:d})=>{const p=[],g=Lg[l.type];if(!g.build(l,p))return;const y=o.length,v=s.length/2;let S="triangle-list";if(h&&KS(p,h),i){const R=l.closePath??!0,B=e;B.pixelLine?(oZ(p,R,s,o),S="line-list"):aZ(p,B,!1,R,s,o)}else if(d){const R=[],B=p.slice();C0e(d).forEach(L=>{R.push(B.length/2),B.push(...L)}),bF(B,R,s,2,v,o,y)}else g.triangulate(p,s,2,v,o,y);const T=a.length/2,A=e.texture;if(A!==it.WHITE){const R=hZ(S0e,e,l,h);pF(s,2,v,a,T,2,s.length/2-v,R)}else mF(a,T,2,s.length/2-v);const D=hr.get(QS);D.indexOffset=y,D.indexSize=o.length-y,D.attributeOffset=v,D.attributeSize=s.length/2-v,D.baseColor=e.color,D.alpha=e.alpha,D.texture=A,D.geometryData=r,D.topology=S,n.push(D)})}function C0e(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i].shape,r=[];Lg[n.type].build(n,r)&&e.push(r)}return e}class fZ{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class pZ{constructor(){this.instructions=new $O}init(e){this.batcher=new $S({maxTextures:e}),this.instructions.reset()}get geometry(){return ft(Y$,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const yF=class mM{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){mM.defaultOptions.bezierSmoothness=e?.bezierSmoothness??mM.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let i=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){i?this._cleanGraphicsContextData(e):i=this._initContext(e),dZ(e,i);const n=e.batchMode;e.customShader||n==="no-batch"?i.isBatchable=!1:n==="auto"?i.isBatchable=i.geometryData.vertices.length<400:i.isBatchable=!0,e.dirty=!1}return i}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const i=hr.get(pZ,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:n,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,a=r.indices.length;for(let d=0;d<n.length;d++)n[d].applyTransform=!1;const o=i.batcher;o.ensureAttributeBuffer(s),o.ensureIndexBuffer(a),o.begin();for(let d=0;d<n.length;d++){const p=n[d];o.add(p)}o.finish(i.instructions);const l=o.geometry;l.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),l.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const h=o.batches;for(let d=0;d<h.length;d++){const p=h[d];p.bindGroup=VS(p.textures.textures,p.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=i,i}_initContext(e){const i=new fZ;return i.context=e,this._gpuContextHash[e.uid]=i,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const i=this._gpuContextHash[e.uid];i.isBatchable||this._graphicsDataContextHash[e.uid]&&(hr.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),i.batches&&i.batches.forEach(n=>{hr.return(n)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};yF.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"graphicsContext"};yF.defaultOptions={bezierSmoothness:.5};let xF=yF;const w0e=8,X1=11920929e-14,D0e=1;function _F(t,e,i,n,r,s,a,o,l,h){const p=Math.min(.99,Math.max(0,h??xF.defaultOptions.bezierSmoothness));let g=(D0e-p)/1;return g*=g,R0e(e,i,n,r,s,a,o,l,t,g),t}function R0e(t,e,i,n,r,s,a,o,l,h){gM(t,e,i,n,r,s,a,o,l,h,0),l.push(a,o)}function gM(t,e,i,n,r,s,a,o,l,h,d){if(d>w0e)return;const p=(t+i)/2,g=(e+n)/2,y=(i+r)/2,v=(n+s)/2,S=(r+a)/2,T=(s+o)/2,A=(p+y)/2,D=(g+v)/2,R=(y+S)/2,B=(v+T)/2,z=(A+R)/2,L=(D+B)/2;if(d>0){let H=a-t,te=o-e;const j=Math.abs((i-a)*te-(n-o)*H),O=Math.abs((r-a)*te-(s-o)*H);if(j>X1&&O>X1){if((j+O)*(j+O)<=h*(H*H+te*te)){l.push(z,L);return}}else if(j>X1){if(j*j<=h*(H*H+te*te)){l.push(z,L);return}}else if(O>X1){if(O*O<=h*(H*H+te*te)){l.push(z,L);return}}else if(H=z-(t+a)/2,te=L-(e+o)/2,H*H+te*te<=h){l.push(z,L);return}}gM(t,e,p,g,A,D,z,L,l,h,d+1),gM(z,L,R,B,S,T,a,o,l,h,d+1)}const P0e=8,M0e=11920929e-14,B0e=1;function mZ(t,e,i,n,r,s,a,o){const h=Math.min(.99,Math.max(0,o??xF.defaultOptions.bezierSmoothness));let d=(B0e-h)/1;return d*=d,k0e(e,i,n,r,s,a,t,d),t}function k0e(t,e,i,n,r,s,a,o){bM(a,t,e,i,n,r,s,o,0),a.push(r,s)}function bM(t,e,i,n,r,s,a,o,l){if(l>P0e)return;const h=(e+n)/2,d=(i+r)/2,p=(n+s)/2,g=(r+a)/2,y=(h+p)/2,v=(d+g)/2;let S=s-e,T=a-i;const A=Math.abs((n-s)*T-(r-a)*S);if(A>M0e){if(A*A<=o*(S*S+T*T)){t.push(y,v);return}}else if(S=y-(e+s)/2,T=v-(i+a)/2,S*S+T*T<=o){t.push(y,v);return}bM(t,e,i,h,d,y,v,o,l+1),bM(t,y,v,p,g,s,a,o,l+1)}function vF(t,e,i,n,r,s,a,o){let l=Math.abs(r-s);(!a&&r>s||a&&s>r)&&(l=2*Math.PI-l),o||(o=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(l/Math.PI)))),o=Math.max(o,3);let h=l/o,d=r;h*=a?-1:1;for(let p=0;p<o+1;p++){const g=Math.cos(d),y=Math.sin(d),v=e+g*n,S=i+y*n;t.push(v,S),d+=h}}function gZ(t,e,i,n,r,s){const a=t[t.length-2],l=t[t.length-1]-i,h=a-e,d=r-i,p=n-e,g=Math.abs(l*p-h*d);if(g<1e-8||s===0){(t[t.length-2]!==e||t[t.length-1]!==i)&&t.push(e,i);return}const y=l*l+h*h,v=d*d+p*p,S=l*d+h*p,T=s*Math.sqrt(y)/g,A=s*Math.sqrt(v)/g,D=T*S/y,R=A*S/v,B=T*p+A*h,z=T*d+A*l,L=h*(A+D),H=l*(A+D),te=p*(T+R),j=d*(T+R),O=Math.atan2(H-z,L-B),q=Math.atan2(j-z,te-B);vF(t,B+e,z+i,s,O,q,h*d>p*l)}const nx=Math.PI*2,ED={centerX:0,centerY:0,ang1:0,ang2:0},SD=({x:t,y:e},i,n,r,s,a,o,l)=>{t*=i,e*=n;const h=r*t-s*e,d=s*t+r*e;return l.x=h+a,l.y=d+o,l};function O0e(t,e){const i=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:i,r=Math.cos(t),s=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[{x:r-s*n,y:s+r*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]}const k5=(t,e,i,n)=>{const r=t*n-e*i<0?-1:1;let s=t*i+e*n;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},F0e=(t,e,i,n,r,s,a,o,l,h,d,p,g)=>{const y=Math.pow(r,2),v=Math.pow(s,2),S=Math.pow(d,2),T=Math.pow(p,2);let A=y*v-y*T-v*S;A<0&&(A=0),A/=y*T+v*S,A=Math.sqrt(A)*(a===o?-1:1);const D=A*r/s*p,R=A*-s/r*d,B=h*D-l*R+(t+i)/2,z=l*D+h*R+(e+n)/2,L=(d-D)/r,H=(p-R)/s,te=(-d-D)/r,j=(-p-R)/s,O=k5(1,0,L,H);let q=k5(L,H,te,j);o===0&&q>0&&(q-=nx),o===1&&q<0&&(q+=nx),g.centerX=B,g.centerY=z,g.ang1=O,g.ang2=q};function bZ(t,e,i,n,r,s,a,o=0,l=0,h=0){if(s===0||a===0)return;const d=Math.sin(o*nx/360),p=Math.cos(o*nx/360),g=p*(e-n)/2+d*(i-r)/2,y=-d*(e-n)/2+p*(i-r)/2;if(g===0&&y===0)return;s=Math.abs(s),a=Math.abs(a);const v=Math.pow(g,2)/Math.pow(s,2)+Math.pow(y,2)/Math.pow(a,2);v>1&&(s*=Math.sqrt(v),a*=Math.sqrt(v)),F0e(e,i,n,r,s,a,l,h,d,p,g,y,ED);let{ang1:S,ang2:T}=ED;const{centerX:A,centerY:D}=ED;let R=Math.abs(T)/(nx/4);Math.abs(1-R)<1e-7&&(R=1);const B=Math.max(Math.ceil(R),1);T/=B;let z=t[t.length-2],L=t[t.length-1];const H={x:0,y:0};for(let te=0;te<B;te++){const j=O0e(S,T),{x:O,y:q}=SD(j[0],s,a,p,d,A,D,H),{x:re,y:ae}=SD(j[1],s,a,p,d,A,D,H),{x:fe,y:Te}=SD(j[2],s,a,p,d,A,D,H);_F(t,z,L,O,q,re,ae,fe,Te),z=fe,L=Te,S+=T}}function yZ(t,e,i){const n=(a,o)=>{const l=o.x-a.x,h=o.y-a.y,d=Math.sqrt(l*l+h*h),p=l/d,g=h/d;return{len:d,nx:p,ny:g}},r=(a,o)=>{a===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)};let s=e[e.length-1];for(let a=0;a<e.length;a++){const o=e[a%e.length],l=o.radius??i;if(l<=0){r(a,o),s=o;continue}const h=e[(a+1)%e.length],d=n(o,s),p=n(o,h);if(d.len<1e-4||p.len<1e-4){r(a,o),s=o;continue}let g=Math.asin(d.nx*p.ny-d.ny*p.nx),y=1,v=!1;d.nx*p.nx-d.ny*-p.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,y=-1,v=!0):g>0&&(y=-1,v=!0);const S=g/2;let T,A=Math.abs(Math.cos(S)*l/Math.sin(S));A>Math.min(d.len/2,p.len/2)?(A=Math.min(d.len/2,p.len/2),T=Math.abs(A*Math.sin(S)/Math.cos(S))):T=l;const D=o.x+p.nx*A+-p.ny*T*y,R=o.y+p.ny*A+p.nx*T*y,B=Math.atan2(d.ny,d.nx)+Math.PI/2*y,z=Math.atan2(p.ny,p.nx)-Math.PI/2*y;a===0&&t.moveTo(D+Math.cos(B)*T,R+Math.sin(B)*T),t.arc(D,R,T,B,z,v),s=o}}function xZ(t,e,i,n){const r=(o,l)=>Math.sqrt((o.x-l.x)**2+(o.y-l.y)**2),s=(o,l,h)=>({x:o.x+(l.x-o.x)*h,y:o.y+(l.y-o.y)*h}),a=e.length;for(let o=0;o<a;o++){const l=e[(o+1)%a],h=l.radius??i;if(h<=0){o===0?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y);continue}const d=e[o],p=e[(o+2)%a],g=r(d,l);let y;if(g<1e-4)y=l;else{const T=Math.min(g/2,h);y=s(l,d,T/g)}const v=r(p,l);let S;if(v<1e-4)S=l;else{const T=Math.min(v/2,h);S=s(l,p,T/v)}o===0?t.moveTo(y.x,y.y):t.lineTo(y.x,y.y),t.quadraticCurveTo(l.x,l.y,S.x,S.y,n)}}const I0e=new zi;class _Z{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ir,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,i){return this.startPoly(e,i),this}lineTo(e,i){this._ensurePoly();const n=this._currentPoly.points,r=n[n.length-2],s=n[n.length-1];return(r!==e||s!==i)&&n.push(e,i),this}arc(e,i,n,r,s,a){this._ensurePoly(!1);const o=this._currentPoly.points;return vF(o,e,i,n,r,s,a),this}arcTo(e,i,n,r,s){this._ensurePoly();const a=this._currentPoly.points;return gZ(a,e,i,n,r,s),this}arcToSvg(e,i,n,r,s,a,o){const l=this._currentPoly.points;return bZ(l,this._currentPoly.lastX,this._currentPoly.lastY,a,o,e,i,n,r,s),this}bezierCurveTo(e,i,n,r,s,a,o){this._ensurePoly();const l=this._currentPoly;return _F(this._currentPoly.points,l.lastX,l.lastY,e,i,n,r,s,a,o),this}quadraticCurveTo(e,i,n,r,s){this._ensurePoly();const a=this._currentPoly;return mZ(this._currentPoly.points,a.lastX,a.lastY,e,i,n,r,s),this}closePath(){return this.endPoly(!0),this}addPath(e,i){this.endPoly(),i&&!i.isIdentity()&&(e=e.clone(!0),e.transform(i));const n=this.shapePrimitives,r=n.length;for(let s=0;s<e.instructions.length;s++){const a=e.instructions[s];this[a.action](...a.data)}if(e.checkForHoles&&n.length-r>1){let s=null;for(let a=r;a<n.length;a++){const o=n[a];if(o.shape.type==="polygon"){const l=o.shape,h=s?.shape;h&&h.containsPolygon(l)?(s.holes||(s.holes=[]),s.holes.push(o),n.copyWithin(a,a+1),n.length--,a--):s=o}}}return this}finish(e=!1){this.endPoly(e)}rect(e,i,n,r,s){return this.drawShape(new zi(e,i,n,r),s),this}circle(e,i,n,r){return this.drawShape(new GS(e,i,n),r),this}poly(e,i,n){const r=new Hm(e);return r.closePath=i,this.drawShape(r,n),this}regularPoly(e,i,n,r,s=0,a){r=Math.max(r|0,3);const o=-1*Math.PI/2+s,l=Math.PI*2/r,h=[];for(let d=0;d<r;d++){const p=o-d*l;h.push(e+n*Math.cos(p),i+n*Math.sin(p))}return this.poly(h,!0,a),this}roundPoly(e,i,n,r,s,a=0,o){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(e,i,n,r,a);const l=n*Math.sin(Math.PI/r)-.001;s=Math.min(s,l);const h=-1*Math.PI/2+a,d=Math.PI*2/r,p=(r-2)*Math.PI/r/2;for(let g=0;g<r;g++){const y=g*d+h,v=e+n*Math.cos(y),S=i+n*Math.sin(y),T=y+Math.PI+p,A=y-Math.PI-p,D=v+s*Math.cos(T),R=S+s*Math.sin(T),B=v+s*Math.cos(A),z=S+s*Math.sin(A);g===0?this.moveTo(D,R):this.lineTo(D,R),this.quadraticCurveTo(v,S,B,z,o)}return this.closePath()}roundShape(e,i,n=!1,r){return e.length<3?this:(n?xZ(this,e,i,r):yZ(this,e,i),this.closePath())}filletRect(e,i,n,r,s){if(s===0)return this.rect(e,i,n,r);const a=Math.min(n,r)/2,o=Math.min(a,Math.max(-a,s)),l=e+n,h=i+r,d=o<0?-o:0,p=Math.abs(o);return this.moveTo(e,i+p).arcTo(e+d,i+d,e+p,i,p).lineTo(l-p,i).arcTo(l-d,i+d,l,i+p,p).lineTo(l,h-p).arcTo(l-d,h-d,e+n-p,h,p).lineTo(e+p,h).arcTo(e+d,h-d,e,h-p,p).closePath()}chamferRect(e,i,n,r,s,a){if(s<=0)return this.rect(e,i,n,r);const o=Math.min(s,Math.min(n,r)/2),l=e+n,h=i+r,d=[e+o,i,l-o,i,l,i+o,l,h-o,l-o,h,e+o,h,e,h-o,e,i+o];for(let p=d.length-1;p>=2;p-=2)d[p]===d[p-2]&&d[p-1]===d[p-3]&&d.splice(p-1,2);return this.poly(d,!0,a)}ellipse(e,i,n,r,s){return this.drawShape(new HS(e,i,n,r),s),this}roundRect(e,i,n,r,s,a){return this.drawShape(new zS(e,i,n,r,s),a),this}drawShape(e,i){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:i}),this}startPoly(e,i){let n=this._currentPoly;return n&&this.endPoly(),n=new Hm,n.points.push(e,i),this._currentPoly=n,this}endPoly(e=!1){const i=this._currentPoly;return i&&i.points.length>2&&(i.closePath=e,this.shapePrimitives.push({shape:i})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Hm,e)){const i=this.shapePrimitives[this.shapePrimitives.length-1];if(i){let n=i.shape.x,r=i.shape.y;if(i.transform&&!i.transform.isIdentity()){const s=i.transform,a=n;n=s.a*n+s.c*r+s.tx,r=s.b*a+s.d*r+s.ty}this._currentPoly.points.push(n,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let i=0;i<e.instructions.length;i++){const n=e.instructions[i];this[n.action](...n.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const i=this.shapePrimitives;for(let n=0;n<i.length;n++){const r=i[n],s=r.shape.getBounds(I0e);r.transform?e.addRect(s,r.transform):e.addRect(s)}return e}}class ou{constructor(e,i=!1){this.instructions=[],this.uid=gn("graphicsPath"),this._dirty=!0,this.checkForHoles=i,typeof e=="string"?BQ(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new _Z(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,i){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,i]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,i,n,r,s){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(tn.shared);let l=0,h=0;if(!a||a.action!=="bezierCurveTo")l=o.x,h=o.y;else{l=a.data[2],h=a.data[3];const d=o.x,p=o.y;l=d+(d-l),h=p+(p-h)}return this.instructions.push({action:"bezierCurveTo",data:[l,h,e,i,n,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,i,n){const r=this.instructions[this.instructions.length-1],s=this.getLastPoint(tn.shared);let a=0,o=0;if(!r||r.action!=="quadraticCurveTo")a=s.x,o=s.y;else{a=r.data[0],o=r.data[1];const l=s.x,h=s.y;a=l+(l-a),o=h+(h-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,e,i,n]}),this._dirty=!0,this}rect(e,i,n,r,s){return this.instructions.push({action:"rect",data:[e,i,n,r,s]}),this._dirty=!0,this}circle(e,i,n,r){return this.instructions.push({action:"circle",data:[e,i,n,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,i,n,r,s,a,o){s||(s=r/2);const l=-1*Math.PI/2+a,h=n*2,d=Math.PI*2/h,p=[];for(let g=0;g<h;g++){const y=g%2?s:r,v=g*d+l;p.push(e+y*Math.cos(v),i+y*Math.sin(v))}return this.poly(p,!0,o),this}clone(e=!1){const i=new ou;if(i.checkForHoles=this.checkForHoles,!e)i.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){const r=this.instructions[n];i.instructions.push({action:r.action,data:r.data.slice()})}return i}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const i=e.a,n=e.b,r=e.c,s=e.d,a=e.tx,o=e.ty;let l=0,h=0,d=0,p=0,g=0,y=0,v=0,S=0;for(let T=0;T<this.instructions.length;T++){const A=this.instructions[T],D=A.data;switch(A.action){case"moveTo":case"lineTo":l=D[0],h=D[1],D[0]=i*l+r*h+a,D[1]=n*l+s*h+o;break;case"bezierCurveTo":d=D[0],p=D[1],g=D[2],y=D[3],l=D[4],h=D[5],D[0]=i*d+r*p+a,D[1]=n*d+s*p+o,D[2]=i*g+r*y+a,D[3]=n*g+s*y+o,D[4]=i*l+r*h+a,D[5]=n*l+s*h+o;break;case"quadraticCurveTo":d=D[0],p=D[1],l=D[2],h=D[3],D[0]=i*d+r*p+a,D[1]=n*d+s*p+o,D[2]=i*l+r*h+a,D[3]=n*l+s*h+o;break;case"arcToSvg":l=D[5],h=D[6],v=D[0],S=D[1],D[0]=i*v+r*S,D[1]=n*v+s*S,D[5]=i*l+r*h+a,D[6]=n*l+s*h+o;break;case"circle":D[4]=hy(D[3],e);break;case"rect":D[4]=hy(D[4],e);break;case"ellipse":D[8]=hy(D[8],e);break;case"roundRect":D[5]=hy(D[5],e);break;case"addPath":D[0].transform(e);break;case"poly":D[2]=hy(D[2],e);break;default:Ct("unknown transform action",A.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let i=this.instructions.length-1,n=this.instructions[i];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(i--,i<0)return e.x=0,e.y=0,e;n=this.instructions[i]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}function hy(t,e){return t?t.prepend(e):e.clone()}function zn(t,e,i){const n=t.getAttribute(e);return n?Number(n):i}function vZ(t,e){const i=t.querySelectorAll("defs");for(let n=0;n<i.length;n++){const r=i[n];for(let s=0;s<r.children.length;s++){const a=r.children[s];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=L0e(a);break;case"radialgradient":e.defs[a.id]=N0e();break}}}}function L0e(t){const e=zn(t,"x1",0),i=zn(t,"y1",0),n=zn(t,"x2",1),r=zn(t,"y2",0),s=t.getAttribute("gradientUnits")||"objectBoundingBox",a=new ml(e,i,n,r,s==="objectBoundingBox"?"local":"global");for(let o=0;o<t.children.length;o++){const l=t.children[o],h=zn(l,"offset",0),d=Pi.shared.setValue(l.getAttribute("stop-color")).toNumber();a.addColorStop(h,d)}return a}function N0e(t){return Ct("[SVG Parser] Radial gradients are not yet supported"),new ml(0,0,1,0)}function yM(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const xM={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function TF(t,e){const i=t.getAttribute("style"),n={},r={},s={strokeStyle:n,fillStyle:r,useFill:!1,useStroke:!1};for(const a in xM){const o=t.getAttribute(a);o&&O5(e,s,a,o.trim())}if(i){const a=i.split(";");for(let o=0;o<a.length;o++){const l=a[o].trim(),[h,d]=l.split(":");xM[h]&&O5(e,s,h,d.trim())}}return{strokeStyle:s.useStroke?n:null,fillStyle:s.useFill?r:null,useFill:s.useFill,useStroke:s.useStroke}}function O5(t,e,i,n){switch(i){case"stroke":if(n!=="none"){if(n.startsWith("url(")){const r=yM(n);e.strokeStyle.fill=t.defs[r]}else e.strokeStyle.color=Pi.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){const r=yM(n);e.fillStyle.fill=t.defs[r]}else e.fillStyle.color=Pi.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}function TZ(t){if(t.length<=2)return!0;const e=t.map(o=>o.area).sort((o,l)=>l-o),[i,n]=e,r=e[e.length-1],s=i/n,a=n/r;return!(s>3&&a<2)}function U0e(t,e=0){const i=t.instructions[e];if(!i||i.action!=="fill")throw new Error(`Expected fill instruction at index ${e}, got ${i?.action||"undefined"}`);return i.data}function EZ(t){return t.split(/(?=[Mm])/).filter(n=>n.trim().length>0)}function SZ(t){const e=t.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const i=e.map(Number),n=[],r=[];for(let d=0;d<i.length;d+=2)d+1<i.length&&(n.push(i[d]),r.push(i[d+1]));if(n.length===0||r.length===0)return 0;const s=Math.min(...n),a=Math.max(...n),o=Math.min(...r),l=Math.max(...r);return(a-s)*(l-o)}function _M(t,e){const i=new ou(t,!1);for(const n of i.instructions)e.instructions.push(n)}function AZ(t,e){if(typeof t=="string"){const a=document.createElement("div");a.innerHTML=t.trim(),t=a.querySelector("svg")}const i={context:e,defs:{},path:new ou};vZ(t,i);const n=t.children,{fillStyle:r,strokeStyle:s}=TF(t,i);for(let a=0;a<n.length;a++){const o=n[a];o.nodeName.toLowerCase()!=="defs"&&CZ(o,i,r,s)}return e}function CZ(t,e,i,n){const r=t.children,{fillStyle:s,strokeStyle:a}=TF(t,e);s&&i?i={...i,...s}:s&&(i=s),a&&n?n={...n,...a}:a&&(n=a);const o=!i&&!n;o&&(i={color:0});let l,h,d,p,g,y,v,S,T,A,D,R,B,z,L,H,te;switch(t.nodeName.toLowerCase()){case"path":{z=t.getAttribute("d");const j=t.getAttribute("fill-rule"),O=EZ(z),q=j==="evenodd",re=O.length>1;if(q&&re){const fe=O.map($=>({path:$,area:SZ($)}));if(fe.sort(($,se)=>se.area-$.area),O.length>3||!TZ(fe))for(let $=0;$<fe.length;$++){const se=fe[$],we=$===0;e.context.beginPath();const _e=new ou(void 0,!0);_M(se.path,_e),e.context.path(_e),we?(i&&e.context.fill(i),n&&e.context.stroke(n)):e.context.cut()}else for(let $=0;$<fe.length;$++){const se=fe[$],we=$%2===1;e.context.beginPath();const _e=new ou(void 0,!0);_M(se.path,_e),e.context.path(_e),we?e.context.cut():(i&&e.context.fill(i),n&&e.context.stroke(n))}}else{const fe=j?j==="evenodd":!0;L=new ou(z,fe),e.context.path(L),i&&e.context.fill(i),n&&e.context.stroke(n)}break}case"circle":v=zn(t,"cx",0),S=zn(t,"cy",0),T=zn(t,"r",0),e.context.ellipse(v,S,T,T),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"rect":l=zn(t,"x",0),h=zn(t,"y",0),H=zn(t,"width",0),te=zn(t,"height",0),A=zn(t,"rx",0),D=zn(t,"ry",0),A||D?e.context.roundRect(l,h,H,te,A||D):e.context.rect(l,h,H,te),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"ellipse":v=zn(t,"cx",0),S=zn(t,"cy",0),A=zn(t,"rx",0),D=zn(t,"ry",0),e.context.beginPath(),e.context.ellipse(v,S,A,D),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"line":d=zn(t,"x1",0),p=zn(t,"y1",0),g=zn(t,"x2",0),y=zn(t,"y2",0),e.context.beginPath(),e.context.moveTo(d,p),e.context.lineTo(g,y),n&&e.context.stroke(n);break;case"polygon":B=t.getAttribute("points"),R=B.match(/\d+/g).map(j=>parseInt(j,10)),e.context.poly(R,!0),i&&e.context.fill(i),n&&e.context.stroke(n);break;case"polyline":B=t.getAttribute("points"),R=B.match(/\d+/g).map(j=>parseInt(j,10)),e.context.poly(R,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{Ct(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}o&&(i=null);for(let j=0;j<r.length;j++)CZ(r[j],e,i,n)}function G0e(t){return Pi.isColorLike(t)}function F5(t){return t instanceof A_}function I5(t){return t instanceof ml}function H0e(t){return t instanceof it}function z0e(t,e,i){const n=Pi.shared.setValue(e??0);return t.color=n.toNumber(),t.alpha=n.alpha===1?i.alpha:n.alpha,t.texture=it.WHITE,{...i,...t}}function V0e(t,e,i){return t.texture=e,{...i,...t}}function L5(t,e,i){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function N5(t,e,i){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...i,...t}}function j0e(t,e){const i={...e,...t},n=Pi.shared.setValue(i.color);return i.alpha*=n.alpha,i.color=n.toNumber(),i}function Ch(t,e){if(t==null)return null;const i={},n=t;return G0e(t)?z0e(i,t,e):H0e(t)?V0e(i,t,e):F5(t)?L5(i,t,e):I5(t)?N5(i,t,e):n.fill&&F5(n.fill)?L5(n,n.fill,e):n.fill&&I5(n.fill)?N5(n,n.fill,e):j0e(n,e)}function zx(t,e){const{width:i,alignment:n,miterLimit:r,cap:s,join:a,pixelLine:o,...l}=e,h=Ch(t,l);return h?{width:i,alignment:n,miterLimit:r,cap:s,join:a,pixelLine:o,...h}:null}const X0e=new tn,U5=new gt,EF=class zu extends Ur{constructor(){super(...arguments),this.uid=gn("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ou,this._transform=new gt,this._fillStyle={...zu.defaultFillStyle},this._strokeStyle={...zu.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Ir,this._boundsDirty=!0}clone(){const e=new zu;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Ch(e,zu.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=zx(e,zu.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Ch(e,zu.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Ch(e,zu.defaultStrokeStyle),this}texture(e,i,n,r,s,a){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:r||0,dw:s||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:i?Pi.shared.setValue(i).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ou,this}fill(e,i){let n;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?n=r.data.path:n=this._activePath.clone(),n?(e!=null&&(i!==void 0&&typeof e=="number"&&(ft(Yt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=Ch(e,zu.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:i}=this._activePath.getLastPoint(tn.shared);this._activePath.clear(),this._activePath.moveTo(e,i)}stroke(e){let i;const n=this.instructions[this.instructions.length-1];return this._tick===0&&n&&n.action==="fill"?i=n.data.path:i=this._activePath.clone(),i?(e!=null&&(this._strokeStyle=zx(e,zu.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const i=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(i&&(i.action==="stroke"||i.action==="fill"))if(i.data.hole)i.data.hole.addPath(n);else{i.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,i,n,r,s,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*e+o.c*i+o.tx,o.b*e+o.d*i+o.ty,n,r,s,a),this}arcTo(e,i,n,r,s){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*i+a.tx,a.b*e+a.d*i+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,s),this}arcToSvg(e,i,n,r,s,a,o){this._tick++;const l=this._transform;return this._activePath.arcToSvg(e,i,n,r,s,l.a*a+l.c*o+l.tx,l.b*a+l.d*o+l.ty),this}bezierCurveTo(e,i,n,r,s,a,o){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*e+l.c*i+l.tx,l.b*e+l.d*i+l.ty,l.a*n+l.c*r+l.tx,l.b*n+l.d*r+l.ty,l.a*s+l.c*a+l.tx,l.b*s+l.d*a+l.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,i,n,r){return this._tick++,this._activePath.ellipse(e,i,n,r,this._transform.clone()),this}circle(e,i,n){return this._tick++,this._activePath.circle(e,i,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,i){this._tick++;const n=this._transform;return this._activePath.lineTo(n.a*e+n.c*i+n.tx,n.b*e+n.d*i+n.ty),this}moveTo(e,i){this._tick++;const n=this._transform,r=this._activePath.instructions,s=n.a*e+n.c*i+n.tx,a=n.b*e+n.d*i+n.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=a,this):(this._activePath.moveTo(s,a),this)}quadraticCurveTo(e,i,n,r,s){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*i+a.tx,a.b*e+a.d*i+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,s),this}rect(e,i,n,r){return this._tick++,this._activePath.rect(e,i,n,r,this._transform.clone()),this}roundRect(e,i,n,r,s){return this._tick++,this._activePath.roundRect(e,i,n,r,s,this._transform.clone()),this}poly(e,i){return this._tick++,this._activePath.poly(e,i,this._transform.clone()),this}regularPoly(e,i,n,r,s=0,a){return this._tick++,this._activePath.regularPoly(e,i,n,r,s,a),this}roundPoly(e,i,n,r,s,a){return this._tick++,this._activePath.roundPoly(e,i,n,r,s,a),this}roundShape(e,i,n,r){return this._tick++,this._activePath.roundShape(e,i,n,r),this}filletRect(e,i,n,r,s){return this._tick++,this._activePath.filletRect(e,i,n,r,s),this}chamferRect(e,i,n,r,s,a){return this._tick++,this._activePath.chamferRect(e,i,n,r,s,a),this}star(e,i,n,r,s=0,a=0){return this._tick++,this._activePath.star(e,i,n,r,s,a,this._transform.clone()),this}svg(e){return this._tick++,AZ(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,i=e){return this._transform.scale(e,i),this}setTransform(e,i,n,r,s,a){return e instanceof gt?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,i,n,r,s,a),this)}transform(e,i,n,r,s,a){return e instanceof gt?(this._transform.append(e),this):(U5.set(e,i,n,r,s,a),this._transform.append(U5),this)}translate(e,i=e){return this._transform.translate(e,i),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let i=0;i<this.instructions.length;i++){const n=this.instructions[i],r=n.action;if(r==="fill"){const s=n.data;e.addBounds(s.path.bounds)}else if(r==="texture"){const s=n.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){const s=n.data,a=s.style.alignment,o=s.style.width*(1-a),l=s.path.bounds;e.addFrame(l.minX-o,l.minY-o,l.maxX+o,l.maxY+o)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const i=this.instructions;let n=!1;for(let r=0;r<i.length;r++){const s=i[r],a=s.data,o=a.path;if(!s.action||!o)continue;const l=a.style,h=o.shapePath.shapePrimitives;for(let d=0;d<h.length;d++){const p=h[d].shape;if(!l||!p)continue;const g=h[d].transform,y=g?g.applyInverse(e,X0e):e;if(s.action==="fill")n=p.contains(y.x,y.y);else{const S=l;n=p.strokeContains(y.x,y.y,S.width,S.alignment)}const v=a.hole;if(v){const S=v.shapePath?.shapePrimitives;if(S)for(let T=0;T<S.length;T++)S[T].shape.contains(y.x,y.y)&&(n=!1)}if(n)return!0}}return n}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(n)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(n))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};EF.defaultFillStyle={color:16777215,alpha:1,texture:it.WHITE,matrix:null,fill:null,textureSpace:"local"};EF.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:it.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Vs=EF;const SF=class xm extends Ur{constructor(e={}){super(),this.uid=gn("textStyle"),this._tick=0,Y0e(e);const i={...xm.defaultTextStyle,...e};for(const n in i){const r=n;this[r]=i[n]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...xm.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...xm.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Vs.defaultFillStyle,...e},()=>{this._fill=Ch({...this._originalFill},Vs.defaultFillStyle)})),this._fill=Ch(e===0?"black":e,Vs.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Vs.defaultStrokeStyle,...e},()=>{this._stroke=zx({...this._originalStroke},Vs.defaultStrokeStyle)})),this._stroke=zx(e,Vs.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=xm.defaultTextStyle;for(const i in e)this[i]=e[i]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new xm({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let i=0;i<this._filters.length;i++)e+=this._filters[i].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(n),this._originalFill?.texture&&this._originalFill.texture.destroy(n),this._stroke?.texture&&this._stroke.texture.destroy(n),this._originalStroke?.texture&&this._originalStroke.texture.destroy(n)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,i){return new Proxy(e,{set:(n,r,s)=>(n[r]===s||(n[r]=s,i?.(r,s),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Pi.isColorLike(e)||e instanceof ml||e instanceof A_)}};SF.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};SF.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ua=SF;function Y0e(t){const e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const i=Ua.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??i.alpha,angle:e.dropShadowAngle??i.angle,blur:e.dropShadowBlur??i.blur,color:e.dropShadowColor??i.color,distance:e.dropShadowDistance??i.distance}}if(e.strokeThickness!==void 0){ft(Yt,"strokeThickness is now a part of stroke");const i=e.stroke;let n={};if(Pi.isColorLike(i))n.color=i;else if(i instanceof ml||i instanceof A_)n.fill=i;else if(Object.hasOwnProperty.call(i,"color")||Object.hasOwnProperty.call(i,"fill"))n=i;else throw new Error("Invalid stroke value.");t.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(ft(Yt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Ct("The number of fill colors must match the number of fill gradient stops.");const i=new ml({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),n=e.fillGradientStops.slice(),r=e.fill.map(s=>Pi.shared.setValue(s).toNumber());n.forEach((s,a)=>{i.addColorStop(s,r[a])}),t.fill={fill:i}}}class wZ{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,i){const n=Wt.get().createCanvas();n.width=e,n.height=i;const r=n.getContext("2d");return{canvas:n,context:r}}getOptimalCanvasAndContext(e,i,n=1){e=Math.ceil(e*n-1e-6),i=Math.ceil(i*n-1e-6),e=yf(e),i=yf(i);const r=(e<<17)+(i<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(e,i)),s}returnCanvasAndContext(e){const i=e.canvas,{width:n,height:r}=i,s=(n<<17)+(r<<1);e.context.resetTransform(),e.context.clearRect(0,0,n,r),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const gl=new wZ;Uf.register(gl);const G5=1e5;function Vx(t,e,i,n=0){if(t.texture===it.WHITE&&!t.fill)return Pi.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof A_){const r=t.fill,s=e.createPattern(r.texture.source.resource,"repeat"),a=r.transform.copyTo(gt.shared);return a.scale(r.texture.frame.width,r.texture.frame.height),s.setTransform(a),s}else if(t.fill instanceof ml){const r=t.fill,s=r.type==="linear",a=r.textureSpace==="local";let o=1,l=1;a&&i&&(o=i.width+n,l=i.height+n);let h,d=!1;if(s){const{start:p,end:g}=r;h=e.createLinearGradient(p.x*o,p.y*l,g.x*o,g.y*l),d=Math.abs(g.x-p.x)<Math.abs((g.y-p.y)*.1)}else{const{center:p,innerRadius:g,outerCenter:y,outerRadius:v}=r;h=e.createRadialGradient(p.x*o,p.y*l,g*o,y.x*o,y.y*l,v*o)}if(d&&a&&i){const p=i.lineHeight/l;for(let g=0;g<i.lines.length;g++){const y=(g*i.lineHeight+n/2)/l;r.colorStops.forEach(v=>{const S=y+v.offset*p;h.addColorStop(Math.floor(S*G5)/G5,Pi.shared.setValue(v.color).toHex())})}}else r.colorStops.forEach(p=>{h.addColorStop(p.offset,Pi.shared.setValue(p.color).toHex())});return h}}else{const r=e.createPattern(t.texture.source.resource,"repeat"),s=t.matrix.copyTo(gt.shared);return s.scale(t.texture.frame.width,t.texture.frame.height),r.setTransform(s),r}return Ct("FillStyle not recognised",t),"red"}const DZ=class RZ extends cF{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const i={...RZ.defaultOptions,...e};this._textureSize=i.textureSize,this._mipmap=i.mipmap;const n=i.style.clone();i.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=it.WHITE,n._fill.fill=null),this.applyFillAsTint=i.overrideFill;const r=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const s=Hx(n);i.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/r):n.fontSize=this.baseRenderedFontSize=r,this._style=n,this._skipKerning=i.skipKerning??!1,this.resolution=i.resolution??1,this._padding=i.padding??4,i.textureStyle&&(this._textureStyle=i.textureStyle instanceof La?i.textureStyle:new La(i.textureStyle)),this.fontMetrics=vs.measureFont(s),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){const i=vs.graphemeSegmenter(e).filter(T=>!this._currentChars.includes(T)).filter((T,A,D)=>D.indexOf(T)===A);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:r,context:s}=n.canvasAndContext,a=n.texture.source;const o=this._style;let l=this._currentX,h=this._currentY,d=this._currentMaxCharHeight;const p=this.baseRenderedFontSize/this.baseMeasurementFontSize,g=this._padding*p;let y=!1;const v=r.width/this.resolution,S=r.height/this.resolution;for(let T=0;T<i.length;T++){const A=i[T],D=vs.measureText(A,o,r,!1);D.lineHeight=D.height;const R=D.width*p,B=Math.ceil((o.fontStyle==="italic"?2:1)*R),z=D.height*p,L=B+g*2,H=z+g*2;if(y=!1,A!==`
`&&A!=="\r"&&A!=="	"&&A!==" "&&(y=!0,d=Math.ceil(Math.max(H,d))),l+L>v&&(h+=d,d=H,l=0,h+d>S)){a.update();const j=this._nextPage();r=j.canvasAndContext.canvas,s=j.canvasAndContext.context,a=j.texture.source,l=0,h=0,d=0}const te=R/p-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[A]={id:A.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:te,kerning:{}},y){this._drawGlyph(s,D,l+g,h+g,p,o);const j=a.width*p,O=a.height*p,q=new zi(l/j*a.width,h/O*a.height,L/j*a.width,H/O*a.height);this.chars[A].texture=new it({source:a,frame:q}),l+=Math.ceil(L)}}a.update(),this._currentX=l,this._currentY=h,this._currentMaxCharHeight=d,this._skipKerning&&this._applyKerning(i,s)}get pageTextures(){return ft(Yt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,i){const n=this._measureCache;for(let r=0;r<e.length;r++){const s=e[r];for(let a=0;a<this._currentChars.length;a++){const o=this._currentChars[a];let l=n[s];l||(l=n[s]=i.measureText(s).width);let h=n[o];h||(h=n[o]=i.measureText(o).width);let d=i.measureText(s+o).width,p=d-(l+h);p&&(this.chars[s].kerning[o]=p),d=i.measureText(s+o).width,p=d-(l+h),p&&(this.chars[o].kerning[s]=p)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,i=gl.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(i.context,this._style,e);const n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new it({source:new kh({resource:i.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(r.source.style=this._textureStyle);const s={canvasAndContext:i,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,i,n){i.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=Hx(i),i.fontSize=this.baseMeasurementFontSize,e.textBaseline=i.textBaseline;const r=i._stroke,s=r?.width??0;if(r&&(e.lineWidth=s,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=Vx(r,e)),i._fill&&(e.fillStyle=Vx(i._fill,e)),i.dropShadow){const a=i.dropShadow,o=Pi.shared.setValue(a.color).toArray(),l=a.blur*n,h=a.distance*n;e.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(a.angle)*h,e.shadowOffsetY=Math.sin(a.angle)*h}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,i,n,r,s,a){const o=i.text,l=i.fontProperties,d=(a._stroke?.width??0)*s,p=n+d/2,g=r-d/2,y=l.descent*s,v=i.lineHeight*s;let S=!1;a.stroke&&d&&(S=!0,e.strokeText(o,p,g+v-y));const{shadowBlur:T,shadowOffsetX:A,shadowOffsetY:D}=e;a._fill&&(S&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(o,p,g+v-y)),S&&(e.shadowBlur=T,e.shadowOffsetX=A,e.shadowOffsetY=D)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:i,texture:n}=this.pages[e];gl.returnCanvasAndContext(i),n.destroy(!0)}this.pages=null}};DZ.defaultOptions={textureSize:512,style:new Ua,mipmap:!0};let vM=DZ;function ZS(t,e,i,n){const r={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=i.baseLineOffset;let s=r.lines[0],a=null,o=!0;const l={width:0,start:0,index:0,positions:[],chars:[]},h=i.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*h,p=e.wordWrapWidth*h,g=e.lineHeight?e.lineHeight*h:i.lineHeight,y=e.wordWrap&&e.breakWords,v=A=>{const D=s.width;for(let R=0;R<l.index;R++){const B=A.positions[R];s.chars.push(A.chars[R]),s.charPositions.push(B+D)}s.width+=A.width,o=!1,l.width=0,l.index=0,l.chars.length=0},S=()=>{let A=s.chars.length-1;if(n){let D=s.chars[A];for(;D===" ";)s.width-=i.chars[D].xAdvance,D=s.chars[--A]}r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,r.lines.push(s),r.height+=g},T=A=>A-d>p;for(let A=0;A<t.length+1;A++){let D;const R=A===t.length;R||(D=t[A]);const B=i.chars[D]||i.chars[" "];if(/(?:\s)/.test(D)||D==="\r"||D===`
`||R){if(!o&&e.wordWrap&&T(s.width+l.width)?(S(),v(l),R||s.charPositions.push(0)):(l.start=s.width,v(l),R||s.charPositions.push(0)),D==="\r"||D===`
`)S();else if(!R){const te=B.xAdvance+(B.kerning[a]||0)+d;s.width+=te,s.spaceWidth=te,s.spacesIndex.push(s.charPositions.length),s.chars.push(D)}}else{const H=B.kerning[a]||0,te=B.xAdvance+H+d;y&&T(s.width+l.width+te)&&(v(l),S()),l.positions[l.index++]=l.width+H,l.chars.push(D),l.width+=te}a=D}return S(),e.align==="center"?q0e(r):e.align==="right"?W0e(r):e.align==="justify"&&$0e(r),r}function q0e(t){for(let e=0;e<t.lines.length;e++){const i=t.lines[e],n=t.width/2-i.width/2;for(let r=0;r<i.charPositions.length;r++)i.charPositions[r]+=n}}function W0e(t){for(let e=0;e<t.lines.length;e++){const i=t.lines[e],n=t.width-i.width;for(let r=0;r<i.charPositions.length;r++)i.charPositions[r]+=n}}function $0e(t){const e=t.width;for(let i=0;i<t.lines.length;i++){const n=t.lines[i];let r=0,s=n.spacesIndex[r++],a=0;const o=n.spacesIndex.length,h=(e-n.width)/o;for(let d=0;d<n.charPositions.length;d++)d===s&&(s=n.spacesIndex[r++],a+=h),n.charPositions[d]+=a}}function PZ(t){if(t==="")return[];typeof t=="string"&&(t=[t]);const e=[];for(let i=0,n=t.length;i<n;i++){const r=t[i];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=r[0].charCodeAt(0),a=r[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(let o=s,l=a;o<=l;o++)e.push(String.fromCharCode(o))}else e.push(...Array.from(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Y1=0;class K0e{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=MQ(1e3)}getFont(e,i){let n=`${i.fontFamily}-bitmap`,r=!0;if(i._fill.fill&&!i._stroke?(n+=i._fill.fill.styleKey,r=!1):(i._stroke||i.dropShadow)&&(n=`${i.styleKey}-bitmap`,r=!1),!Ki.has(n)){const a=Object.create(i);a.lineHeight=0;const o=new vM({style:a,overrideFill:r,overrideSize:!0,...this.defaultOptions});Y1++,Y1>50&&Ct("BitmapText",`You have dynamically created ${Y1} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{Y1--,Ki.remove(n)}),Ki.set(n,o)}const s=Ki.get(n);return s.ensureCharacters?.(e),s}getLayout(e,i,n=!0){const r=this.getFont(e,i),s=`${e}-${i.styleKey}-${n}`;if(this.measureCache.has(s))return this.measureCache.get(s);const a=vs.graphemeSegmenter(e),o=ZS(a,i,r,n);return this.measureCache.set(s,o),o}measureText(e,i,n=!0){return this.getLayout(e,i,n)}install(...e){let i=e[0];typeof i=="string"&&(i={name:i,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},ft(Yt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const n=i?.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");i={...this.defaultOptions,...i};const r=i.style,s=r instanceof Ua?r:new Ua(r),a=i.dynamicFill??this._canUseTintForStyle(s),o=new vM({style:s,overrideFill:a,skipKerning:i.skipKerning,padding:i.padding,resolution:i.resolution,overrideSize:!1,textureStyle:i.textureStyle}),l=PZ(i.chars);return o.ensureCharacters(l.join("")),Ki.set(`${n}-bitmap`,o),o.once("destroy",()=>Ki.remove(`${n}-bitmap`)),o}uninstall(e){const i=`${e}-bitmap`,n=Ki.get(i);n&&n.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const ug=new K0e;class AF extends cF{constructor(e,i){super();const{textures:n,data:r}=e;Object.keys(r.pages).forEach(s=>{const a=r.pages[parseInt(s,10)],o=n[a.id];this.pages.push({texture:o})}),Object.keys(r.chars).forEach(s=>{const a=r.chars[s],{frame:o,source:l,rotate:h}=n[a.page],d=ri.transformRectCoords(a,o,h,new zi),p=new it({frame:d,orig:new zi(0,0,a.width,a.height),source:l,rotate:h});this.chars[s]={id:s.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:p}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=i}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:i}=this.pages[e];i.destroy(!0)}this.pages=null}static install(e){ug.install(e)}static uninstall(e){ug.uninstall(e)}}const HT={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const p in e){const g=e[p].match(/^[a-z]+/gm)[0],y=e[p].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),v={};for(const S in y){const T=y[S].split("="),A=T[0],D=T[1].replace(/"/gm,""),R=parseFloat(D),B=isNaN(R)?D:R;v[A]=B}i[g].push(v)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=i.info,[s]=i.common,[a]=i.distanceField??[];a&&(n.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),n.fontSize=parseInt(r.size,10),n.fontFamily=r.face,n.lineHeight=parseInt(s.lineHeight,10);const o=i.page;for(let p=0;p<o.length;p++)n.pages.push({id:parseInt(o[p].id,10)||0,file:o[p].file});const l={};n.baseLineOffset=n.lineHeight-parseInt(s.base,10);const h=i.char;for(let p=0;p<h.length;p++){const g=h[p],y=parseInt(g.id,10);let v=g.letter??g.char??String.fromCharCode(y);v==="space"&&(v=" "),l[y]=v,n.chars[v]={id:y,page:parseInt(g.page,10)||0,x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xOffset:parseInt(g.xoffset,10),yOffset:parseInt(g.yoffset,10),xAdvance:parseInt(g.xadvance,10),kerning:{}}}const d=i.kerning||[];for(let p=0;p<d.length;p++){const g=parseInt(d[p].first,10),y=parseInt(d[p].second,10),v=parseInt(d[p].amount,10);n.chars[l[y]].kerning[l[g]]=v}return n}},TM={test(t){const e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=t.getElementsByTagName("info")[0],n=t.getElementsByTagName("common")[0],r=t.getElementsByTagName("distanceField")[0];r&&(e.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const s=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let h=0;h<s.length;h++)e.pages.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});const l={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let h=0;h<a.length;h++){const d=a[h],p=parseInt(d.getAttribute("id"),10);let g=d.getAttribute("letter")??d.getAttribute("char")??String.fromCharCode(p);g==="space"&&(g=" "),l[p]=g,e.chars[g]={id:p,page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<o.length;h++){const d=parseInt(o[h].getAttribute("first"),10),p=parseInt(o[h].getAttribute("second"),10),g=parseInt(o[h].getAttribute("amount"),10);e.chars[l[p]].kerning[l[d]]=g}return e}},EM={test(t){return typeof t=="string"&&t.includes("<font>")?TM.test(Wt.get().parseXML(t)):!1},parse(t){return TM.parse(Wt.get().parseXML(t))}},Q0e=[".xml",".fnt"],MZ={extension:{type:me.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof AF,getCacheableAssets(t,e){const i={};return t.forEach(n=>{i[n]=e,i[`${n}-bitmap`]=e}),i[`${e.fontFamily}-bitmap`]=e,i}},BZ={extension:{type:me.LoadParser,priority:ba.Normal},name:"loadBitmapFont",id:"bitmap-font",test(t){return Q0e.includes(Qr.extname(t).toLowerCase())},async testParse(t){return HT.test(t)||EM.test(t)},async parse(t,e,i){const n=HT.test(t)?HT.parse(t):EM.parse(t),{src:r}=e,{pages:s}=n,a=[],o=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let p=0;p<s.length;++p){const g=s[p].file;let y=Qr.join(Qr.dirname(r),g);y=RE(y,r),a.push({src:y,data:o})}const l=await i.load(a),h=a.map(p=>l[p.src]);return new AF({data:n,textures:h},r)},async load(t,e){return await(await Wt.get().fetch(t)).text()},async unload(t,e,i){await Promise.all(t.pages.map(n=>i.unload(n.texture.source._sourceOrigin))),t.destroy()}};class kZ{constructor(e,i=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(e){e.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<i;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const OZ={extension:{type:me.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof it),getCacheableAssets:(t,e)=>{const i={};return t.forEach(n=>{e.forEach((r,s)=>{i[n+(s===0?"":s+1)]=r})}),i}};async function CF(t){if("Image"in globalThis)return new Promise(e=>{const i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const FZ={extension:{type:me.DetectionParser,priority:1},test:async()=>CF("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")},H5=["png","jpg","jpeg"],IZ={extension:{type:me.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...H5],remove:async t=>t.filter(e=>!H5.includes(e))},Z0e="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function C_(t){return Z0e?!1:document.createElement("video").canPlayType(t)!==""}const LZ={extension:{type:me.DetectionParser,priority:0},test:async()=>C_("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")},NZ={extension:{type:me.DetectionParser,priority:0},test:async()=>C_("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")},UZ={extension:{type:me.DetectionParser,priority:0},test:async()=>C_("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")},GZ={extension:{type:me.DetectionParser,priority:0},test:async()=>CF("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")},HZ=class zT{constructor(){this.loadOptions={...zT.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,i,n)=>(this._parsersValidated=!1,e[i]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,i){const n={promise:null,parser:null};return n.promise=(async()=>{let r=null,s=null;if((i.parser||i.loadParser)&&(s=this._parserHash[i.parser||i.loadParser],i.loadParser&&Ct(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),s||Ct(`[Assets] specified load parser "${i.parser||i.loadParser}" not found while loading ${e}`)),!s){for(let a=0;a<this.parsers.length;a++){const o=this.parsers[a];if(o.load&&o.test?.(e,i,this)){s=o;break}}if(!s)return Ct(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(e,i,this),n.parser=s;for(let a=0;a<this.parsers.length;a++){const o=this.parsers[a];o.parse&&o.parse&&await o.testParse?.(r,i,this)&&(r=await o.parse(r,i,this)||r,n.parser=o)}return r})(),n}async load(e,i){this._parsersValidated||this._validateParsers();const n=typeof i=="function"?{...zT.defaultOptions,...this.loadOptions,onProgress:i}:{...zT.defaultOptions,...this.loadOptions,...i||{}},{onProgress:r,onError:s,strategy:a,retryCount:o,retryDelay:l}=n;let h=0;const d={},p=Ix(e),g=bo(e,S=>({alias:[S],src:S,data:{}})),y=g.reduce((S,T)=>S+(T.progressSize||1),0),v=g.map(async S=>{const T=Qr.toAbsolute(S.src);d[S.src]||(await this._loadAssetWithRetry(T,S,{onProgress:r,onError:s,strategy:a,retryCount:o,retryDelay:l},d),h+=S.progressSize||1,r&&r(h/y))});return await Promise.all(v),p?d[g[0].src]:d}async unload(e){const n=bo(e,r=>({alias:[r],src:r})).map(async r=>{const s=Qr.toAbsolute(r.src),a=this.promiseCache[s];if(a){const o=await a.promise;delete this.promiseCache[s],await a.parser?.unload?.(o,r,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,i)=>(!i.name&&!i.id?Ct("[Assets] parser should have an id"):(e[i.name]||e[i.id])&&Ct(`[Assets] parser id conflict "${i.id}"`),e[i.name]=i,i.id&&(e[i.id]=i),e),{})}async _loadAssetWithRetry(e,i,n,r){let s=0;const{onError:a,strategy:o,retryCount:l,retryDelay:h}=n,d=p=>new Promise(g=>setTimeout(g,p));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,i)),r[i.src]=await this.promiseCache[e].promise;return}catch(p){delete this.promiseCache[e],delete r[i.src],s++;const g=o!=="retry"||s>l;if(o==="retry"&&!g){a&&a(p,i),await d(h);continue}if(o==="skip"){a&&a(p,i);return}throw a&&a(p,i),new Error(`[Loader.load] Failed to load ${e}.
${p}`)}}};HZ.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let zZ=HZ;function Hf(t,e){if(Array.isArray(e)){for(const i of e)if(t.startsWith(`data:${i}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Bo(t,e){const i=t.split("?")[0],n=Qr.extname(i).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const J0e=".json",ebe="application/json",VZ={extension:{type:me.LoadParser,priority:ba.Low},name:"loadJson",id:"json",test(t){return Hf(t,ebe)||Bo(t,J0e)},async load(t){return await(await Wt.get().fetch(t)).json()}},tbe=".txt",ibe="text/plain",jZ={name:"loadTxt",id:"text",extension:{type:me.LoadParser,priority:ba.Low,name:"loadTxt"},test(t){return Hf(t,ibe)||Bo(t,tbe)},async load(t){return await(await Wt.get().fetch(t)).text()}},nbe=["normal","bold","100","200","300","400","500","600","700","800","900"],rbe=[".ttf",".otf",".woff",".woff2"],sbe=["font/ttf","font/otf","font/woff","font/woff2"],abe=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function XZ(t){const e=Qr.extname(t),r=Qr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let s=r.length>0;for(const o of r)if(!o.match(abe)){s=!1;break}let a=r.join(" ");return s||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const obe=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function ube(t){return obe.test(t)?t:encodeURI(t)}const YZ={extension:{type:me.LoadParser,priority:ba.Low},name:"loadWebFont",id:"web-font",test(t){return Hf(t,sbe)||Bo(t,rbe)},async load(t,e){const i=Wt.get().getFontFaceSet();if(i){const n=[],r=e.data?.family??XZ(t),s=e.data?.weights?.filter(o=>nbe.includes(o))??["normal"],a=e.data??{};for(let o=0;o<s.length;o++){const l=s[o],h=new FontFace(r,`url(${ube(t)})`,{...a,weight:l});await h.load(),i.add(h),n.push(h)}return Ki.has(`${r}-and-url`)?Ki.get(`${r}-and-url`).entries.push({url:t,faces:n}):Ki.set(`${r}-and-url`,{entries:[{url:t,faces:n}]}),n.length===1?n[0]:n}return Ct("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){const e=Array.isArray(t)?t:[t],i=e[0].family,n=Ki.get(`${i}-and-url`),r=n.entries.find(s=>s.faces.some(a=>e.indexOf(a)!==-1));r.faces=r.faces.filter(s=>e.indexOf(s)===-1),r.faces.length===0&&(n.entries=n.entries.filter(s=>s!==r)),e.forEach(s=>{Wt.get().getFontFaceSet().delete(s)}),n.entries.length===0&&Ki.remove(`${i}-and-url`)}};function JS(t,e=1){const i=Xh.RETINA_PREFIX?.exec(t);return i?parseFloat(i[1]):e}function Yh(t,e,i){t.label=i,t._sourceOrigin=i;const n=new it({source:t,label:i}),r=()=>{delete e.promiseCache[i],Ki.has(i)&&Ki.remove(i)};return n.source.once("destroy",()=>{e.promiseCache[i]&&(Ct("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),n.once("destroy",()=>{t.destroyed||(Ct("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),n}const lbe=".svg",cbe="image/svg+xml",qZ={extension:{type:me.LoadParser,priority:ba.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return Hf(t,cbe)||Bo(t,lbe)},async load(t,e,i){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?dbe(t):hbe(t,e,i,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function hbe(t,e,i,n){const r=await Wt.get().fetch(t),s=Wt.get().createImage();s.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await r.text())}`,s.crossOrigin=n,await s.decode();const a=e.data?.width??s.width,o=e.data?.height??s.height,l=e.data?.resolution||JS(t),h=Math.ceil(a*l),d=Math.ceil(o*l),p=Wt.get().createCanvas(h,d),g=p.getContext("2d");g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(s,0,0,a*l,o*l);const{parseAsGraphicsContext:y,...v}=e.data??{},S=new kh({resource:p,alphaMode:"premultiply-alpha-on-upload",resolution:l,...v});return Yh(S,i,t)}async function dbe(t){const i=await(await Wt.get().fetch(t)).text(),n=new Vs;return n.svg(i),n}const fbe=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let zm=null,SM=class{constructor(){zm||(zm=URL.createObjectURL(new Blob([fbe],{type:"application/javascript"}))),this.worker=new Worker(zm)}};SM.revokeObjectURL=function(){zm&&(URL.revokeObjectURL(zm),zm=null)};const pbe=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Vm=null,WZ=class{constructor(){Vm||(Vm=URL.createObjectURL(new Blob([pbe],{type:"application/javascript"}))),this.worker=new Worker(Vm)}};WZ.revokeObjectURL=function(){Vm&&(URL.revokeObjectURL(Vm),Vm=null)};let z5=0,AD;class mbe{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:i}=new SM;i.addEventListener("message",n=>{i.terminate(),SM.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,i){return this._run("loadImageBitmap",[e,i?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){AD===void 0&&(AD=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<AD&&(this._createdWorkers++,e=new WZ().worker,e.addEventListener("message",i=>{this._complete(i.data),this._returnWorker(i.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,i){await this._initWorkers();const n=new Promise((r,s)=>{this._queue.push({id:e,arguments:i,resolve:r,reject:s})});return this._next(),n}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const i=this._queue.pop(),n=i.id;this._resolveHash[z5]={resolve:i.resolve,reject:i.reject},e.postMessage({data:i.arguments,uuid:z5++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager destroyed"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const AM=new mbe,gbe=[".jpeg",".jpg",".png",".webp",".avif"],bbe=["image/jpeg","image/png","image/webp","image/avif"];async function $Z(t,e){const i=await Wt.get().fetch(t);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${i.status} ${i.statusText}`);const n=await i.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}const wF={name:"loadTextures",id:"texture",extension:{type:me.LoadParser,priority:ba.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Hf(t,bbe)||Bo(t,gbe)},async load(t,e,i){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await AM.isImageBitmapSupported()?n=await AM.loadImageBitmap(t,e):n=await $Z(t,e):n=await new Promise((s,a)=>{n=Wt.get().createImage(),n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?s(n):(n.onload=()=>{s(n)},n.onerror=a)});const r=new kh({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||JS(t),...e.data});return Yh(r,i,t)},unload(t){t.destroy(!0)}},ybe=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let CD,wD;function KZ(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=ZZ(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}function QZ(t){return new Promise((e,i)=>{t.addEventListener("canplaythrough",n),t.addEventListener("error",r),t.load();function n(){s(),e()}function r(a){s(),i(a)}function s(){t.removeEventListener("canplaythrough",n),t.removeEventListener("error",r)}})}function ZZ(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const i=new URL(t,document.baseURI);return i.hostname!==e.hostname||i.port!==e.port||i.protocol!==e.protocol?"anonymous":""}function xbe(){const t=[],e=[];for(const i of ybe){const n=Gm.MIME_TYPES[i.substring(1)]||`video/${i.substring(1)}`;C_(n)&&(t.push(i),e.includes(n)||e.push(n))}return{validVideoExtensions:t,validVideoMime:e}}const JZ={name:"loadVideo",id:"video",extension:{type:me.LoadParser,name:"loadVideo"},test(t){if(!CD||!wD){const{validVideoExtensions:n,validVideoMime:r}=xbe();CD=n,wD=r}const e=Hf(t,wD),i=Bo(t,CD);return e||i},async load(t,e,i){const n={...Gm.defaultOptions,resolution:e.data?.resolution||JS(t),alphaMode:e.data?.alphaMode||await JO(),...e.data},r=document.createElement("video"),s={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(s).forEach(l=>{const h=s[l];h!==void 0&&r.setAttribute(l,h)}),n.muted===!0&&(r.muted=!0),KZ(r,t,n.crossorigin);const a=document.createElement("source");let o;if(n.mime)o=n.mime;else if(t.startsWith("data:"))o=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const l=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();o=Gm.MIME_TYPES[l]||`video/${l}`}return a.src=t,o&&(a.type=o),new Promise(l=>{const h=async()=>{const d=new Gm({...n,resource:r});r.removeEventListener("canplay",h),e.data.preload&&await QZ(r),l(Yh(d,i,t))};n.preload&&!n.autoPlay&&r.load(),r.addEventListener("canplay",h),r.appendChild(a)})},unload(t){t.destroy(!0)}},DF={extension:{type:me.ResolveParser,name:"resolveTexture"},test:wF.test,parse:t=>({resolution:parseFloat(Xh.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})},eJ={extension:{type:me.ResolveParser,priority:-2,name:"resolveJson"},test:t=>Xh.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:DF.parse};class tJ{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Xh,this.loader=new zZ,this.cache=Ki,this._backgroundLoader=new kZ(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){Ct("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const i=e.texturePreference?.resolution??1,n=typeof i=="number"?[i]:i,r=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:n}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,i){this._initialized||await this.init();const n=Ix(e),r=bo(e).map(o=>{if(typeof o!="string"){const l=this.resolver.getAlias(o);return l.some(h=>!this.resolver.hasKey(h))&&this.add(o),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),s=this.resolver.resolve(r),a=await this._mapLoadToResolve(s,i);return n?a[r[0]]:a}addBundle(e,i){this.resolver.addBundle(e,i)}async loadBundle(e,i){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const r=this.resolver.resolveBundle(e),s={},a=Object.keys(r);let o=0;const l=[],h=()=>{i?.(l.reduce((p,g)=>p+g,0)/o)},d=a.map((p,g)=>{const y=r[p],v=Object.values(y),T=[...new Set(v.flat())].reduce((A,D)=>A+(D.progressSize||1),0);return l.push(0),o+=T,this._mapLoadToResolve(y,A=>{l[g]=A*T,h()}).then(A=>{s[p]=A})});return await Promise.all(d),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const i=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const i=this.resolver.resolveBundle(e);Object.values(i).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ki.get(e);const i={};for(let n=0;n<e.length;n++)i[n]=Ki.get(e[n]);return i}async _mapLoadToResolve(e,i){const n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const r=await this.loader.load(n,i);this._backgroundLoader.active=!0;const s={};return n.forEach(a=>{const o=r[a.src],l=[a.src];a.alias&&l.push(...a.alias),l.forEach(h=>{s[h]=o}),Ki.set(l,o)}),s}async unload(e){this._initialized||await this.init();const i=bo(e).map(r=>typeof r!="string"?r.src:r),n=this.resolver.resolve(i);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=bo(e);const i=this.resolver.resolveBundle(e),n=Object.keys(i).map(r=>this._unloadFromResolved(i[r]));await Promise.all(n)}async _unloadFromResolved(e){const i=Object.values(e);i.forEach(n=>{Ki.remove(n.src)}),await this.loader.unload(i)}async _detectFormats(e){let i=[];e.preferredFormats&&(i=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?i=await n.add(i):e.skipDetections||(i=await n.remove(i));return i=i.filter((n,r)=>i.indexOf(n)===r),i}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(n=>n in e).forEach(n=>{i.config[n]=e[n]})})}}const zy=new tJ;Zi.handleByList(me.LoadParser,zy.loader.parsers).handleByList(me.ResolveParser,zy.resolver.parsers).handleByList(me.CacheParser,zy.cache.parsers).handleByList(me.DetectionParser,zy.detections);Zi.add(OZ,IZ,FZ,GZ,LZ,NZ,UZ,VZ,jZ,YZ,qZ,wF,JZ,BZ,MZ,DF,eJ);const V5={loader:me.LoadParser,resolver:me.ResolveParser,cache:me.CacheParser,detection:me.DetectionParser};Zi.handle(me.Asset,t=>{const e=t.ref;Object.entries(V5).filter(([i])=>!!e[i]).forEach(([i,n])=>Zi.add(Object.assign(e[i],{extension:e[i].extension??n})))},t=>{const e=t.ref;Object.keys(V5).filter(i=>!!e[i]).forEach(i=>Zi.remove(e[i]))});const _be={extension:{type:me.DetectionParser,priority:3},test:async()=>!!(await S_()||E_()),add:async t=>[...t,"basis"],remove:async t=>t.filter(e=>e!=="basis")};class w_ extends Xn{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}}let q1;function CM(){if(q1)return q1;const e=Wt.get().createCanvas(1,1).getContext("webgl");return e?(q1=[...e.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...e.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...e.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...e.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],q1):[]}let W1;async function wM(){if(W1)return W1;const t=await Wt.get().getNavigator().gpu.requestAdapter();return W1=[...t.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...t.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],W1}let $1;async function RF(){return $1!==void 0||($1=await(async()=>{const t=await S_(),e=E_();if(t&&e){const i=await wM(),n=CM();return i.filter(r=>n.includes(r))}else{if(t)return await wM();if(e)return CM()}return[]})()),$1}const iJ=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let K1;async function D_(){if(K1!==void 0)return K1;const t=await RF();return K1=[...iJ,...t],K1}const vbe=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let jm=null,nJ=class{constructor(){jm||(jm=URL.createObjectURL(new Blob([vbe],{type:"application/javascript"}))),this.worker=new Worker(jm)}};nJ.revokeObjectURL=function(){jm&&(URL.revokeObjectURL(jm),jm=null)};const BE={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function Tbe(t){Object.assign(BE,t)}let dy;const rJ={};function Ebe(t){return dy||(dy=new nJ().worker,dy.onmessage=e=>{const{success:i,url:n,textureOptions:r}=e.data;i||console.warn("Failed to load Basis texture",n),rJ[n](r)},dy.postMessage({type:"init",jsUrl:BE.jsUrl,wasmUrl:BE.wasmUrl,supportedTextures:t})),dy}function sJ(t,e){const i=Ebe(e);return new Promise(n=>{rJ[t]=n,i.postMessage({type:"load",url:t})})}const Sbe={extension:{type:me.LoadParser,priority:ba.High,name:"loadBasis"},name:"loadBasis",id:"basis",test(t){return Bo(t,[".basis"])},async load(t,e,i){const n=await D_(),r=await sJ(t,n),s=new w_(r);return Yh(s,i,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};function Abe(t,e){const i=t.getNumImages(),n=t.getNumLevels(0);if(!t.startTranscoding())throw new Error("startTranscoding failed");const s=[];for(let a=0;a<n;++a)for(let o=0;o<i;++o){const l=t.getImageTranscodedSizeInBytes(o,a,e),h=new Uint8Array(l);if(!t.transcodeImage(h,o,a,e,1,0))throw new Error("transcodeImage failed");s.push(h)}return s}const Cbe={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function wbe(t){const e=Cbe[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const Dbe={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},Rbe={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var PF=(t=>(t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",t))(PF||{}),MF=(t=>(t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",t))(MF||{});function Xr(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var na=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.R8G8B8=20]="R8G8B8",t[t.A8R8G8B8=21]="A8R8G8B8",t[t.X8R8G8B8=22]="X8R8G8B8",t[t.R5G6B5=23]="R5G6B5",t[t.X1R5G5B5=24]="X1R5G5B5",t[t.A1R5G5B5=25]="A1R5G5B5",t[t.A4R4G4B4=26]="A4R4G4B4",t[t.R3G3B2=27]="R3G3B2",t[t.A8=28]="A8",t[t.A8R3G3B2=29]="A8R3G3B2",t[t.X4R4G4B4=30]="X4R4G4B4",t[t.A2B10G10R10=31]="A2B10G10R10",t[t.A8B8G8R8=32]="A8B8G8R8",t[t.X8B8G8R8=33]="X8B8G8R8",t[t.G16R16=34]="G16R16",t[t.A2R10G10B10=35]="A2R10G10B10",t[t.A16B16G16R16=36]="A16B16G16R16",t[t.A8P8=40]="A8P8",t[t.P8=41]="P8",t[t.L8=50]="L8",t[t.A8L8=51]="A8L8",t[t.A4L4=52]="A4L4",t[t.V8U8=60]="V8U8",t[t.L6V5U5=61]="L6V5U5",t[t.X8L8V8U8=62]="X8L8V8U8",t[t.Q8W8V8U8=63]="Q8W8V8U8",t[t.V16U16=64]="V16U16",t[t.A2W10V10U10=67]="A2W10V10U10",t[t.Q16W16V16U16=110]="Q16W16V16U16",t[t.R16F=111]="R16F",t[t.G16R16F=112]="G16R16F",t[t.A16B16G16R16F=113]="A16B16G16R16F",t[t.R32F=114]="R32F",t[t.G32R32F=115]="G32R32F",t[t.A32B32G32R32F=116]="A32B32G32R32F",t[t.UYVY=Xr("UYVY")]="UYVY",t[t.R8G8_B8G8=Xr("RGBG")]="R8G8_B8G8",t[t.YUY2=Xr("YUY2")]="YUY2",t[t.D3DFMT_G8R8_G8B8=Xr("GRGB")]="D3DFMT_G8R8_G8B8",t[t.DXT1=Xr("DXT1")]="DXT1",t[t.DXT2=Xr("DXT2")]="DXT2",t[t.DXT3=Xr("DXT3")]="DXT3",t[t.DXT4=Xr("DXT4")]="DXT4",t[t.DXT5=Xr("DXT5")]="DXT5",t[t.ATI1=Xr("ATI1")]="ATI1",t[t.AT1N=Xr("AT1N")]="AT1N",t[t.ATI2=Xr("ATI2")]="ATI2",t[t.AT2N=Xr("AT2N")]="AT2N",t[t.BC4U=Xr("BC4U")]="BC4U",t[t.BC4S=Xr("BC4S")]="BC4S",t[t.BC5U=Xr("BC5U")]="BC5U",t[t.BC5S=Xr("BC5S")]="BC5S",t[t.DX10=Xr("DX10")]="DX10",t))(na||{});const DM={[na.DXT1]:"bc1-rgba-unorm",[na.DXT2]:"bc2-rgba-unorm",[na.DXT3]:"bc2-rgba-unorm",[na.DXT4]:"bc3-rgba-unorm",[na.DXT5]:"bc3-rgba-unorm",[na.ATI1]:"bc4-r-unorm",[na.BC4U]:"bc4-r-unorm",[na.BC4S]:"bc4-r-snorm",[na.ATI2]:"bc5-rg-unorm",[na.BC5U]:"bc5-rg-unorm",[na.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},ra={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},Xt={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:Dbe,HEADER_DX10_FIELDS:Rbe,DXGI_FORMAT:PF,D3D10_RESOURCE_DIMENSION:MF,D3DFMT:na},aJ={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function oJ(t,e){const{format:i,fourCC:n,width:r,height:s,dataOffset:a,mipmapCount:o}=Mbe(t);if(!e.includes(i))throw new Error(`Unsupported texture format: ${n} ${i}, supported: ${e}`);if(o<=1)return{format:i,width:r,height:s,resource:[new Uint8Array(t,a)],alphaMode:"no-premultiply-alpha"};const l=Pbe(i,r,s,a,o,t);return{format:i,width:r,height:s,resource:l,alphaMode:"no-premultiply-alpha"}}function Pbe(t,e,i,n,r,s){const a=[],o=aJ[t];let l=e,h=i,d=n;for(let p=0;p<r;++p){const g=Math.ceil(Math.max(4,l)/4)*4,y=Math.ceil(Math.max(4,h)/4)*4,v=o?g/4*y/4*o:l*h*4,S=new Uint8Array(s,d,v);a.push(S),d+=v,l=Math.max(l>>1,1),h=Math.max(h>>1,1)}return a}function Mbe(t){const e=new Uint32Array(t,0,Xt.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[Xt.HEADER_FIELDS.MAGIC]!==Xt.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const i=e[Xt.HEADER_FIELDS.HEIGHT],n=e[Xt.HEADER_FIELDS.WIDTH],r=Math.max(1,e[Xt.HEADER_FIELDS.MIPMAP_COUNT]),s=e[Xt.HEADER_FIELDS.PF_FLAGS],a=e[Xt.HEADER_FIELDS.FOURCC],o=Bbe(e,s,a,t),l=Xt.MAGIC_SIZE+Xt.HEADER_SIZE+(a===Xt.D3DFMT.DX10?Xt.HEADER_DX10_SIZE:0);return{format:o,fourCC:a,width:n,height:i,dataOffset:l,mipmapCount:r}}function Bbe(t,e,i,n){if(e&Xt.PIXEL_FORMAT_FLAGS.FOURCC){if(i===Xt.D3DFMT.DX10){const r=new Uint32Array(n,Xt.MAGIC_SIZE+Xt.HEADER_SIZE,Xt.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(r[Xt.HEADER_DX10_FIELDS.MISC_FLAG]===Xt.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(r[Xt.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===Xt.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const o=r[Xt.HEADER_DX10_FIELDS.DXGI_FORMAT];if(o in ra)return ra[o];throw new Error(`DDSParser cannot parse texture data with DXGI format ${o}`)}if(i in DM)return DM[i];throw new Error(`DDSParser cannot parse texture data with fourCC format ${i}`)}if(e&Xt.PIXEL_FORMAT_FLAGS.RGB||e&Xt.PIXEL_FORMAT_FLAGS.RGBA)return kbe(t);throw e&Xt.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&Xt.PIXEL_FORMAT_FLAGS.LUMINANCE||e&Xt.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&Xt.PIXEL_FORMAT_FLAGS.ALPHA||e&Xt.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function kbe(t){const e=t[Xt.HEADER_FIELDS.RGB_BITCOUNT],i=t[Xt.HEADER_FIELDS.R_BIT_MASK],n=t[Xt.HEADER_FIELDS.G_BIT_MASK],r=t[Xt.HEADER_FIELDS.B_BIT_MASK],s=t[Xt.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(i===255&&n===65280&&r===16711680&&s===4278190080)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(i===16711680&&n===65280&&r===255&&s===4278190080)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(i===1072693248&&n===1047552&&r===1023&&s===3221225472)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(i===65535&&n===4294901760&&r===0&&s===0)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(i===4294967295&&n===0&&r===0&&s===0)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(i===31744&&n===992&&r===31&&s===32768)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(i===63488&&n===2016&&r===31&&s===0)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(i===3840&&n===240&&r===15&&s===61440)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(i===255&&n===0&&r===0&&s===65280)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(i===65535&&n===0&&r===0&&s===0)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(i===255&&n===0&&r===0&&s===0)return ra[Xt.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${e}, rBitMask = ${i}, gBitMask = ${n}, aBitMask = ${s}`)}const Obe={extension:{type:me.LoadParser,priority:ba.High,name:"loadDDS"},name:"loadDDS",id:"dds",test(t){return Bo(t,[".dds"])},async load(t,e,i){const n=await D_(),s=await(await fetch(t)).arrayBuffer(),a=oJ(s,n),o=new w_(a);return Yh(o,i,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};var uJ=(t=>(t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGBA=6408]="RGBA",t[t.RGBA8UI=36220]="RGBA8UI",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8=32856]="RGBA8",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(uJ||{});const Fbe={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},Ibe=[171,75,84,88,32,49,49,187,13,10,26,10],Lbe={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Nbe=64,Ube=67305985,Gbe={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},Hbe={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},zbe={32819:2,32820:2,33635:2},Vbe={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Zn={FILE_HEADER_SIZE:Nbe,FILE_IDENTIFIER:Ibe,FORMATS_TO_COMPONENTS:Hbe,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Vbe,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:Fbe,FIELDS:Lbe,TYPES_TO_BYTES_PER_COMPONENT:Gbe,TYPES_TO_BYTES_PER_PIXEL:zbe,ENDIANNESS:Ube};function lJ(t,e){const i=new DataView(t);if(!qbe(i))throw new Error("Invalid KTX identifier in header");const{littleEndian:n,glType:r,glFormat:s,glInternalFormat:a,pixelWidth:o,pixelHeight:l,numberOfMipmapLevels:h,offset:d}=Ybe(i),p=Zn.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[a];if(!p)throw new Error(`Unknown texture format ${a}`);if(!e.includes(p))throw new Error(`Unsupported texture format: ${p}, supportedFormats: ${e}`);const g=Xbe(r,s,a),y=jbe(i,r,g,o,l,d,h,n);return{format:p,width:o,height:l,resource:y,alphaMode:"no-premultiply-alpha"}}function jbe(t,e,i,n,r,s,a,o){const l=n+3&-4,h=r+3&-4;let d=n*r;e===0&&(d=l*h);let p=d*i,g=n,y=r,v=l,S=h,T=s;const A=new Array(a);for(let D=0;D<a;D++){const R=t.getUint32(T,o);let B=T+4;A[D]=new Uint8Array(t.buffer,B,p),B+=p,T+=R+4,T=T%4!==0?T+4-T%4:T,g=g>>1||1,y=y>>1||1,v=g+4-1&-4,S=y+4-1&-4,p=v*S*i}return A}function Xbe(t,e,i){let n=Zn.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[i];if(t!==0&&(Zn.TYPES_TO_BYTES_PER_COMPONENT[t]?n=Zn.TYPES_TO_BYTES_PER_COMPONENT[t]*Zn.FORMATS_TO_COMPONENTS[e]:n=Zn.TYPES_TO_BYTES_PER_PIXEL[t]),n===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return n}function Ybe(t){const e=t.getUint32(Zn.FIELDS.ENDIANNESS,!0)===Zn.ENDIANNESS,i=t.getUint32(Zn.FIELDS.GL_TYPE,e),n=t.getUint32(Zn.FIELDS.GL_FORMAT,e),r=t.getUint32(Zn.FIELDS.GL_INTERNAL_FORMAT,e),s=t.getUint32(Zn.FIELDS.PIXEL_WIDTH,e),a=t.getUint32(Zn.FIELDS.PIXEL_HEIGHT,e)||1,o=t.getUint32(Zn.FIELDS.PIXEL_DEPTH,e)||1,l=t.getUint32(Zn.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,h=t.getUint32(Zn.FIELDS.NUMBER_OF_FACES,e),d=t.getUint32(Zn.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),p=t.getUint32(Zn.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(a===0||o!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(l!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:i,glFormat:n,glInternalFormat:r,pixelWidth:s,pixelHeight:a,numberOfMipmapLevels:d,offset:Zn.FILE_HEADER_SIZE+p}}function qbe(t){for(let e=0;e<Zn.FILE_IDENTIFIER.length;e++)if(t.getUint8(e)!==Zn.FILE_IDENTIFIER[e])return!1;return!0}const Wbe={extension:{type:me.LoadParser,priority:ba.High,name:"loadKTX"},name:"loadKTX",id:"ktx",test(t){return Bo(t,".ktx")},async load(t,e,i){const n=await D_(),s=await(await fetch(t)).arrayBuffer(),a=lJ(s,n),o=new w_(a);return Yh(o,i,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},$be=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let Xm=null;class cJ{constructor(){Xm||(Xm=URL.createObjectURL(new Blob([$be],{type:"application/javascript"}))),this.worker=new Worker(Xm)}}cJ.revokeObjectURL=function(){Xm&&(URL.revokeObjectURL(Xm),Xm=null)};const kE={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function Kbe(t){Object.assign(kE,t)}let fy;const hJ={};function Qbe(t){return fy||(fy=new cJ().worker,fy.onmessage=e=>{const{success:i,url:n,textureOptions:r}=e.data;i||console.warn("Failed to load KTX texture",n),hJ[n](r)},fy.postMessage({type:"init",jsUrl:kE.jsUrl,wasmUrl:kE.wasmUrl,supportedTextures:t})),fy}function dJ(t,e){const i=Qbe(e);return new Promise(n=>{hJ[t]=n,i.postMessage({type:"load",url:t})})}const Zbe={extension:{type:me.LoadParser,priority:ba.High,name:"loadKTX2"},name:"loadKTX2",id:"ktx2",test(t){return Bo(t,".ktx2")},async load(t,e,i){const n=await D_(),r=await dJ(t,n),s=new w_(r);return Yh(s,i,t)},async unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},DD={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:j5},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:j5}};function Jbe(t){const e=t.format;if(DD[e]){const i=DD[e].convertFunction,n=t.resource;for(let r=0;r<n.length;r++)n[r]=i(n[r]);t.format=DD[e].convertedFormat}}function j5(t){const e=t.byteLength/3,i=new Uint32Array(e);for(let n=0;n<e;++n)i[n]=t[n*3]+(t[n*3+1]<<8)+(t[n*3+2]<<16)+4278190080;return new Uint8Array(i.buffer)}function eye(t){const e=[];for(let i=0;i<t.numLevels;i++){const n=t.getImageData(i,0,0),r=new Uint8Array(n.byteLength);r.set(n),e.push(r)}return e}const tye={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function fJ(t){const e=tye[t];if(e)return e;throw new Error(`Unsupported glInternalFormat: ${t}`)}const iye={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function pJ(t){const e=iye[t];if(e)return e;throw new Error(`Unsupported VkFormat: ${t}`)}function nye(t){return t.classId===2?pJ(t.vkFormat):fJ(t.glInternalformat)}const rye={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function sye(t){const e=rye[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const OE=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],aye={extension:me.ResolveParser,test:t=>Bo(t,[".ktx",".ktx2",".dds"]),parse:t=>{let e;const i=t.split(".");if(i.length>2){const n=i[i.length-2];OE.includes(n)&&(e=n)}else e=i[i.length-1];return{resolution:parseFloat(Xh.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e,src:t}}};let Q1;const oye={extension:{type:me.DetectionParser,priority:2},test:async()=>!!(await S_()||E_()),add:async t=>{const e=await RF();return Q1=uye(e),[...Q1,...t]},remove:async t=>Q1?t.filter(e=>!(e in Q1)):t};function uye(t){const e=["basis"],i={};return t.forEach(n=>{const r=n.split("-")[0];r&&!i[r]&&(i[r]=!0,e.push(r))}),e.sort((n,r)=>{const s=OE.indexOf(n),a=OE.indexOf(r);return s===-1?1:a===-1?-1:s-a}),e}const lye=new Ir,RM=class{cull(e,i,n=!0){this._cullRecursive(e,i,n)}_cullRecursive(e,i,n=!0){if(e.cullable&&e.measurable&&e.includeInBuild){const r=e.cullArea??v_(e,n,lye);e.culled=r.x>=i.x+i.width||r.y>=i.y+i.height||r.x+r.width<=i.x||r.y+r.height<=i.y}else e.culled=!1;if(!(!e.cullableChildren||e.culled||!e.renderable||!e.measurable||!e.includeInBuild))for(let r=0;r<e.children.length;r++)this._cullRecursive(e.children[r],i,n)}};RM.shared=new RM;let mJ=RM;class gJ{static init(e){this._renderRef=this.render.bind(this),this.render=()=>{const i=e?.culler?.updateTransform!==!0;mJ.shared.cull(this.stage,this.renderer.screen,i),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}gJ.extension={priority:10,type:me.Application,name:"culler"};class cye extends Tl{constructor(e={}){const{element:i,anchor:n,...r}=e;super({label:"DOMContainer",...r}),this.renderPipeId="dom",this.batched=!1,this._anchor=new tn(0,0),n&&(this.anchor=n),this.element=e.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set element(e){this._element!==e&&(this._element=e,this.onViewUpdate())}get element(){return this._element}updateBounds(){const e=this._bounds,i=this._element;if(!i){e.minX=0,e.minY=0,e.maxX=0,e.maxY=0;return}const{offsetWidth:n,offsetHeight:r}=i;e.minX=0,e.maxX=n,e.minY=0,e.maxY=r}destroy(e=!1){super.destroy(e),this._element?.parentNode?.removeChild(this._element),this._element=null,this._anchor=null}}class bJ{constructor(e){this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new tF({domElement:this._domElement,renderer:this._renderer})}addRenderable(e,i){this._attachedDomElements.includes(e)||this._attachedDomElements.push(e)}updateRenderable(e){}validateRenderable(e){return!0}postrender(){const e=this._attachedDomElements;if(e.length===0){this._domElement.remove();return}this._canvasObserver.ensureAttached();for(let i=0;i<e.length;i++){const n=e[i],r=n.element;if(!n.parent||n.globalDisplayStatus<7)r?.remove(),e.splice(i,1),i--;else{this._domElement.contains(r)||(r.style.position="absolute",r.style.pointerEvents="auto",this._domElement.appendChild(r));const s=n.worldTransform,a=n._anchor,o=n.width*a.x,l=n.height*a.y;r.style.transformOrigin=`${o}px ${l}px`,r.style.transform=`matrix(${s.a}, ${s.b}, ${s.c}, ${s.d}, ${s.tx-o}, ${s.ty-l})`,r.style.opacity=n.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++)this._attachedDomElements[e].element?.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}}bJ.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"dom"};var py={},Jl={},Ud={},X5;function eA(){if(X5)return Ud;X5=1;function t(s,a,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,a);for(var l=0;l<s.length;l++)if(Object.prototype.hasOwnProperty.call(s,l)){var h=s[l];if(a.call(void 0,h,l,s))return h}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function i(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s}var n=e({HTML:"text/html",isHTML:function(s){return s===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Ud.assign=i,Ud.find=t,Ud.freeze=e,Ud.MIME_TYPE=n,Ud.NAMESPACE=r,Ud}var Y5;function yJ(){if(Y5)return Jl;Y5=1;var t=eA(),e=t.find,i=t.NAMESPACE;function n(V){return V!==""}function r(V){return V?V.split(/[\t\n\f\r ]+/).filter(n):[]}function s(V,Y){return V.hasOwnProperty(Y)||(V[Y]=!0),V}function a(V){if(!V)return[];var Y=r(V);return Object.keys(Y.reduce(s,{}))}function o(V){return function(Y){return V&&V.indexOf(Y)!==-1}}function l(V,Y){for(var M in V)Object.prototype.hasOwnProperty.call(V,M)&&(Y[M]=V[M])}function h(V,Y){var M=V.prototype;if(!(M instanceof Y)){let F=function(){};F.prototype=Y.prototype,F=new F,l(M,F),V.prototype=M=F}M.constructor!=V&&(typeof V!="function"&&console.error("unknown Class:"+V),M.constructor=V)}var d={},p=d.ELEMENT_NODE=1,g=d.ATTRIBUTE_NODE=2,y=d.TEXT_NODE=3,v=d.CDATA_SECTION_NODE=4,S=d.ENTITY_REFERENCE_NODE=5,T=d.ENTITY_NODE=6,A=d.PROCESSING_INSTRUCTION_NODE=7,D=d.COMMENT_NODE=8,R=d.DOCUMENT_NODE=9,B=d.DOCUMENT_TYPE_NODE=10,z=d.DOCUMENT_FRAGMENT_NODE=11,L=d.NOTATION_NODE=12,H={},te={};H.INDEX_SIZE_ERR=(te[1]="Index size error",1),H.DOMSTRING_SIZE_ERR=(te[2]="DOMString size error",2);var j=H.HIERARCHY_REQUEST_ERR=(te[3]="Hierarchy request error",3);H.WRONG_DOCUMENT_ERR=(te[4]="Wrong document",4),H.INVALID_CHARACTER_ERR=(te[5]="Invalid character",5),H.NO_DATA_ALLOWED_ERR=(te[6]="No data allowed",6),H.NO_MODIFICATION_ALLOWED_ERR=(te[7]="No modification allowed",7);var O=H.NOT_FOUND_ERR=(te[8]="Not found",8);H.NOT_SUPPORTED_ERR=(te[9]="Not supported",9);var q=H.INUSE_ATTRIBUTE_ERR=(te[10]="Attribute in use",10);H.INVALID_STATE_ERR=(te[11]="Invalid state",11),H.SYNTAX_ERR=(te[12]="Syntax error",12),H.INVALID_MODIFICATION_ERR=(te[13]="Invalid modification",13),H.NAMESPACE_ERR=(te[14]="Invalid namespace",14),H.INVALID_ACCESS_ERR=(te[15]="Invalid access",15);function re(V,Y){if(Y instanceof Error)var M=Y;else M=this,Error.call(this,te[V]),this.message=te[V],Error.captureStackTrace&&Error.captureStackTrace(this,re);return M.code=V,Y&&(this.message=this.message+": "+Y),M}re.prototype=Error.prototype,l(H,re);function ae(){}ae.prototype={length:0,item:function(V){return V>=0&&V<this.length?this[V]:null},toString:function(V,Y){for(var M=[],F=0;F<this.length;F++)rn(this[F],M,V,Y);return M.join("")},filter:function(V){return Array.prototype.filter.call(this,V)},indexOf:function(V){return Array.prototype.indexOf.call(this,V)}};function fe(V,Y){this._node=V,this._refresh=Y,Te(this)}function Te(V){var Y=V._node._inc||V._node.ownerDocument._inc;if(V._inc!==Y){var M=V._refresh(V._node);if(Hr(V,"length",M.length),!V.$$length||M.length<V.$$length)for(var F=M.length;F in V;F++)Object.prototype.hasOwnProperty.call(V,F)&&delete V[F];l(M,V),V._inc=Y}}fe.prototype.item=function(V){return Te(this),this[V]||null},h(fe,ae);function $(){}function se(V,Y){for(var M=V.length;M--;)if(V[M]===Y)return M}function we(V,Y,M,F){if(F?Y[se(Y,F)]=M:Y[Y.length++]=M,V){M.ownerElement=V;var Z=V.ownerDocument;Z&&(F&&Ye(Z,V,F),Ve(Z,V,M))}}function _e(V,Y,M){var F=se(Y,M);if(F>=0){for(var Z=Y.length-1;F<Z;)Y[F]=Y[++F];if(Y.length=Z,V){var ye=V.ownerDocument;ye&&(Ye(ye,V,M),M.ownerElement=null)}}else throw new re(O,new Error(V.tagName+"@"+M))}$.prototype={length:0,item:ae.prototype.item,getNamedItem:function(V){for(var Y=this.length;Y--;){var M=this[Y];if(M.nodeName==V)return M}},setNamedItem:function(V){var Y=V.ownerElement;if(Y&&Y!=this._ownerElement)throw new re(q);var M=this.getNamedItem(V.nodeName);return we(this._ownerElement,this,V,M),M},setNamedItemNS:function(V){var Y=V.ownerElement,M;if(Y&&Y!=this._ownerElement)throw new re(q);return M=this.getNamedItemNS(V.namespaceURI,V.localName),we(this._ownerElement,this,V,M),M},removeNamedItem:function(V){var Y=this.getNamedItem(V);return _e(this._ownerElement,this,Y),Y},removeNamedItemNS:function(V,Y){var M=this.getNamedItemNS(V,Y);return _e(this._ownerElement,this,M),M},getNamedItemNS:function(V,Y){for(var M=this.length;M--;){var F=this[M];if(F.localName==Y&&F.namespaceURI==V)return F}return null}};function J(){}J.prototype={hasFeature:function(V,Y){return!0},createDocument:function(V,Y,M){var F=new Ge;if(F.implementation=this,F.childNodes=new ae,F.doctype=M||null,M&&F.appendChild(M),Y){var Z=F.createElementNS(V,Y);F.appendChild(Z)}return F},createDocumentType:function(V,Y,M){var F=new bt;return F.name=V,F.nodeName=V,F.publicId=Y||"",F.systemId=M||"",F}};function ie(){}ie.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(V,Y){return Nn(this,V,Y)},replaceChild:function(V,Y){Nn(this,V,Y,Cn),Y&&this.removeChild(Y)},removeChild:function(V){return pt(this,V)},appendChild:function(V){return this.insertBefore(V,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(V){return Gr(this.ownerDocument||this,this,V)},normalize:function(){for(var V=this.firstChild;V;){var Y=V.nextSibling;Y&&Y.nodeType==y&&V.nodeType==y?(this.removeChild(Y),V.appendData(Y.data)):(V.normalize(),V=Y)}},isSupported:function(V,Y){return this.ownerDocument.implementation.hasFeature(V,Y)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(V){for(var Y=this;Y;){var M=Y._nsMap;if(M){for(var F in M)if(Object.prototype.hasOwnProperty.call(M,F)&&M[F]===V)return F}Y=Y.nodeType==g?Y.ownerDocument:Y.parentNode}return null},lookupNamespaceURI:function(V){for(var Y=this;Y;){var M=Y._nsMap;if(M&&Object.prototype.hasOwnProperty.call(M,V))return M[V];Y=Y.nodeType==g?Y.ownerDocument:Y.parentNode}return null},isDefaultNamespace:function(V){var Y=this.lookupPrefix(V);return Y==null}};function be(V){return V=="<"&&"&lt;"||V==">"&&"&gt;"||V=="&"&&"&amp;"||V=='"'&&"&quot;"||"&#"+V.charCodeAt()+";"}l(d,ie),l(d,ie.prototype);function ee(V,Y){if(Y(V))return!0;if(V=V.firstChild)do if(ee(V,Y))return!0;while(V=V.nextSibling)}function Ge(){this.ownerDocument=this}function Ve(V,Y,M){V&&V._inc++;var F=M.namespaceURI;F===i.XMLNS&&(Y._nsMap[M.prefix?M.localName:""]=M.value)}function Ye(V,Y,M,F){V&&V._inc++;var Z=M.namespaceURI;Z===i.XMLNS&&delete Y._nsMap[M.prefix?M.localName:""]}function lt(V,Y,M){if(V&&V._inc){V._inc++;var F=Y.childNodes;if(M)F[F.length++]=M;else{for(var Z=Y.firstChild,ye=0;Z;)F[ye++]=Z,Z=Z.nextSibling;F.length=ye,delete F[F.length]}}}function pt(V,Y){var M=Y.previousSibling,F=Y.nextSibling;return M?M.nextSibling=F:V.firstChild=F,F?F.previousSibling=M:V.lastChild=M,Y.parentNode=null,Y.previousSibling=null,Y.nextSibling=null,lt(V.ownerDocument,V),Y}function tt(V){return V&&(V.nodeType===ie.DOCUMENT_NODE||V.nodeType===ie.DOCUMENT_FRAGMENT_NODE||V.nodeType===ie.ELEMENT_NODE)}function $t(V){return V&&(Rt(V)||Qt(V)||li(V)||V.nodeType===ie.DOCUMENT_FRAGMENT_NODE||V.nodeType===ie.COMMENT_NODE||V.nodeType===ie.PROCESSING_INSTRUCTION_NODE)}function li(V){return V&&V.nodeType===ie.DOCUMENT_TYPE_NODE}function Rt(V){return V&&V.nodeType===ie.ELEMENT_NODE}function Qt(V){return V&&V.nodeType===ie.TEXT_NODE}function Bt(V,Y){var M=V.childNodes||[];if(e(M,Rt)||li(Y))return!1;var F=e(M,li);return!(Y&&F&&M.indexOf(F)>M.indexOf(Y))}function Nt(V,Y){var M=V.childNodes||[];function F(ye){return Rt(ye)&&ye!==Y}if(e(M,F))return!1;var Z=e(M,li);return!(Y&&Z&&M.indexOf(Z)>M.indexOf(Y))}function fi(V,Y,M){if(!tt(V))throw new re(j,"Unexpected parent node type "+V.nodeType);if(M&&M.parentNode!==V)throw new re(O,"child not in parent");if(!$t(Y)||li(Y)&&V.nodeType!==ie.DOCUMENT_NODE)throw new re(j,"Unexpected node type "+Y.nodeType+" for parent node type "+V.nodeType)}function Si(V,Y,M){var F=V.childNodes||[],Z=Y.childNodes||[];if(Y.nodeType===ie.DOCUMENT_FRAGMENT_NODE){var ye=Z.filter(Rt);if(ye.length>1||e(Z,Qt))throw new re(j,"More than one element or text in fragment");if(ye.length===1&&!Bt(V,M))throw new re(j,"Element in fragment can not be inserted before doctype")}if(Rt(Y)&&!Bt(V,M))throw new re(j,"Only one element can be added and only after doctype");if(li(Y)){if(e(F,li))throw new re(j,"Only one doctype is allowed");var Le=e(F,Rt);if(M&&F.indexOf(Le)<F.indexOf(M))throw new re(j,"Doctype can only be inserted before an element");if(!M&&Le)throw new re(j,"Doctype can not be appended since element is present")}}function Cn(V,Y,M){var F=V.childNodes||[],Z=Y.childNodes||[];if(Y.nodeType===ie.DOCUMENT_FRAGMENT_NODE){var ye=Z.filter(Rt);if(ye.length>1||e(Z,Qt))throw new re(j,"More than one element or text in fragment");if(ye.length===1&&!Nt(V,M))throw new re(j,"Element in fragment can not be inserted before doctype")}if(Rt(Y)&&!Nt(V,M))throw new re(j,"Only one element can be added and only after doctype");if(li(Y)){if(e(F,function(qt){return li(qt)&&qt!==M}))throw new re(j,"Only one doctype is allowed");var Le=e(F,Rt);if(M&&F.indexOf(Le)<F.indexOf(M))throw new re(j,"Doctype can only be inserted before an element")}}function Nn(V,Y,M,F){fi(V,Y,M),V.nodeType===ie.DOCUMENT_NODE&&(F||Si)(V,Y,M);var Z=Y.parentNode;if(Z&&Z.removeChild(Y),Y.nodeType===z){var ye=Y.firstChild;if(ye==null)return Y;var Le=Y.lastChild}else ye=Le=Y;var at=M?M.previousSibling:V.lastChild;ye.previousSibling=at,Le.nextSibling=M,at?at.nextSibling=ye:V.firstChild=ye,M==null?V.lastChild=Le:M.previousSibling=Le;do{ye.parentNode=V;var qt=V.ownerDocument||V;nn(ye,qt)}while(ye!==Le&&(ye=ye.nextSibling));return lt(V.ownerDocument||V,V),Y.nodeType==z&&(Y.firstChild=Y.lastChild=null),Y}function nn(V,Y){if(V.ownerDocument!==Y){if(V.ownerDocument=Y,V.nodeType===p&&V.attributes)for(var M=0;M<V.attributes.length;M++){var F=V.attributes.item(M);F&&(F.ownerDocument=Y)}for(var Z=V.firstChild;Z;)nn(Z,Y),Z=Z.nextSibling}}function ci(V,Y){Y.parentNode&&Y.parentNode.removeChild(Y),Y.parentNode=V,Y.previousSibling=V.lastChild,Y.nextSibling=null,Y.previousSibling?Y.previousSibling.nextSibling=Y:V.firstChild=Y,V.lastChild=Y,lt(V.ownerDocument,V,Y);var M=V.ownerDocument||V;return nn(Y,M),Y}Ge.prototype={nodeName:"#document",nodeType:R,doctype:null,documentElement:null,_inc:1,insertBefore:function(V,Y){if(V.nodeType==z){for(var M=V.firstChild;M;){var F=M.nextSibling;this.insertBefore(M,Y),M=F}return V}return Nn(this,V,Y),nn(V,this),this.documentElement===null&&V.nodeType===p&&(this.documentElement=V),V},removeChild:function(V){return this.documentElement==V&&(this.documentElement=null),pt(this,V)},replaceChild:function(V,Y){Nn(this,V,Y,Cn),nn(V,this),Y&&this.removeChild(Y),Rt(V)&&(this.documentElement=V)},importNode:function(V,Y){return _a(this,V,Y)},getElementById:function(V){var Y=null;return ee(this.documentElement,function(M){if(M.nodeType==p&&M.getAttribute("id")==V)return Y=M,!0}),Y},getElementsByClassName:function(V){var Y=a(V);return new fe(this,function(M){var F=[];return Y.length>0&&ee(M.documentElement,function(Z){if(Z!==M&&Z.nodeType===p){var ye=Z.getAttribute("class");if(ye){var Le=V===ye;if(!Le){var at=a(ye);Le=Y.every(o(at))}Le&&F.push(Z)}}}),F})},createElement:function(V){var Y=new kt;Y.ownerDocument=this,Y.nodeName=V,Y.tagName=V,Y.localName=V,Y.childNodes=new ae;var M=Y.attributes=new $;return M._ownerElement=Y,Y},createDocumentFragment:function(){var V=new pr;return V.ownerDocument=this,V.childNodes=new ae,V},createTextNode:function(V){var Y=new Ms;return Y.ownerDocument=this,Y.appendData(V),Y},createComment:function(V){var Y=new Be;return Y.ownerDocument=this,Y.appendData(V),Y},createCDATASection:function(V){var Y=new We;return Y.ownerDocument=this,Y.appendData(V),Y},createProcessingInstruction:function(V,Y){var M=new cn;return M.ownerDocument=this,M.tagName=M.nodeName=M.target=V,M.nodeValue=M.data=Y,M},createAttribute:function(V){var Y=new Di;return Y.ownerDocument=this,Y.name=V,Y.nodeName=V,Y.localName=V,Y.specified=!0,Y},createEntityReference:function(V){var Y=new Yn;return Y.ownerDocument=this,Y.nodeName=V,Y},createElementNS:function(V,Y){var M=new kt,F=Y.split(":"),Z=M.attributes=new $;return M.childNodes=new ae,M.ownerDocument=this,M.nodeName=Y,M.tagName=Y,M.namespaceURI=V,F.length==2?(M.prefix=F[0],M.localName=F[1]):M.localName=Y,Z._ownerElement=M,M},createAttributeNS:function(V,Y){var M=new Di,F=Y.split(":");return M.ownerDocument=this,M.nodeName=Y,M.name=Y,M.namespaceURI=V,M.specified=!0,F.length==2?(M.prefix=F[0],M.localName=F[1]):M.localName=Y,M}},h(Ge,ie);function kt(){this._nsMap={}}kt.prototype={nodeType:p,hasAttribute:function(V){return this.getAttributeNode(V)!=null},getAttribute:function(V){var Y=this.getAttributeNode(V);return Y&&Y.value||""},getAttributeNode:function(V){return this.attributes.getNamedItem(V)},setAttribute:function(V,Y){var M=this.ownerDocument.createAttribute(V);M.value=M.nodeValue=""+Y,this.setAttributeNode(M)},removeAttribute:function(V){var Y=this.getAttributeNode(V);Y&&this.removeAttributeNode(Y)},appendChild:function(V){return V.nodeType===z?this.insertBefore(V,null):ci(this,V)},setAttributeNode:function(V){return this.attributes.setNamedItem(V)},setAttributeNodeNS:function(V){return this.attributes.setNamedItemNS(V)},removeAttributeNode:function(V){return this.attributes.removeNamedItem(V.nodeName)},removeAttributeNS:function(V,Y){var M=this.getAttributeNodeNS(V,Y);M&&this.removeAttributeNode(M)},hasAttributeNS:function(V,Y){return this.getAttributeNodeNS(V,Y)!=null},getAttributeNS:function(V,Y){var M=this.getAttributeNodeNS(V,Y);return M&&M.value||""},setAttributeNS:function(V,Y,M){var F=this.ownerDocument.createAttributeNS(V,Y);F.value=F.nodeValue=""+M,this.setAttributeNode(F)},getAttributeNodeNS:function(V,Y){return this.attributes.getNamedItemNS(V,Y)},getElementsByTagName:function(V){return new fe(this,function(Y){var M=[];return ee(Y,function(F){F!==Y&&F.nodeType==p&&(V==="*"||F.tagName==V)&&M.push(F)}),M})},getElementsByTagNameNS:function(V,Y){return new fe(this,function(M){var F=[];return ee(M,function(Z){Z!==M&&Z.nodeType===p&&(V==="*"||Z.namespaceURI===V)&&(Y==="*"||Z.localName==Y)&&F.push(Z)}),F})}},Ge.prototype.getElementsByTagName=kt.prototype.getElementsByTagName,Ge.prototype.getElementsByTagNameNS=kt.prototype.getElementsByTagNameNS,h(kt,ie);function Di(){}Di.prototype.nodeType=g,h(Di,ie);function Ni(){}Ni.prototype={data:"",substringData:function(V,Y){return this.data.substring(V,V+Y)},appendData:function(V){V=this.data+V,this.nodeValue=this.data=V,this.length=V.length},insertData:function(V,Y){this.replaceData(V,0,Y)},appendChild:function(V){throw new Error(te[j])},deleteData:function(V,Y){this.replaceData(V,Y,"")},replaceData:function(V,Y,M){var F=this.data.substring(0,V),Z=this.data.substring(V+Y);M=F+M+Z,this.nodeValue=this.data=M,this.length=M.length}},h(Ni,ie);function Ms(){}Ms.prototype={nodeName:"#text",nodeType:y,splitText:function(V){var Y=this.data,M=Y.substring(V);Y=Y.substring(0,V),this.data=this.nodeValue=Y,this.length=Y.length;var F=this.ownerDocument.createTextNode(M);return this.parentNode&&this.parentNode.insertBefore(F,this.nextSibling),F}},h(Ms,Ni);function Be(){}Be.prototype={nodeName:"#comment",nodeType:D},h(Be,Ni);function We(){}We.prototype={nodeName:"#cdata-section",nodeType:v},h(We,Ni);function bt(){}bt.prototype.nodeType=B,h(bt,ie);function Ut(){}Ut.prototype.nodeType=L,h(Ut,ie);function pi(){}pi.prototype.nodeType=T,h(pi,ie);function Yn(){}Yn.prototype.nodeType=S,h(Yn,ie);function pr(){}pr.prototype.nodeName="#document-fragment",pr.prototype.nodeType=z,h(pr,ie);function cn(){}cn.prototype.nodeType=A,h(cn,ie);function Xi(){}Xi.prototype.serializeToString=function(V,Y,M){return qn.call(V,Y,M)},ie.prototype.toString=qn;function qn(V,Y){var M=[],F=this.nodeType==9&&this.documentElement||this,Z=F.prefix,ye=F.namespaceURI;if(ye&&Z==null){var Z=F.lookupPrefix(ye);if(Z==null)var Le=[{namespace:ye,prefix:null}]}return rn(this,M,V,Y,Le),M.join("")}function bi(V,Y,M){var F=V.prefix||"",Z=V.namespaceURI;if(!Z||F==="xml"&&Z===i.XML||Z===i.XMLNS)return!1;for(var ye=M.length;ye--;){var Le=M[ye];if(Le.prefix===F)return Le.namespace!==Z}return!0}function Jr(V,Y,M){V.push(" ",Y,'="',M.replace(/[<>&"\t\n\r]/g,be),'"')}function rn(V,Y,M,F,Z){if(Z||(Z=[]),F)if(V=F(V),V){if(typeof V=="string"){Y.push(V);return}}else return;switch(V.nodeType){case p:var ye=V.attributes,Le=ye.length,Gt=V.firstChild,at=V.tagName;M=i.isHTML(V.namespaceURI)||M;var qt=at;if(!M&&!V.prefix&&V.namespaceURI){for(var zt,vi=0;vi<ye.length;vi++)if(ye.item(vi).name==="xmlns"){zt=ye.item(vi).value;break}if(!zt)for(var ot=Z.length-1;ot>=0;ot--){var Un=Z[ot];if(Un.prefix===""&&Un.namespace===V.namespaceURI){zt=Un.namespace;break}}if(zt!==V.namespaceURI)for(var ot=Z.length-1;ot>=0;ot--){var Un=Z[ot];if(Un.namespace===V.namespaceURI){Un.prefix&&(qt=Un.prefix+":"+at);break}}}Y.push("<",qt);for(var zr=0;zr<Le;zr++){var Pn=ye.item(zr);Pn.prefix=="xmlns"?Z.push({prefix:Pn.localName,namespace:Pn.value}):Pn.nodeName=="xmlns"&&Z.push({prefix:"",namespace:Pn.value})}for(var zr=0;zr<Le;zr++){var Pn=ye.item(zr);if(bi(Pn,M,Z)){var mr=Pn.prefix||"",yn=Pn.namespaceURI;Jr(Y,mr?"xmlns:"+mr:"xmlns",yn),Z.push({prefix:mr,namespace:yn})}rn(Pn,Y,M,F,Z)}if(at===qt&&bi(V,M,Z)){var mr=V.prefix||"",yn=V.namespaceURI;Jr(Y,mr?"xmlns:"+mr:"xmlns",yn),Z.push({prefix:mr,namespace:yn})}if(Gt||M&&!/^(?:meta|link|img|br|hr|input)$/i.test(at)){if(Y.push(">"),M&&/^script$/i.test(at))for(;Gt;)Gt.data?Y.push(Gt.data):rn(Gt,Y,M,F,Z.slice()),Gt=Gt.nextSibling;else for(;Gt;)rn(Gt,Y,M,F,Z.slice()),Gt=Gt.nextSibling;Y.push("</",qt,">")}else Y.push("/>");return;case R:case z:for(var Gt=V.firstChild;Gt;)rn(Gt,Y,M,F,Z.slice()),Gt=Gt.nextSibling;return;case g:return Jr(Y,V.name,V.value);case y:return Y.push(V.data.replace(/[<&>]/g,be));case v:return Y.push("<![CDATA[",V.data,"]]>");case D:return Y.push("<!--",V.data,"-->");case B:var hn=V.publicId,or=V.systemId;if(Y.push("<!DOCTYPE ",V.name),hn)Y.push(" PUBLIC ",hn),or&&or!="."&&Y.push(" ",or),Y.push(">");else if(or&&or!=".")Y.push(" SYSTEM ",or,">");else{var va=V.internalSubset;va&&Y.push(" [",va,"]"),Y.push(">")}return;case A:return Y.push("<?",V.target," ",V.data,"?>");case S:return Y.push("&",V.nodeName,";");default:Y.push("??",V.nodeName)}}function _a(V,Y,M){var F;switch(Y.nodeType){case p:F=Y.cloneNode(!1),F.ownerDocument=V;case z:break;case g:M=!0;break}if(F||(F=Y.cloneNode(!1)),F.ownerDocument=V,F.parentNode=null,M)for(var Z=Y.firstChild;Z;)F.appendChild(_a(V,Z,M)),Z=Z.nextSibling;return F}function Gr(V,Y,M){var F=new Y.constructor;for(var Z in Y)if(Object.prototype.hasOwnProperty.call(Y,Z)){var ye=Y[Z];typeof ye!="object"&&ye!=F[Z]&&(F[Z]=ye)}switch(Y.childNodes&&(F.childNodes=new ae),F.ownerDocument=V,F.nodeType){case p:var Le=Y.attributes,at=F.attributes=new $,qt=Le.length;at._ownerElement=F;for(var zt=0;zt<qt;zt++)F.setAttributeNode(Gr(V,Le.item(zt),!0));break;case g:M=!0}if(M)for(var vi=Y.firstChild;vi;)F.appendChild(Gr(V,vi,M)),vi=vi.nextSibling;return F}function Hr(V,Y,M){V[Y]=M}try{if(Object.defineProperty){let V=function(Y){switch(Y.nodeType){case p:case z:var M=[];for(Y=Y.firstChild;Y;)Y.nodeType!==7&&Y.nodeType!==8&&M.push(V(Y)),Y=Y.nextSibling;return M.join("");default:return Y.nodeValue}};Object.defineProperty(fe.prototype,"length",{get:function(){return Te(this),this.$$length}}),Object.defineProperty(ie.prototype,"textContent",{get:function(){return V(this)},set:function(Y){switch(this.nodeType){case p:case z:for(;this.firstChild;)this.removeChild(this.firstChild);(Y||String(Y))&&this.appendChild(this.ownerDocument.createTextNode(Y));break;default:this.data=Y,this.value=Y,this.nodeValue=Y}}}),Hr=function(Y,M,F){Y["$$"+M]=F}}}catch{}return Jl.DocumentType=bt,Jl.DOMException=re,Jl.DOMImplementation=J,Jl.Element=kt,Jl.Node=ie,Jl.NodeList=ae,Jl.XMLSerializer=Xi,Jl}var my={},RD={},q5;function hye(){return q5||(q5=1,(function(t){var e=eA().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES})(RD)),RD}var Z1={},W5;function dye(){if(W5)return Z1;W5=1;var t=eA().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+i.source+"*(?::"+e.source+i.source+"*)?$"),r=0,s=1,a=2,o=3,l=4,h=5,d=6,p=7;function g(j,O){this.message=j,this.locator=O,Error.captureStackTrace&&Error.captureStackTrace(this,g)}g.prototype=new Error,g.prototype.name=g.name;function y(){}y.prototype={parse:function(j,O,q){var re=this.domBuilder;re.startDocument(),B(O,O={}),v(j,O,q,re,this.errorHandler),re.endDocument()}};function v(j,O,q,re,ae){function fe(ci){if(ci>65535){ci-=65536;var kt=55296+(ci>>10),Di=56320+(ci&1023);return String.fromCharCode(kt,Di)}else return String.fromCharCode(ci)}function Te(ci){var kt=ci.slice(1,-1);return Object.hasOwnProperty.call(q,kt)?q[kt]:kt.charAt(0)==="#"?fe(parseInt(kt.substr(1).replace("x","0x"))):(ae.error("entity not found:"+ci),ci)}function $(ci){if(ci>Ge){var kt=j.substring(Ge,ci).replace(/&#?\w+;/g,Te);ie&&se(Ge),re.characters(kt,0,ci-Ge),Ge=ci}}function se(ci,kt){for(;ci>=_e&&(kt=J.exec(j));)we=kt.index,_e=we+kt[0].length,ie.lineNumber++;ie.columnNumber=ci-we+1}for(var we=0,_e=0,J=/.*(?:\r\n?|\n)|.*$/g,ie=re.locator,be=[{currentNSMap:O}],ee={},Ge=0;;){try{var Ve=j.indexOf("<",Ge);if(Ve<0){if(!j.substr(Ge).match(/^\s*$/)){var Ye=re.doc,lt=Ye.createTextNode(j.substr(Ge));Ye.appendChild(lt),re.currentElement=lt}return}switch(Ve>Ge&&$(Ve),j.charAt(Ve+1)){case"/":var fi=j.indexOf(">",Ve+3),pt=j.substring(Ve+2,fi).replace(/[ \t\n\r]+$/g,""),tt=be.pop();fi<0?(pt=j.substring(Ve+2).replace(/[\s<].*/,""),ae.error("end tag name: "+pt+" is not complete:"+tt.tagName),fi=Ve+1+pt.length):pt.match(/\s</)&&(pt=pt.replace(/[\s<].*/,""),ae.error("end tag name: "+pt+" maybe not complete"),fi=Ve+1+pt.length);var $t=tt.localNSMap,li=tt.tagName==pt,Rt=li||tt.tagName&&tt.tagName.toLowerCase()==pt.toLowerCase();if(Rt){if(re.endElement(tt.uri,tt.localName,pt),$t)for(var Qt in $t)Object.prototype.hasOwnProperty.call($t,Qt)&&re.endPrefixMapping(Qt);li||ae.fatalError("end tag name: "+pt+" is not match the current start tagName:"+tt.tagName)}else be.push(tt);fi++;break;case"?":ie&&se(Ve),fi=L(j,Ve,re);break;case"!":ie&&se(Ve),fi=z(j,Ve,re,ae);break;default:ie&&se(Ve);var Bt=new H,Nt=be[be.length-1].currentNSMap,fi=T(j,Ve,Bt,Nt,Te,ae),Si=Bt.length;if(!Bt.closed&&R(j,fi,Bt.tagName,ee)&&(Bt.closed=!0,q.nbsp||ae.warning("unclosed xml attribute")),ie&&Si){for(var Cn=S(ie,{}),Nn=0;Nn<Si;Nn++){var nn=Bt[Nn];se(nn.offset),nn.locator=S(ie,{})}re.locator=Cn,A(Bt,re,Nt)&&be.push(Bt),re.locator=ie}else A(Bt,re,Nt)&&be.push(Bt);t.isHTML(Bt.uri)&&!Bt.closed?fi=D(j,fi,Bt.tagName,Te,re):fi++}}catch(ci){if(ci instanceof g)throw ci;ae.error("element parse error: "+ci),fi=-1}fi>Ge?Ge=fi:$(Math.max(Ve,Ge)+1)}}function S(j,O){return O.lineNumber=j.lineNumber,O.columnNumber=j.columnNumber,O}function T(j,O,q,re,ae,fe){function Te(ie,be,ee){q.attributeNames.hasOwnProperty(ie)&&fe.fatalError("Attribute "+ie+" redefined"),q.addValue(ie,be.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ae),ee)}for(var $,se,we=++O,_e=r;;){var J=j.charAt(we);switch(J){case"=":if(_e===s)$=j.slice(O,we),_e=o;else if(_e===a)_e=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(_e===o||_e===s)if(_e===s&&(fe.warning('attribute value must after "="'),$=j.slice(O,we)),O=we+1,we=j.indexOf(J,O),we>0)se=j.slice(O,we),Te($,se,O-1),_e=h;else throw new Error("attribute value no end '"+J+"' match");else if(_e==l)se=j.slice(O,we),Te($,se,O),fe.warning('attribute "'+$+'" missed start quot('+J+")!!"),O=we+1,_e=h;else throw new Error('attribute value must after "="');break;case"/":switch(_e){case r:q.setTagName(j.slice(O,we));case h:case d:case p:_e=p,q.closed=!0;case l:case s:break;case a:q.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return fe.error("unexpected end of input"),_e==r&&q.setTagName(j.slice(O,we)),we;case">":switch(_e){case r:q.setTagName(j.slice(O,we));case h:case d:case p:break;case l:case s:se=j.slice(O,we),se.slice(-1)==="/"&&(q.closed=!0,se=se.slice(0,-1));case a:_e===a&&(se=$),_e==l?(fe.warning('attribute "'+se+'" missed quot(")!'),Te($,se,O)):((!t.isHTML(re[""])||!se.match(/^(?:disabled|checked|selected)$/i))&&fe.warning('attribute "'+se+'" missed value!! "'+se+'" instead!!'),Te(se,se,O));break;case o:throw new Error("attribute value missed!!")}return we;case"":J=" ";default:if(J<=" ")switch(_e){case r:q.setTagName(j.slice(O,we)),_e=d;break;case s:$=j.slice(O,we),_e=a;break;case l:var se=j.slice(O,we);fe.warning('attribute "'+se+'" missed quot(")!!'),Te($,se,O);case h:_e=d;break}else switch(_e){case a:q.tagName,(!t.isHTML(re[""])||!$.match(/^(?:disabled|checked|selected)$/i))&&fe.warning('attribute "'+$+'" missed value!! "'+$+'" instead2!!'),Te($,$,O),O=we,_e=s;break;case h:fe.warning('attribute space is required"'+$+'"!!');case d:_e=s,O=we;break;case o:_e=l,O=we;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}we++}}function A(j,O,q){for(var re=j.tagName,ae=null,J=j.length;J--;){var fe=j[J],Te=fe.qName,$=fe.value,ie=Te.indexOf(":");if(ie>0)var se=fe.prefix=Te.slice(0,ie),we=Te.slice(ie+1),_e=se==="xmlns"&&we;else we=Te,se=null,_e=Te==="xmlns"&&"";fe.localName=we,_e!==!1&&(ae==null&&(ae={},B(q,q={})),q[_e]=ae[_e]=$,fe.uri=t.XMLNS,O.startPrefixMapping(_e,$))}for(var J=j.length;J--;){fe=j[J];var se=fe.prefix;se&&(se==="xml"&&(fe.uri=t.XML),se!=="xmlns"&&(fe.uri=q[se||""]))}var ie=re.indexOf(":");ie>0?(se=j.prefix=re.slice(0,ie),we=j.localName=re.slice(ie+1)):(se=null,we=j.localName=re);var be=j.uri=q[se||""];if(O.startElement(be,we,re,j),j.closed){if(O.endElement(be,we,re),ae)for(se in ae)Object.prototype.hasOwnProperty.call(ae,se)&&O.endPrefixMapping(se)}else return j.currentNSMap=q,j.localNSMap=ae,!0}function D(j,O,q,re,ae){if(/^(?:script|textarea)$/i.test(q)){var fe=j.indexOf("</"+q+">",O),Te=j.substring(O+1,fe);if(/[&<]/.test(Te))return/^script$/i.test(q)?(ae.characters(Te,0,Te.length),fe):(Te=Te.replace(/&#?\w+;/g,re),ae.characters(Te,0,Te.length),fe)}return O+1}function R(j,O,q,re){var ae=re[q];return ae==null&&(ae=j.lastIndexOf("</"+q+">"),ae<O&&(ae=j.lastIndexOf("</"+q)),re[q]=ae),ae<O}function B(j,O){for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(O[q]=j[q])}function z(j,O,q,re){var ae=j.charAt(O+2);switch(ae){case"-":if(j.charAt(O+3)==="-"){var fe=j.indexOf("-->",O+4);return fe>O?(q.comment(j,O+4,fe-O-4),fe+3):(re.error("Unclosed comment"),-1)}else return-1;default:if(j.substr(O+3,6)=="CDATA["){var fe=j.indexOf("]]>",O+9);return q.startCDATA(),q.characters(j,O+9,fe-O-9),q.endCDATA(),fe+3}var Te=te(j,O),$=Te.length;if($>1&&/!doctype/i.test(Te[0][0])){var se=Te[1][0],we=!1,_e=!1;$>3&&(/^public$/i.test(Te[2][0])?(we=Te[3][0],_e=$>4&&Te[4][0]):/^system$/i.test(Te[2][0])&&(_e=Te[3][0]));var J=Te[$-1];return q.startDTD(se,we,_e),q.endDTD(),J.index+J[0].length}}return-1}function L(j,O,q){var re=j.indexOf("?>",O);if(re){var ae=j.substring(O,re).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ae?(ae[0].length,q.processingInstruction(ae[1],ae[2]),re+2):-1}return-1}function H(){this.attributeNames={}}H.prototype={setTagName:function(j){if(!n.test(j))throw new Error("invalid tagName:"+j);this.tagName=j},addValue:function(j,O,q){if(!n.test(j))throw new Error("invalid attribute:"+j);this.attributeNames[j]=this.length,this[this.length++]={qName:j,value:O,offset:q}},length:0,getLocalName:function(j){return this[j].localName},getLocator:function(j){return this[j].locator},getQName:function(j){return this[j].qName},getURI:function(j){return this[j].uri},getValue:function(j){return this[j].value}};function te(j,O){var q,re=[],ae=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ae.lastIndex=O,ae.exec(j);q=ae.exec(j);)if(re.push(q),q[1])return re}return Z1.XMLReader=y,Z1.ParseError=g,Z1}var $5;function fye(){if($5)return my;$5=1;var t=eA(),e=yJ(),i=hye(),n=dye(),r=e.DOMImplementation,s=t.NAMESPACE,a=n.ParseError,o=n.XMLReader;function l(T){return T.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function h(T){this.options=T||{locator:{}}}h.prototype.parseFromString=function(T,A){var D=this.options,R=new o,B=D.domBuilder||new p,z=D.errorHandler,L=D.locator,H=D.xmlns||{},te=/\/x?html?$/.test(A),j=te?i.HTML_ENTITIES:i.XML_ENTITIES;L&&B.setDocumentLocator(L),R.errorHandler=d(z,B,L),R.domBuilder=D.domBuilder||B,te&&(H[""]=s.HTML),H.xml=H.xml||s.XML;var O=D.normalizeLineEndings||l;return T&&typeof T=="string"?R.parse(O(T),H,j):R.errorHandler.error("invalid doc source"),B.doc};function d(T,A,D){if(!T){if(A instanceof p)return A;T=A}var R={},B=T instanceof Function;D=D||{};function z(L){var H=T[L];!H&&B&&(H=T.length==2?function(te){T(L,te)}:T),R[L]=H&&function(te){H("[xmldom "+L+"]	"+te+y(D))}||function(){}}return z("warning"),z("error"),z("fatalError"),R}function p(){this.cdata=!1}function g(T,A){A.lineNumber=T.lineNumber,A.columnNumber=T.columnNumber}p.prototype={startDocument:function(){this.doc=new r().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(T,A,D,R){var B=this.doc,z=B.createElementNS(T,D||A),L=R.length;S(this,z),this.currentElement=z,this.locator&&g(this.locator,z);for(var H=0;H<L;H++){var T=R.getURI(H),te=R.getValue(H),D=R.getQName(H),j=B.createAttributeNS(T,D);this.locator&&g(R.getLocator(H),j),j.value=j.nodeValue=te,z.setAttributeNode(j)}},endElement:function(T,A,D){var R=this.currentElement;R.tagName,this.currentElement=R.parentNode},startPrefixMapping:function(T,A){},endPrefixMapping:function(T){},processingInstruction:function(T,A){var D=this.doc.createProcessingInstruction(T,A);this.locator&&g(this.locator,D),S(this,D)},ignorableWhitespace:function(T,A,D){},characters:function(T,A,D){if(T=v.apply(this,arguments),T){if(this.cdata)var R=this.doc.createCDATASection(T);else var R=this.doc.createTextNode(T);this.currentElement?this.currentElement.appendChild(R):/^\s*$/.test(T)&&this.doc.appendChild(R),this.locator&&g(this.locator,R)}},skippedEntity:function(T){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(T){(this.locator=T)&&(T.lineNumber=0)},comment:function(T,A,D){T=v.apply(this,arguments);var R=this.doc.createComment(T);this.locator&&g(this.locator,R),S(this,R)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(T,A,D){var R=this.doc.implementation;if(R&&R.createDocumentType){var B=R.createDocumentType(T,A,D);this.locator&&g(this.locator,B),S(this,B),this.doc.doctype=B}},warning:function(T){console.warn("[xmldom warning]	"+T,y(this.locator))},error:function(T){console.error("[xmldom error]	"+T,y(this.locator))},fatalError:function(T){throw new a(T,this.locator)}};function y(T){if(T)return`
@`+(T.systemId||"")+"#[line:"+T.lineNumber+",col:"+T.columnNumber+"]"}function v(T,A,D){return typeof T=="string"?T.substr(A,D):T.length>=A+D||A?new java.lang.String(T,A,D)+"":T}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(T){p.prototype[T]=function(){return null}});function S(T,A){T.currentElement?T.currentElement.appendChild(A):T.doc.appendChild(A)}return my.__DOMHandler=p,my.normalizeLineEndings=l,my.DOMParser=h,my}var K5;function pye(){if(K5)return py;K5=1;var t=yJ();return py.DOMImplementation=t.DOMImplementation,py.XMLSerializer=t.XMLSerializer,py.DOMParser=fye().DOMParser,py}var mye=pye();const gye={createCanvas:(t,e)=>new OffscreenCanvas(t??0,e??0),createImage:()=>new Image,getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new mye.DOMParser().parseFromString(t,"text/xml")};class bye{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(Ln.system.add(this._tickerUpdate,this,pl.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Ln.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}):new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}destroy(){this.removeTickerListener(),this.events=null,this.domElement=null,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}}const Ju=new bye;class jx extends Bg{constructor(){super(...arguments),this.client=new tn,this.movement=new tn,this.offset=new tn,this.global=new tn,this.screen=new tn}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,i,n){return e.worldTransform.applyInverse(n||this.global,i)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,i,n,r,s,a,o,l,h,d,p,g,y,v,S){throw new Error("Method not implemented.")}}class ao extends jx{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class _f extends jx{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}_f.DOM_DELTA_PIXEL=0;_f.DOM_DELTA_LINE=1;_f.DOM_DELTA_PAGE=2;const yye=2048,xye=new tn,gy=new tn;class xJ{constructor(e){this.dispatch=new Ur,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,i){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:i,priority:0}),this.mappingTable[e].sort((n,r)=>n.priority-r.priority)}dispatchEvent(e,i){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,i),this.dispatch.emit(i||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const i=this.mappingTable[e.type];if(i)for(let n=0,r=i.length;n<r;n++)i[n].fn(e);else Ct(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,i){Ju.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[r](this.rootTarget,this.rootTarget.eventMode,xye.set(e,i),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,i){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=n.length-1;r<s;r++)if(e.currentTarget=n[r],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,i),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let r=n.length-2;r>=0;r--)if(e.currentTarget=n[r],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,i,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const r=Array.isArray(i)?i:[i];for(let s=n.length-1;s>=0;s--)r.forEach(a=>{e.currentTarget=n[s],this.notifyTarget(e,a)})}propagationPath(e){const i=[e];for(let n=0;n<yye&&e!==this.rootTarget&&e.parent;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(e.parent),e=e.parent}return i.reverse(),i}hitTestMoveRecursive(e,i,n,r,s,a=!1){let o=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||i==="dynamic")&&(Ju.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let p=d.length-1;p>=0;p--){const g=d[p],y=this.hitTestMoveRecursive(g,this._isInteractive(i)?i:g.eventMode,n,r,s,a||s(e,n));if(y){if(y.length>0&&!y[y.length-1].parent)continue;const v=e.isInteractive();(y.length>0||v)&&(v&&this._allInteractiveElements.push(e),y.push(e)),this._hitElements.length===0&&(this._hitElements=y),o=!0}}}const l=this._isInteractive(i),h=e.isInteractive();return h&&h&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:o?this._hitElements:l&&!s(e,n)&&r(e,n)?h?[e]:[]:null}hitTestRecursive(e,i,n,r,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||i==="dynamic")&&(Ju.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children,h=n;for(let d=l.length-1;d>=0;d--){const p=l[d],g=this.hitTestRecursive(p,this._isInteractive(i)?i:p.eventMode,h,r,s);if(g){if(g.length>0&&!g[g.length-1].parent)continue;const y=e.isInteractive();return(g.length>0||y)&&g.push(e),g}}}const a=this._isInteractive(i),o=e.isInteractive();return a&&r(e,n)?o?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,i){if(e.hitArea&&(e.worldTransform.applyInverse(i,gy),!e.hitArea.contains(gy.x,gy.y)))return!0;if(e.effects&&e.effects.length)for(let n=0;n<e.effects.length;n++){const r=e.effects[n];if(r.containsPoint&&!r.containsPoint(i,this.hitTestFn))return!0}return!1}hitTestFn(e,i){return e.hitArea?!0:e?.containsPoint?(e.worldTransform.applyInverse(i,gy),e.containsPoint(gy)):!1}notifyTarget(e,i){if(!e.currentTarget.isInteractive())return;i??(i=e.type);const n=`on${i}`;e.currentTarget[n]?.(e);const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${i}capture`:i;this._notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,i)}mapPointerDown(e){if(!(e instanceof ao)){Ct("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const r=i.button===2;this.dispatchEvent(i,r?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(e){if(!(e instanceof ao)){Ct("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=i.pointerType==="mouse"||i.pointerType==="pen",r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.overTargets);if(r.overTargets?.length>0&&s!==i.target){const l=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,l,s);if(this.dispatchEvent(h,"pointerout"),n&&this.dispatchEvent(h,"mouseout"),!i.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!i.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}if(s!==i.target){const l=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(i,l);this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover");let d=s?.parent;for(;d&&d!==this.rootTarget.parent&&d!==i.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const g=this.clonePointerEvent(i,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==s&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),n&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(h)}const a=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(i,"pointermove"),o&&a.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),o&&a.push("globaltouchmove")),n&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),o&&a.push("globalmousemove"),this.cursor=i.target?.cursor),a.length>0&&this.all(i,a),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(e){if(!(e instanceof ao)){Ct("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId),n=this.createPointerEvent(e),r=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),r&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;i.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof ao)){Ct("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId);if(i.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",r=this.findMountedTarget(i.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const a=this.createPointerEvent(e,"pointerleave",r);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;i.overTargets=null,this.freeEvent(s),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof ao)){Ct("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const o=n.button===2;this.dispatchEvent(n,o?"rightup":"mouseup")}const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]);let a=s;if(s&&!n.composedPath().includes(s)){let o=s;for(;o&&!n.composedPath().includes(o);){if(n.currentTarget=o,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}o=o.parent}delete r.pressTargetsByButton[e.button],a=o}if(a){const o=this.clonePointerEvent(n,"click");o.target=a,o.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:o.target,timeStamp:i});const l=r.clicksByButton[e.button];if(l.target===o.target&&i-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=o.target,l.timeStamp=i,o.detail=l.clickCount,o.pointerType==="mouse"){const h=o.button===2;this.dispatchEvent(o,h?"rightclick":"click")}else o.pointerType==="touch"&&this.dispatchEvent(o,"tap");this.dispatchEvent(o,"pointertap"),this.freeEvent(o)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof ao)){Ct("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(n){let s=n;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete i.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof _f)){Ct("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(e);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(e){if(!e)return null;let i=e[0];for(let n=1;n<e.length&&e[n].parent===i;n++)i=e[n];return i}createPointerEvent(e,i,n){const r=this.allocateEvent(ao);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=n??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof i=="string"&&(r.type=i),r}createWheelEvent(e){const i=this.allocateEvent(_f);return this.copyWheelData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(e,i){const n=this.allocateEvent(ao);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=i??n.type,n}copyWheelData(e,i){i.deltaMode=e.deltaMode,i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ}copyPointerData(e,i){e instanceof ao&&i instanceof ao&&(i.pointerId=e.pointerId,i.width=e.width,i.height=e.height,i.isPrimary=e.isPrimary,i.pointerType=e.pointerType,i.pressure=e.pressure,i.tangentialPressure=e.tangentialPressure,i.tiltX=e.tiltX,i.tiltY=e.tiltY,i.twist=e.twist)}copyMouseData(e,i){e instanceof jx&&i instanceof jx&&(i.altKey=e.altKey,i.button=e.button,i.buttons=e.buttons,i.client.copyFrom(e.client),i.ctrlKey=e.ctrlKey,i.metaKey=e.metaKey,i.movement.copyFrom(e.movement),i.screen.copyFrom(e.screen),i.shiftKey=e.shiftKey,i.global.copyFrom(e.global))}copyData(e,i){i.isTrusted=e.isTrusted,i.srcElement=e.srcElement,i.timeStamp=performance.now(),i.type=e.type,i.detail=e.detail,i.view=e.view,i.which=e.which,i.layer.copyFrom(e.layer),i.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const i=this.eventPool.get(e).pop()||new e(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.defaultPrevented=!1,i.path=null,i.target=null,i}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=e.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(e)}_notifyListeners(e,i){const n=e.currentTarget._events[i];if(n)if("fn"in n)n.once&&e.currentTarget.removeListener(i,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let r=0,s=n.length;r<s&&!e.propagationImmediatelyStopped;r++)n[r].once&&e.currentTarget.removeListener(i,n[r].fn,void 0,!0),n[r].fn.call(n[r].context,e)}}const _ye=1,vye={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},BF=class PM{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new xJ(null),Ju.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new ao(null),this._rootWheelEvent=new _f(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...PM.defaultEventFeatures},{set:(i,n,r)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),i[n]=r,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:i,resolution:n}=this.renderer;this.setTargetElement(i),this.resolution=n,PM._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){Ju.destroy(),this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let i=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(i=!1),this._currentCursor===e)return;this._currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":i&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":i&&Object.assign(this.domElement.style,n);break}else i&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this._normalizeToPointerData(e);this.autoPreventDefault&&i[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,r=i.length;n<r;n++){const s=i[n],a=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Ju.pointerMoved();const i=this._normalizeToPointerData(e);for(let n=0,r=i.length;n<r;n++){const s=this._bootstrapEvent(this._rootPointerEvent,i[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=e.target;e.composedPath&&e.composedPath().length>0&&(i=e.composedPath()[0]);const n=i!==this.domElement?"outside":"",r=this._normalizeToPointerData(e);for(let s=0,a=r.length;s<a;s++){const o=this._bootstrapEvent(this._rootPointerEvent,r[s]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this._normalizeToPointerData(e);for(let n=0,r=i.length;n<r;n++){const s=this._bootstrapEvent(this._rootPointerEvent,i[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const i=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(i)}setTargetElement(e){this._removeEvents(),this.domElement=e,Ju.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Ju.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Ju.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,i,n){const r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(i-r.left)*(this.domElement.width/r.width)*s,e.y=(n-r.top)*(this.domElement.height/r.height)*s}_normalizeToPointerData(e){const i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,r=e.changedTouches.length;n<r;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,i.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=_ye),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,i.push(n)}else i.push(e);return i}normalizeWheelEvent(e){const i=this._rootWheelEvent;return this._transferMouseData(i,e),i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ,i.deltaMode=e.deltaMode,this.mapPositionToPoint(i.screen,e.clientX,e.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=e,i.type=e.type,i}_bootstrapEvent(e,i){return e.originalEvent=null,e.nativeEvent=i,e.pointerId=i.pointerId,e.width=i.width,e.height=i.height,e.isPrimary=i.isPrimary,e.pointerType=i.pointerType,e.pressure=i.pressure,e.tangentialPressure=i.tangentialPressure,e.tiltX=i.tiltX,e.tiltY=i.tiltY,e.twist=i.twist,this._transferMouseData(e,i),this.mapPositionToPoint(e.screen,i.clientX,i.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=vye[e.type]||e.type),e}_transferMouseData(e,i){e.isTrusted=i.isTrusted,e.srcElement=i.srcElement,e.timeStamp=performance.now(),e.type=i.type,e.altKey=i.altKey,e.button=i.button,e.buttons=i.buttons,e.client.x=i.clientX,e.client.y=i.clientY,e.ctrlKey=i.ctrlKey,e.metaKey=i.metaKey,e.movement.x=i.movementX,e.movement.y=i.movementY,e.page.x=i.pageX,e.page.y=i.pageY,e.relatedTarget=null,e.shiftKey=i.shiftKey}};BF.extension={name:"events",type:[me.WebGLSystem,me.CanvasSystem,me.WebGPUSystem],priority:-1};BF.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let _J=BF;const Tye={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(t){this.eventMode=t?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??_J.defaultEventMode},set eventMode(t){this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,r=typeof i=="object"?i.signal:void 0,s=typeof i=="object"?i.once===!0:!1,a=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;const o=typeof e=="function"?e:e.handleEvent,l=this;r&&r.addEventListener("abort",()=>{l.off(t,o,a)}),s?l.once(t,o,a):l.on(t,o,a)},removeEventListener(t,e,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,r=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,r)},dispatchEvent(t){if(!(t instanceof Bg))throw new Error("Container cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};var R_=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,vJ=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,MM=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const TJ=class EJ extends El{constructor(e){e={...EJ.defaultOptions,...e};const i=qs.from({vertex:{source:MM,entryPoint:"mainVertex"},fragment:{source:MM,entryPoint:"mainFragment"}}),n=ya.from({vertex:R_,fragment:vJ,name:"alpha-filter"}),{alpha:r,...s}=e,a=new dr({uAlpha:{value:r,type:"f32"}});super({...s,gpuProgram:i,glProgram:n,resources:{alphaUniforms:a}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};TJ.defaultOptions={alpha:1};let Eye=TJ;const kF={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Sye=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function SJ(t){const e=kF[t],i=e.length;let n=Sye,r="";const s="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let a;for(let o=0;o<t;o++){let l=s.replace("%index%",o.toString());a=o,o>=i&&(a=t-o-1),l=l.replace("%value%",e[a].toString()),r+=l,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",t.toString()),n}const Aye=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function AJ(t,e){const i=Math.ceil(t/2);let n=Aye,r="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let a=0;a<t;a++){let o=s.replace("%index%",a.toString());o=o.replace("%sampleIndex%",`${a-(i-1)}.0`),r+=o,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",t.toString()),n=n.replace("%dimension%",e?"z":"w"),n}function CJ(t,e){const i=AJ(e,t),n=SJ(e);return ya.from({vertex:i,fragment:n,name:`blur-${t?"horizontal":"vertical"}-pass-filter`})}var wJ=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function DJ(t,e){const i=kF[e],n=i.length,r=[],s=[],a=[];for(let p=0;p<e;p++){r[p]=`@location(${p}) offset${p}: vec2<f32>,`,t?s[p]=`filteredCord + vec2(${p-n+1} * pixelStrength, 0.0),`:s[p]=`filteredCord + vec2(0.0, ${p-n+1} * pixelStrength),`;const g=p<n?p:e-p-1,y=i[g].toString();a[p]=`finalColor += textureSample(uTexture, uSampler, offset${p}) * ${y};`}const o=r.join(`
`),l=s.join(`
`),h=a.join(`
`),d=wJ.replace("%blur-struct%",o).replace("%blur-vertex-out%",l).replace("%blur-fragment-in%",o).replace("%blur-sampling%",h).replace("%dimension%",t?"z":"w");return qs.from({vertex:{source:d,entryPoint:"mainVertex"},fragment:{source:d,entryPoint:"mainFragment"}})}const RJ=class PJ extends El{constructor(e){e={...PJ.defaultOptions,...e};const i=CJ(e.horizontal,e.kernelSize),n=DJ(e.horizontal,e.kernelSize);super({glProgram:i,gpuProgram:n,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,i,n,r){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,i,n,r);else{const s=ir.getSameSizeTexture(i);let a=i,o=s;this._state.blend=!1;const l=e.renderer.type===pa.WEBGPU;for(let h=0;h<this.passes-1;h++){e.applyFilter(this,a,o,h===0?!0:l);const d=o;o=a,a=d}this._state.blend=!0,e.applyFilter(this,a,n,r),ir.returnTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};RJ.defaultOptions={strength:8,quality:4,kernelSize:5};let VT=RJ;class MJ extends El{constructor(...e){let i=e[0]??{};typeof i=="number"&&(ft(Yt,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),i={strength:i},e[1]!==void 0&&(i.quality=e[1]),e[2]!==void 0&&(i.resolution=e[2]||"inherit"),e[3]!==void 0&&(i.kernelSize=e[3])),i={...VT.defaultOptions,...i};const{strength:n,strengthX:r,strengthY:s,quality:a,...o}=i;super({...o,compatibleRenderers:pa.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new VT({horizontal:!0,...i}),this.blurYFilter=new VT({horizontal:!1,...i}),this.quality=a,this.strengthX=r??n,this.strengthY=s??n,this.repeatEdgePixels=!1}apply(e,i,n,r){const s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){const o=ir.getSameSizeTexture(i);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,i,o,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,o,n,r),ir.returnTexture(o)}else a?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,i,n,r)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,i,n,r))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return ft("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){ft("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return ft("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){ft("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return ft("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){ft("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}MJ.defaultOptions={strength:8,quality:4,kernelSize:5};var BJ=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,BM=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class Cye extends El{constructor(e={}){const i=new dr({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),n=qs.from({vertex:{source:BM,entryPoint:"mainVertex"},fragment:{source:BM,entryPoint:"mainFragment"}}),r=ya.from({vertex:R_,fragment:BJ,name:"color-matrix-filter"});super({...e,gpuProgram:n,glProgram:r,resources:{colorMatrixUniforms:i}}),this.alpha=1}_loadMatrix(e,i=!1){let n=e;i&&(this._multiply(n,this.matrix,e),n=this._colorMatrix(n)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=n,this.resources.colorMatrixUniforms.update()}_multiply(e,i,n){return e[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],e[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],e[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],e[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],e[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],e[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],e[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],e[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],e[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],e[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],e[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],e[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],e[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],e[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],e[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],e[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],e[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],e[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],e[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],e[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],e}_colorMatrix(e){const i=new Float32Array(e);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(e,i){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)}tint(e,i){const[n,r,s]=Pi.shared.setValue(e).toArray(),a=[n,0,0,0,0,0,r,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(a,i)}greyscale(e,i){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)}grayscale(e,i){this.greyscale(e,i)}blackAndWhite(e){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,e)}hue(e,i){e=(e||0)/180*Math.PI;const n=Math.cos(e),r=Math.sin(e),s=Math.sqrt,a=1/3,o=s(a),l=n+(1-n)*a,h=a*(1-n)-o*r,d=a*(1-n)+o*r,p=a*(1-n)+o*r,g=n+a*(1-n),y=a*(1-n)-o*r,v=a*(1-n)-o*r,S=a*(1-n)+o*r,T=n+a*(1-n),A=[l,h,d,0,0,p,g,y,0,0,v,S,T,0,0,0,0,0,1,0];this._loadMatrix(A,i)}contrast(e,i){const n=(e||0)+1,r=-.5*(n-1),s=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(s,i)}saturate(e=0,i){const n=e*2/3+1,r=(n-1)*-.5,s=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(s,i)}desaturate(){this.saturate(-1)}negative(e){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,e)}sepia(e){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,e)}technicolor(e){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,e)}polaroid(e){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,e)}toBGR(e){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,e)}kodachrome(e){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,e)}browni(e){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,e)}vintage(e){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,e)}colorTone(e,i,n,r,s){e||(e=.2),i||(i=.15),n||(n=16770432),r||(r=3375104);const a=Pi.shared,[o,l,h]=a.setValue(n).toArray(),[d,p,g]=a.setValue(r).toArray(),y=[.3,.59,.11,0,0,o,l,h,e,0,d,p,g,i,0,o-d,l-p,h-g,0,0];this._loadMatrix(y,s)}night(e,i){e||(e=.1);const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)}predator(e,i){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,i)}lsd(e){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(e){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=e}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(e){this.resources.colorMatrixUniforms.uniforms.uAlpha=e}}var kJ=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,OJ=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,kM=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class wye extends El{constructor(...e){let i=e[0];i instanceof hu&&(e[1]&&ft(Yt,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),i={sprite:i,scale:e[1]});const{sprite:n,scale:r,...s}=i;let a=r??20;typeof a=="number"&&(a=new tn(a,a));const o=new dr({uFilterMatrix:{value:new gt,type:"mat3x3<f32>"},uScale:{value:a,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),l=ya.from({vertex:OJ,fragment:kJ,name:"displacement-filter"}),h=qs.from({vertex:{source:kM,entryPoint:"mainVertex"},fragment:{source:kM,entryPoint:"mainFragment"}}),d=n.texture.source;super({...s,gpuProgram:h,glProgram:l,resources:{filterUniforms:o,uMapTexture:d,uMapSampler:d.style}}),this._sprite=i.sprite,this._sprite.renderable=!1}apply(e,i,n,r){const s=this.resources.filterUniforms.uniforms;e.calculateSpriteMatrix(s.uFilterMatrix,this._sprite);const a=this._sprite.worldTransform,o=Math.sqrt(a.a*a.a+a.b*a.b),l=Math.sqrt(a.c*a.c+a.d*a.d);o!==0&&l!==0&&(s.uRotation[0]=a.a/o,s.uRotation[1]=a.b/o,s.uRotation[2]=a.c/l,s.uRotation[3]=a.d/l),this.resources.uMapTexture=this._sprite.texture.source,e.applyFilter(this,i,n,r)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var FJ=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,OM=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const IJ=class LJ extends El{constructor(e={}){e={...LJ.defaultOptions,...e};const i=qs.from({vertex:{source:OM,entryPoint:"mainVertex"},fragment:{source:OM,entryPoint:"mainFragment"}}),n=ya.from({vertex:R_,fragment:FJ,name:"noise-filter"}),{noise:r,seed:s,...a}=e;super({...a,gpuProgram:i,glProgram:n,resources:{noiseUniforms:new dr({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=r,this.seed=s??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};IJ.defaultOptions={noise:.5};let Dye=IJ;var NJ=`in vec2 vTextureCoord;
out vec4 finalColor;
uniform sampler2D uTexture;
void main() {
    finalColor = texture(uTexture, vTextureCoord);
}
`,FM=`struct GlobalFilterUniforms {
  uInputSize: vec4<f32>,
  uInputPixel: vec4<f32>,
  uInputClamp: vec4<f32>,
  uOutputFrame: vec4<f32>,
  uGlobalFrame: vec4<f32>,
  uOutputTexture: vec4<f32>,
};

@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler: sampler;

struct VSOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) uv: vec2<f32>
};

fn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition: vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {
    return textureSample(uTexture, uSampler, uv);
}
`;class UJ extends El{constructor(){const e=qs.from({vertex:{source:FM,entryPoint:"mainVertex"},fragment:{source:FM,entryPoint:"mainFragment"},name:"passthrough-filter"}),i=ya.from({vertex:R_,fragment:NJ,name:"passthrough-filter"});super({gpuProgram:e,glProgram:i})}}class GJ{constructor(e){this._renderer=e}push(e,i,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:i,filterEffect:e})}pop(e,i,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}GJ.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"filter"};function IM(t,e,i,n,r,s,a,o){const l=a-i,h=o-n,d=r-i,p=s-n,g=t-i,y=e-n,v=l*l+h*h,S=l*d+h*p,T=l*g+h*y,A=d*d+p*p,D=d*g+p*y,R=1/(v*A-S*S),B=(A*T-S*D)*R,z=(v*D-S*T)*R;return B>=0&&z>=0&&B+z<1}class OF{constructor(e=0,i=0,n=0,r=0,s=0,a=0){this.type="triangle",this.x=e,this.y=i,this.x2=n,this.y2=r,this.x3=s,this.y3=a}contains(e,i){const n=(this.x-this.x3)*(i-this.y3)-(this.y-this.y3)*(e-this.x3),r=(this.x2-this.x)*(i-this.y)-(this.y2-this.y)*(e-this.x);if(n<0!=r<0&&n!==0&&r!==0)return!1;const s=(this.x3-this.x2)*(i-this.y2)-(this.y3-this.y2)*(e-this.x2);return s===0||s<0==n+r<=0}strokeContains(e,i,n,r=.5){const s=n/2,a=s*s,{x:o,x2:l,x3:h,y:d,y2:p,y3:g}=this;return tx(e,i,o,d,l,g)<=a||tx(e,i,l,p,h,g)<=a||tx(e,i,h,g,o,d)<=a}clone(){return new OF(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x2=e.x2,this.y2=e.y2,this.x3=e.x3,this.y3=e.y3,this}copyTo(e){return e.copyFrom(this),e}getBounds(e){e||(e=new zi);const i=Math.min(this.x,this.x2,this.x3),n=Math.max(this.x,this.x2,this.x3),r=Math.min(this.y,this.y2,this.y3),s=Math.max(this.y,this.y2,this.y3);return e.x=i,e.y=r,e.width=n-i,e.height=s-r,e}}const Q5=new gt;function HJ(t,e){e.clear();const i=e.matrix;for(let n=0;n<t.length;n++){const r=t[n];if(r.globalDisplayStatus<7)continue;const s=r.renderGroup??r.parentRenderGroup;s?.isCachedAsTexture?e.matrix=Q5.copyFrom(s.textureOffsetInverseTransform).append(r.worldTransform):s?._parentCacheAsTextureRenderGroup?e.matrix=Q5.copyFrom(s._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(r.groupTransform):e.matrix=r.worldTransform,e.addBounds(r.bounds)}return e.matrix=i,e}const Rye=new Gf({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class Pye{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new Ir,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0},this.firstEnabledIndex=-1,this.lastEnabledIndex=-1}}class zJ{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new dr({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new ul({}),this.renderer=e}get activeBackTexture(){return this._activeFilterData?.backTexture}push(e){const i=this.renderer,n=e.filterEffect.filters,r=this._pushFilterData();r.skip=!1,r.filters=n,r.container=e.container,r.outputRenderSurface=i.renderTarget.renderSurface;const s=i.renderTarget.renderTarget.colorTexture.source,a=s.resolution,o=s.antialias;if(n.every(y=>!y.enabled)){r.skip=!0;return}const l=r.bounds;if(this._calculateFilterArea(e,l),this._calculateFilterBounds(r,i.renderTarget.rootViewPort,o,a,1),r.skip)return;const h=this._getPreviousFilterData(),d=this._findFilterResolution(a);let p=0,g=0;h&&(p=h.bounds.minX,g=h.bounds.minY),this._calculateGlobalFrame(r,p,g,d,s.width,s.height),this._setupFilterTextures(r,l,i,h)}generateFilteredTexture({texture:e,filters:i}){const n=this._pushFilterData();this._activeFilterData=n,n.skip=!1,n.filters=i;const r=e.source,s=r.resolution,a=r.antialias;if(i.every(y=>!y.enabled))return n.skip=!0,e;const o=n.bounds;if(o.addRect(e.frame),this._calculateFilterBounds(n,o.rectangle,a,s,0),n.skip)return e;const l=s;this._calculateGlobalFrame(n,0,0,l,r.width,r.height),n.outputRenderSurface=ir.getOptimalTexture(o.width,o.height,n.resolution,n.antialias),n.backTexture=it.EMPTY,n.inputTexture=e,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(n,!0);const g=n.outputRenderSurface;return g.source.alphaMode="premultiplied-alpha",g}pop(){const e=this.renderer,i=this._popFilterData();i.skip||(e.globalUniforms.pop(),e.renderTarget.finishRenderPass(),this._activeFilterData=i,this._applyFiltersToTexture(i,!1),i.blendRequired&&ir.returnTexture(i.backTexture),ir.returnTexture(i.inputTexture))}getBackTexture(e,i,n){const r=e.colorTexture.source._resolution,s=ir.getOptimalTexture(i.width,i.height,r,!1);let a=i.minX,o=i.minY;n&&(a-=n.minX,o-=n.minY),a=Math.floor(a*r),o=Math.floor(o*r);const l=Math.ceil(i.width*r),h=Math.ceil(i.height*r);return this.renderer.renderTarget.copyToTexture(e,s,{x:a,y:o},{width:l,height:h},{x:0,y:0}),s}applyFilter(e,i,n,r){const s=this.renderer,a=this._activeFilterData,l=a.outputRenderSurface===n,h=s.renderTarget.rootRenderTarget.colorTexture.source._resolution,d=this._findFilterResolution(h);let p=0,g=0;if(l){const v=this._findPreviousFilterOffset();p=v.x,g=v.y}this._updateFilterUniforms(i,n,a,p,g,d,l,r);const y=e.enabled?e:this._getPassthroughFilter();this._setupBindGroupsAndRender(y,i,s)}calculateSpriteMatrix(e,i){const n=this._activeFilterData,r=e.set(n.inputTexture._source.width,0,0,n.inputTexture._source.height,n.bounds.minX,n.bounds.minY),s=i.worldTransform.copyTo(gt.shared),a=i.renderGroup||i.parentRenderGroup;return a&&a.cacheToLocalTransform&&s.prepend(a.cacheToLocalTransform),s.invert(),r.prepend(s),r.scale(1/i.texture.orig.width,1/i.texture.orig.height),r.translate(i.anchor.x,i.anchor.y),r}destroy(){this._passthroughFilter?.destroy(!0),this._passthroughFilter=null}_getPassthroughFilter(){return this._passthroughFilter??(this._passthroughFilter=new UJ),this._passthroughFilter}_setupBindGroupsAndRender(e,i,n){if(n.renderPipes.uniformBatch){const r=n.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(r,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);this._globalFilterBindGroup.setResource(i.source,1),this._globalFilterBindGroup.setResource(i.source.style,2),e.groups[0]=this._globalFilterBindGroup,n.encoder.draw({geometry:Rye,shader:e,state:e._state,topology:"triangle-list"}),n.type===pa.WEBGL&&n.renderTarget.finishRenderPass()}_setupFilterTextures(e,i,n,r){if(e.backTexture=it.EMPTY,e.inputTexture=ir.getOptimalTexture(i.width,i.height,e.resolution,e.antialias),e.blendRequired){n.renderTarget.finishRenderPass();const s=n.renderTarget.getRenderTarget(e.outputRenderSurface);e.backTexture=this.getBackTexture(s,i,r?.bounds)}n.renderTarget.bind(e.inputTexture,!0),n.globalUniforms.push({offset:i})}_calculateGlobalFrame(e,i,n,r,s,a){const o=e.globalFrame;o.x=i*r,o.y=n*r,o.width=s*r,o.height=a*r}_updateFilterUniforms(e,i,n,r,s,a,o,l){const h=this._filterGlobalUniforms.uniforms,d=h.uOutputFrame,p=h.uInputSize,g=h.uInputPixel,y=h.uInputClamp,v=h.uGlobalFrame,S=h.uOutputTexture;o?(d[0]=n.bounds.minX-r,d[1]=n.bounds.minY-s):(d[0]=0,d[1]=0),d[2]=e.frame.width,d[3]=e.frame.height,p[0]=e.source.width,p[1]=e.source.height,p[2]=1/p[0],p[3]=1/p[1],g[0]=e.source.pixelWidth,g[1]=e.source.pixelHeight,g[2]=1/g[0],g[3]=1/g[1],y[0]=.5*g[2],y[1]=.5*g[3],y[2]=e.frame.width*p[2]-.5*g[2],y[3]=e.frame.height*p[3]-.5*g[3];const T=this.renderer.renderTarget.rootRenderTarget.colorTexture;v[0]=r*a,v[1]=s*a,v[2]=T.source.width*a,v[3]=T.source.height*a,i instanceof it&&(i.source.resource=null);const A=this.renderer.renderTarget.getRenderTarget(i);this.renderer.renderTarget.bind(i,!!l),i instanceof it?(S[0]=i.frame.width,S[1]=i.frame.height):(S[0]=A.width,S[1]=A.height),S[2]=A.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(e){let i=this._filterStackIndex-1;for(;i>0&&this._filterStack[i].skip;)--i;return i>0&&this._filterStack[i].inputTexture?this._filterStack[i].inputTexture.source._resolution:e}_findPreviousFilterOffset(){let e=0,i=0,n=this._filterStackIndex;for(;n>0;){n--;const r=this._filterStack[n];if(!r.skip){e=r.bounds.minX,i=r.bounds.minY;break}}return{x:e,y:i}}_calculateFilterArea(e,i){if(e.renderables?HJ(e.renderables,i):e.filterEffect.filterArea?(i.clear(),i.addRect(e.filterEffect.filterArea),i.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,i),e.container){const r=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;r&&i.applyMatrix(r)}}_applyFiltersToTexture(e,i){const n=e.inputTexture,r=e.bounds,s=e.filters,a=e.firstEnabledIndex,o=e.lastEnabledIndex;if(this._globalFilterBindGroup.setResource(n.source.style,2),this._globalFilterBindGroup.setResource(e.backTexture.source,3),a===o)s[a].apply(this,n,e.outputRenderSurface,i);else{let l=e.inputTexture;const h=ir.getOptimalTexture(r.width,r.height,l.source._resolution,!1);let d=h;for(let p=a;p<o;p++){const g=s[p];if(!g.enabled)continue;g.apply(this,l,d,!0);const y=l;l=d,d=y}s[o].apply(this,l,e.outputRenderSurface,i),ir.returnTexture(h)}}_calculateFilterBounds(e,i,n,r,s){const a=this.renderer,o=e.bounds,l=e.filters;let h=1/0,d=0,p=!0,g=!1,y=!1,v=!0,S=-1,T=-1;for(let A=0;A<l.length;A++){const D=l[A];if(!D.enabled)continue;if(S===-1&&(S=A),T=A,h=Math.min(h,D.resolution==="inherit"?r:D.resolution),d+=D.padding,D.antialias==="off"?p=!1:D.antialias==="inherit"&&p&&(p=n),D.clipToViewport||(v=!1),!!!(D.compatibleRenderers&a.type)){y=!1;break}if(D.blendRequired&&!(a.backBuffer?.useBackBuffer??!0)){Ct("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),y=!1;break}y=!0,g||(g=D.blendRequired)}if(!y){e.skip=!0;return}if(v&&o.fitBounds(0,i.width/r,0,i.height/r),o.scale(h).ceil().scale(1/h).pad((d|0)*s),!o.isPositive){e.skip=!0;return}e.antialias=p,e.resolution=h,e.blendRequired=g,e.firstEnabledIndex=S,e.lastEnabledIndex=T}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let e,i=this._filterStackIndex-1;for(;i>0&&(i--,e=this._filterStack[i],!!e.skip););return e}_pushFilterData(){let e=this._filterStack[this._filterStackIndex];return e||(e=this._filterStack[this._filterStackIndex]=new Pye),this._filterStackIndex++,e}}zJ.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"filter"};var VJ=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,jJ=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,LM=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class XJ extends El{constructor(e){const{sprite:i,...n}=e,r=new jO(i.texture),s=new dr({uFilterMatrix:{value:new gt,type:"mat3x3<f32>"},uMaskClamp:{value:r.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),a=qs.from({vertex:{source:LM,entryPoint:"mainVertex"},fragment:{source:LM,entryPoint:"mainFragment"}}),o=ya.from({vertex:jJ,fragment:VJ,name:"mask-filter"});super({...n,gpuProgram:a,glProgram:o,clipToViewport:!1,resources:{filterUniforms:s,uMaskTexture:i.texture.source}}),this.sprite=i,this._textureMatrix=r}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,i,n,r){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,i,n,r)}}var Mye=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;const YJ=class qJ{constructor(e){this._tick=()=>{this._destroyed||(this.timeout=setTimeout(this._processQueue,0))},this._processQueue=()=>{if(this._destroyed)return;const{queue:i}=this;let n=0;for(;i.length&&n<qJ.uploadsPerFrame;){const r=i.shift();this.uploadQueueItem(r),n++}i.length?Ln.system.addOnce(this._tick,this,pl.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){const i=Array.isArray(e)?e:[e];for(const n of i)n instanceof sr?this._addContainer(n):this.resolveQueueItem(n,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(const i of e.children)this._addContainer(i)}upload(e){return e&&this.add(e),new Promise(i=>{this.queue.length?(this.resolves.push(i),this.dedupeQueue(),Ln.system.addOnce(this._tick,this,pl.UTILITY)):i()})}dedupeQueue(){const e=Object.create(null);let i=0;for(let n=0;n<this.queue.length;n++){const r=this.queue[n];e[r.uid]||(e[r.uid]=!0,this.queue[i++]=r)}this.queue.length=i}destroy(){this._destroyed=!0,clearTimeout(this.timeout)}_resolve(){const{resolves:e}=this,i=e.slice(0);e.length=0;for(const n of i)n()}};YJ.uploadsPerFrame=4;let WJ=YJ;class lg extends Tl{constructor(e){e instanceof Vs&&(e={context:e});const{context:i,roundPixels:n,...r}=e||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new Vs,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,i){return this.context[e](...i),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new lg(this._context.clone()):(this._ownedContext=null,new lg(this._context))}lineStyle(e,i,n){ft(Yt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return e&&(r.width=e),i&&(r.color=i),n&&(r.alpha=n),this.context.strokeStyle=r,this}beginFill(e,i){ft(Yt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const n={};return e!==void 0&&(n.color=e),i!==void 0&&(n.alpha=i),this.context.fillStyle=n,this}endFill(){ft(Yt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Vs.defaultStrokeStyle.width||e.color!==Vs.defaultStrokeStyle.color||e.alpha!==Vs.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return ft(Yt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return ft(Yt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return ft(Yt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return ft(Yt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return ft(Yt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return ft(Yt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const $J=class KJ extends Gf{constructor(...e){let i=e[0]??{};i instanceof Float32Array&&(ft(Yt,"use new MeshGeometry({ positions, uvs, indices }) instead"),i={positions:i,uvs:e[1],indices:e[2]}),i={...KJ.defaultOptions,...i};const n=i.positions||new Float32Array([0,0,1,0,1,1,0,1]);let r=i.uvs;r||(i.positions?r=new Float32Array(n.length):r=new Float32Array([0,0,1,0,1,1,0,1]));const s=i.indices||new Uint32Array([0,1,2,0,2,3]),a=i.shrinkBuffersToFit,o=new da({data:n,label:"attribute-mesh-positions",shrinkToFit:a,usage:wi.VERTEX|wi.COPY_DST}),l=new da({data:r,label:"attribute-mesh-uvs",shrinkToFit:a,usage:wi.VERTEX|wi.COPY_DST}),h=new da({data:s,label:"index-mesh-buffer",shrinkToFit:a,usage:wi.INDEX|wi.COPY_DST});super({attributes:{aPosition:{buffer:o,format:"float32x2",stride:8,offset:0},aUV:{buffer:l,format:"float32x2",stride:8,offset:0}},indexBuffer:h,topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};$J.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let qh=$J;class Ng extends Tl{constructor(...e){let i=e[0];i instanceof Gf&&(ft(Yt,"Mesh: use new Mesh({ geometry, shader }) instead"),i={geometry:i,shader:e[1]},e[3]&&(ft(Yt,"Mesh: drawMode argument has been removed, use geometry.topology instead"),i.geometry.topology=e[3]));const{geometry:n,shader:r,texture:s,roundPixels:a,state:o,...l}=i;super({label:"Mesh",...l}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=r??null,this.texture=s??r?.texture??it.WHITE,this.state=o??Na.for2d(),this._geometry=n,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=a??!1}get material(){return ft(Yt,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){this._geometry!==e&&(this._geometry?.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=it.EMPTY);const i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof qh?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){const{x:i,y:n}=e;if(!this.bounds.containsPoint(i,n))return!1;const r=this.geometry.getBuffer("aPosition").data,s=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const a=this.geometry.getIndex().data,o=a.length;for(let l=0;l+2<o;l+=s){const h=a[l]*2,d=a[l+1]*2,p=a[l+2]*2;if(IM(i,n,r[h],r[h+1],r[d],r[d+1],r[p],r[p+1]))return!0}}else{const a=r.length/2;for(let o=0;o+2<a;o+=s){const l=o*2,h=(o+1)*2,d=(o+2)*2;if(IM(i,n,r[l],r[l+1],r[h],r[h+1],r[d],r[d+1]))return!0}}return!1}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null,this._gpuData=null}}class Xx extends hu{constructor(...e){let i=e[0];Array.isArray(e[0])&&(i={textures:e[0],autoUpdate:e[1]});const{animationSpeed:n=1,autoPlay:r=!1,autoUpdate:s=!0,loop:a=!0,onComplete:o=null,onFrameChange:l=null,onLoop:h=null,textures:d,updateAnchor:p=!1,...g}=i,[y]=d;super({...g,texture:y instanceof it?y:y.texture}),this._textures=null,this._durations=null,this._autoUpdate=s,this._isConnectedToTicker=!1,this.animationSpeed=n,this.loop=a,this.updateAnchor=p,this.onComplete=o,this.onFrameChange=l,this.onLoop=h,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=d,r&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ln.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ln.shared.add(this.update,this,pl.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const i=e.deltaTime,n=this.animationSpeed*i,r=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=n/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const a=Math.sign(this.animationSpeed*i);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this._updateTexture())}_updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e=!1){if(typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._textures.forEach(r=>{this.texture!==r&&r.destroy(n)})}this._textures=[],this._durations=null,this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const i=[];for(let n=0;n<e.length;++n)i.push(it.from(e[n]));return new Xx(i)}static fromImages(e){const i=[];for(let n=0;n<e.length;++n)i.push(it.from(e[n]));return new Xx(i)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof it)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Ln.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ln.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class QJ{constructor({matrix:e,observer:i}={}){this.dirty=!0,this._matrix=e??new gt,this.observer=i,this.position=new In(this,0,0),this.scale=new In(this,1,1),this.pivot=new In(this,0,0),this.skew=new In(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){this.dirty=!0,e===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}}const ZJ=class jT extends Tl{constructor(...e){let i=e[0]||{};i instanceof it&&(i={texture:i}),e.length>1&&(ft(Yt,"use new TilingSprite({ texture, width:100, height:100 }) instead"),i.width=e[1],i.height=e[2]),i={...jT.defaultOptions,...i};const{texture:n,anchor:r,tilePosition:s,tileScale:a,tileRotation:o,width:l,height:h,applyAnchorToTexture:d,roundPixels:p,...g}=i??{};super({label:"TilingSprite",...g}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new In({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=d,this.texture=n,this._width=l??n.width,this._height=h??n.height,this._tileTransform=new QJ({observer:{_onUpdate:()=>this.onViewUpdate()}}),r&&(this.anchor=r),this.tilePosition=s,this.tileScale=a,this.tileRotation=o,this.roundPixels=p??!1}static from(e,i={}){return typeof e=="string"?new jT({texture:Ki.get(e),...i}):new jT({texture:e,...i})}get uvRespectAnchor(){return ft(Yt,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){ft(Yt,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=it.EMPTY);const i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,i){typeof e=="object"&&(i=e.height??e.width,e=e.width),this._width=e,this._height=i??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){const e=this._bounds,i=this._anchor,n=this._width,r=this._height;e.minX=-i._x*n,e.maxX=e.minX+n,e.minY=-i._y*r,e.maxY=e.minY+r}containsPoint(e){const i=this._width,n=this._height,r=-i*this._anchor._x;let s=0;return e.x>=r&&e.x<=r+i&&(s=-n*this._anchor._y,e.y>=s&&e.y<=s+n)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._texture=null}};ZJ.defaultOptions={texture:it.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let JJ=ZJ;class tA extends Tl{constructor(e,i){const{text:n,resolution:r,style:s,anchor:a,width:o,height:l,roundPixels:h,...d}=e;super({...d}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=i,this.text=n??"",this.style=s,this.resolution=r??null,this.allowChildren=!1,this._anchor=new In({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=h??!1,o!==void 0&&(this.width=o),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,i){typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,this.bounds.width),i!==void 0&&this._setHeight(i,this.bounds.height)}containsPoint(e){const i=this.bounds.width,n=this.bounds.height,r=-i*this.anchor.x;let s=0;return e.x>=r&&e.x<=r+i&&(s=-n*this.anchor.y,e.y>=s&&e.y<=s+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function iA(t,e){let i=t[0]??{};return(typeof i=="string"||t[1])&&(ft(Yt,`use new ${e}({ text: "hi!", style }) instead`),i={text:i,style:t[1]}),i}let Gd=null,nc=null;function Bye(t,e){Gd||(Gd=Wt.get().createCanvas(256,128),nc=Gd.getContext("2d",{willReadFrequently:!0}),nc.globalCompositeOperation="copy",nc.globalAlpha=1),(Gd.width<t||Gd.height<e)&&(Gd.width=yf(t),Gd.height=yf(e))}function Z5(t,e,i){for(let n=0,r=4*i*e;n<e;++n,r+=4)if(t[r+3]!==0)return!1;return!0}function J5(t,e,i,n,r){const s=4*e;for(let a=n,o=n*s+4*i;a<=r;++a,o+=s)if(t[o+3]!==0)return!1;return!0}function eee(...t){let e=t[0];e.canvas||(e={canvas:t[0],resolution:t[1]});const{canvas:i}=e,n=Math.min(e.resolution??1,1),r=e.width??i.width,s=e.height??i.height;let a=e.output;if(Bye(r,s),!nc)throw new TypeError("Failed to get canvas 2D context");nc.drawImage(i,0,0,r,s,0,0,r*n,s*n);const l=nc.getImageData(0,0,r,s).data;let h=0,d=0,p=r-1,g=s-1;for(;d<s&&Z5(l,r,d);)++d;if(d===s)return zi.EMPTY;for(;Z5(l,r,g);)--g;for(;J5(l,r,h,d,g);)++h;for(;J5(l,r,p,d,g);)--p;return++p,++g,nc.globalCompositeOperation="source-over",nc.strokeRect(h,d,p-h,g-d),nc.globalCompositeOperation="copy",a??(a=new zi),a.set(h/n,d/n,(p-h)/n,(g-d)/n),a}const eU=new zi;class kye{getCanvasAndContext(e){const{text:i,style:n,resolution:r=1}=e,s=n._getFinalPadding(),a=vs.measureText(i||" ",n),o=Math.ceil(Math.ceil(Math.max(1,a.width)+s*2)*r),l=Math.ceil(Math.ceil(Math.max(1,a.height)+s*2)*r),h=gl.getOptimalCanvasAndContext(o,l);this._renderTextToCanvas(i,n,s,r,h);const d=n.trim?eee({canvas:h.canvas,width:o,height:l,resolution:1,output:eU}):eU.set(0,0,o,l);return{canvasAndContext:h,frame:d}}returnCanvasAndContext(e){gl.returnCanvasAndContext(e)}_renderTextToCanvas(e,i,n,r,s){const{canvas:a,context:o}=s,l=Hx(i),h=vs.measureText(e||" ",i),d=h.lines,p=h.lineHeight,g=h.lineWidths,y=h.maxLineWidth,v=h.fontProperties,S=a.height;if(o.resetTransform(),o.scale(r,r),o.textBaseline=i.textBaseline,i._stroke?.width){const R=i._stroke;o.lineWidth=R.width,o.miterLimit=R.miterLimit,o.lineJoin=R.join,o.lineCap=R.cap}o.font=l;let T,A;const D=i.dropShadow?2:1;for(let R=0;R<D;++R){const B=i.dropShadow&&R===0,z=B?Math.ceil(Math.max(1,S)+n*2):0,L=z*r;if(B){o.fillStyle="black",o.strokeStyle="black";const j=i.dropShadow,O=j.color,q=j.alpha;o.shadowColor=Pi.shared.setValue(O).setAlpha(q).toRgbaString();const re=j.blur*r,ae=j.distance*r;o.shadowBlur=re,o.shadowOffsetX=Math.cos(j.angle)*ae,o.shadowOffsetY=Math.sin(j.angle)*ae+L}else{if(o.fillStyle=i._fill?Vx(i._fill,o,h,n*2):null,i._stroke?.width){const j=i._stroke.width*.5+n*2;o.strokeStyle=Vx(i._stroke,o,h,j)}o.shadowColor="black"}let H=(p-v.fontSize)/2;p-v.fontSize<0&&(H=0);const te=i._stroke?.width??0;for(let j=0;j<d.length;j++)T=te/2,A=te/2+j*p+v.ascent+H,i.align==="right"?T+=y-g[j]:i.align==="center"&&(T+=(y-g[j])/2),i._stroke?.width&&this._drawLetterSpacing(d[j],i,s,T+n,A+n-z,!0),i._fill!==void 0&&this._drawLetterSpacing(d[j],i,s,T+n,A+n-z)}}_drawLetterSpacing(e,i,n,r,s,a=!1){const{context:o}=n,l=i.letterSpacing;let h=!1;if(vs.experimentalLetterSpacingSupported&&(vs.experimentalLetterSpacing?(o.letterSpacing=`${l}px`,o.textLetterSpacing=`${l}px`,h=!0):(o.letterSpacing="0px",o.textLetterSpacing="0px")),l===0||h){a?o.strokeText(e,r,s):o.fillText(e,r,s);return}let d=r;const p=vs.graphemeSegmenter(e);let g=o.measureText(e).width,y=0;for(let v=0;v<p.length;++v){const S=p[v];a?o.strokeText(S,d,s):o.fillText(S,d,s);let T="";for(let A=v+1;A<p.length;++A)T+=p[A];y=o.measureText(T).width,d+=g-y+l,g=y}}}const Ym=new kye;class nA extends tA{constructor(...e){const i=iA(e,"Text");super(i,Ua),this.renderPipeId="text",i.textureStyle&&(this.textureStyle=i.textureStyle instanceof La?i.textureStyle:new La(i.textureStyle))}updateBounds(){const e=this._bounds,i=this._anchor;let n=0,r=0;if(this._style.trim){const{frame:s,canvasAndContext:a}=Ym.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Ym.returnCanvasAndContext(a),n=s.width,r=s.height}else{const s=vs.measureText(this._text,this._style);n=s.width,r=s.height}e.minX=-i._x*n,e.maxX=e.minX+n,e.minY=-i._y*r,e.maxY=e.minY+r}}class tee extends WJ{resolveQueueItem(e,i){return e instanceof sr?this.resolveContainerQueueItem(e,i):e instanceof Xn||e instanceof it?i.push(e.source):e instanceof Vs&&i.push(e),null}resolveContainerQueueItem(e,i){e instanceof hu||e instanceof JJ||e instanceof Ng?i.push(e.texture.source):e instanceof nA?i.push(e):e instanceof lg?i.push(e.context):e instanceof Xx&&e.textures.forEach(n=>{n.source?i.push(n.source):i.push(n.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:i}=e;for(const n of i)if(n.action==="texture"){const{image:r}=n.data;return r.source}else if(n.action==="fill"){const{texture:r}=n.data.style;return r.source}return null}}class FF extends tA{constructor(...e){var i;const n=iA(e,"BitmapText");n.style??(n.style=n.style||{}),(i=n.style).fill??(i.fill=16777215),super(n,Ua),this.renderPipeId="bitmapText"}updateBounds(){const e=this._bounds,i=this._anchor,n=ug.measureText(this.text,this._style),r=n.scale,s=n.offsetY*r;let a=n.width*r,o=n.height*r;const l=this._style._stroke;l&&(a+=l.width,o+=l.width),e.minX=-i._x*a,e.maxX=e.minX+a,e.minY=-i._y*(o+s),e.maxY=e.minY+o}set resolution(e){e!==null&&Ct("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}function iee(t){const e=t._stroke,i=t._fill,r=[`div { ${[`color: ${Pi.shared.setValue(i.color).toHex()}`,`font-size: ${t.fontSize}px`,`font-family: ${t.fontFamily}`,`font-weight: ${t.fontWeight}`,`font-style: ${t.fontStyle}`,`font-variant: ${t.fontVariant}`,`letter-spacing: ${t.letterSpacing}px`,`text-align: ${t.align}`,`padding: ${t.padding}px`,`white-space: ${t.whiteSpace==="pre"&&t.wordWrap?"pre-wrap":t.whiteSpace}`,...t.lineHeight?[`line-height: ${t.lineHeight}px`]:[],...t.wordWrap?[`word-wrap: ${t.breakWords?"break-all":"break-word"}`,`max-width: ${t.wordWrapWidth}px`]:[],...e?[ree(e)]:[],...t.dropShadow?[nee(t.dropShadow)]:[],...t.cssOverrides].join(";")} }`];return Oye(t.tagStyles,r),r.join(" ")}function nee(t){const e=Pi.shared.setValue(t.color).setAlpha(t.alpha).toHexa(),i=Math.round(Math.cos(t.angle)*t.distance),n=Math.round(Math.sin(t.angle)*t.distance),r=`${i}px ${n}px`;return t.blur>0?`text-shadow: ${r} ${t.blur}px ${e}`:`text-shadow: ${r} ${e}`}function ree(t){return[`-webkit-text-stroke-width: ${t.width}px`,`-webkit-text-stroke-color: ${Pi.shared.setValue(t.color).toHex()}`,`text-stroke-width: ${t.width}px`,`text-stroke-color: ${Pi.shared.setValue(t.color).toHex()}`,"paint-order: stroke"].join(";")}const tU={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},iU={fill:t=>`color: ${Pi.shared.setValue(t).toHex()}`,breakWords:t=>`word-wrap: ${t?"break-all":"break-word"}`,stroke:ree,dropShadow:nee};function Oye(t,e){for(const i in t){const n=t[i],r=[];for(const s in n)iU[s]?r.push(iU[s](n[s])):tU[s]&&r.push(tU[s].replace("{{VALUE}}",n[s]));e.push(`${i} { ${r.join(";")} }`)}}class rA extends Ua{constructor(e={}){super(e),this._cssOverrides=[],this.cssOverrides=e.cssOverrides??[],this.tagStyles=e.tagStyles??{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new rA({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){return this._cssStyle||(this._cssStyle=iee(this)),this._cssStyle}addOverride(...e){const i=e.filter(n=>!this.cssOverrides.includes(n));i.length>0&&(this.cssOverrides.push(...i),this.update())}removeOverride(...e){const i=e.filter(n=>this.cssOverrides.includes(n));i.length>0&&(this.cssOverrides=this.cssOverrides.filter(n=>!i.includes(n)),this.update())}set fill(e){typeof e!="string"&&typeof e!="number"&&Ct("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=e}set stroke(e){e&&typeof e!="string"&&typeof e!="number"&&Ct("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=e}}const nU="http://www.w3.org/2000/svg",rU="http://www.w3.org/1999/xhtml";class IF{constructor(){this.svgRoot=document.createElementNS(nU,"svg"),this.foreignObject=document.createElementNS(nU,"foreignObject"),this.domElement=document.createElementNS(rU,"div"),this.styleElement=document.createElementNS(rU,"style");const{foreignObject:e,svgRoot:i,styleElement:n,domElement:r}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",i.appendChild(e),e.appendChild(n),e.appendChild(r),this.image=Wt.get().createImage()}destroy(){this.svgRoot.remove(),this.foreignObject.remove(),this.styleElement.remove(),this.domElement.remove(),this.image.src="",this.image.remove(),this.svgRoot=null,this.foreignObject=null,this.styleElement=null,this.domElement=null,this.image=null,this.canvasAndContext=null}}let sU;function LF(t,e,i,n){n||(n=sU||(sU=new IF));const{domElement:r,styleElement:s,svgRoot:a}=n;r.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${t}</div>`,r.setAttribute("style","transform-origin: top left; display: inline-block"),i&&(s.textContent=i),document.body.appendChild(a);const o=r.getBoundingClientRect();a.remove();const l=e.padding*2;return{width:o.width-l,height:o.height-l}}class see extends tA{constructor(...e){const i=iA(e,"HtmlText");super(i,rA),this.renderPipeId="htmlText",i.textureStyle&&(this.textureStyle=i.textureStyle instanceof La?i.textureStyle:new La(i.textureStyle))}updateBounds(){const e=this._bounds,i=this._anchor,n=LF(this.text,this._style),{width:r,height:s}=n;e.minX=-i._x*r,e.maxX=e.minX+r,e.minY=-i._y*s,e.maxY=e.minY+s}get text(){return this._text}set text(e){const i=this._sanitiseText(e.toString());super.text=i}_sanitiseText(e){return this._removeInvalidHtmlTags(e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;"))}_removeInvalidHtmlTags(e){const i=/<[^>]*?(?=<|$)/g;return e.replace(i,"")}}class aee extends tee{uploadQueueItem(e){e instanceof Xn?this.uploadTextureSource(e):e instanceof nA?this.uploadText(e):e instanceof see?this.uploadHTMLText(e):e instanceof FF?this.uploadBitmapText(e):e instanceof Vs&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:i}=e;for(const n of i)if(n.action==="texture"){const{image:r}=n.data;this.uploadTextureSource(r.source)}else if(n.action==="fill"){const{texture:r}=n.data.style;this.uploadTextureSource(r.source)}return null}}class oee extends aee{destroy(){super.destroy(),clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}oee.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"prepare"};class NF{constructor(){this._tempState=Na.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,i,n){const r=e.renderer,s=this._didUploadHash[n.uid];r.shader.bind(n,s),s||(this._didUploadHash[n.uid]=!0),r.shader.updateUniformGroup(r.globalUniforms.uniformGroup),r.geometry.bind(i,n.glProgram)}execute(e,i){const n=e.renderer;this._tempState.blendMode=i.blendMode,n.state.set(this._tempState);const r=i.textures.textures;for(let s=0;s<i.textures.count;s++)n.texture.bind(r[s],s);n.geometry.draw(i.topology,i.size,i.start)}}NF.extension={type:[me.WebGLPipesAdaptor],name:"batch"};function Fye(t){const e=[];let i=0;for(let n=0;n<t;n++)e[i]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:i,visibility:GPUShaderStage.FRAGMENT},i++,e[i]={sampler:{type:"filtering"},binding:i,visibility:GPUShaderStage.FRAGMENT},i++;return e}function Iye(t){const e={};let i=0;for(let n=0;n<t;n++)e[`textureSource${n+1}`]=i++,e[`textureSampler${n+1}`]=i++;return e}const J1=Na.for2d();class UF{start(e,i,n){const r=e.renderer,s=r.encoder,a=n.gpuProgram;this._shader=n,this._geometry=i,s.setGeometry(i,a),J1.blendMode="normal",r.pipeline.getPipeline(i,a,J1);const o=r.globalUniforms.bindGroup;s.resetBindGroup(1),s.setBindGroup(0,o,a)}execute(e,i){const n=this._shader.gpuProgram,r=e.renderer,s=r.encoder;if(!i.bindGroup){const l=i.textures;i.bindGroup=VS(l.textures,l.count,r.limits.maxBatchableTextures)}J1.blendMode=i.blendMode;const a=r.bindGroup.getBindGroup(i.bindGroup,n,1),o=r.pipeline.getPipeline(this._geometry,n,J1,i.topology);i.bindGroup._touch(r.textureGC.count),s.setPipeline(o),s.renderPassEncoder.setBindGroup(1,a),s.renderPassEncoder.drawIndexed(i.size,1,i.start)}}UF.extension={type:[me.WebGPUPipesAdaptor],name:"batch"};const GF=class uee{constructor(e,i){this.state=Na.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=i,this._adaptor.init?.(this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let i=this._batchersByInstructionSet[e.uid];i||(i=this._batchersByInstructionSet[e.uid]=Object.create(null),i.default||(i.default=new $S({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=i,this._activeBatch=this._activeBatches.default;for(const n in this._activeBatches)this._activeBatches[n].begin()}addToBatch(e,i){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(i);let n=this._activeBatches[e.batcherName];n||(n=this._activeBatches[e.batcherName]=uee.getBatcher(e.batcherName),n.begin()),this._activeBatch=n}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);const i=this._activeBatches;for(const n in i){const r=i[n],s=r.geometry;s.indexBuffer.setDataWithSize(r.indexBuffer,r.indexSize,!0),s.buffers[0].setDataWithSize(r.attributeBuffer.float32View,r.attributeSize,!1)}}upload(e){const i=this._batchersByInstructionSet[e.uid];for(const n in i){const r=i[n],s=r.geometry;r.dirty&&(r.dirty=!1,s.buffers[0].update(r.attributeSize*4))}}execute(e){if(e.action==="startBatch"){const i=e.batcher,n=i.geometry,r=i.shader;this._adaptor.start(this,n,r)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};GF.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"batch"};GF._availableBatchers=Object.create(null);let HF=GF;Zi.handleByMap(me.Batcher,HF._availableBatchers);Zi.add($S);function Lye(t){const e=t.split(/([\n{}])/g).map(r=>r.trim()).filter(r=>r.length);let i="";return e.map(r=>{let s=i+r;return r==="{"?i+="    ":r==="}"&&(i=i.substr(0,i.length-4),s=i+r),s}).join(`
`)}const qm={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},lee={...qm,vertex:{...qm.vertex,header:qm.vertex.header.replace("group(1)","group(2)")}},sA={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},cee={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},hee={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},Nye=new Ir;class Uye extends kx{constructor(){super(),this.filters=[new XJ({sprite:new hu(it.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(e){this.filters[0].sprite=e}get inverse(){return this.filters[0].inverse}set inverse(e){this.filters[0].inverse=e}}class zF{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,i,n){const r=this._renderer;if(r.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:i._maskOptions.inverse,canBundle:!1,maskedContainer:i}),e.inverse=i._maskOptions.inverse,e.renderMaskToTexture){const s=e.mask;s.includeInBuild=!0,s.collectRenderables(n,r,null),s.includeInBuild=!1}r.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:i,inverse:i._maskOptions.inverse,canBundle:!1})}pop(e,i,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:i._maskOptions.inverse,canBundle:!1})}execute(e){const i=this._renderer,n=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){const r=hr.get(Uye);if(r.inverse=e.inverse,n){e.mask.mask.measurable=!0;const s=v_(e.mask.mask,!0,Nye);e.mask.mask.measurable=!1,s.ceil();const a=i.renderTarget.renderTarget.colorTexture.source,o=ir.getOptimalTexture(s.width,s.height,a._resolution,a.antialias);i.renderTarget.push(o,!0),i.globalUniforms.push({offset:s,worldColor:4294967295});const l=r.sprite;l.texture=o,l.worldTransform.tx=s.minX,l.worldTransform.ty=s.minY,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer,filterTexture:o})}else r.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){const r=this._activeMaskStage[this._activeMaskStage.length-1];n&&(i.type===pa.WEBGL&&i.renderTarget.finishRenderPass(),i.renderTarget.pop(),i.globalUniforms.pop()),i.filter.push({renderPipeId:"filter",action:"pushFilter",container:r.maskedContainer,filterEffect:r.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){i.filter.pop();const r=this._activeMaskStage.pop();n&&ir.returnTexture(r.filterTexture),hr.return(r.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}zF.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"alphaMask"};class VF{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,i,n){this._renderer.renderPipes.batch.break(n);const s=this._colorStack;s[this._colorStackIndex]=s[this._colorStackIndex-1]&e.mask;const a=this._colorStack[this._colorStackIndex];a!==this._currentColor&&(this._currentColor=a,n.add({renderPipeId:"colorMask",colorMask:a,canBundle:!1})),this._colorStackIndex++}pop(e,i,n){this._renderer.renderPipes.batch.break(n);const s=this._colorStack;this._colorStackIndex--;const a=s[this._colorStackIndex-1];a!==this._currentColor&&(this._currentColor=a,n.add({renderPipeId:"colorMask",colorMask:a,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._renderer=null,this._colorStack=null}}VF.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"colorMask"};class Gye{constructor(e){this.priority=0,this.pipe="scissorMask",this.mask=e,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(e,i){FS(this.mask,e,i)}addLocalBounds(e,i){IS(this.mask,e,i)}containsPoint(e,i){const n=this.mask;return i(n,e)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}class jF{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,i,n){var r;const s=e,a=this._renderer;a.renderPipes.batch.break(n),a.renderPipes.blendMode.setBlendMode(s.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:i._maskOptions.inverse,canBundle:!1});const o=s.mask;o.includeInBuild=!0,this._maskHash.has(s)||this._maskHash.set(s,{instructionsStart:0,instructionsLength:0});const l=this._maskHash.get(s);l.instructionsStart=n.instructionSize,o.collectRenderables(n,a,null),o.includeInBuild=!1,a.renderPipes.batch.break(n),n.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:i._maskOptions.inverse,canBundle:!1});const h=n.instructionSize-l.instructionsStart-1;l.instructionsLength=h;const d=a.renderTarget.renderTarget.uid;(r=this._maskStackHash)[d]??(r[d]=0)}pop(e,i,n){const r=e,s=this._renderer;s.renderPipes.batch.break(n),s.renderPipes.blendMode.setBlendMode(r.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:i._maskOptions.inverse,canBundle:!1});const a=this._maskHash.get(e);for(let o=0;o<a.instructionsLength;o++)n.instructions[n.instructionSize++]=n.instructions[a.instructionsStart++];n.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var i;const n=this._renderer,r=n.renderTarget.renderTarget.uid;let s=(i=this._maskStackHash)[r]??(i[r]=0);e.action==="pushMaskBegin"?(n.renderTarget.ensureDepthStencil(),n.stencil.setStencilMode(nr.RENDERING_MASK_ADD,s),s++,n.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?n.stencil.setStencilMode(nr.INVERSE_MASK_ACTIVE,s):n.stencil.setStencilMode(nr.MASK_ACTIVE,s),n.colorMask.setMask(15)):e.action==="popMaskBegin"?(n.colorMask.setMask(0),s!==0?n.stencil.setStencilMode(nr.RENDERING_MASK_REMOVE,s):(n.renderTarget.clear(null,la.STENCIL),n.stencil.setStencilMode(nr.DISABLED,s)),s--):e.action==="popMaskEnd"&&(e.inverse?n.stencil.setStencilMode(nr.INVERSE_MASK_ACTIVE,s):n.stencil.setStencilMode(nr.MASK_ACTIVE,s),n.colorMask.setMask(15)),this._maskStackHash[r]=s}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}jF.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"stencilMask"};var rx=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(rx||{});class dee{constructor(e,i){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=i}}class XF{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){this._gl=this._renderer.gl,this._gpuBuffers=Object.create(null),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){const{_gl:i}=this,n=this.getGlBuffer(e);i.bindBuffer(n.type,n.buffer)}bindBufferBase(e,i){const{_gl:n}=this;this._boundBufferBases[i]!==e&&(this._boundBufferBases[i]=e,e._lastBindBaseLocation=i,n.bindBufferBase(n.UNIFORM_BUFFER,i,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let i=this.getLastBindBaseLocation(e);if(i>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,i;let n=0,r=this._nextBindBaseIndex;for(;n<2;){r>=this._maxBindings&&(r=this._minBaseLocation,n++);const s=this._boundBufferBases[r];if(s&&s._lastBindCallId===this._bindCallId){r++;continue}break}return i=r,this._nextBindBaseIndex=r+1,n>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[i]=null,i)}getLastBindBaseLocation(e){const i=e._lastBindBaseLocation;return this._boundBufferBases[i]===e?i:-1}bindBufferRange(e,i,n,r){const{_gl:s}=this;n||(n=0),i||(i=0),this._boundBufferBases[i]=null,s.bindBufferRange(s.UNIFORM_BUFFER,i||0,e.buffer,n*256,r||256)}updateBuffer(e){const{_gl:i}=this,n=this.getGlBuffer(e);if(e._updateID===n.updateID)return n;n.updateID=e._updateID,i.bindBuffer(n.type,n.buffer);const r=e.data,s=e.descriptor.usage&wi.STATIC?i.STATIC_DRAW:i.DYNAMIC_DRAW;return r?n.byteLength>=r.byteLength?i.bufferSubData(n.type,0,r,0,e._updateSize/r.BYTES_PER_ELEMENT):(n.byteLength=r.byteLength,i.bufferData(n.type,r,s)):(n.byteLength=e.descriptor.size,i.bufferData(n.type,n.byteLength,s)),n}destroyAll(){const e=this._gl;for(const i in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[i].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,i){const n=this._gpuBuffers[e.uid],r=this._gl;i||r.deleteBuffer(n.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){const{_gl:i}=this;let n=rx.ARRAY_BUFFER;e.descriptor.usage&wi.INDEX?n=rx.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&wi.UNIFORM&&(n=rx.UNIFORM_BUFFER);const r=new dee(i.createBuffer(),n);return this._gpuBuffers[e.uid]=r,e.on("destroy",this.onBufferDestroy,this),r}resetState(){this._boundBufferBases=Object.create(null)}}XF.extension={type:[me.WebGLSystem],name:"buffer"};const YF=class fee{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){e={...fee.defaultOptions,...e};let i=this.multiView=e.multiView;if(e.context&&i&&(Ct("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),i=!1),i?this.canvas=Wt.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{const n=this._renderer.background.alpha<1,r=e.premultipliedAlpha??!0,s=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:n,premultipliedAlpha:r,antialias:s,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Ct("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:i}=this;(i.width<e.width||i.height<e.height)&&(i.width=Math.max(e.width,e.width),i.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof Wt.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);const i=this._renderer.view.canvas;i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,i){let n;const r=this.canvas;if(e===2&&(n=r.getContext("webgl2",i)),!n&&(n=r.getContext("webgl",i),!n))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=n,this.initFromContext(this.gl)}getExtensions(){const{gl:e}=this,i={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...i,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...i,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};const n=e.getExtension("WEBGL_provoking_vertex");n&&n.provokingVertexWEBGL(n.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(e){const i=e.getContextAttributes();i&&!i.stencil&&Ct("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=this.supports,r=this.webGLVersion===2,s=this.extensions;n.uint32Indices=r||!!s.uint32ElementIndex,n.uniformBufferObject=r,n.vertexArrayObject=r||!!s.vertexArrayObject,n.srgbTextures=r||!!s.srgb,n.nonPowOf2wrapping=r,n.nonPowOf2mipmaps=r,n.msaa=r,n.uint32Indices||Ct("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};YF.extension={type:[me.WebGLSystem],name:"context"};YF.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let pee=YF;function qF(t,e){for(const i in t.attributes){const n=t.attributes[i],r=e[i];r?(n.format??(n.format=r.format),n.offset??(n.offset=r.offset),n.instance??(n.instance=r.instance)):Ct(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}Hye(t)}function Hye(t){const{buffers:e,attributes:i}=t,n={},r={};for(const s in e){const a=e[s];n[a.uid]=0,r[a.uid]=0}for(const s in i){const a=i[s];n[a.buffer.uid]+=cc(a.format).stride}for(const s in i){const a=i[s];a.stride??(a.stride=n[a.buffer.uid]),a.start??(a.start=r[a.buffer.uid]),r[a.buffer.uid]+=cc(a.format).stride}}var FE=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(FE||{}),WF=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(WF||{}),mee=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(mee||{}),Fi=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Fi||{});const aU={uint8x2:Fi.UNSIGNED_BYTE,uint8x4:Fi.UNSIGNED_BYTE,sint8x2:Fi.BYTE,sint8x4:Fi.BYTE,unorm8x2:Fi.UNSIGNED_BYTE,unorm8x4:Fi.UNSIGNED_BYTE,snorm8x2:Fi.BYTE,snorm8x4:Fi.BYTE,uint16x2:Fi.UNSIGNED_SHORT,uint16x4:Fi.UNSIGNED_SHORT,sint16x2:Fi.SHORT,sint16x4:Fi.SHORT,unorm16x2:Fi.UNSIGNED_SHORT,unorm16x4:Fi.UNSIGNED_SHORT,snorm16x2:Fi.SHORT,snorm16x4:Fi.SHORT,float16x2:Fi.HALF_FLOAT,float16x4:Fi.HALF_FLOAT,float32:Fi.FLOAT,float32x2:Fi.FLOAT,float32x3:Fi.FLOAT,float32x4:Fi.FLOAT,uint32:Fi.UNSIGNED_INT,uint32x2:Fi.UNSIGNED_INT,uint32x3:Fi.UNSIGNED_INT,uint32x4:Fi.UNSIGNED_INT,sint32:Fi.INT,sint32x2:Fi.INT,sint32x3:Fi.INT,sint32x4:Fi.INT};function gee(t){return aU[t]??aU.float32}const zye={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class $F{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const i=this._renderer.context.extensions.vertexArrayObject;i&&(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=r=>i.bindVertexArrayOES(r),e.deleteVertexArray=r=>i.deleteVertexArrayOES(r));const n=this._renderer.context.extensions.vertexAttribDivisorANGLE;n&&(e.drawArraysInstanced=(r,s,a,o)=>{n.drawArraysInstancedANGLE(r,s,a,o)},e.drawElementsInstanced=(r,s,a,o,l)=>{n.drawElementsInstancedANGLE(r,s,a,o,l)},e.vertexAttribDivisor=(r,s)=>n.vertexAttribDivisorANGLE(r,s)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,i){const n=this.gl;this._activeGeometry=e;const r=this.getVao(e,i);this._activeVao!==r&&(this._activeVao=r,n.bindVertexArray(r)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const e=this._activeGeometry,i=this._renderer.buffer;for(let n=0;n<e.buffers.length;n++){const r=e.buffers[n];i.updateBuffer(r)}}checkCompatibility(e,i){const n=e.attributes,r=i._attributeData;for(const s in r)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,i){const n=e.attributes,r=i._attributeData,s=["g",e.uid];for(const a in n)r[a]&&s.push(a,r[a].location);return s.join("-")}getVao(e,i){return this._geometryVaoHash[e.uid]?.[i._key]||this.initGeometryVao(e,i)}initGeometryVao(e,i,n=!0){const r=this._renderer.gl,s=this._renderer.buffer;this._renderer.shader._getProgramData(i),this.checkCompatibility(e,i);const a=this.getSignature(e,i);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));const o=this._geometryVaoHash[e.uid];let l=o[a];if(l)return o[i._key]=l,l;qF(e,i._attributeData);const h=e.buffers;l=r.createVertexArray(),r.bindVertexArray(l);for(let d=0;d<h.length;d++){const p=h[d];s.bind(p)}return this.activateVao(e,i),o[i._key]=l,o[a]=l,r.bindVertexArray(null),l}onGeometryDestroy(e,i){const n=this._geometryVaoHash[e.uid],r=this.gl;if(n){if(i)for(const s in n)this._activeVao!==n[s]&&this.unbind(),r.deleteVertexArray(n[s]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){const i=this.gl;for(const n in this._geometryVaoHash){if(e)for(const r in this._geometryVaoHash[n]){const s=this._geometryVaoHash[n];this._activeVao!==s&&this.unbind(),i.deleteVertexArray(s[r])}this._geometryVaoHash[n]=null}}activateVao(e,i){const n=this._renderer.gl,r=this._renderer.buffer,s=e.attributes;e.indexBuffer&&r.bind(e.indexBuffer);let a=null;for(const o in s){const l=s[o],h=l.buffer,d=r.getGlBuffer(h),p=i._attributeData[o];if(p){a!==d&&(r.bind(h),a=d);const g=p.location;n.enableVertexAttribArray(g);const y=cc(l.format),v=gee(l.format);if(p.format?.substring(1,4)==="int"?n.vertexAttribIPointer(g,y.size,v,l.stride,l.offset):n.vertexAttribPointer(g,y.size,v,y.normalised,l.stride,l.offset),l.instance)if(this.hasInstance){const S=l.divisor??1;n.vertexAttribDivisor(g,S)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,i,n,r){const{gl:s}=this._renderer,a=this._activeGeometry,o=zye[e||a.topology];if(r??(r=a.instanceCount),a.indexBuffer){const l=a.indexBuffer.data.BYTES_PER_ELEMENT,h=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;r!==1?s.drawElementsInstanced(o,i||a.indexBuffer.data.length,h,(n||0)*l,r):s.drawElements(o,i||a.indexBuffer.data.length,h,(n||0)*l)}else r!==1?s.drawArraysInstanced(o,n||0,i||a.getSize(),r):s.drawArrays(o,n||0,i||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null,this._geometryVaoHash=null}}$F.extension={type:[me.WebGLSystem],name:"geometry"};const Vye=new Gf({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),KF=class bee{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){const{useBackBuffer:i,antialias:n}={...bee.defaultOptions,...e};this.useBackBuffer=i,this._antialias=n,this._renderer.context.supports.msaa||(Ct("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Na.for2d();const r=new ya({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new za({glProgram:r,resources:{uTexture:it.WHITE.source}})}renderStart(e){const i=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!i.isRoot,this._useBackBufferThisRender){const n=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=n.colorTexture,e.target=this._getBackBufferTexture(n.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:Vye,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new it({source:new Xn({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};KF.extension={type:[me.WebGLSystem],name:"backBuffer",priority:1};KF.defaultOptions={useBackBuffer:!1};let yee=KF;class QF{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}}QF.extension={type:[me.WebGLSystem],name:"colorMask"};class ZF{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,i){this._renderer.geometry.bind(e,i.glProgram)}finishRenderPass(){}draw(e){const i=this._renderer,{geometry:n,shader:r,state:s,skipSync:a,topology:o,size:l,start:h,instanceCount:d}=e;i.shader.bind(r,a),i.geometry.bind(n,i.shader._activeProgram),s&&i.state.set(s),i.geometry.draw(o,l,h,d??n.instanceCount)}destroy(){this._renderer=null}}ZF.extension={type:[me.WebGLSystem],name:"encoder"};class JF{constructor(e){this._renderer=e}contextChange(){const e=this._renderer.gl;this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=dF(this.maxTextures,e);const i=this._renderer.context.webGLVersion===2;this.maxUniformBindings=i?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}destroy(){}}JF.extension={type:[me.WebGLSystem],name:"limits"};class xee{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}const pc=[];pc[nr.NONE]=void 0;pc[nr.DISABLED]={stencilWriteMask:0,stencilReadMask:0};pc[nr.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};pc[nr.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};pc[nr.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};pc[nr.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}};class eI{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:nr.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this.resetState()}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let i=this._renderTargetStencilState[e.uid];i||(i=this._renderTargetStencilState[e.uid]={stencilMode:nr.DISABLED,stencilReference:0}),this.setStencilMode(i.stencilMode,i.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=nr.NONE,this._stencilCache.stencilReference=0}setStencilMode(e,i){const n=this._renderTargetStencilState[this._activeRenderTarget.uid],r=this._gl,s=pc[e],a=this._stencilCache;if(n.stencilMode=e,n.stencilReference=i,e===nr.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,r.disable(r.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,r.enable(r.STENCIL_TEST)),(e!==a.stencilMode||a.stencilReference!==i)&&(a.stencilMode=e,a.stencilReference=i,r.stencilFunc(this._comparisonFuncMapping[s.stencilBack.compare],i,255),r.stencilOp(r.KEEP,r.KEEP,this._stencilOpsMapping[s.stencilBack.passOp]))}}eI.extension={type:[me.WebGLSystem],name:"stencil"};class tI{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!aF())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){const i=this.getUniformGroupData(e);e.buffer||(e.buffer=new da({data:new Float32Array(i.layout.size/4),usage:wi.UNIFORM|wi.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){const i=e._signature;let n=this._syncFunctionHash[i];if(!n){const r=Object.keys(e.uniformStructures).map(o=>e.uniformStructures[o]),s=this._adaptor.createUboElements(r),a=this._generateUboSync(s.uboElements);n=this._syncFunctionHash[i]={layout:s,syncFunction:a}}return this._syncFunctionHash[i]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,i,n){const r=this.getUniformGroupData(e);e.buffer||(e.buffer=new da({data:new Float32Array(r.layout.size/4),usage:wi.UNIFORM|wi.COPY_DST}));let s=null;return i||(i=e.buffer.data,s=e.buffer.dataInt32),n||(n=0),r.syncFunction(e.uniforms,i,s,n),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;const i=this.syncUniformGroup(e);return e.buffer.update(),i}destroy(){this._syncFunctionHash=null}}const iI={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function _ee(t){const e=t.map(s=>({data:s,offset:0,size:0})),i=16;let n=0,r=0;for(let s=0;s<e.length;s++){const a=e[s];if(n=iI[a.data.type],!n)throw new Error(`Unknown type ${a.data.type}`);a.data.size>1&&(n=Math.max(n,i)*a.data.size);const o=n===12?16:n;a.size=n;const l=r%i;l>0&&i-l<o?r+=(i-l)%16:r+=(n-l%n)%n,a.offset=r,r+=n}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}const wh=[{type:"mat3x3<f32>",test:t=>t.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:t=>t.type==="vec2<f32>"&&t.size===1&&t.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:t=>t.type==="vec3<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function nI(t,e,i,n){const r=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let s=0;for(let o=0;o<t.length;o++){const l=t[o],h=l.data.name;let d=!1,p=0;for(let g=0;g<wh.length;g++)if(wh[g].test(l.data)){p=l.offset/4,r.push(`name = "${h}";`,`offset += ${p-s};`,wh[g][e]||wh[g].ubo),d=!0;break}if(!d)if(l.data.size>1)p=l.offset/4,r.push(i(l,p-s));else{const g=n[l.data.type];p=l.offset/4,r.push(`
                    v = uv.${h};
                    offset += ${p-s};
                    ${g};
                `)}s=p}const a=r.join(`
`);return new Function("uv","data","dataInt32","offset",a)}function hm(t,e){return`
        for (let i = 0; i < ${t*e}; i++) {
            data[offset + (((i / ${t})|0) * 4) + (i % ${t})] = v[i];
        }
    `}const rI={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":hm(3,2),"mat4x2<f32>":hm(4,2),"mat2x3<f32>":hm(2,3),"mat4x3<f32>":hm(4,3),"mat2x4<f32>":hm(2,4),"mat3x4<f32>":hm(3,4)},vee={...rI,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function Tee(t,e){const i=Math.max(iI[t.data.type]/16,1),n=t.data.value.length/t.data.size,r=(4-n%4)%4,s=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${t.data.name};
        offset += ${e};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${t.data.size*i}; i++)
        {
            for(var j = 0; j < ${n}; j++)
            {
                ${s}[arrayOffset++] = v[t++];
            }
            ${r!==0?`arrayOffset += ${r};`:""}
        }
    `}function Eee(t){return nI(t,"uboStd40",Tee,rI)}class sI extends tI{constructor(){super({createUboElements:_ee,generateUboSync:Eee})}}sI.extension={type:[me.WebGLSystem],name:"ubo"};class See{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new zi}init(e,i){this._renderer=e,this._renderTargetSystem=i,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new zi}copyToTexture(e,i,n,r,s){const a=this._renderTargetSystem,o=this._renderer,l=a.getGpuRenderTarget(e),h=o.gl;return this.finishRenderPass(e),h.bindFramebuffer(h.FRAMEBUFFER,l.resolveTargetFramebuffer),o.texture.bind(i,0),h.copyTexSubImage2D(h.TEXTURE_2D,0,s.x,s.y,n.x,n.y,r.width,r.height),i}startRenderPass(e,i=!0,n,r){const s=this._renderTargetSystem,a=e.colorTexture,o=s.getGpuRenderTarget(e);let l=r.y;e.isRoot&&(l=a.pixelHeight-r.height),e.colorTextures.forEach(p=>{this._renderer.texture.unbind(p)});const h=this._renderer.gl;h.bindFramebuffer(h.FRAMEBUFFER,o.framebuffer);const d=this._viewPortCache;(d.x!==r.x||d.y!==l||d.width!==r.width||d.height!==r.height)&&(d.x=r.x,d.y=l,d.width=r.width,d.height=r.height,h.viewport(r.x,l,r.width,r.height)),!o.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(o),this.clear(e,i,n)}finishRenderPass(e){const n=this._renderTargetSystem.getGpuRenderTarget(e);if(!n.msaa)return;const r=this._renderer.gl;r.bindFramebuffer(r.FRAMEBUFFER,n.resolveTargetFramebuffer),r.bindFramebuffer(r.READ_FRAMEBUFFER,n.framebuffer),r.blitFramebuffer(0,0,n.width,n.height,0,0,n.width,n.height,r.COLOR_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)}initGpuRenderTarget(e){const n=this._renderer.gl,r=new xee;return e.colorTexture instanceof ol?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),r.framebuffer=null,r):(this._initColor(e,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r)}destroyGpuRenderTarget(e){const i=this._renderer.gl;e.framebuffer&&(i.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(i.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(i.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(n=>{i.deleteRenderbuffer(n)}),e.msaaRenderBuffer=null}clear(e,i,n){if(!i)return;const r=this._renderTargetSystem;typeof i=="boolean"&&(i=i?la.ALL:la.NONE);const s=this._renderer.gl;if(i&la.COLOR){n??(n=r.defaultClearColor);const a=this._clearColorCache,o=n;(a[0]!==o[0]||a[1]!==o[1]||a[2]!==o[2]||a[3]!==o[3])&&(a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],s.clearColor(o[0],o[1],o[2],o[3]))}s.clear(i)}resizeGpuRenderTarget(e){if(e.isRoot)return;const n=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,n),(e.stencil||e.depth)&&this._resizeStencil(n)}_initColor(e,i){const n=this._renderer,r=n.gl,s=r.createFramebuffer();if(i.resolveTargetFramebuffer=s,r.bindFramebuffer(r.FRAMEBUFFER,s),i.width=e.colorTexture.source.pixelWidth,i.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((a,o)=>{const l=a.source;l.antialias&&(n.context.supports.msaa?i.msaa=!0:Ct("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),n.texture.bindSource(l,0);const d=n.texture.getGlSource(l).texture;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+o,3553,d,0)}),i.msaa){const a=r.createFramebuffer();i.framebuffer=a,r.bindFramebuffer(r.FRAMEBUFFER,a),e.colorTextures.forEach((o,l)=>{const h=r.createRenderbuffer();i.msaaRenderBuffer[l]=h})}else i.framebuffer=s;this._resizeColor(e,i)}_resizeColor(e,i){const n=e.colorTexture.source;if(i.width=n.pixelWidth,i.height=n.pixelHeight,e.colorTextures.forEach((r,s)=>{s!==0&&r.source.resize(n.width,n.height,n._resolution)}),i.msaa){const r=this._renderer,s=r.gl,a=i.framebuffer;s.bindFramebuffer(s.FRAMEBUFFER,a),e.colorTextures.forEach((o,l)=>{const h=o.source;r.texture.bindSource(h,0);const p=r.texture.getGlSource(h).internalFormat,g=i.msaaRenderBuffer[l];s.bindRenderbuffer(s.RENDERBUFFER,g),s.renderbufferStorageMultisample(s.RENDERBUFFER,4,p,h.pixelWidth,h.pixelHeight),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+l,s.RENDERBUFFER,g)})}}_initStencil(e){if(e.framebuffer===null)return;const i=this._renderer.gl,n=i.createRenderbuffer();e.depthStencilRenderBuffer=n,i.bindRenderbuffer(i.RENDERBUFFER,n),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n),this._resizeStencil(e)}_resizeStencil(e){const i=this._renderer.gl;i.bindRenderbuffer(i.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?i.renderbufferStorageMultisample(i.RENDERBUFFER,4,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,this._renderer.context.webGLVersion===2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,e.width,e.height)}prerender(e){const i=e.colorTexture.resource;this._renderer.context.multiView&&ol.test(i)&&this._renderer.context.ensureCanvasSize(i)}postrender(e){if(this._renderer.context.multiView&&ol.test(e.colorTexture.resource)){const i=this._renderer.context.canvas,n=e.colorTexture;n.context2D.drawImage(i,0,n.pixelHeight-i.height)}}}function Aee(t,e,i,n,r,s){const a=s?1:-1;return t.identity(),t.a=1/n*2,t.d=a*(1/r*2),t.tx=-1-e*t.a,t.ty=-a-i*t.d,t}const Zd=new Map;Uf.register(Zd);function aI(t,e){if(!Zd.has(t)){const i=new it({source:new ol({resource:t,...e})}),n=()=>{Zd.get(t)===i&&Zd.delete(t)};i.once("destroy",n),i.source.once("destroy",n),Zd.set(t,i)}return Zd.get(t)}function jye(t){return Zd.has(t)}function Cee(t){const e=t.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}const wee=class Dee{constructor(e={}){if(this.uid=gn("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...Dee.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let i=0;i<e.colorTextures;i++)this.colorTextures.push(new Xn({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(n=>n.source)];const i=this.colorTexture.source;this.resize(i.width,i.height,i._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof it||e.depthStencilTexture instanceof Xn?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Xn({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,i,n=this.resolution,r=!1){this.dirtyId++,this.colorTextures.forEach((s,a)=>{r&&a===0||s.source.resize(e,i,n)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,i,n)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};wee.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let IE=wee;class oI{constructor(e){this.rootViewPort=new zi,this.viewport=new zi,this.onRenderTargetChange=new oF("onRenderTargetChange"),this.projectionMatrix=new gt,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:i,clearColor:n,frame:r}){this._renderTargetStack.length=0,this.push(e,i,n,r),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=Cee(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(e,i=!0,n,r){const s=this.getRenderTarget(e),a=this.renderTarget!==s;this.renderTarget=s,this.renderSurface=e;const o=this.getGpuRenderTarget(s);(s.pixelWidth!==o.width||s.pixelHeight!==o.height)&&(this.adaptor.resizeGpuRenderTarget(s),o.width=s.pixelWidth,o.height=s.pixelHeight);const l=s.colorTexture,h=this.viewport,d=l.pixelWidth,p=l.pixelHeight;if(!r&&e instanceof it&&(r=e.frame),r){const g=l._resolution;h.x=r.x*g+.5|0,h.y=r.y*g+.5|0,h.width=r.width*g+.5|0,h.height=r.height*g+.5|0}else h.x=0,h.y=0,h.width=d,h.height=p;return Aee(this.projectionMatrix,0,0,h.width/l.resolution,h.height/l.resolution,!s.isRoot),this.adaptor.startRenderPass(s,i,n,h),a&&this.onRenderTargetChange.emit(s),s}clear(e,i=la.ALL,n){i&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,i,n,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,i=la.ALL,n,r){const s=this.bind(e,i,n,r);return this._renderTargetStack.push({renderTarget:s,frame:r}),s}pop(){this._renderTargetStack.pop();const e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){return e.isTexture&&(e=e.source),this._renderSurfaceToRenderTargetHash.get(e)??this._initRenderTarget(e)}copyToTexture(e,i,n,r,s){n.x<0&&(r.width+=n.x,s.x-=n.x,n.x=0),n.y<0&&(r.height+=n.y,s.y-=n.y,n.y=0);const{pixelWidth:a,pixelHeight:o}=e;return r.width=Math.min(r.width,a-n.x),r.height=Math.min(r.height,o-n.y),this.adaptor.copyToTexture(e,i,n,r,s)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,i)=>{e!==i&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let i=null;return ol.test(e)&&(e=aI(e).source),e instanceof IE?i=e:e instanceof Xn&&(i=new IE({colorTextures:[e]}),e.source instanceof ol&&(i.isRoot=!0),e.once("destroy",()=>{i.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);const n=this._gpuRenderTargetHash[i.uid];n&&(this._gpuRenderTargetHash[i.uid]=null,this.adaptor.destroyGpuRenderTarget(n))})),this._renderSurfaceToRenderTargetHash.set(e,i),i}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}}class uI extends oI{constructor(e){super(e),this.adaptor=new See,this.adaptor.init(e,this)}}uI.extension={type:[me.WebGLSystem],name:"renderTarget"};class aA extends Ur{constructor({buffer:e,offset:i,size:n}){super(),this.uid=gn("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=gn("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=i|0,this.size=n,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=gn("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}function Ree(t,e){const i=[],n=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let r=!1,s=0;const a=e._getProgramData(t.glProgram);for(const l in t.groups){const h=t.groups[l];i.push(`
            resources = g[${l}].resources;
        `);for(const d in h.resources){const p=h.resources[d];if(p instanceof dr)if(p.ubo){const g=t._uniformBindMap[l][Number(d)];i.push(`
                        sS.bindUniformBlock(
                            resources[${d}],
                            '${g}',
                            ${t.glProgram._uniformBlockData[g].index}
                        );
                    `)}else i.push(`
                        ugS.updateUniformGroup(resources[${d}], p, sD);
                    `);else if(p instanceof aA){const g=t._uniformBindMap[l][Number(d)];i.push(`
                    sS.bindUniformBlock(
                        resources[${d}],
                        '${g}',
                        ${t.glProgram._uniformBlockData[g].index}
                    );
                `)}else if(p instanceof Xn){const g=t._uniformBindMap[l][d],y=a.uniformData[g];y&&(r||(r=!0,n.push(`
                        var tS = r.texture;
                        `)),e._gl.uniform1i(y.location,s),i.push(`
                        tS.bind(resources[${d}], ${s});
                    `),s++)}}}const o=[...n,...i].join(`
`);return new Function("r","s","sD",o)}class Xye{}class Pee{constructor(e,i){this.program=e,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function NM(t,e,i){const n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}function PD(t){const e=new Array(t);for(let i=0;i<e.length;i++)e[i]=!1;return e}function lI(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return PD(2*e);case"bvec3":return PD(3*e);case"bvec4":return PD(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let eT=null;const oU={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},Yye={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function cI(t,e){if(!eT){const i=Object.keys(oU);eT={};for(let n=0;n<i.length;++n){const r=i[n];eT[t[r]]=oU[r]}}return eT[e]}function Mee(t,e){const i=cI(t,e);return Yye[i]||"float32"}function Bee(t,e,i=!1){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let a=0;a<r;a++){const o=e.getActiveAttrib(t,a);if(o.name.startsWith("gl_"))continue;const l=Mee(e,o.type);n[o.name]={location:0,format:l,stride:cc(l).stride,offset:0,instance:!1,start:0}}const s=Object.keys(n);if(i){s.sort((a,o)=>a>o?1:-1);for(let a=0;a<s.length;a++)n[s[a]].location=a,e.bindAttribLocation(t,a,s[a]);e.linkProgram(t)}else for(let a=0;a<s.length;a++)n[s[a]].location=e.getAttribLocation(t,s[a]);return n}function kee(t,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};const i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let r=0;r<n;r++){const s=e.getActiveUniformBlockName(t,r),a=e.getUniformBlockIndex(t,s),o=e.getActiveUniformBlockParameter(t,r,e.UNIFORM_BLOCK_DATA_SIZE);i[s]={name:s,index:a,size:o}}return i}function Oee(t,e){const i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;r++){const s=e.getActiveUniform(t,r),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),l=cI(e,s.type);i[a]={name:a,index:r,type:l,size:s.size,isArray:o,value:lI(l,s.size)}}return i}function uU(t,e){const i=t.getShaderSource(e).split(`
`).map((h,d)=>`${d}: ${h}`),n=t.getShaderInfoLog(e),r=n.split(`
`),s={},a=r.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!s[h]?(s[h]=!0,!0):!1),o=[""];a.forEach(h=>{i[h-1]=`%c${i[h-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=i.join(`
`);o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function Fee(t,e,i,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||uU(t,i),t.getShaderParameter(n,t.COMPILE_STATUS)||uU(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function Iee(t,e){const i=NM(t,t.VERTEX_SHADER,e.vertex),n=NM(t,t.FRAGMENT_SHADER,e.fragment),r=t.createProgram();t.attachShader(r,i),t.attachShader(r,n);const s=e.transformFeedbackVaryings;s&&(typeof t.transformFeedbackVaryings!="function"?Ct("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||Fee(t,r,i,n),e._attributeData=Bee(r,t,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=Oee(r,t),e._uniformBlockData=kee(r,t),t.deleteShader(i),t.deleteShader(n);const a={};for(const l in e._uniformData){const h=e._uniformData[l];a[l]={location:t.getUniformLocation(r,l),value:lI(h.type,h.size)}}return new Pee(r,a)}const tT={textureCount:0,blockIndex:0};class hI{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(e,i){if(this._setProgram(e.glProgram),i)return;tT.textureCount=0,tT.blockIndex=0;let n=this._shaderSyncFunctions[e.glProgram._key];n||(n=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),n(this._renderer,e,tT)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,tT)}bindUniformBlock(e,i,n=0){const r=this._renderer.buffer,s=this._getProgramData(this._activeProgram),a=e._bufferResource;a||this._renderer.ubo.updateUniformGroup(e);const o=e.buffer,l=r.updateBuffer(o),h=r.freeLocationForBufferBase(l);if(a){const{offset:p,size:g}=e;p===0&&g===o.data.byteLength?r.bindBufferBase(l,h):r.bindBufferRange(l,h,p)}else r.getLastBindBaseLocation(l)!==h&&r.bindBufferBase(l,h);const d=this._activeProgram._uniformBlockData[i].index;s.uniformBlockBindings[n]!==h&&(s.uniformBlockBindings[n]=h,this._renderer.gl.uniformBlockBinding(s.program,d,h))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;const i=this._getProgramData(e);this._gl.useProgram(i.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){const i=e._key;return this._programDataHash[i]=Iee(this._gl,e),this._programDataHash[i]}destroy(){for(const e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null,this._shaderSyncFunctions=null,this._activeProgram=null,this._renderer=null,this._gl=null}_generateShaderSync(e,i){return Ree(e,i)}resetState(){this._activeProgram=null}}hI.extension={type:[me.WebGLSystem],name:"shader"};const Lee={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},Nee={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function Uee(t,e){const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const n in t.uniforms){if(!e[n]){t.uniforms[n]instanceof dr?t.uniforms[n].ubo?i.push(`
                        renderer.shader.bindUniformBlock(uv.${n}, "${n}");
                    `):i.push(`
                        renderer.shader.updateUniformGroup(uv.${n});
                    `):t.uniforms[n]instanceof aA&&i.push(`
                        renderer.shader.bindBufferResource(uv.${n}, "${n}");
                    `);continue}const r=t.uniformStructures[n];let s=!1;for(let a=0;a<wh.length;a++){const o=wh[a];if(r.type===o.type&&o.test(r)){i.push(`name = "${n}";`,wh[a].uniform),s=!0;break}}if(!s){const o=(r.size===1?Lee:Nee)[r.type].replace("location",`ud["${n}"].location`);i.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${o};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}class dI{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,i,n){const r=this._renderer.shader._getProgramData(i);(!e.isStatic||e._dirtyId!==r.uniformDirtyGroups[e.uid])&&(r.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,i)(r.uniformData,e.uniforms,this._renderer,n))}_getUniformSyncFunction(e,i){return this._uniformGroupSyncHash[e._signature]?.[i._key]||this._createUniformSyncFunction(e,i)}_createUniformSyncFunction(e,i){const n=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),r=this._getSignature(e,i._uniformData,"u");return this._cache[r]||(this._cache[r]=this._generateUniformsSync(e,i._uniformData)),n[i._key]=this._cache[r],n[i._key]}_generateUniformsSync(e,i){return Uee(e,i)}_getSignature(e,i,n){const r=e.uniforms,s=[`${n}-`];for(const a in r)s.push(a),i[a]&&s.push(i[a].type);return s.join("-")}destroy(){this._renderer=null,this._cache=null}}dI.extension={type:[me.WebGLSystem],name:"uniformGroup"};function qye(t){return t=t.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),t=`
        out vec4 finalColor;
    ${t}
    `,t}const Wye={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function $ye(t){return Wye[t]}function Gee(t){const e={};if(e.normal=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.add=[t.ONE,t.ONE],e.multiply=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.screen=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e["screen-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.erase=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],!(t instanceof Wt.get().getWebGLRenderingContext()))e.min=[t.ONE,t.ONE,t.ONE,t.ONE,t.MIN,t.MIN],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,t.MAX,t.MAX];else{const n=t.getExtension("EXT_blend_minmax");n&&(e.min=[t.ONE,t.ONE,t.ONE,t.ONE,n.MIN_EXT,n.MIN_EXT],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,n.MAX_EXT,n.MAX_EXT])}return e}const Kye=0,Qye=1,Zye=2,Jye=3,exe=4,txe=5,Hee=class UM{constructor(e){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[Kye]=this.setBlend,this.map[Qye]=this.setOffset,this.map[Zye]=this.setCullFace,this.map[Jye]=this.setDepthTest,this.map[exe]=this.setFrontFace,this.map[txe]=this.setDepthMask,this.checks=[],this.defaultState=Na.for2d(),e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){this._invertFrontFace=!e.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(e){this.gl=e,this.blendModesMap=Gee(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let i=this.stateId^e.data,n=0;for(;i;)i&1&&this.map[n].call(this,!!(e.data&1<<n)),i>>=1,n++;this.stateId=e.data}for(let i=0;i<this.checks.length;i++)this.checks[i](this,e)}forceState(e){e||(e=this.defaultState);for(let i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(let i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(UM._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(UM._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this._cullFace=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(e){this._frontFace=e,this._frontFaceDirty=!1;const i=this._invertFrontFace?!e:e;this._glFrontFace!==i&&(this._glFrontFace=i,this.gl.frontFace(this.gl[i?"CW":"CCW"]))}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;const i=this.blendModesMap[e],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,i){this.gl.polygonOffset(e,i)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,i){const n=this.checks.indexOf(e);i&&n===-1?this.checks.push(e):!i&&n!==-1&&this.checks.splice(n,1)}static _checkBlendMode(e,i){e.setBlendMode(i.blendMode)}static _checkPolygonOffset(e,i){e.setPolygonOffset(1,i.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};Hee.extension={type:[me.WebGLSystem],name:"state"};let zee=Hee;class Vee{constructor(e){this.target=WF.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=Fi.UNSIGNED_BYTE,this.internalFormat=FE.RGBA,this.format=FE.RGBA,this.samplerType=0}}const jee={id:"buffer",upload(t,e,i){e.width===t.width||e.height===t.height?i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.width,t.height,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,t.width,t.height,0,e.format,e.type,t.resource),e.width=t.width,e.height=t.height}},ixe={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},Xee={id:"compressed",upload(t,e,i){i.pixelStorei(i.UNPACK_ALIGNMENT,4);let n=t.pixelWidth,r=t.pixelHeight;const s=!!ixe[t.format];for(let a=0;a<t.resource.length;a++){const o=t.resource[a];s?i.compressedTexImage2D(i.TEXTURE_2D,a,e.internalFormat,n,r,0,o):i.texImage2D(i.TEXTURE_2D,a,e.internalFormat,n,r,0,e.format,e.type,o),n=Math.max(n>>1,1),r=Math.max(r>>1,1)}}},fI={id:"image",upload(t,e,i,n){const r=e.width,s=e.height,a=t.pixelWidth,o=t.pixelHeight,l=t.resourceWidth,h=t.resourceHeight;l<a||h<o?((r!==a||s!==o)&&i.texImage2D(e.target,0,e.internalFormat,a,o,0,e.format,e.type,null),n===2?i.texSubImage2D(i.TEXTURE_2D,0,0,0,l,h,e.format,e.type,t.resource):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource)):r===a&&s===o?i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource):n===2?i.texImage2D(e.target,0,e.internalFormat,a,o,0,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,e.format,e.type,t.resource),e.width=a,e.height=o}},Yee={id:"video",upload(t,e,i,n){if(!t.isValid){i.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}fI.upload(t,e,i,n)}},GM={linear:9729,nearest:9728},qee={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},XT={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},Wee={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function HM(t,e,i,n,r,s,a,o){const l=s;if(!o||t.addressModeU!=="repeat"||t.addressModeV!=="repeat"||t.addressModeW!=="repeat"){const h=XT[a?"clamp-to-edge":t.addressModeU],d=XT[a?"clamp-to-edge":t.addressModeV],p=XT[a?"clamp-to-edge":t.addressModeW];e[r](l,e.TEXTURE_WRAP_S,h),e[r](l,e.TEXTURE_WRAP_T,d),e.TEXTURE_WRAP_R&&e[r](l,e.TEXTURE_WRAP_R,p)}if((!o||t.magFilter!=="linear")&&e[r](l,e.TEXTURE_MAG_FILTER,GM[t.magFilter]),i){if(!o||t.mipmapFilter!=="linear"){const h=qee[t.minFilter][t.mipmapFilter];e[r](l,e.TEXTURE_MIN_FILTER,h)}}else e[r](l,e.TEXTURE_MIN_FILTER,GM[t.minFilter]);if(n&&t.maxAnisotropy>1){const h=Math.min(t.maxAnisotropy,e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[r](l,n.TEXTURE_MAX_ANISOTROPY_EXT,h)}t.compare&&e[r](l,e.TEXTURE_COMPARE_FUNC,Wee[t.compare])}function $ee(t){return{r8unorm:t.RED,r8snorm:t.RED,r8uint:t.RED,r8sint:t.RED,r16uint:t.RED,r16sint:t.RED,r16float:t.RED,rg8unorm:t.RG,rg8snorm:t.RG,rg8uint:t.RG,rg8sint:t.RG,r32uint:t.RED,r32sint:t.RED,r32float:t.RED,rg16uint:t.RG,rg16sint:t.RG,rg16float:t.RG,rgba8unorm:t.RGBA,"rgba8unorm-srgb":t.RGBA,rgba8snorm:t.RGBA,rgba8uint:t.RGBA,rgba8sint:t.RGBA,bgra8unorm:t.RGBA,"bgra8unorm-srgb":t.RGBA,rgb9e5ufloat:t.RGB,rgb10a2unorm:t.RGBA,rg11b10ufloat:t.RGB,rg32uint:t.RG,rg32sint:t.RG,rg32float:t.RG,rgba16uint:t.RGBA,rgba16sint:t.RGBA,rgba16float:t.RGBA,rgba32uint:t.RGBA,rgba32sint:t.RGBA,rgba32float:t.RGBA,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT,depth24plus:t.DEPTH_COMPONENT,"depth24plus-stencil8":t.DEPTH_STENCIL,depth32float:t.DEPTH_COMPONENT,"depth32float-stencil8":t.DEPTH_STENCIL}}function Kee(t,e){let i={},n=t.RGBA;return t instanceof Wt.get().getWebGLRenderingContext()?e.srgb&&(i={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(i={"rgba8unorm-srgb":t.SRGB8_ALPHA8,"bgra8unorm-srgb":t.SRGB8_ALPHA8},n=t.RGBA8),{r8unorm:t.R8,r8snorm:t.R8_SNORM,r8uint:t.R8UI,r8sint:t.R8I,r16uint:t.R16UI,r16sint:t.R16I,r16float:t.R16F,rg8unorm:t.RG8,rg8snorm:t.RG8_SNORM,rg8uint:t.RG8UI,rg8sint:t.RG8I,r32uint:t.R32UI,r32sint:t.R32I,r32float:t.R32F,rg16uint:t.RG16UI,rg16sint:t.RG16I,rg16float:t.RG16F,rgba8unorm:t.RGBA,...i,rgba8snorm:t.RGBA8_SNORM,rgba8uint:t.RGBA8UI,rgba8sint:t.RGBA8I,bgra8unorm:n,rgb9e5ufloat:t.RGB9_E5,rgb10a2unorm:t.RGB10_A2,rg11b10ufloat:t.R11F_G11F_B10F,rg32uint:t.RG32UI,rg32sint:t.RG32I,rg32float:t.RG32F,rgba16uint:t.RGBA16UI,rgba16sint:t.RGBA16I,rgba16float:t.RGBA16F,rgba32uint:t.RGBA32UI,rgba32sint:t.RGBA32I,rgba32float:t.RGBA32F,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT16,depth24plus:t.DEPTH_COMPONENT24,"depth24plus-stencil8":t.DEPTH24_STENCIL8,depth32float:t.DEPTH_COMPONENT32F,"depth32float-stencil8":t.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function Qee(t){return{r8unorm:t.UNSIGNED_BYTE,r8snorm:t.BYTE,r8uint:t.UNSIGNED_BYTE,r8sint:t.BYTE,r16uint:t.UNSIGNED_SHORT,r16sint:t.SHORT,r16float:t.HALF_FLOAT,rg8unorm:t.UNSIGNED_BYTE,rg8snorm:t.BYTE,rg8uint:t.UNSIGNED_BYTE,rg8sint:t.BYTE,r32uint:t.UNSIGNED_INT,r32sint:t.INT,r32float:t.FLOAT,rg16uint:t.UNSIGNED_SHORT,rg16sint:t.SHORT,rg16float:t.HALF_FLOAT,rgba8unorm:t.UNSIGNED_BYTE,"rgba8unorm-srgb":t.UNSIGNED_BYTE,rgba8snorm:t.BYTE,rgba8uint:t.UNSIGNED_BYTE,rgba8sint:t.BYTE,bgra8unorm:t.UNSIGNED_BYTE,"bgra8unorm-srgb":t.UNSIGNED_BYTE,rgb9e5ufloat:t.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:t.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:t.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:t.UNSIGNED_INT,rg32sint:t.INT,rg32float:t.FLOAT,rgba16uint:t.UNSIGNED_SHORT,rgba16sint:t.SHORT,rgba16float:t.HALF_FLOAT,rgba32uint:t.UNSIGNED_INT,rgba32sint:t.INT,rgba32float:t.FLOAT,stencil8:t.UNSIGNED_BYTE,depth16unorm:t.UNSIGNED_SHORT,depth24plus:t.UNSIGNED_INT,"depth24plus-stencil8":t.UNSIGNED_INT_24_8,depth32float:t.FLOAT,"depth32float-stencil8":t.FLOAT_32_UNSIGNED_INT_24_8_REV}}function nxe(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let i=0;i<e;i+=4){const n=t[i+3];if(n!==0){const r=255.001/n;t[i]=t[i]*r+.5,t[i+1]=t[i+1]*r+.5,t[i+2]=t[i+2]*r+.5}}}const rxe=4;class pI{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:fI,buffer:jee,video:Yee,compressed:Xee},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=Kee(e,this._renderer.context.extensions),this._mapFormatToType=Qee(e),this._mapFormatToFormat=$ee(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let i=0;i<16;i++)this.bind(it.EMPTY,i)}initSource(e){this.bind(e)}bind(e,i=0){const n=e.source;e?(this.bindSource(n,i),this._useSeparateSamplers&&this._bindSampler(n.style,i)):(this.bindSource(null,i),this._useSeparateSamplers&&this._bindSampler(null,i))}bindSource(e,i=0){const n=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[i]!==e){this._boundTextures[i]=e,this._activateLocation(i),e||(e=it.EMPTY.source);const r=this.getGlSource(e);n.bindTexture(r.target,r.texture)}}_bindSampler(e,i=0){const n=this._gl;if(!e){this._boundSamplers[i]=null,n.bindSampler(i,null);return}const r=this._getGlSampler(e);this._boundSamplers[i]!==r&&(this._boundSamplers[i]=r,n.bindSampler(i,r))}unbind(e){const i=e.source,n=this._boundTextures,r=this._gl;for(let s=0;s<n.length;s++)if(n[s]===i){this._activateLocation(s);const a=this.getGlSource(i);r.bindTexture(a.target,null),n[s]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){const i=this._gl,n=new Vee(i.createTexture());if(n.type=this._mapFormatToType[e.format],n.internalFormat=this._mapFormatToInternalFormat[e.format],n.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){const r=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(r))+1}return this._glTextures[e.uid]=n,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),n}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,i){const n=this._gl,r=this.getGlSource(e);n.bindTexture(n.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=e,HM(e.style,n,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",n.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,i)}onSourceUnload(e){const i=this._glTextures[e.uid];i&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(i.texture))}onSourceUpdate(e){const i=this._gl,n=this.getGlSource(e);i.bindTexture(i.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=e;const r=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==r&&(this._premultiplyAlpha=r,i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,n,i,this._renderer.context.webGLVersion):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.pixelWidth,e.pixelHeight,0,i.RGBA,i.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,i=!0){i&&this.bindSource(e,0);const n=this.getGlSource(e);this._gl.generateMipmap(n.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){const i=this._gl,n=this._gl.createSampler();return this._glSamplers[e._resourceId]=n,HM(e,i,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",n,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){const{pixels:i,width:n,height:r}=this.getPixels(e),s=Wt.get().createCanvas();s.width=n,s.height=r;const a=s.getContext("2d");if(a){const o=a.createImageData(n,r);o.data.set(i),a.putImageData(o,0,0)}return s}getPixels(e){const i=e.source.resolution,n=e.frame,r=Math.max(Math.round(n.width*i),1),s=Math.max(Math.round(n.height*i),1),a=new Uint8Array(rxe*r*s),o=this._renderer,l=o.renderTarget.getRenderTarget(e),h=o.renderTarget.getGpuRenderTarget(l),d=o.gl;return d.bindFramebuffer(d.FRAMEBUFFER,h.resolveTargetFramebuffer),d.readPixels(Math.round(n.x*i),Math.round(n.y*i),r,s,d.RGBA,d.UNSIGNED_BYTE,a),{pixels:new Uint8ClampedArray(a.buffer),width:r,height:s}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._glTextures=null,this._glSamplers=null,this._boundTextures=null,this._boundSamplers=null,this._mapFormatToInternalFormat=null,this._mapFormatToType=null,this._mapFormatToFormat=null,this._uploads=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(it.EMPTY.source),this._boundSamplers=Object.create(null);const e=this._gl;this._premultiplyAlpha=!1,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}pI.extension={type:[me.WebGLSystem],name:"texture"};class mI{contextChange(e){const i=new dr({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new gt,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),n=e.limits.maxBatchableTextures,r=Og({name:"graphics",bits:[XS,qS(n),sA,Ig]});this.shader=new za({glProgram:r,resources:{localUniforms:i,batchSamplers:WS(n)}})}execute(e,i){const n=i.context,r=n.customShader||this.shader,s=e.renderer,a=s.graphicsContext,{batcher:o,instructions:l}=a.getContextRenderData(n);r.groups[0]=s.globalUniforms.bindGroup,s.state.set(e.state),s.shader.bind(r),s.geometry.bind(o.geometry,r.glProgram);const h=l.instructions;for(let d=0;d<l.instructionSize;d++){const p=h[d];if(p.size){for(let g=0;g<p.textures.count;g++)s.texture.bind(p.textures.textures[g],g);s.geometry.draw(p.topology,p.size,p.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}mI.extension={type:[me.WebGLPipesAdaptor],name:"graphics"};class gI{init(){const e=Og({name:"mesh",bits:[sA,hee,Ig]});this._shader=new za({glProgram:e,resources:{uTexture:it.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new gt}}}})}execute(e,i){const n=e.renderer;let r=i._shader;if(r){if(!r.glProgram){Ct("Mesh shader has no glProgram",i.shader);return}}else{r=this._shader;const s=i.texture,a=s.source;r.resources.uTexture=a,r.resources.uSampler=a.style,r.resources.textureUniforms.uniforms.uTextureMatrix=s.textureMatrix.mapCoord}r.groups[100]=n.globalUniforms.bindGroup,r.groups[101]=e.localUniformsBindGroup,n.encoder.draw({geometry:i._geometry,shader:r,state:i.state})}destroy(){this._shader.destroy(!0),this._shader=null}}gI.extension={type:[me.WebGLPipesAdaptor],name:"mesh"};class bI{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,i){this._renderer.renderPipes.batch.break(i),i.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}}bI.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"customRender"};class P_{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){}}function LE(t,e){const i=t.instructionSet,n=i.instructions;for(let r=0;r<i.instructionSize;r++){const s=n[r];e[s.renderPipeId].execute(s)}}const sxe=new gt;class yI{constructor(e){this._renderer=e}addRenderGroup(e,i){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,i):this._addRenderableDirect(e,i)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,i){this._renderer.renderPipes.batch.break(i),e._batchableRenderGroup&&(hr.return(e._batchableRenderGroup),e._batchableRenderGroup=null),i.add(e)}_addRenderableCacheAsTexture(e,i){const n=e._batchableRenderGroup??(e._batchableRenderGroup=hr.get(P_));n.renderable=e.root,n.transform=e.root.relativeGroupTransform,n.texture=e.texture,n.bounds=e._textureBounds,i.add(e),this._renderer.renderPipes.blendMode.pushBlendMode(e,e.root.groupBlendMode,i),this._renderer.renderPipes.batch.addToBatch(n,i),this._renderer.renderPipes.blendMode.popBlendMode(i)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;const i=sxe.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:i,worldColor:4294967295,offset:{x:0,y:0}}),LE(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),LE(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}yI.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"renderGroup"};function NE(t,e){e||(e=0);for(let i=e;i<t.length&&t[i];i++)t[i]=null}const axe=new sr,lU=Um|Fx|OS;function xI(t,e=!1){Zee(t);const i=t.childrenToUpdate,n=t.updateTick++;for(const r in i){const s=Number(r),a=i[r],o=a.list,l=a.index;for(let h=0;h<l;h++){const d=o[h];d.parentRenderGroup===t&&d.relativeRenderGroupDepth===s&&_I(d,n,0)}NE(o,l),a.index=0}if(e)for(let r=0;r<t.renderGroupChildren.length;r++)xI(t.renderGroupChildren[r],e)}function Zee(t){const e=t.root;let i;if(t.renderGroupParent){const n=t.renderGroupParent;t.worldTransform.appendFrom(e.relativeGroupTransform,n.worldTransform),t.worldColor=Ox(e.groupColor,n.worldColor),i=e.groupAlpha*n.worldAlpha}else t.worldTransform.copyFrom(e.localTransform),t.worldColor=e.localColor,i=e.localAlpha;i=i<0?0:i>1?1:i,t.worldAlpha=i,t.worldColorAlpha=t.worldColor+((i*255|0)<<24)}function _I(t,e,i){if(e===t.updateTick)return;t.updateTick=e,t.didChange=!1;const n=t.localTransform;t.updateLocalTransform();const r=t.parent;if(r&&!r.renderGroup?(i|=t._updateFlags,t.relativeGroupTransform.appendFrom(n,r.relativeGroupTransform),i&lU&&cU(t,r,i)):(i=t._updateFlags,t.relativeGroupTransform.copyFrom(n),i&lU&&cU(t,axe,i)),!t.renderGroup){const s=t.children,a=s.length;for(let h=0;h<a;h++)_I(s[h],e,i);const o=t.parentRenderGroup,l=t;l.renderPipeId&&!o.structureDidChange&&o.updateRenderable(l)}}function cU(t,e,i){if(i&Fx){t.groupColor=Ox(t.localColor,e.groupColor);let n=t.localAlpha*e.groupAlpha;n=n<0?0:n>1?1:n,t.groupAlpha=n,t.groupColorAlpha=t.groupColor+((n*255|0)<<24)}i&OS&&(t.groupBlendMode=t.localBlendMode==="inherit"?e.groupBlendMode:t.localBlendMode),i&Um&&(t.globalDisplayStatus=t.localDisplayStatus&e.globalDisplayStatus),t._updateFlags=0}function Jee(t,e){const{list:i}=t.childrenRenderablesToUpdate;let n=!1;for(let r=0;r<t.childrenRenderablesToUpdate.index;r++){const s=i[r];if(n=e[s.renderPipeId].validateRenderable(s),n)break}return t.structureDidChange=n,n}const oxe=new gt;class vI{constructor(e){this._renderer=e}render({container:e,transform:i}){const n=e.parent,r=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;const s=this._renderer,a=oxe;i&&(a.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(i));const o=s.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),s.globalUniforms.start({worldTransformMatrix:i?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),LE(e.renderGroup,o),o.uniformBatch&&o.uniformBatch.renderEnd(),i&&e.renderGroup.localTransform.copyFrom(a),e.parent=n,e.renderGroup.renderGroupParent=r}destroy(){this._renderer=null}_updateCachedRenderGroups(e,i){if(e._parentCacheAsTextureRenderGroup=i,e.isCachedAsTexture){if(!e.textureNeedsUpdate)return;i=e}for(let n=e.renderGroupChildren.length-1;n>=0;n--)this._updateCachedRenderGroups(e.renderGroupChildren[n],i);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){const n=e.root.getLocalBounds();n.ceil();const r=e.texture;e.texture&&ir.returnTexture(e.texture,!0);const s=this._renderer,a=e.textureOptions.resolution||s.view.resolution,o=e.textureOptions.antialias??s.view.antialias,l=e.textureOptions.scaleMode??"linear",h=ir.getOptimalTexture(n.width,n.height,a,o);h._source.style=new La({scaleMode:l}),e.texture=h,e._textureBounds||(e._textureBounds=new Ir),e._textureBounds.copyFrom(n),r!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(ir.returnTexture(e.texture,!0),e.texture=null)}_updateRenderGroups(e){const i=this._renderer,n=i.renderPipes;if(e.runOnRender(i),e.instructionSet.renderPipes=n,e.structureDidChange?NE(e.childrenRenderablesToUpdate.list,0):Jee(e,n),xI(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,i)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,i.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let r=0;r<e.renderGroupChildren.length;r++)this._updateRenderGroups(e.renderGroupChildren[r])}_updateRenderables(e){const{list:i,index:n}=e.childrenRenderablesToUpdate;for(let r=0;r<n;r++){const s=i[r];s.didViewUpdate&&e.updateRenderable(s)}NE(i,n)}_buildInstructions(e,i){const n=e.root,r=e.instructionSet;r.reset();const s=i.renderPipes?i:i.batch.renderer,a=s.renderPipes;a.batch.buildStart(r),a.blendMode.buildStart(),a.colorMask.buildStart(),n.sortableChildren&&n.sortChildren(),n.collectRenderablesWithEffects(r,s,null),a.batch.buildEnd(r),a.blendMode.buildEnd(r)}}vI.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"renderGroup"};class TI{constructor(e){this._renderer=e}addRenderable(e,i){const n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,i)}updateRenderable(e){const i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),i._batcher.updateElement(i)}validateRenderable(e){const i=this._getGpuSprite(e);return!i._batcher.checkAndUpdateTexture(i,e._texture)}_updateBatchableSprite(e,i){i.bounds=e.visualBounds,i.texture=e._texture}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const i=new P_;return i.renderable=e,i.transform=e.groupTransform,i.texture=e._texture,i.bounds=e.visualBounds,i.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=i,i}destroy(){this._renderer=null}}TI.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"sprite"};const EI=class ete{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Pi(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...ete.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){Pi.shared.setValue(e).alpha<1&&this._backgroundColor.alpha===1&&Ct("Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application."),this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};EI.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"background",priority:0};EI.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let tte=EI;const sx={};Zi.handle(me.BlendMode,t=>{if(!t.name)throw new Error("BlendMode extension must have a name property");sx[t.name]=t.ref},t=>{delete sx[t.name]});class SI{constructor(e){this._blendModeStack=[],this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}pushBlendMode(e,i,n){this._blendModeStack.push(i),this.setBlendMode(e,i,n)}popBlendMode(e){this._blendModeStack.pop();const i=this._blendModeStack[this._activeBlendMode.length-1]??"normal";this.setBlendMode(null,i,e)}setBlendMode(e,i,n){const r=e instanceof wE;if(this._activeBlendMode===i){this._isAdvanced&&e&&!r&&this._renderableList?.push(e);return}this._isAdvanced&&this._endAdvancedBlendMode(n),this._activeBlendMode=i,e&&(this._isAdvanced=!!sx[i],this._isAdvanced&&this._beginAdvancedBlendMode(e,n))}_beginAdvancedBlendMode(e,i){this._renderer.renderPipes.batch.break(i);const n=this._activeBlendMode;if(!sx[n]){Ct(`Unable to assign BlendMode: '${n}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}const r=this._ensureFilterEffect(n),s=e instanceof wE,a={renderPipeId:"filter",action:"pushFilter",filterEffect:r,renderables:s?null:[e],container:s?e.root:null,canBundle:!1};this._renderableList=a.renderables,i.add(a)}_ensureFilterEffect(e){let i=this._filterHash[e];return i||(i=this._filterHash[e]=new kx,i.filters=[new sx[e]]),i}_endAdvancedBlendMode(e){this._isAdvanced=!1,this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(const e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}}SI.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"blendMode"};const MD={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},AI=class ite{constructor(e){this._renderer=e}_normalizeOptions(e,i={}){return e instanceof sr||e instanceof it?{target:e,...i}:{...i,...e}}async image(e){const i=Wt.get().createImage();return i.src=await this.base64(e),i}async base64(e){e=this._normalizeOptions(e,ite.defaultImageOptions);const{format:i,quality:n}=e,r=this.canvas(e);if(r.toBlob!==void 0)return new Promise((s,a)=>{r.toBlob(o=>{if(!o){a(new Error("ICanvas.toBlob failed!"));return}const l=new FileReader;l.onload=()=>s(l.result),l.onerror=a,l.readAsDataURL(o)},MD[i],n)});if(r.toDataURL!==void 0)return r.toDataURL(MD[i],n);if(r.convertToBlob!==void 0){const s=await r.convertToBlob({type:MD[i],quality:n});return new Promise((a,o)=>{const l=new FileReader;l.onload=()=>a(l.result),l.onerror=o,l.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);const i=e.target,n=this._renderer;if(i instanceof it)return n.texture.generateCanvas(i);const r=n.textureGenerator.generateTexture(e),s=n.texture.generateCanvas(r);return r.destroy(!0),s}pixels(e){e=this._normalizeOptions(e);const i=e.target,n=this._renderer,r=i instanceof it?i:n.textureGenerator.generateTexture(e),s=n.texture.getPixels(r);return i instanceof sr&&r.destroy(!0),s}texture(e){return e=this._normalizeOptions(e),e.target instanceof it?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);const i=this.canvas(e),n=document.createElement("a");n.download=e.filename??"image.png",n.href=i.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}log(e){const i=e.width??200;e=this._normalizeOptions(e);const n=this.canvas(e),r=n.toDataURL();console.log(`[Pixi Texture] ${n.width}px ${n.height}px`);const s=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${r}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}destroy(){this._renderer=null}};AI.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"extract"};AI.defaultImageOptions={format:"png",quality:1};let nte=AI;class oA extends it{static create(e){return new oA({source:new Xn(e)})}resize(e,i,n){return this.source.resize(e,i,n),this}}const uxe=new zi,lxe=new Ir,cxe=[0,0,0,0];class CI{constructor(e){this._renderer=e}generateTexture(e){e instanceof sr&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});const i=e.resolution||this._renderer.resolution,n=e.antialias||this._renderer.view.antialias,r=e.target;let s=e.clearColor;s?s=Array.isArray(s)&&s.length===4?s:Pi.shared.setValue(s).toArray():s=cxe;const a=e.frame?.copyTo(uxe)||kS(r,lxe).rectangle;a.width=Math.max(a.width,1/i)|0,a.height=Math.max(a.height,1/i)|0;const o=oA.create({...e.textureSourceOptions,width:a.width,height:a.height,resolution:i,antialias:n}),l=gt.shared.translate(-a.x,-a.y);return this._renderer.render({container:r,transform:l,target:o,clearColor:s}),o.source.updateMipmaps(),o}destroy(){this._renderer=null}}CI.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"textureGenerator"};function hxe(t,e,i,n){i[n++]=(t>>16&255)/255,i[n++]=(t>>8&255)/255,i[n++]=(t&255)/255,i[n++]=e}function Ug(t,e,i){const n=(t>>24&255)/255;e[i++]=(t&255)/255*n,e[i++]=(t>>8&255)/255*n,e[i++]=(t>>16&255)/255*n,e[i++]=n}class wI{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:i,worldTransformMatrix:n,worldColor:r,offset:s}){const a=this._renderer.renderTarget.renderTarget,o=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new gt,worldColor:4294967295,offset:new tn},l={projectionMatrix:i||this._renderer.renderTarget.projectionMatrix,resolution:e||a.size,worldTransformMatrix:n||o.worldTransformMatrix,worldColor:r||o.worldColor,offset:s||o.offset,bindGroup:null},h=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(h);const d=h.uniforms;d.uProjectionMatrix=l.projectionMatrix,d.uResolution=l.resolution,d.uWorldTransformMatrix.copyFrom(l.worldTransformMatrix),d.uWorldTransformMatrix.tx-=l.offset.x,d.uWorldTransformMatrix.ty-=l.offset.y,Ug(l.worldColor,d.uWorldColorAlpha,0),h.update();let p;this._renderer.renderPipes.uniformBatch?p=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(h,!1):(p=this._bindGroupPool.pop()||new ul,this._activeBindGroups.push(p),p.setResource(h,0)),l.bindGroup=p,this._currentGlobalUniformData=l}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===pa.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new dr({uProjectionMatrix:{value:new gt,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new gt,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null,this._globalUniformDataStack.length=0,this._uniformsPool.length=0,this._activeUniforms.length=0,this._bindGroupPool.length=0,this._activeBindGroups.length=0,this._currentGlobalUniformData=null}}wI.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"globalUniforms"};let dxe=1;class DI{constructor(){this._tasks=[],this._offset=0}init(){Ln.system.add(this._update,this)}repeat(e,i,n=!0){const r=dxe++;let s=0;return n&&(this._offset+=1e3,s=this._offset),this._tasks.push({func:e,duration:i,start:performance.now(),offset:s,last:performance.now(),repeat:!0,id:r}),r}cancel(e){for(let i=0;i<this._tasks.length;i++)if(this._tasks[i].id===e){this._tasks.splice(i,1);return}}_update(){const e=performance.now();for(let i=0;i<this._tasks.length;i++){const n=this._tasks[i];if(e-n.offset-n.last>=n.duration){const r=e-n.start;n.func(r),n.last=e}}}destroy(){Ln.system.remove(this._update,this),this._tasks.length=0}}DI.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"scheduler",priority:0};let hU=!1;function rte(t){if(!hU){if(Wt.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const e=[`%c  %c  %c  %c  %c PixiJS %c v${Gx} (${t}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${Gx} - ${t} - http://www.pixijs.com/`);hU=!0}}class uA{constructor(e){this._renderer=e}init(e){if(e.hello){let i=this._renderer.name;this._renderer.type===pa.WEBGL&&(i+=` ${this._renderer.context.webGLVersion}`),rte(i)}}}uA.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"hello",priority:-2};uA.defaultOptions={hello:!1};function ste(t){let e=!1;for(const n in t)if(t[n]==null){e=!0;break}if(!e)return t;const i=Object.create(null);for(const n in t){const r=t[n];r&&(i[n]=r)}return i}function ate(t){let e=0;for(let i=0;i<t.length;i++)t[i]==null?e++:t[i-e]=t[i];return t.length-=e,t}let fxe=0;const RI=class ote{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e={...ote.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const i of this._managedHashes)i.context[i.hash]=ste(i.context[i.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const i of this._managedArrays)ate(i.context[i.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,i){this._managedHashes.push({context:e,hash:i})}addManagedArray(e,i){this._managedArrays.push({context:e,hash:i})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=fxe++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){const e=this._now,i=this._managedRenderables,n=this._renderer.renderPipes;let r=0;for(let s=0;s<i.length;s++){const a=i[s];if(a===null){r++;continue}const o=a.renderGroup??a.parentRenderGroup,l=o?.instructionSet?.gcTick??-1;if((o?.gcTick??0)===l&&(a._lastUsed=e),e-a._lastUsed>this.maxUnusedTime){if(!a.destroyed){const h=n;o&&(o.structureDidChange=!0),h[a.renderPipeId].destroyRenderable(a)}a._lastUsed=-1,r++,a.off("destroyed",this._removeRenderable,this)}else i[s-r]=a}i.length-=r}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){const i=this._managedRenderables.indexOf(e);i>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[i]=null)}_updateInstructionGCTick(e,i){e.instructionSet.gcTick=i;for(const n of e.renderGroupChildren)this._updateInstructionGCTick(n,i)}};RI.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"renderableGC",priority:0};RI.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let ute=RI;const PI=class lte{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){e={...lte.defaultOptions,...e},this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=e.textureGCAMaxIdle??e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this._renderer.texture.managedTextures;for(let i=0;i<e.length;i++){const n=e[i];n.autoGarbageCollect&&n.resource&&n._touched>-1&&this.count-n._touched>this.maxIdle&&(n._touched=-1,n.unload())}}destroy(){this._renderer=null}};PI.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"textureGC"};PI.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600};let cte=PI;const MI=class hte{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e={...hte.defaultOptions,...e},e.view&&(ft(Yt,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new zi(0,0,e.width,e.height),this.canvas=e.canvas||Wt.get().createCanvas(),this.antialias=!!e.antialias,this.texture=aI(this.canvas,e),this.renderTarget=new IE({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,i,n){this.texture.source.resize(e,i,n),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:!!e?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.texture.destroy()}};MI.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"view",priority:0};MI.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let dte=MI;const BI=[tte,wI,uA,dte,vI,cte,CI,nte,lF,ute,DI],kI=[SI,HF,TI,yI,zF,jF,VF,bI],pxe=[...BI,sI,yee,pee,JF,XF,pI,uI,$F,dI,hI,ZF,zee,eI,QF],mxe=[...kI],gxe=[NF,gI,mI],fte=[],pte=[],mte=[];Zi.handleByNamedList(me.WebGLSystem,fte);Zi.handleByNamedList(me.WebGLPipes,pte);Zi.handleByNamedList(me.WebGLPipesAdaptor,mte);Zi.add(...pxe,...mxe,...gxe);class gte extends T_{constructor(){const e={name:"webgl",type:pa.WEBGL,systems:fte,renderPipes:pte,renderPipeAdaptors:mte};super(e)}}const bxe=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer:gte},Symbol.toStringTag,{value:"Module"}));class OI{constructor(e){this._hash=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(e){this._gpu=e}getBindGroup(e,i,n){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,i,n)}_createBindGroup(e,i,n){const r=this._gpu.device,s=i.layout[n],a=[],o=this._renderer;for(const d in s){const p=e.resources[d]??e.resources[s[d]];let g;if(p._resourceType==="uniformGroup"){const y=p;o.ubo.updateUniformGroup(y);const v=y.buffer;g={buffer:o.buffer.getGPUBuffer(v),offset:0,size:v.descriptor.size}}else if(p._resourceType==="buffer"){const y=p;g={buffer:o.buffer.getGPUBuffer(y),offset:0,size:y.descriptor.size}}else if(p._resourceType==="bufferResource"){const y=p;g={buffer:o.buffer.getGPUBuffer(y.buffer),offset:y.offset,size:y.size}}else if(p._resourceType==="textureSampler"){const y=p;g=o.texture.getGpuSampler(y)}else if(p._resourceType==="textureSource"){const y=p;g=o.texture.getGpuSource(y).createView({})}a.push({binding:s[d],resource:g})}const l=o.shader.getProgramData(i).bindGroups[n],h=r.createBindGroup({layout:l,entries:a});return this._hash[e._key]=h,h}destroy(){for(const e of Object.keys(this._hash))this._hash[e]=null;this._hash=null,this._renderer=null}}OI.extension={type:[me.WebGPUSystem],name:"bindGroup"};class FI{constructor(e){this._gpuBuffers=Object.create(null),this._managedBuffers=[],e.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(e){this._gpu=e}getGPUBuffer(e){return this._gpuBuffers[e.uid]||this.createGPUBuffer(e)}updateBuffer(e){const i=this._gpuBuffers[e.uid]||this.createGPUBuffer(e),n=e.data;return e._updateID&&n&&(e._updateID=0,this._gpu.device.queue.writeBuffer(i,0,n.buffer,0,(e._updateSize||n.byteLength)+3&-4)),i}destroyAll(){for(const e in this._gpuBuffers)this._gpuBuffers[e].destroy();this._gpuBuffers={}}createGPUBuffer(e){this._gpuBuffers[e.uid]||(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this),e.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(e));const i=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e.data&&(PE(e.data.buffer,i.getMappedRange()),i.unmap()),this._gpuBuffers[e.uid]=i,i}onBufferChange(e){this._gpuBuffers[e.uid].destroy(),e._updateID=0,this._gpuBuffers[e.uid]=this.createGPUBuffer(e)}onBufferDestroy(e){this._managedBuffers.splice(this._managedBuffers.indexOf(e),1),this._destroyBuffer(e)}destroy(){this._managedBuffers.forEach(e=>this._destroyBuffer(e)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(e){this._gpuBuffers[e.uid].destroy(),e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this),e.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[e.uid]=null}}FI.extension={type:[me.WebGPUSystem],name:"buffer"};class bte{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);const i=this.byteIndex;let n=i+e*4;if(n=Math.ceil(n/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,n>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=n,i}addGroup(e){const i=this.addEmptyGroup(e.length);for(let n=0;n<e.length;n++)this.data[i/4+n]=e[n];return i}destroy(){this.data=null}}class II{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}}II.extension={type:[me.WebGPUSystem],name:"colorMask"};class lA{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=(e.gpu?Promise.resolve(e.gpu):this._createDeviceAndAdaptor(e)).then(i=>{this.gpu=i,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){const i=await Wt.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),n=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(s=>i.features.has(s)),r=await i.requestDevice({requiredFeatures:n});return{adapter:i,device:r}}destroy(){this.gpu=null,this._renderer=null}}lA.extension={type:[me.WebGPUSystem],name:"device"};lA.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class LI{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,i,n,r){const s=this._renderer.pipeline.getPipeline(e,i,n,r);this.setPipeline(s)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,i){this._boundVertexBuffer[e]!==i&&(this._boundVertexBuffer[e]=i,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(i)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;const i=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),i)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,i,n){if(this._boundBindGroup[e]===i)return;this._boundBindGroup[e]=i,i._touch(this._renderer.textureGC.count);const r=this._renderer.bindGroup.getBindGroup(i,n,e);this.renderPassEncoder.setBindGroup(e,r)}setGeometry(e,i){const n=this._renderer.pipeline.getBufferNamesToBind(e,i);for(const r in n)this._setVertexBuffer(parseInt(r,10),e.attributes[n[r]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,i){for(const n in e.groups){const r=e.groups[n];i||this._syncBindGroup(r),this.setBindGroup(n,r,e.gpuProgram)}}_syncBindGroup(e){for(const i in e.resources){const n=e.resources[i];n.isUniformGroup&&this._renderer.ubo.updateUniformGroup(n)}}draw(e){const{geometry:i,shader:n,state:r,topology:s,size:a,start:o,instanceCount:l,skipSync:h}=e;this.setPipelineFromGeometryProgramAndState(i,n.gpuProgram,r,s),this.setGeometry(i,n.gpuProgram),this._setShaderBindGroups(n,h),i.indexBuffer?this.renderPassEncoder.drawIndexed(a||i.indexBuffer.data.length,l??i.instanceCount,o||0):this.renderPassEncoder.draw(a||i.getSize(),l??i.instanceCount,o||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);const i=this._boundPipeline,n={...this._boundVertexBuffer},r=this._boundIndexBuffer,s={...this._boundBindGroup};this._clearCache();const a=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(a.x,a.y,a.width,a.height,0,1),this.setPipeline(i);for(const o in n)this._setVertexBuffer(o,n[o]);for(const o in s)this.setBindGroup(o,s[o],null);this._setIndexBuffer(r)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}}LI.extension={type:[me.WebGPUSystem],name:"encoder",priority:1};class NI{constructor(e){this._renderer=e}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}NI.extension={type:[me.WebGPUSystem],name:"limits"};class UI{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let i=this._renderTargetStencilState[e.uid];i||(i=this._renderTargetStencilState[e.uid]={stencilMode:nr.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(i.stencilMode,i.stencilReference)}setStencilMode(e,i){const n=this._renderTargetStencilState[this._activeRenderTarget.uid];n.stencilMode=e,n.stencilReference=i;const r=this._renderer;r.pipeline.setStencilMode(e),r.encoder.renderPassEncoder.setStencilReference(i)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}UI.extension={type:[me.WebGPUSystem],name:"stencil"};const ax={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function yte(t){const e=t.map(n=>({data:n,offset:0,size:0}));let i=0;for(let n=0;n<e.length;n++){const r=e[n];let s=ax[r.data.type].size;const a=ax[r.data.type].align;if(!ax[r.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${r.data.type}`);r.data.size>1&&(s=Math.max(s,a)*r.data.size),i=Math.ceil(i/a)*a,r.size=s,r.offset=i,i+=s}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function xte(t,e){const{size:i,align:n}=ax[t.data.type],r=(n-i)/4,s=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${t.data.name};
         ${e!==0?`offset += ${e};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${t.data.size*(i/4)}; i++)
         {
             for(var j = 0; j < ${i/4}; j++)
             {
                 ${s}[arrayOffset++] = v[t++];
             }
             ${r!==0?`arrayOffset += ${r};`:""}
         }
     `}function _te(t){return nI(t,"uboWgsl",xte,vee)}class GI extends tI{constructor(){super({createUboElements:yte,generateUboSync:_te})}}GI.extension={type:[me.WebGPUSystem],name:"ubo"};const rh=128;class HI{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new bte({minUniformOffsetAlignment:rh});const i=256/rh;for(let n=0;n<i;n++){let r=wi.UNIFORM|wi.COPY_DST;n===0&&(r|=wi.COPY_SRC),this._buffers.push(new da({data:this._batchBuffer.data,usage:r}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(const e in this._bindGroupHash)this._bindGroupHash[e]=null;this._batchBuffer.clear()}getUniformBindGroup(e,i){if(!i&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);const n=e.buffer.data,r=this._batchBuffer.addEmptyGroup(n.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,r/4),this._bindGroupHash[e.uid]=this._getBindGroup(r/rh),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);const i=e.buffer.data,n=this._batchBuffer.addGroup(i);return this._getBufferResource(n/rh)}getArrayBindGroup(e){const i=this._batchBuffer.addGroup(e);return this._getBindGroup(i/rh)}getArrayBufferResource(e){const n=this._batchBuffer.addGroup(e)/rh;return this._getBufferResource(n)}_getBufferResource(e){if(!this._bufferResources[e]){const i=this._buffers[e%2];this._bufferResources[e]=new aA({buffer:i,offset:(e/2|0)*256,size:rh})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){const i=new ul({0:this._getBufferResource(e)});this._bindGroups[e]=i}return this._bindGroups[e]}_uploadBindGroups(){const e=this._renderer.buffer,i=this._buffers[0];i.update(this._batchBuffer.byteIndex),e.updateBuffer(i);const n=this._renderer.gpu.device.createCommandEncoder();for(let r=1;r<this._buffers.length;r++){const s=this._buffers[r];n.copyBufferToBuffer(e.getGPUBuffer(i),rh,e.getGPUBuffer(s),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([n.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e]?.destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}}HI.extension={type:[me.WebGPUPipes],name:"uniformBatch"};const yxe={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function xxe(t,e,i,n,r){return t<<24|e<<16|i<<10|n<<5|r}function _xe(t,e,i,n){return i<<6|t<<3|n<<1|e}class zI{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(nr.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=pc[e],this._updatePipeHash())}setPipeline(e,i,n,r){const s=this.getPipeline(e,i,n);r.setPipeline(s)}getPipeline(e,i,n,r){e._layoutKey||(qF(e,i.attributeData),this._generateBufferKey(e)),r||(r=e.topology);const s=xxe(e._layoutKey,i._layoutKey,n.data,n._blendModeId,yxe[r]);return this._pipeCache[s]?this._pipeCache[s]:(this._pipeCache[s]=this._createPipeline(e,i,n,r),this._pipeCache[s])}_createPipeline(e,i,n,r){const s=this._gpu.device,a=this._createVertexBufferLayouts(e,i),o=this._renderer.state.getColorTargets(n);o[0].writeMask=this._stencilMode===nr.RENDERING_MASK_ADD?0:this._colorMask;const l=this._renderer.shader.getProgramData(i).pipeline,h={vertex:{module:this._getModule(i.vertex.source),entryPoint:i.vertex.entryPoint,buffers:a},fragment:{module:this._getModule(i.fragment.source),entryPoint:i.fragment.entryPoint,targets:o},primitive:{topology:r,cullMode:n.cullMode},layout:l,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(h.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:n.depthTest,depthCompare:n.depthTest?"less":"always"}),s.createRenderPipeline(h)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){const i=this._gpu.device;return this._moduleCache[e]=i.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){const i=[];let n=0;const r=Object.keys(e.attributes).sort();for(let a=0;a<r.length;a++){const o=e.attributes[r[a]];i[n++]=o.offset,i[n++]=o.format,i[n++]=o.stride,i[n++]=o.instance}const s=i.join("|");return e._layoutKey=rg(s,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){const i=[];let n=0;const r=Object.keys(e.attributeData).sort();for(let a=0;a<r.length;a++){const o=e.attributeData[r[a]];i[n++]=o.location}const s=i.join("|");return e._attributeLocationsKey=rg(s,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,i){const n=e._layoutKey<<16|i._attributeLocationsKey;if(this._bindingNamesCache[n])return this._bindingNamesCache[n];const r=this._createVertexBufferLayouts(e,i),s=Object.create(null),a=i.attributeData;for(let o=0;o<r.length;o++){const h=Object.values(r[o].attributes)[0].shaderLocation;for(const d in a)if(a[d].location===h){s[o]=d;break}}return this._bindingNamesCache[n]=s,s}_createVertexBufferLayouts(e,i){i._attributeLocationsKey||this._generateAttributeLocationsKey(i);const n=e._layoutKey<<16|i._attributeLocationsKey;if(this._bufferLayoutsCache[n])return this._bufferLayoutsCache[n];const r=[];return e.buffers.forEach(s=>{const a={arrayStride:0,stepMode:"vertex",attributes:[]},o=a.attributes;for(const l in i.attributeData){const h=e.attributes[l];(h.divisor??1)!==1&&Ct(`Attribute ${l} has an invalid divisor value of '${h.divisor}'. WebGPU only supports a divisor value of 1`),h.buffer===s&&(a.arrayStride=h.stride,a.stepMode=h.instance?"instance":"vertex",o.push({shaderLocation:i.attributeData[l].location,offset:h.offset,format:h.format}))}o.length&&r.push(a)}),this._bufferLayoutsCache[n]=r,r}_updatePipeHash(){const e=_xe(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}zI.extension={type:[me.WebGPUSystem],name:"pipeline"};class vte{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class Tte{init(e,i){this._renderer=e,this._renderTargetSystem=i}copyToTexture(e,i,n,r,s){const a=this._renderer,o=this._getGpuColorTexture(e),l=a.texture.getGpuSource(i.source);return a.encoder.commandEncoder.copyTextureToTexture({texture:o,origin:n},{texture:l,origin:s},r),i}startRenderPass(e,i=!0,n,r){const a=this._renderTargetSystem.getGpuRenderTarget(e),o=this.getDescriptor(e,i,n);a.descriptor=o,this._renderer.pipeline.setRenderTarget(a),this._renderer.encoder.beginRenderPass(a),this._renderer.encoder.setViewport(r)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){const i=this._renderTargetSystem.getGpuRenderTarget(e);return i.contexts[0]?i.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,i,n){typeof i=="boolean"&&(i=i?la.ALL:la.NONE);const r=this._renderTargetSystem,s=r.getGpuRenderTarget(e),a=e.colorTextures.map((h,d)=>{const p=s.contexts[d];let g,y;p?g=p.getCurrentTexture().createView():g=this._renderer.texture.getGpuSource(h).createView({mipLevelCount:1}),s.msaaTextures[d]&&(y=g,g=this._renderer.texture.getTextureView(s.msaaTextures[d]));const v=i&la.COLOR?"clear":"load";return n??(n=r.defaultClearColor),{view:g,resolveTarget:y,clearValue:n,storeOp:"store",loadOp:v}});let o;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=s.msaa?4:1),e.depthStencilTexture){const h=i&la.STENCIL?"clear":"load",d=i&la.DEPTH?"clear":"load";o={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:h,depthClearValue:1,depthLoadOp:d,depthStoreOp:"store"}}return{colorAttachments:a,depthStencilAttachment:o}}clear(e,i=!0,n,r){if(!i)return;const{gpu:s,encoder:a}=this._renderer,o=s.device;if(a.commandEncoder===null){const h=o.createCommandEncoder(),d=this.getDescriptor(e,i,n),p=h.beginRenderPass(d);p.setViewport(r.x,r.y,r.width,r.height,0,1),p.end();const g=h.finish();o.queue.submit([g])}else this.startRenderPass(e,i,n,r)}initGpuRenderTarget(e){e.isRoot=!0;const i=new vte;return e.colorTextures.forEach((n,r)=>{if(n instanceof ol){const s=n.resource.getContext("webgpu"),a=n.transparent?"premultiplied":"opaque";try{s.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:a})}catch(o){console.error(o)}i.contexts[r]=s}if(i.msaa=n.source.antialias,n.source.antialias){const s=new Xn({width:0,height:0,sampleCount:4});i.msaaTextures[r]=s}}),i.msaa&&(i.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),i}destroyGpuRenderTarget(e){e.contexts.forEach(i=>{i.unconfigure()}),e.msaaTextures.forEach(i=>{i.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){const i=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&i.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){const i=this._renderTargetSystem.getGpuRenderTarget(e);i.width=e.width,i.height=e.height,i.msaa&&e.colorTextures.forEach((n,r)=>{i.msaaTextures[r]?.resize(n.source.width,n.source.height,n.source._resolution)})}}class VI extends oI{constructor(e){super(e),this.adaptor=new Tte,this.adaptor.init(e,this)}}VI.extension={type:[me.WebGPUSystem],name:"renderTarget"};class jI{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){const i=this._gpu.device,n=e.gpuLayout.map(s=>i.createBindGroupLayout({entries:s})),r={bindGroupLayouts:n};return this._gpuProgramData[e._layoutKey]={bindGroups:n,pipeline:i.createPipelineLayout(r)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}jI.extension={type:[me.WebGPUSystem],name:"shader"};const Ys={};Ys.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};Ys.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};Ys.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};Ys.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Ys.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Ys.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};Ys["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};Ys["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};Ys["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};Ys.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};Ys.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};Ys.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class XI{constructor(){this.defaultState=new Na,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e){return[{format:"bgra8unorm",writeMask:0,blend:Ys[e.blendMode]||Ys.normal}]}destroy(){this.gpu=null}}XI.extension={type:[me.WebGPUSystem],name:"state"};const Ete={type:"image",upload(t,e,i){const n=t.resource,r=(t.pixelWidth|0)*(t.pixelHeight|0),s=n.byteLength/r;i.device.queue.writeTexture({texture:e},n,{offset:0,rowsPerImage:t.pixelHeight,bytesPerRow:t.pixelHeight*s},{width:t.pixelWidth,height:t.pixelHeight,depthOrArrayLayers:1})}},YI={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},vxe={blockBytes:4,blockWidth:1,blockHeight:1},Ste={type:"compressed",upload(t,e,i){let n=t.pixelWidth,r=t.pixelHeight;const s=YI[t.format]||vxe;for(let a=0;a<t.resource.length;a++){const o=t.resource[a],l=Math.ceil(n/s.blockWidth)*s.blockBytes;i.device.queue.writeTexture({texture:e,mipLevel:a},o,{offset:0,bytesPerRow:l},{width:Math.ceil(n/s.blockWidth)*s.blockWidth,height:Math.ceil(r/s.blockHeight)*s.blockHeight,depthOrArrayLayers:1}),n=Math.max(n>>1,1),r=Math.max(r>>1,1)}}},qI={type:"image",upload(t,e,i){const n=t.resource;if(!n)return;if(globalThis.HTMLImageElement&&n instanceof HTMLImageElement){const o=Wt.get().createCanvas(n.width,n.height);o.getContext("2d").drawImage(n,0,0,n.width,n.height),t.resource=o,Ct("ImageSource: Image element passed, converting to canvas and replacing resource.")}const r=Math.min(e.width,t.resourceWidth||t.pixelWidth),s=Math.min(e.height,t.resourceHeight||t.pixelHeight),a=t.alphaMode==="premultiply-alpha-on-upload";i.device.queue.copyExternalImageToTexture({source:n},{texture:e,premultipliedAlpha:a},{width:r,height:s})}},Ate={type:"video",upload(t,e,i){qI.upload(t,e,i)}};class Cte{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let i=this.pipelines[e];return i||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),i=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=i),i}generateMipmap(e){const i=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let n=e;const r=e.depthOrArrayLayers||1,s=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!s){const l={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};n=this.device.createTexture(l)}const a=this.device.createCommandEncoder({}),o=i.getBindGroupLayout(0);for(let l=0;l<r;++l){let h=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:l,arrayLayerCount:1}),d=s?1:0;for(let p=1;p<e.mipLevelCount;++p){const g=n.createView({baseMipLevel:d++,mipLevelCount:1,dimension:"2d",baseArrayLayer:l,arrayLayerCount:1}),y=a.beginRenderPass({colorAttachments:[{view:g,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),v=this.device.createBindGroup({layout:o,entries:[{binding:0,resource:this.sampler},{binding:1,resource:h}]});y.setPipeline(i),y.setBindGroup(0,v),y.draw(3,1,0,0),y.end(),h=g}}if(!s){const l={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r};for(let h=1;h<e.mipLevelCount;++h)a.copyTextureToTexture({texture:n,mipLevel:h-1},{texture:e,mipLevel:h},l),l.width=Math.ceil(l.width/2),l.height=Math.ceil(l.height/2)}return this.device.queue.submit([a.finish()]),s||n.destroy(),e}}class WI{constructor(e){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:qI,buffer:Ete,video:Ate,compressed:Ste},this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuSources"),e.renderableGC.addManagedHash(this,"_gpuSamplers"),e.renderableGC.addManagedHash(this,"_bindGroupHash"),e.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(e){this._gpu=e}initSource(e){return this._gpuSources[e.uid]?this._gpuSources[e.uid]:this._initSource(e)}_initSource(e){if(e.autoGenerateMipmaps){const l=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(l))+1}let i=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(i|=GPUTextureUsage.RENDER_ATTACHMENT,i|=GPUTextureUsage.COPY_SRC);const n=YI[e.format]||{blockWidth:1,blockHeight:1},r=Math.ceil(e.pixelWidth/n.blockWidth)*n.blockWidth,s=Math.ceil(e.pixelHeight/n.blockHeight)*n.blockHeight,a={label:e.label,size:{width:r,height:s},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:i},o=this._gpuSources[e.uid]=this._gpu.device.createTexture(a);return this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),o}onSourceUpdate(e){const i=this.getGpuSource(e);i&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,i,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onSourceUnload(e){const i=this._gpuSources[e.uid];i&&(this._gpuSources[e.uid]=null,i.destroy())}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new Cte(this._gpu.device));const i=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(i)}onSourceDestroy(e){e.off("update",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("destroy",this.onSourceDestroy,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}onSourceResize(e){const i=this._gpuSources[e.uid];i?(i.width!==e.pixelWidth||i.height!==e.pixelHeight)&&(this._textureViewHash[e.uid]=null,this._bindGroupHash[e.uid]=null,this.onSourceUnload(e),this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return this._gpuSources[e.uid]||this.initSource(e)}getTextureBindGroup(e){return this._bindGroupHash[e.uid]??this._createTextureBindGroup(e)}_createTextureBindGroup(e){const i=e.source;return this._bindGroupHash[e.uid]=new ul({0:i,1:i.style,2:new dr({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){const i=e.source;return this._textureViewHash[i.uid]??this._createTextureView(i)}_createTextureView(e){return this._textureViewHash[e.uid]=this.getGpuSource(e).createView(),this._textureViewHash[e.uid]}generateCanvas(e){const i=this._renderer,n=i.gpu.device.createCommandEncoder(),r=Wt.get().createCanvas();r.width=e.source.pixelWidth,r.height=e.source.pixelHeight;const s=r.getContext("webgpu");return s.configure({device:i.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:Wt.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),n.copyTextureToTexture({texture:i.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:r.width,height:r.height}),i.gpu.device.queue.submit([n.finish()]),r}getPixels(e){const i=this.generateCanvas(e),n=gl.getOptimalCanvasAndContext(i.width,i.height),r=n.context;r.drawImage(i,0,0);const{width:s,height:a}=i,o=r.getImageData(0,0,s,a),l=new Uint8ClampedArray(o.data.buffer);return gl.returnCanvasAndContext(n),{pixels:l,width:s,height:a}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(const e of Object.keys(this._bindGroupHash)){const i=Number(e);this._bindGroupHash[i]?.destroy(),this._bindGroupHash[i]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}}WI.extension={type:[me.WebGPUSystem],name:"texture"};class $I{constructor(){this._maxTextures=0}contextChange(e){const i=new dr({uTransformMatrix:{value:new gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=e.limits.maxBatchableTextures;const n=kg({name:"graphics",bits:[jS,YS(this._maxTextures),lee,Fg]});this.shader=new za({gpuProgram:n,resources:{localUniforms:i}})}execute(e,i){const n=i.context,r=n.customShader||this.shader,s=e.renderer,a=s.graphicsContext,{batcher:o,instructions:l}=a.getContextRenderData(n),h=s.encoder;h.setGeometry(o.geometry,r.gpuProgram);const d=s.globalUniforms.bindGroup;h.setBindGroup(0,d,r.gpuProgram);const p=s.renderPipes.uniformBatch.getUniformBindGroup(r.resources.localUniforms,!0);h.setBindGroup(2,p,r.gpuProgram);const g=l.instructions;let y=null;for(let v=0;v<l.instructionSize;v++){const S=g[v];if(S.topology!==y&&(y=S.topology,h.setPipelineFromGeometryProgramAndState(o.geometry,r.gpuProgram,e.state,S.topology)),r.groups[1]=S.bindGroup,!S.gpuBindGroup){const T=S.textures;S.bindGroup=VS(T.textures,T.count,this._maxTextures),S.gpuBindGroup=s.bindGroup.getBindGroup(S.bindGroup,r.gpuProgram,1)}h.setBindGroup(1,S.bindGroup,r.gpuProgram),h.renderPassEncoder.drawIndexed(S.size,1,S.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}$I.extension={type:[me.WebGPUPipesAdaptor],name:"graphics"};class KI{init(){const e=kg({name:"mesh",bits:[qm,cee,Fg]});this._shader=new za({gpuProgram:e,resources:{uTexture:it.EMPTY._source,uSampler:it.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new gt}}}})}execute(e,i){const n=e.renderer;let r=i._shader;if(!r)r=this._shader,r.groups[2]=n.texture.getTextureBindGroup(i.texture);else if(!r.gpuProgram){Ct("Mesh shader has no gpuProgram",i.shader);return}const s=r.gpuProgram;if(s.autoAssignGlobalUniforms&&(r.groups[0]=n.globalUniforms.bindGroup),s.autoAssignLocalUniforms){const a=e.localUniforms;r.groups[1]=n.renderPipes.uniformBatch.getUniformBindGroup(a,!0)}n.encoder.draw({geometry:i._geometry,shader:r,state:i.state})}destroy(){this._shader.destroy(!0),this._shader=null}}KI.extension={type:[me.WebGPUPipesAdaptor],name:"mesh"};const Txe=[...BI,GI,LI,lA,NI,FI,WI,VI,jI,XI,zI,II,UI,OI],Exe=[...kI,HI],Sxe=[UF,KI,$I],wte=[],Dte=[],Rte=[];Zi.handleByNamedList(me.WebGPUSystem,wte);Zi.handleByNamedList(me.WebGPUPipes,Dte);Zi.handleByNamedList(me.WebGPUPipesAdaptor,Rte);Zi.add(...Txe,...Exe,...Sxe);class Pte extends T_{constructor(){const e={name:"webgpu",type:pa.WEBGPU,systems:wte,renderPipes:Dte,renderPipeAdaptors:Rte};super(e)}}const Axe=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer:Pte},Symbol.toStringTag,{value:"Module"})),dU={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},Cxe=new Proxy(dU,{get(t,e){return ft(Yt,`DRAW_MODES.${e} is deprecated, use '${dU[e]}' instead`),t[e]}});var UE=(t=>(t.CLAMP="clamp-to-edge",t.REPEAT="repeat",t.MIRRORED_REPEAT="mirror-repeat",t))(UE||{});const wxe=new Proxy(UE,{get(t,e){return ft(Yt,`DRAW_MODES.${e} is deprecated, use '${UE[e]}' instead`),t[e]}});var GE=(t=>(t.NEAREST="nearest",t.LINEAR="linear",t))(GE||{});const Dxe=new Proxy(GE,{get(t,e){return ft(Yt,`DRAW_MODES.${e} is deprecated, use '${GE[e]}' instead`),t[e]}});class Rxe{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,i,n){const r=i.width,s=i.height;if(n){const a=e.width/2/r,o=e.height/2/s,l=e.x/r+a,h=e.y/s+o;n=ri.add(n,ri.NW),this.x0=l+a*ri.uX(n),this.y0=h+o*ri.uY(n),n=ri.add(n,2),this.x1=l+a*ri.uX(n),this.y1=h+o*ri.uY(n),n=ri.add(n,2),this.x2=l+a*ri.uX(n),this.y2=h+o*ri.uY(n),n=ri.add(n,2),this.x3=l+a*ri.uX(n),this.y3=h+o*ri.uY(n)}else this.x0=e.x/r,this.y0=e.y/s,this.x1=(e.x+e.width)/r,this.y1=e.y/s,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/s,this.x3=e.x/r,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}function Pxe(t){const e=t.toString(),i=e.indexOf("{"),n=e.lastIndexOf("}");if(i===-1||n===-1)throw new Error("getFunctionBody: No body found in function definition");return e.slice(i+1,n).trim()}function Mxe(t,e){return ft("8.7.0","Use container.getFastGlobalBounds() instead"),t.getFastGlobalBounds(!0,e)}class Bxe extends Tl{constructor(e){typeof e=="function"&&(e={render:e});const{render:i,...n}=e;super({label:"RenderContainer",...n}),this.renderPipeId="customRender",this.batched=!1,i&&(this.render=i),this.containsPoint=e.containsPoint??(()=>!1),this.addBounds=e.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(e){}}function kxe(t,e,i){ft("8.7.0","Please use container.collectRenderables instead.");const n=i.renderPipes?i:i.batch.renderer;return t.collectRenderables(e,n,null)}function Oxe(t,e){const i=e._scale,n=e._pivot,r=e._position,s=i._x,a=i._y,o=n._x,l=n._y;t.a=e._cx*s,t.b=e._sx*s,t.c=e._cy*a,t.d=e._sy*a,t.tx=r._x-(o*t.a+l*t.c),t.ty=r._y-(o*t.b+l*t.d)}function Fxe(t,e,i){const n=t.a,r=t.b,s=t.c,a=t.d,o=t.tx,l=t.ty,h=e.a,d=e.b,p=e.c,g=e.d;i.a=n*h+r*p,i.b=n*d+r*g,i.c=s*h+a*p,i.d=s*d+a*g,i.tx=o*h+l*p+e.tx,i.ty=o*d+l*g+e.ty}class Mte{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{hr.return(e)}),this.batches.length=0}}class Bte{constructor(e,i){this.state=Na.for2d(),this.renderer=e,this._adaptor=i,this.renderer.runners.contextChange.add(this)}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){const i=e.context,n=!!e._gpuData,r=this.renderer.graphicsContext.updateGpuContext(i);return!!(r.isBatchable||n!==r.isBatchable)}addRenderable(e,i){const n=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),n.isBatchable?this._addToBatcher(e,i):(this.renderer.renderPipes.batch.break(i),i.add(e))}updateRenderable(e){const n=this._getGpuDataForRenderable(e).batches;for(let r=0;r<n.length;r++){const s=n[r];s._batcher.updateElement(s)}}execute(e){if(!e.isRenderable)return;const i=this.renderer,n=e.context;if(!i.graphicsContext.getGpuContext(n).batches.length)return;const s=n.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const a=s.resources.localUniforms.uniforms;a.uTransformMatrix=e.groupTransform,a.uRound=i._roundPixels|e._roundPixels,Ug(e.groupColorAlpha,a.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const i=this._getGpuDataForRenderable(e),n=this.renderer.graphicsContext.updateGpuContext(e.context);i.destroy(),n.isBatchable&&this._updateBatchesForRenderable(e,i)}_addToBatcher(e,i){const n=this.renderer.renderPipes.batch,r=this._getGpuDataForRenderable(e).batches;for(let s=0;s<r.length;s++){const a=r[s];n.addToBatch(a,i)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){const i=new Mte;return e._gpuData[this.renderer.uid]=i,i}_updateBatchesForRenderable(e,i){const n=e.context,r=this.renderer.graphicsContext.getGpuContext(n),s=this.renderer._roundPixels|e._roundPixels;i.batches=r.batches.map(a=>{const o=hr.get(QS);return a.copyTo(o),o.renderable=e,o.roundPixels=s,o})}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}Bte.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"graphics"};function Ixe(t){t instanceof ou&&(t={path:t,textureMatrix:null,out:null});const e=[],i=[],n=[],r=t.path.shapePath,s=t.textureMatrix;r.shapePrimitives.forEach(({shape:l,transform:h})=>{const d=n.length,p=e.length/2,g=[],y=Lg[l.type];y.build(l,g),h&&KS(g,h),y.triangulate(g,e,2,p,n,d);const v=i.length/2;s?(h&&s.append(h.clone().invert()),pF(e,2,p,i,v,2,e.length/2-p,s)):mF(i,v,2,e.length/2-p)});const a=t.out;return a?(a.positions=new Float32Array(e),a.uvs=new Float32Array(i),a.indices=new Uint32Array(n),a):new qh({positions:new Float32Array(e),uvs:new Float32Array(i),indices:new Uint32Array(n)})}const kte=class Ote extends sr{constructor(e={}){e={...Ote.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let i=0;i<e.length;i++){const n=e[i];if(n.parentRenderLayer){if(n.parentRenderLayer===this)continue;n.parentRenderLayer.detach(n)}this.renderLayerChildren.push(n),n.parentRenderLayer=this;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)}return e[0]}detach(...e){for(let i=0;i<e.length;i++){const n=e[i],r=this.renderLayerChildren.indexOf(n);r!==-1&&this.renderLayerChildren.splice(r,1),n.parentRenderLayer=null;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detachAll(){const e=this.renderLayerChildren;for(let i=0;i<e.length;i++)e[i].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,i,n){const r=this.renderLayerChildren,s=r.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let a=0;a<s;a++)r[a].parent||Ct("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",r[a]),r[a].collectRenderables(e,i,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,i,n){if(!e)return;const r=this.renderLayerChildren;for(let s=0;s<r.length;s++)r[s]._getGlobalBoundsRecursive(!0,i,this)}getFastGlobalBounds(e,i){return super.getFastGlobalBounds(e,i)}addChild(...e){throw new Error("RenderLayer.addChild() is not available. Please use RenderLayer.attach()")}removeChild(...e){throw new Error("RenderLayer.removeChild() is not available. Please use RenderLayer.detach()")}removeChildren(e,i){throw new Error("RenderLayer.removeChildren() is not available. Please use RenderLayer.detach()")}removeChildAt(e){throw new Error("RenderLayer.removeChildAt() is not available")}getChildAt(e){throw new Error("RenderLayer.getChildAt() is not available")}setChildIndex(e,i){throw new Error("RenderLayer.setChildIndex() is not available")}getChildIndex(e){throw new Error("RenderLayer.getChildIndex() is not available")}addChildAt(e,i){throw new Error("RenderLayer.addChildAt() is not available")}swapChildren(e,i){throw new Error("RenderLayer.swapChildren() is not available")}reparentChild(...e){throw new Error("RenderLayer.reparentChild() is not available with the render layer")}reparentChildAt(e,i){throw new Error("RenderLayer.reparentChildAt() is not available with the render layer")}};kte.defaultOptions={sortableChildren:!1,sortFunction:(t,e)=>t.zIndex-e.zIndex};let Lxe=kte;const Fte=class Ite extends qh{constructor(...e){super({});let i=e[0]??{};typeof i=="number"&&(ft(Yt,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),i={width:i,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(i)}build(e){e={...Ite.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const i=this.verticesX*this.verticesY,n=[],r=[],s=[],a=this.verticesX-1,o=this.verticesY-1,l=this.width/a,h=this.height/o;for(let p=0;p<i;p++){const g=p%this.verticesX,y=p/this.verticesX|0;n.push(g*l,y*h),r.push(g/a,y/o)}const d=a*o;for(let p=0;p<d;p++){const g=p%a,y=p/a|0,v=y*this.verticesX+g,S=y*this.verticesX+g+1,T=(y+1)*this.verticesX+g,A=(y+1)*this.verticesX+g+1;s.push(v,S,T,S,A,T)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};Fte.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let cA=Fte;function Lte(t,e,i,n){const r=i.buffers[0],s=r.data,{verticesX:a,verticesY:o}=i,l=t/(a-1),h=e/(o-1);let d=0;const p=n[0],g=n[1],y=n[2],v=n[3],S=n[4],T=n[5],A=n[6],D=n[7],R=n[8];for(let B=0;B<s.length;B+=2){const z=d%a*l,L=(d/a|0)*h,H=p*z+g*L+y,te=v*z+S*L+T,j=A*z+D*L+R;s[B]=H/j,s[B+1]=te/j,d++}r.update()}function Nte(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],d=e[8];return t[0]=a*d-o*h,t[1]=r*h-n*d,t[2]=n*o-r*a,t[3]=o*l-s*d,t[4]=i*d-r*l,t[5]=r*s-i*o,t[6]=s*h-a*l,t[7]=n*l-i*h,t[8]=i*a-n*s,t}function Ute(t,e,i){const n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],h=e[6],d=e[7],p=e[8],g=i[0],y=i[1],v=i[2],S=i[3],T=i[4],A=i[5],D=i[6],R=i[7],B=i[8];return t[0]=g*n+y*a+v*h,t[1]=g*r+y*o+v*d,t[2]=g*s+y*l+v*p,t[3]=S*n+T*a+A*h,t[4]=S*r+T*o+A*d,t[5]=S*s+T*l+A*p,t[6]=D*n+R*a+B*h,t[7]=D*r+R*o+B*d,t[8]=D*s+R*l+B*p,t}function Nxe(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=e[0]*n+e[1]*r+e[2]*s,t[1]=e[3]*n+e[4]*r+e[5]*s,t[2]=e[6]*n+e[7]*r+e[8]*s,t}const Uxe=[0,0,0,0,0,0,0,0,0],Gxe=[0,0,0],iT=[0,0,0];function fU(t,e,i,n,r,s,a,o,l){const h=Uxe;h[0]=e,h[1]=n,h[2]=s,h[3]=i,h[4]=r,h[5]=a,h[6]=1,h[7]=1,h[8]=1;const d=Nte(t,h);iT[0]=o,iT[1]=l,iT[2]=1;const p=Nxe(Gxe,d,iT),g=t;return t[0]=p[0],t[1]=0,t[2]=0,t[3]=0,t[4]=p[1],t[5]=0,t[6]=0,t[7]=0,t[8]=p[2],Ute(t,g,h)}const Hxe=[0,0,0,0,0,0,0,0,0],zxe=[0,0,0,0,0,0,0,0,0];function Gte(t,e,i,n,r,s,a,o,l,h,d,p,g,y,v,S,T){const A=fU(Hxe,e,i,s,a,h,d,y,v),D=fU(zxe,n,r,o,l,p,g,S,T);return Ute(t,Nte(A,A),D)}class Hte extends cA{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:i,height:n}=e;this.corners=[0,0,i,0,i,n,0,n]}setCorners(e,i,n,r,s,a,o,l){const h=this.corners;h[0]=e,h[1]=i,h[2]=n,h[3]=r,h[4]=s,h[5]=a,h[6]=o,h[7]=l,this.updateProjection()}updateProjection(){const{width:e,height:i}=this,n=this.corners,r=Gte(this._projectionMatrix,0,0,n[0],n[1],e,0,n[2],n[3],e,i,n[4],n[5],0,i,n[6],n[7]);Lte(e,i,this,r)}}const zte=class Vte extends Ng{constructor(e){e={...Vte.defaultOptions,...e};const{texture:i,verticesX:n,verticesY:r,...s}=e,a=new Hte(cu({width:i.width,height:i.height,verticesX:n,verticesY:r}));super(cu({...s,geometry:a})),this._texture=i,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){const e=this.geometry;if(!e)return;const{width:i,height:n}=this.texture;(e.width!==i||e.height!==n)&&(e.width=i,e.height=n,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,i,n,r,s,a,o,l){this.geometry.setCorners(e,i,n,r,s,a,o,l)}};zte.defaultOptions={texture:it.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let Vxe=zte;class jxe extends Ng{constructor(e){const{texture:i,verticesX:n,verticesY:r,...s}=e,a=new cA(cu({width:i.width,height:i.height,verticesX:n,verticesY:r}));super(cu({...s,geometry:a,texture:i})),this.texture=i,this.autoResize=!0}textureUpdated(){const e=this.geometry,{width:i,height:n}=this.texture;this.autoResize&&(e.width!==i||e.height!==n)&&(e.width=i,e.height=n,e.build({}))}set texture(e){this._texture?.off("update",this.textureUpdated,this),super.texture=e,e.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(e){this.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const jte=class Xte extends qh{constructor(e){const{width:i,points:n,textureScale:r}={...Xte.defaultOptions,...e};super({positions:new Float32Array(n.length*4),uvs:new Float32Array(n.length*4),indices:new Uint32Array((n.length-1)*6)}),this.points=n,this._width=i,this.textureScale=r,this._build()}get width(){return this._width}_build(){const e=this.points;if(!e)return;const i=this.getBuffer("aPosition"),n=this.getBuffer("aUV"),r=this.getIndex();if(e.length<1)return;i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),r.data=new Uint16Array((e.length-1)*6));const s=n.data,a=r.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let o=0,l=e[0];const h=this._width*this.textureScale,d=e.length;for(let g=0;g<d;g++){const y=g*4;if(this.textureScale>0){const v=l.x-e[g].x,S=l.y-e[g].y,T=Math.sqrt(v*v+S*S);l=e[g],o+=T/h}else o=g/(d-1);s[y]=o,s[y+1]=0,s[y+2]=o,s[y+3]=1}let p=0;for(let g=0;g<d-1;g++){const y=g*2;a[p++]=y,a[p++]=y+1,a[p++]=y+2,a[p++]=y+2,a[p++]=y+1,a[p++]=y+3}n.update(),r.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let i=e[0],n,r=0,s=0;const a=this.buffers[0].data,o=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<o;h++){const d=e[h],p=h*4;h<e.length-1?n=e[h+1]:n=d,s=-(n.x-i.x),r=n.y-i.y;const g=Math.sqrt(r*r+s*s);g<1e-6?(r=0,s=0):(r/=g,s/=g,r*=l,s*=l),a[p]=d.x+r,a[p+1]=d.y+s,a[p+2]=d.x-r,a[p+3]=d.y-s,i=d}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};jte.defaultOptions={width:200,points:[],textureScale:0};let Yte=jte;const qte=class Wte extends Ng{constructor(e){const{texture:i,points:n,textureScale:r,...s}={...Wte.defaultOptions,...e},a=new Yte(cu({width:i.height,points:n,textureScale:r}));r>0&&(i.source.style.addressMode="repeat"),super(cu({...s,texture:i,geometry:a})),this.autoUpdate=!0,this.onRender=this._render}_render(){const e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};qte.defaultOptions={textureScale:0};let Xxe=qte;class Yxe extends Ng{constructor(e){const{texture:i,vertices:n,uvs:r,indices:s,topology:a,...o}=e,l=new qh(cu({positions:n,uvs:r,indices:s,topology:a}));super(cu({...o,texture:i,geometry:l})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(e){this.geometry.getBuffer("aPosition").data=e}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}class hA{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){const i=this.geometry.getBuffer("aUV"),n=i.data;let r=n;const s=this.texture.textureMatrix;return s.isSimple||(r=this._transformedUvs,(this._textureMatrixUpdateId!==s._updateID||this._uvUpdateId!==i._updateID)&&((!r||r.length<n.length)&&(r=this._transformedUvs=new Float32Array(n.length)),this._textureMatrixUpdateId=s._updateID,this._uvUpdateId=i._updateID,s.multiplyUvs(n,r))),r}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}function qxe(t,e){const{width:i,height:n}=t.frame;return e.scale(1/i,1/n),e}class zM{destroy(){}}class $te{constructor(e,i){this.localUniforms=new dr({uTransformMatrix:{value:new gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new ul({0:this.localUniforms}),this.renderer=e,this._adaptor=i,this._adaptor.init()}validateRenderable(e){const i=this._getMeshData(e),n=i.batched,r=e.batched;if(i.batched=r,n!==r)return!0;if(r){const s=e._geometry;if(s.indices.length!==i.indexSize||s.positions.length!==i.vertexSize)return i.indexSize=s.indices.length,i.vertexSize=s.positions.length,!0;const a=this._getBatchableMesh(e);return a.texture.uid!==e._texture.uid&&(a._textureMatrixUpdateId=-1),!a._batcher.checkAndUpdateTexture(a,e._texture)}return!1}addRenderable(e,i){const n=this.renderer.renderPipes.batch,r=this._getMeshData(e);if(e.didViewUpdate&&(r.indexSize=e._geometry.indices?.length,r.vertexSize=e._geometry.positions?.length),r.batched){const s=this._getBatchableMesh(e);s.setTexture(e._texture),s.geometry=e._geometry,n.addToBatch(s,i)}else n.break(i),i.add(e)}updateRenderable(e){if(e.batched){const i=this._getBatchableMesh(e);i.setTexture(e._texture),i.geometry=e._geometry,i._batcher.updateElement(i)}}execute(e){if(!e.isRenderable)return;e.state.blendMode=ag(e.groupBlendMode,e.texture._source);const i=this.localUniforms;i.uniforms.uTransformMatrix=e.groupTransform,i.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,i.update(),Ug(e.groupColorAlpha,i.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){var i,n;return(i=e._gpuData)[n=this.renderer.uid]||(i[n]=new zM),e._gpuData[this.renderer.uid].meshData||this._initMeshData(e)}_initMeshData(e){return e._gpuData[this.renderer.uid].meshData={batched:e.batched,indexSize:0,vertexSize:0},e._gpuData[this.renderer.uid].meshData}_getBatchableMesh(e){var i,n;return(i=e._gpuData)[n=this.renderer.uid]||(i[n]=new zM),e._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(e)}_initBatchableMesh(e){const i=new hA;return i.renderable=e,i.setTexture(e._texture),i.transform=e.groupTransform,i.roundPixels=this.renderer._roundPixels|e._roundPixels,e._gpuData[this.renderer.uid].batchableMesh=i,i}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}$te.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"mesh"};class Kte{execute(e,i){const n=e.state,r=e.renderer,s=i.shader||e.defaultShader;s.resources.uTexture=i.texture._source,s.resources.uniforms=e.localUniforms;const a=r.gl,o=e.getBuffers(i);r.shader.bind(s),r.state.set(n),r.geometry.bind(o.geometry,s.glProgram);const h=o.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;a.drawElements(a.TRIANGLES,i.particleChildren.length*6,h,0)}}class Qte{execute(e,i){const n=e.renderer,r=i.shader||e.defaultShader;r.groups[0]=n.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),r.groups[1]=n.texture.getTextureBindGroup(i.texture);const s=e.state,a=e.getBuffers(i);n.encoder.draw({geometry:a.geometry,shader:i.shader||e.defaultShader,state:s,size:i.particleChildren.length*6})}}function VM(t,e=null){const i=t*6;if(i>65535?e||(e=new Uint32Array(i)):e||(e=new Uint16Array(i)),e.length!==i)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${i}`);for(let n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function Zte(t){return{dynamicUpdate:pU(t,!0),staticUpdate:pU(t,!1)}}function pU(t,e){const i=[];i.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let n=0;for(const s in t){const a=t[s];if(e!==a.dynamic)continue;i.push(`offset = index + ${n}`),i.push(a.code);const o=cc(a.format);n+=o.stride/4}i.push(`
            index += stride * 4;
        }
    `),i.unshift(`
        var stride = ${n};
    `);const r=i.join(`
`);return new Function("ps","f32v","u32v",r)}class Jte{constructor(e){this._size=0,this._generateParticleUpdateCache={};const i=this._size=e.size??1e3,n=e.properties;let r=0,s=0;for(const d in n){const p=n[d],g=cc(p.format);p.dynamic?s+=g.stride:r+=g.stride}this._dynamicStride=s/4,this._staticStride=r/4,this.staticAttributeBuffer=new uf(i*4*r),this.dynamicAttributeBuffer=new uf(i*4*s),this.indexBuffer=VM(i);const a=new Gf;let o=0,l=0;this._staticBuffer=new da({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:wi.VERTEX|wi.COPY_DST}),this._dynamicBuffer=new da({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:wi.VERTEX|wi.COPY_DST});for(const d in n){const p=n[d],g=cc(p.format);p.dynamic?(a.addAttribute(p.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:o*4,format:p.format}),o+=g.size):(a.addAttribute(p.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:l*4,format:p.format}),l+=g.size)}a.addIndex(this.indexBuffer);const h=this.getParticleUpdate(n);this._dynamicUpload=h.dynamicUpdate,this._staticUpload=h.staticUpdate,this.geometry=a}getParticleUpdate(e){const i=Wxe(e);return this._generateParticleUpdateCache[i]?this._generateParticleUpdateCache[i]:(this._generateParticleUpdateCache[i]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[i])}generateParticleUpdate(e){return Zte(e)}update(e,i){e.length>this._size&&(i=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new uf(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new uf(this._size*this._dynamicStride*4*4),this.indexBuffer=VM(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const n=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,n.float32View,n.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),i){const r=this.staticAttributeBuffer;this._staticUpload(e,r.float32View,r.uint32View),this._staticBuffer.setDataWithSize(r.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function Wxe(t){const e=[];for(const i in t){const n=t[i];e.push(i,n.code,n.dynamic?"d":"s")}return e.join("_")}var eie=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,tie=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,jM=`
struct ParticleUniforms {
  uTranslationMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uRound:f32,
  uResolution:vec2<f32>,
};

fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
{
  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

   if(uniforms.uRound == 1.0) {
       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);
   }

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class iie extends za{constructor(){const e=ya.from({vertex:tie,fragment:eie}),i=qs.from({fragment:{source:jM,entryPoint:"mainFragment"},vertex:{source:jM,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:i,resources:{uTexture:it.WHITE.source,uSampler:new La({}),uniforms:{uTranslationMatrix:{value:new gt,type:"mat3x3<f32>"},uColor:{value:new Pi(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class QI{constructor(e,i){this.state=Na.for2d(),this.localUniforms=new dr({uTranslationMatrix:{value:new gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=i,this.defaultShader=new iie,this.state=Na.for2d()}validateRenderable(e){return!1}addRenderable(e,i){this.renderer.renderPipes.batch.break(i),i.add(e)}getBuffers(e){return e._gpuData[this.renderer.uid]||this._initBuffer(e)}_initBuffer(e){return e._gpuData[this.renderer.uid]=new Jte({size:e.particleChildren.length,properties:e._properties}),e._gpuData[this.renderer.uid]}updateRenderable(e){}execute(e){const i=e.particleChildren;if(i.length===0)return;const n=this.renderer,r=this.getBuffers(e);e.texture||(e.texture=i[0].texture);const s=this.state;r.update(i,e._childrenDirty),e._childrenDirty=!1,s.blendMode=ag(e.blendMode,e.texture._source);const a=this.localUniforms.uniforms,o=a.uTranslationMatrix;e.worldTransform.copyTo(o),o.prepend(n.globalUniforms.globalUniformData.projectionMatrix),a.uResolution=n.globalUniforms.globalUniformData.resolution,a.uRound=n._roundPixels|e._roundPixels,Ug(e.groupColorAlpha,a.uColor,0),this.adaptor.execute(this,e)}destroy(){this.renderer=null,this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class nie extends QI{constructor(e){super(e,new Kte)}}nie.extension={type:[me.WebGLPipes],name:"particle"};class rie extends QI{constructor(e){super(e,new Qte)}}rie.extension={type:[me.WebGPUPipes],name:"particle"};const sie=class XM{constructor(e){if(e instanceof it)this.texture=e,DE(this,XM.defaultOptions,{});else{const i={...XM.defaultOptions,...e};DE(this,i,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return Nm(this._tint)}set tint(e){this._tint=Pi.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};sie.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let $xe=sie;const YM={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},Kxe=new Ir(0,0,0,0),aie=class qM extends Tl{constructor(e={}){e={...qM.defaultOptions,...e,dynamicProperties:{...qM.defaultOptions.dynamicProperties,...e?.dynamicProperties}};const{dynamicProperties:i,shader:n,roundPixels:r,texture:s,particles:a,...o}=e;super({label:"ParticleContainer",...o}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=s||null,this.shader=n,this._properties={};for(const l in YM){const h=YM[l],d=i[l];this._properties[l]={...h,dynamic:d}}this.allowChildren=!0,this.roundPixels=r??!1,this.particleChildren=a??[]}addParticle(...e){for(let i=0;i<e.length;i++)this.particleChildren.push(e[i]);return this.onViewUpdate(),e[0]}removeParticle(...e){let i=!1;for(let n=0;n<e.length;n++){const r=this.particleChildren.indexOf(e[n]);r>-1&&(this.particleChildren.splice(r,1),i=!0)}return i&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return Kxe}updateBounds(){}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource,r=this.texture??this.particleChildren[0]?.texture;r&&r.destroy(n)}this.texture=null,this.shader?.destroy()}removeParticles(e,i){e??(e=0),i??(i=this.particleChildren.length);const n=this.particleChildren.splice(e,i-e);return this.onViewUpdate(),n}removeParticleAt(e){const i=this.particleChildren.splice(e,1);return this.onViewUpdate(),i[0]}addParticleAt(e,i){return this.particleChildren.splice(i,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,i){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,i){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,i){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,i){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,i){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};aie.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let Qxe=aie;const oie=class uie extends cA{constructor(e={}){e={...uie.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=e.anchor?.x,this._anchorY=e.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:i,height:n,_leftWidth:r,_rightWidth:s,_topHeight:a,_bottomHeight:o,_anchorX:l,_anchorY:h}=this,d=r+s,p=i>d?1:i/d,g=a+o,y=n>g?1:n/g,v=Math.min(p,y),S=l*i,T=h*n;e[0]=e[8]=e[16]=e[24]=-S,e[2]=e[10]=e[18]=e[26]=r*v-S,e[4]=e[12]=e[20]=e[28]=i-s*v-S,e[6]=e[14]=e[22]=e[30]=i-S,e[1]=e[3]=e[5]=e[7]=-T,e[9]=e[11]=e[13]=e[15]=a*v-T,e[17]=e[19]=e[21]=e[23]=n-o*v-T,e[25]=e[27]=e[29]=e[31]=n-T,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const i=1/this._originalWidth,n=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.getBuffer("aUV").update()}};oie.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let _h=oie;const lie=class cie extends Tl{constructor(e){e instanceof it&&(e={texture:e});const{width:i,height:n,anchor:r,leftWidth:s,rightWidth:a,topHeight:o,bottomHeight:l,texture:h,roundPixels:d,...p}=e;super({label:"NineSliceSprite",...p}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=s??h?.defaultBorders?.left??_h.defaultOptions.leftWidth,this._topHeight=o??h?.defaultBorders?.top??_h.defaultOptions.topHeight,this._rightWidth=a??h?.defaultBorders?.right??_h.defaultOptions.rightWidth,this._bottomHeight=l??h?.defaultBorders?.bottom??_h.defaultOptions.bottomHeight,this._width=i??h.width??_h.defaultOptions.width,this._height=n??h.height??_h.defaultOptions.height,this.allowChildren=!1,this.texture=h??cie.defaultOptions.texture,this.roundPixels=d??!1,this._anchor=new In({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,i){typeof e=="object"&&(i=e.height??e.width,e=e.width),this._width=e,this._height=i??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=it.EMPTY);const i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._texture=null}updateBounds(){const e=this._bounds,i=this._anchor,n=this._width,r=this._height;e.minX=-i._x*n,e.maxX=e.minX+n,e.minY=-i._y*r,e.maxY=e.minY+r}};lie.defaultOptions={texture:it.EMPTY};let hie=lie;class Zxe extends hie{constructor(...e){let i=e[0];i instanceof it&&(ft(Yt,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),i={texture:i,leftWidth:e[1],topHeight:e[2],rightWidth:e[3],bottomHeight:e[4]}),ft(Yt,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(i)}}class die extends hA{constructor(){super(),this.geometry=new _h}destroy(){this.geometry.destroy()}}class fie{constructor(e){this._renderer=e}addRenderable(e,i){const n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,i)}updateRenderable(e){const i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),i._batcher.updateElement(i)}validateRenderable(e){const i=this._getGpuSprite(e);return!i._batcher.checkAndUpdateTexture(i,e._texture)}_updateBatchableSprite(e,i){i.geometry.update(e),i.setTexture(e._texture)}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const i=e._gpuData[this._renderer.uid]=new die,n=i;return n.renderable=e,n.transform=e.groupTransform,n.texture=e._texture,n.roundPixels=this._renderer._roundPixels|e._roundPixels,e.didViewUpdate||this._updateBatchableSprite(e,n),i}destroy(){this._renderer=null}}fie.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"nineSliceSprite"};const pie={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},mie={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}};let BD,kD;class gie extends za{constructor(){BD??(BD=kg({name:"tiling-sprite-shader",bits:[qm,pie,Fg]})),kD??(kD=Og({name:"tiling-sprite-shader",bits:[sA,mie,Ig]}));const e=new dr({uMapCoord:{value:new gt,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new gt,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:kD,gpuProgram:BD,resources:{localUniforms:new dr({uTransformMatrix:{value:new gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:it.EMPTY.source,uSampler:it.EMPTY.source.style}})}updateUniforms(e,i,n,r,s,a){const o=this.resources.tilingUniforms,l=a.width,h=a.height,d=a.textureMatrix,p=o.uniforms.uTextureTransform;p.set(n.a*l/e,n.b*l/i,n.c*h/e,n.d*h/i,n.tx/e,n.ty/i),p.invert(),o.uniforms.uMapCoord=d.mapCoord,o.uniforms.uClampFrame=d.uClampFrame,o.uniforms.uClampOffset=d.uClampOffset,o.uniforms.uTextureTransform=p,o.uniforms.uSizeAnchor[0]=e,o.uniforms.uSizeAnchor[1]=i,o.uniforms.uSizeAnchor[2]=r,o.uniforms.uSizeAnchor[3]=s,a&&(this.resources.uTexture=a.source,this.resources.uSampler=a.source.style)}}class bie extends qh{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function yie(t,e){const i=t.anchor.x,n=t.anchor.y;e[0]=-i*t.width,e[1]=-n*t.height,e[2]=(1-i)*t.width,e[3]=-n*t.height,e[4]=(1-i)*t.width,e[5]=(1-n)*t.height,e[6]=-i*t.width,e[7]=(1-n)*t.height}function xie(t,e,i,n){let r=0;const s=t.length/(e||2),a=n.a,o=n.b,l=n.c,h=n.d,d=n.tx,p=n.ty;for(i*=e;r<s;){const g=t[i],y=t[i+1];t[i]=a*g+l*y+d,t[i+1]=o*g+h*y+p,i+=e,r++}}function _ie(t,e){const i=t.texture,n=i.frame.width,r=i.frame.height;let s=0,a=0;t.applyAnchorToTexture&&(s=t.anchor.x,a=t.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-a,e[5]=e[7]=1-a;const o=gt.shared;o.copyFrom(t._tileTransform.matrix),o.tx/=t.width,o.ty/=t.height,o.invert(),o.scale(t.width/n,t.height/r),xie(e,2,0,o)}const YT=new bie;class vie{constructor(){this.canBatch=!0,this.geometry=new qh({indices:YT.indices.slice(),positions:YT.positions.slice(),uvs:YT.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}}class Tie{constructor(e){this._state=Na.default2d,this._renderer=e}validateRenderable(e){const i=this._getTilingSpriteData(e),n=i.canBatch;this._updateCanBatch(e);const r=i.canBatch;if(r&&r===n){const{batchableMesh:s}=i;return!s._batcher.checkAndUpdateTexture(s,e.texture)}return n!==r}addRenderable(e,i){const n=this._renderer.renderPipes.batch;this._updateCanBatch(e);const r=this._getTilingSpriteData(e),{geometry:s,canBatch:a}=r;if(a){r.batchableMesh||(r.batchableMesh=new hA);const o=r.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),o.geometry=s,o.renderable=e,o.transform=e.groupTransform,o.setTexture(e._texture)),o.roundPixels=this._renderer._roundPixels|e._roundPixels,n.addToBatch(o,i)}else n.break(i),r.shader||(r.shader=new gie),this.updateRenderable(e),i.add(e)}execute(e){const{shader:i}=this._getTilingSpriteData(e);i.groups[0]=this._renderer.globalUniforms.bindGroup;const n=i.resources.localUniforms.uniforms;n.uTransformMatrix=e.groupTransform,n.uRound=this._renderer._roundPixels|e._roundPixels,Ug(e.groupColorAlpha,n.uColor,0),this._state.blendMode=ag(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:YT,shader:i,state:this._state})}updateRenderable(e){const i=this._getTilingSpriteData(e),{canBatch:n}=i;if(n){const{batchableMesh:r}=i;e.didViewUpdate&&this._updateBatchableMesh(e),r._batcher.updateElement(r)}else if(e.didViewUpdate){const{shader:r}=i;r.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}_getTilingSpriteData(e){return e._gpuData[this._renderer.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){const i=new vie;return i.renderable=e,e._gpuData[this._renderer.uid]=i,i}_updateBatchableMesh(e){const i=this._getTilingSpriteData(e),{geometry:n}=i,r=e.texture.source.style;r.addressMode!=="repeat"&&(r.addressMode="repeat",r.update()),_ie(e,n.uvs),yie(e,n.positions)}destroy(){this._renderer=null}_updateCanBatch(e){const i=this._getTilingSpriteData(e),n=e.texture;let r=!0;return this._renderer.type===pa.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),i.canBatch=n.textureMatrix.isSimple&&(r||n.source.isPowerOfTwo),i.canBatch}}Tie.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"tilingSprite"};const Eie={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},Sie={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},Aie={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},Cie={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}};let OD,FD;class wie extends za{constructor(e){const i=new dr({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new gt,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});OD??(OD=kg({name:"sdf-shader",bits:[jS,YS(e),Eie,Aie,Fg]})),FD??(FD=Og({name:"sdf-shader",bits:[XS,qS(e),Sie,Cie,Ig]})),super({glProgram:FD,gpuProgram:OD,resources:{localUniforms:i,batchSamplers:WS(e)}})}}class Die extends lg{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class Rie{constructor(e){this._renderer=e}validateRenderable(e){const i=this._getGpuBitmapText(e);return this._renderer.renderPipes.graphics.validateRenderable(i)}addRenderable(e,i){const n=this._getGpuBitmapText(e);mU(e,n),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,n)),this._renderer.renderPipes.graphics.addRenderable(n,i),n.context.customShader&&this._updateDistanceField(e)}updateRenderable(e){const i=this._getGpuBitmapText(e);mU(e,i),this._renderer.renderPipes.graphics.updateRenderable(i),i.context.customShader&&this._updateDistanceField(e)}_updateContext(e,i){const{context:n}=i,r=ug.getFont(e.text,e._style);n.clear(),r.distanceField.type!=="none"&&(n.customShader||(n.customShader=new wie(this._renderer.limits.maxBatchableTextures)));const s=vs.graphemeSegmenter(e.text),a=e._style;let o=r.baseLineOffset;const l=ZS(s,a,r,!0),h=a.padding,d=l.scale;let p=l.width,g=l.height+l.offsetY;a._stroke&&(p+=a._stroke.width/d,g+=a._stroke.width/d),n.translate(-e._anchor._x*p-h,-e._anchor._y*g-h).scale(d,d);const y=r.applyFillAsTint?a._fill.color:16777215;let v=r.fontMetrics.fontSize,S=r.lineHeight;a.lineHeight&&(v=a.fontSize/d,S=a.lineHeight/d);let T=(S-v)/2;T-r.baseLineOffset<0&&(T=0);for(let A=0;A<l.lines.length;A++){const D=l.lines[A];for(let R=0;R<D.charPositions.length;R++){const B=D.chars[R],z=r.chars[B];if(z?.texture){const L=z.texture;n.texture(L,y||"black",Math.round(D.charPositions[R]+z.xOffset),Math.round(o+z.yOffset+T),L.orig.width,L.orig.height)}}o+=S}}_getGpuBitmapText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const i=new Die;return e._gpuData[this._renderer.uid]=i,this._updateContext(e,i),i}_updateDistanceField(e){const i=this._getGpuBitmapText(e).context,n=e._style.fontFamily,r=Ki.get(`${n}-bitmap`),{a:s,b:a,c:o,d:l}=e.groupTransform,h=Math.sqrt(s*s+a*a),d=Math.sqrt(o*o+l*l),p=(Math.abs(h)+Math.abs(d))/2,g=r.baseRenderedFontSize/e._style.fontSize,y=p*r.distanceField.range*(1/g);i.customShader.resources.localUniforms.uniforms.uDistance=y}destroy(){this._renderer=null}}Rie.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"bitmapText"};function mU(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}function Pie(t){const{text:e,style:i,chars:n}=t,r=i,s=ug.getFont(e,r),a=vs.graphemeSegmenter(e),o=ZS(a,r,s,!0),l=o.scale,h=[],d=[],p=[],g=i.lineHeight?i.lineHeight:s.lineHeight*l;let y=0;for(const v of o.lines){if(v.chars.length===0)continue;const S=new sr({label:"line"});S.y=y,p.push(S);let T=new sr({label:"word"}),A=0;for(let D=0;D<v.chars.length;D++){const R=v.chars[D];if(!R||!s.chars[R])continue;const z=R===" ",L=D===v.chars.length-1;let H;n.length>0?(H=n.shift(),H.text=R,H.style=r,H.label=`char-${R}`,H.x=v.charPositions[D]*l-v.charPositions[A]*l):H=new FF({text:R,style:r,label:`char-${R}`,x:v.charPositions[D]*l-v.charPositions[A]*l}),z||(h.push(H),T.addChild(H)),(z||L)&&T.children.length>0&&(T.x=v.charPositions[A]*l,d.push(T),S.addChild(T),T=new sr({label:"word"}),A=D+1)}y+=g}return{chars:h,lines:p,words:d}}class Mie extends P_{constructor(e){super(),this.generatingTexture=!1,this.currentKey="--",this._renderer=e,e.runners.resolutionChange.add(this)}resolutionChange(){const e=this.renderable;e._autoResolution&&e.onViewUpdate()}destroy(){const{htmlText:e}=this._renderer;e.getReferenceCount(this.currentKey)===null?e.returnTexturePromise(this.texturePromise):e.decreaseReferenceCount(this.currentKey),this._renderer.runners.resolutionChange.remove(this),this.texturePromise=null,this._renderer=null}}function HE(t,e){const{texture:i,bounds:n}=t,r=e._style._getFinalPadding();XO(n,e._anchor,i);const s=e._anchor._x*r*2,a=e._anchor._y*r*2;n.minX-=r-s,n.minY-=r-a,n.maxX-=r-s,n.maxY-=r-a}class Bie{constructor(e){this._renderer=e}validateRenderable(e){const i=this._getGpuText(e),n=e.styleKey;return i.currentKey!==n}addRenderable(e,i){const n=this._getGpuText(e);if(e._didTextUpdate){const r=e._autoResolution?this._renderer.resolution:e.resolution;(n.currentKey!==e.styleKey||e.resolution!==r)&&this._updateGpuText(e).catch(s=>{console.error(s)}),e._didTextUpdate=!1,HE(n,e)}this._renderer.renderPipes.batch.addToBatch(n,i)}updateRenderable(e){const i=this._getGpuText(e);i._batcher.updateElement(i)}async _updateGpuText(e){e._didTextUpdate=!1;const i=this._getGpuText(e);if(i.generatingTexture)return;const n=i.texturePromise;i.texturePromise=null,i.generatingTexture=!0,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let r=this._renderer.htmlText.getTexturePromise(e);n&&(r=r.finally(()=>{this._renderer.htmlText.decreaseReferenceCount(i.currentKey),this._renderer.htmlText.returnTexturePromise(n)})),i.texturePromise=r,i.currentKey=e.styleKey,i.texture=await r;const s=e.renderGroup||e.parentRenderGroup;s&&(s.structureDidChange=!0),i.generatingTexture=!1,HE(i,e)}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const i=new Mie(this._renderer);return i.renderable=e,i.transform=e.groupTransform,i.texture=it.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,e._gpuData[this._renderer.uid]=i,i}destroy(){this._renderer=null}}Bie.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"htmlText"};function kie(){const{userAgent:t}=Wt.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}const Jxe=new Ir;function ZI(t,e,i,n){const r=Jxe;r.minX=0,r.minY=0,r.maxX=t.width/n|0,r.maxY=t.height/n|0;const s=ir.getOptimalTexture(r.width,r.height,n,!1);return s.source.uploadMethodId="image",s.source.resource=t,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/n,s.frame.height=i/n,s.source.emit("update",s.source),s.updateUvs(),s}function Oie(t,e){const i=e.fontFamily,n=[],r={},s=/font-family:([^;"\s]+)/g,a=t.match(s);function o(l){r[l]||(n.push(l),r[l]=!0)}if(Array.isArray(i))for(let l=0;l<i.length;l++)o(i[l]);else o(i);a&&a.forEach(l=>{const h=l.split(":")[1].trim();o(h)});for(const l in e.tagStyles){const h=e.tagStyles[l].fontFamily;o(h)}return n}async function Fie(t){const i=await(await Wt.get().fetch(t)).blob(),n=new FileReader;return await new Promise((s,a)=>{n.onloadend=()=>s(n.result),n.onerror=a,n.readAsDataURL(i)})}async function Iie(t,e){const i=await Fie(e);return`@font-face {
        font-family: "${t.fontFamily}";
        font-weight: ${t.fontWeight};
        font-style: ${t.fontStyle};
        src: url('${i}');
    }`}const qT=new Map;async function Lie(t){const e=t.filter(i=>Ki.has(`${i}-and-url`)).map(i=>{if(!qT.has(i)){const{entries:n}=Ki.get(`${i}-and-url`),r=[];n.forEach(s=>{const a=s.url,l=s.faces.map(h=>({weight:h.weight,style:h.style}));r.push(...l.map(h=>Iie({fontWeight:h.weight,fontStyle:h.style,fontFamily:i},a)))}),qT.set(i,Promise.all(r).then(s=>s.join(`
`)))}return qT.get(i)});return(await Promise.all(e)).join(`
`)}function Nie(t,e,i,n,r){const{domElement:s,styleElement:a,svgRoot:o}=r;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${t}</div>`,s.setAttribute("style",`transform: scale(${i});transform-origin: top left; display: inline-block`),a.textContent=n;const{width:l,height:h}=r.image;return o.setAttribute("width",l.toString()),o.setAttribute("height",h.toString()),new XMLSerializer().serializeToString(o)}function Uie(t,e){const i=gl.getOptimalCanvasAndContext(t.width,t.height,e),{context:n}=i;return n.clearRect(0,0,t.width,t.height),n.drawImage(t,0,0),i}function Gie(t,e,i){return new Promise(async n=>{i&&await new Promise(r=>setTimeout(r,100)),t.onload=()=>{n()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"})}class Hie{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===pa.WEBGPU}getTexture(e){return this.getTexturePromise(e)}getManagedTexture(e){const i=e.styleKey;if(this._activeTextures[i])return this._increaseReferenceCount(i),this._activeTextures[i].promise;const n=this._buildTexturePromise(e).then(r=>(this._activeTextures[i].texture=r,r));return this._activeTextures[i]={texture:null,promise:n,usageCount:1},n}getReferenceCount(e){return this._activeTextures[e]?.usageCount??null}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){const i=this._activeTextures[e];i&&(i.usageCount--,i.usageCount===0&&(i.texture?this._cleanUp(i.texture):i.promise.then(n=>{i.texture=n,this._cleanUp(i.texture)}).catch(()=>{Ct("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[e]=null))}getTexturePromise(e){return this._buildTexturePromise(e)}async _buildTexturePromise(e){const{text:i,style:n,resolution:r,textureStyle:s}=e,a=hr.get(IF),o=Oie(i,n),l=await Lie(o),h=LF(i,n,l,a),d=Math.ceil(Math.ceil(Math.max(1,h.width)+n.padding*2)*r),p=Math.ceil(Math.ceil(Math.max(1,h.height)+n.padding*2)*r),g=a.image,y=2;g.width=(d|0)+y,g.height=(p|0)+y;const v=Nie(i,n,r,l,a);await Gie(g,v,kie()&&o.length>0);const S=g;let T;this._createCanvas&&(T=Uie(g,r));const A=ZI(T?T.canvas:S,g.width-y,g.height-y,r);return s&&(A.source.style=s),this._createCanvas&&(this._renderer.texture.initSource(A.source),gl.returnCanvasAndContext(T)),hr.return(a),A}returnTexturePromise(e){e.then(i=>{this._cleanUp(i)}).catch(()=>{Ct("HTMLTextSystem: Failed to clean texture")})}_cleanUp(e){ir.returnTexture(e,!0),e.source.resource=null,e.source.uploadMethodId="unknown"}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexturePromise(this._activeTextures[e].promise);this._activeTextures=null}}Hie.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"htmlText"};class JI extends sr{constructor(e){const{text:i,style:n,autoSplit:r,lineAnchor:s,wordAnchor:a,charAnchor:o,...l}=e;super(l),this._dirty=!1,this._canReuseChars=!1,this.chars=[],this.words=[],this.lines=[],this._originalText=i,this._autoSplit=r,this._lineAnchor=s,this._wordAnchor=a,this._charAnchor=o,this.style=n}split(){const e=this.splitFn();this.chars=e.chars,this.words=e.words,this.lines=e.lines,this.addChild(...this.lines),this.charAnchor=this._charAnchor,this.wordAnchor=this._wordAnchor,this.lineAnchor=this._lineAnchor,this._dirty=!1,this._canReuseChars=!0}get text(){return this._originalText}set text(e){this._originalText=e,this.lines.forEach(i=>i.destroy({children:!0})),this.lines.length=0,this.words.length=0,this.chars.length=0,this._canReuseChars=!1,this.onTextUpdate()}_setOrigin(e,i,n){let r;typeof e=="number"?r={x:e,y:e}:r={x:e.x,y:e.y},i.forEach(s=>{const a=s.getLocalBounds(),o=a.minX+a.width*r.x,l=a.minY+a.height*r.y;s.origin.set(o,l)}),this[n]=e}get lineAnchor(){return this._lineAnchor}set lineAnchor(e){this._setOrigin(e,this.lines,"_lineAnchor")}get wordAnchor(){return this._wordAnchor}set wordAnchor(e){this._setOrigin(e,this.words,"_wordAnchor")}get charAnchor(){return this._charAnchor}set charAnchor(e){this._setOrigin(e,this.chars,"_charAnchor")}get style(){return this._style}set style(e){e||(e={}),this._style=new Ua(e),this.words.forEach(i=>i.destroy()),this.words.length=0,this.lines.forEach(i=>i.destroy()),this.lines.length=0,this._canReuseChars=!0,this.onTextUpdate()}onTextUpdate(){this._dirty=!0,this._autoSplit&&this.split()}destroy(e){super.destroy(e),this.chars=[],this.words=[],this.lines=[],(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._originalText=""}}const zie=class WT extends JI{constructor(e){const i={...WT.defaultOptions,...e};super(i)}static from(e,i){const n={...WT.defaultOptions,...i,text:e.text,style:new Ua(e.style)};return new WT({...n})}splitFn(){return Pie({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};zie.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let e_e=zie;function t_e(t,e,i){switch(t){case"center":return(i-e)/2;case"right":return i-e;case"left":default:return 0}}function Vie(t){return t==="\r"||t===`
`||t===`\r
`}function i_e(t,e,i){const n=[];let r=e.lines[0],s="",a=[],o=0;return i.wordWrap=!1,t.forEach(l=>{const h=/^\s*$/.test(l),d=Vie(l),p=s.length===0&&h;if(h&&!d&&p)return;d||(s+=l);const g=vs.measureText(l,i);a.push({char:l,metric:g}),s.length>=r.length&&(n.push({line:s,chars:a,width:a.reduce((y,v)=>y+v.metric.width,0)}),a=[],s="",o++,r=e.lines[o])}),n}function jie(t){const{text:e,style:i,chars:n}=t,r=i,s=vs.measureText(e,r),a=vs.graphemeSegmenter(e),o=i_e(a,s,r.clone()),l=r.align,h=s.lineWidths.reduce((T,A)=>Math.max(T,A),0),d=[],p=[],g=[];let y=0;const v=r.stroke?.width||0,S=r.dropShadow?.distance||0;return o.forEach((T,A)=>{const D=new sr({label:`line-${A}`});D.y=y,p.push(D);const R=s.lineWidths[A];let B=t_e(l,R,h),z=new sr({label:"word"});z.x=B,T.chars.forEach((L,H)=>{if(L.metric.width!==0){if(Vie(L.char)){B+=L.metric.width-v;return}if(L.char===" ")z.children.length>0&&(g.push(z),D.addChild(z)),B+=L.metric.width+r.letterSpacing-v,z=new sr({label:"word"}),z.x=B;else{let te;n.length>0?(te=n.shift(),te.text=L.char,te.style=r,te.setFromMatrix(gt.IDENTITY),te.x=B-z.x-S*H):te=new nA({text:L.char,style:r,x:B-z.x-S*H}),d.push(te),z.addChild(te),B+=L.metric.width+r.letterSpacing-v}}}),z.children.length>0&&(g.push(z),D.addChild(z)),y+=s.lineHeight}),{chars:d,lines:p,words:g}}const Xie=class $T extends JI{constructor(e){const i={...$T.defaultOptions,...e};super(i)}static from(e,i){const n={...$T.defaultOptions,...i,text:e.text,style:new Ua(e.style)};return new $T({...n})}splitFn(){return jie({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};Xie.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let n_e=Xie;class Yie extends P_{constructor(e){super(),this._renderer=e,e.runners.resolutionChange.add(this)}resolutionChange(){const e=this.renderable;e._autoResolution&&e.onViewUpdate()}destroy(){const{canvasText:e}=this._renderer;e.getReferenceCount(this.currentKey)>0?e.decreaseReferenceCount(this.currentKey):this.texture&&e.returnTexture(this.texture),this._renderer.runners.resolutionChange.remove(this),this._renderer=null}}class qie{constructor(e){this._renderer=e}validateRenderable(e){const i=this._getGpuText(e),n=e.styleKey;return i.currentKey!==n?!0:e._didTextUpdate}addRenderable(e,i){const n=this._getGpuText(e);if(e._didTextUpdate){const r=e._autoResolution?this._renderer.resolution:e.resolution;(n.currentKey!==e.styleKey||e.resolution!==r)&&this._updateGpuText(e),e._didTextUpdate=!1,HE(n,e)}this._renderer.renderPipes.batch.addToBatch(n,i)}updateRenderable(e){const i=this._getGpuText(e);i._batcher.updateElement(i)}_updateGpuText(e){const i=this._getGpuText(e);i.texture&&this._renderer.canvasText.decreaseReferenceCount(i.currentKey),e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,i.texture=this._renderer.canvasText.getManagedTexture(e),i.currentKey=e.styleKey}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const i=new Yie(this._renderer);return i.currentKey="--",i.renderable=e,i.transform=e.groupTransform,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=i,i}destroy(){this._renderer=null}}qie.extension={type:[me.WebGLPipes,me.WebGPUPipes,me.CanvasPipes],name:"text"};class Wie{constructor(e){this._activeTextures={},this._renderer=e}getTexture(e,i,n,r){typeof e=="string"&&(ft("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:n,resolution:i}),e.style instanceof Ua||(e.style=new Ua(e.style)),e.textureStyle instanceof La||(e.textureStyle=new La(e.textureStyle)),typeof e.text!="string"&&(e.text=e.text.toString());const{text:s,style:a,textureStyle:o}=e,l=e.resolution??this._renderer.resolution,{frame:h,canvasAndContext:d}=Ym.getCanvasAndContext({text:s,style:a,resolution:l}),p=ZI(d.canvas,h.width,h.height,l);if(o&&(p.source.style=o),a.trim&&(h.pad(a.padding),p.frame.copyFrom(h),p.frame.scale(1/l),p.updateUvs()),a.filters){const g=this._applyFilters(p,a.filters);return this.returnTexture(p),Ym.returnCanvasAndContext(d),g}return this._renderer.texture.initSource(p._source),Ym.returnCanvasAndContext(d),p}returnTexture(e){const i=e.source;i.resource=null,i.uploadMethodId="unknown",i.alphaMode="no-premultiply-alpha",ir.returnTexture(e,!0)}renderTextToCanvas(){ft("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const i=e.styleKey;if(this._activeTextures[i])return this._increaseReferenceCount(i),this._activeTextures[i].texture;const n=this.getTexture({text:e.text,style:e.style,resolution:e._resolution,textureStyle:e.textureStyle});return this._activeTextures[i]={texture:n,usageCount:1},n}decreaseReferenceCount(e){const i=this._activeTextures[e];i.usageCount--,i.usageCount===0&&(this.returnTexture(i.texture),this._activeTextures[e]=null)}getReferenceCount(e){return this._activeTextures[e]?.usageCount??0}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}_applyFilters(e,i){const n=this._renderer.renderTarget.renderTarget,r=this._renderer.filter.generateFilteredTexture({texture:e,filters:i});return this._renderer.renderTarget.bind(n,!1),r}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexture(this._activeTextures[e].texture);this._activeTextures=null}}Wie.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"canvasText"};const gU=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function r_e(t){const e=[];let i=0;for(let n=0;n<gU.length;n++){const r=`_${gU[n]}`;e[i++]=t[r]}return i=$ie(t._fill,e,i),i=a_e(t._stroke,e,i),i=o_e(t.dropShadow,e,i),i=s_e(t.filters,e,i),e.join("-")}function s_e(t,e,i){if(!t)return i;for(const n of t)e[i++]=n.uid;return i}function $ie(t,e,i){return t&&(e[i++]=t.color,e[i++]=t.alpha,e[i++]=t.fill?.styleKey),i}function a_e(t,e,i){return t&&(i=$ie(t,e,i),e[i++]=t.width,e[i++]=t.alignment,e[i++]=t.cap,e[i++]=t.join,e[i++]=t.miterLimit),i}function o_e(t,e,i){return t&&(e[i++]=t.alpha,e[i++]=t.angle,e[i++]=t.blur,e[i++]=t.distance,e[i++]=Pi.shared.setValue(t.color).toNumber()),i}async function u_e(t,e,i=200){const n=await e.extract.base64(t);await e.encoder.commandFinished;const r=i;console.log(`logging texture ${t.source.width}px ${t.source.height}px`);const s=["font-size: 1px;",`padding: ${r}px 300px;`,`background: url(${n}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}const l_e=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let c_e=0;function Kie(t,e=0,i={color:"#000000"}){t.renderGroup&&(i.color=l_e[c_e++]);let n="";for(let a=0;a<e;a++)n+="    ";let r=t.label;!r&&t instanceof hu&&(r=`sprite:${t.texture.label}`);let s=`%c ${n}|- ${r} (worldX:${t.worldTransform.tx}, relativeRenderX:${t.relativeGroupTransform.tx}, renderX:${t.groupTransform.tx}, localX:${t.x})`;t.renderGroup&&(s+=" (RenderGroup)"),t.filters&&(s+="(*filters)"),console.log(s,`color:${i.color}; font-weight:bold;`),e++;for(let a=0;a<t.children.length;a++){const o=t.children[a];Kie(o,e,{...i})}}function Qie(t,e=0,i={index:0,color:"#000000"}){let n="";for(let s=0;s<e;s++)n+="    ";const r=`%c ${n}- ${i.index}: ${t.root.label} worldX:${t.worldTransform.tx}`;console.log(r,`color:${i.color}; font-weight:bold;`),e++;for(let s=0;s<t.renderGroupChildren.length;s++){const a=t.renderGroupChildren[s];Qie(a,e,{...i,index:s})}}Zi.add(G$,H$);const h_e=Object.freeze(Object.defineProperty({__proto__:null,AbstractBitmapFont:cF,AbstractRenderer:T_,AbstractSplitText:JI,AbstractText:tA,AccessibilitySystem:Age,AlphaFilter:Eye,AlphaMask:KO,AlphaMaskPipe:zF,AnimatedSprite:Xx,Application:DQ,ApplicationInitHook:uF,Assets:zy,AssetsClass:tJ,BLEND_TO_NPM:OQ,BUFFER_TYPE:rx,BackgroundLoader:kZ,BackgroundSystem:tte,Batch:LQ,BatchGeometry:zQ,BatchTextureArray:IQ,BatchableGraphics:QS,BatchableHTMLText:Mie,BatchableMesh:hA,BatchableSprite:P_,BatchableText:Yie,Batcher:GQ,BatcherPipe:HF,BigPool:hr,BindGroup:ul,BindGroupSystem:OI,BitmapFont:AF,BitmapFontManager:ug,BitmapText:FF,BitmapTextGraphics:Die,BitmapTextPipe:Rie,BlendModeFilter:ar,BlendModePipe:SI,BlurFilter:MJ,BlurFilterPass:VT,Bounds:Ir,BrowserAdapter:xK,Buffer:da,BufferImageSource:MS,BufferResource:aA,BufferUsage:wi,CLEAR:la,Cache:Ki,CanvasObserver:tF,CanvasPool:gl,CanvasPoolClass:wZ,CanvasSource:ol,CanvasTextGenerator:Ym,CanvasTextMetrics:vs,CanvasTextPipe:qie,CanvasTextSystem:Wie,Circle:GS,Color:Pi,ColorBlend:ZK,ColorBurnBlend:JK,ColorDodgeBlend:eQ,ColorMask:QO,ColorMaskPipe:VF,ColorMatrixFilter:Cye,CompressedSource:w_,Container:sr,Culler:mJ,CullerPlugin:gJ,CustomRenderPipe:bI,D3D10_RESOURCE_DIMENSION:MF,D3DFMT:na,DATA_URI:$ge,DDS:Xt,DEG_TO_RAD:j$,DEPRECATED_SCALE_MODES:GE,DEPRECATED_WRAP_MODES:UE,DOMAdapter:Wt,DOMContainer:cye,DOMPipe:bJ,DRAW_MODES:Cxe,DXGI_FORMAT:PF,DXGI_TO_TEXTURE_FORMAT:ra,DarkenBlend:tQ,DefaultBatcher:$S,DefaultShader:eZ,DifferenceBlend:iQ,DisplacementFilter:wye,DivideBlend:nQ,DynamicBitmapFont:vM,Ellipse:HS,EventBoundary:xJ,EventEmitter:Ur,EventSystem:_J,EventsTicker:Ju,ExclusionBlend:rQ,ExtensionType:me,ExtractSystem:nte,FOURCC_TO_TEXTURE_FORMAT:DM,FederatedContainer:Tye,FederatedEvent:Bg,FederatedMouseEvent:jx,FederatedPointerEvent:ao,FederatedWheelEvent:_f,FillGradient:ml,FillPattern:A_,Filter:El,FilterEffect:kx,FilterPipe:GJ,FilterSystem:zJ,FontStylePromiseCache:qT,GAUSSIAN_VALUES:kF,GL_FORMATS:FE,GL_INTERNAL_FORMAT:uJ,GL_TARGETS:WF,GL_TYPES:Fi,GL_WRAP_MODES:mee,GenerateTextureSystem:CI,Geometry:Gf,GlBackBufferSystem:yee,GlBatchAdaptor:NF,GlBuffer:dee,GlBufferSystem:XF,GlColorMaskSystem:QF,GlContextSystem:pee,GlEncoderSystem:ZF,GlGeometrySystem:$F,GlGraphicsAdaptor:mI,GlLimitsSystem:JF,GlMeshAdaptor:gI,GlParticleContainerAdaptor:Kte,GlParticleContainerPipe:nie,GlProgram:ya,GlProgramData:Pee,GlRenderTarget:xee,GlRenderTargetAdaptor:See,GlRenderTargetSystem:uI,GlShaderSystem:hI,GlStateSystem:zee,GlStencilSystem:eI,GlTexture:Vee,GlTextureSystem:pI,GlUboSystem:sI,GlUniformGroupSystem:dI,GlobalResourceRegistry:Uf,GlobalUniformSystem:wI,GpuBatchAdaptor:UF,GpuBlendModesToPixi:Ys,GpuBufferSystem:FI,GpuColorMaskSystem:II,GpuDeviceSystem:lA,GpuEncoderSystem:LI,GpuGraphicsAdaptor:$I,GpuGraphicsContext:fZ,GpuLimitsSystem:NI,GpuMeshAdapter:KI,GpuMipmapGenerator:Cte,GpuParticleContainerAdaptor:Qte,GpuParticleContainerPipe:rie,GpuProgram:qs,GpuRenderTarget:vte,GpuRenderTargetAdaptor:Tte,GpuRenderTargetSystem:VI,GpuShaderSystem:jI,GpuStateSystem:XI,GpuStencilModesToPixi:pc,GpuStencilSystem:UI,GpuTextureSystem:WI,GpuUboSystem:GI,GpuUniformBatchPipe:HI,Graphics:lg,GraphicsContext:Vs,GraphicsContextRenderData:pZ,GraphicsContextSystem:xF,GraphicsGpuData:Mte,GraphicsPath:ou,GraphicsPipe:Bte,HTMLText:see,HTMLTextPipe:Bie,HTMLTextRenderData:IF,HTMLTextStyle:rA,HTMLTextSystem:Hie,HardLightBlend:sQ,HardMixBlend:aQ,HelloSystem:uA,IGLUniformData:Xye,ImageSource:kh,InstructionSet:$O,KTX:Zn,LightenBlend:oQ,LinearBurnBlend:uQ,LinearDodgeBlend:lQ,LinearLightBlend:cQ,Loader:zZ,LoaderParserPriority:ba,LuminosityBlend:hQ,MaskEffectManager:CE,MaskEffectManagerClass:aK,MaskFilter:XJ,Matrix:gt,Mesh:Ng,MeshGeometry:qh,MeshGpuData:zM,MeshPipe:$te,MeshPlane:jxe,MeshRope:Xxe,MeshSimple:Yxe,NOOP:VO,NegationBlend:dQ,NineSliceGeometry:_h,NineSlicePlane:Zxe,NineSliceSprite:hie,NineSliceSpriteGpuData:die,NineSliceSpritePipe:fie,NoiseFilter:Dye,ObservablePoint:In,OverlayBlend:fQ,PI_2:z$,Particle:$xe,ParticleBuffer:Jte,ParticleContainer:Qxe,ParticleContainerPipe:QI,ParticleShader:iie,PassthroughFilter:UJ,PerspectiveMesh:Vxe,PerspectivePlaneGeometry:Hte,PinLightBlend:pQ,PipelineSystem:zI,PlaneGeometry:cA,Point:tn,Polygon:Hm,Pool:tK,PoolGroupClass:iK,PrepareBase:WJ,PrepareQueue:tee,PrepareSystem:oee,PrepareUpload:aee,QuadGeometry:bie,RAD_TO_DEG:V$,Rectangle:zi,RenderContainer:Bxe,RenderGroup:wE,RenderGroupPipe:yI,RenderGroupSystem:vI,RenderLayer:Lxe,RenderTarget:IE,RenderTargetSystem:oI,RenderTexture:oA,RenderableGCSystem:ute,RendererInitHook:lF,RendererType:pa,ResizePlugin:RQ,Resolver:Xh,RopeGeometry:Yte,RoundedRectangle:zS,SCALE_MODES:Dxe,STENCIL_MODES:nr,SVGParser:AZ,SaturationBlend:mQ,SchedulerSystem:DI,ScissorMask:Gye,SdfShader:wie,Shader:za,ShaderStage:Pm,ShapePath:_Z,SharedRenderPipes:kI,SharedSystems:BI,SoftLightBlend:gQ,SplitBitmapText:e_e,SplitText:n_e,Sprite:hu,SpritePipe:TI,Spritesheet:tM,State:Na,StencilMask:ZO,StencilMaskPipe:jF,SubtractBlend:bQ,SystemRunner:oF,TEXTURE_FORMAT_BLOCK_SIZE:aJ,Text:nA,TextStyle:Ua,Texture:it,TextureGCSystem:cte,TextureMatrix:jO,TexturePool:ir,TexturePoolClass:bK,TextureSource:Xn,TextureStyle:La,TextureUvs:Rxe,Ticker:Ln,TickerListener:UT,TickerPlugin:PQ,TilingSprite:JJ,TilingSpriteGpuData:vie,TilingSpritePipe:Tie,TilingSpriteShader:gie,Transform:QJ,Triangle:OF,UNIFORM_TO_ARRAY_SETTERS:Nee,UNIFORM_TO_SINGLE_SETTERS:Lee,UNIFORM_TYPES_MAP:VK,UNIFORM_TYPES_VALUES:rF,UPDATE_BLEND:OS,UPDATE_COLOR:Fx,UPDATE_PRIORITY:pl,UPDATE_TRANSFORM:lge,UPDATE_VISIBLE:Um,UboBatch:bte,UboSystem:tI,UniformGroup:dr,VERSION:Gx,VideoSource:Gm,ViewContainer:Tl,ViewSystem:dte,ViewableBuffer:uf,VividLightBlend:yQ,WGSL_ALIGN_SIZE_DATA:ax,WGSL_TO_STD40_SIZE:iI,WRAP_MODES:wxe,WebGLRenderer:gte,WebGPURenderer:Pte,WebWorkerAdapter:gye,WorkerManager:AM,accessibilityTarget:Cge,addBits:cM,addMaskBounds:FS,addMaskLocalBounds:IS,addProgramDefines:kK,alphaFrag:vJ,alphaWgsl:MM,appendSVGPath:_M,applyMatrix:xie,applyProjectiveTransformationToPlane:Lte,applyStyleParams:HM,assignWithIgnore:DE,autoDetectEnvironment:Mge,autoDetectRenderer:CQ,autoDetectSource:dge,basisTranscoderUrls:BE,bgr2rgb:Nm,bitmapFontCachePlugin:MZ,bitmapFontTextParser:HT,bitmapFontXMLParser:TM,bitmapFontXMLStringParser:EM,bitmapTextSplit:Pie,blendTemplateFrag:$K,blendTemplateVert:KK,blendTemplateWgsl:QK,blockDataMap:YI,blurTemplateWgsl:wJ,boundsPool:al,browserExt:G$,buildAdaptiveBezier:_F,buildAdaptiveQuadratic:mZ,buildArc:vF,buildArcTo:gZ,buildArcToSvg:bZ,buildCircle:og,buildContextBatches:dZ,buildEllipse:nZ,buildGeometryFromPath:Ixe,buildLine:aZ,buildPixelLine:oZ,buildPolygon:uZ,buildRectangle:lZ,buildRoundedRectangle:rZ,buildSimpleUvs:mF,buildTriangle:cZ,buildUvs:pF,cacheAsTextureMixin:nK,cacheTextureArray:OZ,calculatePathArea:SZ,calculateProjection:Aee,canvasTextSplit:jie,checkChildrenDidChange:WO,checkDataUrl:Hf,checkExtension:Bo,checkForNestedPattern:TZ,checkMaxIfStatementsInShader:dF,childrenHelperMixin:rK,cleanArray:ate,cleanHash:ste,clearList:NE,closePointEps:gF,collectAllRenderables:kxe,collectRenderablesMixin:sK,color32BitToUniform:Ug,colorBit:jS,colorBitGl:XS,colorMatrixFilterFrag:BJ,colorMatrixFilterWgsl:BM,colorToUniform:hxe,compareModeToGlCompare:Wee,compileHighShader:jQ,compileHighShaderGl:XQ,compileHighShaderGlProgram:Og,compileHighShaderGpuProgram:kg,compileHooks:hM,compileInputs:dM,compileOutputs:VQ,compileShader:NM,compute2DProjection:Gte,convertFormatIfRequired:Jbe,convertToList:bo,copySearchParams:RE,createIdFromString:rg,createIndicesForQuads:VM,createLevelBuffers:Abe,createLevelBuffersFromKTX:eye,createStringVariations:AK,createTexture:Yh,createUboElementsSTD40:_ee,createUboElementsWGSL:yte,createUboSyncFunction:nI,createUboSyncFunctionSTD40:Eee,createUboSyncFunctionWGSL:_te,crossOrigin:KZ,cullingMixin:eK,curveEps:pM,defaultFilterVert:R_,defaultValue:lI,definedProps:cu,deprecation:ft,detectAvif:FZ,detectBasis:_be,detectCompressed:oye,detectDefaults:IZ,detectMp4:LZ,detectOgv:NZ,detectVideoAlphaMode:JO,detectWebm:UZ,detectWebp:GZ,determineCrossOrigin:ZZ,displacementFrag:kJ,displacementVert:OJ,displacementWgsl:kM,earcut:EQ,effectsMixin:oK,ensureAttributes:qF,ensureIsBuffer:fF,ensurePrecision:OK,ensureTextOptions:iA,executeInstructions:LE,extensions:Zi,extractAttributesFromGlProgram:Bee,extractAttributesFromGpuProgram:UK,extractFontFamilies:Oie,extractStructAndGroups:GT,extractSubpaths:EZ,extractSvgUrlId:yM,fastCopy:PE,findMixin:uK,fontStringFromTextStyle:Hx,formatShader:Lye,fragmentGPUTemplate:$Q,fragmentGlTemplate:QQ,generateArraySyncSTD40:Tee,generateArraySyncWGSL:xte,generateBlurFragSource:SJ,generateBlurGlProgram:CJ,generateBlurProgram:DJ,generateBlurVertSource:AJ,generateGPULayout:Fye,generateGpuLayoutGroups:GK,generateLayout:Iye,generateLayoutHash:HK,generateParticleUpdateFunction:Zte,generateProgram:Iee,generateShaderSyncCode:Ree,generateTextStyleKey:r_e,generateTextureBatchBit:YS,generateTextureBatchBitGl:qS,generateTextureMatrix:hZ,generateUniformsSync:Uee,getAdjustedBlendModeBlend:ag,getAttributeInfoFromFormat:cc,getBatchSamplersUniformGroup:WS,getBitmapTextLayout:ZS,getCanvasBoundingBox:eee,getCanvasFillStyle:Vx,getCanvasTexture:aI,getDefaultUniformValue:jK,getFastGlobalBounds:Mxe,getFastGlobalBoundsMixin:lK,getFillInstructionData:U0e,getFontCss:Lie,getFontFamilyName:XZ,getGeometryBounds:HQ,getGlTypeFromFormat:gee,getGlobalBounds:v_,getGlobalMixin:hK,getGlobalRenderableBounds:HJ,getLocalBounds:kS,getMaxFragmentPrecision:BK,getMaxTexturesPerBatch:FQ,getOrientationOfPoints:sZ,getPo2TextureFromSource:ZI,getResolutionOfUrl:JS,getSVGUrl:Nie,getSupportedCompressedTextureFormats:RF,getSupportedGPUCompressedTextureFormats:wM,getSupportedGlCompressedTextureFormats:CM,getSupportedTextureFormats:D_,getTemporaryCanvasFromImage:Uie,getTestContext:nF,getTextureBatchBindGroup:VS,getTextureDefaultMatrix:qxe,getTextureFormatFromKTXTexture:nye,getUboData:kee,getUniformData:Oee,getUrlExtension:CK,glFormatToGPUFormat:fJ,glUploadBufferImageResource:jee,glUploadCompressedTextureResource:Xee,glUploadImageResource:fI,glUploadVideoResource:Yee,globalUniformsBit:ZQ,globalUniformsBitGl:JQ,globalUniformsUBOBitGl:m0e,gpuFormatToBasisTranscoderFormat:wbe,gpuFormatToKTXBasisTranscoderFormat:sye,gpuUploadBufferImageResource:Ete,gpuUploadCompressedTextureResource:Ste,gpuUploadImageResource:qI,gpuUploadVideoResource:Ate,groupD8:ri,hasCachedCanvasTexture:jye,hslWgsl:Mye,hslgl:NS,hslgpu:US,injectBits:fM,insertVersion:FK,isMobile:PK,isPow2:QP,isRenderingToScreen:Cee,isSafari:kie,isSingleItem:Ix,isWebGLSupported:E_,isWebGPUSupported:S_,ktxTranscoderUrls:kE,loadBasis:Sbe,loadBasisOnWorker:sJ,loadBitmapFont:BZ,loadDDS:Obe,loadEnvironmentExtensions:sF,loadFontAsBase64:Fie,loadFontCSS:Iie,loadImageBitmap:$Z,loadJson:VZ,loadKTX:Wbe,loadKTX2:Zbe,loadKTX2onWorker:dJ,loadSVGImage:Gie,loadSvg:qZ,loadTextures:wF,loadTxt:jZ,loadVideoTextures:JZ,loadWebFont:YZ,localUniformBit:qm,localUniformBitGl:sA,localUniformBitGroup2:lee,localUniformMSDFBit:Eie,localUniformMSDFBitGl:Sie,log2:Wme,logDebugTexture:u_e,logProgramError:Fee,logRenderGroupScene:Qie,logScene:Kie,mSDFBit:Aie,mSDFBitGl:Cie,mapFormatToGlFormat:$ee,mapFormatToGlInternalFormat:Kee,mapFormatToGlType:Qee,mapGlToVertexFormat:Mee,mapSize:$ye,mapType:cI,mapWebGLBlendModesToPixi:Gee,maskFrag:VJ,maskVert:jJ,maskWgsl:LM,matrixPool:Ss,measureHtmlText:LF,measureMixin:fK,migrateFragmentFromV7toV8:qye,mipmapScaleModeToGlFilter:qee,multiplyColors:Ox,multiplyHexColors:qO,nextPow2:yf,noiseFrag:FJ,noiseWgsl:OM,nonCompressedFormats:iJ,normalizeExtensionPriority:Ny,onRenderMixin:pK,parseDDS:oJ,parseFunctionBody:Pxe,parseKTX:lJ,parseSVGDefinitions:vZ,parseSVGFloatAttribute:zn,parseSVGPath:BQ,parseSVGStyle:TF,particleData:YM,particlesFrag:eie,particlesVert:tie,particlesWgsl:jM,passthroughFrag:NJ,passthroughWgsl:FM,path:Qr,pointInTriangle:IM,preloadVideo:QZ,removeItems:YO,removeStructAndGroupDuplicates:zK,resetUids:qme,resolveCharacters:PZ,resolveCompressedTextureUrl:aye,resolveJsonUrl:eJ,resolveTextureUrl:DF,resourceToTexture:TK,roundPixelsBit:Fg,roundPixelsBitGl:Ig,roundedShapeArc:yZ,roundedShapeQuadraticCurve:xZ,sayHello:rte,scaleModeToGlFilter:GM,setBasisTranscoderPath:Tbe,setKTXTranscoderPath:Kbe,setPositions:yie,setProgramName:IK,setUvs:_ie,shapeBuilders:Lg,sortMixin:mK,spritesheetAsset:RK,squaredDistanceToLineSegment:tx,stripVersion:LK,styleAttributes:xM,testImageFormat:CF,testVideoFormat:C_,textStyleToCSS:iee,textureBit:cee,textureBitGl:hee,textureFrom:EK,tilingBit:pie,tilingBitGl:mie,toFillStyle:Ch,toLocalGlobalMixin:gK,toStrokeStyle:zx,transformVertices:KS,triangulateWithHoles:bF,uboSyncFunctionsSTD40:rI,uboSyncFunctionsWGSL:vee,uid:gn,uniformParsers:wh,unpremultiplyAlpha:nxe,unsafeEvalSupported:aF,updateLocalTransform:Oxe,updateQuadBounds:XO,updateRenderGroupTransform:Zee,updateRenderGroupTransforms:xI,updateTextBounds:HE,updateTransformAndChildren:_I,updateTransformBackwards:BS,updateWorldTransform:Fxe,v8_0_0:Yt,v8_3_4:Y$,validFormats:OE,validateRenderables:Jee,vertexGPUTemplate:WQ,vertexGlTemplate:KQ,vkFormatToGPUFormat:pJ,warn:Ct,webworkerExt:H$,wrapModeToGlAddress:XT},Symbol.toStringTag,{value:"Module"}));class d_e extends Ur{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(e){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}let f_e=0;const WM=class extends Ur{constructor(t){super(),this.id=f_e++,this.init(t)}set(t,e){if(this[t]===void 0)throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e;break}return this}get progress(){const{currentTime:t}=this._source;return t/this._duration}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(t){this._playing=!1,this._duration=t.source.duration;const e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}refresh(){const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const i=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*i*n,this._source.playbackRate=this._speed*t.speed*e.speed}refreshPaused(){const t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))}play(t){const{start:e,end:i,speed:n,loop:r,volume:s,muted:a}=t;i&&console.assert(i>e,"End time is before start time"),this._speed=n,this._volume=s,this._loop=!!r,this._muted=a,this.refresh(),this.loop&&i!==null&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=e,this._end=i||this._duration,this._start=Math.max(0,this._start-WM.PADDING),this._end=Math.min(this._end+WM.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=e,this._source.onloadedmetadata=null,this.emit("progress",e/this._duration,this._duration),Ln.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){Ln.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){Ln.shared.remove(this._onUpdate,this),this.removeAllListeners();const t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let Zie=WM;Zie.PADDING=.1;class p_e extends Ur{init(e){this.parent=e,this._source=e.options.source||new Audio,e.url&&(this._source.src=e.url)}create(){return new Zie(this)}get isPlayable(){return!!this._source&&this._source.readyState===4}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(e){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(e){const i=this._source,n=this.parent;if(i.readyState===4){n.isLoaded=!0;const l=n.autoPlayStart();e&&setTimeout(()=>{e(null,n,l)},0);return}if(!n.url){e(new Error("sound.url or sound.source must be set"));return}i.src=n.url;const r=()=>{o(),n.isLoaded=!0;const l=n.autoPlayStart();e&&e(null,n,l)},s=()=>{o(),e&&e(new Error("Sound loading has been aborted"))},a=()=>{o();const l=`Failed to load audio element (code: ${i.error.code})`;e?e(new Error(l)):console.error(l)},o=()=>{i.removeEventListener("canplaythrough",r),i.removeEventListener("load",r),i.removeEventListener("abort",s),i.removeEventListener("error",a)};i.addEventListener("canplaythrough",r,!1),i.addEventListener("load",r,!1),i.addEventListener("abort",s,!1),i.addEventListener("error",a,!1),i.load()}}class m_e{constructor(e,i){this.parent=e,Object.assign(this,i),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(e){return this.parent.play({complete:e,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const zE=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],g_e=["audio/mpeg","audio/ogg"],VE={};function b_e(t){const e={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},i=document.createElement("audio"),n={},r=/^no$/;zE.forEach(s=>{const a=i.canPlayType(`audio/${s}`).replace(r,""),o=e[s]?i.canPlayType(e[s]).replace(r,""):"";n[s]=!!a||!!o}),Object.assign(VE,n)}b_e();let y_e=0;class x_e extends Ur{constructor(e){super(),this.id=y_e++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(e)}set(e,i){if(this[e]===void 0)throw new Error(`Property with name ${e} does not exist.`);switch(e){case"speed":this.speed=i;break;case"volume":this.volume=i;break;case"muted":this.muted=i;break;case"loop":this.loop=i;break;case"paused":this.paused=i;break}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(e){this._speed=e,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(e){this._volume=e,this.refresh()}get muted(){return this._muted}set muted(e){this._muted=e,this.refresh()}get loop(){return this._loop}set loop(e){this._loop=e,this.refresh()}get filters(){return this._filters}set filters(e){this._filters&&(this._filters?.filter(i=>i).forEach(i=>i.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=e?.length?e.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const e=this._media.context,i=this._media.parent;this._source.loop=this._loop||i.loop;const n=e.volume*(e.muted?0:1),r=i.volume*(i.muted?0:1),s=this._volume*(this._muted?0:1);vo.setParamValue(this._gain.gain,s*r*n),vo.setParamValue(this._source.playbackRate,this._speed*i.speed*e.speed),this.applyFilters()}applyFilters(){if(this._filters?.length){this._source.disconnect();let e=this._source;this._filters.forEach(i=>{e.connect(i.destination),e=i}),e.connect(this._gain)}}refreshPaused(){const e=this._media.context,i=this._media.parent,n=this._paused||i.paused||e.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",n))}play(e){const{start:i,end:n,speed:r,loop:s,volume:a,muted:o,filters:l}=e;n&&console.assert(n>i,"End time is before start time"),this._paused=!1;const{source:h,gain:d}=this._media.nodes.cloneBufferSource();this._source=h,this._gain=d,this._speed=r,this._volume=a,this._loop=!!s,this._muted=o,this._filters=l,this.refresh();const p=this._source.buffer.duration;this._duration=p,this._end=n,this._lastUpdate=this._now(),this._elapsed=i,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=n,this._source.loopStart=i,this._source.start(0,i)):n?this._source.start(0,i,n-i):this._source.start(0,i),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(e){Ln.shared.remove(this._updateListener,this),e&&Ln.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(e){this._paused=e,this.refreshPaused()}destroy(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._filters?.forEach(e=>e.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(e=!1){if(this._source){const i=this._now(),n=i-this._lastUpdate;if(n>0||e){const r=this._source.playbackRate.value;this._elapsed+=n*r,this._lastUpdate=i;const s=this._duration;let a;if(this._source.loopStart){const o=this._source.loopEnd-this._source.loopStart;a=(this._source.loopStart+this._elapsed%o)/s}else a=this._elapsed%s/s;this._progress=a,this.emit("progress",this._progress,s)}}}init(e){this._media=e,e.context.events.on("refresh",this.refresh,this),e.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class Jie{constructor(e,i){this._output=i,this._input=e}get destination(){return this._input}get filters(){return this._filters}set filters(e){if(this._filters&&(this._filters.forEach(i=>{i&&i.disconnect()}),this._filters=null,this._input.connect(this._output)),e&&e.length){this._filters=e.slice(0),this._input.disconnect();let i=null;e.forEach(n=>{i===null?this._input.connect(n.destination):i.connect(n.destination),i=n}),i.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const ene=class extends Jie{constructor(t){const e=t.audioContext,i=e.createBufferSource(),n=e.createGain(),r=e.createAnalyser();i.connect(r),r.connect(n),n.connect(t.destination),super(r,n),this.context=t,this.bufferSource=i,this.gain=n,this.analyser=r}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(ene.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,vo.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;const i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}}get bufferSize(){return this.script.bufferSize}};let tne=ene;tne.BUFFER_SIZE=0;class __e{init(e){this.parent=e,this._nodes=new tne(this.context),this._source=this._nodes.bufferSource,this.source=e.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}this._source=null,this.source=null}create(){return new x_e(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(e){this._nodes.filters=e}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(e){this._source.buffer=e}get nodes(){return this._nodes}load(e){this.source?this._decode(this.source,e):this.parent.url?this._loadUrl(e):e?e(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(e){const i=this.parent.url,n=await Wt.get().fetch(i);this._decode(await n.arrayBuffer(),e)}_decode(e,i){const n=(r,s)=>{if(r)i&&i(r);else{this.parent.isLoaded=!0,this.buffer=s;const a=this.parent.autoPlayStart();i&&i(null,this.parent,a)}};e instanceof AudioBuffer?n(null,e):this.parent.context.decode(e,n)}}const _m=class{static from(t){let e={};typeof t=="string"?e.url=t:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?e.source=t:Array.isArray(t)?e.url=t:e=t,e={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...e},Object.freeze(e);const i=Cr().useLegacy?new p_e:new __e;return new _m(i,e)}constructor(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);const i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=Array.isArray(e.url)?this.preferUrl(e.url):e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}preferUrl(t){const[e]=t.map(i=>({url:i,ext:Qr.extname(i).slice(1)})).filter(({ext:i})=>VE[i]).sort((i,n)=>zE.indexOf(i.ext)-zE.indexOf(n.ext));if(!e)throw new Error("No supported file type found");return e.url}get context(){return Cr().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get filters(){return this.media.filters}set filters(t){this.media.filters=t}addSprites(t,e){if(typeof t=="object"){const n={};for(const r in t)n[r]=this.addSprites(r,t[r]);return n}console.assert(!this._sprites[t],`Alias ${t} is already taken`);const i=new m_e(this,e);return this._sprites[t]=i,i}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(t){if(t){const e=this._sprites[t];e!==void 0&&(e.destroy(),delete this._sprites[t])}else for(const e in this._sprites)this.removeSprites(e);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this}play(t,e){let i;if(typeof t=="string"?i={sprite:t,loop:this.loop,complete:e}:typeof t=="function"?(i={},i.complete=t):i=t,i={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...i||{}},i.sprite){const r=i.sprite;console.assert(!!this._sprites[r],`Alias ${r} is not available`);const s=this._sprites[r];i.start=s.start+(i.start||0),i.end=s.end,i.speed=s.speed||1,i.loop=s.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return this._preloadQueue?new Promise(r=>{this._preloadQueue.push(()=>{r(this.play(i))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=i,new Promise((r,s)=>{this._preload((a,o,l)=>{this._preloadQueue.forEach(h=>h()),this._preloadQueue=null,a?s(a):(i.loaded&&i.loaded(a,o,l),r(l))})}));(this.singleInstance||i.singleInstance)&&this._removeInstances();const n=this._createInstance();return this._instances.push(n),this.isPlaying=!0,n.once("end",()=>{i.complete&&i.complete(this),this._onComplete(n)}),n.once("stop",()=>{this._onComplete(n)}),n.play(i),n}refresh(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refresh()}refreshPaused(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refreshPaused()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}_preload(t){this.media.load(t)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t}_removeInstances(){for(let t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0}_onComplete(t){if(this._instances){const e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)}_createInstance(){if(_m._pool.length>0){const t=_m._pool.pop();return t.init(this.media),t}return this.media.create()}_poolInstance(t){t.destroy(),_m._pool.indexOf(t)<0&&_m._pool.push(t)}};let vf=_m;vf._pool=[];class Yx extends Jie{constructor(){const e=window,i=new Yx.AudioContext,n=i.createDynamicsCompressor(),r=i.createAnalyser();r.connect(n),n.connect(i.destination),super(r,n),this.autoPause=!0,this._ctx=i,this._offlineCtx=new Yx.OfflineAudioContext(1,2,e.OfflineAudioContext?Math.max(8e3,Math.min(96e3,i.sampleRate)):44100),this.compressor=n,this.analyser=r,this.events=new Ur,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked=i.state==="suspended"&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){if(!this.autoPause)return;const e=this._ctx.state;(e==="suspended"||e==="interrupted"||!this._locked)&&(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){this.autoPause&&(this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused()))}_unlock(){this._locked&&(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const e=this._ctx.createBufferSource();e.buffer=this._ctx.createBuffer(1,1,22050),e.connect(this._ctx.destination),e.start(0,0,0),e.context.state==="suspended"&&e.context.resume()}static get AudioContext(){const e=window;return e.AudioContext||e.webkitAudioContext||null}static get OfflineAudioContext(){const e=window;return e.OfflineAudioContext||e.webkitOfflineAudioContext||null}destroy(){super.destroy();const e=this._ctx;typeof e.close<"u"&&e.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(e){e&&this._ctx.state==="running"?this._ctx.suspend():!e&&this._ctx.state==="suspended"&&this._ctx.resume(),this._paused=e}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(e,i){const n=s=>{i(new Error(s?.message||"Unable to decode file"))},r=this._offlineCtx.decodeAudioData(e,s=>{i(null,s)},n);r&&r.catch(n)}}class ine{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new Yx),this._htmlAudioContext=new d_e,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(e){this.useLegacy||(this._context.filters=e)}get supported(){return Yx.AudioContext!==null}add(e,i){if(typeof e=="object"){const s={};for(const a in e){const o=this._getOptions(e[a],i);s[a]=this.add(a,o)}return s}if(console.assert(!this._sounds[e],`Sound with alias ${e} already exists.`),i instanceof vf)return this._sounds[e]=i,i;const n=this._getOptions(i),r=vf.from(n);return this._sounds[e]=r,r}_getOptions(e,i){let n;return typeof e=="string"?n={url:e}:Array.isArray(e)?n={url:e}:e instanceof ArrayBuffer||e instanceof AudioBuffer||e instanceof HTMLAudioElement?n={source:e}:n=e,n={...n,...i||{}},n}get useLegacy(){return this._useLegacy}set useLegacy(e){this._useLegacy=e,this._context=!e&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(e){this._webAudioContext.autoPause=!e}remove(e){return this.exists(e,!0),this._sounds[e].destroy(),delete this._sounds[e],this}get volumeAll(){return this._context.volume}set volumeAll(e){this._context.volume=e,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(e){this._context.speed=e,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const e in this._sounds)this._sounds[e].destroy(),delete this._sounds[e];return this}stopAll(){for(const e in this._sounds)this._sounds[e].stop();return this}exists(e,i=!1){const n=!!this._sounds[e];return i&&console.assert(n,`No sound matching alias '${e}'.`),n}isPlaying(){for(const e in this._sounds)if(this._sounds[e].isPlaying)return!0;return!1}find(e){return this.exists(e,!0),this._sounds[e]}play(e,i){return this.find(e).play(i)}stop(e){return this.find(e).stop()}pause(e){return this.find(e).pause()}resume(e){return this.find(e).resume()}volume(e,i){const n=this.find(e);return i!==void 0&&(n.volume=i),n.volume}speed(e,i){const n=this.find(e);return i!==void 0&&(n.speed=i),n.speed}duration(e){return this.find(e).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}}const bU=t=>{const e=t.src;let i=t?.alias?.[0];return(!i||t.src===i)&&(i=Qr.basename(e,Qr.extname(e))),i},v_e={extension:me.Asset,detection:{test:async()=>!0,add:async t=>[...t,...zE.filter(e=>VE[e])],remove:async t=>t.filter(e=>t.includes(e))},loader:{name:"sound",extension:{type:[me.LoadParser],priority:ba.High},test(t){const e=Qr.extname(t).slice(1);return!!VE[e]||g_e.some(i=>t.startsWith(`data:${i}`))},async load(t,e){const i=await new Promise((n,r)=>vf.from({...e.data,url:t,preload:!0,loaded(s,a){s?r(s):n(a),e.data?.loaded?.(s,a)}}));return Cr().add(bU(e),i),i},async unload(t,e){Cr().remove(bU(e))}}};Zi.add(v_e);const ki=Hme(new ine);var ni=class{constructor(){}};Ne(ni,"soundAliasesOrder",[]),Ne(ni,"soundsPlaying",{}),Ne(ni,"sounds",{});var yU=class nne extends vf{constructor(){super(...arguments),Ne(this,"alias")}pause(){if(!this.alias)throw new Error("[Pixi’VN] The alias is not defined.");let e=ni.soundsPlaying[this.alias];if(!e)throw new Error("[Pixi’VN] The alias is not found in the playInStepIndex.");return ni.soundsPlaying[this.alias]={...e,paused:!0},super.pause()}resume(){if(!this.alias)throw new Error("[Pixi’VN] The alias is not defined.");let e=ni.soundsPlaying[this.alias];if(!e)throw new Error("[Pixi’VN] The alias is not found in the playInStepIndex.");return ni.soundsPlaying[this.alias]={options:e.options,stepIndex:ht.stepCounter,paused:!1},super.resume()}destroy(){return this.alias&&delete ni.soundsPlaying[this.alias],super.destroy()}stop(){if(!this.alias)throw new Error("[Pixi’VN] The alias is not defined.");return delete ni.soundsPlaying[this.alias],super.stop()}play(e){if(typeof e=="string"&&(this.alias=e),!this.alias)throw new Error("[Pixi’VN] The alias is not defined.");return ni.soundsPlaying[this.alias]={stepIndex:ht.stepCounter,options:e,paused:!1},super.play(e)}static from(e){let i=vf.from(e);return new nne(i.media,i.options)}};function nT(t){let e=[];for(let i of t)i.type==="TelephoneFilter"?e.push(new U$):i.type==="StreamFilter"?e.push(new N$):i.type==="StereoFilter"?e.push(new L$(i.pan)):i.type==="ReverbFilter"?e.push(new I$(i.seconds,i.decay,i.reverse)):i.type==="MonoFilter"?e.push(new F$):i.type==="EqualizerFilter"?e.push(new Mo(i.f32,i.f64,i.f125,i.f250,i.f500,i.f1k,i.f2k,i.f4k,i.f8k,i.f16k)):i.type==="DistortionFilter"?e.push(new O$(i.amount)):ke.error("Unknown sound filter type");return e}function xU(t){if(!t)return;let e=[];for(let i of t)i instanceof U$?e.push({type:"TelephoneFilter"}):i instanceof N$?e.push({type:"StreamFilter"}):i instanceof L$?e.push({type:"StereoFilter",pan:i.pan}):i instanceof I$?e.push({type:"ReverbFilter",seconds:i.seconds,decay:i.decay,reverse:i.reverse}):i instanceof F$?e.push({type:"MonoFilter"}):i instanceof Mo?e.push({type:"EqualizerFilter",f32:i.f32,f64:i.f64,f125:i.f125,f250:i.f250,f500:i.f500,f1k:i.f1k,f2k:i.f2k,f4k:i.f4k,f8k:i.f8k,f16k:i.f16k}):i instanceof O$?e.push({type:"DistortionFilter",amount:i.amount}):ke.error("Unknown sound filter type");return e}var T_e=class extends ine{constructor(){super()}get context(){return ki.context}get filtersAll(){return ki.filtersAll}set filtersAll(t){ki.filtersAll=t.filter(e=>!(e instanceof jh))}get supported(){return ki.supported}getOptions(t,e){let i;return typeof t=="string"?i={url:t}:Array.isArray(t)?i={url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?i={source:t}:i=t,i={...i,...e||{}},i}add(t,e){if(typeof t=="object")throw new Error("[Pixi’VN] The method add(map: SoundSourceMap, globalOptions?: Options) is deprecated. Use add(alias: string, options: Options | string | ArrayBuffer | AudioBuffer | HTMLAudioElement | Sound): Sound; instead.");this.exists(t)&&this.remove(t),e instanceof vf&&(e=e.options);let i;if(e instanceof yU)i=e;else{let n=this.getOptions(e||{});i=yU.from(n)}return i.alias=t,!ni.soundAliasesOrder.includes(t)&&ni.soundAliasesOrder.push(t),ni.sounds[t]=i,ki.add(t,i),i}get useLegacy(){return ki.useLegacy}set useLegacy(t){ki.useLegacy=t}get disableAutoPause(){return ki.disableAutoPause}set disableAutoPause(t){ki.disableAutoPause=t}remove(t){return ni.soundAliasesOrder=ni.soundAliasesOrder.filter(e=>e!==t),delete ni.soundsPlaying[t],delete ni.sounds[t],ki.remove(t)}get volumeAll(){return ki.volumeAll}set volumeAll(t){ki.volumeAll=t}get speedAll(){return ki.speedAll}set speedAll(t){ki.speedAll=t}togglePauseAll(){return ki.togglePauseAll()}pauseAll(){return ki.pauseAll()}resumeAll(){return ki.resumeAll()}toggleMuteAll(){return ki.toggleMuteAll()}muteAll(){return ki.muteAll()}unmuteAll(){return ki.unmuteAll()}removeAll(){return ni.soundAliasesOrder=[],ni.soundsPlaying={},ni.sounds={},ki.removeAll()}stopAll(){for(let t in ni.sounds)ni.sounds[t].stop();return ni.soundsPlaying={},ki.stopAll()}exists(t,e){return ki.exists(t,e)||t in ni.sounds}isPlaying(){return ki.isPlaying()}find(t){let e=ni.sounds[t];return e||(e=ki.find(t),e&&(ni.sounds[t]=e),e)}play(t,e){if(!this.exists(t))throw new Error("[Pixi’VN] The alias is not found in the sound library.");return ni.soundsPlaying[t]={stepIndex:ht.stepCounter,options:e,paused:!1},ki.play(t,e)}stop(t){return delete ni.soundsPlaying[t],ki.stop(t)}pause(t){let e=ni.soundsPlaying[t];if(!e)throw new Error("[Pixi’VN] The alias is not found in the playInStepIndex.");return ni.soundsPlaying[t]={...e,paused:!0},ki.pause(t)}resume(t){let e=ni.soundsPlaying[t];if(!e)throw new Error("[Pixi’VN] The alias is not found in the playInStepIndex.");return ni.soundsPlaying[t]={options:e.options,stepIndex:ht.stepCounter,paused:!1},ki.resume(t)}volume(t,e){return ki.volume(t,e)}speed(t,e){return ki.speed(t,e)}duration(t){return ki.duration(t)}close(){return ki.close()}clear(){this.stopAll()}export(){let t={};for(let e in ni.soundsPlaying){let i=ni.soundsPlaying[e],n=this.find(e);n&&(t[e]={...i,sound:{options:{...n.options,autoPlay:n.autoPlay,loop:n.loop,preload:n.preload,singleInstance:n.singleInstance,url:n.options.url,volume:n.options.volume},filters:xU(n.media.filters)}})}return{soundsPlaying:Hi(t),soundAliasesOrder:Hi(ni.soundAliasesOrder),filters:Hi(xU(this.filtersAll))}}removeOldSoundAndExport(){return this.export()}restore(t){let e=ht.stepCounter-1;this.clear();try{if(t.hasOwnProperty("soundAliasesOrder"))ni.soundAliasesOrder=t.soundAliasesOrder;else{ke.error("The data does not have the properties soundAliasesOrder");return}if(t.hasOwnProperty("filters")){let i=t.filters;i&&(this.filtersAll=nT(i))}if(t.hasOwnProperty("playInStepIndex")){let i=t.playInStepIndex;i&&(ni.soundsPlaying=i)}if(t.hasOwnProperty("sounds")){let i=t.sounds;for(let n in i){let r=i[n],s=!1,a=this.add(n,{...r.options,autoPlay:!1});if(n in ni.soundsPlaying){let o=ni.soundsPlaying[n];(r.options.loop||o.options&&typeof o.options=="object"&&o.options.loop||o.stepIndex===e)&&(s=!0),r.filters&&(a.filters=nT(r.filters)),s&&a.play()}}}if(t.hasOwnProperty("soundsPlaying")){let i=t.soundsPlaying;for(let n in i){let r=i[n];ni.soundsPlaying[n]={paused:r.paused,stepIndex:r.stepIndex,options:r.options};let s=i[n].sound,a=!1,o;if(this.exists(n)?(o=this.find(n),s.options.url=o.options.url,s.options.volume=o.options.volume,o.options=s.options,o.autoPlay=!1,o.filters=s.filters?nT(s.filters):[]):o=this.add(n,{...s.options,autoPlay:!1}),n in ni.soundsPlaying){let l=ni.soundsPlaying[n];(s.options.loop||l.options&&typeof l.options=="object"&&l.options.loop||l.stepIndex===e)&&(a=!0),s.filters&&(o.filters=nT(s.filters)),a&&o.play()}}}else{ke.error("The data does not have the properties soundsPlaying");return}}catch(i){ke.error("Error importing data",i)}}},by=new T_e,$M=typeof process=="object"&&process?process:{},E_e=(t,e,i,n)=>{typeof $M.emitWarning=="function"?$M.emitWarning(t,e,i,n):console.error(`[${i}] ${e}: ${t}`)},_U=globalThis.AbortController,vU=globalThis.AbortSignal;if(typeof _U>"u"){vU=class{constructor(){Kd(this,"onabort"),Kd(this,"_onabort",[]),Kd(this,"reason"),Kd(this,"aborted",!1)}addEventListener(i,n){this._onabort.push(n)}},_U=class{constructor(){Kd(this,"signal",new vU),e()}abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let n of this.signal._onabort)n(i);this.signal.onabort?.(i)}}};let t=$M.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,E_e("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var S_e=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),A_e=t=>S_e(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?C_e:null:null,C_e=class extends Array{constructor(t){super(t),this.fill(0)}},ox,w_e=class Vy{constructor(e,i){if(Kd(this,"heap"),Kd(this,"length"),!pae(Vy,ox))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new i(e),this.length=0}static create(e){let i=A_e(e);if(!i)return[];H8(Vy,ox,!0);let n=new Vy(e,i);return H8(Vy,ox,!1),n}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};ox=new WeakMap,mae(w_e,ox,!1);var D_e="1.3.32",rne={};fae(rne,{createExportableElement:()=>R_e});var jE;(t=>(t.log=(e,...i)=>console.log(`[Pixi’VN] ${e}`,...i),t.warn=(e,...i)=>console.warn(`[Pixi’VN] ${e}`,...i),t.error=(e,...i)=>console.error(`[Pixi’VN] ${e}`,...i),t.info=(e,...i)=>console.info(`[Pixi’VN] ${e}`,...i)))(jE||(jE={}));function R_e(t){try{if(typeof t>"u")return t;let e=JSON.stringify(t);return JSON.parse(e)}catch(e){throw jE.error("Error creating exportable element",t,e),new Error("[Pixi’VN] Error creating exportable element")}}function P_e(){console.info(`
 _______   _            _    _   ____   ____  ____  _____  
|_   __ \\ (_)          (_)  | | |_  _| |_  _||_   \\|_   _| 
  | |__) |__   _   __  __   \\_|   \\ \\   / /    |   \\ | |   
  |  ___/[  | [ \\ [  ][  |         \\ \\ / /     | |\\ \\| |   
 _| |_    | |  > '  <  | |          \\ ' /     _| |_\\   |_  
|_____|  [___][__]\`\\_][___]          \\_/     |_____|\\____| 

`)}function TU(){let t=window.location.pathname+window.location.hash;return t.includes("#")&&(t=t.split("#")[1]),t}var Jd;(t=>{async function e(p,g,y){if(ht.init({getCurrentGameStepState:()=>{let v={};try{v=dt.export()}catch{}return{path:TU(),storage:Nu.export(),canvas:v,sound:by.export(),labelIndex:nt.currentLabelStepIndex||0,openedLabels:K.openedLabels}},restoreGameStepState:async(v,S)=>{wt._originalStepData=v,nt.openedLabels=v.openedLabels,Nu.restore(v.storage);try{await dt.restore(v.canvas)}catch{}by.restore(v.sound),S(v.path)},getStepCounter:()=>K.stepCounter,setStepCounter:v=>{nt._stepCounter=v},getOpenedLabels:()=>K.openedLabels.length,addHistoryItem:(v,S)=>xh.add(v,S),getCurrentStepsRunningNumber:()=>nt.stepsRunning,getCharacter:v=>M$.get(v),onGoNextEnd:async()=>{try{let v=He._tickersToCompleteOnStepEnd.tikersIds.map(({id:T})=>dt.forceCompletionOfTicker(T)),S=He._tickersToCompleteOnStepEnd.stepAlias.map(({alias:T,id:A})=>dt.forceCompletionOfTicker(A,T));await Promise.all([...v,...S]),He._tickersToCompleteOnStepEnd={tikersIds:[],stepAlias:[]}}catch{}},getVariable:v=>Nu.get(v),setVariable:(v,S)=>Nu.set(v,S),removeVariable:v=>Nu.removeVariable(v),getFlag:v=>Nu.getFlag(v),setFlag:(v,S)=>Nu.setFlag(v,S),onLabelClosing:v=>ui.clearOldTempVariables(v)}),P_e(),!p||!g){jE.warn("The canvas element or options are not defined. The canvas will not be initialized.");return}return await dt.init(p,g,y)}t.init=e;function i(){Nu.clear();try{dt.clear()}catch{}by.clear(),K.clear(),xh.clear()}t.clear=i;function n(){let p={};try{p=dt.export()}catch{}return{pixivn_version:D_e,stepData:K.export(),storageData:Nu.export(),canvasData:p,soundData:by.export(),historyData:xh.export(),path:TU()}}t.exportGameState=n;async function r(p,g){p.stepData.hasOwnProperty("stepsHistory")&&p.stepData.stepsHistory&&(p.historyData.stepsHistory=p.stepData.stepsHistory),p.stepData.hasOwnProperty("originalStepData")&&p.stepData.originalStepData&&(p.historyData.originalStepData=p.stepData.originalStepData),xh.restore(p.historyData);let y=xh.lastKey;if(typeof y=="number"){let v=xh.stepsInfoMap.get(y)||null;await K.restore(p.stepData,v)}Nu.restore(p.storageData);try{await dt.restore(p.canvasData)}catch{}by.restore(p.soundData),await g(p.path)}t.restoreGameState=r;function s(p){return JSON.parse(p)}t.jsonToGameState=s;function a(p){ht.onEnd=p}t.onEnd=a;function o(p){ht.onError=p}t.onError=o;function l(p){nt.onStepStart=p}t.onStepStart=l;function h(p){nt.onLoadingLabel=p}t.onLoadingLabel=h;function d(p){nt.onStepEnd=p}t.onStepEnd=d})(Jd||(Jd={}));({...rne});var ID={exports:{}},yy={},LD={exports:{}},ND={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EU;function M_e(){return EU||(EU=1,(function(t){function e($,se){var we=$.length;$.push(se);e:for(;0<we;){var _e=we-1>>>1,J=$[_e];if(0<r(J,se))$[_e]=se,$[we]=J,we=_e;else break e}}function i($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var se=$[0],we=$.pop();if(we!==se){$[0]=we;e:for(var _e=0,J=$.length,ie=J>>>1;_e<ie;){var be=2*(_e+1)-1,ee=$[be],Ge=be+1,Ve=$[Ge];if(0>r(ee,we))Ge<J&&0>r(Ve,ee)?($[_e]=Ve,$[Ge]=we,_e=Ge):($[_e]=ee,$[be]=we,_e=be);else if(Ge<J&&0>r(Ve,we))$[_e]=Ve,$[Ge]=we,_e=Ge;else break e}}return se}function r($,se){var we=$.sortIndex-se.sortIndex;return we!==0?we:$.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],h=[],d=1,p=null,g=3,y=!1,v=!1,S=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function B($){for(var se=i(h);se!==null;){if(se.callback===null)n(h);else if(se.startTime<=$)n(h),se.sortIndex=se.expirationTime,e(l,se);else break;se=i(h)}}function z($){if(S=!1,B($),!v)if(i(l)!==null)v=!0,L||(L=!0,re());else{var se=i(h);se!==null&&Te(z,se.startTime-$)}}var L=!1,H=-1,te=5,j=-1;function O(){return T?!0:!(t.unstable_now()-j<te)}function q(){if(T=!1,L){var $=t.unstable_now();j=$;var se=!0;try{e:{v=!1,S&&(S=!1,D(H),H=-1),y=!0;var we=g;try{t:{for(B($),p=i(l);p!==null&&!(p.expirationTime>$&&O());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,g=p.priorityLevel;var J=_e(p.expirationTime<=$);if($=t.unstable_now(),typeof J=="function"){p.callback=J,B($),se=!0;break t}p===i(l)&&n(l),B($)}else n(l);p=i(l)}if(p!==null)se=!0;else{var ie=i(h);ie!==null&&Te(z,ie.startTime-$),se=!1}}break e}finally{p=null,g=we,y=!1}se=void 0}}finally{se?re():L=!1}}}var re;if(typeof R=="function")re=function(){R(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,fe=ae.port2;ae.port1.onmessage=q,re=function(){fe.postMessage(null)}}else re=function(){A(q,0)};function Te($,se){H=A(function(){$(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var se=3;break;default:se=g}var we=g;g=se;try{return $()}finally{g=we}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function($,se){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var we=g;g=$;try{return se()}finally{g=we}},t.unstable_scheduleCallback=function($,se,we){var _e=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?_e+we:_e):we=_e,$){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=we+J,$={id:d++,callback:se,priorityLevel:$,startTime:we,expirationTime:J,sortIndex:-1},we>_e?($.sortIndex=we,e(h,$),i(l)===null&&$===i(h)&&(S?(D(H),H=-1):S=!0,Te(z,we-_e))):($.sortIndex=J,e(l,$),v||y||(v=!0,L||(L=!0,re()))),$},t.unstable_shouldYield=O,t.unstable_wrapCallback=function($){var se=g;return function(){var we=g;g=se;try{return $.apply(this,arguments)}finally{g=we}}}})(ND)),ND}var SU;function B_e(){return SU||(SU=1,LD.exports=M_e()),LD.exports}var UD={exports:{}},Kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AU;function k_e(){if(AU)return Kt;AU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(ie){return ie===null||typeof ie!="object"?null:(ie=g&&ie[g]||ie["@@iterator"],typeof ie=="function"?ie:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function A(ie,be,ee){this.props=ie,this.context=be,this.refs=T,this.updater=ee||v}A.prototype.isReactComponent={},A.prototype.setState=function(ie,be){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,be,"setState")},A.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function D(){}D.prototype=A.prototype;function R(ie,be,ee){this.props=ie,this.context=be,this.refs=T,this.updater=ee||v}var B=R.prototype=new D;B.constructor=R,S(B,A.prototype),B.isPureReactComponent=!0;var z=Array.isArray;function L(){}var H={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function j(ie,be,ee){var Ge=ee.ref;return{$$typeof:t,type:ie,key:be,ref:Ge!==void 0?Ge:null,props:ee}}function O(ie,be){return j(ie.type,be,ie.props)}function q(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===t}function re(ie){var be={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(ee){return be[ee]})}var ae=/\/+/g;function fe(ie,be){return typeof ie=="object"&&ie!==null&&ie.key!=null?re(""+ie.key):be.toString(36)}function Te(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(L,L):(ie.status="pending",ie.then(function(be){ie.status==="pending"&&(ie.status="fulfilled",ie.value=be)},function(be){ie.status==="pending"&&(ie.status="rejected",ie.reason=be)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function $(ie,be,ee,Ge,Ve){var Ye=typeof ie;(Ye==="undefined"||Ye==="boolean")&&(ie=null);var lt=!1;if(ie===null)lt=!0;else switch(Ye){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(ie.$$typeof){case t:case e:lt=!0;break;case d:return lt=ie._init,$(lt(ie._payload),be,ee,Ge,Ve)}}if(lt)return Ve=Ve(ie),lt=Ge===""?"."+fe(ie,0):Ge,z(Ve)?(ee="",lt!=null&&(ee=lt.replace(ae,"$&/")+"/"),$(Ve,be,ee,"",function($t){return $t})):Ve!=null&&(q(Ve)&&(Ve=O(Ve,ee+(Ve.key==null||ie&&ie.key===Ve.key?"":(""+Ve.key).replace(ae,"$&/")+"/")+lt)),be.push(Ve)),1;lt=0;var pt=Ge===""?".":Ge+":";if(z(ie))for(var tt=0;tt<ie.length;tt++)Ge=ie[tt],Ye=pt+fe(Ge,tt),lt+=$(Ge,be,ee,Ye,Ve);else if(tt=y(ie),typeof tt=="function")for(ie=tt.call(ie),tt=0;!(Ge=ie.next()).done;)Ge=Ge.value,Ye=pt+fe(Ge,tt++),lt+=$(Ge,be,ee,Ye,Ve);else if(Ye==="object"){if(typeof ie.then=="function")return $(Te(ie),be,ee,Ge,Ve);throw be=String(ie),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return lt}function se(ie,be,ee){if(ie==null)return ie;var Ge=[],Ve=0;return $(ie,Ge,"","",function(Ye){return be.call(ee,Ye,Ve++)}),Ge}function we(ie){if(ie._status===-1){var be=ie._result;be=be(),be.then(function(ee){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=ee)},function(ee){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=ee)}),ie._status===-1&&(ie._status=0,ie._result=be)}if(ie._status===1)return ie._result.default;throw ie._result}var _e=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},J={map:se,forEach:function(ie,be,ee){se(ie,function(){be.apply(this,arguments)},ee)},count:function(ie){var be=0;return se(ie,function(){be++}),be},toArray:function(ie){return se(ie,function(be){return be})||[]},only:function(ie){if(!q(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return Kt.Activity=p,Kt.Children=J,Kt.Component=A,Kt.Fragment=i,Kt.Profiler=r,Kt.PureComponent=R,Kt.StrictMode=n,Kt.Suspense=l,Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Kt.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return H.H.useMemoCache(ie)}},Kt.cache=function(ie){return function(){return ie.apply(null,arguments)}},Kt.cacheSignal=function(){return null},Kt.cloneElement=function(ie,be,ee){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var Ge=S({},ie.props),Ve=ie.key;if(be!=null)for(Ye in be.key!==void 0&&(Ve=""+be.key),be)!te.call(be,Ye)||Ye==="key"||Ye==="__self"||Ye==="__source"||Ye==="ref"&&be.ref===void 0||(Ge[Ye]=be[Ye]);var Ye=arguments.length-2;if(Ye===1)Ge.children=ee;else if(1<Ye){for(var lt=Array(Ye),pt=0;pt<Ye;pt++)lt[pt]=arguments[pt+2];Ge.children=lt}return j(ie.type,Ve,Ge)},Kt.createContext=function(ie){return ie={$$typeof:a,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:s,_context:ie},ie},Kt.createElement=function(ie,be,ee){var Ge,Ve={},Ye=null;if(be!=null)for(Ge in be.key!==void 0&&(Ye=""+be.key),be)te.call(be,Ge)&&Ge!=="key"&&Ge!=="__self"&&Ge!=="__source"&&(Ve[Ge]=be[Ge]);var lt=arguments.length-2;if(lt===1)Ve.children=ee;else if(1<lt){for(var pt=Array(lt),tt=0;tt<lt;tt++)pt[tt]=arguments[tt+2];Ve.children=pt}if(ie&&ie.defaultProps)for(Ge in lt=ie.defaultProps,lt)Ve[Ge]===void 0&&(Ve[Ge]=lt[Ge]);return j(ie,Ye,Ve)},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(ie){return{$$typeof:o,render:ie}},Kt.isValidElement=q,Kt.lazy=function(ie){return{$$typeof:d,_payload:{_status:-1,_result:ie},_init:we}},Kt.memo=function(ie,be){return{$$typeof:h,type:ie,compare:be===void 0?null:be}},Kt.startTransition=function(ie){var be=H.T,ee={};H.T=ee;try{var Ge=ie(),Ve=H.S;Ve!==null&&Ve(ee,Ge),typeof Ge=="object"&&Ge!==null&&typeof Ge.then=="function"&&Ge.then(L,_e)}catch(Ye){_e(Ye)}finally{be!==null&&ee.types!==null&&(be.types=ee.types),H.T=be}},Kt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Kt.use=function(ie){return H.H.use(ie)},Kt.useActionState=function(ie,be,ee){return H.H.useActionState(ie,be,ee)},Kt.useCallback=function(ie,be){return H.H.useCallback(ie,be)},Kt.useContext=function(ie){return H.H.useContext(ie)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(ie,be){return H.H.useDeferredValue(ie,be)},Kt.useEffect=function(ie,be){return H.H.useEffect(ie,be)},Kt.useEffectEvent=function(ie){return H.H.useEffectEvent(ie)},Kt.useId=function(){return H.H.useId()},Kt.useImperativeHandle=function(ie,be,ee){return H.H.useImperativeHandle(ie,be,ee)},Kt.useInsertionEffect=function(ie,be){return H.H.useInsertionEffect(ie,be)},Kt.useLayoutEffect=function(ie,be){return H.H.useLayoutEffect(ie,be)},Kt.useMemo=function(ie,be){return H.H.useMemo(ie,be)},Kt.useOptimistic=function(ie,be){return H.H.useOptimistic(ie,be)},Kt.useReducer=function(ie,be,ee){return H.H.useReducer(ie,be,ee)},Kt.useRef=function(ie){return H.H.useRef(ie)},Kt.useState=function(ie){return H.H.useState(ie)},Kt.useSyncExternalStore=function(ie,be,ee){return H.H.useSyncExternalStore(ie,be,ee)},Kt.useTransition=function(){return H.H.useTransition()},Kt.version="19.2.0",Kt}var CU;function dA(){return CU||(CU=1,UD.exports=k_e()),UD.exports}var GD={exports:{}},xs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wU;function O_e(){if(wU)return xs;wU=1;var t=dA();function e(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(l,h,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:l,containerInfo:h,implementation:d}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,h){if(l==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xs.createPortal=function(l,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(l,h,null,d)},xs.flushSync=function(l){var h=a.T,d=n.p;try{if(a.T=null,n.p=2,l)return l()}finally{a.T=h,n.p=d,n.d.f()}},xs.preconnect=function(l,h){typeof l=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(l,h))},xs.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},xs.preinit=function(l,h){if(typeof l=="string"&&h&&typeof h.as=="string"){var d=h.as,p=o(d,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?n.d.S(l,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):d==="script"&&n.d.X(l,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xs.preinitModule=function(l,h){if(typeof l=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=o(h.as,h.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(l)},xs.preload=function(l,h){if(typeof l=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,p=o(d,h.crossOrigin);n.d.L(l,d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xs.preloadModule=function(l,h){if(typeof l=="string")if(h){var d=o(h.as,h.crossOrigin);n.d.m(l,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(l)},xs.requestFormReset=function(l){n.d.r(l)},xs.unstable_batchedUpdates=function(l,h){return l(h)},xs.useFormState=function(l,h,d){return a.H.useFormState(l,h,d)},xs.useFormStatus=function(){return a.H.useHostTransitionStatus()},xs.version="19.2.0",xs}var DU;function F_e(){if(DU)return GD.exports;DU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),GD.exports=O_e(),GD.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RU;function I_e(){if(RU)return yy;RU=1;var t=B_e(),e=dA(),i=F_e();function n(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var c=u,f=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,(c.flags&4098)!==0&&(f=c.return),u=c.return;while(u)}return c.tag===3?f:null}function a(u){if(u.tag===13){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function o(u){if(u.tag===31){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(n(188))}function h(u){var c=u.alternate;if(!c){if(c=s(u),c===null)throw Error(n(188));return c!==u?null:u}for(var f=u,b=c;;){var _=f.return;if(_===null)break;var E=_.alternate;if(E===null){if(b=_.return,b!==null){f=b;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===f)return l(_),u;if(E===b)return l(_),c;E=E.sibling}throw Error(n(188))}if(f.return!==b.return)f=_,b=E;else{for(var k=!1,W=_.child;W;){if(W===f){k=!0,f=_,b=E;break}if(W===b){k=!0,b=_,f=E;break}W=W.sibling}if(!k){for(W=E.child;W;){if(W===f){k=!0,f=E,b=_;break}if(W===b){k=!0,b=E,f=_;break}W=W.sibling}if(!k)throw Error(n(189))}}if(f.alternate!==b)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?u:c}function d(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u;for(u=u.child;u!==null;){if(c=d(u),c!==null)return c;u=u.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function re(u){return u===null||typeof u!="object"?null:(u=q&&u[q]||u["@@iterator"],typeof u=="function"?u:null)}var ae=Symbol.for("react.client.reference");function fe(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===ae?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case S:return"Fragment";case A:return"Profiler";case T:return"StrictMode";case z:return"Suspense";case L:return"SuspenseList";case j:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case v:return"Portal";case R:return u.displayName||"Context";case D:return(u._context.displayName||"Context")+".Consumer";case B:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case H:return c=u.displayName||null,c!==null?c:fe(u.type)||"Memo";case te:c=u._payload,u=u._init;try{return fe(u(c))}catch{}}return null}var Te=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},_e=[],J=-1;function ie(u){return{current:u}}function be(u){0>J||(u.current=_e[J],_e[J]=null,J--)}function ee(u,c){J++,_e[J]=u.current,u.current=c}var Ge=ie(null),Ve=ie(null),Ye=ie(null),lt=ie(null);function pt(u,c){switch(ee(Ye,c),ee(Ve,u),ee(Ge,null),c.nodeType){case 9:case 11:u=(u=c.documentElement)&&(u=u.namespaceURI)?u8(u):0;break;default:if(u=c.tagName,c=c.namespaceURI)c=u8(c),u=l8(c,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}be(Ge),ee(Ge,u)}function tt(){be(Ge),be(Ve),be(Ye)}function $t(u){u.memoizedState!==null&&ee(lt,u);var c=Ge.current,f=l8(c,u.type);c!==f&&(ee(Ve,u),ee(Ge,f))}function li(u){Ve.current===u&&(be(Ge),be(Ve)),lt.current===u&&(be(lt),Hb._currentValue=we)}var Rt,Qt;function Bt(u){if(Rt===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Rt=c&&c[1]||"",Qt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+u+Qt}var Nt=!1;function fi(u,c){if(!u||Nt)return"";Nt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(c){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Pe){var Re=Pe}Reflect.construct(u,[],Ue)}else{try{Ue.call()}catch(Pe){Re=Pe}u.call(Ue.prototype)}}else{try{throw Error()}catch(Pe){Re=Pe}(Ue=u())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Pe){if(Pe&&Re&&typeof Pe.stack=="string")return[Pe.stack,Re.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=b.DetermineComponentFrameRoot(),k=E[0],W=E[1];if(k&&W){var pe=k.split(`
`),Ce=W.split(`
`);for(_=b=0;b<pe.length&&!pe[b].includes("DetermineComponentFrameRoot");)b++;for(;_<Ce.length&&!Ce[_].includes("DetermineComponentFrameRoot");)_++;if(b===pe.length||_===Ce.length)for(b=pe.length-1,_=Ce.length-1;1<=b&&0<=_&&pe[b]!==Ce[_];)_--;for(;1<=b&&0<=_;b--,_--)if(pe[b]!==Ce[_]){if(b!==1||_!==1)do if(b--,_--,0>_||pe[b]!==Ce[_]){var Oe=`
`+pe[b].replace(" at new "," at ");return u.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",u.displayName)),Oe}while(1<=b&&0<=_);break}}}finally{Nt=!1,Error.prepareStackTrace=f}return(f=u?u.displayName||u.name:"")?Bt(f):""}function Si(u,c){switch(u.tag){case 26:case 27:case 5:return Bt(u.type);case 16:return Bt("Lazy");case 13:return u.child!==c&&c!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return fi(u.type,!1);case 11:return fi(u.type.render,!1);case 1:return fi(u.type,!0);case 31:return Bt("Activity");default:return""}}function Cn(u){try{var c="",f=null;do c+=Si(u,f),f=u,u=u.return;while(u);return c}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var Nn=Object.prototype.hasOwnProperty,nn=t.unstable_scheduleCallback,ci=t.unstable_cancelCallback,kt=t.unstable_shouldYield,Di=t.unstable_requestPaint,Ni=t.unstable_now,Ms=t.unstable_getCurrentPriorityLevel,Be=t.unstable_ImmediatePriority,We=t.unstable_UserBlockingPriority,bt=t.unstable_NormalPriority,Ut=t.unstable_LowPriority,pi=t.unstable_IdlePriority,Yn=t.log,pr=t.unstable_setDisableYieldValue,cn=null,Xi=null;function qn(u){if(typeof Yn=="function"&&pr(u),Xi&&typeof Xi.setStrictMode=="function")try{Xi.setStrictMode(cn,u)}catch{}}var bi=Math.clz32?Math.clz32:_a,Jr=Math.log,rn=Math.LN2;function _a(u){return u>>>=0,u===0?32:31-(Jr(u)/rn|0)|0}var Gr=256,Hr=262144,V=4194304;function Y(u){var c=u&42;if(c!==0)return c;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function M(u,c,f){var b=u.pendingLanes;if(b===0)return 0;var _=0,E=u.suspendedLanes,k=u.pingedLanes;u=u.warmLanes;var W=b&134217727;return W!==0?(b=W&~E,b!==0?_=Y(b):(k&=W,k!==0?_=Y(k):f||(f=W&~u,f!==0&&(_=Y(f))))):(W=b&~E,W!==0?_=Y(W):k!==0?_=Y(k):f||(f=b&~u,f!==0&&(_=Y(f)))),_===0?0:c!==0&&c!==_&&(c&E)===0&&(E=_&-_,f=c&-c,E>=f||E===32&&(f&4194048)!==0)?c:_}function F(u,c){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&c)===0}function Z(u,c){switch(u){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var u=V;return V<<=1,(V&62914560)===0&&(V=4194304),u}function Le(u){for(var c=[],f=0;31>f;f++)c.push(u);return c}function at(u,c){u.pendingLanes|=c,c!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function qt(u,c,f,b,_,E){var k=u.pendingLanes;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=f,u.entangledLanes&=f,u.errorRecoveryDisabledLanes&=f,u.shellSuspendCounter=0;var W=u.entanglements,pe=u.expirationTimes,Ce=u.hiddenUpdates;for(f=k&~f;0<f;){var Oe=31-bi(f),Ue=1<<Oe;W[Oe]=0,pe[Oe]=-1;var Re=Ce[Oe];if(Re!==null)for(Ce[Oe]=null,Oe=0;Oe<Re.length;Oe++){var Pe=Re[Oe];Pe!==null&&(Pe.lane&=-536870913)}f&=~Ue}b!==0&&zt(u,b,0),E!==0&&_===0&&u.tag!==0&&(u.suspendedLanes|=E&~(k&~c))}function zt(u,c,f){u.pendingLanes|=c,u.suspendedLanes&=~c;var b=31-bi(c);u.entangledLanes|=c,u.entanglements[b]=u.entanglements[b]|1073741824|f&261930}function vi(u,c){var f=u.entangledLanes|=c;for(u=u.entanglements;f;){var b=31-bi(f),_=1<<b;_&c|u[b]&c&&(u[b]|=c),f&=~_}}function ot(u,c){var f=c&-c;return f=(f&42)!==0?1:Un(f),(f&(u.suspendedLanes|c))!==0?0:f}function Un(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function zr(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Pn(){var u=se.p;return u!==0?u:(u=window.event,u===void 0?32:B8(u.type))}function mr(u,c){var f=se.p;try{return se.p=u,c()}finally{se.p=f}}var yn=Math.random().toString(36).slice(2),Gt="__reactFiber$"+yn,hn="__reactProps$"+yn,or="__reactContainer$"+yn,va="__reactEvents$"+yn,Va="__reactListeners$"+yn,$h="__reactHandles$"+yn,U_="__reactResources$"+yn,Kh="__reactMarker$"+yn;function qg(u){delete u[Gt],delete u[hn],delete u[va],delete u[Va],delete u[$h]}function gc(u){var c=u[Gt];if(c)return c;for(var f=u.parentNode;f;){if(c=f[or]||f[Gt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(u=g8(u);u!==null;){if(f=u[Gt])return f;u=g8(u)}return c}u=f,f=u.parentNode}return null}function bu(u){if(u=u[Gt]||u[or]){var c=u.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return u}return null}function Qh(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u.stateNode;throw Error(n(33))}function bc(u){var c=u[U_];return c||(c=u[U_]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function gr(u){u[Kh]=!0}var Wg=new Set,$g={};function yu(u,c){yc(u,c),yc(u+"Capture",c)}function yc(u,c){for($g[u]=c,u=0;u<c.length;u++)Wg.add(c[u])}var AA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kg={},Xf={};function Yf(u){return Nn.call(Xf,u)?!0:Nn.call(Kg,u)?!1:AA.test(u)?Xf[u]=!0:(Kg[u]=!0,!1)}function qf(u,c,f){if(Yf(c))if(f===null)u.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":u.removeAttribute(c);return;case"boolean":var b=c.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){u.removeAttribute(c);return}}u.setAttribute(c,""+f)}}function Zh(u,c,f){if(f===null)u.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttribute(c,""+f)}}function Oo(u,c,f,b){if(b===null)u.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttributeNS(c,f,""+b)}}function hs(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function G_(u){var c=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function H_(u,c,f){var b=Object.getOwnPropertyDescriptor(u.constructor.prototype,c);if(!u.hasOwnProperty(c)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var _=b.get,E=b.set;return Object.defineProperty(u,c,{configurable:!0,get:function(){return _.call(this)},set:function(k){f=""+k,E.call(this,k)}}),Object.defineProperty(u,c,{enumerable:b.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){u._valueTracker=null,delete u[c]}}}}function Qg(u){if(!u._valueTracker){var c=G_(u)?"checked":"value";u._valueTracker=H_(u,c,""+u[c])}}function z_(u){if(!u)return!1;var c=u._valueTracker;if(!c)return!0;var f=c.getValue(),b="";return u&&(b=G_(u)?u.checked?"true":"false":u.value),u=b,u!==f?(c.setValue(u),!0):!1}function xu(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Zg=/[\n"\\]/g;function es(u){return u.replace(Zg,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Jg(u,c,f,b,_,E,k,W){u.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?u.type=k:u.removeAttribute("type"),c!=null?k==="number"?(c===0&&u.value===""||u.value!=c)&&(u.value=""+hs(c)):u.value!==""+hs(c)&&(u.value=""+hs(c)):k!=="submit"&&k!=="reset"||u.removeAttribute("value"),c!=null?Jh(u,k,hs(c)):f!=null?Jh(u,k,hs(f)):b!=null&&u.removeAttribute("value"),_==null&&E!=null&&(u.defaultChecked=!!E),_!=null&&(u.checked=_&&typeof _!="function"&&typeof _!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?u.name=""+hs(W):u.removeAttribute("name")}function ts(u,c,f,b,_,E,k,W){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(u.type=E),c!=null||f!=null){if(!(E!=="submit"&&E!=="reset"||c!=null)){Qg(u);return}f=f!=null?""+hs(f):"",c=c!=null?""+hs(c):f,W||c===u.value||(u.value=c),u.defaultValue=c}b=b??_,b=typeof b!="function"&&typeof b!="symbol"&&!!b,u.checked=W?u.checked:!!b,u.defaultChecked=!!b,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(u.name=k),Qg(u)}function Jh(u,c,f){c==="number"&&xu(u.ownerDocument)===u||u.defaultValue===""+f||(u.defaultValue=""+f)}function _u(u,c,f,b){if(u=u.options,c){c={};for(var _=0;_<f.length;_++)c["$"+f[_]]=!0;for(f=0;f<u.length;f++)_=c.hasOwnProperty("$"+u[f].value),u[f].selected!==_&&(u[f].selected=_),_&&b&&(u[f].defaultSelected=!0)}else{for(f=""+hs(f),c=null,_=0;_<u.length;_++){if(u[_].value===f){u[_].selected=!0,b&&(u[_].defaultSelected=!0);return}c!==null||u[_].disabled||(c=u[_])}c!==null&&(c.selected=!0)}}function Wf(u,c,f){if(c!=null&&(c=""+hs(c),c!==u.value&&(u.value=c),f==null)){u.defaultValue!==c&&(u.defaultValue=c);return}u.defaultValue=f!=null?""+hs(f):""}function e0(u,c,f,b){if(c==null){if(b!=null){if(f!=null)throw Error(n(92));if(Te(b)){if(1<b.length)throw Error(n(93));b=b[0]}f=b}f==null&&(f=""),c=f}f=hs(c),u.defaultValue=f,b=u.textContent,b===f&&b!==""&&b!==null&&(u.value=b),Qg(u)}function Cl(u,c){if(c){var f=u.firstChild;if(f&&f===u.lastChild&&f.nodeType===3){f.nodeValue=c;return}}u.textContent=c}var CA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function V_(u,c,f){var b=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?b?u.setProperty(c,""):c==="float"?u.cssFloat="":u[c]="":b?u.setProperty(c,f):typeof f!="number"||f===0||CA.has(c)?c==="float"?u.cssFloat=f:u[c]=(""+f).trim():u[c]=f+"px"}function wl(u,c,f){if(c!=null&&typeof c!="object")throw Error(n(62));if(u=u.style,f!=null){for(var b in f)!f.hasOwnProperty(b)||c!=null&&c.hasOwnProperty(b)||(b.indexOf("--")===0?u.setProperty(b,""):b==="float"?u.cssFloat="":u[b]="");for(var _ in c)b=c[_],c.hasOwnProperty(_)&&f[_]!==b&&V_(u,_,b)}else for(var E in c)c.hasOwnProperty(E)&&V_(u,E,c[E])}function t0(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),DA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $f(u){return DA.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Ta(){}var Kf=null;function i0(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var xc=null,_c=null;function j_(u){var c=bu(u);if(c&&(u=c.stateNode)){var f=u[hn]||null;e:switch(u=c.stateNode,c.type){case"input":if(Jg(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=u;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+es(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var b=f[c];if(b!==u&&b.form===u.form){var _=b[hn]||null;if(!_)throw Error(n(90));Jg(b,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(c=0;c<f.length;c++)b=f[c],b.form===u.form&&z_(b)}break e;case"textarea":Wf(u,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&_u(u,!!f.multiple,c,!1)}}}var n0=!1;function X_(u,c,f){if(n0)return u(c,f);n0=!0;try{var b=u(c);return b}finally{if(n0=!1,(xc!==null||_c!==null)&&(T2(),xc&&(c=xc,u=_c,_c=xc=null,j_(c),u)))for(c=0;c<u.length;c++)j_(u[c])}}function ed(u,c){var f=u.stateNode;if(f===null)return null;var b=f[hn]||null;if(b===null)return null;f=b[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(u=u.type,b=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!b;break e;default:u=!1}if(u)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var Fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=!1;if(Fo)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){td=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{td=!1}var Rr=null,Dl=null,vc=null;function Y_(){if(vc)return vc;var u,c=Dl,f=c.length,b,_="value"in Rr?Rr.value:Rr.textContent,E=_.length;for(u=0;u<f&&c[u]===_[u];u++);var k=f-u;for(b=1;b<=k&&c[f-b]===_[E-b];b++);return vc=_.slice(u,1<b?1-b:void 0)}function Qf(u){var c=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&c===13&&(u=13)):u=c,u===10&&(u=13),32<=u||u===13?u:0}function Tc(){return!0}function r0(){return!1}function fs(u){function c(f,b,_,E,k){this._reactName=f,this._targetInst=_,this.type=b,this.nativeEvent=E,this.target=k,this.currentTarget=null;for(var W in u)u.hasOwnProperty(W)&&(f=u[W],this[W]=f?f(E):E[W]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Tc:r0,this.isPropagationStopped=r0,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Tc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Tc)},persist:function(){},isPersistent:Tc}),c}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=fs(Io),id=p({},Io,{view:0,detail:0}),s0=fs(id),vu,br,nd,Zf=p({},id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dn,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==nd&&(nd&&u.type==="mousemove"?(vu=u.screenX-nd.screenX,br=u.screenY-nd.screenY):br=vu=0,nd=u),vu)},movementY:function(u){return"movementY"in u?u.movementY:br}}),a0=fs(Zf),q_=p({},Zf,{dataTransfer:0}),RA=fs(q_),PA=p({},id,{relatedTarget:0}),Jf=fs(PA),MA=p({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),rd=fs(MA),W_=p({},Io,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),$_=fs(W_),BA=p({},Io,{data:0}),K_=fs(BA),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ep(u){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(u):(u=kA[u])?!!c[u]:!1}function dn(){return ep}var u0=p({},id,{key:function(u){if(u.key){var c=Tu[u.key]||u.key;if(c!=="Unidentified")return c}return u.type==="keypress"?(u=Qf(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?o0[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dn,charCode:function(u){return u.type==="keypress"?Qf(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Qf(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),OA=fs(u0),FA=p({},Zf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l0=fs(FA),Q_=p({},id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dn}),c0=fs(Q_),IA=p({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),LA=fs(IA),sd=p({},Zf,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),NA=fs(sd),h0=p({},Io,{newState:0,oldState:0}),Z_=fs(h0),UA=[9,13,27,32],d0=Fo&&"CompositionEvent"in window,ad=null;Fo&&"documentMode"in document&&(ad=document.documentMode);var J_=Fo&&"TextEvent"in window&&!ad,ev=Fo&&(!d0||ad&&8<ad&&11>=ad),f0=" ",tp=!1;function tv(u,c){switch(u){case"keyup":return UA.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iv(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Rl=!1;function Mn(u,c){switch(u){case"compositionend":return iv(c);case"keypress":return c.which!==32?null:(tp=!0,f0);case"textInput":return u=c.data,u===f0&&tp?null:u;default:return null}}function nv(u,c){if(Rl)return u==="compositionend"||!d0&&tv(u,c)?(u=Y_(),vc=Dl=Rr=null,Rl=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return ev&&c.locale!=="ko"?null:c.data;default:return null}}var GA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rv(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c==="input"?!!GA[u.type]:c==="textarea"}function sv(u,c,f,b){xc?_c?_c.push(b):_c=[b]:xc=b,c=R2(c,"onChange"),0<c.length&&(f=new ja("onChange","change",null,f,b),u.push({event:f,listeners:c}))}var Pl=null,od=null;function HA(u){i8(u,0)}function ud(u){var c=Qh(u);if(z_(c))return u}function av(u,c){if(u==="change")return c}var ld=!1;if(Fo){var cd;if(Fo){var Ml="oninput"in document;if(!Ml){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),Ml=typeof ov.oninput=="function"}cd=Ml}else cd=!1;ld=cd&&(!document.documentMode||9<document.documentMode)}function uv(){Pl&&(Pl.detachEvent("onpropertychange",lv),od=Pl=null)}function lv(u){if(u.propertyName==="value"&&ud(od)){var c=[];sv(c,od,u,i0(u)),X_(HA,c)}}function zA(u,c,f){u==="focusin"?(uv(),Pl=c,od=f,Pl.attachEvent("onpropertychange",lv)):u==="focusout"&&uv()}function VA(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return ud(od)}function cv(u,c){if(u==="click")return ud(c)}function jA(u,c){if(u==="input"||u==="change")return ud(c)}function XA(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var Bs=typeof Object.is=="function"?Object.is:XA;function Lo(u,c){if(Bs(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var f=Object.keys(u),b=Object.keys(c);if(f.length!==b.length)return!1;for(b=0;b<f.length;b++){var _=f[b];if(!Nn.call(c,_)||!Bs(u[_],c[_]))return!1}return!0}function hv(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function dv(u,c){var f=hv(u);u=0;for(var b;f;){if(f.nodeType===3){if(b=u+f.textContent.length,u<=c&&b>=c)return{node:f,offset:c-u};u=b}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=hv(f)}}function p0(u,c){return u&&c?u===c?!0:u&&u.nodeType===3?!1:c&&c.nodeType===3?p0(u,c.parentNode):"contains"in u?u.contains(c):u.compareDocumentPosition?!!(u.compareDocumentPosition(c)&16):!1:!1}function fv(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var c=xu(u.document);c instanceof u.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)u=c.contentWindow;else break;c=xu(u.document)}return c}function ip(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c&&(c==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||c==="textarea"||u.contentEditable==="true")}var pv=Fo&&"documentMode"in document&&11>=document.documentMode,Bl=null,hd=null,Ec=null,np=!1;function rp(u,c,f){var b=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;np||Bl==null||Bl!==xu(b)||(b=Bl,"selectionStart"in b&&ip(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ec&&Lo(Ec,b)||(Ec=b,b=R2(hd,"onSelect"),0<b.length&&(c=new ja("onSelect","select",null,c,f),u.push({event:c,listeners:b}),c.target=Bl)))}function Eu(u,c){var f={};return f[u.toLowerCase()]=c.toLowerCase(),f["Webkit"+u]="webkit"+c,f["Moz"+u]="moz"+c,f}var kl={animationend:Eu("Animation","AnimationEnd"),animationiteration:Eu("Animation","AnimationIteration"),animationstart:Eu("Animation","AnimationStart"),transitionrun:Eu("Transition","TransitionRun"),transitionstart:Eu("Transition","TransitionStart"),transitioncancel:Eu("Transition","TransitionCancel"),transitionend:Eu("Transition","TransitionEnd")},sp={},mv={};Fo&&(mv=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function Ol(u){if(sp[u])return sp[u];if(!kl[u])return u;var c=kl[u],f;for(f in c)if(c.hasOwnProperty(f)&&f in mv)return sp[u]=c[f];return u}var m0=Ol("animationend"),gv=Ol("animationiteration"),Sc=Ol("animationstart"),YA=Ol("transitionrun"),g0=Ol("transitionstart"),qA=Ol("transitioncancel"),b0=Ol("transitionend"),ap=new Map,y0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");y0.push("scrollEnd");function ks(u,c){ap.set(u,c),yu(c,[u])}var op=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},yr=[],Su=0,x0=0;function Ac(){for(var u=Su,c=x0=Su=0;c<u;){var f=yr[c];yr[c++]=null;var b=yr[c];yr[c++]=null;var _=yr[c];yr[c++]=null;var E=yr[c];if(yr[c++]=null,b!==null&&_!==null){var k=b.pending;k===null?_.next=_:(_.next=k.next,k.next=_),b.pending=_}E!==0&&bv(f,_,E)}}function dd(u,c,f,b){yr[Su++]=u,yr[Su++]=c,yr[Su++]=f,yr[Su++]=b,x0|=b,u.lanes|=b,u=u.alternate,u!==null&&(u.lanes|=b)}function up(u,c,f,b){return dd(u,c,f,b),fd(u)}function Au(u,c){return dd(u,null,null,c),fd(u)}function bv(u,c,f){u.lanes|=f;var b=u.alternate;b!==null&&(b.lanes|=f);for(var _=!1,E=u.return;E!==null;)E.childLanes|=f,b=E.alternate,b!==null&&(b.childLanes|=f),E.tag===22&&(u=E.stateNode,u===null||u._visibility&1||(_=!0)),u=E,E=E.return;return u.tag===3?(E=u.stateNode,_&&c!==null&&(_=31-bi(f),u=E.hiddenUpdates,b=u[_],b===null?u[_]=[c]:b.push(c),c.lane=f|536870912),E):null}function fd(u){if(50<Ob)throw Ob=0,aC=null,Error(n(185));for(var c=u.return;c!==null;)u=c,c=u.return;return u.tag===3?u.stateNode:null}var Cu={};function WA(u,c,f,b){this.tag=u,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(u,c,f,b){return new WA(u,c,f,b)}function lp(u){return u=u.prototype,!(!u||!u.isReactComponent)}function No(u,c){var f=u.alternate;return f===null?(f=Os(u.tag,c,u.key,u.mode),f.elementType=u.elementType,f.type=u.type,f.stateNode=u.stateNode,f.alternate=u,u.alternate=f):(f.pendingProps=c,f.type=u.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=u.flags&65011712,f.childLanes=u.childLanes,f.lanes=u.lanes,f.child=u.child,f.memoizedProps=u.memoizedProps,f.memoizedState=u.memoizedState,f.updateQueue=u.updateQueue,c=u.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=u.sibling,f.index=u.index,f.ref=u.ref,f.refCleanup=u.refCleanup,f}function yv(u,c){u.flags&=65011714;var f=u.alternate;return f===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=f.childLanes,u.lanes=f.lanes,u.child=f.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=f.memoizedProps,u.memoizedState=f.memoizedState,u.updateQueue=f.updateQueue,u.type=f.type,c=f.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),u}function cp(u,c,f,b,_,E){var k=0;if(b=u,typeof u=="function")lp(u)&&(k=1);else if(typeof u=="string")k=Zse(u,f,Ge.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case j:return u=Os(31,f,c,_),u.elementType=j,u.lanes=E,u;case S:return Fs(f.children,_,E,c);case T:k=8,_|=24;break;case A:return u=Os(12,f,c,_|2),u.elementType=A,u.lanes=E,u;case z:return u=Os(13,f,c,_),u.elementType=z,u.lanes=E,u;case L:return u=Os(19,f,c,_),u.elementType=L,u.lanes=E,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case R:k=10;break e;case D:k=9;break e;case B:k=11;break e;case H:k=14;break e;case te:k=16,b=null;break e}k=29,f=Error(n(130,u===null?"null":typeof u,"")),b=null}return c=Os(k,f,c,_),c.elementType=u,c.type=b,c.lanes=E,c}function Fs(u,c,f,b){return u=Os(7,u,b,c),u.lanes=f,u}function Uo(u,c,f){return u=Os(6,u,null,c),u.lanes=f,u}function hp(u){var c=Os(18,null,null,0);return c.stateNode=u,c}function pd(u,c,f){return c=Os(4,u.children!==null?u.children:[],u.key,c),c.lanes=f,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}var dp=new WeakMap;function Is(u,c){if(typeof u=="object"&&u!==null){var f=dp.get(u);return f!==void 0?f:(c={value:u,source:c,stack:Cn(c)},dp.set(u,c),c)}return{value:u,source:c,stack:Cn(c)}}var Fl=[],Cc=0,wc=null,md=0,Ws=[],ps=0,wu=null,Xa=1,Ya="";function qa(u,c){Fl[Cc++]=md,Fl[Cc++]=wc,wc=u,md=c}function Dc(u,c,f){Ws[ps++]=Xa,Ws[ps++]=Ya,Ws[ps++]=wu,wu=u;var b=Xa;u=Ya;var _=32-bi(b)-1;b&=~(1<<_),f+=1;var E=32-bi(c)+_;if(30<E){var k=_-_%5;E=(b&(1<<k)-1).toString(32),b>>=k,_-=k,Xa=1<<32-bi(c)+_|f<<_|b,Ya=E+u}else Xa=1<<E|f<<_|b,Ya=u}function fp(u){u.return!==null&&(qa(u,1),Dc(u,1,0))}function pp(u){for(;u===wc;)wc=Fl[--Cc],Fl[Cc]=null,md=Fl[--Cc],Fl[Cc]=null;for(;u===wu;)wu=Ws[--ps],Ws[ps]=null,Ya=Ws[--ps],Ws[ps]=null,Xa=Ws[--ps],Ws[ps]=null}function xv(u,c){Ws[ps++]=Xa,Ws[ps++]=Ya,Ws[ps++]=wu,Xa=c.id,Ya=c.overflow,wu=u}var xr=null,fn=null,yi=!1,Go=null,$s=!1,_0=Error(n(519));function Ho(u){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gd(Is(c,u)),_0}function _v(u){var c=u.stateNode,f=u.type,b=u.memoizedProps;switch(c[Gt]=u,c[hn]=b,f){case"dialog":xi("cancel",c),xi("close",c);break;case"iframe":case"object":case"embed":xi("load",c);break;case"video":case"audio":for(f=0;f<Ib.length;f++)xi(Ib[f],c);break;case"source":xi("error",c);break;case"img":case"image":case"link":xi("error",c),xi("load",c);break;case"details":xi("toggle",c);break;case"input":xi("invalid",c),ts(c,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":xi("invalid",c);break;case"textarea":xi("invalid",c),e0(c,b.value,b.defaultValue,b.children)}f=b.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||b.suppressHydrationWarning===!0||a8(c.textContent,f)?(b.popover!=null&&(xi("beforetoggle",c),xi("toggle",c)),b.onScroll!=null&&xi("scroll",c),b.onScrollEnd!=null&&xi("scrollend",c),b.onClick!=null&&(c.onclick=Ta),c=!0):c=!1,c||Ho(u,!0)}function v0(u){for(xr=u.return;xr;)switch(xr.tag){case 5:case 31:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:xr=xr.return}}function Rc(u){if(u!==xr)return!1;if(!yi)return v0(u),yi=!0,!1;var c=u.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=u.type,f=!(f!=="form"&&f!=="button")||vC(u.type,u.memoizedProps)),f=!f),f&&fn&&Ho(u),v0(u),c===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));fn=m8(u)}else if(c===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));fn=m8(u)}else c===27?(c=fn,Zc(u.type)?(u=CC,CC=null,fn=u):fn=c):fn=xr?to(u.stateNode.nextSibling):null;return!0}function Il(){fn=xr=null,yi=!1}function T0(){var u=Go;return u!==null&&(Wi===null?Wi=u:Wi.push.apply(Wi,u),Go=null),u}function gd(u){Go===null?Go=[u]:Go.push(u)}var E0=ie(null),Ll=null,zo=null;function Wa(u,c,f){ee(E0,c._currentValue),c._currentValue=f}function $a(u){u._currentValue=E0.current,be(E0)}function S0(u,c,f){for(;u!==null;){var b=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,b!==null&&(b.childLanes|=c)):b!==null&&(b.childLanes&c)!==c&&(b.childLanes|=c),u===f)break;u=u.return}}function mp(u,c,f,b){var _=u.child;for(_!==null&&(_.return=u);_!==null;){var E=_.dependencies;if(E!==null){var k=_.child;E=E.firstContext;e:for(;E!==null;){var W=E;E=_;for(var pe=0;pe<c.length;pe++)if(W.context===c[pe]){E.lanes|=f,W=E.alternate,W!==null&&(W.lanes|=f),S0(E.return,f,u),b||(k=null);break e}E=W.next}}else if(_.tag===18){if(k=_.return,k===null)throw Error(n(341));k.lanes|=f,E=k.alternate,E!==null&&(E.lanes|=f),S0(k,f,u),k=null}else k=_.child;if(k!==null)k.return=_;else for(k=_;k!==null;){if(k===u){k=null;break}if(_=k.sibling,_!==null){_.return=k.return,k=_;break}k=k.return}_=k}}function Du(u,c,f,b){u=null;for(var _=c,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var k=_.alternate;if(k===null)throw Error(n(387));if(k=k.memoizedProps,k!==null){var W=_.type;Bs(_.pendingProps.value,k.value)||(u!==null?u.push(W):u=[W])}}else if(_===lt.current){if(k=_.alternate,k===null)throw Error(n(387));k.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(u!==null?u.push(Hb):u=[Hb])}_=_.return}u!==null&&mp(c,u,f,b),c.flags|=262144}function gp(u){for(u=u.firstContext;u!==null;){if(!Bs(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Nl(u){Ll=u,zo=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Pr(u){return vv(Ll,u)}function bd(u,c){return Ll===null&&Nl(u),vv(u,c)}function vv(u,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},zo===null){if(u===null)throw Error(n(308));zo=c,u.dependencies={lanes:0,firstContext:c},u.flags|=524288}else zo=zo.next=c;return f}var Tv=typeof AbortController<"u"?AbortController:function(){var u=[],c=this.signal={aborted:!1,addEventListener:function(f,b){u.push(b)}};this.abort=function(){c.aborted=!0,u.forEach(function(f){return f()})}},$A=t.unstable_scheduleCallback,KA=t.unstable_NormalPriority,Wn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function A0(){return{controller:new Tv,data:new Map,refCount:0}}function yd(u){u.refCount--,u.refCount===0&&$A(KA,function(){u.controller.abort()})}var Ea=null,bp=0,Ls=0,Pc=null;function QA(u,c){if(Ea===null){var f=Ea=[];bp=0,Ls=dC(),Pc={status:"pending",value:void 0,then:function(b){f.push(b)}}}return bp++,c.then(Ev,Ev),c}function Ev(){if(--bp===0&&Ea!==null){Pc!==null&&(Pc.status="fulfilled");var u=Ea;Ea=null,Ls=0,Pc=null;for(var c=0;c<u.length;c++)(0,u[c])()}}function ZA(u,c){var f=[],b={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return u.then(function(){b.status="fulfilled",b.value=c;for(var _=0;_<f.length;_++)(0,f[_])(c)},function(_){for(b.status="rejected",b.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),b}var Mc=$.S;$.S=function(u,c){jp=Ni(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&QA(u,c),Mc!==null&&Mc(u,c)};var Vo=ie(null);function Ul(){var u=Vo.current;return u!==null?u:et.pooledCache}function yp(u,c){c===null?ee(Vo,Vo.current):ee(Vo,c.pool)}function Bc(){var u=Ul();return u===null?null:{parent:Wn._currentValue,pool:u}}var Gl=Error(n(460)),C0=Error(n(474)),xp=Error(n(542)),xd={then:function(){}};function Sv(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Av(u,c,f){switch(f=u[f],f===void 0?u.push(c):f!==c&&(c.then(Ta,Ta),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,Vr(u),u;default:if(typeof c.status=="string")c.then(Ta,Ta);else{if(u=et,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=c,u.status="pending",u.then(function(b){if(c.status==="pending"){var _=c;_.status="fulfilled",_.value=b}},function(b){if(c.status==="pending"){var _=c;_.status="rejected",_.reason=b}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,Vr(u),u}throw Hl=c,Gl}}function Ru(u){try{var c=u._init;return c(u._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Hl=f,Gl):f}}var Hl=null;function Cv(){if(Hl===null)throw Error(n(459));var u=Hl;return Hl=null,u}function Vr(u){if(u===Gl||u===xp)throw Error(n(483))}var kc=null,Oc=0;function Pu(u){var c=Oc;return Oc+=1,kc===null&&(kc=[]),Av(kc,u,c)}function Fc(u,c){c=c.props.ref,u.ref=c!==void 0?c:null}function _p(u,c){throw c.$$typeof===g?Error(n(525)):(u=Object.prototype.toString.call(c),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u)))}function w0(u){function c(ve,xe){if(u){var Se=ve.deletions;Se===null?(ve.deletions=[xe],ve.flags|=16):Se.push(xe)}}function f(ve,xe){if(!u)return null;for(;xe!==null;)c(ve,xe),xe=xe.sibling;return null}function b(ve){for(var xe=new Map;ve!==null;)ve.key!==null?xe.set(ve.key,ve):xe.set(ve.index,ve),ve=ve.sibling;return xe}function _(ve,xe){return ve=No(ve,xe),ve.index=0,ve.sibling=null,ve}function E(ve,xe,Se){return ve.index=Se,u?(Se=ve.alternate,Se!==null?(Se=Se.index,Se<xe?(ve.flags|=67108866,xe):Se):(ve.flags|=67108866,xe)):(ve.flags|=1048576,xe)}function k(ve){return u&&ve.alternate===null&&(ve.flags|=67108866),ve}function W(ve,xe,Se,Ie){return xe===null||xe.tag!==6?(xe=Uo(Se,ve.mode,Ie),xe.return=ve,xe):(xe=_(xe,Se),xe.return=ve,xe)}function pe(ve,xe,Se,Ie){var St=Se.type;return St===S?Oe(ve,xe,Se.props.children,Ie,Se.key):xe!==null&&(xe.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===te&&Ru(St)===xe.type)?(xe=_(xe,Se.props),Fc(xe,Se),xe.return=ve,xe):(xe=cp(Se.type,Se.key,Se.props,null,ve.mode,Ie),Fc(xe,Se),xe.return=ve,xe)}function Ce(ve,xe,Se,Ie){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Se.containerInfo||xe.stateNode.implementation!==Se.implementation?(xe=pd(Se,ve.mode,Ie),xe.return=ve,xe):(xe=_(xe,Se.children||[]),xe.return=ve,xe)}function Oe(ve,xe,Se,Ie,St){return xe===null||xe.tag!==7?(xe=Fs(Se,ve.mode,Ie,St),xe.return=ve,xe):(xe=_(xe,Se),xe.return=ve,xe)}function Ue(ve,xe,Se){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=Uo(""+xe,ve.mode,Se),xe.return=ve,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case y:return Se=cp(xe.type,xe.key,xe.props,null,ve.mode,Se),Fc(Se,xe),Se.return=ve,Se;case v:return xe=pd(xe,ve.mode,Se),xe.return=ve,xe;case te:return xe=Ru(xe),Ue(ve,xe,Se)}if(Te(xe)||re(xe))return xe=Fs(xe,ve.mode,Se,null),xe.return=ve,xe;if(typeof xe.then=="function")return Ue(ve,Pu(xe),Se);if(xe.$$typeof===R)return Ue(ve,bd(ve,xe),Se);_p(ve,xe)}return null}function Re(ve,xe,Se,Ie){var St=xe!==null?xe.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return St!==null?null:W(ve,xe,""+Se,Ie);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case y:return Se.key===St?pe(ve,xe,Se,Ie):null;case v:return Se.key===St?Ce(ve,xe,Se,Ie):null;case te:return Se=Ru(Se),Re(ve,xe,Se,Ie)}if(Te(Se)||re(Se))return St!==null?null:Oe(ve,xe,Se,Ie,null);if(typeof Se.then=="function")return Re(ve,xe,Pu(Se),Ie);if(Se.$$typeof===R)return Re(ve,xe,bd(ve,Se),Ie);_p(ve,Se)}return null}function Pe(ve,xe,Se,Ie,St){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return ve=ve.get(Se)||null,W(xe,ve,""+Ie,St);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case y:return ve=ve.get(Ie.key===null?Se:Ie.key)||null,pe(xe,ve,Ie,St);case v:return ve=ve.get(Ie.key===null?Se:Ie.key)||null,Ce(xe,ve,Ie,St);case te:return Ie=Ru(Ie),Pe(ve,xe,Se,Ie,St)}if(Te(Ie)||re(Ie))return ve=ve.get(Se)||null,Oe(xe,ve,Ie,St,null);if(typeof Ie.then=="function")return Pe(ve,xe,Se,Pu(Ie),St);if(Ie.$$typeof===R)return Pe(ve,xe,Se,bd(xe,Ie),St);_p(xe,Ie)}return null}function ct(ve,xe,Se,Ie){for(var St=null,Ui=null,yt=xe,ai=xe=0,Ei=null;yt!==null&&ai<Se.length;ai++){yt.index>ai?(Ei=yt,yt=null):Ei=yt.sibling;var Gi=Re(ve,yt,Se[ai],Ie);if(Gi===null){yt===null&&(yt=Ei);break}u&&yt&&Gi.alternate===null&&c(ve,yt),xe=E(Gi,xe,ai),Ui===null?St=Gi:Ui.sibling=Gi,Ui=Gi,yt=Ei}if(ai===Se.length)return f(ve,yt),yi&&qa(ve,ai),St;if(yt===null){for(;ai<Se.length;ai++)yt=Ue(ve,Se[ai],Ie),yt!==null&&(xe=E(yt,xe,ai),Ui===null?St=yt:Ui.sibling=yt,Ui=yt);return yi&&qa(ve,ai),St}for(yt=b(yt);ai<Se.length;ai++)Ei=Pe(yt,ve,ai,Se[ai],Ie),Ei!==null&&(u&&Ei.alternate!==null&&yt.delete(Ei.key===null?ai:Ei.key),xe=E(Ei,xe,ai),Ui===null?St=Ei:Ui.sibling=Ei,Ui=Ei);return u&&yt.forEach(function(nh){return c(ve,nh)}),yi&&qa(ve,ai),St}function Ft(ve,xe,Se,Ie){if(Se==null)throw Error(n(151));for(var St=null,Ui=null,yt=xe,ai=xe=0,Ei=null,Gi=Se.next();yt!==null&&!Gi.done;ai++,Gi=Se.next()){yt.index>ai?(Ei=yt,yt=null):Ei=yt.sibling;var nh=Re(ve,yt,Gi.value,Ie);if(nh===null){yt===null&&(yt=Ei);break}u&&yt&&nh.alternate===null&&c(ve,yt),xe=E(nh,xe,ai),Ui===null?St=nh:Ui.sibling=nh,Ui=nh,yt=Ei}if(Gi.done)return f(ve,yt),yi&&qa(ve,ai),St;if(yt===null){for(;!Gi.done;ai++,Gi=Se.next())Gi=Ue(ve,Gi.value,Ie),Gi!==null&&(xe=E(Gi,xe,ai),Ui===null?St=Gi:Ui.sibling=Gi,Ui=Gi);return yi&&qa(ve,ai),St}for(yt=b(yt);!Gi.done;ai++,Gi=Se.next())Gi=Pe(yt,ve,ai,Gi.value,Ie),Gi!==null&&(u&&Gi.alternate!==null&&yt.delete(Gi.key===null?ai:Gi.key),xe=E(Gi,xe,ai),Ui===null?St=Gi:Ui.sibling=Gi,Ui=Gi);return u&&yt.forEach(function(lae){return c(ve,lae)}),yi&&qa(ve,ai),St}function on(ve,xe,Se,Ie){if(typeof Se=="object"&&Se!==null&&Se.type===S&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case y:e:{for(var St=Se.key;xe!==null;){if(xe.key===St){if(St=Se.type,St===S){if(xe.tag===7){f(ve,xe.sibling),Ie=_(xe,Se.props.children),Ie.return=ve,ve=Ie;break e}}else if(xe.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===te&&Ru(St)===xe.type){f(ve,xe.sibling),Ie=_(xe,Se.props),Fc(Ie,Se),Ie.return=ve,ve=Ie;break e}f(ve,xe);break}else c(ve,xe);xe=xe.sibling}Se.type===S?(Ie=Fs(Se.props.children,ve.mode,Ie,Se.key),Ie.return=ve,ve=Ie):(Ie=cp(Se.type,Se.key,Se.props,null,ve.mode,Ie),Fc(Ie,Se),Ie.return=ve,ve=Ie)}return k(ve);case v:e:{for(St=Se.key;xe!==null;){if(xe.key===St)if(xe.tag===4&&xe.stateNode.containerInfo===Se.containerInfo&&xe.stateNode.implementation===Se.implementation){f(ve,xe.sibling),Ie=_(xe,Se.children||[]),Ie.return=ve,ve=Ie;break e}else{f(ve,xe);break}else c(ve,xe);xe=xe.sibling}Ie=pd(Se,ve.mode,Ie),Ie.return=ve,ve=Ie}return k(ve);case te:return Se=Ru(Se),on(ve,xe,Se,Ie)}if(Te(Se))return ct(ve,xe,Se,Ie);if(re(Se)){if(St=re(Se),typeof St!="function")throw Error(n(150));return Se=St.call(Se),Ft(ve,xe,Se,Ie)}if(typeof Se.then=="function")return on(ve,xe,Pu(Se),Ie);if(Se.$$typeof===R)return on(ve,xe,bd(ve,Se),Ie);_p(ve,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,xe!==null&&xe.tag===6?(f(ve,xe.sibling),Ie=_(xe,Se),Ie.return=ve,ve=Ie):(f(ve,xe),Ie=Uo(Se,ve.mode,Ie),Ie.return=ve,ve=Ie),k(ve)):f(ve,xe)}return function(ve,xe,Se,Ie){try{Oc=0;var St=on(ve,xe,Se,Ie);return kc=null,St}catch(yt){if(yt===Gl||yt===xp)throw yt;var Ui=Os(29,yt,null,ve.mode);return Ui.lanes=Ie,Ui.return=ve,Ui}finally{}}}var Sa=w0(!0),D0=w0(!1),Ns=!1;function vp(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wn(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function ur(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ka(u,c,f){var b=u.updateQueue;if(b===null)return null;if(b=b.shared,(ze&2)!==0){var _=b.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),b.pending=c,c=fd(u),bv(u,null,f),c}return dd(u,b,c,f),fd(u)}function zl(u,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var b=c.lanes;b&=u.pendingLanes,f|=b,c.lanes=f,vi(u,f)}}function jo(u,c){var f=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,f===b)){var _=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var k={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};E===null?_=E=k:E=E.next=k,f=f.next}while(f!==null);E===null?_=E=c:E=E.next=c}else _=E=c;f={baseState:b.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:b.shared,callbacks:b.callbacks},u.updateQueue=f;return}u=f.lastBaseUpdate,u===null?f.firstBaseUpdate=c:u.next=c,f.lastBaseUpdate=c}var Tp=!1;function Ic(){if(Tp){var u=Pc;if(u!==null)throw u}}function Mu(u,c,f,b){Tp=!1;var _=u.updateQueue;Ns=!1;var E=_.firstBaseUpdate,k=_.lastBaseUpdate,W=_.shared.pending;if(W!==null){_.shared.pending=null;var pe=W,Ce=pe.next;pe.next=null,k===null?E=Ce:k.next=Ce,k=pe;var Oe=u.alternate;Oe!==null&&(Oe=Oe.updateQueue,W=Oe.lastBaseUpdate,W!==k&&(W===null?Oe.firstBaseUpdate=Ce:W.next=Ce,Oe.lastBaseUpdate=pe))}if(E!==null){var Ue=_.baseState;k=0,Oe=Ce=pe=null,W=E;do{var Re=W.lane&-536870913,Pe=Re!==W.lane;if(Pe?(Xe&Re)===Re:(b&Re)===Re){Re!==0&&Re===Ls&&(Tp=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var ct=u,Ft=W;Re=c;var on=f;switch(Ft.tag){case 1:if(ct=Ft.payload,typeof ct=="function"){Ue=ct.call(on,Ue,Re);break e}Ue=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Ft.payload,Re=typeof ct=="function"?ct.call(on,Ue,Re):ct,Re==null)break e;Ue=p({},Ue,Re);break e;case 2:Ns=!0}}Re=W.callback,Re!==null&&(u.flags|=64,Pe&&(u.flags|=8192),Pe=_.callbacks,Pe===null?_.callbacks=[Re]:Pe.push(Re))}else Pe={lane:Re,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Oe===null?(Ce=Oe=Pe,pe=Ue):Oe=Oe.next=Pe,k|=Re;if(W=W.next,W===null){if(W=_.shared.pending,W===null)break;Pe=W,W=Pe.next,Pe.next=null,_.lastBaseUpdate=Pe,_.shared.pending=null}}while(!0);Oe===null&&(pe=Ue),_.baseState=pe,_.firstBaseUpdate=Ce,_.lastBaseUpdate=Oe,E===null&&(_.shared.lanes=0),vn|=k,u.lanes=k,u.memoizedState=Ue}}function R0(u,c){if(typeof u!="function")throw Error(n(191,u));u.call(c)}function Ep(u,c){var f=u.callbacks;if(f!==null)for(u.callbacks=null,u=0;u<f.length;u++)R0(f[u],c)}var Vl=ie(null),_d=ie(0);function P0(u,c){u=sn,ee(_d,u),ee(Vl,c),sn=u|c.baseLanes}function M0(){ee(_d,sn),ee(Vl,Vl.current)}function Bu(){sn=_d.current,be(Vl),be(_d)}var ms=ie(null),Mr=null;function Xo(u){var c=u.alternate;ee(Bn,Bn.current&1),ee(ms,u),Mr===null&&(c===null||Vl.current!==null||c.memoizedState!==null)&&(Mr=u)}function B0(u){ee(Bn,Bn.current),ee(ms,u),Mr===null&&(Mr=u)}function k0(u){u.tag===22?(ee(Bn,Bn.current),ee(ms,u),Mr===null&&(Mr=u)):Yo()}function Yo(){ee(Bn,Bn.current),ee(ms,ms.current)}function Us(u){be(ms),Mr===u&&(Mr=null),be(Bn)}var Bn=ie(0);function Lc(u){for(var c=u;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||SC(f)||AC(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Qa=0,Vt=null,Yi=null,Gn=null,Sp=!1,Nc=!1,ku=!1,Ap=0,Uc=0,Gc=null,JA=0;function kn(){throw Error(n(321))}function vd(u,c){if(c===null)return!1;for(var f=0;f<c.length&&f<u.length;f++)if(!Bs(u[f],c[f]))return!1;return!0}function O0(u,c,f,b,_,E){return Qa=E,Vt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,$.H=u===null||u.memoizedState===null?qv:ab,ku=!1,E=f(b,_),ku=!1,Nc&&(E=I0(c,f,b,_)),F0(u),E}function F0(u){$.H=Cd;var c=Yi!==null&&Yi.next!==null;if(Qa=0,Gn=Yi=Vt=null,Sp=!1,Uc=0,Gc=null,c)throw Error(n(300));u===null||Hn||(u=u.dependencies,u!==null&&gp(u)&&(Hn=!0))}function I0(u,c,f,b){Vt=u;var _=0;do{if(Nc&&(Gc=null),Uc=0,Nc=!1,25<=_)throw Error(n(301));if(_+=1,Gn=Yi=null,u.updateQueue!=null){var E=u.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}$.H=ob,E=c(f,b)}while(Nc);return E}function Aa(){var u=$.H,c=u.useState()[0];return c=typeof c.then=="function"?Td(c):c,u=u.useState()[0],(Yi!==null?Yi.memoizedState:null)!==u&&(Vt.flags|=1024),c}function Cp(){var u=Ap!==0;return Ap=0,u}function L0(u,c,f){c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~f}function N0(u){if(Sp){for(u=u.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}Sp=!1}Qa=0,Gn=Yi=Vt=null,Nc=!1,Uc=Ap=0,Gc=null}function is(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?Vt.memoizedState=Gn=u:Gn=Gn.next=u,Gn}function xn(){if(Yi===null){var u=Vt.alternate;u=u!==null?u.memoizedState:null}else u=Yi.next;var c=Gn===null?Vt.memoizedState:Gn.next;if(c!==null)Gn=c,Yi=u;else{if(u===null)throw Vt.alternate===null?Error(n(467)):Error(n(310));Yi=u,u={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},Gn===null?Vt.memoizedState=Gn=u:Gn=Gn.next=u}return Gn}function wp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Td(u){var c=Uc;return Uc+=1,Gc===null&&(Gc=[]),u=Av(Gc,u,c),c=Vt,(Gn===null?c.memoizedState:Gn.next)===null&&(c=c.alternate,$.H=c===null||c.memoizedState===null?qv:ab),u}function Ed(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Td(u);if(u.$$typeof===R)return Pr(u)}throw Error(n(438,String(u)))}function U0(u){var c=null,f=Vt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var b=Vt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(c={data:b.data.map(function(_){return _.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=wp(),Vt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(u),b=0;b<u;b++)f[b]=O;return c.index++,f}function Ks(u,c){return typeof c=="function"?c(u):c}function Sd(u){var c=xn();return jl(c,Yi,u)}function jl(u,c,f){var b=u.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=f;var _=u.baseQueue,E=b.pending;if(E!==null){if(_!==null){var k=_.next;_.next=E.next,E.next=k}c.baseQueue=_=E,b.pending=null}if(E=u.baseState,_===null)u.memoizedState=E;else{c=_.next;var W=k=null,pe=null,Ce=c,Oe=!1;do{var Ue=Ce.lane&-536870913;if(Ue!==Ce.lane?(Xe&Ue)===Ue:(Qa&Ue)===Ue){var Re=Ce.revertLane;if(Re===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),Ue===Ls&&(Oe=!0);else if((Qa&Re)===Re){Ce=Ce.next,Re===Ls&&(Oe=!0);continue}else Ue={lane:0,revertLane:Ce.revertLane,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},pe===null?(W=pe=Ue,k=E):pe=pe.next=Ue,Vt.lanes|=Re,vn|=Re;Ue=Ce.action,ku&&f(E,Ue),E=Ce.hasEagerState?Ce.eagerState:f(E,Ue)}else Re={lane:Ue,revertLane:Ce.revertLane,gesture:Ce.gesture,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},pe===null?(W=pe=Re,k=E):pe=pe.next=Re,Vt.lanes|=Ue,vn|=Ue;Ce=Ce.next}while(Ce!==null&&Ce!==c);if(pe===null?k=E:pe.next=W,!Bs(E,u.memoizedState)&&(Hn=!0,Oe&&(f=Pc,f!==null)))throw f;u.memoizedState=E,u.baseState=k,u.baseQueue=pe,b.lastRenderedState=E}return _===null&&(b.lanes=0),[u.memoizedState,b.dispatch]}function G0(u){var c=xn(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var b=f.dispatch,_=f.pending,E=c.memoizedState;if(_!==null){f.pending=null;var k=_=_.next;do E=u(E,k.action),k=k.next;while(k!==_);Bs(E,c.memoizedState)||(Hn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),f.lastRenderedState=E}return[E,b]}function wv(u,c,f){var b=Vt,_=xn(),E=yi;if(E){if(f===void 0)throw Error(n(407));f=f()}else f=c();var k=!Bs((Yi||_).memoizedState,f);if(k&&(_.memoizedState=f,Hn=!0),_=_.queue,Rp(Rv.bind(null,b,_,u),[u]),_.getSnapshot!==c||k||Gn!==null&&Gn.memoizedState.tag&1){if(b.flags|=2048,Xl(9,{destroy:void 0},Dv.bind(null,b,_,f,c),null),et===null)throw Error(n(349));E||(Qa&127)!==0||H0(b,c,f)}return f}function H0(u,c,f){u.flags|=16384,u={getSnapshot:c,value:f},c=Vt.updateQueue,c===null?(c=wp(),Vt.updateQueue=c,c.stores=[u]):(f=c.stores,f===null?c.stores=[u]:f.push(u))}function Dv(u,c,f,b){c.value=f,c.getSnapshot=b,Pv(c)&&Mv(u)}function Rv(u,c,f){return f(function(){Pv(c)&&Mv(u)})}function Pv(u){var c=u.getSnapshot;u=u.value;try{var f=c();return!Bs(u,f)}catch{return!0}}function Mv(u){var c=Au(u,2);c!==null&&Js(c,u,2)}function z0(u){var c=is();if(typeof u=="function"){var f=u;if(u=f(),ku){qn(!0);try{f()}finally{qn(!1)}}}return c.memoizedState=c.baseState=u,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:u},c}function Bv(u,c,f,b){return u.baseState=f,jl(u,Yi,typeof b=="function"?b:Ks)}function kv(u,c,f,b,_){if(Op(u))throw Error(n(485));if(u=c.action,u!==null){var E={payload:_,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){E.listeners.push(k)}};$.T!==null?f(!0):E.isTransition=!1,b(E),f=c.pending,f===null?(E.next=c.pending=E,Ov(c,E)):(E.next=f.next,c.pending=f.next=E)}}function Ov(u,c){var f=c.action,b=c.payload,_=u.state;if(c.isTransition){var E=$.T,k={};$.T=k;try{var W=f(_,b),pe=$.S;pe!==null&&pe(k,W),V0(u,c,W)}catch(Ce){X0(u,c,Ce)}finally{E!==null&&k.types!==null&&(E.types=k.types),$.T=E}}else try{E=f(_,b),V0(u,c,E)}catch(Ce){X0(u,c,Ce)}}function V0(u,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(b){j0(u,c,b)},function(b){return X0(u,c,b)}):j0(u,c,f)}function j0(u,c,f){c.status="fulfilled",c.value=f,Y0(c),u.state=f,c=u.pending,c!==null&&(f=c.next,f===c?u.pending=null:(f=f.next,c.next=f,Ov(u,f)))}function X0(u,c,f){var b=u.pending;if(u.pending=null,b!==null){b=b.next;do c.status="rejected",c.reason=f,Y0(c),c=c.next;while(c!==b)}u.action=null}function Y0(u){u=u.listeners;for(var c=0;c<u.length;c++)(0,u[c])()}function Fv(u,c){return c}function Iv(u,c){if(yi){var f=et.formState;if(f!==null){e:{var b=Vt;if(yi){if(fn){t:{for(var _=fn,E=$s;_.nodeType!==8;){if(!E){_=null;break t}if(_=to(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){fn=to(_.nextSibling),b=_.data==="F!";break e}}Ho(b)}b=!1}b&&(c=f[0])}}return f=is(),f.memoizedState=f.baseState=c,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fv,lastRenderedState:c},f.queue=b,f=Xv.bind(null,Vt,b),b.dispatch=f,b=z0(!1),E=rb.bind(null,Vt,!1,b.queue),b=is(),_={state:c,dispatch:null,action:u,pending:null},b.queue=_,f=kv.bind(null,Vt,_,E,f),_.dispatch=f,b.memoizedState=u,[c,f,!1]}function q0(u){var c=xn();return W0(c,Yi,u)}function W0(u,c,f){if(c=jl(u,c,Fv)[0],u=Sd(Ks)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var b=Td(c)}catch(k){throw k===Gl?xp:k}else b=c;c=xn();var _=c.queue,E=_.dispatch;return f!==c.memoizedState&&(Vt.flags|=2048,Xl(9,{destroy:void 0},Qs.bind(null,_,f),null)),[b,E,u]}function Qs(u,c){u.action=c}function $0(u){var c=xn(),f=Yi;if(f!==null)return W0(c,f,u);xn(),c=c.memoizedState,f=xn();var b=f.queue.dispatch;return f.memoizedState=u,[c,b,!1]}function Xl(u,c,f,b){return u={tag:u,create:f,deps:b,inst:c,next:null},c=Vt.updateQueue,c===null&&(c=wp(),Vt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=u.next=u:(b=f.next,f.next=u,u.next=b,c.lastEffect=u),u}function Lv(){return xn().memoizedState}function Ad(u,c,f,b){var _=is();Vt.flags|=u,_.memoizedState=Xl(1|c,{destroy:void 0},f,b===void 0?null:b)}function Dp(u,c,f,b){var _=xn();b=b===void 0?null:b;var E=_.memoizedState.inst;Yi!==null&&b!==null&&vd(b,Yi.memoizedState.deps)?_.memoizedState=Xl(c,E,f,b):(Vt.flags|=u,_.memoizedState=Xl(1|c,E,f,b))}function Nv(u,c){Ad(8390656,8,u,c)}function Rp(u,c){Dp(2048,8,u,c)}function Uv(u){Vt.flags|=4;var c=Vt.updateQueue;if(c===null)c=wp(),Vt.updateQueue=c,c.events=[u];else{var f=c.events;f===null?c.events=[u]:f.push(u)}}function K0(u){var c=xn().memoizedState;return Uv({ref:c,nextImpl:u}),function(){if((ze&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function Q0(u,c){return Dp(4,2,u,c)}function Gv(u,c){return Dp(4,4,u,c)}function Z0(u,c){if(typeof c=="function"){u=u();var f=c(u);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function J0(u,c,f){f=f!=null?f.concat([u]):null,Dp(4,4,Z0.bind(null,c,u),f)}function Pp(){}function eb(u,c){var f=xn();c=c===void 0?null:c;var b=f.memoizedState;return c!==null&&vd(c,b[1])?b[0]:(f.memoizedState=[u,c],u)}function Hv(u,c){var f=xn();c=c===void 0?null:c;var b=f.memoizedState;if(c!==null&&vd(c,b[1]))return b[0];if(b=u(),ku){qn(!0);try{u()}finally{qn(!1)}}return f.memoizedState=[b,c],b}function tb(u,c,f){return f===void 0||(Qa&1073741824)!==0&&(Xe&261930)===0?u.memoizedState=c:(u.memoizedState=f,u=B4(),Vt.lanes|=u,vn|=u,f)}function Mp(u,c,f,b){return Bs(f,c)?f:Vl.current!==null?(u=tb(u,f,b),Bs(u,c)||(Hn=!0),u):(Qa&42)===0||(Qa&1073741824)!==0&&(Xe&261930)===0?(Hn=!0,u.memoizedState=f):(u=B4(),Vt.lanes|=u,vn|=u,c)}function zv(u,c,f,b,_){var E=se.p;se.p=E!==0&&8>E?E:8;var k=$.T,W={};$.T=W,rb(u,!1,c,f);try{var pe=_(),Ce=$.S;if(Ce!==null&&Ce(W,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Oe=ZA(pe,b);Hc(u,c,Oe,wa(u))}else Hc(u,c,b,wa(u))}catch(Ue){Hc(u,c,{then:function(){},status:"rejected",reason:Ue},wa())}finally{se.p=E,k!==null&&W.types!==null&&(k.types=W.types),$.T=k}}function eC(){}function ib(u,c,f,b){if(u.tag!==5)throw Error(n(476));var _=Bp(u).queue;zv(u,_,c,we,f===null?eC:function(){return nb(u),f(b)})}function Bp(u){var c=u.memoizedState;if(c!==null)return c;c={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:we},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:f},next:null},u.memoizedState=c,u=u.alternate,u!==null&&(u.memoizedState=c),c}function nb(u){var c=Bp(u);c.next===null&&(c=u.alternate.memoizedState),Hc(u,c.next.queue,{},wa())}function kp(){return Pr(Hb)}function Vv(){return xn().memoizedState}function jv(){return xn().memoizedState}function tC(u){for(var c=u.return;c!==null;){switch(c.tag){case 24:case 3:var f=wa();u=ur(f);var b=Ka(c,u,f);b!==null&&(Js(b,c,f),zl(b,c,f)),c={cache:A0()},u.payload=c;return}c=c.return}}function iC(u,c,f){var b=wa();f={lane:b,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Op(u)?sb(c,f):(f=up(u,c,f,b),f!==null&&(Js(f,u,b),Yv(f,c,b)))}function Xv(u,c,f){var b=wa();Hc(u,c,f,b)}function Hc(u,c,f,b){var _={lane:b,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Op(u))sb(c,_);else{var E=u.alternate;if(u.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var k=c.lastRenderedState,W=E(k,f);if(_.hasEagerState=!0,_.eagerState=W,Bs(W,k))return dd(u,c,_,0),et===null&&Ac(),!1}catch{}finally{}if(f=up(u,c,_,b),f!==null)return Js(f,u,b),Yv(f,c,b),!0}return!1}function rb(u,c,f,b){if(b={lane:2,revertLane:dC(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Op(u)){if(c)throw Error(n(479))}else c=up(u,f,b,2),c!==null&&Js(c,u,2)}function Op(u){var c=u.alternate;return u===Vt||c!==null&&c===Vt}function sb(u,c){Nc=Sp=!0;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}function Yv(u,c,f){if((f&4194048)!==0){var b=c.lanes;b&=u.pendingLanes,f|=b,c.lanes=f,vi(u,f)}}var Cd={readContext:Pr,use:Ed,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useLayoutEffect:kn,useInsertionEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useSyncExternalStore:kn,useId:kn,useHostTransitionStatus:kn,useFormState:kn,useActionState:kn,useOptimistic:kn,useMemoCache:kn,useCacheRefresh:kn};Cd.useEffectEvent=kn;var qv={readContext:Pr,use:Ed,useCallback:function(u,c){return is().memoizedState=[u,c===void 0?null:c],u},useContext:Pr,useEffect:Nv,useImperativeHandle:function(u,c,f){f=f!=null?f.concat([u]):null,Ad(4194308,4,Z0.bind(null,c,u),f)},useLayoutEffect:function(u,c){return Ad(4194308,4,u,c)},useInsertionEffect:function(u,c){Ad(4,2,u,c)},useMemo:function(u,c){var f=is();c=c===void 0?null:c;var b=u();if(ku){qn(!0);try{u()}finally{qn(!1)}}return f.memoizedState=[b,c],b},useReducer:function(u,c,f){var b=is();if(f!==void 0){var _=f(c);if(ku){qn(!0);try{f(c)}finally{qn(!1)}}}else _=c;return b.memoizedState=b.baseState=_,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:_},b.queue=u,u=u.dispatch=iC.bind(null,Vt,u),[b.memoizedState,u]},useRef:function(u){var c=is();return u={current:u},c.memoizedState=u},useState:function(u){u=z0(u);var c=u.queue,f=Xv.bind(null,Vt,c);return c.dispatch=f,[u.memoizedState,f]},useDebugValue:Pp,useDeferredValue:function(u,c){var f=is();return tb(f,u,c)},useTransition:function(){var u=z0(!1);return u=zv.bind(null,Vt,u.queue,!0,!1),is().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,c,f){var b=Vt,_=is();if(yi){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),et===null)throw Error(n(349));(Xe&127)!==0||H0(b,c,f)}_.memoizedState=f;var E={value:f,getSnapshot:c};return _.queue=E,Nv(Rv.bind(null,b,E,u),[u]),b.flags|=2048,Xl(9,{destroy:void 0},Dv.bind(null,b,E,f,c),null),f},useId:function(){var u=is(),c=et.identifierPrefix;if(yi){var f=Ya,b=Xa;f=(b&~(1<<32-bi(b)-1)).toString(32)+f,c="_"+c+"R_"+f,f=Ap++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=JA++,c="_"+c+"r_"+f.toString(32)+"_";return u.memoizedState=c},useHostTransitionStatus:kp,useFormState:Iv,useActionState:Iv,useOptimistic:function(u){var c=is();c.memoizedState=c.baseState=u;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=rb.bind(null,Vt,!0,f),f.dispatch=c,[u,c]},useMemoCache:U0,useCacheRefresh:function(){return is().memoizedState=tC.bind(null,Vt)},useEffectEvent:function(u){var c=is(),f={impl:u};return c.memoizedState=f,function(){if((ze&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},ab={readContext:Pr,use:Ed,useCallback:eb,useContext:Pr,useEffect:Rp,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:Gv,useMemo:Hv,useReducer:Sd,useRef:Lv,useState:function(){return Sd(Ks)},useDebugValue:Pp,useDeferredValue:function(u,c){var f=xn();return Mp(f,Yi.memoizedState,u,c)},useTransition:function(){var u=Sd(Ks)[0],c=xn().memoizedState;return[typeof u=="boolean"?u:Td(u),c]},useSyncExternalStore:wv,useId:Vv,useHostTransitionStatus:kp,useFormState:q0,useActionState:q0,useOptimistic:function(u,c){var f=xn();return Bv(f,Yi,u,c)},useMemoCache:U0,useCacheRefresh:jv};ab.useEffectEvent=K0;var ob={readContext:Pr,use:Ed,useCallback:eb,useContext:Pr,useEffect:Rp,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:Gv,useMemo:Hv,useReducer:G0,useRef:Lv,useState:function(){return G0(Ks)},useDebugValue:Pp,useDeferredValue:function(u,c){var f=xn();return Yi===null?tb(f,u,c):Mp(f,Yi.memoizedState,u,c)},useTransition:function(){var u=G0(Ks)[0],c=xn().memoizedState;return[typeof u=="boolean"?u:Td(u),c]},useSyncExternalStore:wv,useId:Vv,useHostTransitionStatus:kp,useFormState:$0,useActionState:$0,useOptimistic:function(u,c){var f=xn();return Yi!==null?Bv(f,Yi,u,c):(f.baseState=u,[u,f.queue.dispatch])},useMemoCache:U0,useCacheRefresh:jv};ob.useEffectEvent=K0;function Fp(u,c,f,b){c=u.memoizedState,f=f(b,c),f=f==null?c:p({},c,f),u.memoizedState=f,u.lanes===0&&(u.updateQueue.baseState=f)}var ub={enqueueSetState:function(u,c,f){u=u._reactInternals;var b=wa(),_=ur(b);_.payload=c,f!=null&&(_.callback=f),c=Ka(u,_,b),c!==null&&(Js(c,u,b),zl(c,u,b))},enqueueReplaceState:function(u,c,f){u=u._reactInternals;var b=wa(),_=ur(b);_.tag=1,_.payload=c,f!=null&&(_.callback=f),c=Ka(u,_,b),c!==null&&(Js(c,u,b),zl(c,u,b))},enqueueForceUpdate:function(u,c){u=u._reactInternals;var f=wa(),b=ur(f);b.tag=2,c!=null&&(b.callback=c),c=Ka(u,b,f),c!==null&&(Js(c,u,f),zl(c,u,f))}};function Wv(u,c,f,b,_,E,k){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,E,k):c.prototype&&c.prototype.isPureReactComponent?!Lo(f,b)||!Lo(_,E):!0}function $v(u,c,f,b){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,b),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,b),c.state!==u&&ub.enqueueReplaceState(c,c.state,null)}function Ou(u,c){var f=c;if("ref"in c){f={};for(var b in c)b!=="ref"&&(f[b]=c[b])}if(u=u.defaultProps){f===c&&(f=p({},f));for(var _ in u)f[_]===void 0&&(f[_]=u[_])}return f}function lb(u){op(u)}function cb(u){console.error(u)}function Kv(u){op(u)}function wd(u,c){try{var f=u.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(b){setTimeout(function(){throw b})}}function Qv(u,c,f){try{var b=u.onCaughtError;b(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function hb(u,c,f){return f=ur(f),f.tag=3,f.payload={element:null},f.callback=function(){wd(u,c)},f}function Ip(u){return u=ur(u),u.tag=3,u}function db(u,c,f,b){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var E=b.value;u.payload=function(){return _(E)},u.callback=function(){Qv(c,f,b)}}var k=f.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(u.callback=function(){Qv(c,f,b),typeof _!="function"&&(Wc===null?Wc=new Set([this]):Wc.add(this));var W=b.stack;this.componentDidCatch(b.value,{componentStack:W!==null?W:""})})}function nC(u,c,f,b,_){if(f.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(c=f.alternate,c!==null&&Du(c,f,_,!0),f=ms.current,f!==null){switch(f.tag){case 31:case 13:return Mr===null?E2():f.alternate===null&&Et===0&&(Et=3),f.flags&=-257,f.flags|=65536,f.lanes=_,b===xd?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([b]):c.add(b),lC(u,b,_)),!1;case 22:return f.flags|=65536,b===xd?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([b])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([b]):f.add(b)),lC(u,b,_)),!1}throw Error(n(435,f.tag))}return lC(u,b,_),E2(),!1}if(yi)return c=ms.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=_,b!==_0&&(u=Error(n(422),{cause:b}),gd(Is(u,f)))):(b!==_0&&(c=Error(n(423),{cause:b}),gd(Is(c,f))),u=u.current.alternate,u.flags|=65536,_&=-_,u.lanes|=_,b=Is(b,f),_=hb(u.stateNode,b,_),jo(u,_),Et!==4&&(Et=2)),!1;var E=Error(n(520),{cause:b});if(E=Is(E,f),Yc===null?Yc=[E]:Yc.push(E),Et!==4&&(Et=2),c===null)return!0;b=Is(b,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,u=_&-_,f.lanes|=u,u=hb(f.stateNode,b,u),jo(f,u),!1;case 1:if(c=f.type,E=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Wc===null||!Wc.has(E))))return f.flags|=65536,_&=-_,f.lanes|=_,_=Ip(_),db(_,u,f,b),jo(f,_),!1}f=f.return}while(f!==null);return!1}var fb=Error(n(461)),Hn=!1;function _r(u,c,f,b){c.child=u===null?D0(c,null,f,b):Sa(c,u.child,f,b)}function Zv(u,c,f,b,_){f=f.render;var E=c.ref;if("ref"in b){var k={};for(var W in b)W!=="ref"&&(k[W]=b[W])}else k=b;return Nl(c),b=O0(u,c,f,k,E,_),W=Cp(),u!==null&&!Hn?(L0(u,c,_),qo(u,c,_)):(yi&&W&&fp(c),c.flags|=1,_r(u,c,b,_),c.child)}function pb(u,c,f,b,_){if(u===null){var E=f.type;return typeof E=="function"&&!lp(E)&&E.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=E,Jv(u,c,E,b,_)):(u=cp(f.type,null,b,c,c.mode,_),u.ref=c.ref,u.return=c,c.child=u)}if(E=u.child,!Tb(u,_)){var k=E.memoizedProps;if(f=f.compare,f=f!==null?f:Lo,f(k,b)&&u.ref===c.ref)return qo(u,c,_)}return c.flags|=1,u=No(E,b),u.ref=c.ref,u.return=c,c.child=u}function Jv(u,c,f,b,_){if(u!==null){var E=u.memoizedProps;if(Lo(E,b)&&u.ref===c.ref)if(Hn=!1,c.pendingProps=b=E,Tb(u,_))(u.flags&131072)!==0&&(Hn=!0);else return c.lanes=u.lanes,qo(u,c,_)}return mb(u,c,f,b,_)}function e2(u,c,f,b){var _=b.children,E=u!==null?u.memoizedState:null;if(u===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((c.flags&128)!==0){if(E=E!==null?E.baseLanes|f:f,u!==null){for(b=c.child=u.child,_=0;b!==null;)_=_|b.lanes|b.childLanes,b=b.sibling;b=_&~E}else b=0,c.child=null;return t2(u,c,E,f,b)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},u!==null&&yp(c,E!==null?E.cachePool:null),E!==null?P0(c,E):M0(),k0(c);else return b=c.lanes=536870912,t2(u,c,E!==null?E.baseLanes|f:f,f,b)}else E!==null?(yp(c,E.cachePool),P0(c,E),Yo(),c.memoizedState=null):(u!==null&&yp(c,null),M0(),Yo());return _r(u,c,_,f),c.child}function zc(u,c){return u!==null&&u.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function t2(u,c,f,b,_){var E=Ul();return E=E===null?null:{parent:Wn._currentValue,pool:E},c.memoizedState={baseLanes:f,cachePool:E},u!==null&&yp(c,null),M0(),k0(c),u!==null&&Du(u,c,b,!0),c.childLanes=_,null}function Lp(u,c){return c=Np({mode:c.mode,children:c.children},u.mode),c.ref=u.ref,u.child=c,c.return=u,c}function Dd(u,c,f){return Sa(c,u.child,null,f),u=Lp(c,c.pendingProps),u.flags|=2,Us(c),c.memoizedState=null,u}function i2(u,c,f){var b=c.pendingProps,_=(c.flags&128)!==0;if(c.flags&=-129,u===null){if(yi){if(b.mode==="hidden")return u=Lp(c,b),c.lanes=536870912,zc(null,u);if(B0(c),(u=fn)?(u=p8(u,$s),u=u!==null&&u.data==="&"?u:null,u!==null&&(c.memoizedState={dehydrated:u,treeContext:wu!==null?{id:Xa,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},f=hp(u),f.return=c,c.child=f,xr=c,fn=null)):u=null,u===null)throw Ho(c);return c.lanes=536870912,null}return Lp(c,b)}var E=u.memoizedState;if(E!==null){var k=E.dehydrated;if(B0(c),_)if(c.flags&256)c.flags&=-257,c=Dd(u,c,f);else if(c.memoizedState!==null)c.child=u.child,c.flags|=128,c=null;else throw Error(n(558));else if(Hn||Du(u,c,f,!1),_=(f&u.childLanes)!==0,Hn||_){if(b=et,b!==null&&(k=ot(b,f),k!==0&&k!==E.retryLane))throw E.retryLane=k,Au(u,k),Js(b,u,k),fb;E2(),c=Dd(u,c,f)}else u=E.treeContext,fn=to(k.nextSibling),xr=c,yi=!0,Go=null,$s=!1,u!==null&&xv(c,u),c=Lp(c,b),c.flags|=4096;return c}return u=No(u.child,{mode:b.mode,children:b.children}),u.ref=c.ref,c.child=u,u.return=c,u}function Vc(u,c){var f=c.ref;if(f===null)u!==null&&u.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(u===null||u.ref!==f)&&(c.flags|=4194816)}}function mb(u,c,f,b,_){return Nl(c),f=O0(u,c,f,b,void 0,_),b=Cp(),u!==null&&!Hn?(L0(u,c,_),qo(u,c,_)):(yi&&b&&fp(c),c.flags|=1,_r(u,c,f,_),c.child)}function gb(u,c,f,b,_,E){return Nl(c),c.updateQueue=null,f=I0(c,b,f,_),F0(u),b=Cp(),u!==null&&!Hn?(L0(u,c,E),qo(u,c,E)):(yi&&b&&fp(c),c.flags|=1,_r(u,c,f,E),c.child)}function n2(u,c,f,b,_){if(Nl(c),c.stateNode===null){var E=Cu,k=f.contextType;typeof k=="object"&&k!==null&&(E=Pr(k)),E=new f(b,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=ub,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=b,E.state=c.memoizedState,E.refs={},vp(c),k=f.contextType,E.context=typeof k=="object"&&k!==null?Pr(k):Cu,E.state=c.memoizedState,k=f.getDerivedStateFromProps,typeof k=="function"&&(Fp(c,f,k,b),E.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(k=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),k!==E.state&&ub.enqueueReplaceState(E,E.state,null),Mu(c,b,E,_),Ic(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),b=!0}else if(u===null){E=c.stateNode;var W=c.memoizedProps,pe=Ou(f,W);E.props=pe;var Ce=E.context,Oe=f.contextType;k=Cu,typeof Oe=="object"&&Oe!==null&&(k=Pr(Oe));var Ue=f.getDerivedStateFromProps;Oe=typeof Ue=="function"||typeof E.getSnapshotBeforeUpdate=="function",W=c.pendingProps!==W,Oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(W||Ce!==k)&&$v(c,E,b,k),Ns=!1;var Re=c.memoizedState;E.state=Re,Mu(c,b,E,_),Ic(),Ce=c.memoizedState,W||Re!==Ce||Ns?(typeof Ue=="function"&&(Fp(c,f,Ue,b),Ce=c.memoizedState),(pe=Ns||Wv(c,f,pe,b,Re,Ce,k))?(Oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=b,c.memoizedState=Ce),E.props=b,E.state=Ce,E.context=k,b=pe):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),b=!1)}else{E=c.stateNode,wn(u,c),k=c.memoizedProps,Oe=Ou(f,k),E.props=Oe,Ue=c.pendingProps,Re=E.context,Ce=f.contextType,pe=Cu,typeof Ce=="object"&&Ce!==null&&(pe=Pr(Ce)),W=f.getDerivedStateFromProps,(Ce=typeof W=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==Ue||Re!==pe)&&$v(c,E,b,pe),Ns=!1,Re=c.memoizedState,E.state=Re,Mu(c,b,E,_),Ic();var Pe=c.memoizedState;k!==Ue||Re!==Pe||Ns||u!==null&&u.dependencies!==null&&gp(u.dependencies)?(typeof W=="function"&&(Fp(c,f,W,b),Pe=c.memoizedState),(Oe=Ns||Wv(c,f,Oe,b,Re,Pe,pe)||u!==null&&u.dependencies!==null&&gp(u.dependencies))?(Ce||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(b,Pe,pe),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(b,Pe,pe)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||k===u.memoizedProps&&Re===u.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===u.memoizedProps&&Re===u.memoizedState||(c.flags|=1024),c.memoizedProps=b,c.memoizedState=Pe),E.props=b,E.state=Pe,E.context=pe,b=Oe):(typeof E.componentDidUpdate!="function"||k===u.memoizedProps&&Re===u.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===u.memoizedProps&&Re===u.memoizedState||(c.flags|=1024),b=!1)}return E=b,Vc(u,c),b=(c.flags&128)!==0,E||b?(E=c.stateNode,f=b&&typeof f.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,u!==null&&b?(c.child=Sa(c,u.child,null,_),c.child=Sa(c,null,f,_)):_r(u,c,f,_),c.memoizedState=E.state,u=c.child):u=qo(u,c,_),u}function bb(u,c,f,b){return Il(),c.flags|=256,_r(u,c,f,b),c.child}var yb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(u){return{baseLanes:u,cachePool:Bc()}}function Pd(u,c,f){return u=u!==null?u.childLanes&~f:0,c&&(u|=ys),u}function r2(u,c,f){var b=c.pendingProps,_=!1,E=(c.flags&128)!==0,k;if((k=E)||(k=u!==null&&u.memoizedState===null?!1:(Bn.current&2)!==0),k&&(_=!0,c.flags&=-129),k=(c.flags&32)!==0,c.flags&=-33,u===null){if(yi){if(_?Xo(c):Yo(),(u=fn)?(u=p8(u,$s),u=u!==null&&u.data!=="&"?u:null,u!==null&&(c.memoizedState={dehydrated:u,treeContext:wu!==null?{id:Xa,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},f=hp(u),f.return=c,c.child=f,xr=c,fn=null)):u=null,u===null)throw Ho(c);return AC(u)?c.lanes=32:c.lanes=536870912,null}var W=b.children;return b=b.fallback,_?(Yo(),_=c.mode,W=Np({mode:"hidden",children:W},_),b=Fs(b,_,f,null),W.return=c,b.return=c,W.sibling=b,c.child=W,b=c.child,b.memoizedState=Rd(f),b.childLanes=Pd(u,k,f),c.memoizedState=yb,zc(null,b)):(Xo(c),xb(c,W))}var pe=u.memoizedState;if(pe!==null&&(W=pe.dehydrated,W!==null)){if(E)c.flags&256?(Xo(c),c.flags&=-257,c=_b(u,c,f)):c.memoizedState!==null?(Yo(),c.child=u.child,c.flags|=128,c=null):(Yo(),W=b.fallback,_=c.mode,b=Np({mode:"visible",children:b.children},_),W=Fs(W,_,f,null),W.flags|=2,b.return=c,W.return=c,b.sibling=W,c.child=b,Sa(c,u.child,null,f),b=c.child,b.memoizedState=Rd(f),b.childLanes=Pd(u,k,f),c.memoizedState=yb,c=zc(null,b));else if(Xo(c),AC(W)){if(k=W.nextSibling&&W.nextSibling.dataset,k)var Ce=k.dgst;k=Ce,b=Error(n(419)),b.stack="",b.digest=k,gd({value:b,source:null,stack:null}),c=_b(u,c,f)}else if(Hn||Du(u,c,f,!1),k=(f&u.childLanes)!==0,Hn||k){if(k=et,k!==null&&(b=ot(k,f),b!==0&&b!==pe.retryLane))throw pe.retryLane=b,Au(u,b),Js(k,u,b),fb;SC(W)||E2(),c=_b(u,c,f)}else SC(W)?(c.flags|=192,c.child=u.child,c=null):(u=pe.treeContext,fn=to(W.nextSibling),xr=c,yi=!0,Go=null,$s=!1,u!==null&&xv(c,u),c=xb(c,b.children),c.flags|=4096);return c}return _?(Yo(),W=b.fallback,_=c.mode,pe=u.child,Ce=pe.sibling,b=No(pe,{mode:"hidden",children:b.children}),b.subtreeFlags=pe.subtreeFlags&65011712,Ce!==null?W=No(Ce,W):(W=Fs(W,_,f,null),W.flags|=2),W.return=c,b.return=c,b.sibling=W,c.child=b,zc(null,b),b=c.child,W=u.child.memoizedState,W===null?W=Rd(f):(_=W.cachePool,_!==null?(pe=Wn._currentValue,_=_.parent!==pe?{parent:pe,pool:pe}:_):_=Bc(),W={baseLanes:W.baseLanes|f,cachePool:_}),b.memoizedState=W,b.childLanes=Pd(u,k,f),c.memoizedState=yb,zc(u.child,b)):(Xo(c),f=u.child,u=f.sibling,f=No(f,{mode:"visible",children:b.children}),f.return=c,f.sibling=null,u!==null&&(k=c.deletions,k===null?(c.deletions=[u],c.flags|=16):k.push(u)),c.child=f,c.memoizedState=null,f)}function xb(u,c){return c=Np({mode:"visible",children:c},u.mode),c.return=u,u.child=c}function Np(u,c){return u=Os(22,u,null,c),u.lanes=0,u}function _b(u,c,f){return Sa(c,u.child,null,f),u=xb(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function s2(u,c,f){u.lanes|=c;var b=u.alternate;b!==null&&(b.lanes|=c),S0(u.return,c,f)}function vb(u,c,f,b,_,E){var k=u.memoizedState;k===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:b,tail:f,tailMode:_,treeForkCount:E}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=b,k.tail=f,k.tailMode=_,k.treeForkCount=E)}function a2(u,c,f){var b=c.pendingProps,_=b.revealOrder,E=b.tail;b=b.children;var k=Bn.current,W=(k&2)!==0;if(W?(k=k&1|2,c.flags|=128):k&=1,ee(Bn,k),_r(u,c,b,f),b=yi?md:0,!W&&u!==null&&(u.flags&128)!==0)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&s2(u,f,c);else if(u.tag===19)s2(u,f,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(_){case"forwards":for(f=c.child,_=null;f!==null;)u=f.alternate,u!==null&&Lc(u)===null&&(_=f),f=f.sibling;f=_,f===null?(_=c.child,c.child=null):(_=f.sibling,f.sibling=null),vb(c,!1,_,f,E,b);break;case"backwards":case"unstable_legacy-backwards":for(f=null,_=c.child,c.child=null;_!==null;){if(u=_.alternate,u!==null&&Lc(u)===null){c.child=_;break}u=_.sibling,_.sibling=f,f=_,_=u}vb(c,!0,f,null,E,b);break;case"together":vb(c,!1,null,null,void 0,b);break;default:c.memoizedState=null}return c.child}function qo(u,c,f){if(u!==null&&(c.dependencies=u.dependencies),vn|=c.lanes,(f&c.childLanes)===0)if(u!==null){if(Du(u,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(u!==null&&c.child!==u.child)throw Error(n(153));if(c.child!==null){for(u=c.child,f=No(u,u.pendingProps),c.child=f,f.return=c;u.sibling!==null;)u=u.sibling,f=f.sibling=No(u,u.pendingProps),f.return=c;f.sibling=null}return c.child}function Tb(u,c){return(u.lanes&c)!==0?!0:(u=u.dependencies,!!(u!==null&&gp(u)))}function Eb(u,c,f){switch(c.tag){case 3:pt(c,c.stateNode.containerInfo),Wa(c,Wn,u.memoizedState.cache),Il();break;case 27:case 5:$t(c);break;case 4:pt(c,c.stateNode.containerInfo);break;case 10:Wa(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,B0(c),null;break;case 13:var b=c.memoizedState;if(b!==null)return b.dehydrated!==null?(Xo(c),c.flags|=128,null):(f&c.child.childLanes)!==0?r2(u,c,f):(Xo(c),u=qo(u,c,f),u!==null?u.sibling:null);Xo(c);break;case 19:var _=(u.flags&128)!==0;if(b=(f&c.childLanes)!==0,b||(Du(u,c,f,!1),b=(f&c.childLanes)!==0),_){if(b)return a2(u,c,f);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ee(Bn,Bn.current),b)break;return null;case 22:return c.lanes=0,e2(u,c,f,c.pendingProps);case 24:Wa(c,Wn,u.memoizedState.cache)}return qo(u,c,f)}function Sb(u,c,f){if(u!==null)if(u.memoizedProps!==c.pendingProps)Hn=!0;else{if(!Tb(u,f)&&(c.flags&128)===0)return Hn=!1,Eb(u,c,f);Hn=(u.flags&131072)!==0}else Hn=!1,yi&&(c.flags&1048576)!==0&&Dc(c,md,c.index);switch(c.lanes=0,c.tag){case 16:e:{var b=c.pendingProps;if(u=Ru(c.elementType),c.type=u,typeof u=="function")lp(u)?(b=Ou(u,b),c.tag=1,c=n2(null,c,u,b,f)):(c.tag=0,c=mb(null,c,u,b,f));else{if(u!=null){var _=u.$$typeof;if(_===B){c.tag=11,c=Zv(null,c,u,b,f);break e}else if(_===H){c.tag=14,c=pb(null,c,u,b,f);break e}}throw c=fe(u)||u,Error(n(306,c,""))}}return c;case 0:return mb(u,c,c.type,c.pendingProps,f);case 1:return b=c.type,_=Ou(b,c.pendingProps),n2(u,c,b,_,f);case 3:e:{if(pt(c,c.stateNode.containerInfo),u===null)throw Error(n(387));b=c.pendingProps;var E=c.memoizedState;_=E.element,wn(u,c),Mu(c,b,null,f);var k=c.memoizedState;if(b=k.cache,Wa(c,Wn,b),b!==E.cache&&mp(c,[Wn],f,!0),Ic(),b=k.element,E.isDehydrated)if(E={element:b,isDehydrated:!1,cache:k.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=bb(u,c,b,f);break e}else if(b!==_){_=Is(Error(n(424)),c),gd(_),c=bb(u,c,b,f);break e}else{switch(u=c.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(fn=to(u.firstChild),xr=c,yi=!0,Go=null,$s=!0,f=D0(c,null,b,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Il(),b===_){c=qo(u,c,f);break e}_r(u,c,b,f)}c=c.child}return c;case 26:return Vc(u,c),u===null?(f=_8(c.type,null,c.pendingProps,null))?c.memoizedState=f:yi||(f=c.type,u=c.pendingProps,b=P2(Ye.current).createElement(f),b[Gt]=c,b[hn]=u,rs(b,f,u),gr(b),c.stateNode=b):c.memoizedState=_8(c.type,u.memoizedProps,c.pendingProps,u.memoizedState),null;case 27:return $t(c),u===null&&yi&&(b=c.stateNode=b8(c.type,c.pendingProps,Ye.current),xr=c,$s=!0,_=fn,Zc(c.type)?(CC=_,fn=to(b.firstChild)):fn=_),_r(u,c,c.pendingProps.children,f),Vc(u,c),u===null&&(c.flags|=4194304),c.child;case 5:return u===null&&yi&&((_=b=fn)&&(b=Use(b,c.type,c.pendingProps,$s),b!==null?(c.stateNode=b,xr=c,fn=to(b.firstChild),$s=!1,_=!0):_=!1),_||Ho(c)),$t(c),_=c.type,E=c.pendingProps,k=u!==null?u.memoizedProps:null,b=E.children,vC(_,E)?b=null:k!==null&&vC(_,k)&&(c.flags|=32),c.memoizedState!==null&&(_=O0(u,c,Aa,null,null,f),Hb._currentValue=_),Vc(u,c),_r(u,c,b,f),c.child;case 6:return u===null&&yi&&((u=f=fn)&&(f=Gse(f,c.pendingProps,$s),f!==null?(c.stateNode=f,xr=c,fn=null,u=!0):u=!1),u||Ho(c)),null;case 13:return r2(u,c,f);case 4:return pt(c,c.stateNode.containerInfo),b=c.pendingProps,u===null?c.child=Sa(c,null,b,f):_r(u,c,b,f),c.child;case 11:return Zv(u,c,c.type,c.pendingProps,f);case 7:return _r(u,c,c.pendingProps,f),c.child;case 8:return _r(u,c,c.pendingProps.children,f),c.child;case 12:return _r(u,c,c.pendingProps.children,f),c.child;case 10:return b=c.pendingProps,Wa(c,c.type,b.value),_r(u,c,b.children,f),c.child;case 9:return _=c.type._context,b=c.pendingProps.children,Nl(c),_=Pr(_),b=b(_),c.flags|=1,_r(u,c,b,f),c.child;case 14:return pb(u,c,c.type,c.pendingProps,f);case 15:return Jv(u,c,c.type,c.pendingProps,f);case 19:return a2(u,c,f);case 31:return i2(u,c,f);case 22:return e2(u,c,f,c.pendingProps);case 24:return Nl(c),b=Pr(Wn),u===null?(_=Ul(),_===null&&(_=et,E=A0(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=f),_=E),c.memoizedState={parent:b,cache:_},vp(c),Wa(c,Wn,_)):((u.lanes&f)!==0&&(wn(u,c),Mu(c,null,null,f),Ic()),_=u.memoizedState,E=c.memoizedState,_.parent!==b?(_={parent:b,cache:b},c.memoizedState=_,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=_),Wa(c,Wn,b)):(b=E.cache,Wa(c,Wn,b),b!==_.cache&&mp(c,[Wn],f,!0))),_r(u,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Wo(u){u.flags|=4}function Ab(u,c,f,b,_){if((c=(u.mode&32)!==0)&&(c=!1),c){if(u.flags|=16777216,(_&335544128)===_)if(u.stateNode.complete)u.flags|=8192;else if(I4())u.flags|=8192;else throw Hl=xd,C0}else u.flags&=-16777217}function o2(u,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!A8(c))if(I4())u.flags|=8192;else throw Hl=xd,C0}function Md(u,c){c!==null&&(u.flags|=4),u.flags&16384&&(c=u.tag!==22?ye():536870912,u.lanes|=c,Xc|=c)}function jc(u,c){if(!yi)switch(u.tailMode){case"hidden":c=u.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?u.tail=null:f.sibling=null;break;case"collapsed":f=u.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function pn(u){var c=u.alternate!==null&&u.alternate.child===u.child,f=0,b=0;if(c)for(var _=u.child;_!==null;)f|=_.lanes|_.childLanes,b|=_.subtreeFlags&65011712,b|=_.flags&65011712,_.return=u,_=_.sibling;else for(_=u.child;_!==null;)f|=_.lanes|_.childLanes,b|=_.subtreeFlags,b|=_.flags,_.return=u,_=_.sibling;return u.subtreeFlags|=b,u.childLanes=f,c}function u2(u,c,f){var b=c.pendingProps;switch(pp(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(c),null;case 1:return pn(c),null;case 3:return f=c.stateNode,b=null,u!==null&&(b=u.memoizedState.cache),c.memoizedState.cache!==b&&(c.flags|=2048),$a(Wn),tt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(u===null||u.child===null)&&(Rc(c)?Wo(c):u===null||u.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,T0())),pn(c),null;case 26:var _=c.type,E=c.memoizedState;return u===null?(Wo(c),E!==null?(pn(c),o2(c,E)):(pn(c),Ab(c,_,null,b,f))):E?E!==u.memoizedState?(Wo(c),pn(c),o2(c,E)):(pn(c),c.flags&=-16777217):(u=u.memoizedProps,u!==b&&Wo(c),pn(c),Ab(c,_,u,b,f)),null;case 27:if(li(c),f=Ye.current,_=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==b&&Wo(c);else{if(!b){if(c.stateNode===null)throw Error(n(166));return pn(c),null}u=Ge.current,Rc(c)?_v(c):(u=b8(_,b,f),c.stateNode=u,Wo(c))}return pn(c),null;case 5:if(li(c),_=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==b&&Wo(c);else{if(!b){if(c.stateNode===null)throw Error(n(166));return pn(c),null}if(E=Ge.current,Rc(c))_v(c);else{var k=P2(Ye.current);switch(E){case 1:E=k.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=k.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=k.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=k.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=k.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof b.is=="string"?k.createElement("select",{is:b.is}):k.createElement("select"),b.multiple?E.multiple=!0:b.size&&(E.size=b.size);break;default:E=typeof b.is=="string"?k.createElement(_,{is:b.is}):k.createElement(_)}}E[Gt]=c,E[hn]=b;e:for(k=c.child;k!==null;){if(k.tag===5||k.tag===6)E.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===c)break e;for(;k.sibling===null;){if(k.return===null||k.return===c)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}c.stateNode=E;e:switch(rs(E,_,b),_){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Wo(c)}}return pn(c),Ab(c,c.type,u===null?null:u.memoizedProps,c.pendingProps,f),null;case 6:if(u&&c.stateNode!=null)u.memoizedProps!==b&&Wo(c);else{if(typeof b!="string"&&c.stateNode===null)throw Error(n(166));if(u=Ye.current,Rc(c)){if(u=c.stateNode,f=c.memoizedProps,b=null,_=xr,_!==null)switch(_.tag){case 27:case 5:b=_.memoizedProps}u[Gt]=c,u=!!(u.nodeValue===f||b!==null&&b.suppressHydrationWarning===!0||a8(u.nodeValue,f)),u||Ho(c,!0)}else u=P2(u).createTextNode(b),u[Gt]=c,c.stateNode=u}return pn(c),null;case 31:if(f=c.memoizedState,u===null||u.memoizedState!==null){if(b=Rc(c),f!==null){if(u===null){if(!b)throw Error(n(318));if(u=c.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(557));u[Gt]=c}else Il(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pn(c),u=!1}else f=T0(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=f),u=!0;if(!u)return c.flags&256?(Us(c),c):(Us(c),null);if((c.flags&128)!==0)throw Error(n(558))}return pn(c),null;case 13:if(b=c.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(_=Rc(c),b!==null&&b.dehydrated!==null){if(u===null){if(!_)throw Error(n(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Gt]=c}else Il(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pn(c),_=!1}else _=T0(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=_),_=!0;if(!_)return c.flags&256?(Us(c),c):(Us(c),null)}return Us(c),(c.flags&128)!==0?(c.lanes=f,c):(f=b!==null,u=u!==null&&u.memoizedState!==null,f&&(b=c.child,_=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(_=b.alternate.memoizedState.cachePool.pool),E=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(E=b.memoizedState.cachePool.pool),E!==_&&(b.flags|=2048)),f!==u&&f&&(c.child.flags|=8192),Md(c,c.updateQueue),pn(c),null);case 4:return tt(),u===null&&gC(c.stateNode.containerInfo),pn(c),null;case 10:return $a(c.type),pn(c),null;case 19:if(be(Bn),b=c.memoizedState,b===null)return pn(c),null;if(_=(c.flags&128)!==0,E=b.rendering,E===null)if(_)jc(b,!1);else{if(Et!==0||u!==null&&(u.flags&128)!==0)for(u=c.child;u!==null;){if(E=Lc(u),E!==null){for(c.flags|=128,jc(b,!1),u=E.updateQueue,c.updateQueue=u,Md(c,u),c.subtreeFlags=0,u=f,f=c.child;f!==null;)yv(f,u),f=f.sibling;return ee(Bn,Bn.current&1|2),yi&&qa(c,b.treeForkCount),c.child}u=u.sibling}b.tail!==null&&Ni()>_2&&(c.flags|=128,_=!0,jc(b,!1),c.lanes=4194304)}else{if(!_)if(u=Lc(E),u!==null){if(c.flags|=128,_=!0,u=u.updateQueue,c.updateQueue=u,Md(c,u),jc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!E.alternate&&!yi)return pn(c),null}else 2*Ni()-b.renderingStartTime>_2&&f!==536870912&&(c.flags|=128,_=!0,jc(b,!1),c.lanes=4194304);b.isBackwards?(E.sibling=c.child,c.child=E):(u=b.last,u!==null?u.sibling=E:c.child=E,b.last=E)}return b.tail!==null?(u=b.tail,b.rendering=u,b.tail=u.sibling,b.renderingStartTime=Ni(),u.sibling=null,f=Bn.current,ee(Bn,_?f&1|2:f&1),yi&&qa(c,b.treeForkCount),u):(pn(c),null);case 22:case 23:return Us(c),Bu(),b=c.memoizedState!==null,u!==null?u.memoizedState!==null!==b&&(c.flags|=8192):b&&(c.flags|=8192),b?(f&536870912)!==0&&(c.flags&128)===0&&(pn(c),c.subtreeFlags&6&&(c.flags|=8192)):pn(c),f=c.updateQueue,f!==null&&Md(c,f.retryQueue),f=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),b=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),b!==f&&(c.flags|=2048),u!==null&&be(Vo),null;case 24:return f=null,u!==null&&(f=u.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),$a(Wn),pn(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function l2(u,c){switch(pp(c),c.tag){case 1:return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return $a(Wn),tt(),u=c.flags,(u&65536)!==0&&(u&128)===0?(c.flags=u&-65537|128,c):null;case 26:case 27:case 5:return li(c),null;case 31:if(c.memoizedState!==null){if(Us(c),c.alternate===null)throw Error(n(340));Il()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 13:if(Us(c),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Il()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return be(Bn),null;case 4:return tt(),null;case 10:return $a(c.type),null;case 22:case 23:return Us(c),Bu(),u!==null&&be(Vo),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 24:return $a(Wn),null;case 25:return null;default:return null}}function Cb(u,c){switch(pp(c),c.tag){case 3:$a(Wn),tt();break;case 26:case 27:case 5:li(c);break;case 4:tt();break;case 31:c.memoizedState!==null&&Us(c);break;case 13:Us(c);break;case 19:be(Bn);break;case 10:$a(c.type);break;case 22:case 23:Us(c),Bu(),u!==null&&be(Vo);break;case 24:$a(Wn)}}function Bd(u,c){try{var f=c.updateQueue,b=f!==null?f.lastEffect:null;if(b!==null){var _=b.next;f=_;do{if((f.tag&u)===u){b=void 0;var E=f.create,k=f.inst;b=E(),k.destroy=b}f=f.next}while(f!==_)}}catch(W){Ji(c,c.return,W)}}function Fu(u,c,f){try{var b=c.updateQueue,_=b!==null?b.lastEffect:null;if(_!==null){var E=_.next;b=E;do{if((b.tag&u)===u){var k=b.inst,W=k.destroy;if(W!==void 0){k.destroy=void 0,_=c;var pe=f,Ce=W;try{Ce()}catch(Oe){Ji(_,pe,Oe)}}}b=b.next}while(b!==E)}}catch(Oe){Ji(c,c.return,Oe)}}function c2(u){var c=u.updateQueue;if(c!==null){var f=u.stateNode;try{Ep(c,f)}catch(b){Ji(u,u.return,b)}}}function h2(u,c,f){f.props=Ou(u.type,u.memoizedProps),f.state=u.memoizedState;try{f.componentWillUnmount()}catch(b){Ji(u,c,b)}}function kd(u,c){try{var f=u.ref;if(f!==null){switch(u.tag){case 26:case 27:case 5:var b=u.stateNode;break;case 30:b=u.stateNode;break;default:b=u.stateNode}typeof f=="function"?u.refCleanup=f(b):f.current=b}}catch(_){Ji(u,c,_)}}function Zs(u,c){var f=u.ref,b=u.refCleanup;if(f!==null)if(typeof b=="function")try{b()}catch(_){Ji(u,c,_)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Ji(u,c,_)}else f.current=null}function d2(u){var c=u.type,f=u.memoizedProps,b=u.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&b.focus();break e;case"img":f.src?b.src=f.src:f.srcSet&&(b.srcset=f.srcSet)}}catch(_){Ji(u,u.return,_)}}function Up(u,c,f){try{var b=u.stateNode;kse(b,u.type,f,c),b[hn]=c}catch(_){Ji(u,u.return,_)}}function wb(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Zc(u.type)||u.tag===4}function Gp(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||wb(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Zc(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Db(u,c,f){var b=u.tag;if(b===5||b===6)u=u.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(u,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(u),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Ta));else if(b!==4&&(b===27&&Zc(u.type)&&(f=u.stateNode,c=null),u=u.child,u!==null))for(Db(u,c,f),u=u.sibling;u!==null;)Db(u,c,f),u=u.sibling}function Hp(u,c,f){var b=u.tag;if(b===5||b===6)u=u.stateNode,c?f.insertBefore(u,c):f.appendChild(u);else if(b!==4&&(b===27&&Zc(u.type)&&(f=u.stateNode),u=u.child,u!==null))for(Hp(u,c,f),u=u.sibling;u!==null;)Hp(u,c,f),u=u.sibling}function f2(u){var c=u.stateNode,f=u.memoizedProps;try{for(var b=u.type,_=c.attributes;_.length;)c.removeAttributeNode(_[0]);rs(c,b,f),c[Gt]=u,c[hn]=f}catch(E){Ji(u,u.return,E)}}var Za=!1,$n=!1,Rb=!1,p2=typeof WeakSet=="function"?WeakSet:Set,vr=null;function m2(u,c){if(u=u.containerInfo,xC=L2,u=fv(u),ip(u)){if("selectionStart"in u)var f={start:u.selectionStart,end:u.selectionEnd};else e:{f=(f=u.ownerDocument)&&f.defaultView||window;var b=f.getSelection&&f.getSelection();if(b&&b.rangeCount!==0){f=b.anchorNode;var _=b.anchorOffset,E=b.focusNode;b=b.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break e}var k=0,W=-1,pe=-1,Ce=0,Oe=0,Ue=u,Re=null;t:for(;;){for(var Pe;Ue!==f||_!==0&&Ue.nodeType!==3||(W=k+_),Ue!==E||b!==0&&Ue.nodeType!==3||(pe=k+b),Ue.nodeType===3&&(k+=Ue.nodeValue.length),(Pe=Ue.firstChild)!==null;)Re=Ue,Ue=Pe;for(;;){if(Ue===u)break t;if(Re===f&&++Ce===_&&(W=k),Re===E&&++Oe===b&&(pe=k),(Pe=Ue.nextSibling)!==null)break;Ue=Re,Re=Ue.parentNode}Ue=Pe}f=W===-1||pe===-1?null:{start:W,end:pe}}else f=null}f=f||{start:0,end:0}}else f=null;for(_C={focusedElem:u,selectionRange:f},L2=!1,vr=c;vr!==null;)if(c=vr,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,vr=u;else for(;vr!==null;){switch(c=vr,E=c.alternate,u=c.flags,c.tag){case 0:if((u&4)!==0&&(u=c.updateQueue,u=u!==null?u.events:null,u!==null))for(f=0;f<u.length;f++)_=u[f],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&E!==null){u=void 0,f=c,_=E.memoizedProps,E=E.memoizedState,b=f.stateNode;try{var ct=Ou(f.type,_);u=b.getSnapshotBeforeUpdate(ct,E),b.__reactInternalSnapshotBeforeUpdate=u}catch(Ft){Ji(f,f.return,Ft)}}break;case 3:if((u&1024)!==0){if(u=c.stateNode.containerInfo,f=u.nodeType,f===9)EC(u);else if(f===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":EC(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=c.sibling,u!==null){u.return=c.return,vr=u;break}vr=c.return}}function Pb(u,c,f){var b=f.flags;switch(f.tag){case 0:case 11:case 15:Ko(u,f),b&4&&Bd(5,f);break;case 1:if(Ko(u,f),b&4)if(u=f.stateNode,c===null)try{u.componentDidMount()}catch(k){Ji(f,f.return,k)}else{var _=Ou(f.type,c.memoizedProps);c=c.memoizedState;try{u.componentDidUpdate(_,c,u.__reactInternalSnapshotBeforeUpdate)}catch(k){Ji(f,f.return,k)}}b&64&&c2(f),b&512&&kd(f,f.return);break;case 3:if(Ko(u,f),b&64&&(u=f.updateQueue,u!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{Ep(u,c)}catch(k){Ji(f,f.return,k)}}break;case 27:c===null&&b&4&&f2(f);case 26:case 5:Ko(u,f),c===null&&b&4&&d2(f),b&512&&kd(f,f.return);break;case 12:Ko(u,f);break;case 31:Ko(u,f),b&4&&y2(u,f);break;case 13:Ko(u,f),b&4&&x2(u,f),b&64&&(u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(f=vse.bind(null,f),Hse(u,f))));break;case 22:if(b=f.memoizedState!==null||Za,!b){c=c!==null&&c.memoizedState!==null||$n,_=Za;var E=$n;Za=b,($n=c)&&!E?Zo(u,f,(f.subtreeFlags&8772)!==0):Ko(u,f),Za=_,$n=E}break;case 30:break;default:Ko(u,f)}}function g2(u){var c=u.alternate;c!==null&&(u.alternate=null,g2(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&qg(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var _n=null,ns=!1;function $o(u,c,f){for(f=f.child;f!==null;)b2(u,c,f),f=f.sibling}function b2(u,c,f){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(cn,f)}catch{}switch(f.tag){case 26:$n||Zs(f,c),$o(u,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:$n||Zs(f,c);var b=_n,_=ns;Zc(f.type)&&(_n=f.stateNode,ns=!1),$o(u,c,f),Nb(f.stateNode),_n=b,ns=_;break;case 5:$n||Zs(f,c);case 6:if(b=_n,_=ns,_n=null,$o(u,c,f),_n=b,ns=_,_n!==null)if(ns)try{(_n.nodeType===9?_n.body:_n.nodeName==="HTML"?_n.ownerDocument.body:_n).removeChild(f.stateNode)}catch(E){Ji(f,c,E)}else try{_n.removeChild(f.stateNode)}catch(E){Ji(f,c,E)}break;case 18:_n!==null&&(ns?(u=_n,d8(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,f.stateNode),Zp(u)):d8(_n,f.stateNode));break;case 4:b=_n,_=ns,_n=f.stateNode.containerInfo,ns=!0,$o(u,c,f),_n=b,ns=_;break;case 0:case 11:case 14:case 15:Fu(2,f,c),$n||Fu(4,f,c),$o(u,c,f);break;case 1:$n||(Zs(f,c),b=f.stateNode,typeof b.componentWillUnmount=="function"&&h2(f,c,b)),$o(u,c,f);break;case 21:$o(u,c,f);break;case 22:$n=(b=$n)||f.memoizedState!==null,$o(u,c,f),$n=b;break;default:$o(u,c,f)}}function y2(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Zp(u)}catch(f){Ji(c,c.return,f)}}}function x2(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Zp(u)}catch(f){Ji(c,c.return,f)}}function Yl(u){switch(u.tag){case 31:case 13:case 19:var c=u.stateNode;return c===null&&(c=u.stateNode=new p2),c;case 22:return u=u.stateNode,c=u._retryCache,c===null&&(c=u._retryCache=new p2),c;default:throw Error(n(435,u.tag))}}function zp(u,c){var f=Yl(u);c.forEach(function(b){if(!f.has(b)){f.add(b);var _=Tse.bind(null,u,b);b.then(_,_)}})}function gs(u,c){var f=c.deletions;if(f!==null)for(var b=0;b<f.length;b++){var _=f[b],E=u,k=c,W=k;e:for(;W!==null;){switch(W.tag){case 27:if(Zc(W.type)){_n=W.stateNode,ns=!1;break e}break;case 5:_n=W.stateNode,ns=!1;break e;case 3:case 4:_n=W.stateNode.containerInfo,ns=!0;break e}W=W.return}if(_n===null)throw Error(n(160));b2(E,k,_),_n=null,ns=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)Mb(c,u),c=c.sibling}var Ca=null;function Mb(u,c){var f=u.alternate,b=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:gs(c,u),bs(u),b&4&&(Fu(3,u,u.return),Bd(3,u),Fu(5,u,u.return));break;case 1:gs(c,u),bs(u),b&512&&($n||f===null||Zs(f,f.return)),b&64&&Za&&(u=u.updateQueue,u!==null&&(b=u.callbacks,b!==null&&(f=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=f===null?b:f.concat(b))));break;case 26:var _=Ca;if(gs(c,u),bs(u),b&512&&($n||f===null||Zs(f,f.return)),b&4){var E=f!==null?f.memoizedState:null;if(b=u.memoizedState,f===null)if(b===null)if(u.stateNode===null){e:{b=u.type,f=u.memoizedProps,_=_.ownerDocument||_;t:switch(b){case"title":E=_.getElementsByTagName("title")[0],(!E||E[Kh]||E[Gt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(b),_.head.insertBefore(E,_.querySelector("head > title"))),rs(E,b,f),E[Gt]=u,gr(E),b=E;break e;case"link":var k=E8("link","href",_).get(b+(f.href||""));if(k){for(var W=0;W<k.length;W++)if(E=k[W],E.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&E.getAttribute("rel")===(f.rel==null?null:f.rel)&&E.getAttribute("title")===(f.title==null?null:f.title)&&E.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){k.splice(W,1);break t}}E=_.createElement(b),rs(E,b,f),_.head.appendChild(E);break;case"meta":if(k=E8("meta","content",_).get(b+(f.content||""))){for(W=0;W<k.length;W++)if(E=k[W],E.getAttribute("content")===(f.content==null?null:""+f.content)&&E.getAttribute("name")===(f.name==null?null:f.name)&&E.getAttribute("property")===(f.property==null?null:f.property)&&E.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&E.getAttribute("charset")===(f.charSet==null?null:f.charSet)){k.splice(W,1);break t}}E=_.createElement(b),rs(E,b,f),_.head.appendChild(E);break;default:throw Error(n(468,b))}E[Gt]=u,gr(E),b=E}u.stateNode=b}else S8(_,u.type,u.stateNode);else u.stateNode=T8(_,b,u.memoizedProps);else E!==b?(E===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):E.count--,b===null?S8(_,u.type,u.stateNode):T8(_,b,u.memoizedProps)):b===null&&u.stateNode!==null&&Up(u,u.memoizedProps,f.memoizedProps)}break;case 27:gs(c,u),bs(u),b&512&&($n||f===null||Zs(f,f.return)),f!==null&&b&4&&Up(u,u.memoizedProps,f.memoizedProps);break;case 5:if(gs(c,u),bs(u),b&512&&($n||f===null||Zs(f,f.return)),u.flags&32){_=u.stateNode;try{Cl(_,"")}catch(ct){Ji(u,u.return,ct)}}b&4&&u.stateNode!=null&&(_=u.memoizedProps,Up(u,_,f!==null?f.memoizedProps:_)),b&1024&&(Rb=!0);break;case 6:if(gs(c,u),bs(u),b&4){if(u.stateNode===null)throw Error(n(162));b=u.memoizedProps,f=u.stateNode;try{f.nodeValue=b}catch(ct){Ji(u,u.return,ct)}}break;case 3:if(k2=null,_=Ca,Ca=M2(c.containerInfo),gs(c,u),Ca=_,bs(u),b&4&&f!==null&&f.memoizedState.isDehydrated)try{Zp(c.containerInfo)}catch(ct){Ji(u,u.return,ct)}Rb&&(Rb=!1,Vp(u));break;case 4:b=Ca,Ca=M2(u.stateNode.containerInfo),gs(c,u),bs(u),Ca=b;break;case 12:gs(c,u),bs(u);break;case 31:gs(c,u),bs(u),b&4&&(b=u.updateQueue,b!==null&&(u.updateQueue=null,zp(u,b)));break;case 13:gs(c,u),bs(u),u.child.flags&8192&&u.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(qc=Ni()),b&4&&(b=u.updateQueue,b!==null&&(u.updateQueue=null,zp(u,b)));break;case 22:_=u.memoizedState!==null;var pe=f!==null&&f.memoizedState!==null,Ce=Za,Oe=$n;if(Za=Ce||_,$n=Oe||pe,gs(c,u),$n=Oe,Za=Ce,bs(u),b&8192)e:for(c=u.stateNode,c._visibility=_?c._visibility&-2:c._visibility|1,_&&(f===null||pe||Za||$n||Qo(u)),f=null,c=u;;){if(c.tag===5||c.tag===26){if(f===null){pe=f=c;try{if(E=pe.stateNode,_)k=E.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{W=pe.stateNode;var Ue=pe.memoizedProps.style,Re=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;W.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(ct){Ji(pe,pe.return,ct)}}}else if(c.tag===6){if(f===null){pe=c;try{pe.stateNode.nodeValue=_?"":pe.memoizedProps}catch(ct){Ji(pe,pe.return,ct)}}}else if(c.tag===18){if(f===null){pe=c;try{var Pe=pe.stateNode;_?f8(Pe,!0):f8(pe.stateNode,!1)}catch(ct){Ji(pe,pe.return,ct)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===u)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}b&4&&(b=u.updateQueue,b!==null&&(f=b.retryQueue,f!==null&&(b.retryQueue=null,zp(u,f))));break;case 19:gs(c,u),bs(u),b&4&&(b=u.updateQueue,b!==null&&(u.updateQueue=null,zp(u,b)));break;case 30:break;case 21:break;default:gs(c,u),bs(u)}}function bs(u){var c=u.flags;if(c&2){try{for(var f,b=u.return;b!==null;){if(wb(b)){f=b;break}b=b.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var _=f.stateNode,E=Gp(u);Hp(u,E,_);break;case 5:var k=f.stateNode;f.flags&32&&(Cl(k,""),f.flags&=-33);var W=Gp(u);Hp(u,W,k);break;case 3:case 4:var pe=f.stateNode.containerInfo,Ce=Gp(u);Db(u,Ce,pe);break;default:throw Error(n(161))}}catch(Oe){Ji(u,u.return,Oe)}u.flags&=-3}c&4096&&(u.flags&=-4097)}function Vp(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var c=u;Vp(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),u=u.sibling}}function Ko(u,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Pb(u,c.alternate,c),c=c.sibling}function Qo(u){for(u=u.child;u!==null;){var c=u;switch(c.tag){case 0:case 11:case 14:case 15:Fu(4,c,c.return),Qo(c);break;case 1:Zs(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&h2(c,c.return,f),Qo(c);break;case 27:Nb(c.stateNode);case 26:case 5:Zs(c,c.return),Qo(c);break;case 22:c.memoizedState===null&&Qo(c);break;case 30:Qo(c);break;default:Qo(c)}u=u.sibling}}function Zo(u,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var b=c.alternate,_=u,E=c,k=E.flags;switch(E.tag){case 0:case 11:case 15:Zo(_,E,f),Bd(4,E);break;case 1:if(Zo(_,E,f),b=E,_=b.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Ce){Ji(b,b.return,Ce)}if(b=E,_=b.updateQueue,_!==null){var W=b.stateNode;try{var pe=_.shared.hiddenCallbacks;if(pe!==null)for(_.shared.hiddenCallbacks=null,_=0;_<pe.length;_++)R0(pe[_],W)}catch(Ce){Ji(b,b.return,Ce)}}f&&k&64&&c2(E),kd(E,E.return);break;case 27:f2(E);case 26:case 5:Zo(_,E,f),f&&b===null&&k&4&&d2(E),kd(E,E.return);break;case 12:Zo(_,E,f);break;case 31:Zo(_,E,f),f&&k&4&&y2(_,E);break;case 13:Zo(_,E,f),f&&k&4&&x2(_,E);break;case 22:E.memoizedState===null&&Zo(_,E,f),kd(E,E.return);break;case 30:break;default:Zo(_,E,f)}c=c.sibling}}function Bb(u,c){var f=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),u=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(u=c.memoizedState.cachePool.pool),u!==f&&(u!=null&&u.refCount++,f!=null&&yd(f))}function kb(u,c){u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&yd(u))}function m(u,c,f,b){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)x(u,c,f,b),c=c.sibling}function x(u,c,f,b){var _=c.flags;switch(c.tag){case 0:case 11:case 15:m(u,c,f,b),_&2048&&Bd(9,c);break;case 1:m(u,c,f,b);break;case 3:m(u,c,f,b),_&2048&&(u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&yd(u)));break;case 12:if(_&2048){m(u,c,f,b),u=c.stateNode;try{var E=c.memoizedProps,k=E.id,W=E.onPostCommit;typeof W=="function"&&W(k,c.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(pe){Ji(c,c.return,pe)}}else m(u,c,f,b);break;case 31:m(u,c,f,b);break;case 13:m(u,c,f,b);break;case 23:break;case 22:E=c.stateNode,k=c.alternate,c.memoizedState!==null?E._visibility&2?m(u,c,f,b):P(u,c):E._visibility&2?m(u,c,f,b):(E._visibility|=2,C(u,c,f,b,(c.subtreeFlags&10256)!==0||!1)),_&2048&&Bb(k,c);break;case 24:m(u,c,f,b),_&2048&&kb(c.alternate,c);break;default:m(u,c,f,b)}}function C(u,c,f,b,_){for(_=_&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var E=u,k=c,W=f,pe=b,Ce=k.flags;switch(k.tag){case 0:case 11:case 15:C(E,k,W,pe,_),Bd(8,k);break;case 23:break;case 22:var Oe=k.stateNode;k.memoizedState!==null?Oe._visibility&2?C(E,k,W,pe,_):P(E,k):(Oe._visibility|=2,C(E,k,W,pe,_)),_&&Ce&2048&&Bb(k.alternate,k);break;case 24:C(E,k,W,pe,_),_&&Ce&2048&&kb(k.alternate,k);break;default:C(E,k,W,pe,_)}c=c.sibling}}function P(u,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=u,b=c,_=b.flags;switch(b.tag){case 22:P(f,b),_&2048&&Bb(b.alternate,b);break;case 24:P(f,b),_&2048&&kb(b.alternate,b);break;default:P(f,b)}c=c.sibling}}var I=8192;function N(u,c,f){if(u.subtreeFlags&I)for(u=u.child;u!==null;)X(u,c,f),u=u.sibling}function X(u,c,f){switch(u.tag){case 26:N(u,c,f),u.flags&I&&u.memoizedState!==null&&Jse(f,Ca,u.memoizedState,u.memoizedProps);break;case 5:N(u,c,f);break;case 3:case 4:var b=Ca;Ca=M2(u.stateNode.containerInfo),N(u,c,f),Ca=b;break;case 22:u.memoizedState===null&&(b=u.alternate,b!==null&&b.memoizedState!==null?(b=I,I=16777216,N(u,c,f),I=b):N(u,c,f));break;default:N(u,c,f)}}function Q(u){var c=u.alternate;if(c!==null&&(u=c.child,u!==null)){c.child=null;do c=u.sibling,u.sibling=null,u=c;while(u!==null)}}function he(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var b=c[f];vr=b,De(b,u)}Q(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)ce(u),u=u.sibling}function ce(u){switch(u.tag){case 0:case 11:case 15:he(u),u.flags&2048&&Fu(9,u,u.return);break;case 3:he(u);break;case 12:he(u);break;case 22:var c=u.stateNode;u.memoizedState!==null&&c._visibility&2&&(u.return===null||u.return.tag!==13)?(c._visibility&=-3,le(u)):he(u);break;default:he(u)}}function le(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var b=c[f];vr=b,De(b,u)}Q(u)}for(u=u.child;u!==null;){switch(c=u,c.tag){case 0:case 11:case 15:Fu(8,c,c.return),le(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,le(c));break;default:le(c)}u=u.sibling}}function De(u,c){for(;vr!==null;){var f=vr;switch(f.tag){case 0:case 11:case 15:Fu(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var b=f.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:yd(f.memoizedState.cache)}if(b=f.child,b!==null)b.return=f,vr=b;else e:for(f=u;vr!==null;){b=vr;var _=b.sibling,E=b.return;if(g2(b),b===f){vr=null;break e}if(_!==null){_.return=E,vr=_;break e}vr=E}}}var Fe={getCacheForType:function(u){var c=Pr(Wn),f=c.data.get(u);return f===void 0&&(f=u(),c.data.set(u,f)),f},cacheSignal:function(){return Pr(Wn).controller.signal}},Je=typeof WeakMap=="function"?WeakMap:Map,ze=0,et=null,Ze=null,Xe=0,Qe=0,Ot=null,Ti=!1,ti=!1,qi=!1,sn=0,Et=0,vn=0,Ja=0,ql=0,ys=0,Xc=0,Yc=null,Wi=null,eo=!1,qc=0,jp=0,_2=1/0,v2=null,Wc=null,Br=0,$c=null,Xp=null,Wl=0,rC=0,sC=null,M4=null,Ob=0,aC=null;function wa(){return(ze&2)!==0&&Xe!==0?Xe&-Xe:$.T!==null?dC():Pn()}function B4(){if(ys===0)if((Xe&536870912)===0||yi){var u=Hr;Hr<<=1,(Hr&3932160)===0&&(Hr=262144),ys=u}else ys=536870912;return u=ms.current,u!==null&&(u.flags|=32),ys}function Js(u,c,f){(u===et&&(Qe===2||Qe===9)||u.cancelPendingCommit!==null)&&(Yp(u,0),Kc(u,Xe,ys,!1)),at(u,f),((ze&2)===0||u!==et)&&(u===et&&((ze&2)===0&&(Ja|=f),Et===4&&Kc(u,Xe,ys,!1)),Iu(u))}function k4(u,c,f){if((ze&6)!==0)throw Error(n(327));var b=!f&&(c&127)===0&&(c&u.expiredLanes)===0||F(u,c),_=b?yse(u,c):uC(u,c,!0),E=b;do{if(_===0){ti&&!b&&Kc(u,c,0,!1);break}else{if(f=u.current.alternate,E&&!gse(f)){_=uC(u,c,!1),E=!1;continue}if(_===2){if(E=c,u.errorRecoveryDisabledLanes&E)var k=0;else k=u.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){c=k;e:{var W=u;_=Yc;var pe=W.current.memoizedState.isDehydrated;if(pe&&(Yp(W,k).flags|=256),k=uC(W,k,!1),k!==2){if(qi&&!pe){W.errorRecoveryDisabledLanes|=E,Ja|=E,_=4;break e}E=Wi,Wi=_,E!==null&&(Wi===null?Wi=E:Wi.push.apply(Wi,E))}_=k}if(E=!1,_!==2)continue}}if(_===1){Yp(u,0),Kc(u,c,0,!0);break}e:{switch(b=u,E=_,E){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Kc(b,c,ys,!Ti);break e;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(_=qc+300-Ni(),10<_)){if(Kc(b,c,ys,!Ti),M(b,0,!0)!==0)break e;Wl=c,b.timeoutHandle=c8(O4.bind(null,b,f,Wi,v2,eo,c,ys,Ja,Xc,Ti,E,"Throttled",-0,0),_);break e}O4(b,f,Wi,v2,eo,c,ys,Ja,Xc,Ti,E,null,-0,0)}}break}while(!0);Iu(u)}function O4(u,c,f,b,_,E,k,W,pe,Ce,Oe,Ue,Re,Pe){if(u.timeoutHandle=-1,Ue=c.subtreeFlags,Ue&8192||(Ue&16785408)===16785408){Ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ta},X(c,E,Ue);var ct=(E&62914560)===E?qc-Ni():(E&4194048)===E?jp-Ni():0;if(ct=eae(Ue,ct),ct!==null){Wl=E,u.cancelPendingCommit=ct(z4.bind(null,u,c,E,f,b,_,k,W,pe,Oe,Ue,null,Re,Pe)),Kc(u,E,k,!Ce);return}}z4(u,c,E,f,b,_,k,W,pe)}function gse(u){for(var c=u;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var b=0;b<f.length;b++){var _=f[b],E=_.getSnapshot;_=_.value;try{if(!Bs(E(),_))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Kc(u,c,f,b){c&=~ql,c&=~Ja,u.suspendedLanes|=c,u.pingedLanes&=~c,b&&(u.warmLanes|=c),b=u.expirationTimes;for(var _=c;0<_;){var E=31-bi(_),k=1<<E;b[E]=-1,_&=~k}f!==0&&zt(u,f,c)}function T2(){return(ze&6)===0?(Fb(0),!1):!0}function oC(){if(Ze!==null){if(Qe===0)var u=Ze.return;else u=Ze,zo=Ll=null,N0(u),kc=null,Oc=0,u=Ze;for(;u!==null;)Cb(u.alternate,u),u=u.return;Ze=null}}function Yp(u,c){var f=u.timeoutHandle;f!==-1&&(u.timeoutHandle=-1,Ise(f)),f=u.cancelPendingCommit,f!==null&&(u.cancelPendingCommit=null,f()),Wl=0,oC(),et=u,Ze=f=No(u.current,null),Xe=c,Qe=0,Ot=null,Ti=!1,ti=F(u,c),qi=!1,Xc=ys=ql=Ja=vn=Et=0,Wi=Yc=null,eo=!1,(c&8)!==0&&(c|=c&32);var b=u.entangledLanes;if(b!==0)for(u=u.entanglements,b&=c;0<b;){var _=31-bi(b),E=1<<_;c|=u[_],b&=~E}return sn=c,Ac(),f}function F4(u,c){Vt=null,$.H=Cd,c===Gl||c===xp?(c=Cv(),Qe=3):c===C0?(c=Cv(),Qe=4):Qe=c===fb?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ot=c,Ze===null&&(Et=1,wd(u,Is(c,u.current)))}function I4(){var u=ms.current;return u===null?!0:(Xe&4194048)===Xe?Mr===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?u===Mr:!1}function L4(){var u=$.H;return $.H=Cd,u===null?Cd:u}function N4(){var u=$.A;return $.A=Fe,u}function E2(){Et=4,Ti||(Xe&4194048)!==Xe&&ms.current!==null||(ti=!0),(vn&134217727)===0&&(Ja&134217727)===0||et===null||Kc(et,Xe,ys,!1)}function uC(u,c,f){var b=ze;ze|=2;var _=L4(),E=N4();(et!==u||Xe!==c)&&(v2=null,Yp(u,c)),c=!1;var k=Et;e:do try{if(Qe!==0&&Ze!==null){var W=Ze,pe=Ot;switch(Qe){case 8:oC(),k=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(c=!0);var Ce=Qe;if(Qe=0,Ot=null,qp(u,W,pe,Ce),f&&ti){k=0;break e}break;default:Ce=Qe,Qe=0,Ot=null,qp(u,W,pe,Ce)}}bse(),k=Et;break}catch(Oe){F4(u,Oe)}while(!0);return c&&u.shellSuspendCounter++,zo=Ll=null,ze=b,$.H=_,$.A=E,Ze===null&&(et=null,Xe=0,Ac()),k}function bse(){for(;Ze!==null;)U4(Ze)}function yse(u,c){var f=ze;ze|=2;var b=L4(),_=N4();et!==u||Xe!==c?(v2=null,_2=Ni()+500,Yp(u,c)):ti=F(u,c);e:do try{if(Qe!==0&&Ze!==null){c=Ze;var E=Ot;t:switch(Qe){case 1:Qe=0,Ot=null,qp(u,c,E,1);break;case 2:case 9:if(Sv(E)){Qe=0,Ot=null,G4(c);break}c=function(){Qe!==2&&Qe!==9||et!==u||(Qe=7),Iu(u)},E.then(c,c);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Sv(E)?(Qe=0,Ot=null,G4(c)):(Qe=0,Ot=null,qp(u,c,E,7));break;case 5:var k=null;switch(Ze.tag){case 26:k=Ze.memoizedState;case 5:case 27:var W=Ze;if(k?A8(k):W.stateNode.complete){Qe=0,Ot=null;var pe=W.sibling;if(pe!==null)Ze=pe;else{var Ce=W.return;Ce!==null?(Ze=Ce,S2(Ce)):Ze=null}break t}}Qe=0,Ot=null,qp(u,c,E,5);break;case 6:Qe=0,Ot=null,qp(u,c,E,6);break;case 8:oC(),Et=6;break e;default:throw Error(n(462))}}xse();break}catch(Oe){F4(u,Oe)}while(!0);return zo=Ll=null,$.H=b,$.A=_,ze=f,Ze!==null?0:(et=null,Xe=0,Ac(),Et)}function xse(){for(;Ze!==null&&!kt();)U4(Ze)}function U4(u){var c=Sb(u.alternate,u,sn);u.memoizedProps=u.pendingProps,c===null?S2(u):Ze=c}function G4(u){var c=u,f=c.alternate;switch(c.tag){case 15:case 0:c=gb(f,c,c.pendingProps,c.type,void 0,Xe);break;case 11:c=gb(f,c,c.pendingProps,c.type.render,c.ref,Xe);break;case 5:N0(c);default:Cb(f,c),c=Ze=yv(c,sn),c=Sb(f,c,sn)}u.memoizedProps=u.pendingProps,c===null?S2(u):Ze=c}function qp(u,c,f,b){zo=Ll=null,N0(c),kc=null,Oc=0;var _=c.return;try{if(nC(u,_,c,f,Xe)){Et=1,wd(u,Is(f,u.current)),Ze=null;return}}catch(E){if(_!==null)throw Ze=_,E;Et=1,wd(u,Is(f,u.current)),Ze=null;return}c.flags&32768?(yi||b===1?u=!0:ti||(Xe&536870912)!==0?u=!1:(Ti=u=!0,(b===2||b===9||b===3||b===6)&&(b=ms.current,b!==null&&b.tag===13&&(b.flags|=16384))),H4(c,u)):S2(c)}function S2(u){var c=u;do{if((c.flags&32768)!==0){H4(c,Ti);return}u=c.return;var f=u2(c.alternate,c,sn);if(f!==null){Ze=f;return}if(c=c.sibling,c!==null){Ze=c;return}Ze=c=u}while(c!==null);Et===0&&(Et=5)}function H4(u,c){do{var f=l2(u.alternate,u);if(f!==null){f.flags&=32767,Ze=f;return}if(f=u.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(u=u.sibling,u!==null)){Ze=u;return}Ze=u=f}while(u!==null);Et=6,Ze=null}function z4(u,c,f,b,_,E,k,W,pe){u.cancelPendingCommit=null;do A2();while(Br!==0);if((ze&6)!==0)throw Error(n(327));if(c!==null){if(c===u.current)throw Error(n(177));if(E=c.lanes|c.childLanes,E|=x0,qt(u,f,E,k,W,pe),u===et&&(Ze=et=null,Xe=0),Xp=c,$c=u,Wl=f,rC=E,sC=_,M4=b,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,Ese(bt,function(){return q4(),null})):(u.callbackNode=null,u.callbackPriority=0),b=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||b){b=$.T,$.T=null,_=se.p,se.p=2,k=ze,ze|=4;try{m2(u,c,f)}finally{ze=k,se.p=_,$.T=b}}Br=1,V4(),j4(),X4()}}function V4(){if(Br===1){Br=0;var u=$c,c=Xp,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=$.T,$.T=null;var b=se.p;se.p=2;var _=ze;ze|=4;try{Mb(c,u);var E=_C,k=fv(u.containerInfo),W=E.focusedElem,pe=E.selectionRange;if(k!==W&&W&&W.ownerDocument&&p0(W.ownerDocument.documentElement,W)){if(pe!==null&&ip(W)){var Ce=pe.start,Oe=pe.end;if(Oe===void 0&&(Oe=Ce),"selectionStart"in W)W.selectionStart=Ce,W.selectionEnd=Math.min(Oe,W.value.length);else{var Ue=W.ownerDocument||document,Re=Ue&&Ue.defaultView||window;if(Re.getSelection){var Pe=Re.getSelection(),ct=W.textContent.length,Ft=Math.min(pe.start,ct),on=pe.end===void 0?Ft:Math.min(pe.end,ct);!Pe.extend&&Ft>on&&(k=on,on=Ft,Ft=k);var ve=dv(W,Ft),xe=dv(W,on);if(ve&&xe&&(Pe.rangeCount!==1||Pe.anchorNode!==ve.node||Pe.anchorOffset!==ve.offset||Pe.focusNode!==xe.node||Pe.focusOffset!==xe.offset)){var Se=Ue.createRange();Se.setStart(ve.node,ve.offset),Pe.removeAllRanges(),Ft>on?(Pe.addRange(Se),Pe.extend(xe.node,xe.offset)):(Se.setEnd(xe.node,xe.offset),Pe.addRange(Se))}}}}for(Ue=[],Pe=W;Pe=Pe.parentNode;)Pe.nodeType===1&&Ue.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Ue.length;W++){var Ie=Ue[W];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}L2=!!xC,_C=xC=null}finally{ze=_,se.p=b,$.T=f}}u.current=c,Br=2}}function j4(){if(Br===2){Br=0;var u=$c,c=Xp,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=$.T,$.T=null;var b=se.p;se.p=2;var _=ze;ze|=4;try{Pb(u,c.alternate,c)}finally{ze=_,se.p=b,$.T=f}}Br=3}}function X4(){if(Br===4||Br===3){Br=0,Di();var u=$c,c=Xp,f=Wl,b=M4;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Br=5:(Br=0,Xp=$c=null,Y4(u,u.pendingLanes));var _=u.pendingLanes;if(_===0&&(Wc=null),zr(f),c=c.stateNode,Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(cn,c,void 0,(c.current.flags&128)===128)}catch{}if(b!==null){c=$.T,_=se.p,se.p=2,$.T=null;try{for(var E=u.onRecoverableError,k=0;k<b.length;k++){var W=b[k];E(W.value,{componentStack:W.stack})}}finally{$.T=c,se.p=_}}(Wl&3)!==0&&A2(),Iu(u),_=u.pendingLanes,(f&261930)!==0&&(_&42)!==0?u===aC?Ob++:(Ob=0,aC=u):Ob=0,Fb(0)}}function Y4(u,c){(u.pooledCacheLanes&=c)===0&&(c=u.pooledCache,c!=null&&(u.pooledCache=null,yd(c)))}function A2(){return V4(),j4(),X4(),q4()}function q4(){if(Br!==5)return!1;var u=$c,c=rC;rC=0;var f=zr(Wl),b=$.T,_=se.p;try{se.p=32>f?32:f,$.T=null,f=sC,sC=null;var E=$c,k=Wl;if(Br=0,Xp=$c=null,Wl=0,(ze&6)!==0)throw Error(n(331));var W=ze;if(ze|=4,ce(E.current),x(E,E.current,k,f),ze=W,Fb(0,!1),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(cn,E)}catch{}return!0}finally{se.p=_,$.T=b,Y4(u,c)}}function W4(u,c,f){c=Is(f,c),c=hb(u.stateNode,c,2),u=Ka(u,c,2),u!==null&&(at(u,2),Iu(u))}function Ji(u,c,f){if(u.tag===3)W4(u,u,f);else for(;c!==null;){if(c.tag===3){W4(c,u,f);break}else if(c.tag===1){var b=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Wc===null||!Wc.has(b))){u=Is(f,u),f=Ip(2),b=Ka(c,f,2),b!==null&&(db(f,b,c,u),at(b,2),Iu(b));break}}c=c.return}}function lC(u,c,f){var b=u.pingCache;if(b===null){b=u.pingCache=new Je;var _=new Set;b.set(c,_)}else _=b.get(c),_===void 0&&(_=new Set,b.set(c,_));_.has(f)||(qi=!0,_.add(f),u=_se.bind(null,u,c,f),c.then(u,u))}function _se(u,c,f){var b=u.pingCache;b!==null&&b.delete(c),u.pingedLanes|=u.suspendedLanes&f,u.warmLanes&=~f,et===u&&(Xe&f)===f&&(Et===4||Et===3&&(Xe&62914560)===Xe&&300>Ni()-qc?(ze&2)===0&&Yp(u,0):ql|=f,Xc===Xe&&(Xc=0)),Iu(u)}function $4(u,c){c===0&&(c=ye()),u=Au(u,c),u!==null&&(at(u,c),Iu(u))}function vse(u){var c=u.memoizedState,f=0;c!==null&&(f=c.retryLane),$4(u,f)}function Tse(u,c){var f=0;switch(u.tag){case 31:case 13:var b=u.stateNode,_=u.memoizedState;_!==null&&(f=_.retryLane);break;case 19:b=u.stateNode;break;case 22:b=u.stateNode._retryCache;break;default:throw Error(n(314))}b!==null&&b.delete(c),$4(u,f)}function Ese(u,c){return nn(u,c)}var C2=null,Wp=null,cC=!1,w2=!1,hC=!1,Qc=0;function Iu(u){u!==Wp&&u.next===null&&(Wp===null?C2=Wp=u:Wp=Wp.next=u),w2=!0,cC||(cC=!0,Ase())}function Fb(u,c){if(!hC&&w2){hC=!0;do for(var f=!1,b=C2;b!==null;){if(u!==0){var _=b.pendingLanes;if(_===0)var E=0;else{var k=b.suspendedLanes,W=b.pingedLanes;E=(1<<31-bi(42|u)+1)-1,E&=_&~(k&~W),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(f=!0,J4(b,E))}else E=Xe,E=M(b,b===et?E:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(E&3)===0||F(b,E)||(f=!0,J4(b,E));b=b.next}while(f);hC=!1}}function Sse(){K4()}function K4(){w2=cC=!1;var u=0;Qc!==0&&Fse()&&(u=Qc);for(var c=Ni(),f=null,b=C2;b!==null;){var _=b.next,E=Q4(b,c);E===0?(b.next=null,f===null?C2=_:f.next=_,_===null&&(Wp=f)):(f=b,(u!==0||(E&3)!==0)&&(w2=!0)),b=_}Br!==0&&Br!==5||Fb(u),Qc!==0&&(Qc=0)}function Q4(u,c){for(var f=u.suspendedLanes,b=u.pingedLanes,_=u.expirationTimes,E=u.pendingLanes&-62914561;0<E;){var k=31-bi(E),W=1<<k,pe=_[k];pe===-1?((W&f)===0||(W&b)!==0)&&(_[k]=Z(W,c)):pe<=c&&(u.expiredLanes|=W),E&=~W}if(c=et,f=Xe,f=M(u,u===c?f:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),b=u.callbackNode,f===0||u===c&&(Qe===2||Qe===9)||u.cancelPendingCommit!==null)return b!==null&&b!==null&&ci(b),u.callbackNode=null,u.callbackPriority=0;if((f&3)===0||F(u,f)){if(c=f&-f,c===u.callbackPriority)return c;switch(b!==null&&ci(b),zr(f)){case 2:case 8:f=We;break;case 32:f=bt;break;case 268435456:f=pi;break;default:f=bt}return b=Z4.bind(null,u),f=nn(f,b),u.callbackPriority=c,u.callbackNode=f,c}return b!==null&&b!==null&&ci(b),u.callbackPriority=2,u.callbackNode=null,2}function Z4(u,c){if(Br!==0&&Br!==5)return u.callbackNode=null,u.callbackPriority=0,null;var f=u.callbackNode;if(A2()&&u.callbackNode!==f)return null;var b=Xe;return b=M(u,u===et?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),b===0?null:(k4(u,b,c),Q4(u,Ni()),u.callbackNode!=null&&u.callbackNode===f?Z4.bind(null,u):null)}function J4(u,c){if(A2())return null;k4(u,c,!0)}function Ase(){Lse(function(){(ze&6)!==0?nn(Be,Sse):K4()})}function dC(){if(Qc===0){var u=Ls;u===0&&(u=Gr,Gr<<=1,(Gr&261888)===0&&(Gr=256)),Qc=u}return Qc}function e8(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:$f(""+u)}function t8(u,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,u.id&&f.setAttribute("form",u.id),c.parentNode.insertBefore(f,c),u=new FormData(u),f.parentNode.removeChild(f),u}function Cse(u,c,f,b,_){if(c==="submit"&&f&&f.stateNode===_){var E=e8((_[hn]||null).action),k=b.submitter;k&&(c=(c=k[hn]||null)?e8(c.formAction):k.getAttribute("formAction"),c!==null&&(E=c,k=null));var W=new ja("action","action",null,b,_);u.push({event:W,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Qc!==0){var pe=k?t8(_,k):new FormData(_);ib(f,{pending:!0,data:pe,method:_.method,action:E},null,pe)}}else typeof E=="function"&&(W.preventDefault(),pe=k?t8(_,k):new FormData(_),ib(f,{pending:!0,data:pe,method:_.method,action:E},E,pe))},currentTarget:_}]})}}for(var fC=0;fC<y0.length;fC++){var pC=y0[fC],wse=pC.toLowerCase(),Dse=pC[0].toUpperCase()+pC.slice(1);ks(wse,"on"+Dse)}ks(m0,"onAnimationEnd"),ks(gv,"onAnimationIteration"),ks(Sc,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(YA,"onTransitionRun"),ks(g0,"onTransitionStart"),ks(qA,"onTransitionCancel"),ks(b0,"onTransitionEnd"),yc("onMouseEnter",["mouseout","mouseover"]),yc("onMouseLeave",["mouseout","mouseover"]),yc("onPointerEnter",["pointerout","pointerover"]),yc("onPointerLeave",["pointerout","pointerover"]),yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yu("onBeforeInput",["compositionend","keypress","textInput","paste"]),yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ib="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rse=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ib));function i8(u,c){c=(c&4)!==0;for(var f=0;f<u.length;f++){var b=u[f],_=b.event;b=b.listeners;e:{var E=void 0;if(c)for(var k=b.length-1;0<=k;k--){var W=b[k],pe=W.instance,Ce=W.currentTarget;if(W=W.listener,pe!==E&&_.isPropagationStopped())break e;E=W,_.currentTarget=Ce;try{E(_)}catch(Oe){op(Oe)}_.currentTarget=null,E=pe}else for(k=0;k<b.length;k++){if(W=b[k],pe=W.instance,Ce=W.currentTarget,W=W.listener,pe!==E&&_.isPropagationStopped())break e;E=W,_.currentTarget=Ce;try{E(_)}catch(Oe){op(Oe)}_.currentTarget=null,E=pe}}}}function xi(u,c){var f=c[va];f===void 0&&(f=c[va]=new Set);var b=u+"__bubble";f.has(b)||(n8(c,u,2,!1),f.add(b))}function mC(u,c,f){var b=0;c&&(b|=4),n8(f,u,b,c)}var D2="_reactListening"+Math.random().toString(36).slice(2);function gC(u){if(!u[D2]){u[D2]=!0,Wg.forEach(function(f){f!=="selectionchange"&&(Rse.has(f)||mC(f,!1,u),mC(f,!0,u))});var c=u.nodeType===9?u:u.ownerDocument;c===null||c[D2]||(c[D2]=!0,mC("selectionchange",!1,c))}}function n8(u,c,f,b){switch(B8(c)){case 2:var _=nae;break;case 8:_=rae;break;default:_=MC}f=_.bind(null,c,f,u),_=void 0,!td||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),b?_!==void 0?u.addEventListener(c,f,{capture:!0,passive:_}):u.addEventListener(c,f,!0):_!==void 0?u.addEventListener(c,f,{passive:_}):u.addEventListener(c,f,!1)}function bC(u,c,f,b,_){var E=b;if((c&1)===0&&(c&2)===0&&b!==null)e:for(;;){if(b===null)return;var k=b.tag;if(k===3||k===4){var W=b.stateNode.containerInfo;if(W===_)break;if(k===4)for(k=b.return;k!==null;){var pe=k.tag;if((pe===3||pe===4)&&k.stateNode.containerInfo===_)return;k=k.return}for(;W!==null;){if(k=gc(W),k===null)return;if(pe=k.tag,pe===5||pe===6||pe===26||pe===27){b=E=k;continue e}W=W.parentNode}}b=b.return}X_(function(){var Ce=E,Oe=i0(f),Ue=[];e:{var Re=ap.get(u);if(Re!==void 0){var Pe=ja,ct=u;switch(u){case"keypress":if(Qf(f)===0)break e;case"keydown":case"keyup":Pe=OA;break;case"focusin":ct="focus",Pe=Jf;break;case"focusout":ct="blur",Pe=Jf;break;case"beforeblur":case"afterblur":Pe=Jf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=a0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=RA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=c0;break;case m0:case gv:case Sc:Pe=rd;break;case b0:Pe=LA;break;case"scroll":case"scrollend":Pe=s0;break;case"wheel":Pe=NA;break;case"copy":case"cut":case"paste":Pe=$_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=l0;break;case"toggle":case"beforetoggle":Pe=Z_}var Ft=(c&4)!==0,on=!Ft&&(u==="scroll"||u==="scrollend"),ve=Ft?Re!==null?Re+"Capture":null:Re;Ft=[];for(var xe=Ce,Se;xe!==null;){var Ie=xe;if(Se=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||Se===null||ve===null||(Ie=ed(xe,ve),Ie!=null&&Ft.push(Lb(xe,Ie,Se))),on)break;xe=xe.return}0<Ft.length&&(Re=new Pe(Re,ct,null,f,Oe),Ue.push({event:Re,listeners:Ft}))}}if((c&7)===0){e:{if(Re=u==="mouseover"||u==="pointerover",Pe=u==="mouseout"||u==="pointerout",Re&&f!==Kf&&(ct=f.relatedTarget||f.fromElement)&&(gc(ct)||ct[or]))break e;if((Pe||Re)&&(Re=Oe.window===Oe?Oe:(Re=Oe.ownerDocument)?Re.defaultView||Re.parentWindow:window,Pe?(ct=f.relatedTarget||f.toElement,Pe=Ce,ct=ct?gc(ct):null,ct!==null&&(on=s(ct),Ft=ct.tag,ct!==on||Ft!==5&&Ft!==27&&Ft!==6)&&(ct=null)):(Pe=null,ct=Ce),Pe!==ct)){if(Ft=a0,Ie="onMouseLeave",ve="onMouseEnter",xe="mouse",(u==="pointerout"||u==="pointerover")&&(Ft=l0,Ie="onPointerLeave",ve="onPointerEnter",xe="pointer"),on=Pe==null?Re:Qh(Pe),Se=ct==null?Re:Qh(ct),Re=new Ft(Ie,xe+"leave",Pe,f,Oe),Re.target=on,Re.relatedTarget=Se,Ie=null,gc(Oe)===Ce&&(Ft=new Ft(ve,xe+"enter",ct,f,Oe),Ft.target=Se,Ft.relatedTarget=on,Ie=Ft),on=Ie,Pe&&ct)t:{for(Ft=Pse,ve=Pe,xe=ct,Se=0,Ie=ve;Ie;Ie=Ft(Ie))Se++;Ie=0;for(var St=xe;St;St=Ft(St))Ie++;for(;0<Se-Ie;)ve=Ft(ve),Se--;for(;0<Ie-Se;)xe=Ft(xe),Ie--;for(;Se--;){if(ve===xe||xe!==null&&ve===xe.alternate){Ft=ve;break t}ve=Ft(ve),xe=Ft(xe)}Ft=null}else Ft=null;Pe!==null&&r8(Ue,Re,Pe,Ft,!1),ct!==null&&on!==null&&r8(Ue,on,ct,Ft,!0)}}e:{if(Re=Ce?Qh(Ce):window,Pe=Re.nodeName&&Re.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Re.type==="file")var Ui=av;else if(rv(Re))if(ld)Ui=jA;else{Ui=VA;var yt=zA}else Pe=Re.nodeName,!Pe||Pe.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?Ce&&t0(Ce.elementType)&&(Ui=av):Ui=cv;if(Ui&&(Ui=Ui(u,Ce))){sv(Ue,Ui,f,Oe);break e}yt&&yt(u,Re,Ce),u==="focusout"&&Ce&&Re.type==="number"&&Ce.memoizedProps.value!=null&&Jh(Re,"number",Re.value)}switch(yt=Ce?Qh(Ce):window,u){case"focusin":(rv(yt)||yt.contentEditable==="true")&&(Bl=yt,hd=Ce,Ec=null);break;case"focusout":Ec=hd=Bl=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,rp(Ue,f,Oe);break;case"selectionchange":if(pv)break;case"keydown":case"keyup":rp(Ue,f,Oe)}var ai;if(d0)e:{switch(u){case"compositionstart":var Ei="onCompositionStart";break e;case"compositionend":Ei="onCompositionEnd";break e;case"compositionupdate":Ei="onCompositionUpdate";break e}Ei=void 0}else Rl?tv(u,f)&&(Ei="onCompositionEnd"):u==="keydown"&&f.keyCode===229&&(Ei="onCompositionStart");Ei&&(ev&&f.locale!=="ko"&&(Rl||Ei!=="onCompositionStart"?Ei==="onCompositionEnd"&&Rl&&(ai=Y_()):(Rr=Oe,Dl="value"in Rr?Rr.value:Rr.textContent,Rl=!0)),yt=R2(Ce,Ei),0<yt.length&&(Ei=new K_(Ei,u,null,f,Oe),Ue.push({event:Ei,listeners:yt}),ai?Ei.data=ai:(ai=iv(f),ai!==null&&(Ei.data=ai)))),(ai=J_?Mn(u,f):nv(u,f))&&(Ei=R2(Ce,"onBeforeInput"),0<Ei.length&&(yt=new K_("onBeforeInput","beforeinput",null,f,Oe),Ue.push({event:yt,listeners:Ei}),yt.data=ai)),Cse(Ue,u,Ce,f,Oe)}i8(Ue,c)})}function Lb(u,c,f){return{instance:u,listener:c,currentTarget:f}}function R2(u,c){for(var f=c+"Capture",b=[];u!==null;){var _=u,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=ed(u,f),_!=null&&b.unshift(Lb(u,_,E)),_=ed(u,c),_!=null&&b.push(Lb(u,_,E))),u.tag===3)return b;u=u.return}return[]}function Pse(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function r8(u,c,f,b,_){for(var E=c._reactName,k=[];f!==null&&f!==b;){var W=f,pe=W.alternate,Ce=W.stateNode;if(W=W.tag,pe!==null&&pe===b)break;W!==5&&W!==26&&W!==27||Ce===null||(pe=Ce,_?(Ce=ed(f,E),Ce!=null&&k.unshift(Lb(f,Ce,pe))):_||(Ce=ed(f,E),Ce!=null&&k.push(Lb(f,Ce,pe)))),f=f.return}k.length!==0&&u.push({event:c,listeners:k})}var Mse=/\r\n?/g,Bse=/\u0000|\uFFFD/g;function s8(u){return(typeof u=="string"?u:""+u).replace(Mse,`
`).replace(Bse,"")}function a8(u,c){return c=s8(c),s8(u)===c}function an(u,c,f,b,_,E){switch(f){case"children":typeof b=="string"?c==="body"||c==="textarea"&&b===""||Cl(u,b):(typeof b=="number"||typeof b=="bigint")&&c!=="body"&&Cl(u,""+b);break;case"className":Zh(u,"class",b);break;case"tabIndex":Zh(u,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Zh(u,f,b);break;case"style":wl(u,b,E);break;case"data":if(c!=="object"){Zh(u,"data",b);break}case"src":case"href":if(b===""&&(c!=="a"||f!=="href")){u.removeAttribute(f);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){u.removeAttribute(f);break}b=$f(""+b),u.setAttribute(f,b);break;case"action":case"formAction":if(typeof b=="function"){u.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(f==="formAction"?(c!=="input"&&an(u,c,"name",_.name,_,null),an(u,c,"formEncType",_.formEncType,_,null),an(u,c,"formMethod",_.formMethod,_,null),an(u,c,"formTarget",_.formTarget,_,null)):(an(u,c,"encType",_.encType,_,null),an(u,c,"method",_.method,_,null),an(u,c,"target",_.target,_,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){u.removeAttribute(f);break}b=$f(""+b),u.setAttribute(f,b);break;case"onClick":b!=null&&(u.onclick=Ta);break;case"onScroll":b!=null&&xi("scroll",u);break;case"onScrollEnd":b!=null&&xi("scrollend",u);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(f=b.__html,f!=null){if(_.children!=null)throw Error(n(60));u.innerHTML=f}}break;case"multiple":u.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":u.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){u.removeAttribute("xlink:href");break}f=$f(""+b),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?u.setAttribute(f,""+b):u.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?u.setAttribute(f,""):u.removeAttribute(f);break;case"capture":case"download":b===!0?u.setAttribute(f,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?u.setAttribute(f,b):u.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?u.setAttribute(f,b):u.removeAttribute(f);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?u.removeAttribute(f):u.setAttribute(f,b);break;case"popover":xi("beforetoggle",u),xi("toggle",u),qf(u,"popover",b);break;case"xlinkActuate":Oo(u,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Oo(u,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Oo(u,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Oo(u,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Oo(u,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Oo(u,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Oo(u,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Oo(u,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Oo(u,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":qf(u,"is",b);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=wA.get(f)||f,qf(u,f,b))}}function yC(u,c,f,b,_,E){switch(f){case"style":wl(u,b,E);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(f=b.__html,f!=null){if(_.children!=null)throw Error(n(60));u.innerHTML=f}}break;case"children":typeof b=="string"?Cl(u,b):(typeof b=="number"||typeof b=="bigint")&&Cl(u,""+b);break;case"onScroll":b!=null&&xi("scroll",u);break;case"onScrollEnd":b!=null&&xi("scrollend",u);break;case"onClick":b!=null&&(u.onclick=Ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$g.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),c=f.slice(2,_?f.length-7:void 0),E=u[hn]||null,E=E!=null?E[f]:null,typeof E=="function"&&u.removeEventListener(c,E,_),typeof b=="function")){typeof E!="function"&&E!==null&&(f in u?u[f]=null:u.hasAttribute(f)&&u.removeAttribute(f)),u.addEventListener(c,b,_);break e}f in u?u[f]=b:b===!0?u.setAttribute(f,""):qf(u,f,b)}}}function rs(u,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xi("error",u),xi("load",u);var b=!1,_=!1,E;for(E in f)if(f.hasOwnProperty(E)){var k=f[E];if(k!=null)switch(E){case"src":b=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:an(u,c,E,k,f,null)}}_&&an(u,c,"srcSet",f.srcSet,f,null),b&&an(u,c,"src",f.src,f,null);return;case"input":xi("invalid",u);var W=E=k=_=null,pe=null,Ce=null;for(b in f)if(f.hasOwnProperty(b)){var Oe=f[b];if(Oe!=null)switch(b){case"name":_=Oe;break;case"type":k=Oe;break;case"checked":pe=Oe;break;case"defaultChecked":Ce=Oe;break;case"value":E=Oe;break;case"defaultValue":W=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,c));break;default:an(u,c,b,Oe,f,null)}}ts(u,E,W,pe,Ce,k,_,!1);return;case"select":xi("invalid",u),b=k=E=null;for(_ in f)if(f.hasOwnProperty(_)&&(W=f[_],W!=null))switch(_){case"value":E=W;break;case"defaultValue":k=W;break;case"multiple":b=W;default:an(u,c,_,W,f,null)}c=E,f=k,u.multiple=!!b,c!=null?_u(u,!!b,c,!1):f!=null&&_u(u,!!b,f,!0);return;case"textarea":xi("invalid",u),E=_=b=null;for(k in f)if(f.hasOwnProperty(k)&&(W=f[k],W!=null))switch(k){case"value":b=W;break;case"defaultValue":_=W;break;case"children":E=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(91));break;default:an(u,c,k,W,f,null)}e0(u,b,_,E);return;case"option":for(pe in f)if(f.hasOwnProperty(pe)&&(b=f[pe],b!=null))switch(pe){case"selected":u.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:an(u,c,pe,b,f,null)}return;case"dialog":xi("beforetoggle",u),xi("toggle",u),xi("cancel",u),xi("close",u);break;case"iframe":case"object":xi("load",u);break;case"video":case"audio":for(b=0;b<Ib.length;b++)xi(Ib[b],u);break;case"image":xi("error",u),xi("load",u);break;case"details":xi("toggle",u);break;case"embed":case"source":case"link":xi("error",u),xi("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ce in f)if(f.hasOwnProperty(Ce)&&(b=f[Ce],b!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:an(u,c,Ce,b,f,null)}return;default:if(t0(c)){for(Oe in f)f.hasOwnProperty(Oe)&&(b=f[Oe],b!==void 0&&yC(u,c,Oe,b,f,void 0));return}}for(W in f)f.hasOwnProperty(W)&&(b=f[W],b!=null&&an(u,c,W,b,f,null))}function kse(u,c,f,b){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,k=null,W=null,pe=null,Ce=null,Oe=null;for(Pe in f){var Ue=f[Pe];if(f.hasOwnProperty(Pe)&&Ue!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":pe=Ue;default:b.hasOwnProperty(Pe)||an(u,c,Pe,null,b,Ue)}}for(var Re in b){var Pe=b[Re];if(Ue=f[Re],b.hasOwnProperty(Re)&&(Pe!=null||Ue!=null))switch(Re){case"type":E=Pe;break;case"name":_=Pe;break;case"checked":Ce=Pe;break;case"defaultChecked":Oe=Pe;break;case"value":k=Pe;break;case"defaultValue":W=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,c));break;default:Pe!==Ue&&an(u,c,Re,Pe,b,Ue)}}Jg(u,k,W,pe,Ce,Oe,E,_);return;case"select":Pe=k=W=Re=null;for(E in f)if(pe=f[E],f.hasOwnProperty(E)&&pe!=null)switch(E){case"value":break;case"multiple":Pe=pe;default:b.hasOwnProperty(E)||an(u,c,E,null,b,pe)}for(_ in b)if(E=b[_],pe=f[_],b.hasOwnProperty(_)&&(E!=null||pe!=null))switch(_){case"value":Re=E;break;case"defaultValue":W=E;break;case"multiple":k=E;default:E!==pe&&an(u,c,_,E,b,pe)}c=W,f=k,b=Pe,Re!=null?_u(u,!!f,Re,!1):!!b!=!!f&&(c!=null?_u(u,!!f,c,!0):_u(u,!!f,f?[]:"",!1));return;case"textarea":Pe=Re=null;for(W in f)if(_=f[W],f.hasOwnProperty(W)&&_!=null&&!b.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:an(u,c,W,null,b,_)}for(k in b)if(_=b[k],E=f[k],b.hasOwnProperty(k)&&(_!=null||E!=null))switch(k){case"value":Re=_;break;case"defaultValue":Pe=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==E&&an(u,c,k,_,b,E)}Wf(u,Re,Pe);return;case"option":for(var ct in f)if(Re=f[ct],f.hasOwnProperty(ct)&&Re!=null&&!b.hasOwnProperty(ct))switch(ct){case"selected":u.selected=!1;break;default:an(u,c,ct,null,b,Re)}for(pe in b)if(Re=b[pe],Pe=f[pe],b.hasOwnProperty(pe)&&Re!==Pe&&(Re!=null||Pe!=null))switch(pe){case"selected":u.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:an(u,c,pe,Re,b,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ft in f)Re=f[Ft],f.hasOwnProperty(Ft)&&Re!=null&&!b.hasOwnProperty(Ft)&&an(u,c,Ft,null,b,Re);for(Ce in b)if(Re=b[Ce],Pe=f[Ce],b.hasOwnProperty(Ce)&&Re!==Pe&&(Re!=null||Pe!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(137,c));break;default:an(u,c,Ce,Re,b,Pe)}return;default:if(t0(c)){for(var on in f)Re=f[on],f.hasOwnProperty(on)&&Re!==void 0&&!b.hasOwnProperty(on)&&yC(u,c,on,void 0,b,Re);for(Oe in b)Re=b[Oe],Pe=f[Oe],!b.hasOwnProperty(Oe)||Re===Pe||Re===void 0&&Pe===void 0||yC(u,c,Oe,Re,b,Pe);return}}for(var ve in f)Re=f[ve],f.hasOwnProperty(ve)&&Re!=null&&!b.hasOwnProperty(ve)&&an(u,c,ve,null,b,Re);for(Ue in b)Re=b[Ue],Pe=f[Ue],!b.hasOwnProperty(Ue)||Re===Pe||Re==null&&Pe==null||an(u,c,Ue,Re,b,Pe)}function o8(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ose(){if(typeof performance.getEntriesByType=="function"){for(var u=0,c=0,f=performance.getEntriesByType("resource"),b=0;b<f.length;b++){var _=f[b],E=_.transferSize,k=_.initiatorType,W=_.duration;if(E&&W&&o8(k)){for(k=0,W=_.responseEnd,b+=1;b<f.length;b++){var pe=f[b],Ce=pe.startTime;if(Ce>W)break;var Oe=pe.transferSize,Ue=pe.initiatorType;Oe&&o8(Ue)&&(pe=pe.responseEnd,k+=Oe*(pe<W?1:(W-Ce)/(pe-Ce)))}if(--b,c+=8*(E+k)/(_.duration/1e3),u++,10<u)break}}if(0<u)return c/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var xC=null,_C=null;function P2(u){return u.nodeType===9?u:u.ownerDocument}function u8(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l8(u,c){if(u===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&c==="foreignObject"?0:u}function vC(u,c){return u==="textarea"||u==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var TC=null;function Fse(){var u=window.event;return u&&u.type==="popstate"?u===TC?!1:(TC=u,!0):(TC=null,!1)}var c8=typeof setTimeout=="function"?setTimeout:void 0,Ise=typeof clearTimeout=="function"?clearTimeout:void 0,h8=typeof Promise=="function"?Promise:void 0,Lse=typeof queueMicrotask=="function"?queueMicrotask:typeof h8<"u"?function(u){return h8.resolve(null).then(u).catch(Nse)}:c8;function Nse(u){setTimeout(function(){throw u})}function Zc(u){return u==="head"}function d8(u,c){var f=c,b=0;do{var _=f.nextSibling;if(u.removeChild(f),_&&_.nodeType===8)if(f=_.data,f==="/$"||f==="/&"){if(b===0){u.removeChild(_),Zp(c);return}b--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")b++;else if(f==="html")Nb(u.ownerDocument.documentElement);else if(f==="head"){f=u.ownerDocument.head,Nb(f);for(var E=f.firstChild;E;){var k=E.nextSibling,W=E.nodeName;E[Kh]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&E.rel.toLowerCase()==="stylesheet"||f.removeChild(E),E=k}}else f==="body"&&Nb(u.ownerDocument.body);f=_}while(f);Zp(c)}function f8(u,c){var f=u;u=0;do{var b=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(u===0)break;u--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||u++;f=b}while(f)}function EC(u){var c=u.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":EC(f),qg(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}u.removeChild(f)}}function Use(u,c,f,b){for(;u.nodeType===1;){var _=f;if(u.nodeName.toLowerCase()!==c.toLowerCase()){if(!b&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(b){if(!u[Kh])switch(c){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(E=u.getAttribute("rel"),E==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(E!==_.rel||u.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||u.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||u.getAttribute("title")!==(_.title==null?null:_.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(E=u.getAttribute("src"),(E!==(_.src==null?null:_.src)||u.getAttribute("type")!==(_.type==null?null:_.type)||u.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(c==="input"&&u.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&u.getAttribute("name")===E)return u}else return u;if(u=to(u.nextSibling),u===null)break}return null}function Gse(u,c,f){if(c==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!f||(u=to(u.nextSibling),u===null))return null;return u}function p8(u,c){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!c||(u=to(u.nextSibling),u===null))return null;return u}function SC(u){return u.data==="$?"||u.data==="$~"}function AC(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function Hse(u,c){var f=u.ownerDocument;if(u.data==="$~")u._reactRetry=c;else if(u.data!=="$?"||f.readyState!=="loading")c();else{var b=function(){c(),f.removeEventListener("DOMContentLoaded",b)};f.addEventListener("DOMContentLoaded",b),u._reactRetry=b}}function to(u){for(;u!=null;u=u.nextSibling){var c=u.nodeType;if(c===1||c===3)break;if(c===8){if(c=u.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return u}var CC=null;function m8(u){u=u.nextSibling;for(var c=0;u;){if(u.nodeType===8){var f=u.data;if(f==="/$"||f==="/&"){if(c===0)return to(u.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}u=u.nextSibling}return null}function g8(u){u=u.previousSibling;for(var c=0;u;){if(u.nodeType===8){var f=u.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return u;c--}else f!=="/$"&&f!=="/&"||c++}u=u.previousSibling}return null}function b8(u,c,f){switch(c=P2(f),u){case"html":if(u=c.documentElement,!u)throw Error(n(452));return u;case"head":if(u=c.head,!u)throw Error(n(453));return u;case"body":if(u=c.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Nb(u){for(var c=u.attributes;c.length;)u.removeAttributeNode(c[0]);qg(u)}var io=new Map,y8=new Set;function M2(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var $l=se.d;se.d={f:zse,r:Vse,D:jse,C:Xse,L:Yse,m:qse,X:$se,S:Wse,M:Kse};function zse(){var u=$l.f(),c=T2();return u||c}function Vse(u){var c=bu(u);c!==null&&c.tag===5&&c.type==="form"?nb(c):$l.r(u)}var $p=typeof document>"u"?null:document;function x8(u,c,f){var b=$p;if(b&&typeof c=="string"&&c){var _=es(c);_='link[rel="'+u+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),y8.has(_)||(y8.add(_),u={rel:u,crossOrigin:f,href:c},b.querySelector(_)===null&&(c=b.createElement("link"),rs(c,"link",u),gr(c),b.head.appendChild(c)))}}function jse(u){$l.D(u),x8("dns-prefetch",u,null)}function Xse(u,c){$l.C(u,c),x8("preconnect",u,c)}function Yse(u,c,f){$l.L(u,c,f);var b=$p;if(b&&u&&c){var _='link[rel="preload"][as="'+es(c)+'"]';c==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+es(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+es(f.imageSizes)+'"]')):_+='[href="'+es(u)+'"]';var E=_;switch(c){case"style":E=Kp(u);break;case"script":E=Qp(u)}io.has(E)||(u=p({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:u,as:c},f),io.set(E,u),b.querySelector(_)!==null||c==="style"&&b.querySelector(Ub(E))||c==="script"&&b.querySelector(Gb(E))||(c=b.createElement("link"),rs(c,"link",u),gr(c),b.head.appendChild(c)))}}function qse(u,c){$l.m(u,c);var f=$p;if(f&&u){var b=c&&typeof c.as=="string"?c.as:"script",_='link[rel="modulepreload"][as="'+es(b)+'"][href="'+es(u)+'"]',E=_;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Qp(u)}if(!io.has(E)&&(u=p({rel:"modulepreload",href:u},c),io.set(E,u),f.querySelector(_)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Gb(E)))return}b=f.createElement("link"),rs(b,"link",u),gr(b),f.head.appendChild(b)}}}function Wse(u,c,f){$l.S(u,c,f);var b=$p;if(b&&u){var _=bc(b).hoistableStyles,E=Kp(u);c=c||"default";var k=_.get(E);if(!k){var W={loading:0,preload:null};if(k=b.querySelector(Ub(E)))W.loading=5;else{u=p({rel:"stylesheet",href:u,"data-precedence":c},f),(f=io.get(E))&&wC(u,f);var pe=k=b.createElement("link");gr(pe),rs(pe,"link",u),pe._p=new Promise(function(Ce,Oe){pe.onload=Ce,pe.onerror=Oe}),pe.addEventListener("load",function(){W.loading|=1}),pe.addEventListener("error",function(){W.loading|=2}),W.loading|=4,B2(k,c,b)}k={type:"stylesheet",instance:k,count:1,state:W},_.set(E,k)}}}function $se(u,c){$l.X(u,c);var f=$p;if(f&&u){var b=bc(f).hoistableScripts,_=Qp(u),E=b.get(_);E||(E=f.querySelector(Gb(_)),E||(u=p({src:u,async:!0},c),(c=io.get(_))&&DC(u,c),E=f.createElement("script"),gr(E),rs(E,"link",u),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},b.set(_,E))}}function Kse(u,c){$l.M(u,c);var f=$p;if(f&&u){var b=bc(f).hoistableScripts,_=Qp(u),E=b.get(_);E||(E=f.querySelector(Gb(_)),E||(u=p({src:u,async:!0,type:"module"},c),(c=io.get(_))&&DC(u,c),E=f.createElement("script"),gr(E),rs(E,"link",u),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},b.set(_,E))}}function _8(u,c,f,b){var _=(_=Ye.current)?M2(_):null;if(!_)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Kp(f.href),f=bc(_).hoistableStyles,b=f.get(c),b||(b={type:"style",instance:null,count:0,state:null},f.set(c,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){u=Kp(f.href);var E=bc(_).hoistableStyles,k=E.get(u);if(k||(_=_.ownerDocument||_,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(u,k),(E=_.querySelector(Ub(u)))&&!E._p&&(k.instance=E,k.state.loading=5),io.has(u)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},io.set(u,f),E||Qse(_,u,f,k.state))),c&&b===null)throw Error(n(528,""));return k}if(c&&b!==null)throw Error(n(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Qp(f),f=bc(_).hoistableScripts,b=f.get(c),b||(b={type:"script",instance:null,count:0,state:null},f.set(c,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function Kp(u){return'href="'+es(u)+'"'}function Ub(u){return'link[rel="stylesheet"]['+u+"]"}function v8(u){return p({},u,{"data-precedence":u.precedence,precedence:null})}function Qse(u,c,f,b){u.querySelector('link[rel="preload"][as="style"]['+c+"]")?b.loading=1:(c=u.createElement("link"),b.preload=c,c.addEventListener("load",function(){return b.loading|=1}),c.addEventListener("error",function(){return b.loading|=2}),rs(c,"link",f),gr(c),u.head.appendChild(c))}function Qp(u){return'[src="'+es(u)+'"]'}function Gb(u){return"script[async]"+u}function T8(u,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var b=u.querySelector('style[data-href~="'+es(f.href)+'"]');if(b)return c.instance=b,gr(b),b;var _=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return b=(u.ownerDocument||u).createElement("style"),gr(b),rs(b,"style",_),B2(b,f.precedence,u),c.instance=b;case"stylesheet":_=Kp(f.href);var E=u.querySelector(Ub(_));if(E)return c.state.loading|=4,c.instance=E,gr(E),E;b=v8(f),(_=io.get(_))&&wC(b,_),E=(u.ownerDocument||u).createElement("link"),gr(E);var k=E;return k._p=new Promise(function(W,pe){k.onload=W,k.onerror=pe}),rs(E,"link",b),c.state.loading|=4,B2(E,f.precedence,u),c.instance=E;case"script":return E=Qp(f.src),(_=u.querySelector(Gb(E)))?(c.instance=_,gr(_),_):(b=f,(_=io.get(E))&&(b=p({},f),DC(b,_)),u=u.ownerDocument||u,_=u.createElement("script"),gr(_),rs(_,"link",b),u.head.appendChild(_),c.instance=_);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(b=c.instance,c.state.loading|=4,B2(b,f.precedence,u));return c.instance}function B2(u,c,f){for(var b=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=b.length?b[b.length-1]:null,E=_,k=0;k<b.length;k++){var W=b[k];if(W.dataset.precedence===c)E=W;else if(E!==_)break}E?E.parentNode.insertBefore(u,E.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(u,c.firstChild))}function wC(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.title==null&&(u.title=c.title)}function DC(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.integrity==null&&(u.integrity=c.integrity)}var k2=null;function E8(u,c,f){if(k2===null){var b=new Map,_=k2=new Map;_.set(f,b)}else _=k2,b=_.get(f),b||(b=new Map,_.set(f,b));if(b.has(u))return b;for(b.set(u,null),f=f.getElementsByTagName(u),_=0;_<f.length;_++){var E=f[_];if(!(E[Kh]||E[Gt]||u==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var k=E.getAttribute(c)||"";k=u+k;var W=b.get(k);W?W.push(E):b.set(k,[E])}}return b}function S8(u,c,f){u=u.ownerDocument||u,u.head.insertBefore(f,c==="title"?u.querySelector("head > title"):null)}function Zse(u,c,f){if(f===1||c.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return u=c.disabled,typeof c.precedence=="string"&&u==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function A8(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function Jse(u,c,f,b){if(f.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var _=Kp(b.href),E=c.querySelector(Ub(_));if(E){c=E._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(u.count++,u=O2.bind(u),c.then(u,u)),f.state.loading|=4,f.instance=E,gr(E);return}E=c.ownerDocument||c,b=v8(b),(_=io.get(_))&&wC(b,_),E=E.createElement("link"),gr(E);var k=E;k._p=new Promise(function(W,pe){k.onload=W,k.onerror=pe}),rs(E,"link",b),f.instance=E}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(u.count++,f=O2.bind(u),c.addEventListener("load",f),c.addEventListener("error",f))}}var RC=0;function eae(u,c){return u.stylesheets&&u.count===0&&I2(u,u.stylesheets),0<u.count||0<u.imgCount?function(f){var b=setTimeout(function(){if(u.stylesheets&&I2(u,u.stylesheets),u.unsuspend){var E=u.unsuspend;u.unsuspend=null,E()}},6e4+c);0<u.imgBytes&&RC===0&&(RC=62500*Ose());var _=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&I2(u,u.stylesheets),u.unsuspend)){var E=u.unsuspend;u.unsuspend=null,E()}},(u.imgBytes>RC?50:800)+c);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(b),clearTimeout(_)}}:null}function O2(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)I2(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var F2=null;function I2(u,c){u.stylesheets=null,u.unsuspend!==null&&(u.count++,F2=new Map,c.forEach(tae,u),F2=null,O2.call(u))}function tae(u,c){if(!(c.state.loading&4)){var f=F2.get(u);if(f)var b=f.get(null);else{f=new Map,F2.set(u,f);for(var _=u.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var k=_[E];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(f.set(k.dataset.precedence,k),b=k)}b&&f.set(null,b)}_=c.instance,k=_.getAttribute("data-precedence"),E=f.get(k)||b,E===b&&f.set(null,_),f.set(k,_),this.count++,b=O2.bind(this),_.addEventListener("load",b),_.addEventListener("error",b),E?E.parentNode.insertBefore(_,E.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(_,u.firstChild)),c.state.loading|=4}}var Hb={$$typeof:R,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function iae(u,c,f,b,_,E,k,W,pe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=b,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function C8(u,c,f,b,_,E,k,W,pe,Ce,Oe,Ue){return u=new iae(u,c,f,k,pe,Ce,Oe,Ue,W),c=1,E===!0&&(c|=24),E=Os(3,null,null,c),u.current=E,E.stateNode=u,c=A0(),c.refCount++,u.pooledCache=c,c.refCount++,E.memoizedState={element:b,isDehydrated:f,cache:c},vp(E),u}function w8(u){return u?(u=Cu,u):Cu}function D8(u,c,f,b,_,E){_=w8(_),b.context===null?b.context=_:b.pendingContext=_,b=ur(c),b.payload={element:f},E=E===void 0?null:E,E!==null&&(b.callback=E),f=Ka(u,b,c),f!==null&&(Js(f,u,c),zl(f,u,c))}function R8(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var f=u.retryLane;u.retryLane=f!==0&&f<c?f:c}}function PC(u,c){R8(u,c),(u=u.alternate)&&R8(u,c)}function P8(u){if(u.tag===13||u.tag===31){var c=Au(u,67108864);c!==null&&Js(c,u,67108864),PC(u,67108864)}}function M8(u){if(u.tag===13||u.tag===31){var c=wa();c=Un(c);var f=Au(u,c);f!==null&&Js(f,u,c),PC(u,c)}}var L2=!0;function nae(u,c,f,b){var _=$.T;$.T=null;var E=se.p;try{se.p=2,MC(u,c,f,b)}finally{se.p=E,$.T=_}}function rae(u,c,f,b){var _=$.T;$.T=null;var E=se.p;try{se.p=8,MC(u,c,f,b)}finally{se.p=E,$.T=_}}function MC(u,c,f,b){if(L2){var _=BC(b);if(_===null)bC(u,c,b,N2,f),k8(u,b);else if(aae(_,u,c,f,b))b.stopPropagation();else if(k8(u,b),c&4&&-1<sae.indexOf(u)){for(;_!==null;){var E=bu(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var k=Y(E.pendingLanes);if(k!==0){var W=E;for(W.pendingLanes|=2,W.entangledLanes|=2;k;){var pe=1<<31-bi(k);W.entanglements[1]|=pe,k&=~pe}Iu(E),(ze&6)===0&&(_2=Ni()+500,Fb(0))}}break;case 31:case 13:W=Au(E,2),W!==null&&Js(W,E,2),T2(),PC(E,2)}if(E=BC(b),E===null&&bC(u,c,b,N2,f),E===_)break;_=E}_!==null&&b.stopPropagation()}else bC(u,c,b,null,f)}}function BC(u){return u=i0(u),kC(u)}var N2=null;function kC(u){if(N2=null,u=gc(u),u!==null){var c=s(u);if(c===null)u=null;else{var f=c.tag;if(f===13){if(u=a(c),u!==null)return u;u=null}else if(f===31){if(u=o(c),u!==null)return u;u=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;u=null}else c!==u&&(u=null)}}return N2=u,null}function B8(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case Be:return 2;case We:return 8;case bt:case Ut:return 32;case pi:return 268435456;default:return 32}default:return 32}}var OC=!1,Jc=null,eh=null,th=null,zb=new Map,Vb=new Map,ih=[],sae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k8(u,c){switch(u){case"focusin":case"focusout":Jc=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":zb.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vb.delete(c.pointerId)}}function jb(u,c,f,b,_,E){return u===null||u.nativeEvent!==E?(u={blockedOn:c,domEventName:f,eventSystemFlags:b,nativeEvent:E,targetContainers:[_]},c!==null&&(c=bu(c),c!==null&&P8(c)),u):(u.eventSystemFlags|=b,c=u.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),u)}function aae(u,c,f,b,_){switch(c){case"focusin":return Jc=jb(Jc,u,c,f,b,_),!0;case"dragenter":return eh=jb(eh,u,c,f,b,_),!0;case"mouseover":return th=jb(th,u,c,f,b,_),!0;case"pointerover":var E=_.pointerId;return zb.set(E,jb(zb.get(E)||null,u,c,f,b,_)),!0;case"gotpointercapture":return E=_.pointerId,Vb.set(E,jb(Vb.get(E)||null,u,c,f,b,_)),!0}return!1}function O8(u){var c=gc(u.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=a(f),c!==null){u.blockedOn=c,mr(u.priority,function(){M8(f)});return}}else if(c===31){if(c=o(f),c!==null){u.blockedOn=c,mr(u.priority,function(){M8(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){u.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}u.blockedOn=null}function U2(u){if(u.blockedOn!==null)return!1;for(var c=u.targetContainers;0<c.length;){var f=BC(u.nativeEvent);if(f===null){f=u.nativeEvent;var b=new f.constructor(f.type,f);Kf=b,f.target.dispatchEvent(b),Kf=null}else return c=bu(f),c!==null&&P8(c),u.blockedOn=f,!1;c.shift()}return!0}function F8(u,c,f){U2(u)&&f.delete(c)}function oae(){OC=!1,Jc!==null&&U2(Jc)&&(Jc=null),eh!==null&&U2(eh)&&(eh=null),th!==null&&U2(th)&&(th=null),zb.forEach(F8),Vb.forEach(F8)}function G2(u,c){u.blockedOn===c&&(u.blockedOn=null,OC||(OC=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oae)))}var H2=null;function I8(u){H2!==u&&(H2=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){H2===u&&(H2=null);for(var c=0;c<u.length;c+=3){var f=u[c],b=u[c+1],_=u[c+2];if(typeof b!="function"){if(kC(b||f)===null)continue;break}var E=bu(f);E!==null&&(u.splice(c,3),c-=3,ib(E,{pending:!0,data:_,method:f.method,action:b},b,_))}}))}function Zp(u){function c(pe){return G2(pe,u)}Jc!==null&&G2(Jc,u),eh!==null&&G2(eh,u),th!==null&&G2(th,u),zb.forEach(c),Vb.forEach(c);for(var f=0;f<ih.length;f++){var b=ih[f];b.blockedOn===u&&(b.blockedOn=null)}for(;0<ih.length&&(f=ih[0],f.blockedOn===null);)O8(f),f.blockedOn===null&&ih.shift();if(f=(u.ownerDocument||u).$$reactFormReplay,f!=null)for(b=0;b<f.length;b+=3){var _=f[b],E=f[b+1],k=_[hn]||null;if(typeof E=="function")k||I8(f);else if(k){var W=null;if(E&&E.hasAttribute("formAction")){if(_=E,k=E[hn]||null)W=k.formAction;else if(kC(_)!==null)continue}else W=k.action;typeof W=="function"?f[b+1]=W:(f.splice(b,3),b-=3),I8(f)}}}function L8(){function u(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(k){return _=k})},focusReset:"manual",scroll:"manual"})}function c(){_!==null&&(_(),_=null),b||setTimeout(f,20)}function f(){if(!b&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,_=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){b=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),_!==null&&(_(),_=null)}}}function FC(u){this._internalRoot=u}z2.prototype.render=FC.prototype.render=function(u){var c=this._internalRoot;if(c===null)throw Error(n(409));var f=c.current,b=wa();D8(f,b,u,c,null,null)},z2.prototype.unmount=FC.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var c=u.containerInfo;D8(u.current,2,null,u,null,null),T2(),c[or]=null}};function z2(u){this._internalRoot=u}z2.prototype.unstable_scheduleHydration=function(u){if(u){var c=Pn();u={blockedOn:null,target:u,priority:c};for(var f=0;f<ih.length&&c!==0&&c<ih[f].priority;f++);ih.splice(f,0,u),f===0&&O8(u)}};var N8=e.version;if(N8!=="19.2.0")throw Error(n(527,N8,"19.2.0"));se.findDOMNode=function(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=h(c),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var uae={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var V2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!V2.isDisabled&&V2.supportsFiber)try{cn=V2.inject(uae),Xi=V2}catch{}}return yy.createRoot=function(u,c){if(!r(u))throw Error(n(299));var f=!1,b="",_=lb,E=cb,k=Kv;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=C8(u,1,!1,null,null,f,b,null,_,E,k,L8),u[or]=c.current,gC(u),new FC(c)},yy.hydrateRoot=function(u,c,f){if(!r(u))throw Error(n(299));var b=!1,_="",E=lb,k=cb,W=Kv,pe=null;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(k=f.onCaughtError),f.onRecoverableError!==void 0&&(W=f.onRecoverableError),f.formState!==void 0&&(pe=f.formState)),c=C8(u,1,!0,c,f??null,b,_,pe,E,k,W,L8),c.context=w8(null),f=c.current,b=wa(),b=Un(b),_=ur(b),_.callback=null,Ka(f,_,b),f=b,c.current.lanes=f,at(c,f),Iu(c),u[or]=c.current,gC(u),new z2(c)},yy.version="19.2.0",yy}var PU;function L_e(){if(PU)return ID.exports;PU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ID.exports=I_e(),ID.exports}var N_e=L_e();const rt=new __("mc",{name:"Me"}),Jt=new __("james",{name:"James",color:"#0084ac"}),Ii=new __("steph",{name:"Steph",color:"#ac5900"}),It=new __("sly",{name:"Sly",color:"#6d00ac"});M$.add([rt,Jt,Ii,It]);const U_e=zO("animation_01",[async()=>{let t=dt.animate("steph",{scaleX:1},{autoplay:!1,forceCompleteBeforeNext:!0});await LT("steph",{value:["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"],options:{xAlign:.8,yAlign:1,scale:{y:1,x:-1},anchor:.5}},{direction:"right",ease:"easeInOut",tickerIdToResume:t})}]),KT="Stephanie",MU=zO("start",[async()=>{await D$("bg","bg01-hallway"),await LT("james",{value:["m01-body","m01-eyes-smile","m01-mouth-neutral01"],options:{xAlign:.5,yAlign:1}},{direction:"right",ease:"circInOut",type:"spring"}),K.dialogue={character:Jt,text:"You're my roommate's replacement, huh?"}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),K.dialogue={character:Jt,text:"Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),K.dialogue={character:rt,text:"..."}},()=>{K.dialogue="He thrusts out his hand."},async()=>{K.requestInput({type:"string"},"Peter"),K.dialogue="What is your name?"},async()=>{rt.name=K.inputValue,await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),K.dialogue={character:Jt,text:`${Jt.name}!`}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),K.dialogue={character:rt,text:`...${rt.name}.`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),K.dialogue="I take his hand and shake."},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-wow01"]),K.dialogue={character:Jt,text:`Ooh, ${rt.name}! Nice, firm handshake!`}},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-annoy01"]),K.dialogGlue=!0,K.dialogue="The last guy always gave me the dead fish."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),K.dialogGlue=!0,K.dialogue="I already think we're gonna get along fine."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),K.dialogue={character:Jt,text:"Come on in and..."}},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-smile01"]),K.dialogue={character:Jt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-annoy01"]),K.dialogue={character:Jt,text:"I know you're both watching, come on out already!"}},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-annoy00"]),await LT("sly",{value:["fm01-body","fm01-eyes-wow","fm01-mouth-soft01"],options:{xAlign:.2,yAlign:1}},{direction:"right",ease:"anticipate"}),await LT("steph",{value:["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"],options:{xAlign:.8,yAlign:1}},{direction:"left",ease:"easeInOut"}),K.dialogue={character:It,text:"I just wanted to see what the new guy was like."}},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-smile01"]),K.dialogGlue=!0,K.dialogue=`<span class="inline-block motion-translate-y-loop-25">Hey</span>, you, ${rt.name}- be nice to our little brother,`},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-grin00"]),K.dialogGlue=!0,K.dialogue="or you'll have to deal with *us*."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-grin00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:Jt,text:`${rt.name}, this is ${It.name}.`}},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogGlue=!0,K.dialogue="Yes, that is her real name."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile00"]),K.dialogue="I put out my hand."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"I'm not shakin' your hand until I decide you're an all-right dude."}},async()=>{await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogGlue=!0,K.dialogue="Sorry, policy."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-smile00"]),K.dialogue={character:rt,text:"Fair enough, I'm a pretty scary guy, or so I've been told."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:Jt,text:`The redhead behind her is ${KT}.`}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:`Hey! Everyone calls me ${Ii.name}. I'll shake your hand.`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogue="She puts out her hand, and I take it."},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:`Thanks, good to meet you, ${KT}.`}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:Ii,text:"WOW, that is, like, the most perfect handshake I've ever had! Firm, but also gentle."}},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),K.dialogGlue=!0,K.dialogue=`${It.name}, you *gotta* shake his hand!`},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"It's just a handshake..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset01"]),K.dialogue={character:Ii,text:'<span class="inline-block animate-wave">Then just give it to him!</span>'}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset00"]),K.dialogue={character:Jt,text:`Don't worry, ${rt.name}, she's just giving you the run-down. She's kinda like a father`}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-wow01"]),K.dialogGlue=!0,K.dialogue="..."},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),K.dialogGlue=!0,K.dialogue="I mean a mother... to us."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),K.dialogue=`${It.name} thrusts her hand out to shake mine.`},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-wow01"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:It,text:"Like a father?!?!"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),K.dialogue="I'm afraid to take her hand when she's mad, but I do."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-wow01"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:It,text:"Wow, that was a good handshake..."}},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogue={character:Jt,text:"Well, I mean, you are *kinda* acting like a father."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-soft","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="Like, I can totally see it: I'm the daughter, and you as my father,"},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogGlue=!0,K.dialogue="you want to make sure I'm going out with the right guy..."},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-upset00"]),K.dialogGlue=!0,K.dialogue="or something..."},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-grin00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),K.dialogue={character:It,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-wow01"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:"...BWAHAHA!!!!!"}},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="JAMES!!!! WHAAAAT?????? YOU'RE SO AWKWARD!!!!"},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"O-*kay*, I'm gonna go get settled in-"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:Ii,text:"Wait!"}},async()=>{await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogGlue=!0,K.dialogue="I've got a gift for you!"},async()=>{await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"...?"}},async()=>{await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-upset00"]),K.dialogue={character:It,text:"It's food."}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-grin00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:Ii,text:`${It.name}!`}},async()=>{await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset01"]),K.dialogGlue=!0,K.dialogue="SPOILERS!!!!"},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-nervous00"]),R$("steph",{direction:"left",ease:"easeInOut"}),K.dialogue=`${KT} goes through the opposite door,`},async t=>{K.dialogGlue=!0,K.dialogue="and returns with a HUGE tinfoil-covered platter.",await K.call(U_e,t)},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:Jt,text:"Looks like you baked way too much again."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset01"]),K.dialogue={character:Ii,text:"He doesn't have to know that!!!"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"...thanks... um..."}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:Ii,text:"Oh! You gotta take in your luggage!"}},async()=>{K.dialogue="You want continue to the next part?",K.choices=[Fme("Yes, I want to continue",sne,{},{type:"jump"}),Lme("No, I want to stop here")]}],{onLoadingLabel:()=>{Es.backgroundLoadBundle(["fm01","fm02","m01"])}}),sne=zO("second_part",[async()=>{await D$("bg","bg02-dorm"),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue="She enters my room before I'VE even had a chance to."},async()=>{await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogGlue=!0,K.dialogue=`

...I could've just come back and gotten the platter later...`},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),K.dialogue="She sets it on a desk. I throw my two paper bags down beside the empty bed."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:"They got you a new mattress, right?"}},async()=>{await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous01"]),K.dialogGlue=!0,K.dialogue=`That last guy was a druggie, did ${Jt.name} tell you that?`},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"*We're* the reason he got expelled!"}},async()=>{await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-grin00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-upset01"]),K.dialogue={character:Ii,text:`${It.name}! If word gets out about that...`}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-grin00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-nervous01"]),K.dialogGlue=!0,K.dialogue="well, actually, it wouldn't matter, *he's* the one who shot himself up."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue="I'm fumbling for a new subject."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"So, you're all family?"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),K.dialogue="I realize too late"},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="this topic is no better:"},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:It,text:"Adopted family."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:`${It.name} and I were best friends growing up and ${Jt.name} here needed a mama, so ${It.name} adopted him!`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogue={character:Jt,text:"We're not actually related."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:Jt,text:"Yeah, I like to say that this last semester I was in *foster care*"}},async()=>{K.dialogGlue=!0,K.dialogue=`and ${It.name} picked me up somewhere in there.`},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),K.dialogue={character:It,text:`${Jt.name} is just a baby. A freshman like you!`}},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-annoy01"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:Jt,text:"And *you're* just a sophomore!"}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-wow01"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-wow01"]),K.dialogue={character:It,text:"I went to medical school for two years before coming here, I think that counts as *at least* 6 years!"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-upset00"]),K.dialogue="I'm dizzy, and my blood's rushing."},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"Um... why did you switch degrees?"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"My mom was all in the medical field,"}},async()=>{await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogGlue=!0,K.dialogue="and since I'm great with kids- I had 6-"},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-neutral01"]),await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-upset01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:Jt,text:"They were actually her siblings."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"Yeah, whatever."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogGlue=!0,K.dialogue="I tried it because I thought I'd love it,"},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-upset01"]),K.dialogGlue=!0,K.dialogue="but I HATED it!"},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogGlue=!0,K.dialogue="When we started getting into anatomy, I realized how *gross* the whole thing is. I changed diapers,"},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-annoy00"]),K.dialogGlue=!0,K.dialogue="but that's a little different from changing *livers*, know what I mean?"},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-annoy00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogue={character:It,text:"So I'm trying out architecture now."}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),K.dialogGlue=!0,K.dialogue=`What are you going for, ${rt.name}?`},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"...uh... ...just getting my Gen Eds out of the way right now..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:It,text:"Why not do that at a community college?"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:"Did you get a full ride or something?"}},async()=>{await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"...yeah..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue="I knew this wouldn't go anywhere good."},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),K.dialogue={character:It,text:"Are you going to go visit your parents on the weekend?"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:rt,text:"... .... .."}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue=".... ..... ..... ... ... .."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:Jt,text:"It's no worry if you don't,"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="mine drive me crazy so I stay here."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:It,text:"You've gotta live close by, right? Nobody comes to this college from afar, sorry, we're just not that hot of a scene."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:rt,text:"... ... .. . . .."}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue=".. . ......... ... . ... .. .... ... .. . ."},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogGlue=!0,K.dialogue=". ...... . . . . .. .. ..  .... ."},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="..."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),K.dialogue={character:It,text:"Or maybe they'll come to visit you? My siblings will do that sometimes. It's quite a sight to have all 6 of them running around here, but everyone's pretty chill about it and I trust pretty much everyone here."}},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-annoy01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:Jt,text:"At least, now that *Sven's*"}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-upset00"]),K.dialogGlue=!0,K.dialogue="gone."},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-annoy00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-upset01"]),K.dialogue={character:Ii,text:`${Jt.name}! You don't have to refer to him by name!!`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-upset00"]),K.dialogue={character:Jt,text:`Why? ${rt.name}'ll never meet him.`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-nervous01"]),K.dialogue={character:Ii,text:`Say, ${rt.name}, where's the rest of your luggage?`}},async()=>{await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:Jt,text:"Is that all your luggage?"}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-neutral01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-upset00"]),K.dialogGlue=!0,K.dialogue="Man, that sucks."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:`So... um... what are you going for, ${KT}?`}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),K.dialogue={character:Ii,text:"Oh,"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="me?"},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue="I shouldn't have asked her. I shouldn't have directed a question at her. She reminds me too much..."},async()=>{await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:"I'm going for childhood education!"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogGlue=!0,K.dialogue="Actually just have 1 more class; it wasn't available previous semester, so now I've got to take it this one!"},async()=>{await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:`I'm honestly surprised my parents are bothering to pay for me to stay in the dorms right now, but both of them want me to get the *"college experience"*.`}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:"I think I've had plenty of it already, though."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"Hey, *I* wouldn't let you go anyway."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-grin00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-nervous01"]),K.dialogue={character:Ii,text:"...we'd see each other still."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-upset00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:Jt,text:"I'm going for computer science."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"Oh, cool! You like computers?"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-upset00"]),K.dialogue={character:Jt,text:"Yeah, I used to use MS Paint all the time. Now I want to step up my game."}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-concern01"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-upset00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset00"]),K.dialogue={character:Jt,text:"I also installed Windows once. I just think computer skills are important."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-smile01"]),K.dialogue={character:It,text:`${Ii.name} and I are placing bets whether or not he'll switch degrees once he gets into the *real* classes. 

He's still just taking Gen Eds, so we won't know for at least another semester.`}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:Jt,text:`Haha, ${It.name} thinks I made a rash decision, but I think computers are what I wanna do with my life.`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset01"]),K.dialogue={character:Ii,text:`${Jt.name}, you gotta figure out what you want to *do* in computers. You're not seeing the trees for the forest.`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset00"]),K.dialogue={character:Jt,text:"...I think you said that wrong."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset01"]),K.dialogue={character:Ii,text:"No, you're always looking at these big ideas and ignoring the actual *reality* of things! Computer Science isn't just an easy degree either. I'm worried these classes are going to kill you!"}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset00"]),K.dialogue={character:Jt,text:"I'll be fine!"}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset01"]),K.dialogue={character:Ii,text:"Death."}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-neutral01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:Jt,text:`...hey ${rt.name}, are you okay?`}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-neutral00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"So, what snacks did you bring?"}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:Ii,text:"Oh!"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue="She opens the tray. Inside are cookies, brownies, candies, a pie, cake pieces..."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogGlue=!0,K.dialogue=`${Jt.name} quickly grabs a few.`},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),K.dialogGlue=!0,K.dialogue=`${It.name} takes some too.`},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:rt,text:"How do you bake all this?!"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:"Baking helps me relax. It's really no work for me, and it's a good way to unwind!"}},async()=>{await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"...I had to do all the cooking as a kid."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogue="...did I just let that slip?"},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue={character:Ii,text:"Awesome!"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="Maybe we can swap recipes sometime!"},async()=>{await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"I can do... I don't need... I mean..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:Jt,text:'"You can do?" Is that what the kids are saying today?'}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:It,text:`${Jt.name}, you *are* a kid!`}},async()=>{await U("james",["m01-body","m01-eyes-annoy","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-grin00"]),K.dialogue={character:Jt,text:`${It.name}, I am so out of the loop!`}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue={character:It,text:`Well, then, ${rt.name}, we'll have to try out your cooking someday!`}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:Ii,text:"Oh!"}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-smile01"]),K.dialogGlue=!0,K.dialogue="If you want..."},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="you can even come over today!"},async()=>{await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogGlue=!0,K.dialogue="You'll be surprised what you can make in a dorm with some know-how and tricks!"},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-smile01"]),K.dialogGlue=!0,K.dialogue="*Did you know you can make cake in a microwave?!?!*"},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue="They can see I'm stressing out. I push it all down."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"...It's fine to be scared."}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:rt,text:"?!"}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious01"]),K.dialogue={character:It,text:"I know you're an adult now, but it's okay to be scared. You don't have to feel ashamed of feeling. It's okay to feel."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-nervous00"]),K.dialogue="...they have no idea. But I'm glad."},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-grin00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:It,text:"...that's right."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-smile00"]),K.dialogue={character:Jt,text:`...who told you you're a scary guy, ${rt.name}?`}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogGlue=!0,K.dialogue="You don't seem scary at all."},()=>{K.dialogue={character:rt,text:"My mom."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue="I just said that."},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="Why?"},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),K.dialogue="Crap. Crap crap crap. Why am I crying?"},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous01"]),K.dialogue={character:Ii,text:"Are you okay?"}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue=`${It.name} comes over and sits down beside me. She locks eyes with me.`},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-concern00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"...why are you scary?"}},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-annoy00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"Is that why your parents sent you here?"}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-annoy01"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),K.dialogue={character:Jt,text:`${It.name}!`}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-concern00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous01"]),K.dialogue={character:Ii,text:"...I can't imagine being told by your own *mother* you're scary."}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-concern00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-nervous01"]),K.dialogue={character:Ii,text:"...but if you really *were*, I suspect you wouldn't be here."}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-smile01"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-upset00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-smile00"]),K.dialogue={character:Jt,text:"...Right?"}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogue="...I want to run. But I don't know this place; there's nowhere *to* run. And I can't lose this room... So the best I can do is make *them* run."},async()=>{await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue="By telling them the truth."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),K.dialogue={character:rt,text:"...I'm the reason..."}},()=>{K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-neutral00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),K.dialogue="If I tell them the truth, they'll leave me alone."},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogue="...and I won't risk hurting any of *them* too."},()=>{K.dialogue={character:rt,text:"...Mom committed suicide because of me..."}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-concern00"]),await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue="..."},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue="...why don't they leave?"},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-concern00"]),K.dialogue=`That's right, ${It.name}'s looking out for ${Jt.name}.`},()=>{K.dialogue="If I don't share *everything* now, she's going to get me framed for something and I won't have a place to live anymore."},()=>{K.dialogue={character:rt,text:"...she was..."}},async()=>{await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-concern00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogue="They just look at me sadly."},()=>{K.dialogue={character:rt,text:"...addicted to heroin and I couldn't tell *anyone*."}},()=>{K.dialogue={character:rt,text:"...told me she'd gut me like a pig if I did."}},()=>{K.dialogue={character:rt,text:"I recommended to her..."}},()=>{K.dialogue={character:rt,text:"..."}},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),K.dialogue={character:rt,text:`...I recommend to her "why don't you end this?" I told her I *hated* her.`}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="*And* what she did to my little sister..."},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-concern00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-upset00"]),K.dialogue="Crap, now I look like the villain again. But I *am*. Aren't I?"},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset00"]),K.dialogue={character:rt,text:"...she sold all of my sister's dolls, toys, school supplies, for dirt cheap just to try to get another fix. She started stealing; she got in with the wrong crowd. She wanted out."}},async()=>{await U("james",["m01-body","m01-eyes-concern","m01-mouth-concern00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"The police were coming though, because... because I called them. Because mean people were coming to hurt Mom."}},async()=>{await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"She couldn't have that. I'd just royally"}},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogGlue=!0,K.dialogue="$%*@!& up, and"},async()=>{await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogGlue=!0,K.dialogue="she threatened to *kill* me, but... she couldn't bring herself to do it."},()=>{K.dialogue={character:rt,text:"She had a few days' supply of heroin. She..."}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-concern00"]),await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogGlue=!0,K.dialogue="she took it all at once."},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-wow01"]),K.dialogue={character:rt,text:`Locked herself in her room. Screamed at me, "You hate me anyway!" and wouldn't stop screaming it, even though I begged her to come out.`}},async()=>{await U("james",["m01-body","m01-eyes-wow","m01-mouth-cry00"]),K.dialogue={character:rt,text:"Those were the last words I heard from her."}},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"My sister and I were taken to be put into foster care. We were told we would be together,"}},async()=>{K.dialogGlue=!0,K.dialogue="but we were put into separate homes."},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"...nobody wanted to adopt me; I was 15 at the time my mom killed herself. Teens don't get adopted."}},()=>{K.dialogue={character:rt,text:"And when the first potential couple came in and heard about my story, they blamed"}},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-nervous00"]),K.dialogGlue=!0,K.dialogue="me for everything-"},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious01"]),await U("steph",["fm02-body","fm02-eyes-upset","fm02-mouth-upset00"]),K.dialogGlue=!0,K.dialogue='called me a "demon spawn"- and left'},async()=>{await U("sly",["fm01-body","fm01-eyes-wow","fm01-mouth-serious00"]),K.dialogGlue=!0,K.dialogue="in a huff."},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-serious00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-upset00"]),K.dialogue={character:rt,text:"...I never got another chance."}},()=>{K.dialogue={character:rt,text:"I only have a place to live here now because I was a good student. But who knows about next semester, or next year? Or once I graduate?"}},()=>{K.dialogue={character:rt,text:"I'm amazed that I got a room at all; just two weeks ago they said there was *nothing*."}},()=>{K.dialogue={character:rt,text:"...so there. Have I finally scared you away?"}},async()=>{await U("james",["m01-body","m01-eyes-cry","m01-mouth-cry00"]),await U("sly",["fm01-body","fm01-eyes-soft","fm01-mouth-soft00"]),await U("steph",["fm02-body","fm02-eyes-bawl","fm02-mouth-cry01"]),K.dialogue={character:rt,text:"I don't want to look at any of them."}},()=>{K.dialogue={character:rt,text:"A hand gently rubs my back."}},()=>{K.dialogue={character:It,text:"You don't really want us to leave, do you?"}},()=>{K.dialogue={character:rt,text:"?!?!"}},()=>{K.dialogue={character:It,text:"..."}},()=>{K.dialogue={character:It,text:"...because if you're willing to be honest about whether you want to be here with us or alone elsewhere, *we're* willing to help you either way."}},()=>{K.dialogue={character:It,text:"It wasn't your fault."}},()=>{K.dialogue="I burst out crying."},()=>{K.dialogue={character:rt,text:"...I look like such an idiot."}},()=>{K.dialogue={character:It,text:"No you don't. And you probably saved your *and* your little sister's lives. If the people coming for your mom had gotten to your house, who *knows* what they would have done to you both."}},()=>{K.dialogue="I can't stop."},()=>{K.dialogue={character:Ii,text:"You did the best you knew how."}},()=>{K.dialogue="I feel a tissue press against my hands. I suddenly realize that snot is dripping through my fingers. Gross."},async()=>{await U("james",["m01-body","m01-eyes-cry","m01-mouth-smile01"]),K.dialogue={character:Jt,text:"I cried for like a week when I first came. These two are champs, don't worry about it."}},async()=>{await U("james",["m01-body","m01-eyes-cry","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-soft","fm01-mouth-soft01"]),await U("steph",["fm02-body","fm02-eyes-bawl","fm02-mouth-cry01"]),K.dialogue={character:It,text:"So, be honest with us right now."}},async()=>{await U("james",["m01-body","m01-eyes-cry","m01-mouth-neutral00"]),K.dialogGlue=!0,K.dialogue=`*Do you* want to stick around us for a while? Or, do you truly want to be left alone? Because we're all willing to deal with this "very dangerous" person.`},async()=>{await U("steph",["fm02-body","fm02-eyes-bawl","fm02-mouth-nervous01"]),K.dialogue={character:It,text:"Will you be honest with your feelings and with us?"}},async()=>{await U("sly",["fm01-body","fm01-eyes-soft","fm01-mouth-soft00"]),K.dialogue={character:rt,text:"...yes."}},async()=>{await U("james",["m01-body","m01-eyes-cry","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-soft","fm01-mouth-soft01"]),await U("steph",["fm02-body","fm02-eyes-bawl","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"Are you willing to try being a friend and having friends?"}},async()=>{await U("sly",["fm01-body","fm01-eyes-soft","fm01-mouth-soft00"]),await U("steph",["fm02-body","fm02-eyes-nervous","fm02-mouth-nervous00"]),K.dialogue={character:rt,text:"..."}},async()=>{await U("sly",["fm01-body","fm01-eyes-upset","fm01-mouth-soft01"]),await U("steph",["fm02-body","fm02-eyes-wow","fm02-mouth-nervous00"]),K.dialogue={character:It,text:"Because I'm willing to give you a shot."}},async()=>{await U("james",["m01-body","m01-eyes-grin","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-smile","fm01-mouth-soft00"]),await U("steph",["fm02-body","fm02-eyes-smile","fm02-mouth-smile00"]),K.dialogue={character:rt,text:"...absolutely."}},async()=>{await U("sly",["fm01-body","fm01-eyes-soft","fm01-mouth-soft00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile00"]),K.dialogue="I feel lighter. A wave of something I'm not sure I've ever felt washes over me."},()=>{K.dialogue="It's peace; it's rest; it's something different."},()=>{K.dialogue="Like, even though it'll be hard, maybe I could actually be open here."},()=>{K.dialogue="I think this is the beginning of what people call..."},async()=>{await U("james",["m01-body","m01-eyes-smile","m01-mouth-smile00"]),await U("sly",["fm01-body","fm01-eyes-grin","fm01-mouth-grin00"]),await U("steph",["fm02-body","fm02-eyes-joy","fm02-mouth-smile01"]),K.dialogue="...freedom..."}]);var M_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},G_e={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},H_e=class{#e=G_e;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},lf=new H_e;function z_e(t){setTimeout(t,0)}var Tf=typeof window>"u"||"Deno"in globalThis;function oa(){}function V_e(t,e){return typeof t=="function"?t(e):t}function KM(t){return typeof t=="number"&&t>=0&&t!==1/0}function ane(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ph(t,e){return typeof t=="function"?t(e):t}function fo(t,e){return typeof t=="function"?t(e):t}function BU(t,e){const{type:i="all",exact:n,fetchStatus:r,predicate:s,queryKey:a,stale:o}=t;if(a){if(n){if(e.queryHash!==e4(a,e.options))return!1}else if(!Wx(e.queryKey,a))return!1}if(i!=="all"){const l=e.isActive();if(i==="active"&&!l||i==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||s&&!s(e))}function kU(t,e){const{exact:i,status:n,predicate:r,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(i){if(qx(e.options.mutationKey)!==qx(s))return!1}else if(!Wx(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function e4(t,e){return(e?.queryKeyHashFn||qx)(t)}function qx(t){return JSON.stringify(t,(e,i)=>ZM(i)?Object.keys(i).sort().reduce((n,r)=>(n[r]=i[r],n),{}):i)}function Wx(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(i=>Wx(t[i],e[i])):!1}var j_e=Object.prototype.hasOwnProperty;function one(t,e){if(t===e)return t;const i=OU(t)&&OU(e);if(!i&&!(ZM(t)&&ZM(e)))return e;const r=(i?t:Object.keys(t)).length,s=i?e:Object.keys(e),a=s.length,o=i?new Array(a):{};let l=0;for(let h=0;h<a;h++){const d=i?h:s[h],p=t[d],g=e[d];if(p===g){o[d]=p,(i?h<r:j_e.call(t,d))&&l++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){o[d]=g;continue}const y=one(p,g);o[d]=y,y===p&&l++}return r===a&&l===r?t:o}function QM(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}function OU(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ZM(t){if(!FU(t))return!1;const e=t.constructor;if(e===void 0)return!0;const i=e.prototype;return!(!FU(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function FU(t){return Object.prototype.toString.call(t)==="[object Object]"}function X_e(t){return new Promise(e=>{lf.setTimeout(e,t)})}function JM(t,e,i){return typeof i.structuralSharing=="function"?i.structuralSharing(t,e):i.structuralSharing!==!1?one(t,e):e}function Y_e(t,e,i=0){const n=[...t,e];return i&&n.length>i?n.slice(1):n}function q_e(t,e,i=0){const n=[e,...t];return i&&n.length>i?n.slice(0,-1):n}var t4=Symbol();function une(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===t4?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function W_e(t,e){return typeof t=="function"?t(...e):!!t}var $_e=class extends M_{#e;#t;#i;constructor(){super(),this.#i=t=>{if(!Tf&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#i=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},i4=new $_e;function eB(){let t,e;const i=new Promise((r,s)=>{t=r,e=s});i.status="pending",i.catch(()=>{});function n(r){Object.assign(i,r),delete i.resolve,delete i.reject}return i.resolve=r=>{n({status:"fulfilled",value:r}),t(r)},i.reject=r=>{n({status:"rejected",reason:r}),e(r)},i}var K_e=z_e;function Q_e(){let t=[],e=0,i=o=>{o()},n=o=>{o()},r=K_e;const s=o=>{e?t.push(o):r(()=>{i(o)})},a=()=>{const o=t;t=[],o.length&&r(()=>{n(()=>{o.forEach(l=>{i(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{s(()=>{o(...l)})},schedule:s,setNotifyFunction:o=>{i=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{r=o}}}var us=Q_e(),Z_e=class extends M_{#e=!0;#t;#i;constructor(){super(),this.#i=t=>{if(!Tf&&window.addEventListener){const e=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#i=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(i=>{i(t)}))}isOnline(){return this.#e}},XE=new Z_e;function J_e(t){return Math.min(1e3*2**t,3e4)}function lne(t){return(t??"online")==="online"?XE.isOnline():!0}var tB=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function cne(t){let e=!1,i=0,n;const r=eB(),s=()=>r.status!=="pending",a=S=>{if(!s()){const T=new tB(S);g(T),t.onCancel?.(T)}},o=()=>{e=!0},l=()=>{e=!1},h=()=>i4.isFocused()&&(t.networkMode==="always"||XE.isOnline())&&t.canRun(),d=()=>lne(t.networkMode)&&t.canRun(),p=S=>{s()||(n?.(),r.resolve(S))},g=S=>{s()||(n?.(),r.reject(S))},y=()=>new Promise(S=>{n=T=>{(s()||h())&&S(T)},t.onPause?.()}).then(()=>{n=void 0,s()||t.onContinue?.()}),v=()=>{if(s())return;let S;const T=i===0?t.initialPromise:void 0;try{S=T??t.fn()}catch(A){S=Promise.reject(A)}Promise.resolve(S).then(p).catch(A=>{if(s())return;const D=t.retry??(Tf?0:3),R=t.retryDelay??J_e,B=typeof R=="function"?R(i,A):R,z=D===!0||typeof D=="number"&&i<D||typeof D=="function"&&D(i,A);if(e||!z){g(A);return}i++,t.onFail?.(i,A),X_e(B).then(()=>h()?void 0:y()).then(()=>{e?g(A):v()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(n?.(),r),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?v():y().then(v),r)}}var hne=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KM(this.gcTime)&&(this.#e=lf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Tf?1/0:300*1e3))}clearGcTimeout(){this.#e&&(lf.clearTimeout(this.#e),this.#e=void 0)}},eve=class extends hne{#e;#t;#i;#r;#n;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#i=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=IU(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=IU(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#i.remove(this)}setData(t,e){const i=JM(this.state.data,t,this.options);return this.#s({data:i,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),i}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(oa).catch(oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>fo(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===t4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ph(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ane(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#i.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const o=this.observers.find(l=>l.options.queryFn);o&&this.setOptions(o.options)}const i=new AbortController,n=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#a=!0,i.signal)})},r=()=>{const o=une(this.options,e),h=(()=>{const d={client:this.#r,queryKey:this.queryKey,meta:this.meta};return n(d),d})();return this.#a=!1,this.options.persister?this.options.persister(o,h,this):o(h)},a=(()=>{const o={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return n(o),o})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta}),this.#n=cne({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:o=>{o instanceof tB&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(o,l)=>{this.#s({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const o=await this.#n.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#i.config.onSuccess?.(o,this),this.#i.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof tB){if(o.silent)return this.#n.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#i.config.onError?.(o,this),this.#i.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(t){const e=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...dne(i.data,this.options),fetchMeta:t.meta??null};case"success":const n={...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const r=t.error;return{...i,error:r,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=e(this.state),us.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#i.notify({query:this,type:"updated",action:t})})}};function dne(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lne(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function IU(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,i=e!==void 0,n=i?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var tve=class extends M_{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#a=eB(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#i=void 0;#r=void 0;#n;#o;#a;#s;#m;#d;#f;#l;#c;#u;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),LU(this.#t,this.options)?this.#h():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return iB(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return iB(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#v(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,i=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#T(),this.#t.setOptions(this.options),e._defaulted&&!QM(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&NU(this.#t,i,this.options,e)&&this.#h(),this.updateResult(),n&&(this.#t!==i||fo(this.options.enabled,this.#t)!==fo(e.enabled,this.#t)||Ph(this.options.staleTime,this.#t)!==Ph(e.staleTime,this.#t))&&this.#g();const r=this.#b();n&&(this.#t!==i||fo(this.options.enabled,this.#t)!==fo(e.enabled,this.#t)||r!==this.#u)&&this.#y(r)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),i=this.createResult(e,t);return nve(this,i)&&(this.#r=i,this.#o=this.options,this.#n=this.#t.state),i}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(i,n)=>(this.trackProp(n),e?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,n))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),i=this.#e.getQueryCache().build(this.#e,e);return i.fetch().then(()=>this.createResult(i,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#T();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(oa)),e}#g(){this.#_();const t=Ph(this.options.staleTime,this.#t);if(Tf||this.#r.isStale||!KM(t))return;const i=ane(this.#r.dataUpdatedAt,t)+1;this.#l=lf.setTimeout(()=>{this.#r.isStale||this.updateResult()},i)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#v(),this.#u=t,!(Tf||fo(this.options.enabled,this.#t)===!1||!KM(this.#u)||this.#u===0)&&(this.#c=lf.setInterval(()=>{(this.options.refetchIntervalInBackground||i4.isFocused())&&this.#h()},this.#u))}#x(){this.#g(),this.#y(this.#b())}#_(){this.#l&&(lf.clearTimeout(this.#l),this.#l=void 0)}#v(){this.#c&&(lf.clearInterval(this.#c),this.#c=void 0)}createResult(t,e){const i=this.#t,n=this.options,r=this.#r,s=this.#n,a=this.#o,l=t!==i?t.state:this.#i,{state:h}=t;let d={...h},p=!1,g;if(e._optimisticResults){const te=this.hasListeners(),j=!te&&LU(t,e),O=te&&NU(t,i,e,n);(j||O)&&(d={...d,...dne(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:S}=d;g=d.data;let T=!1;if(e.placeholderData!==void 0&&g===void 0&&S==="pending"){let te;r?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(te=r.data,T=!0):te=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,te!==void 0&&(S="success",g=JM(r?.data,te,e),p=!0)}if(e.select&&g!==void 0&&!T)if(r&&g===s?.data&&e.select===this.#m)g=this.#d;else try{this.#m=e.select,g=e.select(g),g=JM(r?.data,g,e),this.#d=g,this.#s=null}catch(te){this.#s=te}this.#s&&(y=this.#s,g=this.#d,v=Date.now(),S="error");const A=d.fetchStatus==="fetching",D=S==="pending",R=S==="error",B=D&&A,z=g!==void 0,H={status:S,fetchStatus:d.fetchStatus,isPending:D,isSuccess:S==="success",isError:R,isInitialLoading:B,isLoading:B,data:g,dataUpdatedAt:d.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:A,isRefetching:A&&!D,isLoadingError:R&&!z,isPaused:d.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:R&&z,isStale:n4(t,e),refetch:this.refetch,promise:this.#a,isEnabled:fo(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const te=q=>{H.status==="error"?q.reject(H.error):H.data!==void 0&&q.resolve(H.data)},j=()=>{const q=this.#a=H.promise=eB();te(q)},O=this.#a;switch(O.status){case"pending":t.queryHash===i.queryHash&&te(O);break;case"fulfilled":(H.status==="error"||H.data!==O.value)&&j();break;case"rejected":(H.status!=="error"||H.error!==O.reason)&&j();break}}return H}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#o=this.options,this.#n.data!==void 0&&(this.#f=this.#t),QM(e,t))return;this.#r=e;const i=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,r=typeof n=="function"?n():n;if(r==="all"||!r&&!this.#p.size)return!0;const s=new Set(r??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#r).some(a=>{const o=a;return this.#r[o]!==t[o]&&s.has(o)})};this.#E({listeners:i()})}#T(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#i=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#E(t){us.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ive(t,e){return fo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function LU(t,e){return ive(t,e)||t.state.data!==void 0&&iB(t,e,e.refetchOnMount)}function iB(t,e,i){if(fo(e.enabled,t)!==!1&&Ph(e.staleTime,t)!=="static"){const n=typeof i=="function"?i(t):i;return n==="always"||n!==!1&&n4(t,e)}return!1}function NU(t,e,i,n){return(t!==e||fo(n.enabled,t)===!1)&&(!i.suspense||t.state.status!=="error")&&n4(t,i)}function n4(t,e){return fo(e.enabled,t)!==!1&&t.isStaleByTime(Ph(e.staleTime,t))}function nve(t,e){return!QM(t.getCurrentResult(),e)}function UU(t){return{onFetch:(e,i)=>{const n=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const h=async()=>{let d=!1;const p=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},g=une(e.options,e.fetchOptions),y=async(v,S,T)=>{if(d)return Promise.reject();if(S==null&&v.pages.length)return Promise.resolve(v);const D=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:S,direction:T?"backward":"forward",meta:e.options.meta};return p(L),L})(),R=await g(D),{maxPages:B}=e.options,z=T?q_e:Y_e;return{pages:z(v.pages,R,B),pageParams:z(v.pageParams,S,B)}};if(r&&s.length){const v=r==="backward",S=v?rve:GU,T={pages:s,pageParams:a},A=S(n,T);o=await y(T,A,v)}else{const v=t??s.length;do{const S=l===0?a[0]??n.initialPageParam:GU(n,o);if(l>0&&S==null)break;o=await y(o,S),l++}while(l<v)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},i):e.fetchFn=h}}}function GU(t,{pages:e,pageParams:i}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,i[n],i):void 0}function rve(t,{pages:e,pageParams:i}){return e.length>0?t.getPreviousPageParam?.(e[0],e,i[0],i):void 0}var sve=class extends hne{#e;#t;#i;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#i=t.mutationCache,this.#t=[],this.state=t.state||ave(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#i.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#i.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})},i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=cne({fn:()=>this.options.mutationFn?this.options.mutationFn(t,i):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#n({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#i.canRun(this)});const n=this.state.status==="pending",r=!this.#r.canStart();try{if(n)e();else{this.#n({type:"pending",variables:t,isPaused:r}),await this.#i.config.onMutate?.(t,this,i);const a=await this.options.onMutate?.(t,i);a!==this.state.context&&this.#n({type:"pending",context:a,variables:t,isPaused:r})}const s=await this.#r.start();return await this.#i.config.onSuccess?.(s,t,this.state.context,this,i),await this.options.onSuccess?.(s,t,this.state.context,i),await this.#i.config.onSettled?.(s,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(s,null,t,this.state.context,i),this.#n({type:"success",data:s}),s}catch(s){try{throw await this.#i.config.onError?.(s,t,this.state.context,this,i),await this.options.onError?.(s,t,this.state.context,i),await this.#i.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,s,t,this.state.context,i),s}finally{this.#n({type:"error",error:s})}}finally{this.#i.runNext(this)}}#n(t){const e=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),us.batch(()=>{this.#t.forEach(i=>{i.onMutationUpdate(t)}),this.#i.notify({mutation:this,type:"updated",action:t})})}};function ave(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ove=class extends M_{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#i=0}#e;#t;#i;build(t,e,i){const n=new sve({client:t,mutationCache:this,mutationId:++this.#i,options:t.defaultMutationOptions(e),state:i});return this.add(n),n}add(t){this.#e.add(t);const e=rT(t);if(typeof e=="string"){const i=this.#t.get(e);i?i.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=rT(t);if(typeof e=="string"){const i=this.#t.get(e);if(i)if(i.length>1){const n=i.indexOf(t);n!==-1&&i.splice(n,1)}else i[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=rT(t);if(typeof e=="string"){const n=this.#t.get(e)?.find(r=>r.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=rT(t);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){us.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(i=>kU(e,i))}findAll(t={}){return this.getAll().filter(e=>kU(t,e))}notify(t){us.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return us.batch(()=>Promise.all(t.map(e=>e.continue().catch(oa))))}};function rT(t){return t.options.scope?.id}var uve=class extends M_{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,i){const n=e.queryKey,r=e.queryHash??e4(n,e);let s=this.get(r);return s||(s=new eve({client:t,queryKey:n,queryHash:r,options:t.defaultQueryOptions(e),state:i,defaultOptions:t.getQueryDefaults(n)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){us.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(i=>BU(e,i))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(i=>BU(t,i)):e}notify(t){us.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){us.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){us.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},lve=class{#e;#t;#i;#r;#n;#o;#a;#s;constructor(t={}){this.#e=t.queryCache||new uve,this.#t=t.mutationCache||new ove,this.#i=t.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=i4.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=XE.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),i=this.#e.build(this,e),n=i.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&i.isStaleByTime(Ph(e.staleTime,i))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:i})=>{const n=i.data;return[e,n]})}setQueryData(t,e,i){const n=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(n.queryHash)?.state.data,a=V_e(e,s);if(a!==void 0)return this.#e.build(this,n).setData(a,{...i,manual:!0})}setQueriesData(t,e,i){return us.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,i)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;us.batch(()=>{e.findAll(t).forEach(i=>{e.remove(i)})})}resetQueries(t,e){const i=this.#e;return us.batch(()=>(i.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const i={revert:!0,...e},n=us.batch(()=>this.#e.findAll(t).map(r=>r.cancel(i)));return Promise.all(n).then(oa).catch(oa)}invalidateQueries(t,e={}){return us.batch(()=>(this.#e.findAll(t).forEach(i=>{i.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const i={...e,cancelRefetch:e.cancelRefetch??!0},n=us.batch(()=>this.#e.findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let s=r.fetch(void 0,i);return i.throwOnError||(s=s.catch(oa)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(oa)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const i=this.#e.build(this,e);return i.isStaleByTime(Ph(e.staleTime,i))?i.fetch(e):Promise.resolve(i.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(oa).catch(oa)}fetchInfiniteQuery(t){return t.behavior=UU(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(oa).catch(oa)}ensureInfiniteQueryData(t){return t.behavior=UU(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return XE.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#i}setDefaultOptions(t){this.#i=t}setQueryDefaults(t,e){this.#r.set(qx(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],i={};return e.forEach(n=>{Wx(t,n.queryKey)&&Object.assign(i,n.defaultOptions)}),i}setMutationDefaults(t,e){this.#n.set(qx(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#n.values()],i={};return e.forEach(n=>{Wx(t,n.mutationKey)&&Object.assign(i,n.defaultOptions)}),i}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#i.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=e4(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===t4&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#i.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},rr=dA(),fne=rr.createContext(void 0),r4=t=>{const e=rr.useContext(fne);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},cve=({client:t,children:e})=>(rr.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),un.jsx(fne.Provider,{value:t,children:e})),pne=rr.createContext(!1),hve=()=>rr.useContext(pne);pne.Provider;function dve(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var fve=rr.createContext(dve()),pve=()=>rr.useContext(fve),mve=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},gve=t=>{rr.useEffect(()=>{t.clearReset()},[t])},bve=({result:t,errorResetBoundary:e,throwOnError:i,query:n,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(r&&t.data===void 0||W_e(i,[t.error,n])),yve=t=>{if(t.suspense){const i=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>i(n(...r)):i(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},xve=(t,e)=>t.isLoading&&t.isFetching&&!e,_ve=(t,e)=>t?.suspense&&e.isPending,HU=(t,e,i)=>e.fetchOptimistic(t).catch(()=>{i.clearReset()});function vve(t,e,i){const n=hve(),r=pve(),s=r4(),a=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=n?"isRestoring":"optimistic",yve(a),mve(a,r),gve(r);const o=!s.getQueryCache().get(a.queryHash),[l]=rr.useState(()=>new e(s,a)),h=l.getOptimisticResult(a),d=!n&&t.subscribed!==!1;if(rr.useSyncExternalStore(rr.useCallback(p=>{const g=d?l.subscribe(us.batchCalls(p)):oa;return l.updateResult(),g},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),rr.useEffect(()=>{l.setOptions(a)},[a,l]),_ve(a,h))throw HU(a,l,r);if(bve({result:h,errorResetBoundary:r,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(a,h),a.experimental_prefetchInRender&&!Tf&&xve(h,n)&&(o?HU(a,l,r):s.getQueryCache().get(a.queryHash)?.promise)?.catch(oa).finally(()=>{l.updateResult()}),a.notifyOnChangeProps?h:l.trackResult(h)}function B_(t,e){return vve(t,tve)}const ll="interface_data_use_quey_key",Tve="can_go_back_use_quey_key";function Eve(){return B_({queryKey:[ll,Tve],queryFn:async()=>xh.canGoBack})}const Sve="choice_menu_options_use_quey_key";function Ave(){return B_({queryKey:[ll,Sve],queryFn:async()=>K.choices?.map(t=>({...t,text:typeof t.text=="string"?t.text:t.text.join(" ")}))||[]})}const Cve="input_value_use_quey_key";function wve(){return B_({queryKey:[ll,Cve],queryFn:async()=>({isRequired:K.isRequiredInput,type:K.inputType,currentValue:K.inputValue})})}const Dve="dialogue_use_quey_key";function mne(){return B_({queryKey:[ll,Dve],queryFn:async()=>{let t=K.dialogue,e=t?.text;Array.isArray(e)&&(e=e.join(" "));let i=t?.character;return typeof i=="string"&&(i=new __(i,{name:i})),{text:e,character:i}}})}const Rve="can_go_next_use_quey_key";function gne(){return B_({queryKey:[ll,Rve],queryFn:async()=>K.canGoNext&&!K.isRequiredInput})}function bne(){const t=r4(),e={},i=rr.useCallback(async()=>{try{return K.canGoNext?K.continue(e).then(()=>t.invalidateQueries({queryKey:[ll]})).catch(s=>console.error(s)):void 0}catch(s){console.error(s);return}},[e,t]),n=rr.useCallback(async()=>xh.back(s=>{}).then(()=>t.invalidateQueries({queryKey:[ll]})).catch(s=>console.error(s)),[e,t]),r=rr.useCallback(async s=>K.selectChoice(s,e).then(()=>t.invalidateQueries({queryKey:[ll]})).catch(a=>console.error(a)),[e,t]);return{goNext:i,goBack:n,selectChoice:r}}function Pve(){const{data:t=!1}=gne(),[e,i]=rr.useState(!1),{goNext:n}=bne();return t?un.jsx("button",{onClick:()=>{i(!0),n().then(()=>i(!1)).catch(()=>i(!1))},disabled:e,style:{width:40,height:20,pointerEvents:"auto"},children:"Next"}):null}function Mve(){const{data:{text:t}={}}=mne(),{data:{isRequired:e,currentValue:i}={currentValue:void 0,isRequired:!1}}=wve(),[n,r]=rr.useState(),s=r4();return un.jsxs("dialog",{open:e,style:{pointerEvents:"auto"},children:[un.jsx("p",{children:t}),e&&un.jsx("input",{defaultValue:i||"",onChange:a=>{if(a&&a.target&&"value"in a.target){let o=a.target.value;"type"in a.target&&a.target.type==="number"&&"valueAsNumber"in a.target&&(o=a.target.valueAsNumber),r(o)}}}),un.jsx("button",{onClick:()=>{K.inputValue=n||i,r(void 0),s.invalidateQueries({queryKey:[ll]})},children:"Confirm"})]})}const yne=-1,fA=0,ux=1,YE=2,s4=3,a4=4,o4=5,u4=6,xne=7,_ne=8,zU=typeof self=="object"?self:globalThis,Bve=(t,e)=>{const i=(r,s)=>(t.set(s,r),r),n=r=>{if(t.has(r))return t.get(r);const[s,a]=e[r];switch(s){case fA:case yne:return i(a,r);case ux:{const o=i([],r);for(const l of a)o.push(n(l));return o}case YE:{const o=i({},r);for(const[l,h]of a)o[n(l)]=n(h);return o}case s4:return i(new Date(a),r);case a4:{const{source:o,flags:l}=a;return i(new RegExp(o,l),r)}case o4:{const o=i(new Map,r);for(const[l,h]of a)o.set(n(l),n(h));return o}case u4:{const o=i(new Set,r);for(const l of a)o.add(n(l));return o}case xne:{const{name:o,message:l}=a;return i(new zU[o](l),r)}case _ne:return i(BigInt(a),r);case"BigInt":return i(Object(BigInt(a)),r);case"ArrayBuffer":return i(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return i(new DataView(o),a)}}return i(new zU[s](a),r)};return n},VU=t=>Bve(new Map,t)(0),dm="",{toString:kve}={},{keys:Ove}=Object,xy=t=>{const e=typeof t;if(e!=="object"||!t)return[fA,e];const i=kve.call(t).slice(8,-1);switch(i){case"Array":return[ux,dm];case"Object":return[YE,dm];case"Date":return[s4,dm];case"RegExp":return[a4,dm];case"Map":return[o4,dm];case"Set":return[u4,dm];case"DataView":return[ux,i]}return i.includes("Array")?[ux,i]:i.includes("Error")?[xne,i]:[YE,i]},sT=([t,e])=>t===fA&&(e==="function"||e==="symbol"),Fve=(t,e,i,n)=>{const r=(a,o)=>{const l=n.push(a)-1;return i.set(o,l),l},s=a=>{if(i.has(a))return i.get(a);let[o,l]=xy(a);switch(o){case fA:{let d=a;switch(l){case"bigint":o=_ne,d=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return r([yne],a)}return r([o,d],a)}case ux:{if(l){let g=a;return l==="DataView"?g=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(g=new Uint8Array(a)),r([l,[...g]],a)}const d=[],p=r([o,d],a);for(const g of a)d.push(s(g));return p}case YE:{if(l)switch(l){case"BigInt":return r([l,a.toString()],a);case"Boolean":case"Number":case"String":return r([l,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const d=[],p=r([o,d],a);for(const g of Ove(a))(t||!sT(xy(a[g])))&&d.push([s(g),s(a[g])]);return p}case s4:return r([o,a.toISOString()],a);case a4:{const{source:d,flags:p}=a;return r([o,{source:d,flags:p}],a)}case o4:{const d=[],p=r([o,d],a);for(const[g,y]of a)(t||!(sT(xy(g))||sT(xy(y))))&&d.push([s(g),s(y)]);return p}case u4:{const d=[],p=r([o,d],a);for(const g of a)(t||!sT(xy(g)))&&d.push(s(g));return p}}const{message:h}=a;return r([o,{name:l,message:h}],a)};return s},jU=(t,{json:e,lossy:i}={})=>{const n=[];return Fve(!(e||i),!!e,new Map,n)(t),n},cg=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?VU(jU(t,e)):structuredClone(t):(t,e)=>VU(jU(t,e));let k_=class{constructor(e,i,n){this.normal=i,this.property=e,n&&(this.space=n)}};k_.prototype.normal={};k_.prototype.property={};k_.prototype.space=void 0;function vne(t,e){const i={},n={};for(const r of t)Object.assign(i,r.property),Object.assign(n,r.normal);return new k_(i,n,e)}function $x(t){return t.toLowerCase()}let xa=class{constructor(e,i){this.attribute=i,this.property=e}};xa.prototype.attribute="";xa.prototype.booleanish=!1;xa.prototype.boolean=!1;xa.prototype.commaOrSpaceSeparated=!1;xa.prototype.commaSeparated=!1;xa.prototype.defined=!1;xa.prototype.mustUseProperty=!1;xa.prototype.number=!1;xa.prototype.overloadedBoolean=!1;xa.prototype.property="";xa.prototype.spaceSeparated=!1;xa.prototype.space=void 0;let Ive=0;const oi=zf(),Tr=zf(),nB=zf(),$e=zf(),Tn=zf(),Wm=zf(),Ma=zf();function zf(){return 2**++Ive}const rB=Object.freeze(Object.defineProperty({__proto__:null,boolean:oi,booleanish:Tr,commaOrSpaceSeparated:Ma,commaSeparated:Wm,number:$e,overloadedBoolean:nB,spaceSeparated:Tn},Symbol.toStringTag,{value:"Module"})),HD=Object.keys(rB);let l4=class extends xa{constructor(e,i,n,r){let s=-1;if(super(e,i),XU(this,"space",r),typeof n=="number")for(;++s<HD.length;){const a=HD[s];XU(this,HD[s],(n&rB[a])===rB[a])}}};l4.prototype.defined=!0;function XU(t,e,i){i&&(t[e]=i)}function Gg(t){const e={},i={};for(const[n,r]of Object.entries(t.properties)){const s=new l4(n,t.transform(t.attributes||{},n),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),e[n]=s,i[$x(n)]=n,i[$x(s.attribute)]=n}return new k_(e,i,t.space)}const Tne=Gg({properties:{ariaActiveDescendant:null,ariaAtomic:Tr,ariaAutoComplete:null,ariaBusy:Tr,ariaChecked:Tr,ariaColCount:$e,ariaColIndex:$e,ariaColSpan:$e,ariaControls:Tn,ariaCurrent:null,ariaDescribedBy:Tn,ariaDetails:null,ariaDisabled:Tr,ariaDropEffect:Tn,ariaErrorMessage:null,ariaExpanded:Tr,ariaFlowTo:Tn,ariaGrabbed:Tr,ariaHasPopup:null,ariaHidden:Tr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Tn,ariaLevel:$e,ariaLive:null,ariaModal:Tr,ariaMultiLine:Tr,ariaMultiSelectable:Tr,ariaOrientation:null,ariaOwns:Tn,ariaPlaceholder:null,ariaPosInSet:$e,ariaPressed:Tr,ariaReadOnly:Tr,ariaRelevant:null,ariaRequired:Tr,ariaRoleDescription:Tn,ariaRowCount:$e,ariaRowIndex:$e,ariaRowSpan:$e,ariaSelected:Tr,ariaSetSize:$e,ariaSort:null,ariaValueMax:$e,ariaValueMin:$e,ariaValueNow:$e,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Ene(t,e){return e in t?t[e]:e}function Sne(t,e){return Ene(t,e.toLowerCase())}const Lve=Gg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Wm,acceptCharset:Tn,accessKey:Tn,action:null,allow:null,allowFullScreen:oi,allowPaymentRequest:oi,allowUserMedia:oi,alt:null,as:null,async:oi,autoCapitalize:null,autoComplete:Tn,autoFocus:oi,autoPlay:oi,blocking:Tn,capture:null,charSet:null,checked:oi,cite:null,className:Tn,cols:$e,colSpan:null,content:null,contentEditable:Tr,controls:oi,controlsList:Tn,coords:$e|Wm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:oi,defer:oi,dir:null,dirName:null,disabled:oi,download:nB,draggable:Tr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:oi,formTarget:null,headers:Tn,height:$e,hidden:nB,high:$e,href:null,hrefLang:null,htmlFor:Tn,httpEquiv:Tn,id:null,imageSizes:null,imageSrcSet:null,inert:oi,inputMode:null,integrity:null,is:null,isMap:oi,itemId:null,itemProp:Tn,itemRef:Tn,itemScope:oi,itemType:Tn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:oi,low:$e,manifest:null,max:null,maxLength:$e,media:null,method:null,min:null,minLength:$e,multiple:oi,muted:oi,name:null,nonce:null,noModule:oi,noValidate:oi,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:oi,optimum:$e,pattern:null,ping:Tn,placeholder:null,playsInline:oi,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:oi,referrerPolicy:null,rel:Tn,required:oi,reversed:oi,rows:$e,rowSpan:$e,sandbox:Tn,scope:null,scoped:oi,seamless:oi,selected:oi,shadowRootClonable:oi,shadowRootDelegatesFocus:oi,shadowRootMode:null,shape:null,size:$e,sizes:null,slot:null,span:$e,spellCheck:Tr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:$e,step:null,style:null,tabIndex:$e,target:null,title:null,translate:null,type:null,typeMustMatch:oi,useMap:null,value:Tr,width:$e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Tn,axis:null,background:null,bgColor:null,border:$e,borderColor:null,bottomMargin:$e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:oi,declare:oi,event:null,face:null,frame:null,frameBorder:null,hSpace:$e,leftMargin:$e,link:null,longDesc:null,lowSrc:null,marginHeight:$e,marginWidth:$e,noResize:oi,noHref:oi,noShade:oi,noWrap:oi,object:null,profile:null,prompt:null,rev:null,rightMargin:$e,rules:null,scheme:null,scrolling:Tr,standby:null,summary:null,text:null,topMargin:$e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:$e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:oi,disableRemotePlayback:oi,prefix:null,property:null,results:$e,security:null,unselectable:null},space:"html",transform:Sne}),Nve=Gg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ma,accentHeight:$e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:$e,amplitude:$e,arabicForm:null,ascent:$e,attributeName:null,attributeType:null,azimuth:$e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:$e,by:null,calcMode:null,capHeight:$e,className:Tn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:$e,diffuseConstant:$e,direction:null,display:null,dur:null,divisor:$e,dominantBaseline:null,download:oi,dx:null,dy:null,edgeMode:null,editable:null,elevation:$e,enableBackground:null,end:null,event:null,exponent:$e,externalResourcesRequired:null,fill:null,fillOpacity:$e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Wm,g2:Wm,glyphName:Wm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:$e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:$e,horizOriginX:$e,horizOriginY:$e,id:null,ideographic:$e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:$e,k:$e,k1:$e,k2:$e,k3:$e,k4:$e,kernelMatrix:Ma,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:$e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:$e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:$e,overlineThickness:$e,paintOrder:null,panose1:null,path:null,pathLength:$e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Tn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:$e,pointsAtY:$e,pointsAtZ:$e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ma,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ma,rev:Ma,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ma,requiredFeatures:Ma,requiredFonts:Ma,requiredFormats:Ma,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:$e,specularExponent:$e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:$e,strikethroughThickness:$e,string:null,stroke:null,strokeDashArray:Ma,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:$e,strokeOpacity:$e,strokeWidth:null,style:null,surfaceScale:$e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ma,tabIndex:$e,tableValues:null,target:null,targetX:$e,targetY:$e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ma,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:$e,underlineThickness:$e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:$e,values:null,vAlphabetic:$e,vMathematical:$e,vectorEffect:null,vHanging:$e,vIdeographic:$e,version:null,vertAdvY:$e,vertOriginX:$e,vertOriginY:$e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:$e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ene}),Ane=Gg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Cne=Gg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Sne}),wne=Gg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Uve={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Gve=/[A-Z]/g,YU=/-[a-z]/g,Hve=/^data[-\w.:]+$/i;function c4(t,e){const i=$x(e);let n=e,r=xa;if(i in t.normal)return t.property[t.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&Hve.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(YU,Vve);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!YU.test(s)){let a=s.replace(Gve,zve);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=l4}return new r(n,e)}function zve(t){return"-"+t.toLowerCase()}function Vve(t){return t.charAt(1).toUpperCase()}const pA=vne([Tne,Lve,Ane,Cne,wne],"html"),Hg=vne([Tne,Nve,Ane,Cne,wne],"svg");function qU(t){const e=[],i=String(t||"");let n=i.indexOf(","),r=0,s=!1;for(;!s;){n===-1&&(n=i.length,s=!0);const a=i.slice(r,n).trim();(a||!s)&&e.push(a),r=n+1,n=i.indexOf(",",r)}return e}function Dne(t,e){const i={};return(t[t.length-1]===""?[...t,""]:t).join((i.padRight?" ":"")+","+(i.padLeft===!1?"":" ")).trim()}const WU=/[#.]/g;function jve(t,e){const i=t||"",n={};let r=0,s,a;for(;r<i.length;){WU.lastIndex=r;const o=WU.exec(i),l=i.slice(r,o?o.index:i.length);l&&(s?s==="#"?n.id=l:Array.isArray(n.className)?n.className.push(l):n.className=[l]:a=l,r+=l.length),o&&(s=o[0],r++)}return{type:"element",tagName:a||e||"div",properties:n,children:[]}}function $U(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function Rne(t){return t.join(" ").trim()}function Pne(t,e,i){const n=i?Wve(i):void 0;function r(s,a,...o){let l;if(s==null){l={type:"root",children:[]};const h=a;o.unshift(h)}else{l=jve(s,e);const h=l.tagName.toLowerCase(),d=n?n.get(h):void 0;if(l.tagName=d||h,Xve(a))o.unshift(a);else for(const[p,g]of Object.entries(a))Yve(t,l.properties,p,g)}for(const h of o)sB(l.children,h);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return r}function Xve(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,i=Object.keys(t);for(const n of i){const r=e[n];if(r&&typeof r=="object"){if(!Array.isArray(r))return!0;const s=r;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Yve(t,e,i,n){const r=c4(t,i);let s;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;s=n}else typeof n=="boolean"?s=n:typeof n=="string"?r.spaceSeparated?s=$U(n):r.commaSeparated?s=qU(n):r.commaOrSpaceSeparated?s=$U(qU(n).join(" ")):s=KU(r,r.property,n):Array.isArray(n)?s=[...n]:s=r.property==="style"?qve(n):String(n);if(Array.isArray(s)){const a=[];for(const o of s)a.push(KU(r,r.property,o));s=a}r.property==="className"&&Array.isArray(e.className)&&(s=e.className.concat(s)),e[r.property]=s}}function sB(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const i of e)sB(t,i);else if(typeof e=="object"&&"type"in e)e.type==="root"?sB(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function KU(t,e,i){if(typeof i=="string"){if(t.number&&i&&!Number.isNaN(Number(i)))return Number(i);if((t.boolean||t.overloadedBoolean)&&(i===""||$x(i)===$x(e)))return!0}return i}function qve(t){const e=[];for(const[i,n]of Object.entries(t))e.push([i,n].join(": "));return e.join("; ")}function Wve(t){const e=new Map;for(const i of t)e.set(i.toLowerCase(),i);return e}const $ve=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Kve=Pne(pA,"div"),Qve=Pne(Hg,"g",$ve);function Zve(t){const e=String(t),i=[];return{toOffset:r,toPoint:n};function n(s){if(typeof s=="number"&&s>-1&&s<=e.length){let a=0;for(;;){let o=i[a];if(o===void 0){const l=QU(e,i[a-1]);o=l===-1?e.length+1:l+1,i[a]=o}if(o>s)return{line:a+1,column:s-(a>0?i[a-1]:0)+1,offset:s};a++}}}function r(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;i.length<s.line;){const o=i[i.length-1],l=QU(e,o),h=l===-1?e.length+1:l+1;if(o===h)break;i.push(h)}const a=(s.line>1?i[s.line-2]:0)+s.column-1;if(a<i[s.line-1])return a}}}function QU(t,e){const i=t.indexOf("\r",e),n=t.indexOf(`
`,e);return n===-1?i:i===-1||i+1===n?n:i<n?i:n}const cf={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Mne={}.hasOwnProperty,Jve=Object.prototype;function e2e(t,e){const i=e||{};return h4({file:i.file||void 0,location:!1,schema:i.space==="svg"?Hg:pA,verbose:i.verbose||!1},t)}function h4(t,e){let i;switch(e.nodeName){case"#comment":{const n=e;return i={type:"comment",value:n.data},QT(t,n,i),i}case"#document":case"#document-fragment":{const n=e,r="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(i={type:"root",children:Bne(t,e.childNodes),data:{quirksMode:r}},t.file&&t.location){const s=String(t.file),a=Zve(s),o=a.toPoint(0),l=a.toPoint(s.length);i.position={start:o,end:l}}return i}case"#documentType":{const n=e;return i={type:"doctype"},QT(t,n,i),i}case"#text":{const n=e;return i={type:"text",value:n.value},QT(t,n,i),i}default:return i=t2e(t,e),i}}function Bne(t,e){let i=-1;const n=[];for(;++i<e.length;){const r=h4(t,e[i]);n.push(r)}return n}function t2e(t,e){const i=t.schema;t.schema=e.namespaceURI===cf.svg?Hg:pA;let n=-1;const r={};for(;++n<e.attrs.length;){const o=e.attrs[n],l=(o.prefix?o.prefix+":":"")+o.name;Mne.call(Jve,l)||(r[l]=o.value)}const a=(t.schema.space==="svg"?Qve:Kve)(e.tagName,r,Bne(t,e.childNodes));if(QT(t,e,a),a.tagName==="template"){const o=e,l=o.sourceCodeLocation,h=l&&l.startTag&&Mm(l.startTag),d=l&&l.endTag&&Mm(l.endTag),p=h4(t,o.content);h&&d&&t.file&&(p.position={start:h.end,end:d.start}),a.content=p}return t.schema=i,a}function QT(t,e,i){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const n=i2e(t,i,e.sourceCodeLocation);n&&(t.location=!0,i.position=n)}}function i2e(t,e,i){const n=Mm(i);if(e.type==="element"){const r=e.children[e.children.length-1];if(n&&!i.endTag&&r&&r.position&&r.position.end&&(n.end=Object.assign({},r.position.end)),t.verbose){const s={};let a;if(i.attrs)for(a in i.attrs)Mne.call(i.attrs,a)&&(s[c4(t.schema,a).property]=Mm(i.attrs[a]));i.startTag;const o=Mm(i.startTag),l=i.endTag?Mm(i.endTag):void 0,h={opening:o};l&&(h.closing=l),h.properties=s,e.data={position:h}}}return n}function Mm(t){const e=ZU({line:t.startLine,column:t.startCol,offset:t.startOffset}),i=ZU({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||i?{start:e,end:i}:void 0}function ZU(t){return t.line&&t.column?t:void 0}class O_{constructor(e,i,n){this.property=e,this.normal=i,n&&(this.space=n)}}O_.prototype.property={};O_.prototype.normal={};O_.prototype.space=null;function kne(t,e){const i={},n={};let r=-1;for(;++r<t.length;)Object.assign(i,t[r].property),Object.assign(n,t[r].normal);return new O_(i,n,e)}function aB(t){return t.toLowerCase()}class ko{constructor(e,i){this.property=e,this.attribute=i}}ko.prototype.space=null;ko.prototype.boolean=!1;ko.prototype.booleanish=!1;ko.prototype.overloadedBoolean=!1;ko.prototype.number=!1;ko.prototype.commaSeparated=!1;ko.prototype.spaceSeparated=!1;ko.prototype.commaOrSpaceSeparated=!1;ko.prototype.mustUseProperty=!1;ko.prototype.defined=!1;let n2e=0;const ii=Vf(),Er=Vf(),One=Vf(),Ke=Vf(),En=Vf(),$m=Vf(),Ba=Vf();function Vf(){return 2**++n2e}const oB=Object.freeze(Object.defineProperty({__proto__:null,boolean:ii,booleanish:Er,commaOrSpaceSeparated:Ba,commaSeparated:$m,number:Ke,overloadedBoolean:One,spaceSeparated:En},Symbol.toStringTag,{value:"Module"})),zD=Object.keys(oB);class d4 extends ko{constructor(e,i,n,r){let s=-1;if(super(e,i),JU(this,"space",r),typeof n=="number")for(;++s<zD.length;){const a=zD[s];JU(this,zD[s],(n&oB[a])===oB[a])}}}d4.prototype.defined=!0;function JU(t,e,i){i&&(t[e]=i)}const r2e={}.hasOwnProperty;function zg(t){const e={},i={};let n;for(n in t.properties)if(r2e.call(t.properties,n)){const r=t.properties[n],s=new d4(n,t.transform(t.attributes||{},n),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),e[n]=s,i[aB(n)]=n,i[aB(s.attribute)]=n}return new O_(e,i,t.space)}const Fne=zg({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Ine=zg({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Lne(t,e){return e in t?t[e]:e}function Nne(t,e){return Lne(t,e.toLowerCase())}const Une=zg({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Nne,properties:{xmlns:null,xmlnsXLink:null}}),Gne=zg({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Er,ariaAutoComplete:null,ariaBusy:Er,ariaChecked:Er,ariaColCount:Ke,ariaColIndex:Ke,ariaColSpan:Ke,ariaControls:En,ariaCurrent:null,ariaDescribedBy:En,ariaDetails:null,ariaDisabled:Er,ariaDropEffect:En,ariaErrorMessage:null,ariaExpanded:Er,ariaFlowTo:En,ariaGrabbed:Er,ariaHasPopup:null,ariaHidden:Er,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:En,ariaLevel:Ke,ariaLive:null,ariaModal:Er,ariaMultiLine:Er,ariaMultiSelectable:Er,ariaOrientation:null,ariaOwns:En,ariaPlaceholder:null,ariaPosInSet:Ke,ariaPressed:Er,ariaReadOnly:Er,ariaRelevant:null,ariaRequired:Er,ariaRoleDescription:En,ariaRowCount:Ke,ariaRowIndex:Ke,ariaRowSpan:Ke,ariaSelected:Er,ariaSetSize:Ke,ariaSort:null,ariaValueMax:Ke,ariaValueMin:Ke,ariaValueNow:Ke,ariaValueText:null,role:null}}),s2e=zg({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Nne,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:$m,acceptCharset:En,accessKey:En,action:null,allow:null,allowFullScreen:ii,allowPaymentRequest:ii,allowUserMedia:ii,alt:null,as:null,async:ii,autoCapitalize:null,autoComplete:En,autoFocus:ii,autoPlay:ii,blocking:En,capture:null,charSet:null,checked:ii,cite:null,className:En,cols:Ke,colSpan:null,content:null,contentEditable:Er,controls:ii,controlsList:En,coords:Ke|$m,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ii,defer:ii,dir:null,dirName:null,disabled:ii,download:One,draggable:Er,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ii,formTarget:null,headers:En,height:Ke,hidden:ii,high:Ke,href:null,hrefLang:null,htmlFor:En,httpEquiv:En,id:null,imageSizes:null,imageSrcSet:null,inert:ii,inputMode:null,integrity:null,is:null,isMap:ii,itemId:null,itemProp:En,itemRef:En,itemScope:ii,itemType:En,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ii,low:Ke,manifest:null,max:null,maxLength:Ke,media:null,method:null,min:null,minLength:Ke,multiple:ii,muted:ii,name:null,nonce:null,noModule:ii,noValidate:ii,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ii,optimum:Ke,pattern:null,ping:En,placeholder:null,playsInline:ii,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ii,referrerPolicy:null,rel:En,required:ii,reversed:ii,rows:Ke,rowSpan:Ke,sandbox:En,scope:null,scoped:ii,seamless:ii,selected:ii,shadowRootClonable:ii,shadowRootDelegatesFocus:ii,shadowRootMode:null,shape:null,size:Ke,sizes:null,slot:null,span:Ke,spellCheck:Er,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ke,step:null,style:null,tabIndex:Ke,target:null,title:null,translate:null,type:null,typeMustMatch:ii,useMap:null,value:Er,width:Ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:En,axis:null,background:null,bgColor:null,border:Ke,borderColor:null,bottomMargin:Ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ii,declare:ii,event:null,face:null,frame:null,frameBorder:null,hSpace:Ke,leftMargin:Ke,link:null,longDesc:null,lowSrc:null,marginHeight:Ke,marginWidth:Ke,noResize:ii,noHref:ii,noShade:ii,noWrap:ii,object:null,profile:null,prompt:null,rev:null,rightMargin:Ke,rules:null,scheme:null,scrolling:Er,standby:null,summary:null,text:null,topMargin:Ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ii,disableRemotePlayback:ii,prefix:null,property:null,results:Ke,security:null,unselectable:null}}),a2e=zg({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Lne,properties:{about:Ba,accentHeight:Ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ke,amplitude:Ke,arabicForm:null,ascent:Ke,attributeName:null,attributeType:null,azimuth:Ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ke,by:null,calcMode:null,capHeight:Ke,className:En,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ke,diffuseConstant:Ke,direction:null,display:null,dur:null,divisor:Ke,dominantBaseline:null,download:ii,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ke,enableBackground:null,end:null,event:null,exponent:Ke,externalResourcesRequired:null,fill:null,fillOpacity:Ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:$m,g2:$m,glyphName:$m,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ke,horizOriginX:Ke,horizOriginY:Ke,id:null,ideographic:Ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ke,k:Ke,k1:Ke,k2:Ke,k3:Ke,k4:Ke,kernelMatrix:Ba,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ke,overlineThickness:Ke,paintOrder:null,panose1:null,path:null,pathLength:Ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:En,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ke,pointsAtY:Ke,pointsAtZ:Ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ba,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ba,rev:Ba,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ba,requiredFeatures:Ba,requiredFonts:Ba,requiredFormats:Ba,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ke,specularExponent:Ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ke,strikethroughThickness:Ke,string:null,stroke:null,strokeDashArray:Ba,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ke,strokeOpacity:Ke,strokeWidth:null,style:null,surfaceScale:Ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ba,tabIndex:Ke,tableValues:null,target:null,targetX:Ke,targetY:Ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ba,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ke,underlineThickness:Ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ke,values:null,vAlphabetic:Ke,vMathematical:Ke,vectorEffect:null,vHanging:Ke,vIdeographic:Ke,version:null,vertAdvY:Ke,vertOriginX:Ke,vertOriginY:Ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),o2e=/^data[-\w.:]+$/i,eG=/-[a-z]/g,u2e=/[A-Z]/g;function l2e(t,e){const i=aB(e);let n=e,r=ko;if(i in t.normal)return t.property[t.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&o2e.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(eG,h2e);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!eG.test(s)){let a=s.replace(u2e,c2e);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=d4}return new r(n,e)}function c2e(t){return"-"+t.toLowerCase()}function h2e(t){return t.charAt(1).toUpperCase()}const d2e=kne([Ine,Fne,Une,Gne,s2e],"html"),Hne=kne([Ine,Fne,Une,Gne,a2e],"svg"),tG={}.hasOwnProperty;function zne(t,e){const i=e||{};function n(r,...s){let a=n.invalid;const o=n.handlers;if(r&&tG.call(r,t)){const l=String(r[t]);a=tG.call(o,l)?o[l]:n.unknown}if(a)return a.call(this,r,...s)}return n.handlers=i.handlers||{},n.invalid=i.invalid,n.unknown=i.unknown,n}const f2e={},p2e={}.hasOwnProperty,Vne=zne("type",{handlers:{root:g2e,element:v2e,text:x2e,comment:_2e,doctype:y2e}});function m2e(t,e){const n=(e||f2e).space;return Vne(t,n==="svg"?Hne:d2e)}function g2e(t,e){const i={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return i.childNodes=f4(t.children,i,e),Vg(t,i),i}function b2e(t,e){const i={nodeName:"#document-fragment",childNodes:[]};return i.childNodes=f4(t.children,i,e),Vg(t,i),i}function y2e(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Vg(t,e),e}function x2e(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Vg(t,e),e}function _2e(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Vg(t,e),e}function v2e(t,e){const i=e;let n=i;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(n=Hne);const r=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&p2e.call(t.properties,s)){const l=T2e(n,s,t.properties[s]);l&&r.push(l)}}const a=n.space,o={nodeName:t.tagName,tagName:t.tagName,attrs:r,namespaceURI:cf[a],childNodes:[],parentNode:null};return o.childNodes=f4(t.children,o,n),Vg(t,o),t.tagName==="template"&&t.content&&(o.content=b2e(t.content,n)),o}function T2e(t,e,i){const n=l2e(t,e);if(i===!1||i===null||i===void 0||typeof i=="number"&&Number.isNaN(i)||!i&&n.boolean)return;Array.isArray(i)&&(i=n.commaSeparated?Dne(i):Rne(i));const r={name:n.attribute,value:i===!0?"":String(i)};if(n.space&&n.space!=="html"&&n.space!=="svg"){const s=r.name.indexOf(":");s<0?r.prefix="":(r.name=r.name.slice(s+1),r.prefix=n.attribute.slice(0,s)),r.namespace=cf[n.space]}return r}function f4(t,e,i){let n=-1;const r=[];if(t)for(;++n<t.length;){const s=Vne(t[n],i);s.parentNode=e,r.push(s)}return r}function Vg(t,e){const i=t.position;i&&i.start&&i.end&&(i.start.offset,i.end.offset,e.sourceCodeLocation={startLine:i.start.line,startCol:i.start.column,startOffset:i.start.offset,endLine:i.end.line,endCol:i.end.column,endOffset:i.end.offset})}const E2e=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],S2e=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),On="�";var ne;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(ne||(ne={}));const ea={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function jne(t){return t>=55296&&t<=57343}function A2e(t){return t>=56320&&t<=57343}function C2e(t,e){return(t-55296)*1024+9216+e}function Xne(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function Yne(t){return t>=64976&&t<=65007||S2e.has(t)}var Me;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Me||(Me={}));const w2e=65536;class D2e{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=w2e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,i){const{line:n,col:r,offset:s}=this,a=r+i,o=s+i;return{code:e,startLine:n,endLine:n,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const i=this.html.charCodeAt(this.pos+1);if(A2e(i))return this.pos++,this._addGap(),C2e(e,i)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ne.EOF;return this._err(Me.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,i){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=i}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,i){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(i)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==e.charCodeAt(n))return!1;return!0}peek(e){const i=this.pos+e;if(i>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ne.EOF;const n=this.html.charCodeAt(i);return n===ne.CARRIAGE_RETURN?ne.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ne.EOF;let e=this.html.charCodeAt(this.pos);return e===ne.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ne.LINE_FEED):e===ne.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,jne(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===ne.LINE_FEED||e===ne.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){Xne(e)?this._err(Me.controlCharacterInInputStream):Yne(e)&&this._err(Me.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var mi;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(mi||(mi={}));function qne(t,e){for(let i=t.attrs.length-1;i>=0;i--)if(t.attrs[i].name===e)return t.attrs[i].value;return null}const R2e=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),P2e=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function M2e(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=P2e.get(t))!==null&&e!==void 0?e:t}var Kr;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Kr||(Kr={}));const B2e=32;var Dh;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Dh||(Dh={}));function uB(t){return t>=Kr.ZERO&&t<=Kr.NINE}function k2e(t){return t>=Kr.UPPER_A&&t<=Kr.UPPER_F||t>=Kr.LOWER_A&&t<=Kr.LOWER_F}function O2e(t){return t>=Kr.UPPER_A&&t<=Kr.UPPER_Z||t>=Kr.LOWER_A&&t<=Kr.LOWER_Z||uB(t)}function F2e(t){return t===Kr.EQUALS||O2e(t)}var qr;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(qr||(qr={}));var sc;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(sc||(sc={}));class I2e{constructor(e,i,n){this.decodeTree=e,this.emitCodePoint=i,this.errors=n,this.state=qr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=sc.Strict}startEntity(e){this.decodeMode=e,this.state=qr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,i){switch(this.state){case qr.EntityStart:return e.charCodeAt(i)===Kr.NUM?(this.state=qr.NumericStart,this.consumed+=1,this.stateNumericStart(e,i+1)):(this.state=qr.NamedEntity,this.stateNamedEntity(e,i));case qr.NumericStart:return this.stateNumericStart(e,i);case qr.NumericDecimal:return this.stateNumericDecimal(e,i);case qr.NumericHex:return this.stateNumericHex(e,i);case qr.NamedEntity:return this.stateNamedEntity(e,i)}}stateNumericStart(e,i){return i>=e.length?-1:(e.charCodeAt(i)|B2e)===Kr.LOWER_X?(this.state=qr.NumericHex,this.consumed+=1,this.stateNumericHex(e,i+1)):(this.state=qr.NumericDecimal,this.stateNumericDecimal(e,i))}addToNumericResult(e,i,n,r){if(i!==n){const s=n-i;this.result=this.result*Math.pow(r,s)+Number.parseInt(e.substr(i,s),r),this.consumed+=s}}stateNumericHex(e,i){const n=i;for(;i<e.length;){const r=e.charCodeAt(i);if(uB(r)||k2e(r))i+=1;else return this.addToNumericResult(e,n,i,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,n,i,16),-1}stateNumericDecimal(e,i){const n=i;for(;i<e.length;){const r=e.charCodeAt(i);if(uB(r))i+=1;else return this.addToNumericResult(e,n,i,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,n,i,10),-1}emitNumericEntity(e,i){var n;if(this.consumed<=i)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Kr.SEMI)this.consumed+=1;else if(this.decodeMode===sc.Strict)return 0;return this.emitCodePoint(M2e(this.result),this.consumed),this.errors&&(e!==Kr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,i){const{decodeTree:n}=this;let r=n[this.treeIndex],s=(r&Dh.VALUE_LENGTH)>>14;for(;i<e.length;i++,this.excess++){const a=e.charCodeAt(i);if(this.treeIndex=L2e(n,r,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===sc.Attribute&&(s===0||F2e(a))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],s=(r&Dh.VALUE_LENGTH)>>14,s!==0){if(a===Kr.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==sc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:i,decodeTree:n}=this,r=(n[i]&Dh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(i,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,i,n){const{decodeTree:r}=this;return this.emitCodePoint(i===1?r[e]&~Dh.VALUE_LENGTH:r[e+1],n),i===3&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case qr.NamedEntity:return this.result!==0&&(this.decodeMode!==sc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case qr.NumericDecimal:return this.emitNumericEntity(0,2);case qr.NumericHex:return this.emitNumericEntity(0,3);case qr.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case qr.EntityStart:return 0}}}function L2e(t,e,i,n){const r=(e&Dh.BRANCH_LENGTH)>>7,s=e&Dh.JUMP_TABLE;if(r===0)return s!==0&&n===s?i:-1;if(s){const l=n-s;return l<0||l>=r?-1:t[i+l]-1}let a=i,o=a+r-1;for(;a<=o;){const l=a+o>>>1,h=t[l];if(h<n)a=l+1;else if(h>n)o=l-1;else return t[l+r]}return-1}var je;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(je||(je={}));var ff;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(ff||(ff={}));var po;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(po||(po={}));var Ee;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(Ee||(Ee={}));var w;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(w||(w={}));const N2e=new Map([[Ee.A,w.A],[Ee.ADDRESS,w.ADDRESS],[Ee.ANNOTATION_XML,w.ANNOTATION_XML],[Ee.APPLET,w.APPLET],[Ee.AREA,w.AREA],[Ee.ARTICLE,w.ARTICLE],[Ee.ASIDE,w.ASIDE],[Ee.B,w.B],[Ee.BASE,w.BASE],[Ee.BASEFONT,w.BASEFONT],[Ee.BGSOUND,w.BGSOUND],[Ee.BIG,w.BIG],[Ee.BLOCKQUOTE,w.BLOCKQUOTE],[Ee.BODY,w.BODY],[Ee.BR,w.BR],[Ee.BUTTON,w.BUTTON],[Ee.CAPTION,w.CAPTION],[Ee.CENTER,w.CENTER],[Ee.CODE,w.CODE],[Ee.COL,w.COL],[Ee.COLGROUP,w.COLGROUP],[Ee.DD,w.DD],[Ee.DESC,w.DESC],[Ee.DETAILS,w.DETAILS],[Ee.DIALOG,w.DIALOG],[Ee.DIR,w.DIR],[Ee.DIV,w.DIV],[Ee.DL,w.DL],[Ee.DT,w.DT],[Ee.EM,w.EM],[Ee.EMBED,w.EMBED],[Ee.FIELDSET,w.FIELDSET],[Ee.FIGCAPTION,w.FIGCAPTION],[Ee.FIGURE,w.FIGURE],[Ee.FONT,w.FONT],[Ee.FOOTER,w.FOOTER],[Ee.FOREIGN_OBJECT,w.FOREIGN_OBJECT],[Ee.FORM,w.FORM],[Ee.FRAME,w.FRAME],[Ee.FRAMESET,w.FRAMESET],[Ee.H1,w.H1],[Ee.H2,w.H2],[Ee.H3,w.H3],[Ee.H4,w.H4],[Ee.H5,w.H5],[Ee.H6,w.H6],[Ee.HEAD,w.HEAD],[Ee.HEADER,w.HEADER],[Ee.HGROUP,w.HGROUP],[Ee.HR,w.HR],[Ee.HTML,w.HTML],[Ee.I,w.I],[Ee.IMG,w.IMG],[Ee.IMAGE,w.IMAGE],[Ee.INPUT,w.INPUT],[Ee.IFRAME,w.IFRAME],[Ee.KEYGEN,w.KEYGEN],[Ee.LABEL,w.LABEL],[Ee.LI,w.LI],[Ee.LINK,w.LINK],[Ee.LISTING,w.LISTING],[Ee.MAIN,w.MAIN],[Ee.MALIGNMARK,w.MALIGNMARK],[Ee.MARQUEE,w.MARQUEE],[Ee.MATH,w.MATH],[Ee.MENU,w.MENU],[Ee.META,w.META],[Ee.MGLYPH,w.MGLYPH],[Ee.MI,w.MI],[Ee.MO,w.MO],[Ee.MN,w.MN],[Ee.MS,w.MS],[Ee.MTEXT,w.MTEXT],[Ee.NAV,w.NAV],[Ee.NOBR,w.NOBR],[Ee.NOFRAMES,w.NOFRAMES],[Ee.NOEMBED,w.NOEMBED],[Ee.NOSCRIPT,w.NOSCRIPT],[Ee.OBJECT,w.OBJECT],[Ee.OL,w.OL],[Ee.OPTGROUP,w.OPTGROUP],[Ee.OPTION,w.OPTION],[Ee.P,w.P],[Ee.PARAM,w.PARAM],[Ee.PLAINTEXT,w.PLAINTEXT],[Ee.PRE,w.PRE],[Ee.RB,w.RB],[Ee.RP,w.RP],[Ee.RT,w.RT],[Ee.RTC,w.RTC],[Ee.RUBY,w.RUBY],[Ee.S,w.S],[Ee.SCRIPT,w.SCRIPT],[Ee.SEARCH,w.SEARCH],[Ee.SECTION,w.SECTION],[Ee.SELECT,w.SELECT],[Ee.SOURCE,w.SOURCE],[Ee.SMALL,w.SMALL],[Ee.SPAN,w.SPAN],[Ee.STRIKE,w.STRIKE],[Ee.STRONG,w.STRONG],[Ee.STYLE,w.STYLE],[Ee.SUB,w.SUB],[Ee.SUMMARY,w.SUMMARY],[Ee.SUP,w.SUP],[Ee.TABLE,w.TABLE],[Ee.TBODY,w.TBODY],[Ee.TEMPLATE,w.TEMPLATE],[Ee.TEXTAREA,w.TEXTAREA],[Ee.TFOOT,w.TFOOT],[Ee.TD,w.TD],[Ee.TH,w.TH],[Ee.THEAD,w.THEAD],[Ee.TITLE,w.TITLE],[Ee.TR,w.TR],[Ee.TRACK,w.TRACK],[Ee.TT,w.TT],[Ee.U,w.U],[Ee.UL,w.UL],[Ee.SVG,w.SVG],[Ee.VAR,w.VAR],[Ee.WBR,w.WBR],[Ee.XMP,w.XMP]]);function jg(t){var e;return(e=N2e.get(t))!==null&&e!==void 0?e:w.UNKNOWN}const qe=w,U2e={[je.HTML]:new Set([qe.ADDRESS,qe.APPLET,qe.AREA,qe.ARTICLE,qe.ASIDE,qe.BASE,qe.BASEFONT,qe.BGSOUND,qe.BLOCKQUOTE,qe.BODY,qe.BR,qe.BUTTON,qe.CAPTION,qe.CENTER,qe.COL,qe.COLGROUP,qe.DD,qe.DETAILS,qe.DIR,qe.DIV,qe.DL,qe.DT,qe.EMBED,qe.FIELDSET,qe.FIGCAPTION,qe.FIGURE,qe.FOOTER,qe.FORM,qe.FRAME,qe.FRAMESET,qe.H1,qe.H2,qe.H3,qe.H4,qe.H5,qe.H6,qe.HEAD,qe.HEADER,qe.HGROUP,qe.HR,qe.HTML,qe.IFRAME,qe.IMG,qe.INPUT,qe.LI,qe.LINK,qe.LISTING,qe.MAIN,qe.MARQUEE,qe.MENU,qe.META,qe.NAV,qe.NOEMBED,qe.NOFRAMES,qe.NOSCRIPT,qe.OBJECT,qe.OL,qe.P,qe.PARAM,qe.PLAINTEXT,qe.PRE,qe.SCRIPT,qe.SECTION,qe.SELECT,qe.SOURCE,qe.STYLE,qe.SUMMARY,qe.TABLE,qe.TBODY,qe.TD,qe.TEMPLATE,qe.TEXTAREA,qe.TFOOT,qe.TH,qe.THEAD,qe.TITLE,qe.TR,qe.TRACK,qe.UL,qe.WBR,qe.XMP]),[je.MATHML]:new Set([qe.MI,qe.MO,qe.MN,qe.MS,qe.MTEXT,qe.ANNOTATION_XML]),[je.SVG]:new Set([qe.TITLE,qe.FOREIGN_OBJECT,qe.DESC]),[je.XLINK]:new Set,[je.XML]:new Set,[je.XMLNS]:new Set},lB=new Set([qe.H1,qe.H2,qe.H3,qe.H4,qe.H5,qe.H6]);Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;var oe;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(oe||(oe={}));const lr={DATA:oe.DATA,RCDATA:oe.RCDATA,RAWTEXT:oe.RAWTEXT,SCRIPT_DATA:oe.SCRIPT_DATA,PLAINTEXT:oe.PLAINTEXT,CDATA_SECTION:oe.CDATA_SECTION};function G2e(t){return t>=ne.DIGIT_0&&t<=ne.DIGIT_9}function jy(t){return t>=ne.LATIN_CAPITAL_A&&t<=ne.LATIN_CAPITAL_Z}function H2e(t){return t>=ne.LATIN_SMALL_A&&t<=ne.LATIN_SMALL_Z}function ch(t){return H2e(t)||jy(t)}function iG(t){return ch(t)||G2e(t)}function aT(t){return t+32}function Wne(t){return t===ne.SPACE||t===ne.LINE_FEED||t===ne.TABULATION||t===ne.FORM_FEED}function nG(t){return Wne(t)||t===ne.SOLIDUS||t===ne.GREATER_THAN_SIGN}function z2e(t){return t===ne.NULL?Me.nullCharacterReference:t>1114111?Me.characterReferenceOutsideUnicodeRange:jne(t)?Me.surrogateCharacterReference:Yne(t)?Me.noncharacterCharacterReference:Xne(t)||t===ne.CARRIAGE_RETURN?Me.controlCharacterReference:null}class V2e{constructor(e,i){this.options=e,this.handler=i,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=oe.DATA,this.returnState=oe.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new D2e(i),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new I2e(R2e,(n,r)=>{this.preprocessor.pos=this.entityStartPos+r-1,this._flushCodePointConsumedAsCharacterReference(n)},i.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Me.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(Me.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const r=z2e(n);r&&this._err(r,1)}}:void 0)}_err(e,i=0){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(e,i))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,i,n){this.active=!0,this.preprocessor.write(e,i),this._runParsingLoop(),this.paused||n?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let i=0;i<e;i++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,i){return this.preprocessor.startsWith(e,i)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:mi.START_TAG,tagName:"",tagID:w.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:mi.END_TAG,tagName:"",tagID:w.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:mi.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:mi.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,i){this.currentCharacterToken={type:e,chars:i,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,i;const n=this.currentToken;if(qne(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const r=(e=(i=n.location).attrs)!==null&&e!==void 0?e:i.attrs=Object.create(null);r[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Me.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=jg(e.tagName),e.type===mi.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Me.endTagWithAttributes),e.selfClosing&&this._err(Me.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case mi.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case mi.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case mi.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:mi.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,i){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=i;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,i)}_emitCodePoint(e){const i=Wne(e)?mi.WHITESPACE_CHARACTER:e===ne.NULL?mi.NULL_CHARACTER:mi.CHARACTER;this._appendCharToCurrentCharacterToken(i,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(mi.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=oe.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?sc.Attribute:sc.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case oe.DATA:{this._stateData(e);break}case oe.RCDATA:{this._stateRcdata(e);break}case oe.RAWTEXT:{this._stateRawtext(e);break}case oe.SCRIPT_DATA:{this._stateScriptData(e);break}case oe.PLAINTEXT:{this._statePlaintext(e);break}case oe.TAG_OPEN:{this._stateTagOpen(e);break}case oe.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case oe.TAG_NAME:{this._stateTagName(e);break}case oe.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case oe.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case oe.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case oe.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case oe.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case oe.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case oe.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case oe.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case oe.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case oe.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case oe.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case oe.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case oe.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case oe.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case oe.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case oe.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case oe.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case oe.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case oe.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case oe.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case oe.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case oe.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case oe.BOGUS_COMMENT:{this._stateBogusComment(e);break}case oe.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case oe.COMMENT_START:{this._stateCommentStart(e);break}case oe.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case oe.COMMENT:{this._stateComment(e);break}case oe.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case oe.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case oe.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case oe.COMMENT_END:{this._stateCommentEnd(e);break}case oe.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case oe.DOCTYPE:{this._stateDoctype(e);break}case oe.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case oe.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case oe.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case oe.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case oe.CDATA_SECTION:{this._stateCdataSection(e);break}case oe.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case oe.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case oe.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case oe.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case ne.LESS_THAN_SIGN:{this.state=oe.TAG_OPEN;break}case ne.AMPERSAND:{this._startCharacterReference();break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._emitCodePoint(e);break}case ne.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case ne.AMPERSAND:{this._startCharacterReference();break}case ne.LESS_THAN_SIGN:{this.state=oe.RCDATA_LESS_THAN_SIGN;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(On);break}case ne.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case ne.LESS_THAN_SIGN:{this.state=oe.RAWTEXT_LESS_THAN_SIGN;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(On);break}case ne.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case ne.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_LESS_THAN_SIGN;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(On);break}case ne.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(On);break}case ne.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(ch(e))this._createStartTagToken(),this.state=oe.TAG_NAME,this._stateTagName(e);else switch(e){case ne.EXCLAMATION_MARK:{this.state=oe.MARKUP_DECLARATION_OPEN;break}case ne.SOLIDUS:{this.state=oe.END_TAG_OPEN;break}case ne.QUESTION_MARK:{this._err(Me.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(e);break}case ne.EOF:{this._err(Me.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Me.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=oe.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(ch(e))this._createEndTagToken(),this.state=oe.TAG_NAME,this._stateTagName(e);else switch(e){case ne.GREATER_THAN_SIGN:{this._err(Me.missingEndTagName),this.state=oe.DATA;break}case ne.EOF:{this._err(Me.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Me.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ne.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ne.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.tagName+=On;break}case ne.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:i.tagName+=String.fromCodePoint(jy(e)?aT(e):e)}}_stateRcdataLessThanSign(e){e===ne.SOLIDUS?this.state=oe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){ch(e)?(this.state=oe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const i=this.currentToken;switch(i.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=oe.BEFORE_ATTRIBUTE_NAME,!1;case ne.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=oe.SELF_CLOSING_START_TAG,!1;case ne.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=oe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===ne.SOLIDUS?this.state=oe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){ch(e)?(this.state=oe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case ne.SOLIDUS:{this.state=oe.SCRIPT_DATA_END_TAG_OPEN;break}case ne.EXCLAMATION_MARK:{this.state=oe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=oe.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){ch(e)?(this.state=oe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===ne.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===ne.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case ne.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ne.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(On);break}case ne.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case ne.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ne.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(On);break}case ne.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case ne.HYPHEN_MINUS:{this._emitChars("-");break}case ne.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ne.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(On);break}case ne.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===ne.SOLIDUS?this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ch(e)?(this._emitChars("<"),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){ch(e)?(this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(ea.SCRIPT,!1)&&nG(this.preprocessor.peek(ea.SCRIPT.length))){this._emitCodePoint(e);for(let i=0;i<ea.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case ne.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ne.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(On);break}case ne.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case ne.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ne.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(On);break}case ne.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case ne.HYPHEN_MINUS:{this._emitChars("-");break}case ne.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ne.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(On);break}case ne.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===ne.SOLIDUS?(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(ea.SCRIPT,!1)&&nG(this.preprocessor.peek(ea.SCRIPT.length))){this._emitCodePoint(e);for(let i=0;i<ea.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.SOLIDUS:case ne.GREATER_THAN_SIGN:case ne.EOF:{this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case ne.EQUALS_SIGN:{this._err(Me.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=oe.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:case ne.SOLIDUS:case ne.GREATER_THAN_SIGN:case ne.EOF:{this._leaveAttrName(),this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case ne.EQUALS_SIGN:{this._leaveAttrName(),this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ne.QUOTATION_MARK:case ne.APOSTROPHE:case ne.LESS_THAN_SIGN:{this._err(Me.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.name+=On;break}default:this.currentAttr.name+=String.fromCodePoint(jy(e)?aT(e):e)}}_stateAfterAttributeName(e){switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ne.EQUALS_SIGN:{this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ne.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ne.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.QUOTATION_MARK:{this.state=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ne.APOSTROPHE:{this.state=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ne.GREATER_THAN_SIGN:{this._err(Me.missingAttributeValue),this.state=oe.DATA,this.emitCurrentTagToken();break}default:this.state=oe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case ne.QUOTATION_MARK:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ne.AMPERSAND:{this._startCharacterReference();break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.value+=On;break}case ne.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case ne.APOSTROPHE:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ne.AMPERSAND:{this._startCharacterReference();break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.value+=On;break}case ne.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ne.AMPERSAND:{this._startCharacterReference();break}case ne.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.value+=On;break}case ne.QUOTATION_MARK:case ne.APOSTROPHE:case ne.LESS_THAN_SIGN:case ne.EQUALS_SIGN:case ne.GRAVE_ACCENT:{this._err(Me.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case ne.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ne.SOLIDUS:{this._leaveAttrValue(),this.state=oe.SELF_CLOSING_START_TAG;break}case ne.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ne.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this._err(Me.missingWhitespaceBetweenAttributes),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case ne.GREATER_THAN_SIGN:{const i=this.currentToken;i.selfClosing=!0,this.state=oe.DATA,this.emitCurrentTagToken();break}case ne.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this._err(Me.unexpectedSolidusInTag),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const i=this.currentToken;switch(e){case ne.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(i);break}case ne.EOF:{this.emitCurrentComment(i),this._emitEOFToken();break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.data+=On;break}default:i.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(ea.DASH_DASH,!0)?(this._createCommentToken(ea.DASH_DASH.length+1),this.state=oe.COMMENT_START):this._consumeSequenceIfMatch(ea.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ea.DOCTYPE.length+1),this.state=oe.DOCTYPE):this._consumeSequenceIfMatch(ea.CDATA_START,!0)?this.inForeignNode?this.state=oe.CDATA_SECTION:(this._err(Me.cdataInHtmlContent),this._createCommentToken(ea.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=oe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Me.incorrectlyOpenedComment),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case ne.HYPHEN_MINUS:{this.state=oe.COMMENT_START_DASH;break}case ne.GREATER_THAN_SIGN:{this._err(Me.abruptClosingOfEmptyComment),this.state=oe.DATA;const i=this.currentToken;this.emitCurrentComment(i);break}default:this.state=oe.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const i=this.currentToken;switch(e){case ne.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ne.GREATER_THAN_SIGN:{this._err(Me.abruptClosingOfEmptyComment),this.state=oe.DATA,this.emitCurrentComment(i);break}case ne.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=oe.COMMENT,this._stateComment(e)}}_stateComment(e){const i=this.currentToken;switch(e){case ne.HYPHEN_MINUS:{this.state=oe.COMMENT_END_DASH;break}case ne.LESS_THAN_SIGN:{i.data+="<",this.state=oe.COMMENT_LESS_THAN_SIGN;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.data+=On;break}case ne.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const i=this.currentToken;switch(e){case ne.EXCLAMATION_MARK:{i.data+="!",this.state=oe.COMMENT_LESS_THAN_SIGN_BANG;break}case ne.LESS_THAN_SIGN:{i.data+="<";break}default:this.state=oe.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===ne.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=oe.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===ne.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=oe.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==ne.GREATER_THAN_SIGN&&e!==ne.EOF&&this._err(Me.nestedComment),this.state=oe.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const i=this.currentToken;switch(e){case ne.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ne.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=oe.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const i=this.currentToken;switch(e){case ne.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(i);break}case ne.EXCLAMATION_MARK:{this.state=oe.COMMENT_END_BANG;break}case ne.HYPHEN_MINUS:{i.data+="-";break}case ne.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--",this.state=oe.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const i=this.currentToken;switch(e){case ne.HYPHEN_MINUS:{i.data+="--!",this.state=oe.COMMENT_END_DASH;break}case ne.GREATER_THAN_SIGN:{this._err(Me.incorrectlyClosedComment),this.state=oe.DATA,this.emitCurrentComment(i);break}case ne.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--!",this.state=oe.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_NAME;break}case ne.GREATER_THAN_SIGN:{this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case ne.EOF:{this._err(Me.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.missingWhitespaceBeforeDoctypeName),this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(jy(e))this._createDoctypeToken(String.fromCharCode(aT(e))),this.state=oe.DOCTYPE_NAME;else switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.NULL:{this._err(Me.unexpectedNullCharacter),this._createDoctypeToken(On),this.state=oe.DOCTYPE_NAME;break}case ne.GREATER_THAN_SIGN:{this._err(Me.missingDoctypeName),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.EOF:{this._err(Me.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=oe.DOCTYPE_NAME}}_stateDoctypeName(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this.state=oe.AFTER_DOCTYPE_NAME;break}case ne.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(i);break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.name+=On;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.name+=String.fromCodePoint(jy(e)?aT(e):e)}}_stateAfterDoctypeName(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(i);break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ea.PUBLIC,!1)?this.state=oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ea.SYSTEM,!1)?this.state=oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Me.invalidCharacterSequenceAfterDoctypeName),i.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ne.QUOTATION_MARK:{this._err(Me.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ne.APOSTROPHE:{this._err(Me.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ne.GREATER_THAN_SIGN:{this._err(Me.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(i);break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.QUOTATION_MARK:{i.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ne.APOSTROPHE:{i.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ne.GREATER_THAN_SIGN:{this._err(Me.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(i);break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const i=this.currentToken;switch(e){case ne.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.publicId+=On;break}case ne.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const i=this.currentToken;switch(e){case ne.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.publicId+=On;break}case ne.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this.state=oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ne.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(i);break}case ne.QUOTATION_MARK:{this._err(Me.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ne.APOSTROPHE:{this._err(Me.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.QUOTATION_MARK:{i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ne.APOSTROPHE:{i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ne.QUOTATION_MARK:{this._err(Me.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ne.APOSTROPHE:{this._err(Me.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ne.GREATER_THAN_SIGN:{this._err(Me.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(i);break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.QUOTATION_MARK:{i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ne.APOSTROPHE:{i.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ne.GREATER_THAN_SIGN:{this._err(Me.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(i);break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const i=this.currentToken;switch(e){case ne.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.systemId+=On;break}case ne.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const i=this.currentToken;switch(e){case ne.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter),i.systemId+=On;break}case ne.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const i=this.currentToken;switch(e){case ne.SPACE:case ne.LINE_FEED:case ne.TABULATION:case ne.FORM_FEED:break;case ne.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.EOF:{this._err(Me.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Me.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const i=this.currentToken;switch(e){case ne.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=oe.DATA;break}case ne.NULL:{this._err(Me.unexpectedNullCharacter);break}case ne.EOF:{this.emitCurrentDoctype(i),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case ne.RIGHT_SQUARE_BRACKET:{this.state=oe.CDATA_SECTION_BRACKET;break}case ne.EOF:{this._err(Me.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===ne.RIGHT_SQUARE_BRACKET?this.state=oe.CDATA_SECTION_END:(this._emitChars("]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case ne.GREATER_THAN_SIGN:{this.state=oe.DATA;break}case ne.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(ne.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&iG(this.preprocessor.peek(1))?oe.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){iG(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===ne.SEMICOLON&&this._err(Me.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const $ne=new Set([w.DD,w.DT,w.LI,w.OPTGROUP,w.OPTION,w.P,w.RB,w.RP,w.RT,w.RTC]),rG=new Set([...$ne,w.CAPTION,w.COLGROUP,w.TBODY,w.TD,w.TFOOT,w.TH,w.THEAD,w.TR]),qE=new Set([w.APPLET,w.CAPTION,w.HTML,w.MARQUEE,w.OBJECT,w.TABLE,w.TD,w.TEMPLATE,w.TH]),j2e=new Set([...qE,w.OL,w.UL]),X2e=new Set([...qE,w.BUTTON]),sG=new Set([w.ANNOTATION_XML,w.MI,w.MN,w.MO,w.MS,w.MTEXT]),aG=new Set([w.DESC,w.FOREIGN_OBJECT,w.TITLE]),Y2e=new Set([w.TR,w.TEMPLATE,w.HTML]),q2e=new Set([w.TBODY,w.TFOOT,w.THEAD,w.TEMPLATE,w.HTML]),W2e=new Set([w.TABLE,w.TEMPLATE,w.HTML]),$2e=new Set([w.TD,w.TH]);class K2e{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,i,n){this.treeAdapter=i,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=w.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===w.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===je.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,i){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=i,this.currentTagId=i,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,i,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,i){const n=this._indexOf(e);this.items[n]=i,n===this.stackTop&&(this.current=i)}insertAfter(e,i,n){const r=this._indexOf(e)+1;this.items.splice(r,0,i),this.tagIDs.splice(r,0,n),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let i=this.stackTop+1;do i=this.tagIDs.lastIndexOf(e,i-1);while(i>0&&this.treeAdapter.getNamespaceURI(this.items[i])!==je.HTML);this.shortenToLength(Math.max(i,0))}shortenToLength(e){for(;this.stackTop>=e;){const i=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(i,this.stackTop<e)}}popUntilElementPopped(e){const i=this._indexOf(e);this.shortenToLength(Math.max(i,0))}popUntilPopped(e,i){const n=this._indexOfTagNames(e,i);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(lB,je.HTML)}popUntilTableCellPopped(){this.popUntilPopped($2e,je.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,i){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===i)return n;return-1}clearBackTo(e,i){const n=this._indexOfTagNames(e,i);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(W2e,je.HTML)}clearBackToTableBodyContext(){this.clearBackTo(q2e,je.HTML)}clearBackToTableRowContext(){this.clearBackTo(Y2e,je.HTML)}remove(e){const i=this._indexOf(e);i>=0&&(i===this.stackTop?this.pop():(this.items.splice(i,1),this.tagIDs.splice(i,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===w.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const i=this._indexOf(e)-1;return i>=0?this.items[i]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===w.HTML}hasInDynamicScope(e,i){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case je.HTML:{if(r===e)return!0;if(i.has(r))return!1;break}case je.SVG:{if(aG.has(r))return!1;break}case je.MATHML:{if(sG.has(r))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,qE)}hasInListItemScope(e){return this.hasInDynamicScope(e,j2e)}hasInButtonScope(e){return this.hasInDynamicScope(e,X2e)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const i=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case je.HTML:{if(lB.has(i))return!0;if(qE.has(i))return!1;break}case je.SVG:{if(aG.has(i))return!1;break}case je.MATHML:{if(sG.has(i))return!1;break}}}return!0}hasInTableScope(e){for(let i=this.stackTop;i>=0;i--)if(this.treeAdapter.getNamespaceURI(this.items[i])===je.HTML)switch(this.tagIDs[i]){case e:return!0;case w.TABLE:case w.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===je.HTML)switch(this.tagIDs[e]){case w.TBODY:case w.THEAD:case w.TFOOT:return!0;case w.TABLE:case w.HTML:return!1}return!0}hasInSelectScope(e){for(let i=this.stackTop;i>=0;i--)if(this.treeAdapter.getNamespaceURI(this.items[i])===je.HTML)switch(this.tagIDs[i]){case e:return!0;case w.OPTION:case w.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&$ne.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&rG.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&rG.has(this.currentTagId);)this.pop()}}const VD=3;var el;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(el||(el={}));const oG={type:el.Marker};class Q2e{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,i){const n=[],r=i.length,s=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let o=0;o<this.entries.length;o++){const l=this.entries[o];if(l.type===el.Marker)break;const{element:h}=l;if(this.treeAdapter.getTagName(h)===s&&this.treeAdapter.getNamespaceURI(h)===a){const d=this.treeAdapter.getAttrList(h);d.length===r&&n.push({idx:o,attrs:d})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<VD)return;const i=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,i);if(n.length<VD)return;const r=new Map(i.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<n.length;a++){const o=n[a];o.attrs.every(l=>r.get(l.name)===l.value)&&(s+=1,s>=VD&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(oG)}pushElement(e,i){this._ensureNoahArkCondition(e),this.entries.unshift({type:el.Element,element:e,token:i})}insertElementAfterBookmark(e,i){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:el.Element,element:e,token:i})}removeEntry(e){const i=this.entries.indexOf(e);i!==-1&&this.entries.splice(i,1)}clearToLastMarker(){const e=this.entries.indexOf(oG);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const i=this.entries.find(n=>n.type===el.Marker||this.treeAdapter.getTagName(n.element)===e);return i&&i.type===el.Element?i:null}getElementEntry(e){return this.entries.find(i=>i.type===el.Element&&i.element===e)}}const hh={createDocument(){return{nodeName:"#document",mode:po.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,i){return{nodeName:t,tagName:t,attrs:i,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,i){const n=t.childNodes.indexOf(i);t.childNodes.splice(n,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,i,n){const r=t.childNodes.find(s=>s.nodeName==="#documentType");if(r)r.name=e,r.publicId=i,r.systemId=n;else{const s={nodeName:"#documentType",name:e,publicId:i,systemId:n,parentNode:null};hh.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const i=t.childNodes[t.childNodes.length-1];if(hh.isTextNode(i)){i.value+=e;return}}hh.appendChild(t,hh.createTextNode(e))},insertTextBefore(t,e,i){const n=t.childNodes[t.childNodes.indexOf(i)-1];n&&hh.isTextNode(n)?n.value+=e:hh.insertBefore(t,hh.createTextNode(e),i)},adoptAttributes(t,e){const i=new Set(t.attrs.map(n=>n.name));for(let n=0;n<e.length;n++)i.has(e[n].name)||t.attrs.push(e[n])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},Kne="html",Z2e="about:legacy-compat",J2e="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Qne=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],e1e=[...Qne,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],t1e=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Zne=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],i1e=[...Zne,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function uG(t,e){return e.some(i=>t.startsWith(i))}function n1e(t){return t.name===Kne&&t.publicId===null&&(t.systemId===null||t.systemId===Z2e)}function r1e(t){if(t.name!==Kne)return po.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===J2e)return po.QUIRKS;let{publicId:i}=t;if(i!==null){if(i=i.toLowerCase(),t1e.has(i))return po.QUIRKS;let n=e===null?e1e:Qne;if(uG(i,n))return po.QUIRKS;if(n=e===null?Zne:i1e,uG(i,n))return po.LIMITED_QUIRKS}return po.NO_QUIRKS}const lG={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},s1e="definitionurl",a1e="definitionURL",o1e=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),u1e=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:je.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:je.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:je.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:je.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:je.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:je.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:je.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:je.XML}],["xml:space",{prefix:"xml",name:"space",namespace:je.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:je.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:je.XMLNS}]]),l1e=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),c1e=new Set([w.B,w.BIG,w.BLOCKQUOTE,w.BODY,w.BR,w.CENTER,w.CODE,w.DD,w.DIV,w.DL,w.DT,w.EM,w.EMBED,w.H1,w.H2,w.H3,w.H4,w.H5,w.H6,w.HEAD,w.HR,w.I,w.IMG,w.LI,w.LISTING,w.MENU,w.META,w.NOBR,w.OL,w.P,w.PRE,w.RUBY,w.S,w.SMALL,w.SPAN,w.STRONG,w.STRIKE,w.SUB,w.SUP,w.TABLE,w.TT,w.U,w.UL,w.VAR]);function h1e(t){const e=t.tagID;return e===w.FONT&&t.attrs.some(({name:n})=>n===ff.COLOR||n===ff.SIZE||n===ff.FACE)||c1e.has(e)}function Jne(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===s1e){t.attrs[e].name=a1e;break}}function ere(t){for(let e=0;e<t.attrs.length;e++){const i=o1e.get(t.attrs[e].name);i!=null&&(t.attrs[e].name=i)}}function p4(t){for(let e=0;e<t.attrs.length;e++){const i=u1e.get(t.attrs[e].name);i&&(t.attrs[e].prefix=i.prefix,t.attrs[e].name=i.name,t.attrs[e].namespace=i.namespace)}}function d1e(t){const e=l1e.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=jg(t.tagName))}function f1e(t,e){return e===je.MATHML&&(t===w.MI||t===w.MO||t===w.MN||t===w.MS||t===w.MTEXT)}function p1e(t,e,i){if(e===je.MATHML&&t===w.ANNOTATION_XML){for(let n=0;n<i.length;n++)if(i[n].name===ff.ENCODING){const r=i[n].value.toLowerCase();return r===lG.TEXT_HTML||r===lG.APPLICATION_XML}}return e===je.SVG&&(t===w.FOREIGN_OBJECT||t===w.DESC||t===w.TITLE)}function m1e(t,e,i,n){return(!n||n===je.HTML)&&p1e(t,e,i)||(!n||n===je.MATHML)&&f1e(t,e)}const g1e="hidden",b1e=8,y1e=3;var de;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(de||(de={}));const x1e={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},tre=new Set([w.TABLE,w.TBODY,w.TFOOT,w.THEAD,w.TR]),cG={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:hh,onParseError:null};class hG{constructor(e,i,n=null,r=null){this.fragmentContext=n,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=de.INITIAL,this.originalInsertionMode=de.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...cG,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=i??this.treeAdapter.createDocument(),this.tokenizer=new V2e(this.options,this),this.activeFormattingElements=new Q2e(this.treeAdapter),this.fragmentContextID=n?jg(this.treeAdapter.getTagName(n)):w.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new K2e(this.document,this.treeAdapter,this)}static parse(e,i){const n=new this(i);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,i){const n={...cG,...i};e??(e=n.treeAdapter.createElement(Ee.TEMPLATE,je.HTML,[]));const r=n.treeAdapter.createElement("documentmock",je.HTML,[]),s=new this(n,r,e);return s.fragmentContextID===w.TEMPLATE&&s.tmplInsertionModeStack.unshift(de.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,i),i}_err(e,i,n){var r;if(!this.onParseError)return;const s=(r=e.location)!==null&&r!==void 0?r:x1e,a={code:i,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:n?s.startLine:s.endLine,endCol:n?s.startCol:s.endCol,endOffset:n?s.startOffset:s.endOffset};this.onParseError(a)}onItemPush(e,i,n){var r,s;(s=(r=this.treeAdapter).onItemPush)===null||s===void 0||s.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,i)}onItemPop(e,i){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(r=(n=this.treeAdapter).onItemPop)===null||r===void 0||r.call(n,e,this.openElements.current),i){let s,a;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,a=this.fragmentContextID):{current:s,currentTagId:a}=this.openElements,this._setContextModes(s,a)}}_setContextModes(e,i){const n=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===je.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&e!==void 0&&i!==void 0&&!this._isIntegrationPoint(i,e)}_switchToTextParsing(e,i){this._insertElement(e,je.HTML),this.tokenizer.state=i,this.originalInsertionMode=this.insertionMode,this.insertionMode=de.TEXT}switchToPlaintextParsing(){this.insertionMode=de.TEXT,this.originalInsertionMode=de.IN_BODY,this.tokenizer.state=lr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Ee.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==je.HTML))switch(this.fragmentContextID){case w.TITLE:case w.TEXTAREA:{this.tokenizer.state=lr.RCDATA;break}case w.STYLE:case w.XMP:case w.IFRAME:case w.NOEMBED:case w.NOFRAMES:case w.NOSCRIPT:{this.tokenizer.state=lr.RAWTEXT;break}case w.SCRIPT:{this.tokenizer.state=lr.SCRIPT_DATA;break}case w.PLAINTEXT:{this.tokenizer.state=lr.PLAINTEXT;break}}}_setDocumentType(e){const i=e.name||"",n=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,i,n,r),e.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}}_attachElementToTree(e,i){if(this.options.sourceCodeLocationInfo){const n=i&&{...i,startTag:i};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,e)}}_appendElement(e,i){const n=this.treeAdapter.createElement(e.tagName,i,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,i){const n=this.treeAdapter.createElement(e.tagName,i,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,i){const n=this.treeAdapter.createElement(e,je.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,i)}_insertTemplate(e){const i=this.treeAdapter.createElement(e.tagName,je.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(i,n),this._attachElementToTree(i,e.location),this.openElements.push(i,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Ee.HTML,je.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,w.HTML)}_appendCommentNode(e,i){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(i,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let i,n;if(this._shouldFosterParentOnInsertion()?({parent:i,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(i,e.chars,n):this.treeAdapter.insertText(i,e.chars)):(i=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(i,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(i),s=n?r.lastIndexOf(n):r.length,a=r[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:l,endCol:h,endOffset:d}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:l,endCol:h,endOffset:d})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,i){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(i,n)}_setEndLocation(e,i){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&i.location){const n=i.location,r=this.treeAdapter.getTagName(e),s=i.type===mi.END_TAG&&r===i.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let i,n;return this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,n=this.fragmentContextID):{current:i,currentTagId:n}=this.openElements,e.tagID===w.SVG&&this.treeAdapter.getTagName(i)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(i)===je.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===w.MGLYPH||e.tagID===w.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,i,je.HTML)}_processToken(e){switch(e.type){case mi.CHARACTER:{this.onCharacter(e);break}case mi.NULL_CHARACTER:{this.onNullCharacter(e);break}case mi.COMMENT:{this.onComment(e);break}case mi.DOCTYPE:{this.onDoctype(e);break}case mi.START_TAG:{this._processStartTag(e);break}case mi.END_TAG:{this.onEndTag(e);break}case mi.EOF:{this.onEof(e);break}case mi.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,i,n){const r=this.treeAdapter.getNamespaceURI(i),s=this.treeAdapter.getAttrList(i);return m1e(e,r,s,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const i=this.activeFormattingElements.entries.findIndex(r=>r.type===el.Marker||this.openElements.contains(r.element)),n=i===-1?e-1:i-1;for(let r=n;r>=0;r--){const s=this.activeFormattingElements.entries[r];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=de.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(w.P),this.openElements.popUntilTagNamePopped(w.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case w.TR:{this.insertionMode=de.IN_ROW;return}case w.TBODY:case w.THEAD:case w.TFOOT:{this.insertionMode=de.IN_TABLE_BODY;return}case w.CAPTION:{this.insertionMode=de.IN_CAPTION;return}case w.COLGROUP:{this.insertionMode=de.IN_COLUMN_GROUP;return}case w.TABLE:{this.insertionMode=de.IN_TABLE;return}case w.BODY:{this.insertionMode=de.IN_BODY;return}case w.FRAMESET:{this.insertionMode=de.IN_FRAMESET;return}case w.SELECT:{this._resetInsertionModeForSelect(e);return}case w.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case w.HTML:{this.insertionMode=this.headElement?de.AFTER_HEAD:de.BEFORE_HEAD;return}case w.TD:case w.TH:{if(e>0){this.insertionMode=de.IN_CELL;return}break}case w.HEAD:{if(e>0){this.insertionMode=de.IN_HEAD;return}break}}this.insertionMode=de.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let i=e-1;i>0;i--){const n=this.openElements.tagIDs[i];if(n===w.TEMPLATE)break;if(n===w.TABLE){this.insertionMode=de.IN_SELECT_IN_TABLE;return}}this.insertionMode=de.IN_SELECT}_isElementCausesFosterParenting(e){return tre.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const i=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case w.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(i)===je.HTML)return{parent:this.treeAdapter.getTemplateContent(i),beforeElement:null};break}case w.TABLE:{const n=this.treeAdapter.getParentNode(i);return n?{parent:n,beforeElement:i}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const i=this._findFosterParentingLocation();i.beforeElement?this.treeAdapter.insertBefore(i.parent,e,i.beforeElement):this.treeAdapter.appendChild(i.parent,e)}_isSpecialElement(e,i){const n=this.treeAdapter.getNamespaceURI(e);return U2e[n].has(i)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){$Te(this,e);return}switch(this.insertionMode){case de.INITIAL:{_y(this,e);break}case de.BEFORE_HTML:{lx(this,e);break}case de.BEFORE_HEAD:{cx(this,e);break}case de.IN_HEAD:{hx(this,e);break}case de.IN_HEAD_NO_SCRIPT:{dx(this,e);break}case de.AFTER_HEAD:{fx(this,e);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:{nre(this,e);break}case de.TEXT:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{jD(this,e);break}case de.IN_TABLE_TEXT:{lre(this,e);break}case de.IN_COLUMN_GROUP:{WE(this,e);break}case de.AFTER_BODY:{$E(this,e);break}case de.AFTER_AFTER_BODY:{ZT(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){WTe(this,e);return}switch(this.insertionMode){case de.INITIAL:{_y(this,e);break}case de.BEFORE_HTML:{lx(this,e);break}case de.BEFORE_HEAD:{cx(this,e);break}case de.IN_HEAD:{hx(this,e);break}case de.IN_HEAD_NO_SCRIPT:{dx(this,e);break}case de.AFTER_HEAD:{fx(this,e);break}case de.TEXT:{this._insertCharacters(e);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{jD(this,e);break}case de.IN_COLUMN_GROUP:{WE(this,e);break}case de.AFTER_BODY:{$E(this,e);break}case de.AFTER_AFTER_BODY:{ZT(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){cB(this,e);return}switch(this.insertionMode){case de.INITIAL:case de.BEFORE_HTML:case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_TEMPLATE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{cB(this,e);break}case de.IN_TABLE_TEXT:{vy(this,e);break}case de.AFTER_BODY:{C1e(this,e);break}case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{w1e(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case de.INITIAL:{D1e(this,e);break}case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:{this._err(e,Me.misplacedDoctype);break}case de.IN_TABLE_TEXT:{vy(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Me.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?KTe(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case de.INITIAL:{_y(this,e);break}case de.BEFORE_HTML:{R1e(this,e);break}case de.BEFORE_HEAD:{M1e(this,e);break}case de.IN_HEAD:{gu(this,e);break}case de.IN_HEAD_NO_SCRIPT:{O1e(this,e);break}case de.AFTER_HEAD:{I1e(this,e);break}case de.IN_BODY:{Rs(this,e);break}case de.IN_TABLE:{hg(this,e);break}case de.IN_TABLE_TEXT:{vy(this,e);break}case de.IN_CAPTION:{BTe(this,e);break}case de.IN_COLUMN_GROUP:{b4(this,e);break}case de.IN_TABLE_BODY:{bA(this,e);break}case de.IN_ROW:{yA(this,e);break}case de.IN_CELL:{FTe(this,e);break}case de.IN_SELECT:{dre(this,e);break}case de.IN_SELECT_IN_TABLE:{LTe(this,e);break}case de.IN_TEMPLATE:{UTe(this,e);break}case de.AFTER_BODY:{HTe(this,e);break}case de.IN_FRAMESET:{zTe(this,e);break}case de.AFTER_FRAMESET:{jTe(this,e);break}case de.AFTER_AFTER_BODY:{YTe(this,e);break}case de.AFTER_AFTER_FRAMESET:{qTe(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?QTe(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case de.INITIAL:{_y(this,e);break}case de.BEFORE_HTML:{P1e(this,e);break}case de.BEFORE_HEAD:{B1e(this,e);break}case de.IN_HEAD:{k1e(this,e);break}case de.IN_HEAD_NO_SCRIPT:{F1e(this,e);break}case de.AFTER_HEAD:{L1e(this,e);break}case de.IN_BODY:{gA(this,e);break}case de.TEXT:{TTe(this,e);break}case de.IN_TABLE:{Kx(this,e);break}case de.IN_TABLE_TEXT:{vy(this,e);break}case de.IN_CAPTION:{kTe(this,e);break}case de.IN_COLUMN_GROUP:{OTe(this,e);break}case de.IN_TABLE_BODY:{hB(this,e);break}case de.IN_ROW:{hre(this,e);break}case de.IN_CELL:{ITe(this,e);break}case de.IN_SELECT:{fre(this,e);break}case de.IN_SELECT_IN_TABLE:{NTe(this,e);break}case de.IN_TEMPLATE:{GTe(this,e);break}case de.AFTER_BODY:{mre(this,e);break}case de.IN_FRAMESET:{VTe(this,e);break}case de.AFTER_FRAMESET:{XTe(this,e);break}case de.AFTER_AFTER_BODY:{ZT(this,e);break}}}onEof(e){switch(this.insertionMode){case de.INITIAL:{_y(this,e);break}case de.BEFORE_HTML:{lx(this,e);break}case de.BEFORE_HEAD:{cx(this,e);break}case de.IN_HEAD:{hx(this,e);break}case de.IN_HEAD_NO_SCRIPT:{dx(this,e);break}case de.AFTER_HEAD:{fx(this,e);break}case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{ore(this,e);break}case de.TEXT:{ETe(this,e);break}case de.IN_TABLE_TEXT:{vy(this,e);break}case de.IN_TEMPLATE:{pre(this,e);break}case de.AFTER_BODY:case de.IN_FRAMESET:case de.AFTER_FRAMESET:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{g4(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===ne.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.TEXT:case de.IN_COLUMN_GROUP:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{this._insertCharacters(e);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:case de.AFTER_BODY:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{ire(this,e);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{jD(this,e);break}case de.IN_TABLE_TEXT:{ure(this,e);break}}}}function _1e(t,e){let i=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return i?t.openElements.contains(i.element)?t.openElements.hasInScope(e.tagID)||(i=null):(t.activeFormattingElements.removeEntry(i),i=null):are(t,e),i}function v1e(t,e){let i=null,n=t.openElements.stackTop;for(;n>=0;n--){const r=t.openElements.items[n];if(r===e.element)break;t._isSpecialElement(r,t.openElements.tagIDs[n])&&(i=r)}return i||(t.openElements.shortenToLength(Math.max(n,0)),t.activeFormattingElements.removeEntry(e)),i}function T1e(t,e,i){let n=e,r=t.openElements.getCommonAncestor(e);for(let s=0,a=r;a!==i;s++,a=r){r=t.openElements.getCommonAncestor(a);const o=t.activeFormattingElements.getElementEntry(a),l=o&&s>=y1e;!o||l?(l&&t.activeFormattingElements.removeEntry(o),t.openElements.remove(a)):(a=E1e(t,o),n===e&&(t.activeFormattingElements.bookmark=o),t.treeAdapter.detachNode(n),t.treeAdapter.appendChild(a,n),n=a)}return n}function E1e(t,e){const i=t.treeAdapter.getNamespaceURI(e.element),n=t.treeAdapter.createElement(e.token.tagName,i,e.token.attrs);return t.openElements.replace(e.element,n),e.element=n,n}function S1e(t,e,i){const n=t.treeAdapter.getTagName(e),r=jg(n);if(t._isElementCausesFosterParenting(r))t._fosterParentElement(i);else{const s=t.treeAdapter.getNamespaceURI(e);r===w.TEMPLATE&&s===je.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,i)}}function A1e(t,e,i){const n=t.treeAdapter.getNamespaceURI(i.element),{token:r}=i,s=t.treeAdapter.createElement(r.tagName,n,r.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,r),t.activeFormattingElements.removeEntry(i),t.openElements.remove(i.element),t.openElements.insertAfter(e,s,r.tagID)}function m4(t,e){for(let i=0;i<b1e;i++){const n=_1e(t,e);if(!n)break;const r=v1e(t,n);if(!r)break;t.activeFormattingElements.bookmark=n;const s=T1e(t,r,n.element),a=t.openElements.getCommonAncestor(n.element);t.treeAdapter.detachNode(s),a&&S1e(t,a,s),A1e(t,r,n)}}function cB(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function C1e(t,e){t._appendCommentNode(e,t.openElements.items[0])}function w1e(t,e){t._appendCommentNode(e,t.document)}function g4(t,e){if(t.stopped=!0,e.location){const i=t.fragmentContext?0:2;for(let n=t.openElements.stackTop;n>=i;n--)t._setEndLocation(t.openElements.items[n],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const n=t.openElements.items[0],r=t.treeAdapter.getNodeSourceCodeLocation(n);if(r&&!r.endTag&&(t._setEndLocation(n,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],a=t.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&t._setEndLocation(s,e)}}}}function D1e(t,e){t._setDocumentType(e);const i=e.forceQuirks?po.QUIRKS:r1e(e);n1e(e)||t._err(e,Me.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,i),t.insertionMode=de.BEFORE_HTML}function _y(t,e){t._err(e,Me.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,po.QUIRKS),t.insertionMode=de.BEFORE_HTML,t._processToken(e)}function R1e(t,e){e.tagID===w.HTML?(t._insertElement(e,je.HTML),t.insertionMode=de.BEFORE_HEAD):lx(t,e)}function P1e(t,e){const i=e.tagID;(i===w.HTML||i===w.HEAD||i===w.BODY||i===w.BR)&&lx(t,e)}function lx(t,e){t._insertFakeRootElement(),t.insertionMode=de.BEFORE_HEAD,t._processToken(e)}function M1e(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.HEAD:{t._insertElement(e,je.HTML),t.headElement=t.openElements.current,t.insertionMode=de.IN_HEAD;break}default:cx(t,e)}}function B1e(t,e){const i=e.tagID;i===w.HEAD||i===w.BODY||i===w.HTML||i===w.BR?cx(t,e):t._err(e,Me.endTagWithoutMatchingOpenElement)}function cx(t,e){t._insertFakeElement(Ee.HEAD,w.HEAD),t.headElement=t.openElements.current,t.insertionMode=de.IN_HEAD,t._processToken(e)}function gu(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:{t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case w.TITLE:{t._switchToTextParsing(e,lr.RCDATA);break}case w.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,lr.RAWTEXT):(t._insertElement(e,je.HTML),t.insertionMode=de.IN_HEAD_NO_SCRIPT);break}case w.NOFRAMES:case w.STYLE:{t._switchToTextParsing(e,lr.RAWTEXT);break}case w.SCRIPT:{t._switchToTextParsing(e,lr.SCRIPT_DATA);break}case w.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=de.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(de.IN_TEMPLATE);break}case w.HEAD:{t._err(e,Me.misplacedStartTagForHeadElement);break}default:hx(t,e)}}function k1e(t,e){switch(e.tagID){case w.HEAD:{t.openElements.pop(),t.insertionMode=de.AFTER_HEAD;break}case w.BODY:case w.BR:case w.HTML:{hx(t,e);break}case w.TEMPLATE:{jf(t,e);break}default:t._err(e,Me.endTagWithoutMatchingOpenElement)}}function jf(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==w.TEMPLATE&&t._err(e,Me.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(w.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Me.endTagWithoutMatchingOpenElement)}function hx(t,e){t.openElements.pop(),t.insertionMode=de.AFTER_HEAD,t._processToken(e)}function O1e(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.BASEFONT:case w.BGSOUND:case w.HEAD:case w.LINK:case w.META:case w.NOFRAMES:case w.STYLE:{gu(t,e);break}case w.NOSCRIPT:{t._err(e,Me.nestedNoscriptInHead);break}default:dx(t,e)}}function F1e(t,e){switch(e.tagID){case w.NOSCRIPT:{t.openElements.pop(),t.insertionMode=de.IN_HEAD;break}case w.BR:{dx(t,e);break}default:t._err(e,Me.endTagWithoutMatchingOpenElement)}}function dx(t,e){const i=e.type===mi.EOF?Me.openElementsLeftAfterEof:Me.disallowedContentInNoscriptInHead;t._err(e,i),t.openElements.pop(),t.insertionMode=de.IN_HEAD,t._processToken(e)}function I1e(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.BODY:{t._insertElement(e,je.HTML),t.framesetOk=!1,t.insertionMode=de.IN_BODY;break}case w.FRAMESET:{t._insertElement(e,je.HTML),t.insertionMode=de.IN_FRAMESET;break}case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:case w.NOFRAMES:case w.SCRIPT:case w.STYLE:case w.TEMPLATE:case w.TITLE:{t._err(e,Me.abandonedHeadElementChild),t.openElements.push(t.headElement,w.HEAD),gu(t,e),t.openElements.remove(t.headElement);break}case w.HEAD:{t._err(e,Me.misplacedStartTagForHeadElement);break}default:fx(t,e)}}function L1e(t,e){switch(e.tagID){case w.BODY:case w.HTML:case w.BR:{fx(t,e);break}case w.TEMPLATE:{jf(t,e);break}default:t._err(e,Me.endTagWithoutMatchingOpenElement)}}function fx(t,e){t._insertFakeElement(Ee.BODY,w.BODY),t.insertionMode=de.IN_BODY,mA(t,e)}function mA(t,e){switch(e.type){case mi.CHARACTER:{nre(t,e);break}case mi.WHITESPACE_CHARACTER:{ire(t,e);break}case mi.COMMENT:{cB(t,e);break}case mi.START_TAG:{Rs(t,e);break}case mi.END_TAG:{gA(t,e);break}case mi.EOF:{ore(t,e);break}}}function ire(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function nre(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function N1e(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function U1e(t,e){const i=t.openElements.tryPeekProperlyNestedBodyElement();i&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(i,e.attrs))}function G1e(t,e){const i=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&i&&(t.treeAdapter.detachNode(i),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,je.HTML),t.insertionMode=de.IN_FRAMESET)}function H1e(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,je.HTML)}function z1e(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&lB.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,je.HTML)}function V1e(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,je.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function j1e(t,e){const i=t.openElements.tmplCount>0;(!t.formElement||i)&&(t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,je.HTML),i||(t.formElement=t.openElements.current))}function X1e(t,e){t.framesetOk=!1;const i=e.tagID;for(let n=t.openElements.stackTop;n>=0;n--){const r=t.openElements.tagIDs[n];if(i===w.LI&&r===w.LI||(i===w.DD||i===w.DT)&&(r===w.DD||r===w.DT)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r);break}if(r!==w.ADDRESS&&r!==w.DIV&&r!==w.P&&t._isSpecialElement(t.openElements.items[n],r))break}t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,je.HTML)}function Y1e(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,je.HTML),t.tokenizer.state=lr.PLAINTEXT}function q1e(t,e){t.openElements.hasInScope(w.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(w.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.framesetOk=!1}function W1e(t,e){const i=t.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);i&&(m4(t,e),t.openElements.remove(i.element),t.activeFormattingElements.removeEntry(i)),t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function $1e(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function K1e(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(w.NOBR)&&(m4(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,je.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Q1e(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function Z1e(t,e){t.treeAdapter.getDocumentMode(t.document)!==po.QUIRKS&&t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,je.HTML),t.framesetOk=!1,t.insertionMode=de.IN_TABLE}function rre(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,je.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function sre(t){const e=qne(t,ff.TYPE);return e!=null&&e.toLowerCase()===g1e}function J1e(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,je.HTML),sre(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function eTe(t,e){t._appendElement(e,je.HTML),e.ackSelfClosing=!0}function tTe(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._appendElement(e,je.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function iTe(t,e){e.tagName=Ee.IMG,e.tagID=w.IMG,rre(t,e)}function nTe(t,e){t._insertElement(e,je.HTML),t.skipNextNewLine=!0,t.tokenizer.state=lr.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=de.TEXT}function rTe(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,lr.RAWTEXT)}function sTe(t,e){t.framesetOk=!1,t._switchToTextParsing(e,lr.RAWTEXT)}function dG(t,e){t._switchToTextParsing(e,lr.RAWTEXT)}function aTe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===de.IN_TABLE||t.insertionMode===de.IN_CAPTION||t.insertionMode===de.IN_TABLE_BODY||t.insertionMode===de.IN_ROW||t.insertionMode===de.IN_CELL?de.IN_SELECT_IN_TABLE:de.IN_SELECT}function oTe(t,e){t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML)}function uTe(t,e){t.openElements.hasInScope(w.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,je.HTML)}function lTe(t,e){t.openElements.hasInScope(w.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(w.RTC),t._insertElement(e,je.HTML)}function cTe(t,e){t._reconstructActiveFormattingElements(),Jne(e),p4(e),e.selfClosing?t._appendElement(e,je.MATHML):t._insertElement(e,je.MATHML),e.ackSelfClosing=!0}function hTe(t,e){t._reconstructActiveFormattingElements(),ere(e),p4(e),e.selfClosing?t._appendElement(e,je.SVG):t._insertElement(e,je.SVG),e.ackSelfClosing=!0}function fG(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML)}function Rs(t,e){switch(e.tagID){case w.I:case w.S:case w.B:case w.U:case w.EM:case w.TT:case w.BIG:case w.CODE:case w.FONT:case w.SMALL:case w.STRIKE:case w.STRONG:{$1e(t,e);break}case w.A:{W1e(t,e);break}case w.H1:case w.H2:case w.H3:case w.H4:case w.H5:case w.H6:{z1e(t,e);break}case w.P:case w.DL:case w.OL:case w.UL:case w.DIV:case w.DIR:case w.NAV:case w.MAIN:case w.MENU:case w.ASIDE:case w.CENTER:case w.FIGURE:case w.FOOTER:case w.HEADER:case w.HGROUP:case w.DIALOG:case w.DETAILS:case w.ADDRESS:case w.ARTICLE:case w.SEARCH:case w.SECTION:case w.SUMMARY:case w.FIELDSET:case w.BLOCKQUOTE:case w.FIGCAPTION:{H1e(t,e);break}case w.LI:case w.DD:case w.DT:{X1e(t,e);break}case w.BR:case w.IMG:case w.WBR:case w.AREA:case w.EMBED:case w.KEYGEN:{rre(t,e);break}case w.HR:{tTe(t,e);break}case w.RB:case w.RTC:{uTe(t,e);break}case w.RT:case w.RP:{lTe(t,e);break}case w.PRE:case w.LISTING:{V1e(t,e);break}case w.XMP:{rTe(t,e);break}case w.SVG:{hTe(t,e);break}case w.HTML:{N1e(t,e);break}case w.BASE:case w.LINK:case w.META:case w.STYLE:case w.TITLE:case w.SCRIPT:case w.BGSOUND:case w.BASEFONT:case w.TEMPLATE:{gu(t,e);break}case w.BODY:{U1e(t,e);break}case w.FORM:{j1e(t,e);break}case w.NOBR:{K1e(t,e);break}case w.MATH:{cTe(t,e);break}case w.TABLE:{Z1e(t,e);break}case w.INPUT:{J1e(t,e);break}case w.PARAM:case w.TRACK:case w.SOURCE:{eTe(t,e);break}case w.IMAGE:{iTe(t,e);break}case w.BUTTON:{q1e(t,e);break}case w.APPLET:case w.OBJECT:case w.MARQUEE:{Q1e(t,e);break}case w.IFRAME:{sTe(t,e);break}case w.SELECT:{aTe(t,e);break}case w.OPTION:case w.OPTGROUP:{oTe(t,e);break}case w.NOEMBED:case w.NOFRAMES:{dG(t,e);break}case w.FRAMESET:{G1e(t,e);break}case w.TEXTAREA:{nTe(t,e);break}case w.NOSCRIPT:{t.options.scriptingEnabled?dG(t,e):fG(t,e);break}case w.PLAINTEXT:{Y1e(t,e);break}case w.COL:case w.TH:case w.TD:case w.TR:case w.HEAD:case w.FRAME:case w.TBODY:case w.TFOOT:case w.THEAD:case w.CAPTION:case w.COLGROUP:break;default:fG(t,e)}}function dTe(t,e){if(t.openElements.hasInScope(w.BODY)&&(t.insertionMode=de.AFTER_BODY,t.options.sourceCodeLocationInfo)){const i=t.openElements.tryPeekProperlyNestedBodyElement();i&&t._setEndLocation(i,e)}}function fTe(t,e){t.openElements.hasInScope(w.BODY)&&(t.insertionMode=de.AFTER_BODY,mre(t,e))}function pTe(t,e){const i=e.tagID;t.openElements.hasInScope(i)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(i))}function mTe(t){const e=t.openElements.tmplCount>0,{formElement:i}=t;e||(t.formElement=null),(i||e)&&t.openElements.hasInScope(w.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(w.FORM):i&&t.openElements.remove(i))}function gTe(t){t.openElements.hasInButtonScope(w.P)||t._insertFakeElement(Ee.P,w.P),t._closePElement()}function bTe(t){t.openElements.hasInListItemScope(w.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(w.LI),t.openElements.popUntilTagNamePopped(w.LI))}function yTe(t,e){const i=e.tagID;t.openElements.hasInScope(i)&&(t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i))}function xTe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function _Te(t,e){const i=e.tagID;t.openElements.hasInScope(i)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(i),t.activeFormattingElements.clearToLastMarker())}function vTe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(Ee.BR,w.BR),t.openElements.pop(),t.framesetOk=!1}function are(t,e){const i=e.tagName,n=e.tagID;for(let r=t.openElements.stackTop;r>0;r--){const s=t.openElements.items[r],a=t.openElements.tagIDs[r];if(n===a&&(n!==w.UNKNOWN||t.treeAdapter.getTagName(s)===i)){t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.stackTop>=r&&t.openElements.shortenToLength(r);break}if(t._isSpecialElement(s,a))break}}function gA(t,e){switch(e.tagID){case w.A:case w.B:case w.I:case w.S:case w.U:case w.EM:case w.TT:case w.BIG:case w.CODE:case w.FONT:case w.NOBR:case w.SMALL:case w.STRIKE:case w.STRONG:{m4(t,e);break}case w.P:{gTe(t);break}case w.DL:case w.UL:case w.OL:case w.DIR:case w.DIV:case w.NAV:case w.PRE:case w.MAIN:case w.MENU:case w.ASIDE:case w.BUTTON:case w.CENTER:case w.FIGURE:case w.FOOTER:case w.HEADER:case w.HGROUP:case w.DIALOG:case w.ADDRESS:case w.ARTICLE:case w.DETAILS:case w.SEARCH:case w.SECTION:case w.SUMMARY:case w.LISTING:case w.FIELDSET:case w.BLOCKQUOTE:case w.FIGCAPTION:{pTe(t,e);break}case w.LI:{bTe(t);break}case w.DD:case w.DT:{yTe(t,e);break}case w.H1:case w.H2:case w.H3:case w.H4:case w.H5:case w.H6:{xTe(t);break}case w.BR:{vTe(t);break}case w.BODY:{dTe(t,e);break}case w.HTML:{fTe(t,e);break}case w.FORM:{mTe(t);break}case w.APPLET:case w.OBJECT:case w.MARQUEE:{_Te(t,e);break}case w.TEMPLATE:{jf(t,e);break}default:are(t,e)}}function ore(t,e){t.tmplInsertionModeStack.length>0?pre(t,e):g4(t,e)}function TTe(t,e){var i;e.tagID===w.SCRIPT&&((i=t.scriptHandler)===null||i===void 0||i.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function ETe(t,e){t._err(e,Me.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function jD(t,e){if(t.openElements.currentTagId!==void 0&&tre.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=de.IN_TABLE_TEXT,e.type){case mi.CHARACTER:{lre(t,e);break}case mi.WHITESPACE_CHARACTER:{ure(t,e);break}}else F_(t,e)}function STe(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,je.HTML),t.insertionMode=de.IN_CAPTION}function ATe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,je.HTML),t.insertionMode=de.IN_COLUMN_GROUP}function CTe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Ee.COLGROUP,w.COLGROUP),t.insertionMode=de.IN_COLUMN_GROUP,b4(t,e)}function wTe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,je.HTML),t.insertionMode=de.IN_TABLE_BODY}function DTe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Ee.TBODY,w.TBODY),t.insertionMode=de.IN_TABLE_BODY,bA(t,e)}function RTe(t,e){t.openElements.hasInTableScope(w.TABLE)&&(t.openElements.popUntilTagNamePopped(w.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function PTe(t,e){sre(e)?t._appendElement(e,je.HTML):F_(t,e),e.ackSelfClosing=!0}function MTe(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,je.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function hg(t,e){switch(e.tagID){case w.TD:case w.TH:case w.TR:{DTe(t,e);break}case w.STYLE:case w.SCRIPT:case w.TEMPLATE:{gu(t,e);break}case w.COL:{CTe(t,e);break}case w.FORM:{MTe(t,e);break}case w.TABLE:{RTe(t,e);break}case w.TBODY:case w.TFOOT:case w.THEAD:{wTe(t,e);break}case w.INPUT:{PTe(t,e);break}case w.CAPTION:{STe(t,e);break}case w.COLGROUP:{ATe(t,e);break}default:F_(t,e)}}function Kx(t,e){switch(e.tagID){case w.TABLE:{t.openElements.hasInTableScope(w.TABLE)&&(t.openElements.popUntilTagNamePopped(w.TABLE),t._resetInsertionMode());break}case w.TEMPLATE:{jf(t,e);break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TBODY:case w.TD:case w.TFOOT:case w.TH:case w.THEAD:case w.TR:break;default:F_(t,e)}}function F_(t,e){const i=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,mA(t,e),t.fosterParentingEnabled=i}function ure(t,e){t.pendingCharacterTokens.push(e)}function lre(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function vy(t,e){let i=0;if(t.hasNonWhitespacePendingCharacterToken)for(;i<t.pendingCharacterTokens.length;i++)F_(t,t.pendingCharacterTokens[i]);else for(;i<t.pendingCharacterTokens.length;i++)t._insertCharacters(t.pendingCharacterTokens[i]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const cre=new Set([w.CAPTION,w.COL,w.COLGROUP,w.TBODY,w.TD,w.TFOOT,w.TH,w.THEAD,w.TR]);function BTe(t,e){const i=e.tagID;cre.has(i)?t.openElements.hasInTableScope(w.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(w.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=de.IN_TABLE,hg(t,e)):Rs(t,e)}function kTe(t,e){const i=e.tagID;switch(i){case w.CAPTION:case w.TABLE:{t.openElements.hasInTableScope(w.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(w.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=de.IN_TABLE,i===w.TABLE&&Kx(t,e));break}case w.BODY:case w.COL:case w.COLGROUP:case w.HTML:case w.TBODY:case w.TD:case w.TFOOT:case w.TH:case w.THEAD:case w.TR:break;default:gA(t,e)}}function b4(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.COL:{t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case w.TEMPLATE:{gu(t,e);break}default:WE(t,e)}}function OTe(t,e){switch(e.tagID){case w.COLGROUP:{t.openElements.currentTagId===w.COLGROUP&&(t.openElements.pop(),t.insertionMode=de.IN_TABLE);break}case w.TEMPLATE:{jf(t,e);break}case w.COL:break;default:WE(t,e)}}function WE(t,e){t.openElements.currentTagId===w.COLGROUP&&(t.openElements.pop(),t.insertionMode=de.IN_TABLE,t._processToken(e))}function bA(t,e){switch(e.tagID){case w.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,je.HTML),t.insertionMode=de.IN_ROW;break}case w.TH:case w.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(Ee.TR,w.TR),t.insertionMode=de.IN_ROW,yA(t,e);break}case w.CAPTION:case w.COL:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=de.IN_TABLE,hg(t,e));break}default:hg(t,e)}}function hB(t,e){const i=e.tagID;switch(e.tagID){case w.TBODY:case w.TFOOT:case w.THEAD:{t.openElements.hasInTableScope(i)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=de.IN_TABLE);break}case w.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=de.IN_TABLE,Kx(t,e));break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TD:case w.TH:case w.TR:break;default:Kx(t,e)}}function yA(t,e){switch(e.tagID){case w.TH:case w.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,je.HTML),t.insertionMode=de.IN_CELL,t.activeFormattingElements.insertMarker();break}case w.CAPTION:case w.COL:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:case w.TR:{t.openElements.hasInTableScope(w.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=de.IN_TABLE_BODY,bA(t,e));break}default:hg(t,e)}}function hre(t,e){switch(e.tagID){case w.TR:{t.openElements.hasInTableScope(w.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=de.IN_TABLE_BODY);break}case w.TABLE:{t.openElements.hasInTableScope(w.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=de.IN_TABLE_BODY,hB(t,e));break}case w.TBODY:case w.TFOOT:case w.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(w.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=de.IN_TABLE_BODY,hB(t,e));break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TD:case w.TH:break;default:Kx(t,e)}}function FTe(t,e){const i=e.tagID;cre.has(i)?(t.openElements.hasInTableScope(w.TD)||t.openElements.hasInTableScope(w.TH))&&(t._closeTableCell(),yA(t,e)):Rs(t,e)}function ITe(t,e){const i=e.tagID;switch(i){case w.TD:case w.TH:{t.openElements.hasInTableScope(i)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(i),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=de.IN_ROW);break}case w.TABLE:case w.TBODY:case w.TFOOT:case w.THEAD:case w.TR:{t.openElements.hasInTableScope(i)&&(t._closeTableCell(),hre(t,e));break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:break;default:gA(t,e)}}function dre(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.OPTION:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t._insertElement(e,je.HTML);break}case w.OPTGROUP:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t.openElements.currentTagId===w.OPTGROUP&&t.openElements.pop(),t._insertElement(e,je.HTML);break}case w.HR:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t.openElements.currentTagId===w.OPTGROUP&&t.openElements.pop(),t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case w.INPUT:case w.KEYGEN:case w.TEXTAREA:case w.SELECT:{t.openElements.hasInSelectScope(w.SELECT)&&(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode(),e.tagID!==w.SELECT&&t._processStartTag(e));break}case w.SCRIPT:case w.TEMPLATE:{gu(t,e);break}}}function fre(t,e){switch(e.tagID){case w.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===w.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===w.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===w.OPTGROUP&&t.openElements.pop();break}case w.OPTION:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop();break}case w.SELECT:{t.openElements.hasInSelectScope(w.SELECT)&&(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode());break}case w.TEMPLATE:{jf(t,e);break}}}function LTe(t,e){const i=e.tagID;i===w.CAPTION||i===w.TABLE||i===w.TBODY||i===w.TFOOT||i===w.THEAD||i===w.TR||i===w.TD||i===w.TH?(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode(),t._processStartTag(e)):dre(t,e)}function NTe(t,e){const i=e.tagID;i===w.CAPTION||i===w.TABLE||i===w.TBODY||i===w.TFOOT||i===w.THEAD||i===w.TR||i===w.TD||i===w.TH?t.openElements.hasInTableScope(i)&&(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode(),t.onEndTag(e)):fre(t,e)}function UTe(t,e){switch(e.tagID){case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:case w.NOFRAMES:case w.SCRIPT:case w.STYLE:case w.TEMPLATE:case w.TITLE:{gu(t,e);break}case w.CAPTION:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:{t.tmplInsertionModeStack[0]=de.IN_TABLE,t.insertionMode=de.IN_TABLE,hg(t,e);break}case w.COL:{t.tmplInsertionModeStack[0]=de.IN_COLUMN_GROUP,t.insertionMode=de.IN_COLUMN_GROUP,b4(t,e);break}case w.TR:{t.tmplInsertionModeStack[0]=de.IN_TABLE_BODY,t.insertionMode=de.IN_TABLE_BODY,bA(t,e);break}case w.TD:case w.TH:{t.tmplInsertionModeStack[0]=de.IN_ROW,t.insertionMode=de.IN_ROW,yA(t,e);break}default:t.tmplInsertionModeStack[0]=de.IN_BODY,t.insertionMode=de.IN_BODY,Rs(t,e)}}function GTe(t,e){e.tagID===w.TEMPLATE&&jf(t,e)}function pre(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(w.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):g4(t,e)}function HTe(t,e){e.tagID===w.HTML?Rs(t,e):$E(t,e)}function mre(t,e){var i;if(e.tagID===w.HTML){if(t.fragmentContext||(t.insertionMode=de.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===w.HTML){t._setEndLocation(t.openElements.items[0],e);const n=t.openElements.items[1];n&&!(!((i=t.treeAdapter.getNodeSourceCodeLocation(n))===null||i===void 0)&&i.endTag)&&t._setEndLocation(n,e)}}else $E(t,e)}function $E(t,e){t.insertionMode=de.IN_BODY,mA(t,e)}function zTe(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.FRAMESET:{t._insertElement(e,je.HTML);break}case w.FRAME:{t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case w.NOFRAMES:{gu(t,e);break}}}function VTe(t,e){e.tagID===w.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==w.FRAMESET&&(t.insertionMode=de.AFTER_FRAMESET))}function jTe(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.NOFRAMES:{gu(t,e);break}}}function XTe(t,e){e.tagID===w.HTML&&(t.insertionMode=de.AFTER_AFTER_FRAMESET)}function YTe(t,e){e.tagID===w.HTML?Rs(t,e):ZT(t,e)}function ZT(t,e){t.insertionMode=de.IN_BODY,mA(t,e)}function qTe(t,e){switch(e.tagID){case w.HTML:{Rs(t,e);break}case w.NOFRAMES:{gu(t,e);break}}}function WTe(t,e){e.chars=On,t._insertCharacters(e)}function $Te(t,e){t._insertCharacters(e),t.framesetOk=!1}function gre(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==je.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function KTe(t,e){if(h1e(e))gre(t),t._startTagOutsideForeignContent(e);else{const i=t._getAdjustedCurrentElement(),n=t.treeAdapter.getNamespaceURI(i);n===je.MATHML?Jne(e):n===je.SVG&&(d1e(e),ere(e)),p4(e),e.selfClosing?t._appendElement(e,n):t._insertElement(e,n),e.ackSelfClosing=!0}}function QTe(t,e){if(e.tagID===w.P||e.tagID===w.BR){gre(t),t._endTagOutsideForeignContent(e);return}for(let i=t.openElements.stackTop;i>0;i--){const n=t.openElements.items[i];if(t.treeAdapter.getNamespaceURI(n)===je.HTML){t._endTagOutsideForeignContent(e);break}const r=t.treeAdapter.getTagName(n);if(r.toLowerCase()===e.tagName){e.tagName=r,t.openElements.shortenToLength(i);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const xA=bre("end"),Sl=bre("start");function bre(t){return e;function e(i){const n=i&&i.position&&i.position[t]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function ZTe(t){const e=Sl(t),i=xA(t);if(e&&i)return{start:e,end:i}}const _A=(function(t){if(t==null)return iEe;if(typeof t=="function")return vA(t);if(typeof t=="object")return Array.isArray(t)?JTe(t):eEe(t);if(typeof t=="string")return tEe(t);throw new Error("Expected function, string, or object as test")});function JTe(t){const e=[];let i=-1;for(;++i<t.length;)e[i]=_A(t[i]);return vA(n);function n(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function eEe(t){const e=t;return vA(i);function i(n){const r=n;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function tEe(t){return vA(e);function e(i){return i&&i.type===t}}function vA(t){return e;function e(i,n,r){return!!(nEe(i)&&t.call(this,i,typeof n=="number"?n:void 0,r||void 0))}}function iEe(){return!0}function nEe(t){return t!==null&&typeof t=="object"&&"type"in t}const yre=[],rEe=!0,dB=!1,sEe="skip";function xre(t,e,i,n){let r;typeof e=="function"&&typeof i!="function"?(n=i,i=e):r=e;const s=_A(r),a=n?-1:1;o(t,void 0,[])();function o(l,h,d){const p=l&&typeof l=="object"?l:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(l.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=yre,v,S,T;if((!e||s(l,h,d[d.length-1]||void 0))&&(y=aEe(i(l,d)),y[0]===dB))return y;if("children"in l&&l.children){const A=l;if(A.children&&y[0]!==sEe)for(S=(n?A.children.length:-1)+a,T=d.concat(A);S>-1&&S<A.children.length;){const D=A.children[S];if(v=o(D,S,T)(),v[0]===dB)return v;S=typeof v[1]=="number"?v[1]:S+a}}return y}}}function aEe(t){return Array.isArray(t)?t:typeof t=="number"?[rEe,t]:t==null?yre:[t]}function TA(t,e,i,n){let r,s,a;typeof e=="function"&&typeof i!="function"?(s=void 0,a=e,r=i):(s=e,a=i,r=n),xre(t,s,o,r);function o(l,h){const d=h[h.length-1],p=d?d.children.indexOf(l):void 0;return a(l,p,d)}}const oEe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,uEe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),pG={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function _re(t,e){const i=yEe(t),n=zne("type",{handlers:{root:lEe,element:cEe,text:hEe,comment:Tre,doctype:dEe,raw:pEe},unknown:mEe}),r={parser:i?new hG(pG):hG.getFragmentParser(void 0,pG),handle(o){n(o,r)},stitches:!1,options:e||{}};n(t,r),Xg(r,Sl());const s=i?r.parser.document:r.parser.getFragment(),a=e2e(s,{file:r.options.file});return r.stitches&&TA(a,"comment",function(o,l,h){const d=o;if(d.value.stitch&&h&&l!==void 0){const p=h.children;return p[l]=d.value.stitch,l}}),a.type==="root"&&a.children.length===1&&a.children[0].type===t.type?a.children[0]:a}function vre(t,e){let i=-1;if(t)for(;++i<t.length;)e.handle(t[i])}function lEe(t,e){vre(t.children,e)}function cEe(t,e){gEe(t,e),vre(t.children,e),bEe(t,e)}function hEe(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const i={type:mi.CHARACTER,chars:t.value,location:I_(t)};Xg(e,Sl(t)),e.parser.currentToken=i,e.parser._processToken(e.parser.currentToken)}function dEe(t,e){const i={type:mi.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:I_(t)};Xg(e,Sl(t)),e.parser.currentToken=i,e.parser._processToken(e.parser.currentToken)}function fEe(t,e){e.stitches=!0;const i=xEe(t);if("children"in t&&"children"in i){const n=_re({type:"root",children:t.children},e.options);i.children=n.children}Tre({type:"comment",value:{stitch:i}},e)}function Tre(t,e){const i=t.value,n={type:mi.COMMENT,data:i,location:I_(t)};Xg(e,Sl(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function pEe(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,Ere(e,Sl(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(oEe,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const i=e.parser.tokenizer._consume();e.parser.tokenizer._callState(i)}}function mEe(t,e){const i=t;if(e.options.passThrough&&e.options.passThrough.includes(i.type))fEe(i,e);else{let n="";throw uEe.has(i.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+i.type+"` node"+n)}}function Xg(t,e){Ere(t,e);const i=t.parser.tokenizer.currentCharacterToken;i&&i.location&&(i.location.endLine=t.parser.tokenizer.preprocessor.line,i.location.endCol=t.parser.tokenizer.preprocessor.col+1,i.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=lr.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function Ere(t,e){if(e&&e.offset!==void 0){const i={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=i}}function gEe(t,e){const i=t.tagName.toLowerCase();if(e.parser.tokenizer.state===lr.PLAINTEXT)return;Xg(e,Sl(t));const n=e.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:cf.html;r===cf.html&&i==="svg"&&(r=cf.svg);const s=m2e({...t,children:[]},{space:r===cf.svg?"svg":"html"}),a={type:mi.START_TAG,tagName:i,tagID:jg(i),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:I_(t)};e.parser.currentToken=a,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=i}function bEe(t,e){const i=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&E2e.includes(i)||e.parser.tokenizer.state===lr.PLAINTEXT)return;Xg(e,xA(t));const n={type:mi.END_TAG,tagName:i,tagID:jg(i),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:I_(t)};e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken),i===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===lr.RCDATA||e.parser.tokenizer.state===lr.RAWTEXT||e.parser.tokenizer.state===lr.SCRIPT_DATA)&&(e.parser.tokenizer.state=lr.DATA)}function yEe(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function I_(t){const e=Sl(t)||{line:void 0,column:void 0,offset:void 0},i=xA(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:i.line,endCol:i.column,endOffset:i.offset}}function xEe(t){return"children"in t?cg({...t,children:[]}):cg(t)}function _Ee(t){return function(e,i){return _re(e,{...t,file:i})}}function mG(t,e){const i=String(t);if(typeof e!="string")throw new TypeError("Expected character");let n=0,r=i.indexOf(e);for(;r!==-1;)n++,r=i.indexOf(e,r+e.length);return n}const js=Wh(/[A-Za-z]/),As=Wh(/[\dA-Za-z]/),vEe=Wh(/[#-'*+\--9=?A-Z^-~]/);function KE(t){return t!==null&&(t<32||t===127)}const fB=Wh(/\d/),TEe=Wh(/[\dA-Fa-f]/),EEe=Wh(/[!-/:-@[-`{-~]/);function Pt(t){return t!==null&&t<-2}function bn(t){return t!==null&&(t<0||t===32)}function _i(t){return t===-2||t===-1||t===32}const EA=Wh(new RegExp("\\p{P}|\\p{S}","u")),Ef=Wh(/\s/);function Wh(t){return e;function e(i){return i!==null&&i>-1&&t.test(String.fromCharCode(i))}}function SEe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function AEe(t,e,i){const r=_A((i||{}).ignore||[]),s=CEe(e);let a=-1;for(;++a<s.length;)xre(t,"text",o);function o(h,d){let p=-1,g;for(;++p<d.length;){const y=d[p],v=g?g.children:void 0;if(r(y,v?v.indexOf(y):void 0,g))return;g=y}if(g)return l(h,d)}function l(h,d){const p=d[d.length-1],g=s[a][0],y=s[a][1];let v=0;const T=p.children.indexOf(h);let A=!1,D=[];g.lastIndex=0;let R=g.exec(h.value);for(;R;){const B=R.index,z={index:R.index,input:R.input,stack:[...d,h]};let L=y(...R,z);if(typeof L=="string"&&(L=L.length>0?{type:"text",value:L}:void 0),L===!1?g.lastIndex=B+1:(v!==B&&D.push({type:"text",value:h.value.slice(v,B)}),Array.isArray(L)?D.push(...L):L&&D.push(L),v=B+R[0].length,A=!0),!g.global)break;R=g.exec(h.value)}return A?(v<h.value.length&&D.push({type:"text",value:h.value.slice(v)}),p.children.splice(T,1,...D)):D=[h],T+D.length}}function CEe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const i=!t[0]||Array.isArray(t[0])?t:[t];let n=-1;for(;++n<i.length;){const r=i[n];e.push([wEe(r[0]),DEe(r[1])])}return e}function wEe(t){return typeof t=="string"?new RegExp(SEe(t),"g"):t}function DEe(t){return typeof t=="function"?t:function(){return t}}const XD="phrasing",YD=["autolink","link","image","label"];function REe(){return{transforms:[IEe],enter:{literalAutolink:MEe,literalAutolinkEmail:qD,literalAutolinkHttp:qD,literalAutolinkWww:qD},exit:{literalAutolink:FEe,literalAutolinkEmail:OEe,literalAutolinkHttp:BEe,literalAutolinkWww:kEe}}}function PEe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:XD,notInConstruct:YD},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:XD,notInConstruct:YD},{character:":",before:"[ps]",after:"\\/",inConstruct:XD,notInConstruct:YD}]}}function MEe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function qD(t){this.config.enter.autolinkProtocol.call(this,t)}function BEe(t){this.config.exit.autolinkProtocol.call(this,t)}function kEe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function OEe(t){this.config.exit.autolinkEmail.call(this,t)}function FEe(t){this.exit(t)}function IEe(t){AEe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,LEe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),NEe]],{ignore:["link","linkReference"]})}function LEe(t,e,i,n,r){let s="";if(!Sre(r)||(/^w/i.test(e)&&(i=e+i,e="",s="http://"),!UEe(i)))return!1;const a=GEe(i+n);if(!a[0])return!1;const o={type:"link",title:null,url:s+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function NEe(t,e,i,n){return!Sre(n,!0)||/[-\d_]$/.test(i)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+i,children:[{type:"text",value:e+"@"+i}]}}function UEe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function GEe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let i=e[0],n=i.indexOf(")");const r=mG(t,"(");let s=mG(t,")");for(;n!==-1&&r>s;)t+=i.slice(0,n+1),i=i.slice(n+1),n=i.indexOf(")"),s++;return[t,i]}function Sre(t,e){const i=t.input.charCodeAt(t.index-1);return(t.index===0||Ef(i)||EA(i))&&(!e||i!==47)}function uu(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}Are.peek=$Ee;function HEe(){this.buffer()}function zEe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function VEe(){this.buffer()}function jEe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function XEe(t){const e=this.resume(),i=this.stack[this.stack.length-1];i.type,i.identifier=uu(this.sliceSerialize(t)).toLowerCase(),i.label=e}function YEe(t){this.exit(t)}function qEe(t){const e=this.resume(),i=this.stack[this.stack.length-1];i.type,i.identifier=uu(this.sliceSerialize(t)).toLowerCase(),i.label=e}function WEe(t){this.exit(t)}function $Ee(){return"["}function Are(t,e,i,n){const r=i.createTracker(n);let s=r.move("[^");const a=i.enter("footnoteReference"),o=i.enter("reference");return s+=r.move(i.safe(i.associationId(t),{after:"]",before:s})),o(),a(),s+=r.move("]"),s}function KEe(){return{enter:{gfmFootnoteCallString:HEe,gfmFootnoteCall:zEe,gfmFootnoteDefinitionLabelString:VEe,gfmFootnoteDefinition:jEe},exit:{gfmFootnoteCallString:XEe,gfmFootnoteCall:YEe,gfmFootnoteDefinitionLabelString:qEe,gfmFootnoteDefinition:WEe}}}function QEe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:i,footnoteReference:Are},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function i(n,r,s,a){const o=s.createTracker(a);let l=o.move("[^");const h=s.enter("footnoteDefinition"),d=s.enter("label");return l+=o.move(s.safe(s.associationId(n),{before:l,after:"]"})),d(),l+=o.move("]:"),n.children&&n.children.length>0&&(o.shift(4),l+=o.move((e?`
`:" ")+s.indentLines(s.containerFlow(n,o.current()),e?Cre:ZEe))),h(),l}}function ZEe(t,e,i){return e===0?t:Cre(t,e,i)}function Cre(t,e,i){return(i?"":"    ")+t}const JEe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];wre.peek=rSe;function eSe(){return{canContainEols:["delete"],enter:{strikethrough:iSe},exit:{strikethrough:nSe}}}function tSe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:JEe}],handlers:{delete:wre}}}function iSe(t){this.enter({type:"delete",children:[]},t)}function nSe(t){this.exit(t)}function wre(t,e,i,n){const r=i.createTracker(n),s=i.enter("strikethrough");let a=r.move("~~");return a+=i.containerPhrasing(t,{...r.current(),before:a,after:"~"}),a+=r.move("~~"),s(),a}function rSe(){return"~"}function sSe(t){return t.length}function aSe(t,e){const i=e||{},n=(i.align||[]).concat(),r=i.stringLength||sSe,s=[],a=[],o=[],l=[];let h=0,d=-1;for(;++d<t.length;){const S=[],T=[];let A=-1;for(t[d].length>h&&(h=t[d].length);++A<t[d].length;){const D=oSe(t[d][A]);if(i.alignDelimiters!==!1){const R=r(D);T[A]=R,(l[A]===void 0||R>l[A])&&(l[A]=R)}S.push(D)}a[d]=S,o[d]=T}let p=-1;if(typeof n=="object"&&"length"in n)for(;++p<h;)s[p]=gG(n[p]);else{const S=gG(n);for(;++p<h;)s[p]=S}p=-1;const g=[],y=[];for(;++p<h;){const S=s[p];let T="",A="";S===99?(T=":",A=":"):S===108?T=":":S===114&&(A=":");let D=i.alignDelimiters===!1?1:Math.max(1,l[p]-T.length-A.length);const R=T+"-".repeat(D)+A;i.alignDelimiters!==!1&&(D=T.length+D+A.length,D>l[p]&&(l[p]=D),y[p]=D),g[p]=R}a.splice(1,0,g),o.splice(1,0,y),d=-1;const v=[];for(;++d<a.length;){const S=a[d],T=o[d];p=-1;const A=[];for(;++p<h;){const D=S[p]||"";let R="",B="";if(i.alignDelimiters!==!1){const z=l[p]-(T[p]||0),L=s[p];L===114?R=" ".repeat(z):L===99?z%2?(R=" ".repeat(z/2+.5),B=" ".repeat(z/2-.5)):(R=" ".repeat(z/2),B=R):B=" ".repeat(z)}i.delimiterStart!==!1&&!p&&A.push("|"),i.padding!==!1&&!(i.alignDelimiters===!1&&D==="")&&(i.delimiterStart!==!1||p)&&A.push(" "),i.alignDelimiters!==!1&&A.push(R),A.push(D),i.alignDelimiters!==!1&&A.push(B),i.padding!==!1&&A.push(" "),(i.delimiterEnd!==!1||p!==h-1)&&A.push("|")}v.push(i.delimiterEnd===!1?A.join("").replace(/ +$/,""):A.join(""))}return v.join(`
`)}function oSe(t){return t==null?"":String(t)}function gG(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function uSe(t,e,i,n){const r=i.enter("blockquote"),s=i.createTracker(n);s.move("> "),s.shift(2);const a=i.indentLines(i.containerFlow(t,s.current()),lSe);return r(),a}function lSe(t,e,i){return">"+(i?"":" ")+t}function cSe(t,e){return bG(t,e.inConstruct,!0)&&!bG(t,e.notInConstruct,!1)}function bG(t,e,i){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return i;let n=-1;for(;++n<e.length;)if(t.includes(e[n]))return!0;return!1}function yG(t,e,i,n){let r=-1;for(;++r<i.unsafe.length;)if(i.unsafe[r].character===`
`&&cSe(i.stack,i.unsafe[r]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function hSe(t,e){const i=String(t);let n=i.indexOf(e),r=n,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===r?++s>a&&(a=s):s=1,r=n+e.length,n=i.indexOf(e,r);return a}function dSe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function fSe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function pSe(t,e,i,n){const r=fSe(i),s=t.value||"",a=r==="`"?"GraveAccent":"Tilde";if(dSe(t,i)){const p=i.enter("codeIndented"),g=i.indentLines(s,mSe);return p(),g}const o=i.createTracker(n),l=r.repeat(Math.max(hSe(s,r)+1,3)),h=i.enter("codeFenced");let d=o.move(l);if(t.lang){const p=i.enter(`codeFencedLang${a}`);d+=o.move(i.safe(t.lang,{before:d,after:" ",encode:["`"],...o.current()})),p()}if(t.lang&&t.meta){const p=i.enter(`codeFencedMeta${a}`);d+=o.move(" "),d+=o.move(i.safe(t.meta,{before:d,after:`
`,encode:["`"],...o.current()})),p()}return d+=o.move(`
`),s&&(d+=o.move(s+`
`)),d+=o.move(l),h(),d}function mSe(t,e,i){return(i?"":"    ")+t}function y4(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function gSe(t,e,i,n){const r=y4(i),s=r==='"'?"Quote":"Apostrophe",a=i.enter("definition");let o=i.enter("label");const l=i.createTracker(n);let h=l.move("[");return h+=l.move(i.safe(i.associationId(t),{before:h,after:"]",...l.current()})),h+=l.move("]: "),o(),!t.url||/[\0- \u007F]/.test(t.url)?(o=i.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(i.safe(t.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(o=i.enter("destinationRaw"),h+=l.move(i.safe(t.url,{before:h,after:t.title?" ":`
`,...l.current()}))),o(),t.title&&(o=i.enter(`title${s}`),h+=l.move(" "+r),h+=l.move(i.safe(t.title,{before:h,after:r,...l.current()})),h+=l.move(r),o()),a(),h}function bSe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Qx(t){return"&#x"+t.toString(16).toUpperCase()+";"}function dg(t){if(t===null||bn(t)||Ef(t))return 1;if(EA(t))return 2}function QE(t,e,i){const n=dg(t),r=dg(e);return n===void 0?r===void 0?i==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Dre.peek=ySe;function Dre(t,e,i,n){const r=bSe(i),s=i.enter("emphasis"),a=i.createTracker(n),o=a.move(r);let l=a.move(i.containerPhrasing(t,{after:r,before:o,...a.current()}));const h=l.charCodeAt(0),d=QE(n.before.charCodeAt(n.before.length-1),h,r);d.inside&&(l=Qx(h)+l.slice(1));const p=l.charCodeAt(l.length-1),g=QE(n.after.charCodeAt(0),p,r);g.inside&&(l=l.slice(0,-1)+Qx(p));const y=a.move(r);return s(),i.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},o+l+y}function ySe(t,e,i){return i.options.emphasis||"*"}const xSe={};function x4(t,e){const i=xSe,n=typeof i.includeImageAlt=="boolean"?i.includeImageAlt:!0,r=typeof i.includeHtml=="boolean"?i.includeHtml:!0;return Rre(t,n,r)}function Rre(t,e,i){if(_Se(t)){if("value"in t)return t.type==="html"&&!i?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return xG(t.children,e,i)}return Array.isArray(t)?xG(t,e,i):""}function xG(t,e,i){const n=[];let r=-1;for(;++r<t.length;)n[r]=Rre(t[r],e,i);return n.join("")}function _Se(t){return!!(t&&typeof t=="object")}function vSe(t,e){let i=!1;return TA(t,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return i=!0,dB}),!!((!t.depth||t.depth<3)&&x4(t)&&(e.options.setext||i))}function TSe(t,e,i,n){const r=Math.max(Math.min(6,t.depth||1),1),s=i.createTracker(n);if(vSe(t,i)){const d=i.enter("headingSetext"),p=i.enter("phrasing"),g=i.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),d(),g+`
`+(r===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const a="#".repeat(r),o=i.enter("headingAtx"),l=i.enter("phrasing");s.move(a+" ");let h=i.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=Qx(h.charCodeAt(0))+h.slice(1)),h=h?a+" "+h:a,i.options.closeAtx&&(h+=" "+a),l(),o(),h}Pre.peek=ESe;function Pre(t){return t.value||""}function ESe(){return"<"}Mre.peek=SSe;function Mre(t,e,i,n){const r=y4(i),s=r==='"'?"Quote":"Apostrophe",a=i.enter("image");let o=i.enter("label");const l=i.createTracker(n);let h=l.move("![");return h+=l.move(i.safe(t.alt,{before:h,after:"]",...l.current()})),h+=l.move("]("),o(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(o=i.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(i.safe(t.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(o=i.enter("destinationRaw"),h+=l.move(i.safe(t.url,{before:h,after:t.title?" ":")",...l.current()}))),o(),t.title&&(o=i.enter(`title${s}`),h+=l.move(" "+r),h+=l.move(i.safe(t.title,{before:h,after:r,...l.current()})),h+=l.move(r),o()),h+=l.move(")"),a(),h}function SSe(){return"!"}Bre.peek=ASe;function Bre(t,e,i,n){const r=t.referenceType,s=i.enter("imageReference");let a=i.enter("label");const o=i.createTracker(n);let l=o.move("![");const h=i.safe(t.alt,{before:l,after:"]",...o.current()});l+=o.move(h+"]["),a();const d=i.stack;i.stack=[],a=i.enter("reference");const p=i.safe(i.associationId(t),{before:l,after:"]",...o.current()});return a(),i.stack=d,s(),r==="full"||!h||h!==p?l+=o.move(p+"]"):r==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function ASe(){return"!"}kre.peek=CSe;function kre(t,e,i){let n=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(n);)r+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++s<i.unsafe.length;){const a=i.unsafe[s],o=i.compilePattern(a);let l;if(a.atBreak)for(;l=o.exec(n);){let h=l.index;n.charCodeAt(h)===10&&n.charCodeAt(h-1)===13&&h--,n=n.slice(0,h)+" "+n.slice(l.index+1)}}return r+n+r}function CSe(){return"`"}function Ore(t,e){const i=x4(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(i===t.url||"mailto:"+i===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Fre.peek=wSe;function Fre(t,e,i,n){const r=y4(i),s=r==='"'?"Quote":"Apostrophe",a=i.createTracker(n);let o,l;if(Ore(t,i)){const d=i.stack;i.stack=[],o=i.enter("autolink");let p=a.move("<");return p+=a.move(i.containerPhrasing(t,{before:p,after:">",...a.current()})),p+=a.move(">"),o(),i.stack=d,p}o=i.enter("link"),l=i.enter("label");let h=a.move("[");return h+=a.move(i.containerPhrasing(t,{before:h,after:"](",...a.current()})),h+=a.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=i.enter("destinationLiteral"),h+=a.move("<"),h+=a.move(i.safe(t.url,{before:h,after:">",...a.current()})),h+=a.move(">")):(l=i.enter("destinationRaw"),h+=a.move(i.safe(t.url,{before:h,after:t.title?" ":")",...a.current()}))),l(),t.title&&(l=i.enter(`title${s}`),h+=a.move(" "+r),h+=a.move(i.safe(t.title,{before:h,after:r,...a.current()})),h+=a.move(r),l()),h+=a.move(")"),o(),h}function wSe(t,e,i){return Ore(t,i)?"<":"["}Ire.peek=DSe;function Ire(t,e,i,n){const r=t.referenceType,s=i.enter("linkReference");let a=i.enter("label");const o=i.createTracker(n);let l=o.move("[");const h=i.containerPhrasing(t,{before:l,after:"]",...o.current()});l+=o.move(h+"]["),a();const d=i.stack;i.stack=[],a=i.enter("reference");const p=i.safe(i.associationId(t),{before:l,after:"]",...o.current()});return a(),i.stack=d,s(),r==="full"||!h||h!==p?l+=o.move(p+"]"):r==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function DSe(){return"["}function _4(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function RSe(t){const e=_4(t),i=t.options.bulletOther;if(!i)return e==="*"?"-":"*";if(i!=="*"&&i!=="+"&&i!=="-")throw new Error("Cannot serialize items with `"+i+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(i===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+i+"`) to be different");return i}function PSe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Lre(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function MSe(t,e,i,n){const r=i.enter("list"),s=i.bulletCurrent;let a=t.ordered?PSe(i):_4(i);const o=t.ordered?a==="."?")":".":RSe(i);let l=e&&i.bulletLastUsed?a===i.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&i.stack[i.stack.length-1]==="list"&&i.stack[i.stack.length-2]==="listItem"&&i.stack[i.stack.length-3]==="list"&&i.stack[i.stack.length-4]==="listItem"&&i.indexStack[i.indexStack.length-1]===0&&i.indexStack[i.indexStack.length-2]===0&&i.indexStack[i.indexStack.length-3]===0&&(l=!0),Lre(i)===a&&d){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(a=o),i.bulletCurrent=a;const h=i.containerFlow(t,n);return i.bulletLastUsed=a,i.bulletCurrent=s,r(),h}function BSe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function kSe(t,e,i,n){const r=BSe(i);let s=i.bulletCurrent||_4(i);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(i.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let a=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const o=i.createTracker(n);o.move(s+" ".repeat(a-s.length)),o.shift(a);const l=i.enter("listItem"),h=i.indentLines(i.containerFlow(t,o.current()),d);return l(),h;function d(p,g,y){return g?(y?"":" ".repeat(a))+p:(y?s:s+" ".repeat(a-s.length))+p}}function OSe(t,e,i,n){const r=i.enter("paragraph"),s=i.enter("phrasing"),a=i.containerPhrasing(t,n);return s(),r(),a}const FSe=_A(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ISe(t,e,i,n){return(t.children.some(function(a){return FSe(a)})?i.containerPhrasing:i.containerFlow).call(i,t,n)}function LSe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Nre.peek=NSe;function Nre(t,e,i,n){const r=LSe(i),s=i.enter("strong"),a=i.createTracker(n),o=a.move(r+r);let l=a.move(i.containerPhrasing(t,{after:r,before:o,...a.current()}));const h=l.charCodeAt(0),d=QE(n.before.charCodeAt(n.before.length-1),h,r);d.inside&&(l=Qx(h)+l.slice(1));const p=l.charCodeAt(l.length-1),g=QE(n.after.charCodeAt(0),p,r);g.inside&&(l=l.slice(0,-1)+Qx(p));const y=a.move(r+r);return s(),i.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},o+l+y}function NSe(t,e,i){return i.options.strong||"*"}function USe(t,e,i,n){return i.safe(t.value,n)}function GSe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function HSe(t,e,i){const n=(Lre(i)+(i.options.ruleSpaces?" ":"")).repeat(GSe(i));return i.options.ruleSpaces?n.slice(0,-1):n}const Ure={blockquote:uSe,break:yG,code:pSe,definition:gSe,emphasis:Dre,hardBreak:yG,heading:TSe,html:Pre,image:Mre,imageReference:Bre,inlineCode:kre,link:Fre,linkReference:Ire,list:MSe,listItem:kSe,paragraph:OSe,root:ISe,strong:Nre,text:USe,thematicBreak:HSe},_G=document.createElement("i");function v4(t){const e="&"+t+";";_G.innerHTML=e;const i=_G.textContent;return i.charCodeAt(i.length-1)===59&&t!=="semi"||i===e?!1:i}function Gre(t,e){const i=Number.parseInt(t,e);return i<9||i===11||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(i&65535)===65535||(i&65535)===65534||i>1114111?"�":String.fromCodePoint(i)}const zSe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function VSe(t){return t.replace(zSe,jSe)}function jSe(t,e,i){if(e)return e;if(i.charCodeAt(0)===35){const r=i.charCodeAt(1),s=r===120||r===88;return Gre(i.slice(s?2:1),s?16:10)}return v4(i)||t}function XSe(){return{enter:{table:YSe,tableData:vG,tableHeader:vG,tableRow:WSe},exit:{codeText:$Se,table:qSe,tableData:WD,tableHeader:WD,tableRow:WD}}}function YSe(t){const e=t._align;this.enter({type:"table",align:e.map(function(i){return i==="none"?null:i}),children:[]},t),this.data.inTable=!0}function qSe(t){this.exit(t),this.data.inTable=void 0}function WSe(t){this.enter({type:"tableRow",children:[]},t)}function WD(t){this.exit(t)}function vG(t){this.enter({type:"tableCell",children:[]},t)}function $Se(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,KSe));const i=this.stack[this.stack.length-1];i.type,i.value=e,this.exit(t)}function KSe(t,e){return e==="|"?e:t}function QSe(t){const e=t||{},i=e.tableCellPadding,n=e.tablePipeAlign,r=e.stringLength,s=i?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:a,tableCell:l,tableRow:o}};function a(y,v,S,T){return h(d(y,S,T),y.align)}function o(y,v,S,T){const A=p(y,S,T),D=h([A]);return D.slice(0,D.indexOf(`
`))}function l(y,v,S,T){const A=S.enter("tableCell"),D=S.enter("phrasing"),R=S.containerPhrasing(y,{...T,before:s,after:s});return D(),A(),R}function h(y,v){return aSe(y,{align:v,alignDelimiters:n,padding:i,stringLength:r})}function d(y,v,S){const T=y.children;let A=-1;const D=[],R=v.enter("table");for(;++A<T.length;)D[A]=p(T[A],v,S);return R(),D}function p(y,v,S){const T=y.children;let A=-1;const D=[],R=v.enter("tableRow");for(;++A<T.length;)D[A]=l(T[A],y,v,S);return R(),D}function g(y,v,S){let T=Ure.inlineCode(y,v,S);return S.stack.includes("tableCell")&&(T=T.replace(/\|/g,"\\$&")),T}}function ZSe(){return{exit:{taskListCheckValueChecked:TG,taskListCheckValueUnchecked:TG,paragraph:eAe}}}function JSe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:tAe}}}function TG(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function eAe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const i=this.stack[this.stack.length-1];i.type;const n=i.children[0];if(n&&n.type==="text"){const r=e.children;let s=-1,a;for(;++s<r.length;){const o=r[s];if(o.type==="paragraph"){a=o;break}}a===i&&(n.value=n.value.slice(1),n.value.length===0?i.children.shift():i.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,i.position.start=Object.assign({},n.position.start)))}}this.exit(t)}function tAe(t,e,i,n){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",o=i.createTracker(n);s&&o.move(a);let l=Ure.listItem(t,e,i,{...n,...o.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),l;function h(d){return d+a}}function iAe(){return[REe(),KEe(),eSe(),XSe(),ZSe()]}function nAe(t){return{extensions:[PEe(),QEe(t),tSe(),QSe(t),JSe()]}}function Oa(t,e,i,n){const r=t.length;let s=0,a;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,i=i>0?i:0,n.length<1e4)a=Array.from(n),a.unshift(e,i),t.splice(...a);else for(i&&t.splice(e,i);s<n.length;)a=n.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function mo(t,e){return t.length>0?(Oa(t,t.length,0,e),t):e}const EG={}.hasOwnProperty;function Hre(t){const e={};let i=-1;for(;++i<t.length;)rAe(e,t[i]);return e}function rAe(t,e){let i;for(i in e){const r=(EG.call(t,i)?t[i]:void 0)||(t[i]={}),s=e[i];let a;if(s)for(a in s){EG.call(r,a)||(r[a]=[]);const o=s[a];sAe(r[a],Array.isArray(o)?o:o?[o]:[])}}}function sAe(t,e){let i=-1;const n=[];for(;++i<e.length;)(e[i].add==="after"?t:n).push(e[i]);Oa(t,0,0,n)}const aAe={tokenize:dAe,partial:!0},zre={tokenize:fAe,partial:!0},Vre={tokenize:pAe,partial:!0},jre={tokenize:mAe,partial:!0},oAe={tokenize:gAe,partial:!0},Xre={name:"wwwAutolink",tokenize:cAe,previous:qre},Yre={name:"protocolAutolink",tokenize:hAe,previous:Wre},mc={name:"emailAutolink",tokenize:lAe,previous:$re},Al={};function uAe(){return{text:Al}}let Hd=48;for(;Hd<123;)Al[Hd]=mc,Hd++,Hd===58?Hd=65:Hd===91&&(Hd=97);Al[43]=mc;Al[45]=mc;Al[46]=mc;Al[95]=mc;Al[72]=[mc,Yre];Al[104]=[mc,Yre];Al[87]=[mc,Xre];Al[119]=[mc,Xre];function lAe(t,e,i){const n=this;let r,s;return a;function a(p){return!pB(p)||!$re.call(n,n.previous)||T4(n.events)?i(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),o(p))}function o(p){return pB(p)?(t.consume(p),o):p===64?(t.consume(p),l):i(p)}function l(p){return p===46?t.check(oAe,d,h)(p):p===45||p===95||As(p)?(s=!0,t.consume(p),l):d(p)}function h(p){return t.consume(p),r=!0,l}function d(p){return s&&r&&js(n.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):i(p)}}function cAe(t,e,i){const n=this;return r;function r(a){return a!==87&&a!==119||!qre.call(n,n.previous)||T4(n.events)?i(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(aAe,t.attempt(zre,t.attempt(Vre,s),i),i)(a))}function s(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function hAe(t,e,i){const n=this;let r="",s=!1;return a;function a(p){return(p===72||p===104)&&Wre.call(n,n.previous)&&!T4(n.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(p),t.consume(p),o):i(p)}function o(p){if(js(p)&&r.length<5)return r+=String.fromCodePoint(p),t.consume(p),o;if(p===58){const g=r.toLowerCase();if(g==="http"||g==="https")return t.consume(p),l}return i(p)}function l(p){return p===47?(t.consume(p),s?h:(s=!0,l)):i(p)}function h(p){return p===null||KE(p)||bn(p)||Ef(p)||EA(p)?i(p):t.attempt(zre,t.attempt(Vre,d),i)(p)}function d(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function dAe(t,e,i){let n=0;return r;function r(a){return(a===87||a===119)&&n<3?(n++,t.consume(a),r):a===46&&n===3?(t.consume(a),s):i(a)}function s(a){return a===null?i(a):e(a)}}function fAe(t,e,i){let n,r,s;return a;function a(h){return h===46||h===95?t.check(jre,l,o)(h):h===null||bn(h)||Ef(h)||h!==45&&EA(h)?l(h):(s=!0,t.consume(h),a)}function o(h){return h===95?n=!0:(r=n,n=void 0),t.consume(h),a}function l(h){return r||n||!s?i(h):e(h)}}function pAe(t,e){let i=0,n=0;return r;function r(a){return a===40?(i++,t.consume(a),r):a===41&&n<i?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(jre,e,s)(a):a===null||bn(a)||Ef(a)?e(a):(t.consume(a),r)}function s(a){return a===41&&n++,t.consume(a),r}}function mAe(t,e,i){return n;function n(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(t.consume(o),n):o===38?(t.consume(o),s):o===93?(t.consume(o),r):o===60||o===null||bn(o)||Ef(o)?e(o):i(o)}function r(o){return o===null||o===40||o===91||bn(o)||Ef(o)?e(o):n(o)}function s(o){return js(o)?a(o):i(o)}function a(o){return o===59?(t.consume(o),n):js(o)?(t.consume(o),a):i(o)}}function gAe(t,e,i){return n;function n(s){return t.consume(s),r}function r(s){return As(s)?i(s):e(s)}}function qre(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||bn(t)}function Wre(t){return!js(t)}function $re(t){return!(t===47||pB(t))}function pB(t){return t===43||t===45||t===46||t===95||As(t)}function T4(t){let e=t.length,i=!1;for(;e--;){const n=t[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){i=!0;break}if(n._gfmAutolinkLiteralWalkedInto){i=!1;break}}return t.length>0&&!i&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),i}function Yg(t){const e=[];let i=-1,n=0,r=0;for(;++i<t.length;){const s=t.charCodeAt(i);let a="";if(s===37&&As(t.charCodeAt(i+1))&&As(t.charCodeAt(i+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=t.charCodeAt(i+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),r=1):a="�"}else a=String.fromCharCode(s);a&&(e.push(t.slice(n,i),encodeURIComponent(a)),n=i+r+1,a=""),r&&(i+=r,r=0)}return e.join("")+t.slice(n)}function SA(t,e,i){const n=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!n.includes(s)&&(e=s(e,i),n.push(s))}return e}const mB={name:"attention",resolveAll:bAe,tokenize:yAe};function bAe(t,e){let i=-1,n,r,s,a,o,l,h,d;for(;++i<t.length;)if(t[i][0]==="enter"&&t[i][1].type==="attentionSequence"&&t[i][1]._close){for(n=i;n--;)if(t[n][0]==="exit"&&t[n][1].type==="attentionSequence"&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[i][1]).charCodeAt(0)){if((t[n][1]._close||t[i][1]._open)&&(t[i][1].end.offset-t[i][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[i][1].end.offset-t[i][1].start.offset)%3))continue;l=t[n][1].end.offset-t[n][1].start.offset>1&&t[i][1].end.offset-t[i][1].start.offset>1?2:1;const p={...t[n][1].end},g={...t[i][1].start};SG(p,-l),SG(g,l),a={type:l>1?"strongSequence":"emphasisSequence",start:p,end:{...t[n][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...t[i][1].start},end:g},s={type:l>1?"strongText":"emphasisText",start:{...t[n][1].end},end:{...t[i][1].start}},r={type:l>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},t[n][1].end={...a.start},t[i][1].start={...o.end},h=[],t[n][1].end.offset-t[n][1].start.offset&&(h=mo(h,[["enter",t[n][1],e],["exit",t[n][1],e]])),h=mo(h,[["enter",r,e],["enter",a,e],["exit",a,e],["enter",s,e]]),h=mo(h,SA(e.parser.constructs.insideSpan.null,t.slice(n+1,i),e)),h=mo(h,[["exit",s,e],["enter",o,e],["exit",o,e],["exit",r,e]]),t[i][1].end.offset-t[i][1].start.offset?(d=2,h=mo(h,[["enter",t[i][1],e],["exit",t[i][1],e]])):d=0,Oa(t,n-1,i-n+3,h),i=n+h.length-d-2;break}}for(i=-1;++i<t.length;)t[i][1].type==="attentionSequence"&&(t[i][1].type="data");return t}function yAe(t,e){const i=this.parser.constructs.attentionMarkers.null,n=this.previous,r=dg(n);let s;return a;function a(l){return s=l,t.enter("attentionSequence"),o(l)}function o(l){if(l===s)return t.consume(l),o;const h=t.exit("attentionSequence"),d=dg(l),p=!d||d===2&&r||i.includes(l),g=!r||r===2&&d||i.includes(n);return h._open=!!(s===42?p:p&&(r||!g)),h._close=!!(s===42?g:g&&(d||!p)),e(l)}}function SG(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const xAe={name:"autolink",tokenize:_Ae};function _Ae(t,e,i){let n=0;return r;function r(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(y){return js(y)?(t.consume(y),a):y===64?i(y):h(y)}function a(y){return y===43||y===45||y===46||As(y)?(n=1,o(y)):h(y)}function o(y){return y===58?(t.consume(y),n=0,l):(y===43||y===45||y===46||As(y))&&n++<32?(t.consume(y),o):(n=0,h(y))}function l(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||KE(y)?i(y):(t.consume(y),l)}function h(y){return y===64?(t.consume(y),d):vEe(y)?(t.consume(y),h):i(y)}function d(y){return As(y)?p(y):i(y)}function p(y){return y===46?(t.consume(y),n=0,d):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||As(y))&&n++<63){const v=y===45?g:p;return t.consume(y),v}return i(y)}}function Ri(t,e,i,n){const r=n?n-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return _i(l)?(t.enter(i),o(l)):e(l)}function o(l){return _i(l)&&s++<r?(t.consume(l),o):(t.exit(i),e(l))}}const L_={partial:!0,tokenize:vAe};function vAe(t,e,i){return n;function n(s){return _i(s)?Ri(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||Pt(s)?e(s):i(s)}}const Kre={continuation:{tokenize:EAe},exit:SAe,name:"blockQuote",tokenize:TAe};function TAe(t,e,i){const n=this;return r;function r(a){if(a===62){const o=n.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return i(a)}function s(a){return _i(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function EAe(t,e,i){const n=this;return r;function r(a){return _i(a)?Ri(t,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(Kre,e,i)(a)}}function SAe(t){t.exit("blockQuote")}const Qre={name:"characterEscape",tokenize:AAe};function AAe(t,e,i){return n;function n(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return EEe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):i(s)}}const Zre={name:"characterReference",tokenize:CAe};function CAe(t,e,i){const n=this;let r=0,s,a;return o;function o(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),l}function l(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,a=As,d(p))}function h(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=TEe,d):(t.enter("characterReferenceValue"),s=7,a=fB,d(p))}function d(p){if(p===59&&r){const g=t.exit("characterReferenceValue");return a===As&&!v4(n.sliceSerialize(g))?i(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(p)&&r++<s?(t.consume(p),d):i(p)}}const AG={partial:!0,tokenize:DAe},CG={concrete:!0,name:"codeFenced",tokenize:wAe};function wAe(t,e,i){const n=this,r={partial:!0,tokenize:z};let s=0,a=0,o;return l;function l(L){return h(L)}function h(L){const H=n.events[n.events.length-1];return s=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,o=L,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(L)}function d(L){return L===o?(a++,t.consume(L),d):a<3?i(L):(t.exit("codeFencedFenceSequence"),_i(L)?Ri(t,p,"whitespace")(L):p(L))}function p(L){return L===null||Pt(L)?(t.exit("codeFencedFence"),n.interrupt?e(L):t.check(AG,S,B)(L)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(L))}function g(L){return L===null||Pt(L)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(L)):_i(L)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ri(t,y,"whitespace")(L)):L===96&&L===o?i(L):(t.consume(L),g)}function y(L){return L===null||Pt(L)?p(L):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(L))}function v(L){return L===null||Pt(L)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(L)):L===96&&L===o?i(L):(t.consume(L),v)}function S(L){return t.attempt(r,B,T)(L)}function T(L){return t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),A}function A(L){return s>0&&_i(L)?Ri(t,D,"linePrefix",s+1)(L):D(L)}function D(L){return L===null||Pt(L)?t.check(AG,S,B)(L):(t.enter("codeFlowValue"),R(L))}function R(L){return L===null||Pt(L)?(t.exit("codeFlowValue"),D(L)):(t.consume(L),R)}function B(L){return t.exit("codeFenced"),e(L)}function z(L,H,te){let j=0;return O;function O(Te){return L.enter("lineEnding"),L.consume(Te),L.exit("lineEnding"),q}function q(Te){return L.enter("codeFencedFence"),_i(Te)?Ri(L,re,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Te):re(Te)}function re(Te){return Te===o?(L.enter("codeFencedFenceSequence"),ae(Te)):te(Te)}function ae(Te){return Te===o?(j++,L.consume(Te),ae):j>=a?(L.exit("codeFencedFenceSequence"),_i(Te)?Ri(L,fe,"whitespace")(Te):fe(Te)):te(Te)}function fe(Te){return Te===null||Pt(Te)?(L.exit("codeFencedFence"),H(Te)):te(Te)}}}function DAe(t,e,i){const n=this;return r;function r(a){return a===null?i(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return n.parser.lazy[n.now().line]?i(a):e(a)}}const $D={name:"codeIndented",tokenize:PAe},RAe={partial:!0,tokenize:MAe};function PAe(t,e,i){const n=this;return r;function r(h){return t.enter("codeIndented"),Ri(t,s,"linePrefix",5)(h)}function s(h){const d=n.events[n.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(h):i(h)}function a(h){return h===null?l(h):Pt(h)?t.attempt(RAe,a,l)(h):(t.enter("codeFlowValue"),o(h))}function o(h){return h===null||Pt(h)?(t.exit("codeFlowValue"),a(h)):(t.consume(h),o)}function l(h){return t.exit("codeIndented"),e(h)}}function MAe(t,e,i){const n=this;return r;function r(a){return n.parser.lazy[n.now().line]?i(a):Pt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),r):Ri(t,s,"linePrefix",5)(a)}function s(a){const o=n.events[n.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):Pt(a)?r(a):i(a)}}const BAe={name:"codeText",previous:OAe,resolve:kAe,tokenize:FAe};function kAe(t){let e=t.length-4,i=3,n,r;if((t[i][1].type==="lineEnding"||t[i][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(n=i;++n<e;)if(t[n][1].type==="codeTextData"){t[i][1].type="codeTextPadding",t[e][1].type="codeTextPadding",i+=2,e-=2;break}}for(n=i-1,e++;++n<=e;)r===void 0?n!==e&&t[n][1].type!=="lineEnding"&&(r=n):(n===e||t[n][1].type==="lineEnding")&&(t[r][1].type="codeTextData",n!==r+2&&(t[r][1].end=t[n-1][1].end,t.splice(r+2,n-r-2),e-=n-r-2,n=r+2),r=void 0);return t}function OAe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function FAe(t,e,i){let n=0,r,s;return a;function a(p){return t.enter("codeText"),t.enter("codeTextSequence"),o(p)}function o(p){return p===96?(t.consume(p),n++,o):(t.exit("codeTextSequence"),l(p))}function l(p){return p===null?i(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),l):p===96?(s=t.enter("codeTextSequence"),r=0,d(p)):Pt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),l):(t.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||Pt(p)?(t.exit("codeTextData"),l(p)):(t.consume(p),h)}function d(p){return p===96?(t.consume(p),r++,d):r===n?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",h(p))}}class IAe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,i){const n=i??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,i,n){const r=i||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&Ty(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ty(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ty(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const i=this.left.splice(e,Number.POSITIVE_INFINITY);Ty(this.right,i.reverse())}else{const i=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ty(this.left,i.reverse())}}}function Ty(t,e){let i=0;if(e.length<1e4)t.push(...e);else for(;i<e.length;)t.push(...e.slice(i,i+1e4)),i+=1e4}function Jre(t){const e={};let i=-1,n,r,s,a,o,l,h;const d=new IAe(t);for(;++i<d.length;){for(;i in e;)i=e[i];if(n=d.get(i),i&&n[1].type==="chunkFlow"&&d.get(i-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,LAe(d,i)),i=e[i],h=!0);else if(n[1]._container){for(s=i,r=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(d.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(n[1].end={...d.get(r)[1].start},o=d.slice(r,i),o.unshift(n),d.splice(r,i-r+1,o))}}return Oa(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!h}function LAe(t,e){const i=t.get(e)[1],n=t.get(e)[2];let r=e-1;const s=[];let a=i._tokenizer;a||(a=n.parser[i.contentType](i.start),i._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],h={};let d,p,g=-1,y=i,v=0,S=0;const T=[S];for(;y;){for(;t.get(++r)[1]!==y;);s.push(r),y._tokenizer||(d=n.sliceStream(y),y.next||d.push(null),p&&a.defineSkip(y.start),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=i;++g<o.length;)o[g][0]==="exit"&&o[g-1][0]==="enter"&&o[g][1].type===o[g-1][1].type&&o[g][1].start.line!==o[g][1].end.line&&(S=g+1,T.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(a.events=[],y?(y._tokenizer=void 0,y.previous=void 0):T.pop(),g=T.length;g--;){const A=o.slice(T[g],T[g+1]),D=s.pop();l.push([D,D+A.length-1]),t.splice(D,2,A)}for(l.reverse(),g=-1;++g<l.length;)h[v+l[g][0]]=v+l[g][1],v+=l[g][1]-l[g][0]-1;return h}const NAe={resolve:GAe,tokenize:HAe},UAe={partial:!0,tokenize:zAe};function GAe(t){return Jre(t),t}function HAe(t,e){let i;return n;function n(o){return t.enter("content"),i=t.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?s(o):Pt(o)?t.check(UAe,a,s)(o):(t.consume(o),r)}function s(o){return t.exit("chunkContent"),t.exit("content"),e(o)}function a(o){return t.consume(o),t.exit("chunkContent"),i.next=t.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,r}}function zAe(t,e,i){const n=this;return r;function r(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ri(t,s,"linePrefix")}function s(a){if(a===null||Pt(a))return i(a);const o=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):t.interrupt(n.parser.constructs.flow,i,e)(a)}}function ese(t,e,i,n,r,s,a,o,l){const h=l||Number.POSITIVE_INFINITY;let d=0;return p;function p(A){return A===60?(t.enter(n),t.enter(r),t.enter(s),t.consume(A),t.exit(s),g):A===null||A===32||A===41||KE(A)?i(A):(t.enter(n),t.enter(a),t.enter(o),t.enter("chunkString",{contentType:"string"}),S(A))}function g(A){return A===62?(t.enter(s),t.consume(A),t.exit(s),t.exit(r),t.exit(n),e):(t.enter(o),t.enter("chunkString",{contentType:"string"}),y(A))}function y(A){return A===62?(t.exit("chunkString"),t.exit(o),g(A)):A===null||A===60||Pt(A)?i(A):(t.consume(A),A===92?v:y)}function v(A){return A===60||A===62||A===92?(t.consume(A),y):y(A)}function S(A){return!d&&(A===null||A===41||bn(A))?(t.exit("chunkString"),t.exit(o),t.exit(a),t.exit(n),e(A)):d<h&&A===40?(t.consume(A),d++,S):A===41?(t.consume(A),d--,S):A===null||A===32||A===40||KE(A)?i(A):(t.consume(A),A===92?T:S)}function T(A){return A===40||A===41||A===92?(t.consume(A),S):S(A)}}function tse(t,e,i,n,r,s){const a=this;let o=0,l;return h;function h(y){return t.enter(n),t.enter(r),t.consume(y),t.exit(r),t.enter(s),d}function d(y){return o>999||y===null||y===91||y===93&&!l||y===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?i(y):y===93?(t.exit(s),t.enter(r),t.consume(y),t.exit(r),t.exit(n),e):Pt(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Pt(y)||o++>999?(t.exit("chunkString"),d(y)):(t.consume(y),l||(l=!_i(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(t.consume(y),o++,p):p(y)}}function ise(t,e,i,n,r,s){let a;return o;function o(g){return g===34||g===39||g===40?(t.enter(n),t.enter(r),t.consume(g),t.exit(r),a=g===40?41:g,l):i(g)}function l(g){return g===a?(t.enter(r),t.consume(g),t.exit(r),t.exit(n),e):(t.enter(s),h(g))}function h(g){return g===a?(t.exit(s),l(a)):g===null?i(g):Pt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),Ri(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===a||g===null||Pt(g)?(t.exit("chunkString"),h(g)):(t.consume(g),g===92?p:d)}function p(g){return g===a||g===92?(t.consume(g),d):d(g)}}function px(t,e){let i;return n;function n(r){return Pt(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),i=!0,n):_i(r)?Ri(t,n,i?"linePrefix":"lineSuffix")(r):e(r)}}const VAe={name:"definition",tokenize:XAe},jAe={partial:!0,tokenize:YAe};function XAe(t,e,i){const n=this;let r;return s;function s(y){return t.enter("definition"),a(y)}function a(y){return tse.call(n,t,o,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function o(y){return r=uu(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),l):i(y)}function l(y){return bn(y)?px(t,h)(y):h(y)}function h(y){return ese(t,d,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function d(y){return t.attempt(jAe,p,p)(y)}function p(y){return _i(y)?Ri(t,g,"whitespace")(y):g(y)}function g(y){return y===null||Pt(y)?(t.exit("definition"),n.parser.defined.push(r),e(y)):i(y)}}function YAe(t,e,i){return n;function n(o){return bn(o)?px(t,r)(o):i(o)}function r(o){return ise(t,s,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return _i(o)?Ri(t,a,"whitespace")(o):a(o)}function a(o){return o===null||Pt(o)?e(o):i(o)}}const qAe={name:"hardBreakEscape",tokenize:WAe};function WAe(t,e,i){return n;function n(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return Pt(s)?(t.exit("hardBreakEscape"),e(s)):i(s)}}const $Ae={name:"headingAtx",resolve:KAe,tokenize:QAe};function KAe(t,e){let i=t.length-2,n=3,r,s;return t[n][1].type==="whitespace"&&(n+=2),i-2>n&&t[i][1].type==="whitespace"&&(i-=2),t[i][1].type==="atxHeadingSequence"&&(n===i-1||i-4>n&&t[i-2][1].type==="whitespace")&&(i-=n+1===i?2:4),i>n&&(r={type:"atxHeadingText",start:t[n][1].start,end:t[i][1].end},s={type:"chunkText",start:t[n][1].start,end:t[i][1].end,contentType:"text"},Oa(t,n,i-n+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function QAe(t,e,i){let n=0;return r;function r(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&n++<6?(t.consume(d),a):d===null||bn(d)?(t.exit("atxHeadingSequence"),o(d)):i(d)}function o(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||Pt(d)?(t.exit("atxHeading"),e(d)):_i(d)?Ri(t,o,"whitespace")(d):(t.enter("atxHeadingText"),h(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),o(d))}function h(d){return d===null||d===35||bn(d)?(t.exit("atxHeadingText"),o(d)):(t.consume(d),h)}}const ZAe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wG=["pre","script","style","textarea"],JAe={concrete:!0,name:"htmlFlow",resolveTo:iCe,tokenize:nCe},eCe={partial:!0,tokenize:sCe},tCe={partial:!0,tokenize:rCe};function iCe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function nCe(t,e,i){const n=this;let r,s,a,o,l;return h;function h(ee){return d(ee)}function d(ee){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(ee),p}function p(ee){return ee===33?(t.consume(ee),g):ee===47?(t.consume(ee),s=!0,S):ee===63?(t.consume(ee),r=3,n.interrupt?e:J):js(ee)?(t.consume(ee),a=String.fromCharCode(ee),T):i(ee)}function g(ee){return ee===45?(t.consume(ee),r=2,y):ee===91?(t.consume(ee),r=5,o=0,v):js(ee)?(t.consume(ee),r=4,n.interrupt?e:J):i(ee)}function y(ee){return ee===45?(t.consume(ee),n.interrupt?e:J):i(ee)}function v(ee){const Ge="CDATA[";return ee===Ge.charCodeAt(o++)?(t.consume(ee),o===Ge.length?n.interrupt?e:re:v):i(ee)}function S(ee){return js(ee)?(t.consume(ee),a=String.fromCharCode(ee),T):i(ee)}function T(ee){if(ee===null||ee===47||ee===62||bn(ee)){const Ge=ee===47,Ve=a.toLowerCase();return!Ge&&!s&&wG.includes(Ve)?(r=1,n.interrupt?e(ee):re(ee)):ZAe.includes(a.toLowerCase())?(r=6,Ge?(t.consume(ee),A):n.interrupt?e(ee):re(ee)):(r=7,n.interrupt&&!n.parser.lazy[n.now().line]?i(ee):s?D(ee):R(ee))}return ee===45||As(ee)?(t.consume(ee),a+=String.fromCharCode(ee),T):i(ee)}function A(ee){return ee===62?(t.consume(ee),n.interrupt?e:re):i(ee)}function D(ee){return _i(ee)?(t.consume(ee),D):O(ee)}function R(ee){return ee===47?(t.consume(ee),O):ee===58||ee===95||js(ee)?(t.consume(ee),B):_i(ee)?(t.consume(ee),R):O(ee)}function B(ee){return ee===45||ee===46||ee===58||ee===95||As(ee)?(t.consume(ee),B):z(ee)}function z(ee){return ee===61?(t.consume(ee),L):_i(ee)?(t.consume(ee),z):R(ee)}function L(ee){return ee===null||ee===60||ee===61||ee===62||ee===96?i(ee):ee===34||ee===39?(t.consume(ee),l=ee,H):_i(ee)?(t.consume(ee),L):te(ee)}function H(ee){return ee===l?(t.consume(ee),l=null,j):ee===null||Pt(ee)?i(ee):(t.consume(ee),H)}function te(ee){return ee===null||ee===34||ee===39||ee===47||ee===60||ee===61||ee===62||ee===96||bn(ee)?z(ee):(t.consume(ee),te)}function j(ee){return ee===47||ee===62||_i(ee)?R(ee):i(ee)}function O(ee){return ee===62?(t.consume(ee),q):i(ee)}function q(ee){return ee===null||Pt(ee)?re(ee):_i(ee)?(t.consume(ee),q):i(ee)}function re(ee){return ee===45&&r===2?(t.consume(ee),$):ee===60&&r===1?(t.consume(ee),se):ee===62&&r===4?(t.consume(ee),ie):ee===63&&r===3?(t.consume(ee),J):ee===93&&r===5?(t.consume(ee),_e):Pt(ee)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(eCe,be,ae)(ee)):ee===null||Pt(ee)?(t.exit("htmlFlowData"),ae(ee)):(t.consume(ee),re)}function ae(ee){return t.check(tCe,fe,be)(ee)}function fe(ee){return t.enter("lineEnding"),t.consume(ee),t.exit("lineEnding"),Te}function Te(ee){return ee===null||Pt(ee)?ae(ee):(t.enter("htmlFlowData"),re(ee))}function $(ee){return ee===45?(t.consume(ee),J):re(ee)}function se(ee){return ee===47?(t.consume(ee),a="",we):re(ee)}function we(ee){if(ee===62){const Ge=a.toLowerCase();return wG.includes(Ge)?(t.consume(ee),ie):re(ee)}return js(ee)&&a.length<8?(t.consume(ee),a+=String.fromCharCode(ee),we):re(ee)}function _e(ee){return ee===93?(t.consume(ee),J):re(ee)}function J(ee){return ee===62?(t.consume(ee),ie):ee===45&&r===2?(t.consume(ee),J):re(ee)}function ie(ee){return ee===null||Pt(ee)?(t.exit("htmlFlowData"),be(ee)):(t.consume(ee),ie)}function be(ee){return t.exit("htmlFlow"),e(ee)}}function rCe(t,e,i){const n=this;return r;function r(a){return Pt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):i(a)}function s(a){return n.parser.lazy[n.now().line]?i(a):e(a)}}function sCe(t,e,i){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(L_,e,i)}}const aCe={name:"htmlText",tokenize:oCe};function oCe(t,e,i){const n=this;let r,s,a;return o;function o(J){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(J),l}function l(J){return J===33?(t.consume(J),h):J===47?(t.consume(J),z):J===63?(t.consume(J),R):js(J)?(t.consume(J),te):i(J)}function h(J){return J===45?(t.consume(J),d):J===91?(t.consume(J),s=0,v):js(J)?(t.consume(J),D):i(J)}function d(J){return J===45?(t.consume(J),y):i(J)}function p(J){return J===null?i(J):J===45?(t.consume(J),g):Pt(J)?(a=p,se(J)):(t.consume(J),p)}function g(J){return J===45?(t.consume(J),y):p(J)}function y(J){return J===62?$(J):J===45?g(J):p(J)}function v(J){const ie="CDATA[";return J===ie.charCodeAt(s++)?(t.consume(J),s===ie.length?S:v):i(J)}function S(J){return J===null?i(J):J===93?(t.consume(J),T):Pt(J)?(a=S,se(J)):(t.consume(J),S)}function T(J){return J===93?(t.consume(J),A):S(J)}function A(J){return J===62?$(J):J===93?(t.consume(J),A):S(J)}function D(J){return J===null||J===62?$(J):Pt(J)?(a=D,se(J)):(t.consume(J),D)}function R(J){return J===null?i(J):J===63?(t.consume(J),B):Pt(J)?(a=R,se(J)):(t.consume(J),R)}function B(J){return J===62?$(J):R(J)}function z(J){return js(J)?(t.consume(J),L):i(J)}function L(J){return J===45||As(J)?(t.consume(J),L):H(J)}function H(J){return Pt(J)?(a=H,se(J)):_i(J)?(t.consume(J),H):$(J)}function te(J){return J===45||As(J)?(t.consume(J),te):J===47||J===62||bn(J)?j(J):i(J)}function j(J){return J===47?(t.consume(J),$):J===58||J===95||js(J)?(t.consume(J),O):Pt(J)?(a=j,se(J)):_i(J)?(t.consume(J),j):$(J)}function O(J){return J===45||J===46||J===58||J===95||As(J)?(t.consume(J),O):q(J)}function q(J){return J===61?(t.consume(J),re):Pt(J)?(a=q,se(J)):_i(J)?(t.consume(J),q):j(J)}function re(J){return J===null||J===60||J===61||J===62||J===96?i(J):J===34||J===39?(t.consume(J),r=J,ae):Pt(J)?(a=re,se(J)):_i(J)?(t.consume(J),re):(t.consume(J),fe)}function ae(J){return J===r?(t.consume(J),r=void 0,Te):J===null?i(J):Pt(J)?(a=ae,se(J)):(t.consume(J),ae)}function fe(J){return J===null||J===34||J===39||J===60||J===61||J===96?i(J):J===47||J===62||bn(J)?j(J):(t.consume(J),fe)}function Te(J){return J===47||J===62||bn(J)?j(J):i(J)}function $(J){return J===62?(t.consume(J),t.exit("htmlTextData"),t.exit("htmlText"),e):i(J)}function se(J){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(J),t.exit("lineEnding"),we}function we(J){return _i(J)?Ri(t,_e,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(J):_e(J)}function _e(J){return t.enter("htmlTextData"),a(J)}}const E4={name:"labelEnd",resolveAll:hCe,resolveTo:dCe,tokenize:fCe},uCe={tokenize:pCe},lCe={tokenize:mCe},cCe={tokenize:gCe};function hCe(t){let e=-1;const i=[];for(;++e<t.length;){const n=t[e][1];if(i.push(t[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const r=n.type==="labelImage"?4:2;n.type="data",e+=r}}return t.length!==i.length&&Oa(t,0,t.length,i),t}function dCe(t,e){let i=t.length,n=0,r,s,a,o;for(;i--;)if(r=t[i][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[i][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(t[i][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=i,r.type!=="labelLink")){n=2;break}}else r.type==="labelEnd"&&(a=i);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},d={type:"labelText",start:{...t[s+n+2][1].end},end:{...t[a-2][1].start}};return o=[["enter",l,e],["enter",h,e]],o=mo(o,t.slice(s+1,s+n+3)),o=mo(o,[["enter",d,e]]),o=mo(o,SA(e.parser.constructs.insideSpan.null,t.slice(s+n+4,a-3),e)),o=mo(o,[["exit",d,e],t[a-2],t[a-1],["exit",h,e]]),o=mo(o,t.slice(a+1)),o=mo(o,[["exit",l,e]]),Oa(t,s,t.length,o),t}function fCe(t,e,i){const n=this;let r=n.events.length,s,a;for(;r--;)if((n.events[r][1].type==="labelImage"||n.events[r][1].type==="labelLink")&&!n.events[r][1]._balanced){s=n.events[r][1];break}return o;function o(g){return s?s._inactive?p(g):(a=n.parser.defined.includes(uu(n.sliceSerialize({start:s.end,end:n.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),l):i(g)}function l(g){return g===40?t.attempt(uCe,d,a?d:p)(g):g===91?t.attempt(lCe,d,a?h:p)(g):a?d(g):p(g)}function h(g){return t.attempt(cCe,d,p)(g)}function d(g){return e(g)}function p(g){return s._balanced=!0,i(g)}}function pCe(t,e,i){return n;function n(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),r}function r(p){return bn(p)?px(t,s)(p):s(p)}function s(p){return p===41?d(p):ese(t,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return bn(p)?px(t,l)(p):d(p)}function o(p){return i(p)}function l(p){return p===34||p===39||p===40?ise(t,h,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):d(p)}function h(p){return bn(p)?px(t,d)(p):d(p)}function d(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):i(p)}}function mCe(t,e,i){const n=this;return r;function r(o){return tse.call(n,t,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return n.parser.defined.includes(uu(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(o):i(o)}function a(o){return i(o)}}function gCe(t,e,i){return n;function n(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):i(s)}}const bCe={name:"labelStartImage",resolveAll:E4.resolveAll,tokenize:yCe};function yCe(t,e,i){const n=this;return r;function r(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),s}function s(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),a):i(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?i(o):e(o)}}const xCe={name:"labelStartLink",resolveAll:E4.resolveAll,tokenize:_Ce};function _Ce(t,e,i){const n=this;return r;function r(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?i(a):e(a)}}const KD={name:"lineEnding",tokenize:vCe};function vCe(t,e){return i;function i(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),Ri(t,e,"linePrefix")}}const JT={name:"thematicBreak",tokenize:TCe};function TCe(t,e,i){let n=0,r;return s;function s(h){return t.enter("thematicBreak"),a(h)}function a(h){return r=h,o(h)}function o(h){return h===r?(t.enter("thematicBreakSequence"),l(h)):n>=3&&(h===null||Pt(h))?(t.exit("thematicBreak"),e(h)):i(h)}function l(h){return h===r?(t.consume(h),n++,l):(t.exit("thematicBreakSequence"),_i(h)?Ri(t,o,"whitespace")(h):o(h))}}const ia={continuation:{tokenize:CCe},exit:DCe,name:"list",tokenize:ACe},ECe={partial:!0,tokenize:RCe},SCe={partial:!0,tokenize:wCe};function ACe(t,e,i){const n=this,r=n.events[n.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return o;function o(y){const v=n.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!n.containerState.marker||y===n.containerState.marker:fB(y)){if(n.containerState.type||(n.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(JT,i,h)(y):h(y);if(!n.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(y)}return i(y)}function l(y){return fB(y)&&++a<10?(t.consume(y),l):(!n.interrupt||a<2)&&(n.containerState.marker?y===n.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),h(y)):i(y)}function h(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||y,t.check(L_,n.interrupt?i:d,t.attempt(ECe,g,p))}function d(y){return n.containerState.initialBlankLine=!0,s++,g(y)}function p(y){return _i(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):i(y)}function g(y){return n.containerState.size=s+n.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function CCe(t,e,i){const n=this;return n.containerState._closeFlow=void 0,t.check(L_,r,s);function r(o){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Ri(t,e,"listItemIndent",n.containerState.size+1)(o)}function s(o){return n.containerState.furtherBlankLines||!_i(o)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(o)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,t.attempt(SCe,e,a)(o))}function a(o){return n.containerState._closeFlow=!0,n.interrupt=void 0,Ri(t,t.attempt(ia,e,i),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function wCe(t,e,i){const n=this;return Ri(t,r,"listItemIndent",n.containerState.size+1);function r(s){const a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?e(s):i(s)}}function DCe(t){t.exit(this.containerState.type)}function RCe(t,e,i){const n=this;return Ri(t,r,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const a=n.events[n.events.length-1];return!_i(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):i(s)}}const DG={name:"setextUnderline",resolveTo:PCe,tokenize:MCe};function PCe(t,e){let i=t.length,n,r,s;for(;i--;)if(t[i][0]==="enter"){if(t[i][1].type==="content"){n=i;break}t[i][1].type==="paragraph"&&(r=i)}else t[i][1].type==="content"&&t.splice(i,1),!s&&t[i][1].type==="definition"&&(s=i);const a={type:"setextHeading",start:{...t[n][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",a,e]),t.splice(s+1,0,["exit",t[n][1],e]),t[n][1].end={...t[s][1].end}):t[n][1]=a,t.push(["exit",a,e]),t}function MCe(t,e,i){const n=this;let r;return s;function s(h){let d=n.events.length,p;for(;d--;)if(n.events[d][1].type!=="lineEnding"&&n.events[d][1].type!=="linePrefix"&&n.events[d][1].type!=="content"){p=n.events[d][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||p)?(t.enter("setextHeadingLine"),r=h,a(h)):i(h)}function a(h){return t.enter("setextHeadingLineSequence"),o(h)}function o(h){return h===r?(t.consume(h),o):(t.exit("setextHeadingLineSequence"),_i(h)?Ri(t,l,"lineSuffix")(h):l(h))}function l(h){return h===null||Pt(h)?(t.exit("setextHeadingLine"),e(h)):i(h)}}const BCe={tokenize:GCe,partial:!0};function kCe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:LCe,continuation:{tokenize:NCe},exit:UCe}},text:{91:{name:"gfmFootnoteCall",tokenize:ICe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:OCe,resolveTo:FCe}}}}function OCe(t,e,i){const n=this;let r=n.events.length;const s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a;for(;r--;){const l=n.events[r][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!a||!a._balanced)return i(l);const h=uu(n.sliceSerialize({start:a.end,end:n.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?i(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function FCe(t,e){let i=t.length;for(;i--;)if(t[i][1].type==="labelImage"&&t[i][0]==="enter"){t[i][1];break}t[i+1][1].type="data",t[i+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},t[i+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[i+3][1].end),end:Object.assign({},t[i+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[t[i+1],t[i+2],["enter",n,e],t[i+3],t[i+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",n,e]];return t.splice(i,t.length-i+1,...o),t}function ICe(t,e,i){const n=this,r=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s=0,a;return o;function o(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),l}function l(p){return p!==94?i(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(p){if(s>999||p===93&&!a||p===null||p===91||bn(p))return i(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return r.includes(uu(n.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):i(p)}return bn(p)||(a=!0),s++,t.consume(p),p===92?d:h}function d(p){return p===91||p===92||p===93?(t.consume(p),s++,h):h(p)}}function LCe(t,e,i){const n=this,r=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s,a=0,o;return l;function l(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):i(v)}function d(v){if(a>999||v===93&&!o||v===null||v===91||bn(v))return i(v);if(v===93){t.exit("chunkString");const S=t.exit("gfmFootnoteDefinitionLabelString");return s=uu(n.sliceSerialize(S)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return bn(v)||(o=!0),a++,t.consume(v),v===92?p:d}function p(v){return v===91||v===92||v===93?(t.consume(v),a++,d):d(v)}function g(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),r.includes(s)||r.push(s),Ri(t,y,"gfmFootnoteDefinitionWhitespace")):i(v)}function y(v){return e(v)}}function NCe(t,e,i){return t.check(L_,e,t.attempt(BCe,e,i))}function UCe(t){t.exit("gfmFootnoteDefinition")}function GCe(t,e,i){const n=this;return Ri(t,r,"gfmFootnoteDefinitionIndent",5);function r(s){const a=n.events[n.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(s):i(s)}}function HCe(t){let i=(t||{}).singleTilde;const n={name:"strikethrough",tokenize:s,resolveAll:r};return i==null&&(i=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(a,o){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let h=l;for(;h--;)if(a[h][0]==="exit"&&a[h][1].type==="strikethroughSequenceTemporary"&&a[h][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[h][1].end.offset-a[h][1].start.offset){a[l][1].type="strikethroughSequence",a[h][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[h][1].start),end:Object.assign({},a[l][1].end)},p={type:"strikethroughText",start:Object.assign({},a[h][1].end),end:Object.assign({},a[l][1].start)},g=[["enter",d,o],["enter",a[h][1],o],["exit",a[h][1],o],["enter",p,o]],y=o.parser.constructs.insideSpan.null;y&&Oa(g,g.length,0,SA(y,a.slice(h+1,l),o)),Oa(g,g.length,0,[["exit",p,o],["enter",a[l][1],o],["exit",a[l][1],o],["exit",d,o]]),Oa(a,h-1,l-h+3,g),l=h+g.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function s(a,o,l){const h=this.previous,d=this.events;let p=0;return g;function g(v){return h===126&&d[d.length-1][1].type!=="characterEscape"?l(v):(a.enter("strikethroughSequenceTemporary"),y(v))}function y(v){const S=dg(h);if(v===126)return p>1?l(v):(a.consume(v),p++,y);if(p<2&&!i)return l(v);const T=a.exit("strikethroughSequenceTemporary"),A=dg(v);return T._open=!A||A===2&&!!S,T._close=!S||S===2&&!!A,o(v)}}}class zCe{constructor(){this.map=[]}add(e,i,n){VCe(this,e,i,n)}consume(e){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let i=this.map.length;const n=[];for(;i>0;)i-=1,n.push(e.slice(this.map[i][0]+this.map[i][1]),this.map[i][2]),e.length=this.map[i][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const s of r)e.push(s);r=n.pop()}this.map.length=0}}function VCe(t,e,i,n){let r=0;if(!(i===0&&n.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=i,t.map[r][2].push(...n);return}r+=1}t.map.push([e,i,n])}}function jCe(t,e){let i=!1;const n=[];for(;e<t.length;){const r=t[e];if(i){if(r[0]==="enter")r[1].type==="tableContent"&&n.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=n.length-1;n[s]=n[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(i=!0);e+=1}return n}function XCe(){return{flow:{null:{name:"table",tokenize:YCe,resolveAll:qCe}}}}function YCe(t,e,i){const n=this;let r=0,s=0,a;return o;function o(O){let q=n.events.length-1;for(;q>-1;){const fe=n.events[q][1].type;if(fe==="lineEnding"||fe==="linePrefix")q--;else break}const re=q>-1?n.events[q][1].type:null,ae=re==="tableHead"||re==="tableRow"?L:l;return ae===L&&n.parser.lazy[n.now().line]?i(O):ae(O)}function l(O){return t.enter("tableHead"),t.enter("tableRow"),h(O)}function h(O){return O===124||(a=!0,s+=1),d(O)}function d(O){return O===null?i(O):Pt(O)?s>1?(s=0,n.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),y):i(O):_i(O)?Ri(t,d,"whitespace")(O):(s+=1,a&&(a=!1,r+=1),O===124?(t.enter("tableCellDivider"),t.consume(O),t.exit("tableCellDivider"),a=!0,d):(t.enter("data"),p(O)))}function p(O){return O===null||O===124||bn(O)?(t.exit("data"),d(O)):(t.consume(O),O===92?g:p)}function g(O){return O===92||O===124?(t.consume(O),p):p(O)}function y(O){return n.interrupt=!1,n.parser.lazy[n.now().line]?i(O):(t.enter("tableDelimiterRow"),a=!1,_i(O)?Ri(t,v,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):v(O))}function v(O){return O===45||O===58?T(O):O===124?(a=!0,t.enter("tableCellDivider"),t.consume(O),t.exit("tableCellDivider"),S):z(O)}function S(O){return _i(O)?Ri(t,T,"whitespace")(O):T(O)}function T(O){return O===58?(s+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(O),t.exit("tableDelimiterMarker"),A):O===45?(s+=1,A(O)):O===null||Pt(O)?B(O):z(O)}function A(O){return O===45?(t.enter("tableDelimiterFiller"),D(O)):z(O)}function D(O){return O===45?(t.consume(O),D):O===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(O),t.exit("tableDelimiterMarker"),R):(t.exit("tableDelimiterFiller"),R(O))}function R(O){return _i(O)?Ri(t,B,"whitespace")(O):B(O)}function B(O){return O===124?v(O):O===null||Pt(O)?!a||r!==s?z(O):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(O)):z(O)}function z(O){return i(O)}function L(O){return t.enter("tableRow"),H(O)}function H(O){return O===124?(t.enter("tableCellDivider"),t.consume(O),t.exit("tableCellDivider"),H):O===null||Pt(O)?(t.exit("tableRow"),e(O)):_i(O)?Ri(t,H,"whitespace")(O):(t.enter("data"),te(O))}function te(O){return O===null||O===124||bn(O)?(t.exit("data"),H(O)):(t.consume(O),O===92?j:te)}function j(O){return O===92||O===124?(t.consume(O),te):te(O)}}function qCe(t,e){let i=-1,n=!0,r=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,l=0,h,d,p;const g=new zCe;for(;++i<t.length;){const y=t[i],v=y[1];y[0]==="enter"?v.type==="tableHead"?(o=!1,l!==0&&(RG(g,e,l,h,d),d=void 0,l=0),h={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},g.add(i,0,[["enter",h,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(n=!0,p=void 0,s=[0,0,0,0],a=[0,i+1,0,0],o&&(o=!1,d={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},g.add(i,0,[["enter",d,e]])),r=v.type==="tableDelimiterRow"?2:d?3:1):r&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(n=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],p=oT(g,e,s,r,void 0,p),s=[0,0,0,0]),a[2]=i)):v.type==="tableCellDivider"&&(n?n=!1:(s[1]!==0&&(a[0]=a[1],p=oT(g,e,s,r,void 0,p)),s=a,a=[s[1],i,0,0])):v.type==="tableHead"?(o=!0,l=i):v.type==="tableRow"||v.type==="tableDelimiterRow"?(l=i,s[1]!==0?(a[0]=a[1],p=oT(g,e,s,r,i,p)):a[1]!==0&&(p=oT(g,e,a,r,i,p)),r=0):r&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(a[3]=i)}for(l!==0&&RG(g,e,l,h,d),g.consume(e.events),i=-1;++i<e.events.length;){const y=e.events[i];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=jCe(e.events,i))}return t}function oT(t,e,i,n,r,s){const a=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",o="tableContent";i[0]!==0&&(s.end=Object.assign({},vm(e.events,i[0])),t.add(i[0],0,[["exit",s,e]]));const l=vm(e.events,i[1]);if(s={type:a,start:Object.assign({},l),end:Object.assign({},l)},t.add(i[1],0,[["enter",s,e]]),i[2]!==0){const h=vm(e.events,i[2]),d=vm(e.events,i[3]),p={type:o,start:Object.assign({},h),end:Object.assign({},d)};if(t.add(i[2],0,[["enter",p,e]]),n!==2){const g=e.events[i[2]],y=e.events[i[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",i[3]>i[2]+1){const v=i[2]+1,S=i[3]-i[2]-1;t.add(v,S,[])}}t.add(i[3]+1,0,[["exit",p,e]])}return r!==void 0&&(s.end=Object.assign({},vm(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function RG(t,e,i,n,r){const s=[],a=vm(e.events,i);r&&(r.end=Object.assign({},a),s.push(["exit",r,e])),n.end=Object.assign({},a),s.push(["exit",n,e]),t.add(i+1,0,s)}function vm(t,e){const i=t[e],n=i[0]==="enter"?"start":"end";return i[1][n]}const WCe={name:"tasklistCheck",tokenize:KCe};function $Ce(){return{text:{91:WCe}}}function KCe(t,e,i){const n=this;return r;function r(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?i(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return bn(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),a):i(l)}function a(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),o):i(l)}function o(l){return Pt(l)?e(l):_i(l)?t.check({tokenize:QCe},e,i)(l):i(l)}}function QCe(t,e,i){return Ri(t,n,"whitespace");function n(r){return r===null?i(r):e(r)}}function ZCe(t){return Hre([uAe(),kCe(),HCe(t),XCe(),$Ce()])}const JCe={};function ewe(t){const e=this,i=t||JCe,n=e.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),a=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(ZCe(i)),s.push(iAe()),a.push(nAe(i))}function fm(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ey={};const twe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iwe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nwe={};function PG(t,e){return(nwe.jsx?iwe:twe).test(t)}const rwe=/[ \t\n\f\r]/g;function swe(t){return typeof t=="object"?t.type==="text"?MG(t.value):!1:MG(t)}function MG(t){return t.replace(rwe,"")===""}var pm={},QD,BG;function awe(){if(BG)return QD;BG=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,i=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,l=`
`,h="/",d="*",p="",g="comment",y="declaration";QD=function(S,T){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];T=T||{};var A=1,D=1;function R(ae){var fe=ae.match(e);fe&&(A+=fe.length);var Te=ae.lastIndexOf(l);D=~Te?ae.length-Te:D+ae.length}function B(){var ae={line:A,column:D};return function(fe){return fe.position=new z(ae),te(),fe}}function z(ae){this.start=ae,this.end={line:A,column:D},this.source=T.source}z.prototype.content=S;function L(ae){var fe=new Error(T.source+":"+A+":"+D+": "+ae);if(fe.reason=ae,fe.filename=T.source,fe.line=A,fe.column=D,fe.source=S,!T.silent)throw fe}function H(ae){var fe=ae.exec(S);if(fe){var Te=fe[0];return R(Te),S=S.slice(Te.length),fe}}function te(){H(i)}function j(ae){var fe;for(ae=ae||[];fe=O();)fe!==!1&&ae.push(fe);return ae}function O(){var ae=B();if(!(h!=S.charAt(0)||d!=S.charAt(1))){for(var fe=2;p!=S.charAt(fe)&&(d!=S.charAt(fe)||h!=S.charAt(fe+1));)++fe;if(fe+=2,p===S.charAt(fe-1))return L("End of comment missing");var Te=S.slice(2,fe-2);return D+=2,R(Te),S=S.slice(fe),D+=2,ae({type:g,comment:Te})}}function q(){var ae=B(),fe=H(n);if(fe){if(O(),!H(r))return L("property missing ':'");var Te=H(s),$=ae({type:y,property:v(fe[0].replace(t,p)),value:Te?v(Te[0].replace(t,p)):p});return H(a),$}}function re(){var ae=[];j(ae);for(var fe;fe=q();)fe!==!1&&(ae.push(fe),j(ae));return ae}return te(),re()};function v(S){return S?S.replace(o,p):p}return QD}var kG;function owe(){if(kG)return pm;kG=1;var t=pm&&pm.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pm,"__esModule",{value:!0}),pm.default=i;const e=t(awe());function i(n,r){let s=null;if(!n||typeof n!="string")return s;const a=(0,e.default)(n),o=typeof r=="function";return a.forEach(l=>{if(l.type!=="declaration")return;const{property:h,value:d}=l;o?r(h,d,l):d&&(s=s||{},s[h]=d)}),s}return pm}var Sy={},OG;function uwe(){if(OG)return Sy;OG=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,i=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(h){return!h||i.test(h)||t.test(h)},a=function(h,d){return d.toUpperCase()},o=function(h,d){return"".concat(d,"-")},l=function(h,d){return d===void 0&&(d={}),s(h)?h:(h=h.toLowerCase(),d.reactCompat?h=h.replace(r,o):h=h.replace(n,o),h.replace(e,a))};return Sy.camelCase=l,Sy}var Ay,FG;function lwe(){if(FG)return Ay;FG=1;var t=Ay&&Ay.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(owe()),i=uwe();function n(r,s){var a={};return!r||typeof r!="string"||(0,e.default)(r,function(o,l){o&&l&&(a[(0,i.camelCase)(o,s)]=l)}),a}return n.default=n,Ay=n,Ay}var cwe=lwe();const hwe=ZE(cwe);function mx(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?IG(t.position):"start"in t||"end"in t?IG(t):"line"in t||"column"in t?gB(t):""}function gB(t){return LG(t&&t.line)+":"+LG(t&&t.column)}function IG(t){return gB(t&&t.start)+"-"+gB(t&&t.end)}function LG(t){return t&&typeof t=="number"?t:1}class Ps extends Error{constructor(e,i,n){super(),typeof i=="string"&&(n=i,i=void 0);let r="",s={},a=!1;if(i&&("line"in i&&"column"in i?s={place:i}:"start"in i&&"end"in i?s={place:i}:"type"in i?s={ancestors:[i],place:i.position}:s={...i}),typeof e=="string"?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?s.ruleId=n:(s.source=n.slice(0,l),s.ruleId=n.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=o?o.line:void 0,this.name=mx(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ps.prototype.file="";Ps.prototype.name="";Ps.prototype.reason="";Ps.prototype.message="";Ps.prototype.stack="";Ps.prototype.column=void 0;Ps.prototype.line=void 0;Ps.prototype.ancestors=void 0;Ps.prototype.cause=void 0;Ps.prototype.fatal=void 0;Ps.prototype.place=void 0;Ps.prototype.ruleId=void 0;Ps.prototype.source=void 0;const S4={}.hasOwnProperty,dwe=new Map,fwe=/[A-Z]/g,pwe=new Set(["table","tbody","thead","tfoot","tr"]),mwe=new Set(["td","th"]),nse="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function gwe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const i=e.filePath||void 0;let n;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=Swe(i,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=Ewe(i,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:n,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:i,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Hg:pA,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=rse(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function rse(t,e,i){if(e.type==="element")return bwe(t,e,i);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return ywe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return _we(t,e,i);if(e.type==="mdxjsEsm")return xwe(t,e);if(e.type==="root")return vwe(t,e,i);if(e.type==="text")return Twe(t,e)}function bwe(t,e,i){const n=t.schema;let r=n;e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Hg,t.schema=r),t.ancestors.push(e);const s=ase(t,e.tagName,!1),a=Awe(t,e);let o=C4(t,e);return pwe.has(e.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!swe(l):!0})),sse(t,a,s,e),A4(a,o),t.ancestors.pop(),t.schema=n,t.create(e,s,a,i)}function ywe(t,e){if(e.data&&e.data.estree&&t.evaluater){const n=e.data.estree.body[0];return n.type,t.evaluater.evaluateExpression(n.expression)}Zx(t,e.position)}function xwe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Zx(t,e.position)}function _we(t,e,i){const n=t.schema;let r=n;e.name==="svg"&&n.space==="html"&&(r=Hg,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:ase(t,e.name,!0),a=Cwe(t,e),o=C4(t,e);return sse(t,a,s,e),A4(a,o),t.ancestors.pop(),t.schema=n,t.create(e,s,a,i)}function vwe(t,e,i){const n={};return A4(n,C4(t,e)),t.create(e,t.Fragment,n,i)}function Twe(t,e){return e.value}function sse(t,e,i,n){typeof i!="string"&&i!==t.Fragment&&t.passNode&&(e.node=n)}function A4(t,e){if(e.length>0){const i=e.length>1?e:e[0];i&&(t.children=i)}}function Ewe(t,e,i){return n;function n(r,s,a,o){const h=Array.isArray(a.children)?i:e;return o?h(s,a,o):h(s,a)}}function Swe(t,e){return i;function i(n,r,s,a){const o=Array.isArray(s.children),l=Sl(n);return e(r,s,a,o,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function Awe(t,e){const i={};let n,r;for(r in e.properties)if(r!=="children"&&S4.call(e.properties,r)){const s=wwe(t,r,e.properties[r]);if(s){const[a,o]=s;t.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&mwe.has(e.tagName)?n=o:i[a]=o}}if(n){const s=i.style||(i.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return i}function Cwe(t,e){const i={};for(const n of e.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&t.evaluater){const s=n.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(i,t.evaluater.evaluateExpression(o.argument))}else Zx(t,e.position);else{const r=n.name;let s;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&t.evaluater){const o=n.value.data.estree.body[0];o.type,s=t.evaluater.evaluateExpression(o.expression)}else Zx(t,e.position);else s=n.value===null?!0:n.value;i[r]=s}return i}function C4(t,e){const i=[];let n=-1;const r=t.passKeys?new Map:dwe;for(;++n<e.children.length;){const s=e.children[n];let a;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const h=r.get(l)||0;a=l+"-"+h,r.set(l,h+1)}}const o=rse(t,s,a);o!==void 0&&i.push(o)}return i}function wwe(t,e,i){const n=c4(t.schema,e);if(!(i==null||typeof i=="number"&&Number.isNaN(i))){if(Array.isArray(i)&&(i=n.commaSeparated?Dne(i):Rne(i)),n.property==="style"){let r=typeof i=="object"?i:Dwe(t,String(i));return t.stylePropertyNameCase==="css"&&(r=Rwe(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&n.space?Uve[n.property]||n.property:n.attribute,i]}}function Dwe(t,e){try{return hwe(e,{reactCompat:!0})}catch(i){if(t.ignoreInvalidStyle)return{};const n=i,r=new Ps("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=nse+"#cannot-parse-style-attribute",r}}function ase(t,e,i){let n;if(!i)n={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,a;for(;++s<r.length;){const o=PG(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}n=a}else n=PG(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(n.type==="Literal"){const r=n.value;return S4.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(n);Zx(t)}function Zx(t,e){const i=new Ps("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=nse+"#cannot-handle-mdx-estrees-without-createevaluater",i}function Rwe(t){const e={};let i;for(i in t)S4.call(t,i)&&(e[Pwe(i)]=t[i]);return e}function Pwe(t){let e=t.replace(fwe,Mwe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Mwe(t){return"-"+t.toLowerCase()}const ZD={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Bwe={tokenize:kwe};function kwe(t){const e=t.attempt(this.parser.constructs.contentInitial,n,r);let i;return e;function n(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Ri(t,e,"linePrefix")}function r(o){return t.enter("paragraph"),s(o)}function s(o){const l=t.enter("chunkText",{contentType:"text",previous:i});return i&&(i.next=l),i=l,a(o)}function a(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return Pt(o)?(t.consume(o),t.exit("chunkText"),s):(t.consume(o),a)}}const Owe={tokenize:Fwe},NG={tokenize:Iwe};function Fwe(t){const e=this,i=[];let n=0,r,s,a;return o;function o(R){if(n<i.length){const B=i[n];return e.containerState=B[1],t.attempt(B[0].continuation,l,h)(R)}return h(R)}function l(R){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&D();const B=e.events.length;let z=B,L;for(;z--;)if(e.events[z][0]==="exit"&&e.events[z][1].type==="chunkFlow"){L=e.events[z][1].end;break}A(n);let H=B;for(;H<e.events.length;)e.events[H][1].end={...L},H++;return Oa(e.events,z+1,0,e.events.slice(B)),e.events.length=H,h(R)}return o(R)}function h(R){if(n===i.length){if(!r)return g(R);if(r.currentConstruct&&r.currentConstruct.concrete)return v(R);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(NG,d,p)(R)}function d(R){return r&&D(),A(n),g(R)}function p(R){return e.parser.lazy[e.now().line]=n!==i.length,a=e.now().offset,v(R)}function g(R){return e.containerState={},t.attempt(NG,y,v)(R)}function y(R){return n++,i.push([e.currentConstruct,e.containerState]),g(R)}function v(R){if(R===null){r&&D(),A(0),t.consume(R);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),S(R)}function S(R){if(R===null){T(t.exit("chunkFlow"),!0),A(0),t.consume(R);return}return Pt(R)?(t.consume(R),T(t.exit("chunkFlow")),n=0,e.interrupt=void 0,o):(t.consume(R),S)}function T(R,B){const z=e.sliceStream(R);if(B&&z.push(null),R.previous=s,s&&(s.next=R),s=R,r.defineSkip(R.start),r.write(z),e.parser.lazy[R.start.line]){let L=r.events.length;for(;L--;)if(r.events[L][1].start.offset<a&&(!r.events[L][1].end||r.events[L][1].end.offset>a))return;const H=e.events.length;let te=H,j,O;for(;te--;)if(e.events[te][0]==="exit"&&e.events[te][1].type==="chunkFlow"){if(j){O=e.events[te][1].end;break}j=!0}for(A(n),L=H;L<e.events.length;)e.events[L][1].end={...O},L++;Oa(e.events,te+1,0,e.events.slice(H)),e.events.length=L}}function A(R){let B=i.length;for(;B-- >R;){const z=i[B];e.containerState=z[1],z[0].exit.call(e,t)}i.length=R}function D(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function Iwe(t,e,i){return Ri(t,t.attempt(this.parser.constructs.document,e,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Lwe={tokenize:Nwe};function Nwe(t){const e=this,i=t.attempt(L_,n,t.attempt(this.parser.constructs.flowInitial,r,Ri(t,t.attempt(this.parser.constructs.flow,r,t.attempt(NAe,r)),"linePrefix")));return i;function n(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,i}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,i}}const Uwe={resolveAll:use()},Gwe=ose("string"),Hwe=ose("text");function ose(t){return{resolveAll:use(t==="text"?zwe:void 0),tokenize:e};function e(i){const n=this,r=this.parser.constructs[t],s=i.attempt(r,a,o);return a;function a(d){return h(d)?s(d):o(d)}function o(d){if(d===null){i.consume(d);return}return i.enter("data"),i.consume(d),l}function l(d){return h(d)?(i.exit("data"),s(d)):(i.consume(d),l)}function h(d){if(d===null)return!0;const p=r[d];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(n,n.previous))return!0}return!1}}}function use(t){return e;function e(i,n){let r=-1,s;for(;++r<=i.length;)s===void 0?i[r]&&i[r][1].type==="data"&&(s=r,r++):(!i[r]||i[r][1].type!=="data")&&(r!==s+2&&(i[s][1].end=i[r-1][1].end,i.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(i,n):i}}function zwe(t,e){let i=0;for(;++i<=t.length;)if((i===t.length||t[i][1].type==="lineEnding")&&t[i-1][1].type==="data"){const n=t[i-1][1],r=e.sliceStream(n);let s=r.length,a=-1,o=0,l;for(;s--;){const h=r[s];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(h===-2)l=!0,o++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&i===t.length&&(o=0),o){const h={type:i===t.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:n.start._bufferIndex+a,_index:n.start._index+s,line:n.end.line,column:n.end.column-o,offset:n.end.offset-o},end:{...n.end}};n.end={...h.start},n.start.offset===n.end.offset?Object.assign(n,h):(t.splice(i,0,["enter",h,e],["exit",h,e]),i+=2)}i++}return t}const Vwe={42:ia,43:ia,45:ia,48:ia,49:ia,50:ia,51:ia,52:ia,53:ia,54:ia,55:ia,56:ia,57:ia,62:Kre},jwe={91:VAe},Xwe={[-2]:$D,[-1]:$D,32:$D},Ywe={35:$Ae,42:JT,45:[DG,JT],60:JAe,61:DG,95:JT,96:CG,126:CG},qwe={38:Zre,92:Qre},Wwe={[-5]:KD,[-4]:KD,[-3]:KD,33:bCe,38:Zre,42:mB,60:[xAe,aCe],91:xCe,92:[qAe,Qre],93:E4,95:mB,96:BAe},$we={null:[mB,Uwe]},Kwe={null:[42,95]},Qwe={null:[]},Zwe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Kwe,contentInitial:jwe,disable:Qwe,document:Vwe,flow:Ywe,flowInitial:Xwe,insideSpan:$we,string:qwe,text:Wwe},Symbol.toStringTag,{value:"Module"}));function Jwe(t,e,i){let n={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0};const r={},s=[];let a=[],o=[];const l={attempt:H(z),check:H(L),consume:D,enter:R,exit:B,interrupt:H(L,{interrupt:!0})},h={code:null,containerState:{},defineSkip:S,events:[],now:v,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:p};let d=e.tokenize.call(h,l);return e.resolveAll&&s.push(e),h;function p(q){return a=mo(a,q),T(),a[a.length-1]!==null?[]:(te(e,0),h.events=SA(s,h.events,h),h.events)}function g(q,re){return tDe(y(q),re)}function y(q){return eDe(a,q)}function v(){const{_bufferIndex:q,_index:re,line:ae,column:fe,offset:Te}=n;return{_bufferIndex:q,_index:re,line:ae,column:fe,offset:Te}}function S(q){r[q.line]=q.column,O()}function T(){let q;for(;n._index<a.length;){const re=a[n._index];if(typeof re=="string")for(q=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===q&&n._bufferIndex<re.length;)A(re.charCodeAt(n._bufferIndex));else A(re)}}function A(q){d=d(q)}function D(q){Pt(q)?(n.line++,n.column=1,n.offset+=q===-3?2:1,O()):q!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=q}function R(q,re){const ae=re||{};return ae.type=q,ae.start=v(),h.events.push(["enter",ae,h]),o.push(ae),ae}function B(q){const re=o.pop();return re.end=v(),h.events.push(["exit",re,h]),re}function z(q,re){te(q,re.from)}function L(q,re){re.restore()}function H(q,re){return ae;function ae(fe,Te,$){let se,we,_e,J;return Array.isArray(fe)?be(fe):"tokenize"in fe?be([fe]):ie(fe);function ie(Ye){return lt;function lt(pt){const tt=pt!==null&&Ye[pt],$t=pt!==null&&Ye.null,li=[...Array.isArray(tt)?tt:tt?[tt]:[],...Array.isArray($t)?$t:$t?[$t]:[]];return be(li)(pt)}}function be(Ye){return se=Ye,we=0,Ye.length===0?$:ee(Ye[we])}function ee(Ye){return lt;function lt(pt){return J=j(),_e=Ye,Ye.partial||(h.currentConstruct=Ye),Ye.name&&h.parser.constructs.disable.null.includes(Ye.name)?Ve():Ye.tokenize.call(re?Object.assign(Object.create(h),re):h,l,Ge,Ve)(pt)}}function Ge(Ye){return q(_e,J),Te}function Ve(Ye){return J.restore(),++we<se.length?ee(se[we]):$}}}function te(q,re){q.resolveAll&&!s.includes(q)&&s.push(q),q.resolve&&Oa(h.events,re,h.events.length-re,q.resolve(h.events.slice(re),h)),q.resolveTo&&(h.events=q.resolveTo(h.events,h))}function j(){const q=v(),re=h.previous,ae=h.currentConstruct,fe=h.events.length,Te=Array.from(o);return{from:fe,restore:$};function $(){n=q,h.previous=re,h.currentConstruct=ae,h.events.length=fe,o=Te,O()}}function O(){n.line in r&&n.column<2&&(n.column=r[n.line],n.offset+=r[n.line]-1)}}function eDe(t,e){const i=e.start._index,n=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let a;if(i===r)a=[t[i].slice(n,s)];else{if(a=t.slice(i,r),n>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(n):a.shift()}s>0&&a.push(t[r].slice(0,s))}return a}function tDe(t,e){let i=-1;const n=[];let r;for(;++i<t.length;){const s=t[i];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&r)continue;a=" ";break}default:a=String.fromCharCode(s)}r=s===-2,n.push(a)}return n.join("")}function iDe(t){const n={constructs:Hre([Zwe,...(t||{}).extensions||[]]),content:r(Bwe),defined:[],document:r(Owe),flow:r(Lwe),lazy:{},string:r(Gwe),text:r(Hwe)};return n;function r(s){return a;function a(o){return Jwe(n,s,o)}}}function nDe(t){for(;!Jre(t););return t}const UG=/[\0\t\n\r]/g;function rDe(){let t=1,e="",i=!0,n;return r;function r(s,a,o){const l=[];let h,d,p,g,y;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),p=0,e="",i&&(s.charCodeAt(0)===65279&&p++,i=void 0);p<s.length;){if(UG.lastIndex=p,h=UG.exec(s),g=h&&h.index!==void 0?h.index:s.length,y=s.charCodeAt(g),!h){e=s.slice(p);break}if(y===10&&p===g&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),p<g&&(l.push(s.slice(p,g)),t+=g-p),y){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:n=!0,t=1}p=g+1}return o&&(n&&l.push(-5),e&&l.push(e),l.push(null)),l}}const lse={}.hasOwnProperty;function sDe(t,e,i){return typeof e!="string"&&(i=e,e=void 0),aDe(i)(nDe(iDe(i).document().write(rDe()(t,e,!0))))}function aDe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Nn),autolinkProtocol:j,autolinkEmail:j,atxHeading:s(Nt),blockQuote:s($t),characterEscape:j,characterReference:j,codeFenced:s(li),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(li,a),codeText:s(Rt,a),codeTextData:j,data:j,codeFlowValue:j,definition:s(Qt),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Bt),hardBreakEscape:s(fi),hardBreakTrailing:s(fi),htmlFlow:s(Si,a),htmlFlowData:j,htmlText:s(Si,a),htmlTextData:j,image:s(Cn),label:a,link:s(Nn),listItem:s(ci),listItemValue:g,listOrdered:s(nn,p),listUnordered:s(nn),paragraph:s(kt),reference:ee,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Nt),strong:s(Di),thematicBreak:s(Ms)},exit:{atxHeading:l(),atxHeadingSequence:z,autolink:l(),autolinkEmail:tt,autolinkProtocol:pt,blockQuote:l(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:Ve,characterReferenceMarkerNumeric:Ve,characterReferenceValue:Ye,characterReference:lt,codeFenced:l(T),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:v,codeFlowValue:O,codeIndented:l(A),codeText:l(Te),codeTextData:O,data:O,definition:l(),definitionDestinationString:B,definitionLabelString:D,definitionTitleString:R,emphasis:l(),hardBreakEscape:l(re),hardBreakTrailing:l(re),htmlFlow:l(ae),htmlFlowData:O,htmlText:l(fe),htmlTextData:O,image:l(se),label:_e,labelText:we,lineEnding:q,link:l($),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Ge,resourceDestinationString:J,resourceTitleString:ie,resource:be,setextHeading:l(te),setextHeadingLineSequence:H,setextHeadingText:L,strong:l(),thematicBreak:l()}};cse(e,(t||{}).mdastExtensions||[]);const i={};return n;function n(Be){let We={type:"root",children:[]};const bt={stack:[We],tokenStack:[],config:e,enter:o,exit:h,buffer:a,resume:d,data:i},Ut=[];let pi=-1;for(;++pi<Be.length;)if(Be[pi][1].type==="listOrdered"||Be[pi][1].type==="listUnordered")if(Be[pi][0]==="enter")Ut.push(pi);else{const Yn=Ut.pop();pi=r(Be,Yn,pi)}for(pi=-1;++pi<Be.length;){const Yn=e[Be[pi][0]];lse.call(Yn,Be[pi][1].type)&&Yn[Be[pi][1].type].call(Object.assign({sliceSerialize:Be[pi][2].sliceSerialize},bt),Be[pi][1])}if(bt.tokenStack.length>0){const Yn=bt.tokenStack[bt.tokenStack.length-1];(Yn[1]||GG).call(bt,void 0,Yn[0])}for(We.position={start:sh(Be.length>0?Be[0][1].start:{line:1,column:1,offset:0}),end:sh(Be.length>0?Be[Be.length-2][1].end:{line:1,column:1,offset:0})},pi=-1;++pi<e.transforms.length;)We=e.transforms[pi](We)||We;return We}function r(Be,We,bt){let Ut=We-1,pi=-1,Yn=!1,pr,cn,Xi,qn;for(;++Ut<=bt;){const bi=Be[Ut];switch(bi[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{bi[0]==="enter"?pi++:pi--,qn=void 0;break}case"lineEndingBlank":{bi[0]==="enter"&&(pr&&!qn&&!pi&&!Xi&&(Xi=Ut),qn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:qn=void 0}if(!pi&&bi[0]==="enter"&&bi[1].type==="listItemPrefix"||pi===-1&&bi[0]==="exit"&&(bi[1].type==="listUnordered"||bi[1].type==="listOrdered")){if(pr){let Jr=Ut;for(cn=void 0;Jr--;){const rn=Be[Jr];if(rn[1].type==="lineEnding"||rn[1].type==="lineEndingBlank"){if(rn[0]==="exit")continue;cn&&(Be[cn][1].type="lineEndingBlank",Yn=!0),rn[1].type="lineEnding",cn=Jr}else if(!(rn[1].type==="linePrefix"||rn[1].type==="blockQuotePrefix"||rn[1].type==="blockQuotePrefixWhitespace"||rn[1].type==="blockQuoteMarker"||rn[1].type==="listItemIndent"))break}Xi&&(!cn||Xi<cn)&&(pr._spread=!0),pr.end=Object.assign({},cn?Be[cn][1].start:bi[1].end),Be.splice(cn||Ut,0,["exit",pr,bi[2]]),Ut++,bt++}if(bi[1].type==="listItemPrefix"){const Jr={type:"listItem",_spread:!1,start:Object.assign({},bi[1].start),end:void 0};pr=Jr,Be.splice(Ut,0,["enter",Jr,bi[2]]),Ut++,bt++,Xi=void 0,qn=!0}}}return Be[We][1]._spread=Yn,bt}function s(Be,We){return bt;function bt(Ut){o.call(this,Be(Ut),Ut),We&&We.call(this,Ut)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(Be,We,bt){this.stack[this.stack.length-1].children.push(Be),this.stack.push(Be),this.tokenStack.push([We,bt||void 0]),Be.position={start:sh(We.start),end:void 0}}function l(Be){return We;function We(bt){Be&&Be.call(this,bt),h.call(this,bt)}}function h(Be,We){const bt=this.stack.pop(),Ut=this.tokenStack.pop();if(Ut)Ut[0].type!==Be.type&&(We?We.call(this,Be,Ut[0]):(Ut[1]||GG).call(this,Be,Ut[0]));else throw new Error("Cannot close `"+Be.type+"` ("+mx({start:Be.start,end:Be.end})+"): it’s not open");bt.position.end=sh(Be.end)}function d(){return x4(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(Be){if(this.data.expectingFirstListItemValue){const We=this.stack[this.stack.length-2];We.start=Number.parseInt(this.sliceSerialize(Be),10),this.data.expectingFirstListItemValue=void 0}}function y(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.lang=Be}function v(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.meta=Be}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.value=Be.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function A(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.value=Be.replace(/(\r?\n|\r)$/g,"")}function D(Be){const We=this.resume(),bt=this.stack[this.stack.length-1];bt.label=We,bt.identifier=uu(this.sliceSerialize(Be)).toLowerCase()}function R(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.title=Be}function B(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.url=Be}function z(Be){const We=this.stack[this.stack.length-1];if(!We.depth){const bt=this.sliceSerialize(Be).length;We.depth=bt}}function L(){this.data.setextHeadingSlurpLineEnding=!0}function H(Be){const We=this.stack[this.stack.length-1];We.depth=this.sliceSerialize(Be).codePointAt(0)===61?1:2}function te(){this.data.setextHeadingSlurpLineEnding=void 0}function j(Be){const bt=this.stack[this.stack.length-1].children;let Ut=bt[bt.length-1];(!Ut||Ut.type!=="text")&&(Ut=Ni(),Ut.position={start:sh(Be.start),end:void 0},bt.push(Ut)),this.stack.push(Ut)}function O(Be){const We=this.stack.pop();We.value+=this.sliceSerialize(Be),We.position.end=sh(Be.end)}function q(Be){const We=this.stack[this.stack.length-1];if(this.data.atHardBreak){const bt=We.children[We.children.length-1];bt.position.end=sh(Be.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(We.type)&&(j.call(this,Be),O.call(this,Be))}function re(){this.data.atHardBreak=!0}function ae(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.value=Be}function fe(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.value=Be}function Te(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.value=Be}function $(){const Be=this.stack[this.stack.length-1];if(this.data.inReference){const We=this.data.referenceType||"shortcut";Be.type+="Reference",Be.referenceType=We,delete Be.url,delete Be.title}else delete Be.identifier,delete Be.label;this.data.referenceType=void 0}function se(){const Be=this.stack[this.stack.length-1];if(this.data.inReference){const We=this.data.referenceType||"shortcut";Be.type+="Reference",Be.referenceType=We,delete Be.url,delete Be.title}else delete Be.identifier,delete Be.label;this.data.referenceType=void 0}function we(Be){const We=this.sliceSerialize(Be),bt=this.stack[this.stack.length-2];bt.label=VSe(We),bt.identifier=uu(We).toLowerCase()}function _e(){const Be=this.stack[this.stack.length-1],We=this.resume(),bt=this.stack[this.stack.length-1];if(this.data.inReference=!0,bt.type==="link"){const Ut=Be.children;bt.children=Ut}else bt.alt=We}function J(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.url=Be}function ie(){const Be=this.resume(),We=this.stack[this.stack.length-1];We.title=Be}function be(){this.data.inReference=void 0}function ee(){this.data.referenceType="collapsed"}function Ge(Be){const We=this.resume(),bt=this.stack[this.stack.length-1];bt.label=We,bt.identifier=uu(this.sliceSerialize(Be)).toLowerCase(),this.data.referenceType="full"}function Ve(Be){this.data.characterReferenceType=Be.type}function Ye(Be){const We=this.sliceSerialize(Be),bt=this.data.characterReferenceType;let Ut;bt?(Ut=Gre(We,bt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ut=v4(We);const pi=this.stack[this.stack.length-1];pi.value+=Ut}function lt(Be){const We=this.stack.pop();We.position.end=sh(Be.end)}function pt(Be){O.call(this,Be);const We=this.stack[this.stack.length-1];We.url=this.sliceSerialize(Be)}function tt(Be){O.call(this,Be);const We=this.stack[this.stack.length-1];We.url="mailto:"+this.sliceSerialize(Be)}function $t(){return{type:"blockquote",children:[]}}function li(){return{type:"code",lang:null,meta:null,value:""}}function Rt(){return{type:"inlineCode",value:""}}function Qt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Bt(){return{type:"emphasis",children:[]}}function Nt(){return{type:"heading",depth:0,children:[]}}function fi(){return{type:"break"}}function Si(){return{type:"html",value:""}}function Cn(){return{type:"image",title:null,url:"",alt:null}}function Nn(){return{type:"link",title:null,url:"",children:[]}}function nn(Be){return{type:"list",ordered:Be.type==="listOrdered",start:null,spread:Be._spread,children:[]}}function ci(Be){return{type:"listItem",spread:Be._spread,checked:null,children:[]}}function kt(){return{type:"paragraph",children:[]}}function Di(){return{type:"strong",children:[]}}function Ni(){return{type:"text",value:""}}function Ms(){return{type:"thematicBreak"}}}function sh(t){return{line:t.line,column:t.column,offset:t.offset}}function cse(t,e){let i=-1;for(;++i<e.length;){const n=e[i];Array.isArray(n)?cse(t,n):oDe(t,n)}}function oDe(t,e){let i;for(i in e)if(lse.call(e,i))switch(i){case"canContainEols":{const n=e[i];n&&t[i].push(...n);break}case"transforms":{const n=e[i];n&&t[i].push(...n);break}case"enter":case"exit":{const n=e[i];n&&Object.assign(t[i],n);break}}}function GG(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+mx({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+mx({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+mx({start:e.start,end:e.end})+") is still open")}function uDe(t){const e=this;e.parser=i;function i(n){return sDe(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function lDe(t,e){const i={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,i),t.applyData(e,i)}function cDe(t,e){const i={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,i),[t.applyData(e,i),{type:"text",value:`
`}]}function hDe(t,e){const i=e.value?e.value+`
`:"",n={};e.lang&&(n.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:n,children:[{type:"text",value:i}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function dDe(t,e){const i={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function fDe(t,e){const i={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function pDe(t,e){const i=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),r=Yg(n.toLowerCase()),s=t.footnoteOrder.indexOf(n);let a,o=t.footnoteCounts.get(n);o===void 0?(o=0,t.footnoteOrder.push(n),a=t.footnoteOrder.length):a=s+1,o+=1,t.footnoteCounts.set(n,o);const l={type:"element",tagName:"a",properties:{href:"#"+i+"fn-"+r,id:i+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,l);const h={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,h),t.applyData(e,h)}function mDe(t,e){const i={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function gDe(t,e){if(t.options.allowDangerousHtml){const i={type:"raw",value:e.value};return t.patch(e,i),t.applyData(e,i)}}function hse(t,e){const i=e.referenceType;let n="]";if(i==="collapsed"?n+="[]":i==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=n:r.push({type:"text",value:n}),r}function bDe(t,e){const i=String(e.identifier).toUpperCase(),n=t.definitionById.get(i);if(!n)return hse(t,e);const r={src:Yg(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function yDe(t,e){const i={src:Yg(e.url)};e.alt!==null&&e.alt!==void 0&&(i.alt=e.alt),e.title!==null&&e.title!==void 0&&(i.title=e.title);const n={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,n),t.applyData(e,n)}function xDe(t,e){const i={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,i);const n={type:"element",tagName:"code",properties:{},children:[i]};return t.patch(e,n),t.applyData(e,n)}function _De(t,e){const i=String(e.identifier).toUpperCase(),n=t.definitionById.get(i);if(!n)return hse(t,e);const r={href:Yg(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function vDe(t,e){const i={href:Yg(e.url)};e.title!==null&&e.title!==void 0&&(i.title=e.title);const n={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function TDe(t,e,i){const n=t.all(e),r=i?EDe(i):dse(e),s={},a=[];if(typeof e.checked=="boolean"){const d=n[0];let p;d&&d.type==="element"&&d.tagName==="p"?p=d:(p={type:"element",tagName:"p",properties:{},children:[]},n.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<n.length;){const d=n[o];(r||o!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!r?a.push(...d.children):a.push(d)}const l=n[n.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:a};return t.patch(e,h),t.applyData(e,h)}function EDe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const i=t.children;let n=-1;for(;!e&&++n<i.length;)e=dse(i[n])}return e}function dse(t){const e=t.spread;return e??t.children.length>1}function SDe(t,e){const i={},n=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(i.start=e.start);++r<n.length;){const a=n[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:i,children:t.wrap(n,!0)};return t.patch(e,s),t.applyData(e,s)}function ADe(t,e){const i={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function CDe(t,e){const i={type:"root",children:t.wrap(t.all(e))};return t.patch(e,i),t.applyData(e,i)}function wDe(t,e){const i={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function DDe(t,e){const i=t.all(e),n=i.shift(),r=[];if(n){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([n],!0)};t.patch(e.children[0],a),r.push(a)}if(i.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(i,!0)},o=Sl(e.children[1]),l=xA(e.children[e.children.length-1]);o&&l&&(a.position={start:o,end:l}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function RDe(t,e,i){const n=i?i.children:void 0,s=(n?n.indexOf(e):1)===0?"th":"td",a=i&&i.type==="table"?i.align:void 0,o=a?a.length:e.children.length;let l=-1;const h=[];for(;++l<o;){const p=e.children[l],g={},y=a?a[l]:void 0;y&&(g.align=y);let v={type:"element",tagName:s,properties:g,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),h.push(v)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,d),t.applyData(e,d)}function PDe(t,e){const i={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}const HG=9,zG=32;function MDe(t){const e=String(t),i=/\r?\n|\r/g;let n=i.exec(e),r=0;const s=[];for(;n;)s.push(VG(e.slice(r,n.index),r>0,!0),n[0]),r=n.index+n[0].length,n=i.exec(e);return s.push(VG(e.slice(r),r>0,!1)),s.join("")}function VG(t,e,i){let n=0,r=t.length;if(e){let s=t.codePointAt(n);for(;s===HG||s===zG;)n++,s=t.codePointAt(n)}if(i){let s=t.codePointAt(r-1);for(;s===HG||s===zG;)r--,s=t.codePointAt(r-1)}return r>n?t.slice(n,r):""}function BDe(t,e){const i={type:"text",value:MDe(String(e.value))};return t.patch(e,i),t.applyData(e,i)}function kDe(t,e){const i={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,i),t.applyData(e,i)}const ODe={blockquote:lDe,break:cDe,code:hDe,delete:dDe,emphasis:fDe,footnoteReference:pDe,heading:mDe,html:gDe,imageReference:bDe,image:yDe,inlineCode:xDe,linkReference:_De,link:vDe,listItem:TDe,list:SDe,paragraph:ADe,root:CDe,strong:wDe,table:DDe,tableCell:PDe,tableRow:RDe,text:BDe,thematicBreak:kDe,toml:uT,yaml:uT,definition:uT,footnoteDefinition:uT};function uT(){}function FDe(t,e){const i=[{type:"text",value:"↩"}];return e>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),i}function IDe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function LDe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=t.options.footnoteBackContent||FDe,n=t.options.footnoteBackLabel||IDe,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[l]);if(!h)continue;const d=t.all(h),p=String(h.identifier).toUpperCase(),g=Yg(p.toLowerCase());let y=0;const v=[],S=t.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){v.length>0&&v.push({type:"text",value:" "});let D=typeof i=="string"?i:i(l,y);typeof D=="string"&&(D={type:"text",value:D}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,y),className:["data-footnote-backref"]},children:Array.isArray(D)?D:[D]})}const T=d[d.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const D=T.children[T.children.length-1];D&&D.type==="text"?D.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...v)}else d.push(...v);const A={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(d,!0)};t.patch(h,A),o.push(A)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...cg(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const bB={}.hasOwnProperty,NDe={};function UDe(t,e){const i=e||NDe,n=new Map,r=new Map,s=new Map,a={...ODe,...i.handlers},o={all:h,applyData:HDe,definitionById:n,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:a,one:l,options:i,patch:GDe,wrap:VDe};return TA(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const p=d.type==="definition"?n:r,g=String(d.identifier).toUpperCase();p.has(g)||p.set(g,d)}}),o;function l(d,p){const g=d.type,y=o.handlers[g];if(bB.call(o.handlers,g)&&y)return y(o,d,p);if(o.options.passThrough&&o.options.passThrough.includes(g)){if("children"in d){const{children:S,...T}=d,A=cg(T);return A.children=o.all(d),A}return cg(d)}return(o.options.unknownHandler||zDe)(o,d,p)}function h(d){const p=[];if("children"in d){const g=d.children;let y=-1;for(;++y<g.length;){const v=o.one(g[y],d);if(v){if(y&&g[y-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=jG(v.value)),!Array.isArray(v)&&v.type==="element")){const S=v.children[0];S&&S.type==="text"&&(S.value=jG(S.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function GDe(t,e){t.position&&(e.position=ZTe(t))}function HDe(t,e){let i=e;if(t&&t.data){const n=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof n=="string")if(i.type==="element")i.tagName=n;else{const a="children"in i?i.children:[i];i={type:"element",tagName:n,properties:{},children:a}}i.type==="element"&&s&&Object.assign(i.properties,cg(s)),"children"in i&&i.children&&r!==null&&r!==void 0&&(i.children=r)}return i}function zDe(t,e){const i=e.data||{},n="value"in e&&!(bB.call(i,"hProperties")||bB.call(i,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VDe(t,e){const i=[];let n=-1;for(e&&i.push({type:"text",value:`
`});++n<t.length;)n&&i.push({type:"text",value:`
`}),i.push(t[n]);return e&&t.length>0&&i.push({type:"text",value:`
`}),i}function jG(t){let e=0,i=t.charCodeAt(e);for(;i===9||i===32;)e++,i=t.charCodeAt(e);return t.slice(e)}function XG(t,e){const i=UDe(t,e),n=i.one(t,void 0),r=LDe(i),s=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function jDe(t,e){return t&&"run"in t?async function(i,n){const r=XG(i,{file:n,...e});await t.run(r,n)}:function(i,n){return XG(i,{file:n,...t||e})}}function YG(t){if(t)throw t}var JD,qG;function XDe(){if(qG)return JD;qG=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},s=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var d=t.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!d&&!p)return!1;var g;for(g in h);return typeof g>"u"||t.call(h,g)},a=function(h,d){i&&d.name==="__proto__"?i(h,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):h[d.name]=d.newValue},o=function(h,d){if(d==="__proto__")if(t.call(h,d)){if(n)return n(h,d).value}else return;return h[d]};return JD=function l(){var h,d,p,g,y,v,S=arguments[0],T=1,A=arguments.length,D=!1;for(typeof S=="boolean"&&(D=S,S=arguments[1]||{},T=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});T<A;++T)if(h=arguments[T],h!=null)for(d in h)p=o(S,d),g=o(h,d),S!==g&&(D&&g&&(s(g)||(y=r(g)))?(y?(y=!1,v=p&&r(p)?p:[]):v=p&&s(p)?p:{},a(S,{name:d,newValue:l(D,v,g)})):typeof g<"u"&&a(S,{name:d,newValue:g}));return S},JD}var YDe=XDe();const e3=ZE(YDe);function yB(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function qDe(){const t=[],e={run:i,use:n};return e;function i(...r){let s=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...r);function o(l,...h){const d=t[++s];let p=-1;if(l){a(l);return}for(;++p<r.length;)(h[p]===null||h[p]===void 0)&&(h[p]=r[p]);r=h,d?WDe(d,o)(...h):a(null,...h)}}function n(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function WDe(t,e){let i;return n;function n(...a){const o=t.length>a.length;let l;o&&a.push(r);try{l=t.apply(this,a)}catch(h){const d=h;if(o&&i)throw d;return r(d)}o||(l&&l.then&&typeof l.then=="function"?l.then(s,r):l instanceof Error?r(l):s(l))}function r(a,...o){i||(i=!0,e(a,...o))}function s(a){r(null,a)}}const Vu={basename:$De,dirname:KDe,extname:QDe,join:ZDe,sep:"/"};function $De(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');N_(t);let i=0,n=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){i=r+1;break}}else n<0&&(s=!0,n=r+1);return n<0?"":t.slice(i,n)}if(e===t)return"";let a=-1,o=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){i=r+1;break}}else a<0&&(s=!0,a=r+1),o>-1&&(t.codePointAt(r)===e.codePointAt(o--)?o<0&&(n=r):(o=-1,n=a));return i===n?n=a:n<0&&(n=t.length),t.slice(i,n)}function KDe(t){if(N_(t),t.length===0)return".";let e=-1,i=t.length,n;for(;--i;)if(t.codePointAt(i)===47){if(n){e=i;break}}else n||(n=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function QDe(t){N_(t);let e=t.length,i=-1,n=0,r=-1,s=0,a;for(;e--;){const o=t.codePointAt(e);if(o===47){if(a){n=e+1;break}continue}i<0&&(a=!0,i=e+1),o===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||i<0||s===0||s===1&&r===i-1&&r===n+1?"":t.slice(r,i)}function ZDe(...t){let e=-1,i;for(;++e<t.length;)N_(t[e]),t[e]&&(i=i===void 0?t[e]:i+"/"+t[e]);return i===void 0?".":JDe(i)}function JDe(t){N_(t);const e=t.codePointAt(0)===47;let i=e3e(t,!e);return i.length===0&&!e&&(i="."),i.length>0&&t.codePointAt(t.length-1)===47&&(i+="/"),e?"/"+i:i}function e3e(t,e){let i="",n=0,r=-1,s=0,a=-1,o,l;for(;++a<=t.length;){if(a<t.length)o=t.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(i.length<2||n!==2||i.codePointAt(i.length-1)!==46||i.codePointAt(i.length-2)!==46){if(i.length>2){if(l=i.lastIndexOf("/"),l!==i.length-1){l<0?(i="",n=0):(i=i.slice(0,l),n=i.length-1-i.lastIndexOf("/")),r=a,s=0;continue}}else if(i.length>0){i="",n=0,r=a,s=0;continue}}e&&(i=i.length>0?i+"/..":"..",n=2)}else i.length>0?i+="/"+t.slice(r+1,a):i=t.slice(r+1,a),n=a-r-1;r=a,s=0}else o===46&&s>-1?s++:s=-1}return i}function N_(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const t3e={cwd:i3e};function i3e(){return"/"}function xB(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function n3e(t){if(typeof t=="string")t=new URL(t);else if(!xB(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return r3e(t)}function r3e(t){if(t.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=t.pathname;let i=-1;for(;++i<e.length;)if(e.codePointAt(i)===37&&e.codePointAt(i+1)===50){const n=e.codePointAt(i+2);if(n===70||n===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const t3=["history","path","basename","stem","extname","dirname"];class fse{constructor(e){let i;e?xB(e)?i={path:e}:typeof e=="string"||s3e(e)?i={value:e}:i=e:i={},this.cwd="cwd"in i?"":t3e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<t3.length;){const s=t3[n];s in i&&i[s]!==void 0&&i[s]!==null&&(this[s]=s==="history"?[...i[s]]:i[s])}let r;for(r in i)t3.includes(r)||(this[r]=i[r])}get basename(){return typeof this.path=="string"?Vu.basename(this.path):void 0}set basename(e){n3(e,"basename"),i3(e,"basename"),this.path=Vu.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Vu.dirname(this.path):void 0}set dirname(e){WG(this.basename,"dirname"),this.path=Vu.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Vu.extname(this.path):void 0}set extname(e){if(i3(e,"extname"),WG(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vu.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){xB(e)&&(e=n3e(e)),n3(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Vu.basename(this.path,this.extname):void 0}set stem(e){n3(e,"stem"),i3(e,"stem"),this.path=Vu.join(this.dirname||"",e+(this.extname||""))}fail(e,i,n){const r=this.message(e,i,n);throw r.fatal=!0,r}info(e,i,n){const r=this.message(e,i,n);return r.fatal=void 0,r}message(e,i,n){const r=new Ps(e,i,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function i3(t,e){if(t&&t.includes(Vu.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Vu.sep+"`")}function n3(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function WG(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function s3e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const a3e=(function(t){const n=this.constructor.prototype,r=n[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,n),s}),o3e={}.hasOwnProperty;class w4 extends a3e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qDe()}copy(){const e=new w4;let i=-1;for(;++i<this.attachers.length;){const n=this.attachers[i];e.use(...n)}return e.data(e3(!0,{},this.namespace)),e}data(e,i){return typeof e=="string"?arguments.length===2?(a3("data",this.frozen),this.namespace[e]=i,this):o3e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(a3("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[i,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const r=i.call(e,...n);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const i=lT(e),n=this.parser||this.Parser;return r3("parse",n),n(String(i),i)}process(e,i){const n=this;return this.freeze(),r3("process",this.parser||this.Parser),s3("process",this.compiler||this.Compiler),i?r(void 0,i):new Promise(r);function r(s,a){const o=lT(e),l=n.parse(o);n.run(l,o,function(d,p,g){if(d||!p||!g)return h(d);const y=p,v=n.stringify(y,g);c3e(v)?g.value=v:g.result=v,h(d,g)});function h(d,p){d||!p?a(d):s?s(p):i(void 0,p)}}}processSync(e){let i=!1,n;return this.freeze(),r3("processSync",this.parser||this.Parser),s3("processSync",this.compiler||this.Compiler),this.process(e,r),KG("processSync","process",i),n;function r(s,a){i=!0,YG(s),n=a}}run(e,i,n){$G(e),this.freeze();const r=this.transformers;return!n&&typeof i=="function"&&(n=i,i=void 0),n?s(void 0,n):new Promise(s);function s(a,o){const l=lT(i);r.run(e,l,h);function h(d,p,g){const y=p||e;d?o(d):a?a(y):n(void 0,y,g)}}}runSync(e,i){let n=!1,r;return this.run(e,i,s),KG("runSync","run",n),r;function s(a,o){YG(a),r=o,n=!0}}stringify(e,i){this.freeze();const n=lT(i),r=this.compiler||this.Compiler;return s3("stringify",r),$G(e),r(e,n)}use(e,...i){const n=this.attachers,r=this.namespace;if(a3("use",this.frozen),e!=null)if(typeof e=="function")l(e,i);else if(typeof e=="object")Array.isArray(e)?o(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")l(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[d,...p]=h;l(d,p)}else a(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function a(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(h.plugins),h.settings&&(r.settings=e3(!0,r.settings,h.settings))}function o(h){let d=-1;if(h!=null)if(Array.isArray(h))for(;++d<h.length;){const p=h[d];s(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function l(h,d){let p=-1,g=-1;for(;++p<n.length;)if(n[p][0]===h){g=p;break}if(g===-1)n.push([h,...d]);else if(d.length>0){let[y,...v]=d;const S=n[g][1];yB(S)&&yB(y)&&(y=e3(!0,S,y)),n[g]=[h,y,...v]}}}}const u3e=new w4().freeze();function r3(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function s3(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function a3(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $G(t){if(!yB(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function KG(t,e,i){if(!i)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function lT(t){return l3e(t)?t:new fse(t)}function l3e(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function c3e(t){return typeof t=="string"||h3e(t)}function h3e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const d3e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",QG=[],ZG={allowDangerousHtml:!0},f3e=/^(https?|ircs?|mailto|xmpp)$/i,p3e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function m3e(t){const e=D4(t),i=R4(t);return P4(e.runSync(e.parse(i),i),t)}async function g3e(t){const e=D4(t),i=R4(t),n=await e.run(e.parse(i),i);return P4(n,t)}function b3e(t){const e=D4(t),[i,n]=rr.useState(void 0),[r,s]=rr.useState(void 0);if(rr.useEffect(function(){let a=!1;const o=R4(t);return e.run(e.parse(o),o,function(l,h){a||(n(l),s(h))}),function(){a=!0}},[t.children,t.rehypePlugins,t.remarkPlugins,t.remarkRehypeOptions]),i)throw i;return r?P4(r,t):t.fallback}function D4(t){const e=t.rehypePlugins||QG,i=t.remarkPlugins||QG,n=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...ZG}:ZG;return u3e().use(uDe).use(i).use(jDe,n).use(e)}function R4(t){const e=t.children||"",i=new fse;return typeof e=="string"&&(i.value=e),i}function P4(t,e){const i=e.allowedElements,n=e.allowElement,r=e.components,s=e.disallowedElements,a=e.skipHtml,o=e.unwrapDisallowed,l=e.urlTransform||pse;for(const d of p3e)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+d3e+d.id,void 0);return TA(t,h),gwe(t,{Fragment:un.Fragment,components:r,ignoreInvalidStyle:!0,jsx:un.jsx,jsxs:un.jsxs,passKeys:!0,passNode:!0});function h(d,p,g){if(d.type==="raw"&&g&&typeof p=="number")return a?g.children.splice(p,1):g.children[p]={type:"text",value:d.value},p;if(d.type==="element"){let y;for(y in ZD)if(Object.hasOwn(ZD,y)&&Object.hasOwn(d.properties,y)){const v=d.properties[y],S=ZD[y];(S===null||S.includes(d.tagName))&&(d.properties[y]=l(String(v||""),y,d))}}if(d.type==="element"){let y=i?!i.includes(d.tagName):s?s.includes(d.tagName):!1;if(!y&&n&&typeof p=="number"&&(y=!n(d,p,g)),y&&g&&typeof p=="number")return o&&d.children?g.children.splice(p,1,...d.children):g.children.splice(p,1),p}}}function pse(t){const e=t.indexOf(":"),i=t.indexOf("?"),n=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||i!==-1&&e>i||n!==-1&&e>n||f3e.test(t.slice(0,e))?t:""}const y3e=Object.freeze(Object.defineProperty({__proto__:null,MarkdownAsync:g3e,MarkdownHooks:b3e,default:m3e,defaultUrlTransform:pse},Symbol.toStringTag,{value:"Module"})),x3e=cae(y3e);var JG;function _3e(){if(JG)return Ey;JG=1;var t=dA(),e=e9(),i=x3e;function n(m){return m&&m.__esModule?m:{default:m}}var r=n(i),s=Object.create,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,h=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,p=(m=>typeof fm<"u"?fm:typeof Proxy<"u"?new Proxy(m,{get:(x,C)=>(typeof fm<"u"?fm:x)[C]}):m)(function(m){if(typeof fm<"u")return fm.apply(this,arguments);throw Error('Dynamic require of "'+m+'" is not supported')}),g=(m,x)=>()=>(x||m((x={exports:{}}).exports,x),x.exports),y=(m,x,C,P)=>{if(x&&typeof x=="object"||typeof x=="function")for(let I of l(x))!d.call(m,I)&&I!==C&&a(m,I,{get:()=>x[I],enumerable:!(P=o(x,I))||P.enumerable});return m},v=(m,x,C)=>(C=m!=null?s(h(m)):{},y(!m||!m.__esModule?a(C,"default",{value:m,enumerable:!0}):C,m)),S=g((m,x)=>{x.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}),T=t.createContext({});function A(m){let x=t.useRef(null);return x.current===null&&(x.current=m()),x.current}var D=typeof window<"u",R=D?t.useLayoutEffect:t.useEffect,B=t.createContext(null),z=t.createContext({transformPagePoint:m=>m,isStatic:!1,reducedMotion:"never"});function L(m=!0){let x=t.useContext(B);if(x===null)return[!0,null];let{isPresent:C,onExitComplete:P,register:I}=x,N=t.useId();t.useEffect(()=>{if(m)return I(N)},[m]);let X=t.useCallback(()=>m&&P&&P(N),[N,P,m]);return!C&&P?[!1,X]:[!0]}var H=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function te(m,x){let C=new Set,P=new Set,I=!1,N=!1,X=new WeakSet,Q={delta:0,timestamp:0,isProcessing:!1};function he(le){X.has(le)&&(ce.schedule(le),m()),le(Q)}let ce={schedule:(le,De=!1,Fe=!1)=>{let Je=Fe&&I?C:P;return De&&X.add(le),Je.has(le)||Je.add(le),le},cancel:le=>{P.delete(le),X.delete(le)},process:le=>{if(Q=le,I){N=!0;return}I=!0,[C,P]=[P,C],C.forEach(he),C.clear(),I=!1,N&&(N=!1,ce.process(le))}};return ce}var j={},O=40;function q(m,x){let C=!1,P=!0,I={delta:0,timestamp:0,isProcessing:!1},N=()=>C=!0,X=H.reduce((Xe,Qe)=>(Xe[Qe]=te(N),Xe),{}),{setup:Q,read:he,resolveKeyframes:ce,preUpdate:le,update:De,preRender:Fe,render:Je,postRender:ze}=X,et=()=>{let Xe=j.useManualTiming?I.timestamp:performance.now();C=!1,j.useManualTiming||(I.delta=P?1e3/60:Math.max(Math.min(Xe-I.timestamp,O),1)),I.timestamp=Xe,I.isProcessing=!0,Q.process(I),he.process(I),ce.process(I),le.process(I),De.process(I),Fe.process(I),Je.process(I),ze.process(I),I.isProcessing=!1,C&&x&&(P=!1,m(et))},Ze=()=>{C=!0,P=!0,I.isProcessing||m(et)};return{schedule:H.reduce((Xe,Qe)=>{let Ot=X[Qe];return Xe[Qe]=(Ti,ti=!1,qi=!1)=>(C||Ze(),Ot.schedule(Ti,ti,qi)),Xe},{}),cancel:Xe=>{for(let Qe=0;Qe<H.length;Qe++)X[H[Qe]].cancel(Xe)},state:I,steps:X}}var re=m=>m,{schedule:ae,cancel:fe,state:Te,steps:$}=q(typeof requestAnimationFrame<"u"?requestAnimationFrame:re,!0),se=t.createContext({strict:!1}),we={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_e={};for(let m in we)_e[m]={isEnabled:x=>we[m].some(C=>!!x[C])};function J(m){for(let x in m)_e[x]={..._e[x],...m[x]}}var ie=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function be(m){return m.startsWith("while")||m.startsWith("drag")&&m!=="draggable"||m.startsWith("layout")||m.startsWith("onTap")||m.startsWith("onPan")||m.startsWith("onLayout")||ie.has(m)}var ee=m=>!be(m);function Ge(m){m&&(ee=x=>x.startsWith("on")?!be(x):m(x))}try{Ge(p("@emotion/is-prop-valid").default)}catch{}function Ve(m,x,C){let P={};for(let I in m)I==="values"&&typeof m.values=="object"||(ee(I)||C===!0&&be(I)||!x&&!be(I)||m.draggable&&I.startsWith("onDrag"))&&(P[I]=m[I]);return P}function Ye(m){if(typeof Proxy>"u")return m;let x=new Map,C=(...P)=>m(...P);return new Proxy(C,{get:(P,I)=>I==="create"?m:(x.has(I)||x.set(I,m(I)),x.get(I))})}var lt=t.createContext({});function pt(m){return m!==null&&typeof m=="object"&&typeof m.start=="function"}function tt(m){return typeof m=="string"||Array.isArray(m)}var $t=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],li=["initial",...$t];function Rt(m){return pt(m.animate)||li.some(x=>tt(m[x]))}function Qt(m){return!!(Rt(m)||m.variants)}function Bt(m,x){if(Rt(m)){let{initial:C,animate:P}=m;return{initial:C===!1||tt(C)?C:void 0,animate:tt(P)?P:void 0}}return m.inherit!==!1?x:{}}function Nt(m){let{initial:x,animate:C}=Bt(m,t.useContext(lt));return t.useMemo(()=>({initial:x,animate:C}),[fi(x),fi(C)])}function fi(m){return Array.isArray(m)?m.join(" "):m}var Si=Symbol.for("motionComponentSymbol");function Cn(m){return m&&typeof m=="object"&&Object.prototype.hasOwnProperty.call(m,"current")}function Nn(m,x,C){return t.useCallback(P=>{P&&m.onMount&&m.onMount(P),x&&(P?x.mount(P):x.unmount()),C&&(typeof C=="function"?C(P):Cn(C)&&(C.current=P))},[x])}var nn=m=>m.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ci="framerAppearId",kt="data-"+nn(ci),Di=t.createContext({}),{schedule:Ni}=q(queueMicrotask,!1);function Ms(m,x,C,P,I){let{visualElement:N}=t.useContext(lt),X=t.useContext(se),Q=t.useContext(B),he=t.useContext(z).reducedMotion,ce=t.useRef(null);P=P||X.renderer,!ce.current&&P&&(ce.current=P(m,{visualState:x,parent:N,props:C,presenceContext:Q,blockInitialAnimation:Q?Q.initial===!1:!1,reducedMotionConfig:he}));let le=ce.current,De=t.useContext(Di);le&&!le.projection&&I&&(le.type==="html"||le.type==="svg")&&Be(ce.current,C,I,De);let Fe=t.useRef(!1);t.useInsertionEffect(()=>{le&&Fe.current&&le.update(C,Q)});let Je=C[kt],ze=t.useRef(!!Je&&!window.MotionHandoffIsComplete?.(Je)&&window.MotionHasOptimisedAnimation?.(Je));return R(()=>{le&&(Fe.current=!0,window.MotionIsMounted=!0,le.updateFeatures(),Ni.render(le.render),ze.current&&le.animationState&&le.animationState.animateChanges())}),t.useEffect(()=>{le&&(!ze.current&&le.animationState&&le.animationState.animateChanges(),ze.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(Je)}),ze.current=!1))}),le}function Be(m,x,C,P){let{layoutId:I,layout:N,drag:X,dragConstraints:Q,layoutScroll:he,layoutRoot:ce,layoutCrossfade:le}=x;m.projection=new C(m.latestValues,x["data-framer-portal-id"]?void 0:We(m.parent)),m.projection.setOptions({layoutId:I,layout:N,alwaysMeasureLayout:!!X||Q&&Cn(Q),visualElement:m,animationType:typeof N=="string"?N:"both",initialPromotionConfig:P,crossfade:le,layoutScroll:he,layoutRoot:ce})}function We(m){if(m)return m.options.allowProjection!==!1?m.projection:We(m.parent)}var bt=()=>{};function Ut({preloadedFeatures:m,createVisualElement:x,useRender:C,useVisualState:P,Component:I}){m&&J(m);function N(Q,he){let ce,le={...t.useContext(z),...Q,layoutId:pi(Q)},{isStatic:De}=le,Fe=Nt(Q),Je=P(Q,De);if(!De&&D){Yn();let ze=pr(le);ce=ze.MeasureLayout,Fe.visualElement=Ms(I,Je,le,x,ze.ProjectionNode)}return e.jsxs(lt.Provider,{value:Fe,children:[ce&&Fe.visualElement?e.jsx(ce,{visualElement:Fe.visualElement,...le}):null,C(I,Q,Nn(Je,Fe.visualElement,he),Je,De,Fe.visualElement)]})}N.displayName=`motion.${typeof I=="string"?I:`create(${I.displayName??I.name??""})`}`;let X=t.forwardRef(N);return X[Si]=I,X}function pi({layoutId:m}){let x=t.useContext(T).id;return x&&m!==void 0?x+"-"+m:m}function Yn(m,x){t.useContext(se).strict}function pr(m){let{drag:x,layout:C}=_e;if(!x&&!C)return{};let P={...x,...C};return{MeasureLayout:x?.isEnabled(m)||C?.isEnabled(m)?P.MeasureLayout:void 0,ProjectionNode:P.ProjectionNode}}var cn=m=>x=>typeof x=="string"&&x.startsWith(m),Xi=cn("--"),qn=cn("var(--"),bi=m=>qn(m)?Jr.test(m.split("/*")[0].trim()):!1,Jr=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rn={};function _a(m){for(let x in m)rn[x]=m[x],Xi(x)&&(rn[x].isCSSVariable=!0)}var Gr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hr=new Set(Gr);function V(m,{layout:x,layoutId:C}){return Hr.has(m)||m.startsWith("origin")||(x||C!==void 0)&&(!!rn[m]||m==="opacity")}var Y=m=>!!(m&&m.getVelocity),M=(m,x)=>x&&typeof m=="number"?x.transform(m):m,F=(m,x,C)=>C>x?x:C<m?m:C,Z={test:m=>typeof m=="number",parse:parseFloat,transform:m=>m},ye={...Z,transform:m=>F(0,1,m)},Le={...Z,default:1},at={...Z,transform:Math.round},qt=m=>({test:x=>typeof x=="string"&&x.endsWith(m)&&x.split(" ").length===1,parse:parseFloat,transform:x=>`${x}${m}`}),zt=qt("deg"),vi=qt("%"),ot=qt("px"),Un=qt("vh"),zr=qt("vw"),Pn={...vi,parse:m=>vi.parse(m)/100,transform:m=>vi.transform(m*100)},mr={rotate:zt,rotateX:zt,rotateY:zt,rotateZ:zt,scale:Le,scaleX:Le,scaleY:Le,scaleZ:Le,skew:zt,skewX:zt,skewY:zt,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:ye,originX:Pn,originY:Pn,originZ:ot},yn={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,backgroundPositionX:ot,backgroundPositionY:ot,...mr,zIndex:at,fillOpacity:ye,strokeOpacity:ye,numOctaves:at},Gt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hn=Gr.length;function or(m,x,C){let P="",I=!0;for(let N=0;N<hn;N++){let X=Gr[N],Q=m[X];if(Q===void 0)continue;let he=!0;if(typeof Q=="number"?he=Q===(X.startsWith("scale")?1:0):he=parseFloat(Q)===0,!he||C){let ce=M(Q,yn[X]);if(!he){I=!1;let le=Gt[X]||X;P+=`${le}(${ce}) `}C&&(x[X]=ce)}}return P=P.trim(),C?P=C(x,I?"":P):I&&(P="none"),P}function va(m,x,C){let{style:P,vars:I,transformOrigin:N}=m,X=!1,Q=!1;for(let he in x){let ce=x[he];if(Hr.has(he)){X=!0;continue}else if(Xi(he)){I[he]=ce;continue}else{let le=M(ce,yn[he]);he.startsWith("origin")?(Q=!0,N[he]=le):P[he]=le}}if(x.transform||(X||C?P.transform=or(x,m.transform,C):P.transform&&(P.transform="none")),Q){let{originX:he="50%",originY:ce="50%",originZ:le=0}=N;P.transformOrigin=`${he} ${ce} ${le}`}}var Va=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $h(m,x,C){for(let P in x)!Y(x[P])&&!V(P,C)&&(m[P]=x[P])}function U_({transformTemplate:m},x){return t.useMemo(()=>{let C=Va();return va(C,x,m),Object.assign({},C.vars,C.style)},[x])}function Kh(m,x){let C=m.style||{},P={};return $h(P,C,m),Object.assign(P,U_(m,x)),P}function qg(m,x){let C={},P=Kh(m,x);return m.drag&&m.dragListener!==!1&&(C.draggable=!1,P.userSelect=P.WebkitUserSelect=P.WebkitTouchCallout="none",P.touchAction=m.drag===!0?"none":`pan-${m.drag==="x"?"y":"x"}`),m.tabIndex===void 0&&(m.onTap||m.onTapStart||m.whileTap)&&(C.tabIndex=0),C.style=P,C}var gc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bu(m){return typeof m!="string"||m.includes("-")?!1:!!(gc.indexOf(m)>-1||/[A-Z]/u.test(m))}var Qh={offset:"stroke-dashoffset",array:"stroke-dasharray"},bc={offset:"strokeDashoffset",array:"strokeDasharray"};function gr(m,x,C=1,P=0,I=!0){m.pathLength=1;let N=I?Qh:bc;m[N.offset]=ot.transform(-P);let X=ot.transform(x),Q=ot.transform(C);m[N.array]=`${X} ${Q}`}function Wg(m,{attrX:x,attrY:C,attrScale:P,pathLength:I,pathSpacing:N=1,pathOffset:X=0,...Q},he,ce,le){if(va(m,Q,ce),he){m.style.viewBox&&(m.attrs.viewBox=m.style.viewBox);return}m.attrs=m.style,m.style={};let{attrs:De,style:Fe}=m;De.transform&&(Fe.transform=De.transform,delete De.transform),(Fe.transform||De.transformOrigin)&&(Fe.transformOrigin=De.transformOrigin??"50% 50%",delete De.transformOrigin),Fe.transform&&(Fe.transformBox=le?.transformBox??"fill-box",delete De.transformBox),x!==void 0&&(De.x=x),C!==void 0&&(De.y=C),P!==void 0&&(De.scale=P),I!==void 0&&gr(De,I,N,X,!1)}var $g=()=>({...Va(),attrs:{}}),yu=m=>typeof m=="string"&&m.toLowerCase()==="svg";function yc(m,x,C,P){let I=t.useMemo(()=>{let N=$g();return Wg(N,x,yu(P),m.transformTemplate,m.style),{...N.attrs,style:{...N.style}}},[x]);if(m.style){let N={};$h(N,m.style,m),I.style={...N,...I.style}}return I}function AA(m=!1){return(x,C,P,{latestValues:I},N)=>{let X=(bu(x)?yc:qg)(C,I,N,x),Q=Ve(C,typeof x=="string",m),he=x!==t.Fragment?{...Q,...X,ref:P}:{},{children:ce}=C,le=t.useMemo(()=>Y(ce)?ce.get():ce,[ce]);return t.createElement(x,{...he,children:le})}}function Kg(m){let x=[{},{}];return m?.values.forEach((C,P)=>{x[0][P]=C.get(),x[1][P]=C.getVelocity()}),x}function Xf(m,x,C,P){if(typeof x=="function"){let[I,N]=Kg(P);x=x(C!==void 0?C:m.custom,I,N)}if(typeof x=="string"&&(x=m.variants&&m.variants[x]),typeof x=="function"){let[I,N]=Kg(P);x=x(C!==void 0?C:m.custom,I,N)}return x}function Yf(m){return Y(m)?m.get():m}function qf({scrapeMotionValuesFromProps:m,createRenderState:x},C,P,I){return{latestValues:Oo(C,P,I,m),renderState:x()}}var Zh=m=>(x,C)=>{let P=t.useContext(lt),I=t.useContext(B),N=()=>qf(m,x,P,I);return C?N():A(N)};function Oo(m,x,C,P){let I={},N=P(m,{});for(let Fe in N)I[Fe]=Yf(N[Fe]);let{initial:X,animate:Q}=m,he=Rt(m),ce=Qt(m);x&&ce&&!he&&m.inherit!==!1&&(X===void 0&&(X=x.initial),Q===void 0&&(Q=x.animate));let le=C?C.initial===!1:!1;le=le||X===!1;let De=le?Q:X;if(De&&typeof De!="boolean"&&!pt(De)){let Fe=Array.isArray(De)?De:[De];for(let Je=0;Je<Fe.length;Je++){let ze=Xf(m,Fe[Je]);if(ze){let{transitionEnd:et,transition:Ze,...Xe}=ze;for(let Qe in Xe){let Ot=Xe[Qe];if(Array.isArray(Ot)){let Ti=le?Ot.length-1:0;Ot=Ot[Ti]}Ot!==null&&(I[Qe]=Ot)}for(let Qe in et)I[Qe]=et[Qe]}}}return I}function hs(m,x,C){let{style:P}=m,I={};for(let N in P)(Y(P[N])||x.style&&Y(x.style[N])||V(N,m)||C?.getValue(N)?.liveStyle!==void 0)&&(I[N]=P[N]);return I}var G_={useVisualState:Zh({scrapeMotionValuesFromProps:hs,createRenderState:Va})};function H_(m,x,C){let P=hs(m,x,C);for(let I in m)if(Y(m[I])||Y(x[I])){let N=Gr.indexOf(I)!==-1?"attr"+I.charAt(0).toUpperCase()+I.substring(1):I;P[N]=m[I]}return P}var Qg={useVisualState:Zh({scrapeMotionValuesFromProps:H_,createRenderState:$g})};function z_(m,x){return function(C,{forwardMotionProps:P}={forwardMotionProps:!1}){let I={...bu(C)?Qg:G_,preloadedFeatures:m,useRender:AA(P),createVisualElement:x,Component:C};return Ut(I)}}function xu(m,x,C){let P=m.getProps();return Xf(P,x,C!==void 0?C:P.custom,m)}var Zg=m=>Array.isArray(m),es;function Jg(){es=void 0}var ts={now:()=>(es===void 0&&ts.set(Te.isProcessing||j.useManualTiming?Te.timestamp:performance.now()),es),set:m=>{es=m,queueMicrotask(Jg)}};function Jh(m,x){m.indexOf(x)===-1&&m.push(x)}function _u(m,x){let C=m.indexOf(x);C>-1&&m.splice(C,1)}var Wf=class{constructor(){this.subscriptions=[]}add(m){return Jh(this.subscriptions,m),()=>_u(this.subscriptions,m)}notify(m,x,C){let P=this.subscriptions.length;if(P)if(P===1)this.subscriptions[0](m,x,C);else for(let I=0;I<P;I++){let N=this.subscriptions[I];N&&N(m,x,C)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};function e0(m,x){return x?m*(1e3/x):0}var Cl=30,CA=m=>!isNaN(parseFloat(m)),V_=class{constructor(m,x={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(C,P=!0)=>{let I=ts.now();if(this.updatedAt!==I&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(C),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let N of this.dependents)N.dirty();P&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(m),this.owner=x.owner}setCurrent(m){this.current=m,this.updatedAt=ts.now(),this.canTrackVelocity===null&&m!==void 0&&(this.canTrackVelocity=CA(this.current))}setPrevFrameValue(m=this.current){this.prevFrameValue=m,this.prevUpdatedAt=this.updatedAt}onChange(m){return this.on("change",m)}on(m,x){this.events[m]||(this.events[m]=new Wf);let C=this.events[m].add(x);return m==="change"?()=>{C(),ae.read(()=>{this.events.change.getSize()||this.stop()})}:C}clearListeners(){for(let m in this.events)this.events[m].clear()}attach(m,x){this.passiveEffect=m,this.stopPassiveEffect=x}set(m,x=!0){!x||!this.passiveEffect?this.updateAndNotify(m,x):this.passiveEffect(m,this.updateAndNotify)}setWithVelocity(m,x,C){this.set(x),this.prev=void 0,this.prevFrameValue=m,this.prevUpdatedAt=this.updatedAt-C}jump(m,x=!0){this.updateAndNotify(m),this.prev=m,this.prevUpdatedAt=this.prevFrameValue=void 0,x&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(m){this.dependents||(this.dependents=new Set),this.dependents.add(m)}removeDependent(m){this.dependents&&this.dependents.delete(m)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){let m=ts.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||m-this.updatedAt>Cl)return 0;let x=Math.min(this.updatedAt-this.prevUpdatedAt,Cl);return e0(parseFloat(this.current)-parseFloat(this.prevFrameValue),x)}start(m){return this.stop(),new Promise(x=>{this.hasAnimated=!0,this.animation=m(x),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function wl(m,x){return new V_(m,x)}function t0(m,x,C){m.hasValue(x)?m.getValue(x).set(C):m.addValue(x,wl(C))}function wA(m){return Zg(m)?m[m.length-1]||0:m}function DA(m,x){let C=xu(m,x),{transitionEnd:P={},transition:I={},...N}=C||{};N={...N,...P};for(let X in N){let Q=wA(N[X]);t0(m,X,Q)}}function $f(m){return!!(Y(m)&&m.add)}function Ta(m,x){let C=m.getValue("willChange");if($f(C))return C.add(x);if(!C&&j.WillChange){let P=new j.WillChange("auto");m.addValue("willChange",P),P.add(x)}}function Kf(m){return m.props[kt]}var i0=m=>m!==null;function xc(m,{repeat:x,repeatType:C="loop"},P){let I=m.filter(i0),N=x&&C!=="loop"&&x%2===1?0:I.length-1;return!N||P===void 0?I[N]:P}var _c={type:"spring",stiffness:500,damping:25,restSpeed:10},j_=m=>({type:"spring",stiffness:550,damping:m===0?2*Math.sqrt(550):30,restSpeed:10}),n0={type:"keyframes",duration:.8},X_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ed=(m,{keyframes:x})=>x.length>2?n0:Hr.has(m)?m.startsWith("scale")?j_(x[1]):_c:X_;function Fo({when:m,delay:x,delayChildren:C,staggerChildren:P,staggerDirection:I,repeat:N,repeatType:X,repeatDelay:Q,from:he,elapsed:ce,...le}){return!!Object.keys(le).length}function td(m,x){return m?.[x]??m?.default??m}var ds=m=>m*1e3,Rr=m=>m/1e3,Dl=m=>Math.round(m*1e5)/1e5,vc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Y_(m){return m==null}var Qf=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tc=(m,x)=>C=>!!(typeof C=="string"&&Qf.test(C)&&C.startsWith(m)||x&&!Y_(C)&&Object.prototype.hasOwnProperty.call(C,x)),r0=(m,x,C)=>P=>{if(typeof P!="string")return P;let[I,N,X,Q]=P.match(vc);return{[m]:parseFloat(I),[x]:parseFloat(N),[C]:parseFloat(X),alpha:Q!==void 0?parseFloat(Q):1}},fs=m=>F(0,255,m),Io={...Z,transform:m=>Math.round(fs(m))},ja={test:Tc("rgb","red"),parse:r0("red","green","blue"),transform:({red:m,green:x,blue:C,alpha:P=1})=>"rgba("+Io.transform(m)+", "+Io.transform(x)+", "+Io.transform(C)+", "+Dl(ye.transform(P))+")"};function id(m){let x="",C="",P="",I="";return m.length>5?(x=m.substring(1,3),C=m.substring(3,5),P=m.substring(5,7),I=m.substring(7,9)):(x=m.substring(1,2),C=m.substring(2,3),P=m.substring(3,4),I=m.substring(4,5),x+=x,C+=C,P+=P,I+=I),{red:parseInt(x,16),green:parseInt(C,16),blue:parseInt(P,16),alpha:I?parseInt(I,16)/255:1}}var s0={test:Tc("#"),parse:id,transform:ja.transform},vu={test:Tc("hsl","hue"),parse:r0("hue","saturation","lightness"),transform:({hue:m,saturation:x,lightness:C,alpha:P=1})=>"hsla("+Math.round(m)+", "+vi.transform(Dl(x))+", "+vi.transform(Dl(C))+", "+Dl(ye.transform(P))+")"},br={test:m=>ja.test(m)||s0.test(m)||vu.test(m),parse:m=>ja.test(m)?ja.parse(m):vu.test(m)?vu.parse(m):s0.parse(m),transform:m=>typeof m=="string"?m:m.hasOwnProperty("red")?ja.transform(m):vu.transform(m)},nd=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Zf(m){return isNaN(m)&&typeof m=="string"&&(m.match(vc)?.length||0)+(m.match(nd)?.length||0)>0}var a0="number",q_="color",RA="var",PA="var(",Jf="${}",MA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rd(m){let x=m.toString(),C=[],P={color:[],number:[],var:[]},I=[],N=0,X=x.replace(MA,Q=>(br.test(Q)?(P.color.push(N),I.push(q_),C.push(br.parse(Q))):Q.startsWith(PA)?(P.var.push(N),I.push(RA),C.push(Q)):(P.number.push(N),I.push(a0),C.push(parseFloat(Q))),++N,Jf)).split(Jf);return{values:C,split:X,indexes:P,types:I}}function W_(m){return rd(m).values}function $_(m){let{split:x,types:C}=rd(m),P=x.length;return I=>{let N="";for(let X=0;X<P;X++)if(N+=x[X],I[X]!==void 0){let Q=C[X];Q===a0?N+=Dl(I[X]):Q===q_?N+=br.transform(I[X]):N+=I[X]}return N}}var BA=m=>typeof m=="number"?0:m;function K_(m){let x=W_(m);return $_(m)(x.map(BA))}var Tu={test:Zf,parse:W_,createTransformer:$_,getAnimatableNone:K_};function o0(m,x,C){return C<0&&(C+=1),C>1&&(C-=1),C<1/6?m+(x-m)*6*C:C<1/2?x:C<2/3?m+(x-m)*(2/3-C)*6:m}function kA({hue:m,saturation:x,lightness:C,alpha:P}){m/=360,x/=100,C/=100;let I=0,N=0,X=0;if(!x)I=N=X=C;else{let Q=C<.5?C*(1+x):C+x-C*x,he=2*C-Q;I=o0(he,Q,m+1/3),N=o0(he,Q,m),X=o0(he,Q,m-1/3)}return{red:Math.round(I*255),green:Math.round(N*255),blue:Math.round(X*255),alpha:P}}function ep(m,x){return C=>C>0?x:m}var dn=(m,x,C)=>m+(x-m)*C,u0=(m,x,C)=>{let P=m*m,I=C*(x*x-P)+P;return I<0?0:Math.sqrt(I)},OA=[s0,ja,vu],FA=m=>OA.find(x=>x.test(m));function l0(m){let x=FA(m);if(!x)return!1;let C=x.parse(m);return x===vu&&(C=kA(C)),C}var Q_=(m,x)=>{let C=l0(m),P=l0(x);if(!C||!P)return ep(m,x);let I={...C};return N=>(I.red=u0(C.red,P.red,N),I.green=u0(C.green,P.green,N),I.blue=u0(C.blue,P.blue,N),I.alpha=dn(C.alpha,P.alpha,N),ja.transform(I))},c0=new Set(["none","hidden"]);function IA(m,x){return c0.has(m)?C=>C<=0?m:x:C=>C>=1?x:m}var LA=(m,x)=>C=>x(m(C)),sd=(...m)=>m.reduce(LA);function NA(m,x){return C=>dn(m,x,C)}function h0(m){return typeof m=="number"?NA:typeof m=="string"?bi(m)?ep:br.test(m)?Q_:ad:Array.isArray(m)?Z_:typeof m=="object"?br.test(m)?Q_:UA:ep}function Z_(m,x){let C=[...m],P=C.length,I=m.map((N,X)=>h0(N)(N,x[X]));return N=>{for(let X=0;X<P;X++)C[X]=I[X](N);return C}}function UA(m,x){let C={...m,...x},P={};for(let I in C)m[I]!==void 0&&x[I]!==void 0&&(P[I]=h0(m[I])(m[I],x[I]));return I=>{for(let N in P)C[N]=P[N](I);return C}}function d0(m,x){let C=[],P={color:0,var:0,number:0};for(let I=0;I<x.values.length;I++){let N=x.types[I],X=m.indexes[N][P[N]],Q=m.values[X]??0;C[I]=Q,P[N]++}return C}var ad=(m,x)=>{let C=Tu.createTransformer(x),P=rd(m),I=rd(x);return P.indexes.var.length===I.indexes.var.length&&P.indexes.color.length===I.indexes.color.length&&P.indexes.number.length>=I.indexes.number.length?c0.has(m)&&!I.values.length||c0.has(x)&&!P.values.length?IA(m,x):sd(Z_(d0(P,I),I.values),C):ep(m,x)};function J_(m,x,C){return typeof m=="number"&&typeof x=="number"&&typeof C=="number"?dn(m,x,C):h0(m)(m,x)}var ev=m=>{let x=({timestamp:C})=>m(C);return{start:(C=!0)=>ae.update(x,C),stop:()=>fe(x),now:()=>Te.isProcessing?Te.timestamp:ts.now()}},f0=(m,x,C=10)=>{let P="",I=Math.max(Math.round(x/C),2);for(let N=0;N<I;N++)P+=m(N/(I-1))+", ";return`linear(${P.substring(0,P.length-2)})`};function tp(m){let x=0,C=50,P=m.next(x);for(;!P.done&&x<2e4;)x+=C,P=m.next(x);return x>=2e4?1/0:x}function tv(m,x=100,C){let P=C({...m,keyframes:[0,x]}),I=Math.min(tp(P),2e4);return{type:"keyframes",ease:N=>P.next(I*N).value/x,duration:Rr(I)}}var iv=5;function Rl(m,x,C){let P=Math.max(x-iv,0);return e0(C-m(P),x-P)}var Mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nv=.001;function GA({duration:m=Mn.duration,bounce:x=Mn.bounce,velocity:C=Mn.velocity,mass:P=Mn.mass}){let I,N,X=1-x;X=F(Mn.minDamping,Mn.maxDamping,X),m=F(Mn.minDuration,Mn.maxDuration,Rr(m)),X<1?(I=ce=>{let le=ce*X,De=le*m,Fe=le-C,Je=Pl(ce,X),ze=Math.exp(-De);return nv-Fe/Je*ze},N=ce=>{let le=ce*X*m,De=le*C+C,Fe=Math.pow(X,2)*Math.pow(ce,2)*m,Je=Math.exp(-le),ze=Pl(Math.pow(ce,2),X);return(-I(ce)+nv>0?-1:1)*((De-Fe)*Je)/ze}):(I=ce=>{let le=Math.exp(-ce*m),De=(ce-C)*m+1;return-.001+le*De},N=ce=>{let le=Math.exp(-ce*m),De=(C-ce)*(m*m);return le*De});let Q=5/m,he=sv(I,N,Q);if(m=ds(m),isNaN(he))return{stiffness:Mn.stiffness,damping:Mn.damping,duration:m};{let ce=Math.pow(he,2)*P;return{stiffness:ce,damping:X*2*Math.sqrt(P*ce),duration:m}}}var rv=12;function sv(m,x,C){let P=C;for(let I=1;I<rv;I++)P=P-m(P)/x(P);return P}function Pl(m,x){return m*Math.sqrt(1-x*x)}var od=["duration","bounce"],HA=["stiffness","damping","mass"];function ud(m,x){return x.some(C=>m[C]!==void 0)}function av(m){let x={velocity:Mn.velocity,stiffness:Mn.stiffness,damping:Mn.damping,mass:Mn.mass,isResolvedFromDuration:!1,...m};if(!ud(m,HA)&&ud(m,od))if(m.visualDuration){let C=m.visualDuration,P=2*Math.PI/(C*1.2),I=P*P,N=2*F(.05,1,1-(m.bounce||0))*Math.sqrt(I);x={...x,mass:Mn.mass,stiffness:I,damping:N}}else{let C=GA(m);x={...x,...C,mass:Mn.mass},x.isResolvedFromDuration=!0}return x}function ld(m=Mn.visualDuration,x=Mn.bounce){let C=typeof m!="object"?{visualDuration:m,keyframes:[0,1],bounce:x}:m,{restSpeed:P,restDelta:I}=C,N=C.keyframes[0],X=C.keyframes[C.keyframes.length-1],Q={done:!1,value:N},{stiffness:he,damping:ce,mass:le,duration:De,velocity:Fe,isResolvedFromDuration:Je}=av({...C,velocity:-Rr(C.velocity||0)}),ze=Fe||0,et=ce/(2*Math.sqrt(he*le)),Ze=X-N,Xe=Rr(Math.sqrt(he/le)),Qe=Math.abs(Ze)<5;P||(P=Qe?Mn.restSpeed.granular:Mn.restSpeed.default),I||(I=Qe?Mn.restDelta.granular:Mn.restDelta.default);let Ot;if(et<1){let ti=Pl(Xe,et);Ot=qi=>{let sn=Math.exp(-et*Xe*qi);return X-sn*((ze+et*Xe*Ze)/ti*Math.sin(ti*qi)+Ze*Math.cos(ti*qi))}}else if(et===1)Ot=ti=>X-Math.exp(-Xe*ti)*(Ze+(ze+Xe*Ze)*ti);else{let ti=Xe*Math.sqrt(et*et-1);Ot=qi=>{let sn=Math.exp(-et*Xe*qi),Et=Math.min(ti*qi,300);return X-sn*((ze+et*Xe*Ze)*Math.sinh(Et)+ti*Ze*Math.cosh(Et))/ti}}let Ti={calculatedDuration:Je&&De||null,next:ti=>{let qi=Ot(ti);if(Je)Q.done=ti>=De;else{let sn=ti===0?ze:0;et<1&&(sn=ti===0?ds(ze):Rl(Ot,ti,qi));let Et=Math.abs(sn)<=P,vn=Math.abs(X-qi)<=I;Q.done=Et&&vn}return Q.value=Q.done?X:qi,Q},toString:()=>{let ti=Math.min(tp(Ti),2e4),qi=f0(sn=>Ti.next(ti*sn).value,ti,30);return ti+"ms "+qi},toTransition:()=>{}};return Ti}ld.applyToOptions=m=>{let x=tv(m,100,ld);return m.ease=x.ease,m.duration=ds(x.duration),m.type="keyframes",m};function cd({keyframes:m,velocity:x=0,power:C=.8,timeConstant:P=325,bounceDamping:I=10,bounceStiffness:N=500,modifyTarget:X,min:Q,max:he,restDelta:ce=.5,restSpeed:le}){let De=m[0],Fe={done:!1,value:De},Je=Et=>Q!==void 0&&Et<Q||he!==void 0&&Et>he,ze=Et=>Q===void 0?he:he===void 0||Math.abs(Q-Et)<Math.abs(he-Et)?Q:he,et=C*x,Ze=De+et,Xe=X===void 0?Ze:X(Ze);Xe!==Ze&&(et=Xe-De);let Qe=Et=>-et*Math.exp(-Et/P),Ot=Et=>Xe+Qe(Et),Ti=Et=>{let vn=Qe(Et),Ja=Ot(Et);Fe.done=Math.abs(vn)<=ce,Fe.value=Fe.done?Xe:Ja},ti,qi,sn=Et=>{Je(Fe.value)&&(ti=Et,qi=ld({keyframes:[Fe.value,ze(Fe.value)],velocity:Rl(Ot,Et,Fe.value),damping:I,stiffness:N,restDelta:ce,restSpeed:le}))};return sn(0),{calculatedDuration:null,next:Et=>{let vn=!1;return!qi&&ti===void 0&&(vn=!0,Ti(Et),sn(Et)),ti!==void 0&&Et>=ti?qi.next(Et-ti):(!vn&&Ti(Et),Fe)}}}var Ml=(m,x,C)=>{let P=x-m;return P===0?1:(C-m)/P};function ov(m,x,C){let P=[],I=C||j.mix||J_,N=m.length-1;for(let X=0;X<N;X++){let Q=I(m[X],m[X+1]);if(x){let he=Array.isArray(x)?x[X]||re:x;Q=sd(he,Q)}P.push(Q)}return P}function uv(m,x,{clamp:C=!0,ease:P,mixer:I}={}){let N=m.length;if(bt(N===x.length),N===1)return()=>x[0];if(N===2&&x[0]===x[1])return()=>x[1];let X=m[0]===m[1];m[0]>m[N-1]&&(m=[...m].reverse(),x=[...x].reverse());let Q=ov(x,P,I),he=Q.length,ce=le=>{if(X&&le<m[0])return x[0];let De=0;if(he>1)for(;De<m.length-2&&!(le<m[De+1]);De++);let Fe=Ml(m[De],m[De+1],le);return Q[De](Fe)};return C?le=>ce(F(m[0],m[N-1],le)):ce}function lv(m,x){let C=m[m.length-1];for(let P=1;P<=x;P++){let I=Ml(0,x,P);m.push(dn(C,1,I))}}function zA(m){let x=[0];return lv(x,m.length-1),x}function VA(m,x){return m.map(C=>C*x)}var cv=(m,x,C)=>(((1-3*C+3*x)*m+(3*C-6*x))*m+3*x)*m,jA=1e-7,XA=12;function Bs(m,x,C,P,I){let N,X,Q=0;do X=x+(C-x)/2,N=cv(X,P,I)-m,N>0?C=X:x=X;while(Math.abs(N)>jA&&++Q<XA);return X}function Lo(m,x,C,P){if(m===x&&C===P)return re;let I=N=>Bs(N,0,1,m,C);return N=>N===0||N===1?N:cv(I(N),x,P)}var hv=Lo(.42,0,1,1),dv=Lo(0,0,.58,1),p0=Lo(.42,0,.58,1),fv=m=>Array.isArray(m)&&typeof m[0]!="number",ip=m=>x=>x<=.5?m(2*x)/2:(2-m(2*(1-x)))/2,pv=m=>x=>1-m(1-x),Bl=Lo(.33,1.53,.69,.99),hd=pv(Bl),Ec=ip(hd),np=m=>(m*=2)<1?.5*hd(m):.5*(2-Math.pow(2,-10*(m-1))),rp=m=>1-Math.sin(Math.acos(m)),Eu=pv(rp),kl=ip(rp),sp=m=>Array.isArray(m)&&typeof m[0]=="number",mv={linear:re,easeIn:hv,easeInOut:p0,easeOut:dv,circIn:rp,circInOut:kl,circOut:Eu,backIn:hd,backInOut:Ec,backOut:Bl,anticipate:np},Ol=m=>typeof m=="string",m0=m=>{if(sp(m)){bt(m.length===4);let[x,C,P,I]=m;return Lo(x,C,P,I)}else if(Ol(m))return mv[m];return m};function gv(m,x){return m.map(()=>x||p0).splice(0,m.length-1)}function Sc({duration:m=300,keyframes:x,times:C,ease:P="easeInOut"}){let I=fv(P)?P.map(m0):m0(P),N={done:!1,value:x[0]},X=VA(C&&C.length===x.length?C:zA(x),m),Q=uv(X,x,{ease:Array.isArray(I)?I:gv(x,I)});return{calculatedDuration:m,next:he=>(N.value=Q(he),N.done=he>=m,N)}}var YA=m=>m!==null;function g0(m,{repeat:x,repeatType:C="loop"},P,I=1){let N=m.filter(YA),X=I<0||x&&C!=="loop"&&x%2===1?0:N.length-1;return!X||P===void 0?N[X]:P}var qA={decay:cd,inertia:cd,tween:Sc,keyframes:Sc,spring:ld};function b0(m){typeof m.type=="string"&&(m.type=qA[m.type])}var ap=class{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(m=>{this.resolve=m})}notifyFinished(){this.resolve()}then(m,x){return this.finished.then(m,x)}},y0=m=>m/100,ks=class extends ap{constructor(m){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(x=!0)=>{if(x){let{motionValue:P}=this.options;P&&P.updatedAt!==ts.now()&&this.tick(ts.now())}if(this.isStopped=!0,this.state==="idle")return;this.teardown();let{onStop:C}=this.options;C&&C()},this.options=m,this.initAnimation(),this.play(),m.autoplay===!1&&this.pause()}initAnimation(){let{options:m}=this;b0(m);let{type:x=Sc,repeat:C=0,repeatDelay:P=0,repeatType:I,velocity:N=0}=m,{keyframes:X}=m,Q=x||Sc;Q!==Sc&&typeof X[0]!="number"&&(this.mixKeyframes=sd(y0,J_(X[0],X[1])),X=[0,100]);let he=Q({...m,keyframes:X});I==="mirror"&&(this.mirroredGenerator=Q({...m,keyframes:[...X].reverse(),velocity:-N})),he.calculatedDuration===null&&(he.calculatedDuration=tp(he));let{calculatedDuration:ce}=he;this.calculatedDuration=ce,this.resolvedDuration=ce+P,this.totalDuration=this.resolvedDuration*(C+1)-P,this.generator=he}updateTime(m){let x=Math.round(m-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=x}tick(m,x=!1){let{generator:C,totalDuration:P,mixKeyframes:I,mirroredGenerator:N,resolvedDuration:X,calculatedDuration:Q}=this;if(this.startTime===null)return C.next(0);let{delay:he=0,keyframes:ce,repeat:le,repeatType:De,repeatDelay:Fe,type:Je,onUpdate:ze,finalKeyframe:et}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,m):this.speed<0&&(this.startTime=Math.min(m-P/this.speed,this.startTime)),x?this.currentTime=m:this.updateTime(m);let Ze=this.currentTime-he*(this.playbackSpeed>=0?1:-1),Xe=this.playbackSpeed>=0?Ze<0:Ze>P;this.currentTime=Math.max(Ze,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=P);let Qe=this.currentTime,Ot=C;if(le){let sn=Math.min(this.currentTime,P)/X,Et=Math.floor(sn),vn=sn%1;!vn&&sn>=1&&(vn=1),vn===1&&Et--,Et=Math.min(Et,le+1),Et%2&&(De==="reverse"?(vn=1-vn,Fe&&(vn-=Fe/X)):De==="mirror"&&(Ot=N)),Qe=F(0,1,vn)*X}let Ti=Xe?{done:!1,value:ce[0]}:Ot.next(Qe);I&&(Ti.value=I(Ti.value));let{done:ti}=Ti;!Xe&&Q!==null&&(ti=this.playbackSpeed>=0?this.currentTime>=P:this.currentTime<=0);let qi=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ti);return qi&&Je!==cd&&(Ti.value=g0(ce,this.options,et,this.speed)),ze&&ze(Ti.value),qi&&this.finish(),Ti}then(m,x){return this.finished.then(m,x)}get duration(){return Rr(this.calculatedDuration)}get time(){return Rr(this.currentTime)}set time(m){m=ds(m),this.currentTime=m,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=m:this.driver&&(this.startTime=this.driver.now()-m/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(m){this.updateTime(ts.now());let x=this.playbackSpeed!==m;this.playbackSpeed=m,x&&(this.time=Rr(this.currentTime))}play(){if(this.isStopped)return;let{driver:m=ev,onPlay:x,startTime:C}=this.options;this.driver||(this.driver=m(I=>this.tick(I))),x&&x();let P=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=P):this.holdTime!==null?this.startTime=P-this.holdTime:this.startTime||(this.startTime=C??P),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ts.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:m}=this.options;m&&m()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(m){return this.startTime=0,this.tick(m,!0)}attachTimeline(m){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),m.observe(this)}};function op(m){for(let x=1;x<m.length;x++)m[x]??(m[x]=m[x-1])}var yr=m=>m*180/Math.PI,Su=m=>{let x=yr(Math.atan2(m[1],m[0]));return Ac(x)},x0={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:m=>(Math.abs(m[0])+Math.abs(m[3]))/2,rotate:Su,rotateZ:Su,skewX:m=>yr(Math.atan(m[1])),skewY:m=>yr(Math.atan(m[2])),skew:m=>(Math.abs(m[1])+Math.abs(m[2]))/2},Ac=m=>(m=m%360,m<0&&(m+=360),m),dd=Su,up=m=>Math.sqrt(m[0]*m[0]+m[1]*m[1]),Au=m=>Math.sqrt(m[4]*m[4]+m[5]*m[5]),bv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:up,scaleY:Au,scale:m=>(up(m)+Au(m))/2,rotateX:m=>Ac(yr(Math.atan2(m[6],m[5]))),rotateY:m=>Ac(yr(Math.atan2(-m[2],m[0]))),rotateZ:dd,rotate:dd,skewX:m=>yr(Math.atan(m[4])),skewY:m=>yr(Math.atan(m[1])),skew:m=>(Math.abs(m[1])+Math.abs(m[4]))/2};function fd(m){return m.includes("scale")?1:0}function Cu(m,x){if(!m||m==="none")return fd(x);let C=m.match(/^matrix3d\(([-\d.e\s,]+)\)$/u),P,I;if(C)P=bv,I=C;else{let Q=m.match(/^matrix\(([-\d.e\s,]+)\)$/u);P=x0,I=Q}if(!I)return fd(x);let N=P[x],X=I[1].split(",").map(Os);return typeof N=="function"?N(X):X[N]}var WA=(m,x)=>{let{transform:C="none"}=getComputedStyle(m);return Cu(C,x)};function Os(m){return parseFloat(m.trim())}var lp=m=>m===Z||m===ot,No=new Set(["x","y","z"]),yv=Gr.filter(m=>!No.has(m));function cp(m){let x=[];return yv.forEach(C=>{let P=m.getValue(C);P!==void 0&&(x.push([C,P.get()]),P.set(C.startsWith("scale")?1:0))}),x}var Fs={width:({x:m},{paddingLeft:x="0",paddingRight:C="0"})=>m.max-m.min-parseFloat(x)-parseFloat(C),height:({y:m},{paddingTop:x="0",paddingBottom:C="0"})=>m.max-m.min-parseFloat(x)-parseFloat(C),top:(m,{top:x})=>parseFloat(x),left:(m,{left:x})=>parseFloat(x),bottom:({y:m},{top:x})=>parseFloat(x)+(m.max-m.min),right:({x:m},{left:x})=>parseFloat(x)+(m.max-m.min),x:(m,{transform:x})=>Cu(x,"x"),y:(m,{transform:x})=>Cu(x,"y")};Fs.translateX=Fs.x,Fs.translateY=Fs.y;var Uo=new Set,hp=!1,pd=!1,dp=!1;function Is(){if(pd){let m=Array.from(Uo).filter(P=>P.needsMeasurement),x=new Set(m.map(P=>P.element)),C=new Map;x.forEach(P=>{let I=cp(P);I.length&&(C.set(P,I),P.render())}),m.forEach(P=>P.measureInitialState()),x.forEach(P=>{P.render();let I=C.get(P);I&&I.forEach(([N,X])=>{P.getValue(N)?.set(X)})}),m.forEach(P=>P.measureEndState()),m.forEach(P=>{P.suspendedScrollY!==void 0&&window.scrollTo(0,P.suspendedScrollY)})}pd=!1,hp=!1,Uo.forEach(m=>m.complete(dp)),Uo.clear()}function Fl(){Uo.forEach(m=>{m.readKeyframes(),m.needsMeasurement&&(pd=!0)})}function Cc(){dp=!0,Fl(),Is(),dp=!1}var wc=class{constructor(m,x,C,P,I,N=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...m],this.onComplete=x,this.name=C,this.motionValue=P,this.element=I,this.isAsync=N}scheduleResolve(){this.state="scheduled",this.isAsync?(Uo.add(this),hp||(hp=!0,ae.read(Fl),ae.resolveKeyframes(Is))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:m,name:x,element:C,motionValue:P}=this;if(m[0]===null){let I=P?.get(),N=m[m.length-1];if(I!==void 0)m[0]=I;else if(C&&x){let X=C.readValue(x,N);X!=null&&(m[0]=X)}m[0]===void 0&&(m[0]=N),P&&I===void 0&&P.set(m[0])}op(m)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(m=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,m),Uo.delete(this)}cancel(){this.state==="scheduled"&&(Uo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}},md=m=>m.startsWith("--");function Ws(m,x,C){md(x)?m.style.setProperty(x,C):m.style[x]=C}function ps(m){let x;return()=>(x===void 0&&(x=m()),x)}var wu=ps(()=>window.ScrollTimeline!==void 0),Xa={};function Ya(m,x){let C=ps(m);return()=>Xa[x]??C()}var qa=Ya(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dc=([m,x,C,P])=>`cubic-bezier(${m}, ${x}, ${C}, ${P})`,fp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dc([0,.65,.55,1]),circOut:Dc([.55,0,1,.45]),backIn:Dc([.31,.01,.66,-.59]),backOut:Dc([.33,1.53,.69,.99])};function pp(m,x){if(m)return typeof m=="function"?qa()?f0(m,x):"ease-out":sp(m)?Dc(m):Array.isArray(m)?m.map(C=>pp(C,x)||fp.easeOut):fp[m]}function xv(m,x,C,{delay:P=0,duration:I=300,repeat:N=0,repeatType:X="loop",ease:Q="easeOut",times:he}={},ce=void 0){let le={[x]:C};he&&(le.offset=he);let De=pp(Q,I);Array.isArray(De)&&(le.easing=De);let Fe={delay:P,duration:I,easing:Array.isArray(De)?"linear":De,fill:"both",iterations:N+1,direction:X==="reverse"?"alternate":"normal"};return ce&&(Fe.pseudoElement=ce),m.animate(le,Fe)}function xr(m){return typeof m=="function"&&"applyToOptions"in m}function fn({type:m,...x}){return xr(m)&&qa()?m.applyToOptions(x):(x.duration??(x.duration=300),x.ease??(x.ease="easeOut"),x)}var yi=class extends ap{constructor(m){if(super(),this.finishedTime=null,this.isStopped=!1,!m)return;let{element:x,name:C,keyframes:P,pseudoElement:I,allowFlatten:N=!1,finalKeyframe:X,onComplete:Q}=m;this.isPseudoElement=!!I,this.allowFlatten=N,this.options=m,bt(typeof m.type!="string");let he=fn(m);this.animation=xv(x,C,P,he,I),he.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!I){let ce=g0(P,this.options,X,this.speed);this.updateMotionValue?this.updateMotionValue(ce):Ws(x,C,ce),this.animation.cancel()}Q?.(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:m}=this;m==="idle"||m==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){let m=this.animation.effect?.getComputedTiming?.().duration||0;return Rr(Number(m))}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(m){this.finishedTime=null,this.animation.currentTime=ds(m)}get speed(){return this.animation.playbackRate}set speed(m){m<0&&(this.finishedTime=null),this.animation.playbackRate=m}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(m){this.animation.startTime=m}attachTimeline({timeline:m,observe:x}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,m&&wu()?(this.animation.timeline=m,re):x(this)}},Go={anticipate:np,backInOut:Ec,circInOut:kl};function $s(m){return m in Go}function _0(m){typeof m.ease=="string"&&$s(m.ease)&&(m.ease=Go[m.ease])}var Ho=10,_v=class extends yi{constructor(m){_0(m),b0(m),super(m),m.startTime&&(this.startTime=m.startTime),this.options=m}updateMotionValue(m){let{motionValue:x,onUpdate:C,onComplete:P,element:I,...N}=this.options;if(!x)return;if(m!==void 0){x.set(m);return}let X=new ks({...N,autoplay:!1}),Q=ds(this.finishedTime??this.time);x.setWithVelocity(X.sample(Q-Ho).value,X.sample(Q).value,Ho),X.stop()}},v0=(m,x)=>x==="zIndex"?!1:!!(typeof m=="number"||Array.isArray(m)||typeof m=="string"&&(Tu.test(m)||m==="0")&&!m.startsWith("url("));function Rc(m){let x=m[0];if(m.length===1)return!0;for(let C=0;C<m.length;C++)if(m[C]!==x)return!0}function Il(m,x,C,P){let I=m[0];if(I===null)return!1;if(x==="display"||x==="visibility")return!0;let N=m[m.length-1],X=v0(I,x),Q=v0(N,x);return!X||!Q?!1:Rc(m)||(C==="spring"||xr(C))&&P}var T0=new Set(["opacity","clipPath","filter","transform"]),gd=ps(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function E0(m){let{motionValue:x,name:C,repeatDelay:P,repeatType:I,damping:N,type:X}=m;if(!x||!x.owner||!(x.owner.current instanceof HTMLElement))return!1;let{onUpdate:Q,transformTemplate:he}=x.owner.getProps();return gd()&&C&&T0.has(C)&&(C!=="transform"||!he)&&!Q&&!P&&I!=="mirror"&&N!==0&&X!=="inertia"}var Ll=40,zo=class extends ap{constructor({autoplay:m=!0,delay:x=0,type:C="keyframes",repeat:P=0,repeatDelay:I=0,repeatType:N="loop",keyframes:X,name:Q,motionValue:he,element:ce,...le}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ts.now();let De={autoplay:m,delay:x,type:C,repeat:P,repeatDelay:I,repeatType:N,name:Q,motionValue:he,element:ce,...le},Fe=ce?.KeyframeResolver||wc;this.keyframeResolver=new Fe(X,(Je,ze,et)=>this.onKeyframesResolved(Je,ze,De,!et),Q,he,ce),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(m,x,C,P){this.keyframeResolver=void 0;let{name:I,type:N,velocity:X,delay:Q,isHandoff:he,onUpdate:ce}=C;this.resolvedAt=ts.now(),Il(m,I,N,X)||((j.instantAnimations||!Q)&&ce?.(g0(m,C,x)),m[0]=m[m.length-1],C.duration=0,C.repeat=0);let le={startTime:P?this.resolvedAt?this.resolvedAt-this.createdAt>Ll?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:x,...C,keyframes:m},De=!he&&E0(le)?new _v({...le,element:le.motionValue.owner.current}):new ks(le);De.finished.then(()=>this.notifyFinished()).catch(re),this.pendingTimeline&&(this.stopTimeline=De.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=De}get finished(){return this._animation?this.animation.finished:this._finished}then(m,x){return this.finished.finally(m).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Cc()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(m){this.animation.time=m}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(m){this.animation.speed=m}get startTime(){return this.animation.startTime}attachTimeline(m){return this._animation?this.stopTimeline=this.animation.attachTimeline(m):this.pendingTimeline=m,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}},Wa=(m,x,C,P={},I,N)=>X=>{let Q=td(P,m)||{},he=Q.delay||P.delay||0,{elapsed:ce=0}=P;ce=ce-ds(he);let le={keyframes:Array.isArray(C)?C:[null,C],ease:"easeOut",velocity:x.getVelocity(),...Q,delay:-ce,onUpdate:Fe=>{x.set(Fe),Q.onUpdate&&Q.onUpdate(Fe)},onComplete:()=>{X(),Q.onComplete&&Q.onComplete()},name:m,motionValue:x,element:N?void 0:I};Fo(Q)||Object.assign(le,ed(m,le)),le.duration&&(le.duration=ds(le.duration)),le.repeatDelay&&(le.repeatDelay=ds(le.repeatDelay)),le.from!==void 0&&(le.keyframes[0]=le.from);let De=!1;if((le.type===!1||le.duration===0&&!le.repeatDelay)&&(le.duration=0,le.delay===0&&(De=!0)),(j.instantAnimations||j.skipAnimations)&&(De=!0,le.duration=0,le.delay=0),le.allowFlatten=!Q.type&&!Q.ease,De&&!N&&x.get()!==void 0){let Fe=xc(le.keyframes,Q);if(Fe!==void 0){ae.update(()=>{le.onUpdate(Fe),le.onComplete()});return}}return Q.isSync?new ks(le):new zo(le)},$a=new Set(["width","height","top","left","right","bottom",...Gr]);function S0({protectedKeys:m,needsAnimating:x},C){let P=m.hasOwnProperty(C)&&x[C]!==!0;return x[C]=!1,P}function mp(m,x,{delay:C=0,transitionOverride:P,type:I}={}){let{transition:N=m.getDefaultTransition(),transitionEnd:X,...Q}=x;P&&(N=P);let he=[],ce=I&&m.animationState&&m.animationState.getState()[I];for(let le in Q){let De=m.getValue(le,m.latestValues[le]??null),Fe=Q[le];if(Fe===void 0||ce&&S0(ce,le))continue;let Je={delay:C,...td(N||{},le)},ze=De.get();if(ze!==void 0&&!De.isAnimating&&!Array.isArray(Fe)&&Fe===ze&&!Je.velocity)continue;let et=!1;if(window.MotionHandoffAnimation){let Xe=Kf(m);if(Xe){let Qe=window.MotionHandoffAnimation(Xe,le,ae);Qe!==null&&(Je.startTime=Qe,et=!0)}}Ta(m,le),De.start(Wa(le,De,Fe,m.shouldReduceMotion&&$a.has(le)?{type:!1}:Je,m,et));let Ze=De.animation;Ze&&he.push(Ze)}return X&&Promise.all(he).then(()=>{ae.update(()=>{X&&DA(m,X)})}),he}function Du(m,x,C={}){let P=xu(m,x,C.type==="exit"?m.presenceContext?.custom:void 0),{transition:I=m.getDefaultTransition()||{}}=P||{};C.transitionOverride&&(I=C.transitionOverride);let N=P?()=>Promise.all(mp(m,P,C)):()=>Promise.resolve(),X=m.variantChildren&&m.variantChildren.size?(he=0)=>{let{delayChildren:ce=0,staggerChildren:le,staggerDirection:De}=I;return gp(m,x,ce+he,le,De,C)}:()=>Promise.resolve(),{when:Q}=I;if(Q){let[he,ce]=Q==="beforeChildren"?[N,X]:[X,N];return he().then(()=>ce())}else return Promise.all([N(),X(C.delay)])}function gp(m,x,C=0,P=0,I=1,N){let X=[],Q=(m.variantChildren.size-1)*P,he=I===1?(ce=0)=>ce*P:(ce=0)=>Q-ce*P;return Array.from(m.variantChildren).sort(Nl).forEach((ce,le)=>{ce.notify("AnimationStart",x),X.push(Du(ce,x,{...N,delay:C+he(le)}).then(()=>ce.notify("AnimationComplete",x)))}),Promise.all(X)}function Nl(m,x){return m.sortNodePosition(x)}function Pr(m,x,C={}){m.notify("AnimationStart",x);let P;if(Array.isArray(x)){let I=x.map(N=>Du(m,N,C));P=Promise.all(I)}else if(typeof x=="string")P=Du(m,x,C);else{let I=typeof x=="function"?xu(m,x,C.custom):x;P=Promise.all(mp(m,I,C))}return P.then(()=>{m.notify("AnimationComplete",x)})}function bd(m,x){if(!Array.isArray(x))return!1;let C=x.length;if(C!==m.length)return!1;for(let P=0;P<C;P++)if(x[P]!==m[P])return!1;return!0}var vv=li.length;function Tv(m){if(!m)return;if(!m.isControllingVariants){let C=m.parent?Tv(m.parent)||{}:{};return m.props.initial!==void 0&&(C.initial=m.props.initial),C}let x={};for(let C=0;C<vv;C++){let P=li[C],I=m.props[P];(tt(I)||I===!1)&&(x[P]=I)}return x}var $A=[...$t].reverse(),KA=$t.length;function Wn(m){return x=>Promise.all(x.map(({animation:C,options:P})=>Pr(m,C,P)))}function A0(m){let x=Wn(m),C=bp(),P=!0,I=he=>(ce,le)=>{let De=xu(m,le,he==="exit"?m.presenceContext?.custom:void 0);if(De){let{transition:Fe,transitionEnd:Je,...ze}=De;ce={...ce,...ze,...Je}}return ce};function N(he){x=he(m)}function X(he){let{props:ce}=m,le=Tv(m.parent)||{},De=[],Fe=new Set,Je={},ze=1/0;for(let Ze=0;Ze<KA;Ze++){let Xe=$A[Ze],Qe=C[Xe],Ot=ce[Xe]!==void 0?ce[Xe]:le[Xe],Ti=tt(Ot),ti=Xe===he?Qe.isActive:null;ti===!1&&(ze=Ze);let qi=Ot===le[Xe]&&Ot!==ce[Xe]&&Ti;if(qi&&P&&m.manuallyAnimateOnMount&&(qi=!1),Qe.protectedKeys={...Je},!Qe.isActive&&ti===null||!Ot&&!Qe.prevProp||pt(Ot)||typeof Ot=="boolean")continue;let sn=yd(Qe.prevProp,Ot),Et=sn||Xe===he&&Qe.isActive&&!qi&&Ti||Ze>ze&&Ti,vn=!1,Ja=Array.isArray(Ot)?Ot:[Ot],ql=Ja.reduce(I(Xe),{});ti===!1&&(ql={});let{prevResolvedValues:ys={}}=Qe,Xc={...ys,...ql},Yc=Wi=>{Et=!0,Fe.has(Wi)&&(vn=!0,Fe.delete(Wi)),Qe.needsAnimating[Wi]=!0;let eo=m.getValue(Wi);eo&&(eo.liveStyle=!1)};for(let Wi in Xc){let eo=ql[Wi],qc=ys[Wi];if(Je.hasOwnProperty(Wi))continue;let jp=!1;Zg(eo)&&Zg(qc)?jp=!bd(eo,qc):jp=eo!==qc,jp?eo!=null?Yc(Wi):Fe.add(Wi):eo!==void 0&&Fe.has(Wi)?Yc(Wi):Qe.protectedKeys[Wi]=!0}Qe.prevProp=Ot,Qe.prevResolvedValues=ql,Qe.isActive&&(Je={...Je,...ql}),P&&m.blockInitialAnimation&&(Et=!1),Et&&(!(qi&&sn)||vn)&&De.push(...Ja.map(Wi=>({animation:Wi,options:{type:Xe}})))}if(Fe.size){let Ze={};if(typeof ce.initial!="boolean"){let Xe=xu(m,Array.isArray(ce.initial)?ce.initial[0]:ce.initial);Xe&&Xe.transition&&(Ze.transition=Xe.transition)}Fe.forEach(Xe=>{let Qe=m.getBaseTarget(Xe),Ot=m.getValue(Xe);Ot&&(Ot.liveStyle=!0),Ze[Xe]=Qe??null}),De.push({animation:Ze})}let et=!!De.length;return P&&(ce.initial===!1||ce.initial===ce.animate)&&!m.manuallyAnimateOnMount&&(et=!1),P=!1,et?x(De):Promise.resolve()}function Q(he,ce){if(C[he].isActive===ce)return Promise.resolve();m.variantChildren?.forEach(De=>De.animationState?.setActive(he,ce)),C[he].isActive=ce;let le=X(he);for(let De in C)C[De].protectedKeys={};return le}return{animateChanges:X,setActive:Q,setAnimateFunction:N,getState:()=>C,reset:()=>{C=bp(),P=!0}}}function yd(m,x){return typeof x=="string"?x!==m:Array.isArray(x)?!bd(x,m):!1}function Ea(m=!1){return{isActive:m,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bp(){return{animate:Ea(!0),whileInView:Ea(),whileHover:Ea(),whileTap:Ea(),whileDrag:Ea(),whileFocus:Ea(),exit:Ea()}}var Ls=class{constructor(m){this.isMounted=!1,this.node=m}update(){}},Pc=class extends Ls{constructor(m){super(m),m.animationState||(m.animationState=A0(m))}updateAnimationControlsSubscription(){let{animate:m}=this.node.getProps();pt(m)&&(this.unmountControls=m.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:m}=this.node.getProps(),{animate:x}=this.node.prevProps||{};m!==x&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}},QA=0,Ev=class extends Ls{constructor(){super(...arguments),this.id=QA++}update(){if(!this.node.presenceContext)return;let{isPresent:m,onExitComplete:x}=this.node.presenceContext,{isPresent:C}=this.node.prevPresenceContext||{};if(!this.node.animationState||m===C)return;let P=this.node.animationState.setActive("exit",!m);x&&!m&&P.then(()=>{x(this.id)})}mount(){let{register:m,onExitComplete:x}=this.node.presenceContext||{};x&&x(this.id),m&&(this.unmount=m(this.id))}unmount(){}},ZA={animation:{Feature:Pc},exit:{Feature:Ev}};function Mc(m,x,C,P={passive:!0}){return m.addEventListener(x,C,P),()=>m.removeEventListener(x,C)}var Vo=m=>m.pointerType==="mouse"?typeof m.button!="number"||m.button<=0:m.isPrimary!==!1;function Ul(m){return{point:{x:m.pageX,y:m.pageY}}}var yp=m=>x=>Vo(x)&&m(x,Ul(x));function Bc(m,x,C,P){return Mc(m,x,yp(C),P)}function Gl({top:m,left:x,right:C,bottom:P}){return{x:{min:x,max:C},y:{min:m,max:P}}}function C0({x:m,y:x}){return{top:x.min,right:m.max,bottom:x.max,left:m.min}}function xp(m,x){if(!x)return m;let C=x({x:m.left,y:m.top}),P=x({x:m.right,y:m.bottom});return{top:C.y,left:C.x,bottom:P.y,right:P.x}}var xd=1e-4,Sv=1-xd,Av=1+xd,Ru=.01,Hl=0-Ru,Cv=0+Ru;function Vr(m){return m.max-m.min}function kc(m,x,C){return Math.abs(m-x)<=C}function Oc(m,x,C,P=.5){m.origin=P,m.originPoint=dn(x.min,x.max,m.origin),m.scale=Vr(C)/Vr(x),m.translate=dn(C.min,C.max,m.origin)-m.originPoint,(m.scale>=Sv&&m.scale<=Av||isNaN(m.scale))&&(m.scale=1),(m.translate>=Hl&&m.translate<=Cv||isNaN(m.translate))&&(m.translate=0)}function Pu(m,x,C,P){Oc(m.x,x.x,C.x,P?P.originX:void 0),Oc(m.y,x.y,C.y,P?P.originY:void 0)}function Fc(m,x,C){m.min=C.min+x.min,m.max=m.min+Vr(x)}function _p(m,x,C){Fc(m.x,x.x,C.x),Fc(m.y,x.y,C.y)}function w0(m,x,C){m.min=x.min-C.min,m.max=m.min+Vr(x)}function Sa(m,x,C){w0(m.x,x.x,C.x),w0(m.y,x.y,C.y)}var D0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ns=()=>({x:D0(),y:D0()}),vp=()=>({min:0,max:0}),wn=()=>({x:vp(),y:vp()});function ur(m){return[m("x"),m("y")]}function Ka(m){return m===void 0||m===1}function zl({scale:m,scaleX:x,scaleY:C}){return!Ka(m)||!Ka(x)||!Ka(C)}function jo(m){return zl(m)||Tp(m)||m.z||m.rotate||m.rotateX||m.rotateY||m.skewX||m.skewY}function Tp(m){return Ic(m.x)||Ic(m.y)}function Ic(m){return m&&m!=="0%"}function Mu(m,x,C){let P=m-C,I=x*P;return C+I}function R0(m,x,C,P,I){return I!==void 0&&(m=Mu(m,I,P)),Mu(m,C,P)+x}function Ep(m,x=0,C=1,P,I){m.min=R0(m.min,x,C,P,I),m.max=R0(m.max,x,C,P,I)}function Vl(m,{x,y:C}){Ep(m.x,x.translate,x.scale,x.originPoint),Ep(m.y,C.translate,C.scale,C.originPoint)}var _d=.999999999999,P0=1.0000000000001;function M0(m,x,C,P=!1){let I=C.length;if(!I)return;x.x=x.y=1;let N,X;for(let Q=0;Q<I;Q++){N=C[Q],X=N.projectionDelta;let{visualElement:he}=N.options;he&&he.props.style&&he.props.style.display==="contents"||(P&&N.options.layoutScroll&&N.scroll&&N!==N.root&&Mr(m,{x:-N.scroll.offset.x,y:-N.scroll.offset.y}),X&&(x.x*=X.x.scale,x.y*=X.y.scale,Vl(m,X)),P&&jo(N.latestValues)&&Mr(m,N.latestValues))}x.x<P0&&x.x>_d&&(x.x=1),x.y<P0&&x.y>_d&&(x.y=1)}function Bu(m,x){m.min=m.min+x,m.max=m.max+x}function ms(m,x,C,P,I=.5){let N=dn(m.min,m.max,I);Ep(m,x,C,N,P)}function Mr(m,x){ms(m.x,x.x,x.scaleX,x.scale,x.originX),ms(m.y,x.y,x.scaleY,x.scale,x.originY)}function Xo(m,x){return Gl(xp(m.getBoundingClientRect(),x))}function B0(m,x,C){let P=Xo(m,C),{scroll:I}=x;return I&&(Bu(P.x,I.offset.x),Bu(P.y,I.offset.y)),P}var k0=({current:m})=>m?m.ownerDocument.defaultView:null,Yo=(m,x)=>Math.abs(m-x);function Us(m,x){let C=Yo(m.x,x.x),P=Yo(m.y,x.y);return Math.sqrt(C**2+P**2)}var Bn=class{constructor(m,x,{transformPagePoint:C,contextWindow:P,dragSnapToOrigin:I=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let le=Vt(this.lastMoveEventInfo,this.history),De=this.startEvent!==null,Fe=Us(le.offset,{x:0,y:0})>=3;if(!De&&!Fe)return;let{point:Je}=le,{timestamp:ze}=Te;this.history.push({...Je,timestamp:ze});let{onStart:et,onMove:Ze}=this.handlers;De||(et&&et(this.lastMoveEvent,le),this.startEvent=this.lastMoveEvent),Ze&&Ze(this.lastMoveEvent,le)},this.handlePointerMove=(le,De)=>{this.lastMoveEvent=le,this.lastMoveEventInfo=Lc(De,this.transformPagePoint),ae.update(this.updatePoint,!0)},this.handlePointerUp=(le,De)=>{this.end();let{onEnd:Fe,onSessionEnd:Je,resumeAnimation:ze}=this.handlers;if(this.dragSnapToOrigin&&ze&&ze(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let et=Vt(le.type==="pointercancel"?this.lastMoveEventInfo:Lc(De,this.transformPagePoint),this.history);this.startEvent&&Fe&&Fe(le,et),Je&&Je(le,et)},!Vo(m))return;this.dragSnapToOrigin=I,this.handlers=x,this.transformPagePoint=C,this.contextWindow=P||window;let N=Ul(m),X=Lc(N,this.transformPagePoint),{point:Q}=X,{timestamp:he}=Te;this.history=[{...Q,timestamp:he}];let{onSessionStart:ce}=x;ce&&ce(m,Vt(X,this.history)),this.removeListeners=sd(Bc(this.contextWindow,"pointermove",this.handlePointerMove),Bc(this.contextWindow,"pointerup",this.handlePointerUp),Bc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(m){this.handlers=m}end(){this.removeListeners&&this.removeListeners(),fe(this.updatePoint)}};function Lc(m,x){return x?{point:x(m.point)}:m}function Qa(m,x){return{x:m.x-x.x,y:m.y-x.y}}function Vt({point:m},x){return{point:m,delta:Qa(m,Gn(x)),offset:Qa(m,Yi(x)),velocity:Sp(x,.1)}}function Yi(m){return m[0]}function Gn(m){return m[m.length-1]}function Sp(m,x){if(m.length<2)return{x:0,y:0};let C=m.length-1,P=null,I=Gn(m);for(;C>=0&&(P=m[C],!(I.timestamp-P.timestamp>ds(x)));)C--;if(!P)return{x:0,y:0};let N=Rr(I.timestamp-P.timestamp);if(N===0)return{x:0,y:0};let X={x:(I.x-P.x)/N,y:(I.y-P.y)/N};return X.x===1/0&&(X.x=0),X.y===1/0&&(X.y=0),X}function Nc(m,{min:x,max:C},P){return x!==void 0&&m<x?m=P?dn(x,m,P.min):Math.max(m,x):C!==void 0&&m>C&&(m=P?dn(C,m,P.max):Math.min(m,C)),m}function ku(m,x,C){return{min:x!==void 0?m.min+x:void 0,max:C!==void 0?m.max+C-(m.max-m.min):void 0}}function Ap(m,{top:x,left:C,bottom:P,right:I}){return{x:ku(m.x,C,I),y:ku(m.y,x,P)}}function Uc(m,x){let C=x.min-m.min,P=x.max-m.max;return x.max-x.min<m.max-m.min&&([C,P]=[P,C]),{min:C,max:P}}function Gc(m,x){return{x:Uc(m.x,x.x),y:Uc(m.y,x.y)}}function JA(m,x){let C=.5,P=Vr(m),I=Vr(x);return I>P?C=Ml(x.min,x.max-P,m.min):P>I&&(C=Ml(m.min,m.max-I,x.min)),F(0,1,C)}function kn(m,x){let C={};return x.min!==void 0&&(C.min=x.min-m.min),x.max!==void 0&&(C.max=x.max-m.min),C}var vd=.35;function O0(m=vd){return m===!1?m=0:m===!0&&(m=vd),{x:F0(m,"left","right"),y:F0(m,"top","bottom")}}function F0(m,x,C){return{min:I0(m,x),max:I0(m,C)}}function I0(m,x){return typeof m=="number"?m:m[x]||0}var Aa={x:!1,y:!1};function Cp(){return Aa.x||Aa.y}function L0(m){return m==="x"||m==="y"?Aa[m]?null:(Aa[m]=!0,()=>{Aa[m]=!1}):Aa.x||Aa.y?null:(Aa.x=Aa.y=!0,()=>{Aa.x=Aa.y=!1})}var N0=new WeakMap,is=class{constructor(m){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.visualElement=m}start(m,{snapToCursor:x=!1}={}){let{presenceContext:C}=this.visualElement;if(C&&C.isPresent===!1)return;let P=ce=>{let{dragSnapToOrigin:le}=this.getProps();le?this.pauseAnimation():this.stopAnimation(),x&&this.snapToCursor(Ul(ce).point)},I=(ce,le)=>{let{drag:De,dragPropagation:Fe,onDragStart:Je}=this.getProps();if(De&&!Fe&&(this.openDragLock&&this.openDragLock(),this.openDragLock=L0(De),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ur(et=>{let Ze=this.getAxisMotionValue(et).get()||0;if(vi.test(Ze)){let{projection:Xe}=this.visualElement;if(Xe&&Xe.layout){let Qe=Xe.layout.layoutBox[et];Qe&&(Ze=Vr(Qe)*(parseFloat(Ze)/100))}}this.originPoint[et]=Ze}),Je&&ae.postRender(()=>Je(ce,le)),Ta(this.visualElement,"transform");let{animationState:ze}=this.visualElement;ze&&ze.setActive("whileDrag",!0)},N=(ce,le)=>{let{dragPropagation:De,dragDirectionLock:Fe,onDirectionLock:Je,onDrag:ze}=this.getProps();if(!De&&!this.openDragLock)return;let{offset:et}=le;if(Fe&&this.currentDirection===null){this.currentDirection=wp(et),this.currentDirection!==null&&Je&&Je(this.currentDirection);return}this.updateAxis("x",le.point,et),this.updateAxis("y",le.point,et),this.visualElement.render(),ze&&ze(ce,le)},X=(ce,le)=>this.stop(ce,le),Q=()=>ur(ce=>this.getAnimationState(ce)==="paused"&&this.getAxisMotionValue(ce).animation?.play()),{dragSnapToOrigin:he}=this.getProps();this.panSession=new Bn(m,{onSessionStart:P,onStart:I,onMove:N,onSessionEnd:X,resumeAnimation:Q},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:he,contextWindow:k0(this.visualElement)})}stop(m,x){let C=this.isDragging;if(this.cancel(),!C)return;let{velocity:P}=x;this.startAnimation(P);let{onDragEnd:I}=this.getProps();I&&ae.postRender(()=>I(m,x))}cancel(){this.isDragging=!1;let{projection:m,animationState:x}=this.visualElement;m&&(m.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:C}=this.getProps();!C&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),x&&x.setActive("whileDrag",!1)}updateAxis(m,x,C){let{drag:P}=this.getProps();if(!C||!xn(m,P,this.currentDirection))return;let I=this.getAxisMotionValue(m),N=this.originPoint[m]+C[m];this.constraints&&this.constraints[m]&&(N=Nc(N,this.constraints[m],this.elastic[m])),I.set(N)}resolveConstraints(){let{dragConstraints:m,dragElastic:x}=this.getProps(),C=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,P=this.constraints;m&&Cn(m)?this.constraints||(this.constraints=this.resolveRefConstraints()):m&&C?this.constraints=Ap(C.layoutBox,m):this.constraints=!1,this.elastic=O0(x),P!==this.constraints&&C&&this.constraints&&!this.hasMutatedConstraints&&ur(I=>{this.constraints!==!1&&this.getAxisMotionValue(I)&&(this.constraints[I]=kn(C.layoutBox[I],this.constraints[I]))})}resolveRefConstraints(){let{dragConstraints:m,onMeasureDragConstraints:x}=this.getProps();if(!m||!Cn(m))return!1;let C=m.current,{projection:P}=this.visualElement;if(!P||!P.layout)return!1;let I=B0(C,P.root,this.visualElement.getTransformPagePoint()),N=Gc(P.layout.layoutBox,I);if(x){let X=x(C0(N));this.hasMutatedConstraints=!!X,X&&(N=Gl(X))}return N}startAnimation(m){let{drag:x,dragMomentum:C,dragElastic:P,dragTransition:I,dragSnapToOrigin:N,onDragTransitionEnd:X}=this.getProps(),Q=this.constraints||{},he=ur(ce=>{if(!xn(ce,x,this.currentDirection))return;let le=Q&&Q[ce]||{};N&&(le={min:0,max:0});let De=P?200:1e6,Fe=P?40:1e7,Je={type:"inertia",velocity:C?m[ce]:0,bounceStiffness:De,bounceDamping:Fe,timeConstant:750,restDelta:1,restSpeed:10,...I,...le};return this.startAxisValueAnimation(ce,Je)});return Promise.all(he).then(X)}startAxisValueAnimation(m,x){let C=this.getAxisMotionValue(m);return Ta(this.visualElement,m),C.start(Wa(m,C,0,x,this.visualElement,!1))}stopAnimation(){ur(m=>this.getAxisMotionValue(m).stop())}pauseAnimation(){ur(m=>this.getAxisMotionValue(m).animation?.pause())}getAnimationState(m){return this.getAxisMotionValue(m).animation?.state}getAxisMotionValue(m){let x=`_drag${m.toUpperCase()}`,C=this.visualElement.getProps();return C[x]||this.visualElement.getValue(m,(C.initial?C.initial[m]:void 0)||0)}snapToCursor(m){ur(x=>{let{drag:C}=this.getProps();if(!xn(x,C,this.currentDirection))return;let{projection:P}=this.visualElement,I=this.getAxisMotionValue(x);if(P&&P.layout){let{min:N,max:X}=P.layout.layoutBox[x];I.set(m[x]-dn(N,X,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:m,dragConstraints:x}=this.getProps(),{projection:C}=this.visualElement;if(!Cn(x)||!C||!this.constraints)return;this.stopAnimation();let P={x:0,y:0};ur(N=>{let X=this.getAxisMotionValue(N);if(X&&this.constraints!==!1){let Q=X.get();P[N]=JA({min:Q,max:Q},this.constraints[N])}});let{transformTemplate:I}=this.visualElement.getProps();this.visualElement.current.style.transform=I?I({},""):"none",C.root&&C.root.updateScroll(),C.updateLayout(),this.resolveConstraints(),ur(N=>{if(!xn(N,m,null))return;let X=this.getAxisMotionValue(N),{min:Q,max:he}=this.constraints[N];X.set(dn(Q,he,P[N]))})}addListeners(){if(!this.visualElement.current)return;N0.set(this.visualElement,this);let m=this.visualElement.current,x=Bc(m,"pointerdown",Q=>{let{drag:he,dragListener:ce=!0}=this.getProps();he&&ce&&this.start(Q)}),C=()=>{let{dragConstraints:Q}=this.getProps();Cn(Q)&&Q.current&&(this.constraints=this.resolveRefConstraints())},{projection:P}=this.visualElement,I=P.addEventListener("measure",C);P&&!P.layout&&(P.root&&P.root.updateScroll(),P.updateLayout()),ae.read(C);let N=Mc(window,"resize",()=>this.scalePositionWithinConstraints()),X=P.addEventListener("didUpdate",({delta:Q,hasLayoutChanged:he})=>{this.isDragging&&he&&(ur(ce=>{let le=this.getAxisMotionValue(ce);le&&(this.originPoint[ce]+=Q[ce].translate,le.set(le.get()+Q[ce].translate))}),this.visualElement.render())});return()=>{N(),x(),I(),X&&X()}}getProps(){let m=this.visualElement.getProps(),{drag:x=!1,dragDirectionLock:C=!1,dragPropagation:P=!1,dragConstraints:I=!1,dragElastic:N=vd,dragMomentum:X=!0}=m;return{...m,drag:x,dragDirectionLock:C,dragPropagation:P,dragConstraints:I,dragElastic:N,dragMomentum:X}}};function xn(m,x,C){return(x===!0||x===m)&&(C===null||C===m)}function wp(m,x=10){let C=null;return Math.abs(m.y)>x?C="y":Math.abs(m.x)>x&&(C="x"),C}var Td=class extends Ls{constructor(m){super(m),this.removeGroupControls=re,this.removeListeners=re,this.controls=new is(m)}mount(){let{dragControls:m}=this.node.getProps();m&&(this.removeGroupControls=m.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||re}unmount(){this.removeGroupControls(),this.removeListeners()}},Ed=m=>(x,C)=>{m&&ae.postRender(()=>m(x,C))},U0=class extends Ls{constructor(){super(...arguments),this.removePointerDownListener=re}onPointerDown(m){this.session=new Bn(m,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k0(this.node)})}createPanHandlers(){let{onPanSessionStart:m,onPanStart:x,onPan:C,onPanEnd:P}=this.node.getProps();return{onSessionStart:Ed(m),onStart:Ed(x),onMove:C,onEnd:(I,N)=>{delete this.session,P&&ae.postRender(()=>P(I,N))}}}mount(){this.removePointerDownListener=Bc(this.node.current,"pointerdown",m=>this.onPointerDown(m))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}},Ks={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sd(m,x){return x.max===x.min?0:m/(x.max-x.min)*100}var jl={correct:(m,x)=>{if(!x.target)return m;if(typeof m=="string")if(ot.test(m))m=parseFloat(m);else return m;let C=Sd(m,x.target.x),P=Sd(m,x.target.y);return`${C}% ${P}%`}},G0={correct:(m,{treeScale:x,projectionDelta:C})=>{let P=m,I=Tu.parse(m);if(I.length>5)return P;let N=Tu.createTransformer(m),X=typeof I[0]!="number"?1:0,Q=C.x.scale*x.x,he=C.y.scale*x.y;I[0+X]/=Q,I[1+X]/=he;let ce=dn(Q,he,.5);return typeof I[2+X]=="number"&&(I[2+X]/=ce),typeof I[3+X]=="number"&&(I[3+X]/=ce),N(I)}},wv=class extends t.Component{componentDidMount(){let{visualElement:m,layoutGroup:x,switchLayoutGroup:C,layoutId:P}=this.props,{projection:I}=m;_a(Dv),I&&(x.group&&x.group.add(I),C&&C.register&&P&&C.register(I),I.root.didUpdate(),I.addEventListener("animationComplete",()=>{this.safeToRemove()}),I.setOptions({...I.options,onExitComplete:()=>this.safeToRemove()})),Ks.hasEverUpdated=!0}getSnapshotBeforeUpdate(m){let{layoutDependency:x,visualElement:C,drag:P,isPresent:I}=this.props,{projection:N}=C;return N&&(N.isPresent=I,P||m.layoutDependency!==x||x===void 0||m.isPresent!==I?N.willUpdate():this.safeToRemove(),m.isPresent!==I&&(I?N.promote():N.relegate()||ae.postRender(()=>{let X=N.getStack();(!X||!X.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){let{projection:m}=this.props.visualElement;m&&(m.root.didUpdate(),Ni.postRender(()=>{!m.currentAnimation&&m.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:m,layoutGroup:x,switchLayoutGroup:C}=this.props,{projection:P}=m;P&&(P.scheduleCheckAfterUnmount(),x&&x.group&&x.group.remove(P),C&&C.deregister&&C.deregister(P))}safeToRemove(){let{safeToRemove:m}=this.props;m&&m()}render(){return null}};function H0(m){let[x,C]=L(),P=t.useContext(T);return e.jsx(wv,{...m,layoutGroup:P,switchLayoutGroup:t.useContext(Di),isPresent:x,safeToRemove:C})}var Dv={borderRadius:{...jl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jl,borderTopRightRadius:jl,borderBottomLeftRadius:jl,borderBottomRightRadius:jl,boxShadow:G0};function Rv(m,x,C){let P=Y(m)?m:wl(m);return P.start(Wa("",P,x,C)),P.animation}function Pv(m){return m instanceof SVGElement&&m.tagName!=="svg"}var Mv=(m,x)=>m.depth-x.depth,z0=class{constructor(){this.children=[],this.isDirty=!1}add(m){Jh(this.children,m),this.isDirty=!0}remove(m){_u(this.children,m),this.isDirty=!0}forEach(m){this.isDirty&&this.children.sort(Mv),this.isDirty=!1,this.children.forEach(m)}};function Bv(m,x){let C=ts.now(),P=({timestamp:I})=>{let N=I-C;N>=x&&(fe(P),m(N-x))};return ae.setup(P,!0),()=>fe(P)}var kv=["TopLeft","TopRight","BottomLeft","BottomRight"],Ov=kv.length,V0=m=>typeof m=="string"?parseFloat(m):m,j0=m=>typeof m=="number"||ot.test(m);function X0(m,x,C,P,I,N){I?(m.opacity=dn(0,C.opacity??1,Fv(P)),m.opacityExit=dn(x.opacity??1,0,Iv(P))):N&&(m.opacity=dn(x.opacity??1,C.opacity??1,P));for(let X=0;X<Ov;X++){let Q=`border${kv[X]}Radius`,he=Y0(x,Q),ce=Y0(C,Q);he===void 0&&ce===void 0||(he||(he=0),ce||(ce=0),he===0||ce===0||j0(he)===j0(ce)?(m[Q]=Math.max(dn(V0(he),V0(ce),P),0),(vi.test(ce)||vi.test(he))&&(m[Q]+="%")):m[Q]=ce)}(x.rotate||C.rotate)&&(m.rotate=dn(x.rotate||0,C.rotate||0,P))}function Y0(m,x){return m[x]!==void 0?m[x]:m.borderRadius}var Fv=q0(0,.5,Eu),Iv=q0(.5,.95,re);function q0(m,x,C){return P=>P<m?0:P>x?1:C(Ml(m,x,P))}function W0(m,x){m.min=x.min,m.max=x.max}function Qs(m,x){W0(m.x,x.x),W0(m.y,x.y)}function $0(m,x){m.translate=x.translate,m.scale=x.scale,m.originPoint=x.originPoint,m.origin=x.origin}function Xl(m,x,C,P,I){return m-=x,m=Mu(m,1/C,P),I!==void 0&&(m=Mu(m,1/I,P)),m}function Lv(m,x=0,C=1,P=.5,I,N=m,X=m){if(vi.test(x)&&(x=parseFloat(x),x=dn(X.min,X.max,x/100)-X.min),typeof x!="number")return;let Q=dn(N.min,N.max,P);m===N&&(Q-=x),m.min=Xl(m.min,x,C,Q,I),m.max=Xl(m.max,x,C,Q,I)}function Ad(m,x,[C,P,I],N,X){Lv(m,x[C],x[P],x[I],x.scale,N,X)}var Dp=["x","scaleX","originX"],Nv=["y","scaleY","originY"];function Rp(m,x,C,P){Ad(m.x,x,Dp,C?C.x:void 0,P?P.x:void 0),Ad(m.y,x,Nv,C?C.y:void 0,P?P.y:void 0)}function Uv(m){return m.translate===0&&m.scale===1}function K0(m){return Uv(m.x)&&Uv(m.y)}function Q0(m,x){return m.min===x.min&&m.max===x.max}function Gv(m,x){return Q0(m.x,x.x)&&Q0(m.y,x.y)}function Z0(m,x){return Math.round(m.min)===Math.round(x.min)&&Math.round(m.max)===Math.round(x.max)}function J0(m,x){return Z0(m.x,x.x)&&Z0(m.y,x.y)}function Pp(m){return Vr(m.x)/Vr(m.y)}function eb(m,x){return m.translate===x.translate&&m.scale===x.scale&&m.originPoint===x.originPoint}var Hv=class{constructor(){this.members=[]}add(m){Jh(this.members,m),m.scheduleRender()}remove(m){if(_u(this.members,m),m===this.prevLead&&(this.prevLead=void 0),m===this.lead){let x=this.members[this.members.length-1];x&&this.promote(x)}}relegate(m){let x=this.members.findIndex(P=>m===P);if(x===0)return!1;let C;for(let P=x;P>=0;P--){let I=this.members[P];if(I.isPresent!==!1){C=I;break}}return C?(this.promote(C),!0):!1}promote(m,x){let C=this.lead;if(m!==C&&(this.prevLead=C,this.lead=m,m.show(),C)){C.instance&&C.scheduleRender(),m.scheduleRender(),m.resumeFrom=C,x&&(m.resumeFrom.preserveOpacity=!0),C.snapshot&&(m.snapshot=C.snapshot,m.snapshot.latestValues=C.animationValues||C.latestValues),m.root&&m.root.isUpdating&&(m.isLayoutDirty=!0);let{crossfade:P}=m.options;P===!1&&C.hide()}}exitAnimationComplete(){this.members.forEach(m=>{let{options:x,resumingFrom:C}=m;x.onExitComplete&&x.onExitComplete(),C&&C.options.onExitComplete&&C.options.onExitComplete()})}scheduleRender(){this.members.forEach(m=>{m.instance&&m.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function tb(m,x,C){let P="",I=m.x.translate/x.x,N=m.y.translate/x.y,X=C?.z||0;if((I||N||X)&&(P=`translate3d(${I}px, ${N}px, ${X}px) `),(x.x!==1||x.y!==1)&&(P+=`scale(${1/x.x}, ${1/x.y}) `),C){let{transformPerspective:ce,rotate:le,rotateX:De,rotateY:Fe,skewX:Je,skewY:ze}=C;ce&&(P=`perspective(${ce}px) ${P}`),le&&(P+=`rotate(${le}deg) `),De&&(P+=`rotateX(${De}deg) `),Fe&&(P+=`rotateY(${Fe}deg) `),Je&&(P+=`skewX(${Je}deg) `),ze&&(P+=`skewY(${ze}deg) `)}let Q=m.x.scale*x.x,he=m.y.scale*x.y;return(Q!==1||he!==1)&&(P+=`scale(${Q}, ${he})`),P||"none"}var Mp=["","X","Y","Z"],zv={visibility:"hidden"},eC=1e3,ib=0;function Bp(m,x,C,P){let{latestValues:I}=x;I[m]&&(C[m]=I[m],x.setStaticValue(m,0),P&&(P[m]=0))}function nb(m){if(m.hasCheckedOptimisedAppear=!0,m.root===m)return;let{visualElement:x}=m.options;if(!x)return;let C=Kf(x);if(window.MotionHasOptimisedAnimation(C,"transform")){let{layout:I,layoutId:N}=m.options;window.MotionCancelOptimisedAnimation(C,"transform",ae,!(I||N))}let{parent:P}=m;P&&!P.hasCheckedOptimisedAppear&&nb(P)}function kp({attachResizeListener:m,defaultParent:x,measureScroll:C,checkIsScrollRoot:P,resetTransform:I}){return class{constructor(N={},X=x?.()){this.id=ib++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tC),this.nodes.forEach(Yv),this.nodes.forEach(Cd),this.nodes.forEach(iC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=N,this.root=X?X.root||X:this,this.path=X?[...X.path,X]:[],this.parent=X,this.depth=X?X.depth+1:0;for(let Q=0;Q<this.path.length;Q++)this.path[Q].shouldResetTransform=!0;this.root===this&&(this.nodes=new z0)}addEventListener(N,X){return this.eventHandlers.has(N)||this.eventHandlers.set(N,new Wf),this.eventHandlers.get(N).add(X)}notifyListeners(N,...X){let Q=this.eventHandlers.get(N);Q&&Q.notify(...X)}hasListeners(N){return this.eventHandlers.has(N)}mount(N){if(this.instance)return;this.isSVG=Pv(N),this.instance=N;let{layoutId:X,layout:Q,visualElement:he}=this.options;if(he&&!he.current&&he.mount(N),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(Q||X)&&(this.isLayoutDirty=!0),m){let ce,le=()=>this.root.updateBlockedByResize=!1;m(N,()=>{this.root.updateBlockedByResize=!0,ce&&ce(),ce=Bv(le,250),Ks.hasAnimatedSinceResize&&(Ks.hasAnimatedSinceResize=!1,this.nodes.forEach(sb))})}X&&this.root.registerSharedNode(X,this),this.options.animate!==!1&&he&&(X||Q)&&this.addEventListener("didUpdate",({delta:ce,hasLayoutChanged:le,hasRelativeLayoutChanged:De,layout:Fe})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let Je=this.options.transition||he.getDefaultTransition()||$v,{onLayoutAnimationStart:ze,onLayoutAnimationComplete:et}=he.getProps(),Ze=!this.targetLayout||!J0(this.targetLayout,Fe),Xe=!le&&De;if(this.options.layoutRoot||this.resumeFrom||Xe||le&&(Ze||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(ce,Xe);let Qe={...td(Je,"layout"),onPlay:ze,onComplete:et};(he.shouldReduceMotion||this.options.layoutRoot)&&(Qe.delay=0,Qe.type=!1),this.startAnimation(Qe)}else le||sb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Fe})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let N=this.getStack();N&&N.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fe(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qv),this.animationId++)}getTransformTemplate(){let{visualElement:N}=this.options;return N&&N.getProps().transformTemplate}willUpdate(N=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let ce=0;ce<this.path.length;ce++){let le=this.path[ce];le.shouldResetTransform=!0,le.updateScroll("snapshot"),le.options.layoutRoot&&le.willUpdate(!1)}let{layoutId:X,layout:Q}=this.options;if(X===void 0&&!Q)return;let he=this.getTransformTemplate();this.prevTransformTemplateValue=he?he(this.latestValues,""):void 0,this.updateSnapshot(),N&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hc);return}this.isUpdating||this.nodes.forEach(rb),this.isUpdating=!1,this.nodes.forEach(Op),this.nodes.forEach(Vv),this.nodes.forEach(jv),this.clearAllSnapshots();let N=ts.now();Te.delta=F(0,1e3/60,N-Te.timestamp),Te.timestamp=N,Te.isProcessing=!0,$.update.process(Te),$.preRender.process(Te),$.render.process(Te),Te.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ni.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Xv),this.sharedNodes.forEach(ab)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vr(this.snapshot.measuredBox.x)&&!Vr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let Q=0;Q<this.path.length;Q++)this.path[Q].updateScroll();let N=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:X}=this.options;X&&X.notify("LayoutMeasure",this.layout.layoutBox,N?N.layoutBox:void 0)}updateScroll(N="measure"){let X=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===N&&(X=!1),X&&this.instance){let Q=P(this.instance);this.scroll={animationId:this.root.animationId,phase:N,isRoot:Q,offset:C(this.instance),wasRoot:this.scroll?this.scroll.isRoot:Q}}}resetTransform(){if(!I)return;let N=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,X=this.projectionDelta&&!K0(this.projectionDelta),Q=this.getTransformTemplate(),he=Q?Q(this.latestValues,""):void 0,ce=he!==this.prevTransformTemplateValue;N&&this.instance&&(X||jo(this.latestValues)||ce)&&(I(this.instance,he),this.shouldResetTransform=!1,this.scheduleRender())}measure(N=!0){let X=this.measurePageBox(),Q=this.removeElementScroll(X);return N&&(Q=this.removeTransform(Q)),Kv(Q),{animationId:this.root.animationId,measuredBox:X,layoutBox:Q,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:N}=this.options;if(!N)return wn();let X=N.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Qv))){let{scroll:Q}=this.root;Q&&(Bu(X.x,Q.offset.x),Bu(X.y,Q.offset.y))}return X}removeElementScroll(N){let X=wn();if(Qs(X,N),this.scroll?.wasRoot)return X;for(let Q=0;Q<this.path.length;Q++){let he=this.path[Q],{scroll:ce,options:le}=he;he!==this.root&&ce&&le.layoutScroll&&(ce.wasRoot&&Qs(X,N),Bu(X.x,ce.offset.x),Bu(X.y,ce.offset.y))}return X}applyTransform(N,X=!1){let Q=wn();Qs(Q,N);for(let he=0;he<this.path.length;he++){let ce=this.path[he];!X&&ce.options.layoutScroll&&ce.scroll&&ce!==ce.root&&Mr(Q,{x:-ce.scroll.offset.x,y:-ce.scroll.offset.y}),jo(ce.latestValues)&&Mr(Q,ce.latestValues)}return jo(this.latestValues)&&Mr(Q,this.latestValues),Q}removeTransform(N){let X=wn();Qs(X,N);for(let Q=0;Q<this.path.length;Q++){let he=this.path[Q];if(!he.instance||!jo(he.latestValues))continue;zl(he.latestValues)&&he.updateSnapshot();let ce=wn(),le=he.measurePageBox();Qs(ce,le),Rp(X,he.latestValues,he.snapshot?he.snapshot.layoutBox:void 0,ce)}return jo(this.latestValues)&&Rp(X,this.latestValues),X}setTargetDelta(N){this.targetDelta=N,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(N){this.options={...this.options,...N,crossfade:N.crossfade!==void 0?N.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Te.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(N=!1){let X=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=X.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=X.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=X.isSharedProjectionDirty);let Q=!!this.resumingFrom||this!==X;if(!(N||Q&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:he,layoutId:ce}=this.options;if(!(!this.layout||!(he||ce))){if(this.resolvedRelativeTargetAt=Te.timestamp,!this.targetDelta&&!this.relativeTarget){let le=this.getClosestProjectingParent();le&&le.layout&&this.animationProgress!==1?(this.relativeParent=le,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Sa(this.relativeTargetOrigin,this.layout.layoutBox,le.layout.layoutBox),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_p(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qs(this.target,this.layout.layoutBox),Vl(this.target,this.targetDelta)):Qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;let le=this.getClosestProjectingParent();le&&!!le.resumingFrom==!!this.resumingFrom&&!le.options.layoutScroll&&le.target&&this.animationProgress!==1?(this.relativeParent=le,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Sa(this.relativeTargetOrigin,this.target,le.target),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zl(this.parent.latestValues)||Tp(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){let N=this.getLead(),X=!!this.resumingFrom||this!==N,Q=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(Q=!1),X&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(Q=!1),this.resolvedRelativeTargetAt===Te.timestamp&&(Q=!1),Q)return;let{layout:he,layoutId:ce}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(he||ce))return;Qs(this.layoutCorrected,this.layout.layoutBox);let le=this.treeScale.x,De=this.treeScale.y;M0(this.layoutCorrected,this.treeScale,this.path,X),N.layout&&!N.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(N.target=N.layout.layoutBox,N.targetWithTransforms=wn());let{target:Fe}=N;if(!Fe){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($0(this.prevProjectionDelta.x,this.projectionDelta.x),$0(this.prevProjectionDelta.y,this.projectionDelta.y)),Pu(this.projectionDelta,this.layoutCorrected,Fe,this.latestValues),(this.treeScale.x!==le||this.treeScale.y!==De||!eb(this.projectionDelta.x,this.prevProjectionDelta.x)||!eb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Fe))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(N=!0){if(this.options.visualElement?.scheduleRender(),N){let X=this.getStack();X&&X.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ns(),this.projectionDelta=Ns(),this.projectionDeltaWithTransform=Ns()}setAnimationOrigin(N,X=!1){let Q=this.snapshot,he=Q?Q.latestValues:{},ce={...this.latestValues},le=Ns();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!X;let De=wn(),Fe=Q?Q.source:void 0,Je=this.layout?this.layout.source:void 0,ze=Fe!==Je,et=this.getStack(),Ze=!et||et.members.length<=1,Xe=!!(ze&&!Ze&&this.options.crossfade===!0&&!this.path.some(Wv));this.animationProgress=0;let Qe;this.mixTargetDelta=Ot=>{let Ti=Ot/1e3;ob(le.x,N.x,Ti),ob(le.y,N.y,Ti),this.setTargetDelta(le),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sa(De,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ub(this.relativeTarget,this.relativeTargetOrigin,De,Ti),Qe&&Gv(this.relativeTarget,Qe)&&(this.isProjectionDirty=!1),Qe||(Qe=wn()),Qs(Qe,this.relativeTarget)),ze&&(this.animationValues=ce,X0(ce,he,this.latestValues,Ti,Xe,Ze)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Ti},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(N){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(fe(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ae.update(()=>{Ks.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wl(0)),this.currentAnimation=Rv(this.motionValue,[0,1e3],{...N,isSync:!0,onUpdate:X=>{this.mixTargetDelta(X),N.onUpdate&&N.onUpdate(X)},onStop:()=>{},onComplete:()=>{N.onComplete&&N.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let N=this.getStack();N&&N.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eC),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){let N=this.getLead(),{targetWithTransforms:X,target:Q,layout:he,latestValues:ce}=N;if(!(!X||!Q||!he)){if(this!==N&&this.layout&&he&&wd(this.options.animationType,this.layout.layoutBox,he.layoutBox)){Q=this.target||wn();let le=Vr(this.layout.layoutBox.x);Q.x.min=N.target.x.min,Q.x.max=Q.x.min+le;let De=Vr(this.layout.layoutBox.y);Q.y.min=N.target.y.min,Q.y.max=Q.y.min+De}Qs(X,Q),Mr(X,ce),Pu(this.projectionDeltaWithTransform,this.layoutCorrected,X,ce)}}registerSharedNode(N,X){this.sharedNodes.has(N)||this.sharedNodes.set(N,new Hv),this.sharedNodes.get(N).add(X);let Q=X.options.initialPromotionConfig;X.promote({transition:Q?Q.transition:void 0,preserveFollowOpacity:Q&&Q.shouldPreserveFollowOpacity?Q.shouldPreserveFollowOpacity(X):void 0})}isLead(){let N=this.getStack();return N?N.lead===this:!0}getLead(){let{layoutId:N}=this.options;return N?this.getStack()?.lead||this:this}getPrevLead(){let{layoutId:N}=this.options;return N?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:N}=this.options;if(N)return this.root.sharedNodes.get(N)}promote({needsReset:N,transition:X,preserveFollowOpacity:Q}={}){let he=this.getStack();he&&he.promote(this,Q),N&&(this.projectionDelta=void 0,this.needsReset=!0),X&&this.setOptions({transition:X})}relegate(){let N=this.getStack();return N?N.relegate(this):!1}resetSkewAndRotation(){let{visualElement:N}=this.options;if(!N)return;let X=!1,{latestValues:Q}=N;if((Q.z||Q.rotate||Q.rotateX||Q.rotateY||Q.rotateZ||Q.skewX||Q.skewY)&&(X=!0),!X)return;let he={};Q.z&&Bp("z",N,he,this.animationValues);for(let ce=0;ce<Mp.length;ce++)Bp(`rotate${Mp[ce]}`,N,he,this.animationValues),Bp(`skew${Mp[ce]}`,N,he,this.animationValues);N.render();for(let ce in he)N.setStaticValue(ce,he[ce]),this.animationValues&&(this.animationValues[ce]=he[ce]);N.scheduleRender()}getProjectionStyles(N){if(!this.instance||this.isSVG)return;if(!this.isVisible)return zv;let X={visibility:""},Q=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,X.opacity="",X.pointerEvents=Yf(N?.pointerEvents)||"",X.transform=Q?Q(this.latestValues,""):"none",X;let he=this.getLead();if(!this.projectionDelta||!this.layout||!he.target){let Fe={};return this.options.layoutId&&(Fe.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Fe.pointerEvents=Yf(N?.pointerEvents)||""),this.hasProjected&&!jo(this.latestValues)&&(Fe.transform=Q?Q({},""):"none",this.hasProjected=!1),Fe}let ce=he.animationValues||he.latestValues;this.applyTransformsToTarget(),X.transform=tb(this.projectionDeltaWithTransform,this.treeScale,ce),Q&&(X.transform=Q(ce,X.transform));let{x:le,y:De}=this.projectionDelta;X.transformOrigin=`${le.origin*100}% ${De.origin*100}% 0`,he.animationValues?X.opacity=he===this?ce.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:ce.opacityExit:X.opacity=he===this?ce.opacity!==void 0?ce.opacity:"":ce.opacityExit!==void 0?ce.opacityExit:0;for(let Fe in rn){if(ce[Fe]===void 0)continue;let{correct:Je,applyTo:ze,isCSSVariable:et}=rn[Fe],Ze=X.transform==="none"?ce[Fe]:Je(ce[Fe],he);if(ze){let Xe=ze.length;for(let Qe=0;Qe<Xe;Qe++)X[ze[Qe]]=Ze}else et?this.options.visualElement.renderState.vars[Fe]=Ze:X[Fe]=Ze}return this.options.layoutId&&(X.pointerEvents=he===this?Yf(N?.pointerEvents)||"":"none"),X}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(N=>N.currentAnimation?.stop(!1)),this.root.nodes.forEach(Hc),this.root.sharedNodes.clear()}}}function Vv(m){m.updateLayout()}function jv(m){let x=m.resumeFrom?.snapshot||m.snapshot;if(m.isLead()&&m.layout&&x&&m.hasListeners("didUpdate")){let{layoutBox:C,measuredBox:P}=m.layout,{animationType:I}=m.options,N=x.source!==m.layout.source;I==="size"?ur(le=>{let De=N?x.measuredBox[le]:x.layoutBox[le],Fe=Vr(De);De.min=C[le].min,De.max=De.min+Fe}):wd(I,x.layoutBox,C)&&ur(le=>{let De=N?x.measuredBox[le]:x.layoutBox[le],Fe=Vr(C[le]);De.max=De.min+Fe,m.relativeTarget&&!m.currentAnimation&&(m.isProjectionDirty=!0,m.relativeTarget[le].max=m.relativeTarget[le].min+Fe)});let X=Ns();Pu(X,C,x.layoutBox);let Q=Ns();N?Pu(Q,m.applyTransform(P,!0),x.measuredBox):Pu(Q,C,x.layoutBox);let he=!K0(X),ce=!1;if(!m.resumeFrom){let le=m.getClosestProjectingParent();if(le&&!le.resumeFrom){let{snapshot:De,layout:Fe}=le;if(De&&Fe){let Je=wn();Sa(Je,x.layoutBox,De.layoutBox);let ze=wn();Sa(ze,C,Fe.layoutBox),J0(Je,ze)||(ce=!0),le.options.layoutRoot&&(m.relativeTarget=ze,m.relativeTargetOrigin=Je,m.relativeParent=le)}}}m.notifyListeners("didUpdate",{layout:C,snapshot:x,delta:Q,layoutDelta:X,hasLayoutChanged:he,hasRelativeLayoutChanged:ce})}else if(m.isLead()){let{onExitComplete:C}=m.options;C&&C()}m.options.transition=void 0}function tC(m){m.parent&&(m.isProjecting()||(m.isProjectionDirty=m.parent.isProjectionDirty),m.isSharedProjectionDirty||(m.isSharedProjectionDirty=!!(m.isProjectionDirty||m.parent.isProjectionDirty||m.parent.isSharedProjectionDirty)),m.isTransformDirty||(m.isTransformDirty=m.parent.isTransformDirty))}function iC(m){m.isProjectionDirty=m.isSharedProjectionDirty=m.isTransformDirty=!1}function Xv(m){m.clearSnapshot()}function Hc(m){m.clearMeasurements()}function rb(m){m.isLayoutDirty=!1}function Op(m){let{visualElement:x}=m.options;x&&x.getProps().onBeforeLayoutMeasure&&x.notify("BeforeLayoutMeasure"),m.resetTransform()}function sb(m){m.finishAnimation(),m.targetDelta=m.relativeTarget=m.target=void 0,m.isProjectionDirty=!0}function Yv(m){m.resolveTargetDelta()}function Cd(m){m.calcProjection()}function qv(m){m.resetSkewAndRotation()}function ab(m){m.removeLeadSnapshot()}function ob(m,x,C){m.translate=dn(x.translate,0,C),m.scale=dn(x.scale,1,C),m.origin=x.origin,m.originPoint=x.originPoint}function Fp(m,x,C,P){m.min=dn(x.min,C.min,P),m.max=dn(x.max,C.max,P)}function ub(m,x,C,P){Fp(m.x,x.x,C.x,P),Fp(m.y,x.y,C.y,P)}function Wv(m){return m.animationValues&&m.animationValues.opacityExit!==void 0}var $v={duration:.45,ease:[.4,0,.1,1]},Ou=m=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(m),lb=Ou("applewebkit/")&&!Ou("chrome/")?Math.round:re;function cb(m){m.min=lb(m.min),m.max=lb(m.max)}function Kv(m){cb(m.x),cb(m.y)}function wd(m,x,C){return m==="position"||m==="preserve-aspect"&&!kc(Pp(x),Pp(C),.2)}function Qv(m){return m!==m.root&&m.scroll?.wasRoot}var hb=kp({attachResizeListener:(m,x)=>Mc(m,"resize",x),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ip={current:void 0},db=kp({measureScroll:m=>({x:m.scrollLeft,y:m.scrollTop}),defaultParent:()=>{if(!Ip.current){let m=new hb({});m.mount(window),m.setOptions({layoutScroll:!0}),Ip.current=m}return Ip.current},resetTransform:(m,x)=>{m.style.transform=x!==void 0?x:"none"},checkIsScrollRoot:m=>window.getComputedStyle(m).position==="fixed"}),nC={pan:{Feature:U0},drag:{Feature:Td,ProjectionNode:db,MeasureLayout:H0}};function fb(m,x,C){if(m instanceof EventTarget)return[m];if(typeof m=="string"){let I=document.querySelectorAll(m);return I?Array.from(I):[]}return Array.from(m)}function Hn(m,x){let C=fb(m),P=new AbortController,I={passive:!0,...x,signal:P.signal};return[C,I,()=>P.abort()]}function _r(m){return!(m.pointerType==="touch"||Cp())}function Zv(m,x,C={}){let[P,I,N]=Hn(m,C),X=Q=>{if(!_r(Q))return;let{target:he}=Q,ce=x(he,Q);if(typeof ce!="function"||!he)return;let le=De=>{_r(De)&&(ce(De),he.removeEventListener("pointerleave",le))};he.addEventListener("pointerleave",le,I)};return P.forEach(Q=>{Q.addEventListener("pointerenter",X,I)}),N}function pb(m,x,C){let{props:P}=m;m.animationState&&P.whileHover&&m.animationState.setActive("whileHover",C==="Start");let I="onHover"+C,N=P[I];N&&ae.postRender(()=>N(x,Ul(x)))}var Jv=class extends Ls{mount(){let{current:m}=this.node;m&&(this.unmount=Zv(m,(x,C)=>(pb(this.node,C,"Start"),P=>pb(this.node,P,"End"))))}unmount(){}},e2=class extends Ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let m=!1;try{m=this.node.current.matches(":focus-visible")}catch{m=!0}!m||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sd(Mc(this.node.current,"focus",()=>this.onFocus()),Mc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}},zc=(m,x)=>x?m===x?!0:zc(m,x.parentElement):!1,t2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Lp(m){return t2.has(m.tagName)||m.tabIndex!==-1}var Dd=new WeakSet;function i2(m){return x=>{x.key==="Enter"&&m(x)}}function Vc(m,x){m.dispatchEvent(new PointerEvent("pointer"+x,{isPrimary:!0,bubbles:!0}))}var mb=(m,x)=>{let C=m.currentTarget;if(!C)return;let P=i2(()=>{if(Dd.has(C))return;Vc(C,"down");let I=i2(()=>{Vc(C,"up")}),N=()=>Vc(C,"cancel");C.addEventListener("keyup",I,x),C.addEventListener("blur",N,x)});C.addEventListener("keydown",P,x),C.addEventListener("blur",()=>C.removeEventListener("keydown",P),x)};function gb(m){return Vo(m)&&!Cp()}function n2(m,x,C={}){let[P,I,N]=Hn(m,C),X=Q=>{let he=Q.currentTarget;if(!gb(Q))return;Dd.add(he);let ce=x(he,Q),le=(Je,ze)=>{window.removeEventListener("pointerup",De),window.removeEventListener("pointercancel",Fe),Dd.has(he)&&Dd.delete(he),gb(Je)&&typeof ce=="function"&&ce(Je,{success:ze})},De=Je=>{le(Je,he===window||he===document||C.useGlobalTarget||zc(he,Je.target))},Fe=Je=>{le(Je,!1)};window.addEventListener("pointerup",De,I),window.addEventListener("pointercancel",Fe,I)};return P.forEach(Q=>{(C.useGlobalTarget?window:Q).addEventListener("pointerdown",X,I),Q instanceof HTMLElement&&(Q.addEventListener("focus",he=>mb(he,I)),!Lp(Q)&&!Q.hasAttribute("tabindex")&&(Q.tabIndex=0))}),N}function bb(m,x,C){let{props:P}=m;if(m.current instanceof HTMLButtonElement&&m.current.disabled)return;m.animationState&&P.whileTap&&m.animationState.setActive("whileTap",C==="Start");let I="onTap"+(C==="End"?"":C),N=P[I];N&&ae.postRender(()=>N(x,Ul(x)))}var yb=class extends Ls{mount(){let{current:m}=this.node;m&&(this.unmount=n2(m,(x,C)=>(bb(this.node,C,"Start"),(P,{success:I})=>bb(this.node,P,I?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}},Rd=new WeakMap,Pd=new WeakMap,r2=m=>{let x=Rd.get(m.target);x&&x(m)},xb=m=>{m.forEach(r2)};function Np({root:m,...x}){let C=m||document;Pd.has(C)||Pd.set(C,{});let P=Pd.get(C),I=JSON.stringify(x);return P[I]||(P[I]=new IntersectionObserver(xb,{root:m,...x})),P[I]}function _b(m,x,C){let P=Np(x);return Rd.set(m,C),P.observe(m),()=>{Rd.delete(m),P.unobserve(m)}}var s2={some:0,all:1},vb=class extends Ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:m={}}=this.node.getProps(),{root:x,margin:C,amount:P="some",once:I}=m,N={root:x?x.current:void 0,rootMargin:C,threshold:typeof P=="number"?P:s2[P]},X=Q=>{let{isIntersecting:he}=Q;if(this.isInView===he||(this.isInView=he,I&&!he&&this.hasEnteredView))return;he&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",he);let{onViewportEnter:ce,onViewportLeave:le}=this.node.getProps(),De=he?ce:le;De&&De(Q)};return _b(this.node.current,N,X)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;let{props:m,prevProps:x}=this.node;["amount","margin","root"].some(a2(m,x))&&this.startObserver()}unmount(){}};function a2({viewport:m={}},{viewport:x={}}={}){return C=>m[C]!==x[C]}var qo={inView:{Feature:vb},tap:{Feature:yb},focus:{Feature:e2},hover:{Feature:Jv}},Tb={layout:{ProjectionNode:db,MeasureLayout:H0}},Eb={current:null},Sb={current:!1};function Wo(){if(Sb.current=!0,!!D)if(window.matchMedia){let m=window.matchMedia("(prefers-reduced-motion)"),x=()=>Eb.current=m.matches;m.addListener(x),x()}else Eb.current=!1}var Ab=new WeakMap;function o2(m,x,C){for(let P in x){let I=x[P],N=C[P];if(Y(I))m.addValue(P,I);else if(Y(N))m.addValue(P,wl(I,{owner:m}));else if(N!==I)if(m.hasValue(P)){let X=m.getValue(P);X.liveStyle===!0?X.jump(I):X.hasAnimated||X.set(I)}else{let X=m.getStaticValue(P);m.addValue(P,wl(X!==void 0?X:I,{owner:m}))}}for(let P in C)x[P]===void 0&&m.removeValue(P);return x}var Md=m=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(m),jc=m=>/^0[^.\s]+$/u.test(m),pn={test:m=>m==="auto",parse:m=>m},u2=m=>x=>x.test(m),l2=[Z,ot,vi,zt,zr,Un,pn],Cb=m=>l2.find(u2(m)),Bd=[...l2,br,Tu],Fu=m=>Bd.find(u2(m)),c2=new Set(["brightness","contrast","saturate","opacity"]);function h2(m){let[x,C]=m.slice(0,-1).split("(");if(x==="drop-shadow")return m;let[P]=C.match(vc)||[];if(!P)return m;let I=C.replace(P,""),N=c2.has(x)?1:0;return P!==C&&(N*=100),x+"("+N+I+")"}var kd=/\b([a-z-]*)\(.*?\)/gu,Zs={...Tu,getAnimatableNone:m=>{let x=m.match(kd);return x?x.map(h2).join(" "):m}},d2={...yn,color:br,backgroundColor:br,outlineColor:br,fill:br,stroke:br,borderColor:br,borderTopColor:br,borderRightColor:br,borderBottomColor:br,borderLeftColor:br,filter:Zs,WebkitFilter:Zs},Up=m=>d2[m];function wb(m,x){let C=Up(m);return C!==Zs&&(C=Tu),C.getAnimatableNone?C.getAnimatableNone(x):void 0}var Gp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Db=class{scrapeMotionValuesFromProps(m,x,C){return{}}constructor({parent:m,props:x,presenceContext:C,reducedMotionConfig:P,blockInitialAnimation:I,visualState:N},X={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let De=ts.now();this.renderScheduledAt<De&&(this.renderScheduledAt=De,ae.render(this.render,!1,!0))};let{latestValues:Q,renderState:he}=N;this.latestValues=Q,this.baseTarget={...Q},this.initialValues=x.initial?{...Q}:{},this.renderState=he,this.parent=m,this.props=x,this.presenceContext=C,this.depth=m?m.depth+1:0,this.reducedMotionConfig=P,this.options=X,this.blockInitialAnimation=!!I,this.isControllingVariants=Rt(x),this.isVariantNode=Qt(x),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(m&&m.current);let{willChange:ce,...le}=this.scrapeMotionValuesFromProps(x,{},this);for(let De in le){let Fe=le[De];Q[De]!==void 0&&Y(Fe)&&Fe.set(Q[De],!1)}}mount(m){this.current=m,Ab.set(m,this),this.projection&&!this.projection.instance&&this.projection.mount(m),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((x,C)=>this.bindToMotionValue(C,x)),Sb.current||Wo(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Eb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fe(this.notifyUpdate),fe(this.render),this.valueSubscriptions.forEach(m=>m()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(let m in this.events)this.events[m].clear();for(let m in this.features){let x=this.features[m];x&&(x.unmount(),x.isMounted=!1)}this.current=null}bindToMotionValue(m,x){this.valueSubscriptions.has(m)&&this.valueSubscriptions.get(m)();let C=Hr.has(m);C&&this.onBindTransform&&this.onBindTransform();let P=x.on("change",X=>{this.latestValues[m]=X,this.props.onUpdate&&ae.preRender(this.notifyUpdate),C&&this.projection&&(this.projection.isTransformDirty=!0)}),I=x.on("renderRequest",this.scheduleRender),N;window.MotionCheckAppearSync&&(N=window.MotionCheckAppearSync(this,m,x)),this.valueSubscriptions.set(m,()=>{P(),I(),N&&N(),x.owner&&x.stop()})}sortNodePosition(m){return!this.current||!this.sortInstanceNodePosition||this.type!==m.type?0:this.sortInstanceNodePosition(this.current,m.current)}updateFeatures(){let m="animation";for(m in _e){let x=_e[m];if(!x)continue;let{isEnabled:C,Feature:P}=x;if(!this.features[m]&&P&&C(this.props)&&(this.features[m]=new P(this)),this.features[m]){let I=this.features[m];I.isMounted?I.update():(I.mount(),I.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(m){return this.latestValues[m]}setStaticValue(m,x){this.latestValues[m]=x}update(m,x){(m.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=m,this.prevPresenceContext=this.presenceContext,this.presenceContext=x;for(let C=0;C<Gp.length;C++){let P=Gp[C];this.propEventSubscriptions[P]&&(this.propEventSubscriptions[P](),delete this.propEventSubscriptions[P]);let I="on"+P,N=m[I];N&&(this.propEventSubscriptions[P]=this.on(P,N))}this.prevMotionValues=o2(this,this.scrapeMotionValuesFromProps(m,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(m){return this.props.variants?this.props.variants[m]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(m){let x=this.getClosestVariantNode();if(x)return x.variantChildren&&x.variantChildren.add(m),()=>x.variantChildren.delete(m)}addValue(m,x){let C=this.values.get(m);x!==C&&(C&&this.removeValue(m),this.bindToMotionValue(m,x),this.values.set(m,x),this.latestValues[m]=x.get())}removeValue(m){this.values.delete(m);let x=this.valueSubscriptions.get(m);x&&(x(),this.valueSubscriptions.delete(m)),delete this.latestValues[m],this.removeValueFromRenderState(m,this.renderState)}hasValue(m){return this.values.has(m)}getValue(m,x){if(this.props.values&&this.props.values[m])return this.props.values[m];let C=this.values.get(m);return C===void 0&&x!==void 0&&(C=wl(x===null?void 0:x,{owner:this}),this.addValue(m,C)),C}readValue(m,x){let C=this.latestValues[m]!==void 0||!this.current?this.latestValues[m]:this.getBaseTargetFromProps(this.props,m)??this.readValueFromInstance(this.current,m,this.options);return C!=null&&(typeof C=="string"&&(Md(C)||jc(C))?C=parseFloat(C):!Fu(C)&&Tu.test(x)&&(C=wb(m,x)),this.setBaseTarget(m,Y(C)?C.get():C)),Y(C)?C.get():C}setBaseTarget(m,x){this.baseTarget[m]=x}getBaseTarget(m){let{initial:x}=this.props,C;if(typeof x=="string"||typeof x=="object"){let I=Xf(this.props,x,this.presenceContext?.custom);I&&(C=I[m])}if(x&&C!==void 0)return C;let P=this.getBaseTargetFromProps(this.props,m);return P!==void 0&&!Y(P)?P:this.initialValues[m]!==void 0&&C===void 0?void 0:this.baseTarget[m]}on(m,x){return this.events[m]||(this.events[m]=new Wf),this.events[m].add(x)}notify(m,...x){this.events[m]&&this.events[m].notify(...x)}},Hp=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function f2(m){let x=Hp.exec(m);if(!x)return[,];let[,C,P,I]=x;return[`--${C??P}`,I]}function Za(m,x,C=1){let[P,I]=f2(m);if(!P)return;let N=window.getComputedStyle(x).getPropertyValue(P);if(N){let X=N.trim();return Md(X)?parseFloat(X):X}return bi(I)?Za(I,x,C+1):I}function $n(m){return typeof m=="number"?m===0:m!==null?m==="none"||m==="0"||jc(m):!0}var Rb=new Set(["auto","none","0"]);function p2(m,x,C){let P=0,I;for(;P<m.length&&!I;){let N=m[P];typeof N=="string"&&!Rb.has(N)&&rd(N).values.length&&(I=m[P]),P++}if(I&&C)for(let N of x)m[N]=wb(C,I)}var vr=class extends wc{constructor(m,x,C,P,I){super(m,x,C,P,I,!0)}readKeyframes(){let{unresolvedKeyframes:m,element:x,name:C}=this;if(!x||!x.current)return;super.readKeyframes();for(let Q=0;Q<m.length;Q++){let he=m[Q];if(typeof he=="string"&&(he=he.trim(),bi(he))){let ce=Za(he,x.current);ce!==void 0&&(m[Q]=ce),Q===m.length-1&&(this.finalKeyframe=he)}}if(this.resolveNoneKeyframes(),!$a.has(C)||m.length!==2)return;let[P,I]=m,N=Cb(P),X=Cb(I);if(N!==X)if(lp(N)&&lp(X))for(let Q=0;Q<m.length;Q++){let he=m[Q];typeof he=="string"&&(m[Q]=parseFloat(he))}else Fs[C]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:m,name:x}=this,C=[];for(let P=0;P<m.length;P++)(m[P]===null||$n(m[P]))&&C.push(P);C.length&&p2(m,C,x)}measureInitialState(){let{element:m,unresolvedKeyframes:x,name:C}=this;if(!m||!m.current)return;C==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fs[C](m.measureViewportBox(),window.getComputedStyle(m.current)),x[0]=this.measuredOrigin;let P=x[x.length-1];P!==void 0&&m.getValue(C,P).jump(P,!1)}measureEndState(){let{element:m,name:x,unresolvedKeyframes:C}=this;if(!m||!m.current)return;let P=m.getValue(x);P&&P.jump(this.measuredOrigin,!1);let I=C.length-1,N=C[I];C[I]=Fs[x](m.measureViewportBox(),window.getComputedStyle(m.current)),N!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=N),this.removedTransforms?.length&&this.removedTransforms.forEach(([X,Q])=>{m.getValue(X).set(Q)}),this.resolveNoneKeyframes()}},m2=class extends Db{constructor(){super(...arguments),this.KeyframeResolver=vr}sortInstanceNodePosition(m,x){return m.compareDocumentPosition(x)&2?1:-1}getBaseTargetFromProps(m,x){return m.style?m.style[x]:void 0}removeValueFromRenderState(m,{vars:x,style:C}){delete x[m],delete C[m]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:m}=this.props;Y(m)&&(this.childSubscription=m.on("change",x=>{this.current&&(this.current.textContent=`${x}`)}))}};function Pb(m,{style:x,vars:C},P,I){Object.assign(m.style,x,I&&I.getProjectionStyles(P));for(let N in C)m.style.setProperty(N,C[N])}function g2(m){return window.getComputedStyle(m)}var _n=class extends m2{constructor(){super(...arguments),this.type="html",this.renderInstance=Pb}readValueFromInstance(m,x){if(Hr.has(x))return WA(m,x);{let C=g2(m),P=(Xi(x)?C.getPropertyValue(x):C[x])||0;return typeof P=="string"?P.trim():P}}measureInstanceViewportBox(m,{transformPagePoint:x}){return Xo(m,x)}build(m,x,C){va(m,x,C.transformTemplate)}scrapeMotionValuesFromProps(m,x,C){return hs(m,x,C)}},ns=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $o(m,x,C,P){Pb(m,x,void 0,P);for(let I in x.attrs)m.setAttribute(ns.has(I)?I:nn(I),x.attrs[I])}var b2=class extends m2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(m,x){return m[x]}readValueFromInstance(m,x){if(Hr.has(x)){let C=Up(x);return C&&C.default||0}return x=ns.has(x)?x:nn(x),m.getAttribute(x)}scrapeMotionValuesFromProps(m,x,C){return H_(m,x,C)}build(m,x,C){Wg(m,x,this.isSVGTag,C.transformTemplate,C.style)}renderInstance(m,x,C,P){$o(m,x,C,P)}mount(m){this.isSVGTag=yu(m.tagName),super.mount(m)}},y2=(m,x)=>bu(m)?new b2(x):new _n(x,{allowProjection:m!==t.Fragment}),x2=z_({...ZA,...qo,...nC,...Tb},y2),Yl=Ye(x2),zp=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],gs=zp,Ca=v(S());function Mb(m,x){let C=0;return(...P)=>{let I=Date.now();I-C>=x&&(C=I,m(...P))}}function bs(m){let x=(0,Ca.default)(),C=[],P=0;return m.replace(x,(I,N)=>(N>P&&C.push(...m.slice(P,N).split("")),C.push(I),P=N+I.length,I)),P<m.length&&C.push(...m.slice(P).split("")),C}function Vp({children:m,className:x,characterVariants:C,dadElement:P,onCharacterAnimationComplete:I,key:N}){if(typeof m=="string"){let X=bs(m).map((Q,he)=>{let ce=t.useRef(null),le=I?Mb(()=>I(ce),10):void 0;return e.jsx(Yl.span,{ref:ce,className:x,variants:C,onAnimationComplete:le,children:Q},`span-${N}-${Q}-${he}`)});return P(X,!0)}else if(Array.isArray(m)){let X=m.map(Q=>typeof Q=="string"?Q.split("").map((he,ce)=>{let le=t.useRef(null),De=I?Mb(()=>I(le),10):void 0;return e.jsx(Yl.span,{ref:le,className:x,variants:C,onAnimationComplete:De,children:he},`span-${N}-${he}-${ce}`)}):Q);return P(X)}return P(m,!0)}function Ko({characterVariants:m,onCharacterAnimationComplete:x,delay:C}){let P={},I={hidden:m.hidden,visible:{...m.visible,opacity:1,transition:{staggerChildren:C/1e3}}};return gs.forEach(N=>{try{let X=Yl[N];if(X){let Q=he=>{let{children:ce,id:le,className:De}=he,{node:Fe,...Je}=he;switch(N){case"table":case"input":case"hr":case"img":return t.createElement(X,{...Je,key:`${N}-${le}`,variants:De?void 0:I,onAnimationComplete:x},ce);case"tr":case"th":case"td":return e.jsx(X,{...Je,children:ce});case"p":return e.jsx(Vp,{children:ce,characterVariants:m,onCharacterAnimationComplete:x,dadElement:ze=>(Array.isArray(ze)&&ze.push(e.jsx(Yl.span,{style:{display:"block",height:0,width:0}},`span-${le}-newline`)),ze)},le);case"span":return e.jsx(Vp,{children:ce,characterVariants:m,onCharacterAnimationComplete:x,dadElement:ze=>Array.isArray(ze)?t.createElement(X,{...Je,key:`${N}-${le}`,children:ze}):ze},le);default:return e.jsx(Vp,{children:ce,characterVariants:m,onCharacterAnimationComplete:x,dadElement:(ze,et)=>t.createElement(X,{...Je,key:`${N}-${le}`,variants:et||De?void 0:I},ze)},le)}};P[N]=Q}}catch{}}),P}function Qo(m){let{delay:x=10,characterVariants:C={hidden:{opacity:0},visible:{opacity:1,transition:{opacity:{duration:0}}}},onCharacterAnimationComplete:P}=m,I=t.useMemo(()=>({hidden:{},visible:{opacity:1,transition:{staggerChildren:x/1e3}}}),[x]),N=t.useMemo(()=>C,[x]),X=t.useMemo(()=>Ko({characterVariants:N,onCharacterAnimationComplete:P,delay:x}),[x,N,P]);return{sentenceVariants:I,components:X}}function Zo(m){let{delay:x=10,children:C,motionProps:P={},components:I,...N}=m,{characterVariants:X,onCharacterAnimationComplete:Q,...he}=P,{sentenceVariants:ce,components:le}=Qo({delay:x,characterVariants:X,onCharacterAnimationComplete:Q});return e.jsx(Yl.span,{variants:ce,initial:"hidden",animate:"visible",...he,children:e.jsx(r.default,{...N,components:{...le,...I},children:C})},`typewriter-internal-${C}`)}async function Bb(m){let{delay:x=10,children:C,motionProps:P={},components:I,...N}=m,{characterVariants:X,onCharacterAnimationComplete:Q,...he}=P,{sentenceVariants:ce,components:le}=Qo({delay:x,characterVariants:X,onCharacterAnimationComplete:Q}),De=await i.MarkdownAsync({...N,components:{...le,...I},children:C});return e.jsx(Yl.span,{variants:ce,initial:"hidden",animate:"visible",...he,children:De},`typewriter-internal-${C}`)}function kb(m){let{delay:x=10,children:C,motionProps:P={},components:I,...N}=m,{characterVariants:X,onCharacterAnimationComplete:Q,...he}=P,{sentenceVariants:ce,components:le}=Qo({delay:x,characterVariants:X,onCharacterAnimationComplete:Q}),[De,Fe]=t.useState("hidden");return t.useEffect(()=>(setTimeout(()=>{Fe("visible")},10),()=>{Fe("hidden")}),[C]),e.jsx(Yl.span,{variants:ce,initial:"hidden",animate:De,...he,children:e.jsx(i.MarkdownHooks,{...N,components:{...le,...I},children:C})},`typewriter-internal-${C}`)}return Ey.MarkdownTypewriter=Zo,Ey.MarkdownTypewriterAsync=Bb,Ey.MarkdownTypewriterHooks=kb,Ey}var v3e=_3e();function T3e(){const{data:t=[]}=Ave(),{selectChoice:e}=bne();return un.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",overflow:"auto",gap:"8px",maxHeight:"100%",margin:0,pointerEvents:t?.length>0?"auto":"none"},children:t?.map((i,n)=>un.jsx("button",{style:{justifyContent:"center",alignItems:"center"},onClick:()=>e(i),children:i.text},"choice-"+n))})}function E3e(){const{data:{text:t,character:e}={}}=mne(),{data:i=!1}=gne(),{data:n=!1}=Eve(),r=rr.useRef(null),s=rr.useCallback(o=>{if(r.current&&o.current){const l=o.current.offsetTop-r.current.clientHeight/2;r.current.scrollTo({top:l,behavior:"auto"})}},[]),a=t;return un.jsxs("div",{style:{position:"absolute",display:"flex",flexDirection:"column",height:"100%",width:"100%"},children:[un.jsx("div",{style:{flex:1,minHeight:0},children:un.jsx(T3e,{})}),t&&un.jsxs("div",{style:{flex:"0 0 auto",height:"30%",backgroundColor:"white",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e?.name&&un.jsx("b",{style:{padding:"4px 12px",fontSize:"1.1rem"},children:`${e.name||""} ${e.surname||""}`}),un.jsxs("div",{style:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden",marginRight:i||n?"40px":void 0},children:[e?.icon&&un.jsx("img",{src:e.icon,loading:"lazy",alt:"",style:{maxWidth:"28%",height:"auto",objectFit:"contain",display:"block",marginLeft:"8px"}}),un.jsx("div",{ref:r,style:{flex:1,overflowY:"auto",padding:"8px 12px",fontSize:"1rem",lineHeight:1.6},children:un.jsx(v3e.MarkdownTypewriterHooks,{remarkPlugins:[ewe],rehypePlugins:[_Ee],delay:10,motionProps:{onCharacterAnimationComplete:s},children:a})})]})]})]})}function S3e(){return un.jsxs("div",{children:[un.jsx(E3e,{}),un.jsx(Mve,{}),un.jsx("div",{style:{position:"absolute",right:0,top:"70%",width:40},children:un.jsx(Pve,{})})]})}const A3e={bundles:[{name:sne.id,assets:[{alias:"bg02-dorm",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fbg02-dorm.webp?alt=media"}]},{name:"fm01",assets:[{alias:"fm01-body",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-body.webp?alt=media"},{alias:"fm01-eyes-grin",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-grin.webp?alt=media"},{alias:"fm01-eyes-smile",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-smile.webp?alt=media"},{alias:"fm01-eyes-soft",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-soft.webp?alt=media"},{alias:"fm01-eyes-upset",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-upset.webp?alt=media"},{alias:"fm01-eyes-wow",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-wow.webp?alt=media"},{alias:"fm01-mouth-grin00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-grin00.webp?alt=media"},{alias:"fm01-mouth-serious00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-serious00.webp?alt=media"},{alias:"fm01-mouth-serious01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-serious01.webp?alt=media"},{alias:"fm01-mouth-smile00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-smile00.webp?alt=media"},{alias:"fm01-mouth-smile01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-smile01.webp?alt=media"},{alias:"fm01-mouth-soft00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-soft00.webp?alt=media"},{alias:"fm01-mouth-soft01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-soft01.webp?alt=media"},{alias:"fm01-mouth-upset00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-upset00.webp?alt=media"},{alias:"fm01-mouth-upset01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-upset01.webp?alt=media"},{alias:"fm01-mouth-wow01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-wow01.webp?alt=media"}]},{name:"fm02",assets:[{alias:"fm02-body",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-body.webp?alt=media"},{alias:"fm02-eyes-bawl",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-bawl.webp?alt=media"},{alias:"fm02-eyes-joy",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-joy.webp?alt=media"},{alias:"fm02-eyes-nervous",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-nervous.webp?alt=media"},{alias:"fm02-eyes-smile",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-smile.webp?alt=media"},{alias:"fm02-eyes-upset",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-upset.webp?alt=media"},{alias:"fm02-eyes-wow",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-wow.webp?alt=media"},{alias:"fm02-mouth-cry01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-cry01.webp?alt=media"},{alias:"fm02-mouth-nervous00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-nervous00.webp?alt=media"},{alias:"fm02-mouth-nervous01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-nervous01.webp?alt=media"},{alias:"fm02-mouth-smile00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-smile00.webp?alt=media"},{alias:"fm02-mouth-smile01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-smile01.webp?alt=media"},{alias:"fm02-mouth-upset00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-upset00.webp?alt=media"},{alias:"fm02-mouth-upset01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-upset01.webp?alt=media"},{alias:"fm02-mouth-wow01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-wow01.webp?alt=media"}]},{name:"m01",assets:[{alias:"m01-body",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-body.webp?alt=media"},{alias:"m01-eyes-annoy",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-annoy.webp?alt=media"},{alias:"m01-eyes-concern",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-concern.webp?alt=media"},{alias:"m01-eyes-cry",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-cry.webp?alt=media"},{alias:"m01-eyes-grin",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-grin.webp?alt=media"},{alias:"m01-eyes-smile",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-smile.webp?alt=media"},{alias:"m01-eyes-wow",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-wow.webp?alt=media"},{alias:"m01-mouth-annoy00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-annoy00.webp?alt=media"},{alias:"m01-mouth-annoy01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-annoy01.webp?alt=media"},{alias:"m01-mouth-concern00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-concern00.webp?alt=media"},{alias:"m01-mouth-concern01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-concern01.webp?alt=media"},{alias:"m01-mouth-cry00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-cry00.webp?alt=media"},{alias:"m01-mouth-cry01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-cry01.webp?alt=media"},{alias:"m01-mouth-grin00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-grin00.webp?alt=media"},{alias:"m01-mouth-neutral00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-neutral00.webp?alt=media"},{alias:"m01-mouth-neutral01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-neutral01.webp?alt=media"},{alias:"m01-mouth-smile00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-smile00.webp?alt=media"},{alias:"m01-mouth-smile01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-smile01.webp?alt=media"},{alias:"m01-mouth-wow01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-wow01.webp?alt=media"}]}]};async function C3e(){Es.init({manifest:A3e})}const mse=document.body;if(!mse)throw new Error("body element not found");Jd.init(mse,{width:1920,height:1080,backgroundAlpha:0}).then(()=>{const n=new Qi;dt.addLayer("map",n);const r=[];for(let T=0;T<15;T++){r[T]=[];for(let A=0;A<10;A++){const D=Math.random()<.15&&!(A===5&&T===7);r[T][A]=D?1:0;const R=new mE;R.beginFill(D?3355494:5592405),R.drawRect(0,0,32,32),R.endFill(),R.x=A*32,R.y=T*32,n.addChild(R)}}const s=new Qi;dt.addLayer("char",s);const a=new mE;a.beginFill(16763904),a.drawRect(0,0,32,32),a.endFill(),a.x=160,a.y=224,s.addChild(a);const o=dt.app;let l=a.x,h=a.y;const d=2.5;o.stage.interactive=!0,o.stage.on("pointerdown",T=>{const A=T.data.global;l=A.x-32/2,h=A.y-32/2});function p(T,A){const D=Math.floor(T/32),R=Math.floor(A/32);return D<0||R<0||D>=10||R>=15?!0:r[R][D]===1}o.ticker.add(()=>{const T=l-a.x,A=h-a.y,D=Math.sqrt(T*T+A*A);if(D>d){const R=a.x+T/D*d,B=a.y+A/D*d,z=R+32/2,L=B+32/2,H=a.x,te=a.y;a.x=R,a.y=B,p(z,L)&&(a.x=H-T/D,a.y=te-A/D)}}),o.view.style.imageRendering="pixelated",dt.addLayer("ui",new NO);const g=document.getElementById("root");if(!g)throw new Error("root element not found");const y=dt.addHtmlLayer("ui",g);if(!y)throw new Error("htmlLayout not found");const v=N_e.createRoot(y);Jd.onEnd(async()=>{Jd.clear(),await K.jump(MU,{})}),Jd.onLoadingLabel(async(T,{id:A})=>await Es.backgroundLoadBundle(A));const S=new lve;v.render(un.jsx("div",{style:{color:"black",position:"absolute",bottom:0,left:0},children:"Loading..."})),C3e().then(()=>{Jd.clear(),K.call(MU,{}).then(()=>{v.render(un.jsx(cve,{client:S,children:un.jsx(S3e,{})})),S.invalidateQueries({queryKey:[ll]})})})});export{Age as A,Rie as B,sr as C,bJ as D,_J as E,Tye as F,Bte as G,Hie as H,$te as M,fie as N,RQ as R,PQ as T,Cge as a,xF as b,nie as c,rie as d,Zi as e,Wie as f,qie as g,Bie as h,Tie as i,zJ as j,GJ as k};
